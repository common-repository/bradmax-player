(function(){'use strict';const exports=Object.create(null);function require(p){return p.split(".").reduce(function re(o,i){return o[i];},exports);}

!function(e,t){e.bs=e.bs||{},e.bs.net=e.bs.net||{},e.bs.player=e.bs.player||{},e.bs.player.composer=e.bs.player.composer||{},e.bs.player.core=e.bs.player.core||{},e.bs.player.core.events=e.bs.player.core.events||{},e.bs.player.core.manager=e.bs.player.core.manager||{},e.bs.player.core.model=e.bs.player.core.model||{},e.bs.player.core.plugin=e.bs.player.core.plugin||{},e.bs.player.core.plugin.chromecast=e.bs.player.core.plugin.chromecast||{},e.bs.player.core.vtt=e.bs.player.core.vtt||{},e.bs.util=e.bs.util||{},e.haxe=e.haxe||{},e.haxe.http=e.haxe.http||{},e.haxe.io=e.haxe.io||{},e.haxe.crypto=e.haxe.crypto||{},e.haxe.ds=e.haxe.ds||{},e.haxe.ds._List=e.haxe.ds._List||{},e.haxe.ds._StringMap=e.haxe.ds._StringMap||{},e.haxe.iterators=e.haxe.iterators||{};var s,n=function(){return St.__string_rec(this,"")},r=r||{};class a{constructor(e,t){this.r=new RegExp(e,t.split("u").join(""));}match(e){return this.r.global&&(this.r.lastIndex=0),this.r.m=this.r.exec(e),this.r.s=e,null!=this.r.m}matched(e){if(null!=this.r.m&&e>=0&&e<this.r.m.length)return this.r.m[e];throw Ze.thrown("EReg::matched")}matchedLeft(){if(null==this.r.m)throw Ze.thrown("No string matched");return l.substr(this.r.s,0,this.r.m.index)}matchedRight(){if(null==this.r.m)throw Ze.thrown("No string matched");let e=this.r.m.index+this.r.m[0].length;return l.substr(this.r.s,e,this.r.s.length-e)}matchedPos(){if(null==this.r.m)throw Ze.thrown("No string matched");return {pos:this.r.m.index,len:this.r.m[0].length}}matchSub(e,t,s){if(null==s&&(s=-1),this.r.global){this.r.lastIndex=t,this.r.m=this.r.exec(s<0?e:l.substr(e,0,t+s));let n=null!=this.r.m;return n&&(this.r.s=e),n}{let n=this.match(s<0?l.substr(e,t,null):l.substr(e,t,s));return n&&(this.r.s=e,this.r.m.index+=t),n}}split(e){return e.replace(this.r,"#__delim__#").split("#__delim__#")}replace(e,t){return e.replace(this.r,t)}map(e,t){let s=0,n="";do{if(s>=e.length)break;if(!this.matchSub(e,s)){n+=u.string(l.substr(e,s,null));break}let r=this.matchedPos();n+=u.string(l.substr(e,s,r.pos-s)),n+=u.string(t(this)),0==r.len?(n+=u.string(l.substr(e,r.pos,1)),s=r.pos+1):s=r.pos+r.len;}while(this.r.global);return !this.r.global&&s>0&&s<e.length&&(n+=u.string(l.substr(e,s,null))),n}static escape(e){return e.replace(a.escapeRe,"\\$&")}}e.haxe.EReg=a,a.__name__="EReg",Object.assign(a.prototype,{__class__:a,r:null});class l{static dateStr(e){let t=e.getMonth()+1,s=e.getDate(),n=e.getHours(),r=e.getMinutes(),a=e.getSeconds();return e.getFullYear()+"-"+(t<10?"0"+t:""+t)+"-"+(s<10?"0"+s:""+s)+" "+(n<10?"0"+n:""+n)+":"+(r<10?"0"+r:""+r)+":"+(a<10?"0"+a:""+a)}static strDate(e){switch(e.length){case 8:let t=e.split(":"),s=new Date;return s.setTime(0),s.setUTCHours(t[0]),s.setUTCMinutes(t[1]),s.setUTCSeconds(t[2]),s;case 10:let n=e.split("-");return new Date(n[0],n[1]-1,n[2],0,0,0);case 19:let r=e.split(" "),a=r[0].split("-"),l=r[1].split(":");return new Date(a[0],a[1]-1,a[2],l[0],l[1],l[2]);default:throw Ze.thrown("Invalid date format : "+e)}}static cca(e,t){let s=e.charCodeAt(t);if(s==s)return s}static substr(e,t,s){if(null==s)s=e.length;else if(s<0){if(0!=t)return "";s=e.length+s;}return e.substr(t,s)}static indexOf(e,t,s){let n=e.length;for(s<0&&(s+=n)<0&&(s=0);s<n;){if(e[s]===t)return s;++s;}return -1}static lastIndexOf(e,t,s){let n=e.length;for(s>=n?s=n-1:s<0&&(s+=n);s>=0;){if(e[s]===t)return s;--s;}return -1}static remove(e,t){let s=e.indexOf(t);return -1!=s&&(e.splice(s,1),!0)}static iter(e){return {cur:0,arr:e,hasNext:function(){return this.cur<this.arr.length},next:function(){return this.arr[this.cur++]}}}static keyValueIter(e){return new ft(e)}static now(){return Date.now()}}e.haxe.HxOverrides=l,l.__name__="HxOverrides";class i{static array(e){let t=[],s=It(e);for(;s.hasNext();)t.push(s.next());return t}static list(e){let t=new it,s=It(e);for(;s.hasNext();)t.add(s.next());return t}static map(e,t){let s=[],n=It(e);for(;n.hasNext();)s.push(t(n.next()));return s}static mapi(e,t){let s=0,n=[],r=It(e);for(;r.hasNext();)n.push(t(s++,r.next()));return n}static flatten(e){let t=[],s=It(e);for(;s.hasNext();){let e=It(s.next());for(;e.hasNext();)t.push(e.next());}return t}static flatMap(e,t){let s=[],n=It(e);for(;n.hasNext();)s.push(t(n.next()));let r=[],a=It(s);for(;a.hasNext();){let e=It(a.next());for(;e.hasNext();)r.push(e.next());}return r}static has(e,t){let s=It(e);for(;s.hasNext();)if(s.next()==t)return !0;return !1}static exists(e,t){let s=It(e);for(;s.hasNext();)if(t(s.next()))return !0;return !1}static foreach(e,t){let s=It(e);for(;s.hasNext();)if(!t(s.next()))return !1;return !0}static iter(e,t){let s=It(e);for(;s.hasNext();)t(s.next());}static filter(e,t){let s=[],n=It(e);for(;n.hasNext();){let e=n.next();t(e)&&s.push(e);}return s}static fold(e,t,s){let n=It(e);for(;n.hasNext();)s=t(n.next(),s);return s}static foldi(e,t,s){let n=0,r=It(e);for(;r.hasNext();)s=t(r.next(),s,n),++n;return s}static count(e,t){let s=0;if(null==t){let t=It(e);for(;t.hasNext();)t.next(),++s;}else {let n=It(e);for(;n.hasNext();)t(n.next())&&++s;}return s}static empty(e){return !It(e).hasNext()}static indexOf(e,t){let s=0,n=It(e);for(;n.hasNext();){if(t==n.next())return s;++s;}return -1}static find(e,t){let s=It(e);for(;s.hasNext();){let e=s.next();if(t(e))return e}return null}static findIndex(e,t){let s=0,n=It(e);for(;n.hasNext();){if(t(n.next()))return s;++s;}return -1}static concat(e,t){let s=[],n=It(e);for(;n.hasNext();)s.push(n.next());let r=It(t);for(;r.hasNext();)s.push(r.next());return s}}e.haxe.Lambda=i,i.__name__="Lambda",Math.__name__="Math";class o{static hasField(e,t){return Object.prototype.hasOwnProperty.call(e,t)}static field(e,t){try{return e[t]}catch(e){return null}}static setField(e,t,s){e[t]=s;}static getProperty(e,t){let s;if(null==e)return null;{let n;return e.__properties__?(s=e.__properties__["get_"+t],n=s):n=!1,n?e[s]():e[t]}}static setProperty(e,t,s){let n,r;e.__properties__?(n=e.__properties__["set_"+t],r=n):r=!1,r?e[n](s):e[t]=s;}static callMethod(e,t,s){return t.apply(e,s)}static fields(e){let t=[];if(null!=e){let n=Object.prototype.hasOwnProperty;for(var s in e)"__id__"!=s&&"hx__closures__"!=s&&n.call(e,s)&&t.push(s);}return t}static isFunction(e){return "function"==typeof e&&!(e.__name__||e.__ename__)}static compare(e,t){return e==t?0:e>t?1:-1}static compareMethods(e,t){return e==t}static isObject(e){if(null==e)return !1;let t=typeof e;return "string"==t||"object"==t&&null==e.__enum__||"function"==t&&null!=(e.__name__||e.__ename__)}static isEnumValue(e){return null!=e&&null!=e.__enum__}static deleteField(e,t){return !!Object.prototype.hasOwnProperty.call(e,t)&&(delete e[t],!0)}static copy(e){if(null==e)return null;let t={},s=0,n=o.fields(e);for(;s<n.length;){let r=n[s];++s,t[r]=o.field(e,r);}return t}static makeVarArgs(e){return function(){let t=arguments,s=Array.prototype.slice.call(t);return e(s)}}}e.haxe.Reflect=o,o.__name__="Reflect";class u{static string(e){return St.__string_rec(e,"")}static parseInt(e){let t=parseInt(e);return isNaN(t)?null:t}static random(e){return e<=0?0:Math.floor(Math.random()*e)}}u.__name__="Std";class c{constructor(){this.b="";}get_length(){return this.b.length}add(e){this.b+=u.string(e);}addChar(e){this.b+=String.fromCodePoint(e);}addSub(e,t,s){this.b+=null==s?l.substr(e,t,null):l.substr(e,t,s);}toString(){return this.b}}e.haxe.StringBuf=c,c.__name__="StringBuf",Object.assign(c.prototype,{__class__:c,b:null,__properties__:{get_length:"get_length"}});class _{}_.__name__="haxe.SysTools";class h{static urlEncode(e){return encodeURIComponent(e)}static urlDecode(e){return decodeURIComponent(e.split("+").join(" "))}static htmlEscape(e,t){let s="",n=0,r=e;for(;n<r.length;){let e=r,a=n++,l=e.charCodeAt(a);l>=55296&&l<=56319&&(l=l-55232<<10|1023&e.charCodeAt(a+1));l>=65536&&++n;let i=l;switch(i){case 34:s+=t?"&quot;":String.fromCodePoint(i);break;case 38:s+="&amp;";break;case 39:s+=t?"&#039;":String.fromCodePoint(i);break;case 60:s+="&lt;";break;case 62:s+="&gt;";break;default:s+=String.fromCodePoint(i);}}return s}static htmlUnescape(e){return e.split("&gt;").join(">").split("&lt;").join("<").split("&quot;").join('"').split("&#039;").join("'").split("&amp;").join("&")}static contains(e,t){return e.includes(t)}static startsWith(e,t){return e.startsWith(t)}static endsWith(e,t){return e.endsWith(t)}static isSpace(e,t){let s=l.cca(e,t);return s>8&&s<14||32==s}static ltrim(e){let t=e.length,s=0;for(;s<t&&h.isSpace(e,s);)++s;return s>0?l.substr(e,s,t-s):e}static rtrim(e){let t=e.length,s=0;for(;s<t&&h.isSpace(e,t-s-1);)++s;return s>0?l.substr(e,0,t-s):e}static trim(e){return h.ltrim(h.rtrim(e))}static lpad(e,t,s){if(t.length<=0)return e;let n="";for(s-=e.length;n.length<s;)n+=null==t?"null":""+t;return n+=null==e?"null":""+e,n}static rpad(e,t,s){if(t.length<=0)return e;let n="";for(n=null==e?"null":""+e;n.length<s;)n+=null==t?"null":""+t;return n}static replace(e,t,s){return e.split(t).join(s)}static hex(e,t){let s="";do{s="0123456789ABCDEF".charAt(15&e)+s,e>>>=4;}while(e>0);if(null!=t)for(;s.length<t;)s="0"+s;return s}static fastCodeAt(e,t){return e.charCodeAt(t)}static unsafeCodeAt(e,t){return e.charCodeAt(t)}static iterator(e){return new wt(e)}static keyValueIterator(e){return new vt(e)}static isEof(e){return e!=e}static quoteUnixArg(e){return ""==e?"''":new a("[^a-zA-Z0-9_@%+=:,./-]","").match(e)?"'"+h.replace(e,"'","'\"'\"'")+"'":e}static quoteWinArg(e,t){let s=e;if(!new a('^(/)?[^ \t/\\\\"]+$',"").match(s)){let e="",t=-1!=s.indexOf(" ")||-1!=s.indexOf("\t")||""==s||s.indexOf("/")>0;t&&(e+='"');let n=new c,r=0,a=s.length;for(;r<a;){let t=l.cca(s,r++);if(null==t){let s=t;n.b.length>0&&(e+=u.string(n.b),n=new c),e+=String.fromCodePoint(s);}else switch(t){case 34:let s=n.b;e+=u.string(s),e+=u.string(s),n=new c,e+='\\"';break;case 92:n.b+="\\";break;default:let r=t;n.b.length>0&&(e+=u.string(n.b),n=new c),e+=String.fromCodePoint(r);}}e+=u.string(n.b),t&&(e+=u.string(n.b),e+='"'),s=e;}if(t){let e="",t=0,n=s.length;for(;t<n;){let n=l.cca(s,t++);_.winMetaCharacters.indexOf(n)>=0&&(e+=String.fromCodePoint(94)),e+=String.fromCodePoint(n);}return e}return s}static utf16CodePointAt(e,t){let s=e.charCodeAt(t);return s>=55296&&s<=56319&&(s=s-55232<<10|1023&e.charCodeAt(t+1)),s}}e.haxe.StringTools=h,h.__name__="StringTools";class p{static createInstance(e,t){return new(Function.prototype.bind.apply(e,[null].concat(t)))}static getInstanceFields(e){let t=[];for(;null!=e;){let s=0,n=Object.getOwnPropertyNames(e.prototype);for(;s<n.length;){let e=n[s];switch(++s,e){case"__class__":case"__properties__":case"constructor":break;default:-1==t.indexOf(e)&&t.push(e);}}e=e.__super__;}return t}}p.__name__="Type";class d{static error(e){console.error(e);}}d.__name__="bs.Console";class g{constructor(e){g._hx_skip_constructor||this._hx_constructor(e);}_hx_constructor(e){this.url=e,this.headers=[],this.params=[],this.emptyOnData=Et(this,this.onData);}setHeader(e,t){let s=0,n=this.headers.length;for(;s<n;){let n=s++;if(this.headers[n].name==e)return void(this.headers[n]={name:e,value:t})}this.headers.push({name:e,value:t});}addHeader(e,t){this.headers.push({name:e,value:t});}setParameter(e,t){let s=0,n=this.params.length;for(;s<n;){let n=s++;if(this.params[n].name==e)return void(this.params[n]={name:e,value:t})}this.params.push({name:e,value:t});}addParameter(e,t){this.params.push({name:e,value:t});}setPostData(e){this.postData=e,this.postBytes=null;}setPostBytes(e){this.postBytes=e,this.postData=null;}request(e){throw new mt(null,null,{fileName:"haxe/http/HttpBase.hx",lineNumber:186,className:"haxe.http.HttpBase",methodName:"request"})}onData(e){}onBytes(e){}onError(e){}onStatus(e){}hasOnData(){return Et(this,this.onData)!=this.emptyOnData}success(e){this.responseBytes=e,this.responseAsString=null,this.hasOnData()&&this.onData(this.get_responseData()),this.onBytes(this.responseBytes);}get_responseData(){return null==this.responseAsString&&null!=this.responseBytes&&(this.responseAsString=this.responseBytes.getString(0,this.responseBytes.length,nt.UTF8)),this.responseAsString}}e.haxe.http.HttpBase=g,g.__name__="haxe.http.HttpBase",Object.assign(g.prototype,{__class__:g,url:null,responseBytes:null,responseAsString:null,postData:null,postBytes:null,headers:null,params:null,emptyOnData:null,__properties__:{get_responseData:"get_responseData"}});class m extends g{constructor(e){g._hx_skip_constructor=!0,super(),g._hx_skip_constructor=!1,this._hx_constructor(e);}_hx_constructor(e){this.async=!0,this.withCredentials=!1,super._hx_constructor(e);}cancel(){null!=this.req&&(this.req.abort(),this.req=null);}request(e){this.responseAsString=null,this.responseBytes=null,this.responseHeaders=null;let s=this.req=Ot.createXMLHttpRequest(),n=this,r=function(e){if(4!=s.readyState)return;let r;try{r=s.status;}catch(e){r=null;}if(0==r&&Ot.get_supported()&&null!=t.location){let e=t.location.protocol.toLowerCase();new a("^(?:about|app|app-storage|.+-extension|file|res|widget):$","").match(e)&&(r=null!=s.response?200:404);}if(null==r&&(r=null),null!=r&&n.onStatus(r),null!=r&&r>=200&&r<400){n.req=null;let e=s.getAllResponseHeaders().split("\r\n"),t=[],r=0,a=e;for(;r<a.length;){let e=a[r];++r,""!=e&&t.push(e);}e=t,n.responseHeaders=new _t;let l=0;for(;l<e.length;){let t=e[l++].split(": "),s=t.shift(),r=1==t.length?t[0]:t.join(": ");r=h.ltrim(h.rtrim(r)),n.responseHeaders.h[s]=r;}n.success(st.ofData(s.response));}else if(null==r||0==r&&null==s.response)n.req=null,n.onError("Failed to connect or resolve host");else if(null==r){n.req=null;let e=null!=s.response?st.ofData(s.response):null;n.responseBytes=e,n.onError("Http Error #"+s.status);}else switch(r){case 12007:n.req=null,n.onError("Unknown host");break;case 12029:n.req=null,n.onError("Failed to connect to host");break;default:n.req=null;let e=null!=s.response?st.ofData(s.response):null;n.responseBytes=e,n.onError("Http Error #"+s.status);}};this.async&&(s.onreadystatechange=r);let l=this.postData,o=this.postBytes,c=null==l?null==o?null:new Blob([o.b.bufferValue]):null==o?l:null;if(null!=c)e=!0;else {let e=0,t=this.params;for(;e<t.length;){let s=t[e];++e,c=null==c?"":(null==c?"null":u.string(c))+"&";let n=s.name,r=(null==c?"null":u.string(c))+encodeURIComponent(n)+"=",a=s.value;c=r+encodeURIComponent(a);}}try{e?s.open("POST",this.url,this.async):null!=c?(s.open("GET",this.url+(this.url.split("?").length<=1?"?":"&")+(null==c?"null":u.string(c)),this.async),c=null):s.open("GET",this.url,this.async),s.responseType="arraybuffer";}catch(l){let e=Ze.caught(l).unwrap();return this.req=null,void this.onError(e.toString())}s.withCredentials=this.withCredentials,!i.exists(this.headers,(function(e){return "Content-Type"==e.name}))&&e&&null==this.postData&&s.setRequestHeader("Content-Type","application/x-www-form-urlencoded");let _=0,p=this.headers;for(;_<p.length;){let e=p[_];++_,s.setRequestHeader(e.name,e.value);}s.send(c),this.async||r();}static requestUrl(e){let t=new m(e);t.async=!1;let s=null;return t.onData=function(e){s=e;},t.onError=function(e){throw Ze.thrown(e)},t.request(!1),s}}e.haxe.http.HttpJs=m,m.__name__="haxe.http.HttpJs",m.__super__=g,Object.assign(m.prototype,{__class__:m,async:null,withCredentials:null,responseHeaders:null,req:null});class y extends m{constructor(e){super(e);}registerEvents(e){let t=this;e.onreadystatechange=function(){if(4!=e.readyState)return;let s;try{s=e.status;}catch(e){s=null;}if(null==s&&(s=null),null!=s&&t.onStatus(s),null!=s&&s>=200&&s<400)t.onData(e.response);else if(null==s)t.onError("Failed to connect or resolve host");else switch(s){case 0:t.onError("Unable to make request (may be blocked due to cross-domain permissions)");break;case 12007:t.onError("Unknown host");break;case 12029:t.onError("Failed to connect to host");break;default:t.onError("Http Error #"+e.status);}};}customRequest(e,t,s,n){let r=new XMLHttpRequest;this.registerEvents(r);let a="",l=0,i=this.params;for(;l<i.length;){let e=i[l];++l,0!=a.length&&(a=u.string(a)+"&");let t=o.field(e,"name");null==t&&(t=o.field(e,"param"));let s=encodeURIComponent(t),n=e.value,r=encodeURIComponent(n);a=u.string(a)+(s+"=")+r;}try{"GET"==n&&null!=a&&""!=a?(r.open(n,this.url+(this.url.split("?").length<=1?"?":"&")+u.string(a),!0),a=""):r.open(n,this.url,!0);}catch(l){let e=Ze.caught(l).unwrap();return void this.onError(e.toString())}let c=0,_=this.headers;for(;c<_.length;){let e=_[c];++c;let t=o.field(e,"header");null==t&&(t=o.field(e,"name")),r.setRequestHeader(t,e.value);}r.send(a);}}e.bs.net.Http=y,y.__name__="bs.net.Http",y.__super__=m,Object.assign(y.prototype,{__class__:y});class b{constructor(){this.pluginsVideo=[],this.plugins=[],this.data=exports.configuration;}createPlayer(e,t,s){return null==e&&(e="PLAYER"),this.readPlugins(e),this.player=new w,this.player.uid=e,this.player.plugins=this.plugins,this.player.pluginsVideo=this.pluginsVideo,this.player.initialize(this.getParent(t),this.getData(s)),this.player}readPlugins(e){this.resolvePlugins(e,exports.bs.player.plugin);let t=function(e){switch(e.className){case"bs.player.plugin.advertisement.AdvertisementDataProvider":case"bs.player.plugin.dataProvider.BradmaxDataProvider":return 1;case"bs.player.plugin.skin.HtmlSkin":return 0;case"bs.player.plugin.freewheel.FreeWheel":case"bs.player.plugin.video.Video":return 2;default:return 3}};this.plugins.sort((function(e,s){return t(e)-t(s)}));}resolvePlugins(e,t){if(0==o.isObject(t))return;let s=t.__name__;if(null!=s){let n,r=p.createInstance(t,[]),a=t;if(0==o.isObject(a))n=!1;else {let e=Object.prototype.hasOwnProperty.call(a,"__plugfaces__")?o.field(a,"__plugfaces__"):null;n=null!=e&&e.indexOf("IVideoPlayer")>-1;}if(n)return void this.pluginsVideo.push(r);let l,i=t;if(0==o.isObject(i))l=!1;else {let e=Object.prototype.hasOwnProperty.call(i,"__plugfaces__")?o.field(i,"__plugfaces__"):null;l=null!=e&&e.indexOf("IPlugin")>-1;}if(l)return r.className=s,r.uid=r.context=e,void this.plugins.push(r)}else {let s=0,n=o.fields(t);for(;s<n.length;)this.resolvePlugins(e,o.field(t,n[s++]));}}getData(e){return null!=e?e:this.data}getParent(e){return null!=e?e:this.parent}}b.__name__="bs.player.composer.Composer",Object.assign(b.prototype,{__class__:b,data:null,parent:null,plugins:null,pluginsVideo:null,player:null});class f{__keepFieldsFix(){return p.getInstanceFields(f)}static getScreenSize(){let e=window.screen;return {width:0|(e.width>e.height?e.width:e.height),height:0|(e.width>e.width?e.height:e.width)}}static isMobile(){return f.mobile}static isSmartTV(){return f.smartTV}static isWebView(){return null!=window.bradmaxSetFullscreen}static isWebOsApp(){return !!f.isSmartTV()&&null!=window.webOS}static getUserAgent(){return window.navigator.userAgent}static getBrowserName(){return f.browserName}static isBrowserOnline(){return window.navigator.onLine}static isMediaSourceExtensionSupported(){let e=window;return Object.prototype.hasOwnProperty.call(e,"MediaSource")}static baseUrl(){let e=t.location;return f.baseUrlCacheLastFullUrl!=e.href&&(f.baseUrlCacheLastFullUrl=e.href,f.baseUrlCacheLastBaseUrl=f.baseUrlCacheLastFullUrl.split(e.hash).join("")),f.baseUrlCacheLastBaseUrl}static log(e){null==f.traceLog&&(f.traceLog="<h5>trace:</h5>"),f.traceLog+="<p>"+e+"</p>",f.printLog(),null==f.traceTrg&&window.addEventListener("load",f.printLog);}static printLog(){null==f.traceTrg&&(f.traceTrg=window.document.getElementById("trace")),null!=f.traceTrg&&(f.traceTrg.innerHTML=f.traceLog);}static highlightHtmlNode(e){let t,s=window.document.body;if(Object.prototype.hasOwnProperty.call(s,"createTextRange"))t=s.createTextRange(),t.moveToElementText(e),t.select();else {let s=window.getSelection();t=window.document.createRange(),t.selectNodeContents(e),s.removeAllRanges(),s.addRange(t);}}static focusElement(e,t){if(null!=e)try{e.focus(t);}catch(t){e.focus();}}static copyToClipboard(e){let t=window.document.createElement("input");t.style.fontSize="12pt",t.style.border="0",t.style.padding="0",t.style.margin="0",t.style.position="absolute","rtl"==window.document.documentElement.getAttribute("dir")?t.style.right="-9999px":t.style.left="-9999px";let s,n=window.pageYOffset;null==n&&(n=window.document.documentElement.scrollTop),t.addEventListener("focus",(function(e){window.scrollTo(0,n);})),t.style.top=n+"px",t.setAttribute("readonly",""),t.value=e,window.document.body.appendChild(t),f.focusElement(t,{preventScroll:!0}),t.setSelectionRange(0,t.value.length);try{s=window.document.execCommand("copy");}catch(e){s=!1;}return t.blur(),window.document.body.removeChild(t),s}static findThisJsScriptAbsolutePath(e){let t=null;if(t=window.document.currentScript,null!=t)return t.src;let s=window.document.getElementsByTagName("script");return t=f.findScriptBySrc(s,e),null==t&&e.endsWith("_")&&(t=f.findScriptBySrc(s,l.substr(e,0,-1))),null!=t?t.src:null}static findScriptBySrc(e,t){let s=null,n=0;for(;n<e.length;){let r=e[n];if(++n,s=r.getAttribute("src"),null!=s&&(s=s.split("/").pop(),s=s.split(".min.js").join(""),s=s.split(".js.min").join(""),s=s.split(".js").join(""),s==t))return r}return null}static disableHtmlSelection(){f.disableHtmlSelectionFunction=function(e){return e.preventDefault(),!1},window.document.addEventListener("selectstart",f.disableHtmlSelectionFunction);}static enableHtmlSelection(){null!=f.disableHtmlSelectionFunction&&(window.document.removeEventListener("selectstart",f.disableHtmlSelectionFunction),f.disableHtmlSelectionFunction=null);}static canRequestVideoFrameCallback(){return "requestVideoFrameCallback"in HTMLVideoElement.prototype}static isWebGLAvailable(){if(f.isWebView())return !1;try{let e=window,t=Object.prototype.hasOwnProperty.call(e,"WebGLRenderingContext"),s=window.document.createElement("canvas");if(!t)return t;let n=null!=s.getContext("webgl")||null!=s.getContext("experimental-webgl");return !!t&&n}catch(e){return !1}}static isWebGL2Available(){if(f.isWebView())return !1;try{let e=window,t=Object.prototype.hasOwnProperty.call(e,"WebGL2RenderingContext"),s=window.document.createElement("canvas");if(!t)return t;let n=null!=s.getContext("webgl2");return !!t&&n}catch(e){return !1}}static getOrientation(){if(null!=window.screen.orientation)return window.screen.orientation.angle;let e=window.orientation;return "number"==typeof e&&(0|e)===e?window.orientation:0}static isDeviceOrientationSupported(){let e=window;return Object.prototype.hasOwnProperty.call(e,"DeviceOrientationEvent")}static connectDeviceOrientation(e,t){f.isDeviceOrientationSupported()&&(null!=DeviceOrientationEvent.requestPermission?DeviceOrientationEvent.requestPermission().then((function(t){"granted"==t&&window.addEventListener("deviceorientation",e,!1);})).catch(d.error):window.addEventListener("deviceorientation",e,!1));}static disconnectDeviceOrientation(e){f.isDeviceOrientationSupported()&&window.removeEventListener("deviceorientation",e);}static isVrSupported(){let e=t.navigator;if(null==e)return Promise.resolve(!1);let s=e.xr;return null==s?Promise.resolve(!1):s.isSessionSupported("immersive-vr")}static requestVrSession(){let e=t.navigator;if(null==e)return Promise.resolve(null);let s=e.xr;return null==s?Promise.resolve(null):s.requestSession("immersive-vr",{optionalFeatures:["local-floor","bounded-floor","hand-tracking","layers"]})}static getTizenVersion(){let e=null,t=f.getUserAgent(),s=t.indexOf("Tizen ");return s>-1&&(e=parseFloat(t.substring(s+6))),e}}e.bs.util.BrowserTools=f,f.__name__="bs.util.BrowserTools",Object.assign(f.prototype,{__class__:f});class x{constructor(){this.runDetectScripts();}runDetectScripts(){x.expose.player.list=Et(this,this.listPlayers),x.expose.player.create=Et(this,this.createPlayerInElement),x.expose.player.destroy=Et(this,this.destroyPlayer),x.expose.player.close=Et(this,this.closePlayer),x.expose.player.getById=Et(this,this.getPlayerById),x.expose.player.getVersion=Et(this,this.getVersion),x.expose.player.collectClickForLaterAutoplay=x.collectClickForLaterAutoplay,this.detectScript(),this.detectScriptAttributes();}getVersion(){return "v2.14.417"}getPlayerById(e){return x.players.h[e]}destroyPlayer(e){this.closePlayer(e);let t=window.document.getElementById(e.uid);null!=t&&t.parentNode.removeChild(t);let s=window.document.getElementById("player_con_"+e.uid.split("_")[1]);null!=s&&null!=s.remove&&s.remove();}closePlayer(e){if(null==e)return;let t=e.uid,s=x.players;Object.prototype.hasOwnProperty.call(s.h,t)&&delete s.h[t],e.destroy(!0);let n=window.document.getElementById("player_con_"+e.uid.split("_")[1]);null!=n&&St.__cast(n.parentNode,HTMLDivElement).removeAttribute("data-bradmax-player-pid");}checkIfPlayerExistInElement(e){return !!e.hasAttribute("data-bradmax-player-pid")}getPlayerByElement(e){return e.hasAttribute("data-bradmax-player-pid")?x.players.h["player_"+e.getAttribute("data-bradmax-player-pid")]:null}createPlayerInElement(e,t,s){return this.checkIfPlayerExistInElement(e)&&this.closePlayer(this.getPlayerByElement(e)),"string"==typeof t&&null==(t=Ge.decode(t))?(console.error("PLAYER VARIABLE DATA INVALID"),null):this.createPlayer(e,t,null,"inside",s)}setPlayerContainerStyles(e,t){e.setAttribute("id","player_con_"+t),e.style.display="block",e.style.position="relative",e.style.width="100%",e.style.height="100%",e.style.background="#000000",e.style.overflow="hidden";}setPlayerElementStyles(e,t){e.setAttribute("id",t),e.setAttribute("class","bsplayer"),e.style.display="block",e.style.position="relative",e.style.width="100%",e.style.height="100%",e.style.background="#000000",e.style.overflow="hidden";}createPlayer(e,t,s,n,r){if(null==n&&(n="before"),null==s){let e,t=24,n=Je.UID_CHARS.length,r="",a=0;for(;a<t;){let t;switch(e="xxxx-xxxx-xxxx-xxxx-xxxx".charAt(a++),e){case"-":case"_":t=e;break;default:t=Je.UID_CHARS.charAt(u.random(n));}r+=t;}s=r;}let a,l="player_"+s;if(this.setPID(e,s),null!=e.querySelector(".bsplayer")){a=e.querySelector(".bsplayer");let t=e.querySelector(".bsplayer").parentNode;this.setPlayerContainerStyles(t,s),this.setPlayerElementStyles(a,l);}else {let t=window.document.createElement("div");switch(this.setPlayerContainerStyles(t,s),n){case"before":e.parentElement.insertBefore(t,e);break;case"inside":e.appendChild(t);}a=window.document.createElement("div"),this.setPlayerElementStyles(a,l),t.appendChild(a);}return this.appendPlayer(this.useHTML5(a,t,l,r))}appendPlayer(e){if(x.players.h[e.uid]=e,window.hasOwnProperty("_ba_createPlayer")){let t=window._ba_createPlayer;if("function"==typeof t)try{t(e);}catch(e){}}return e}listPlayers(){let e=[],t=x.players.h,s=Object.keys(t),n=s.length,r=0;for(;r<n;)e.push(t[s[r++]]);return e}detectScriptAttributes(){let e=window.document.getElementsByTagName("script"),t=[],s=0;for(;s<e.length;)t.push(e[s++]);let n=function(e){let t=null!=e.innerText?h.trim(e.innerText):null;return !(null==t||!t.startsWith("{"))&&t.endsWith("}")},r=0;for(;r<t.length;){let e=t[r];if(++r,((a=e).hasAttribute("data-bs-variables")||n(a))&&a.hasAttribute("data-bs-parent-id")&&!a.hasAttribute("data-bradmax-player-pid")){let t={},r=null,a=e.getAttribute("data-bs-parent-id");try{if(r=window.document.getElementById(a),e.hasAttribute("data-bs-variables")&&(t=Ge.decode(e.getAttribute("data-bs-variables"))),(null==t||0==o.fields(t).length)&&null!=e.innerText&&n(e))try{t=JSON.parse(e.innerText);}catch(s){let e=Ze.caught(s).unwrap();return console.error("INNER TEXT VARIABLE INVALID DATA"),void console.error(e)}if(null==t)return void console.error("INLINE VARIABLE DATA INVALID")}catch(s){let e=Ze.caught(s).unwrap();return console.error("VARIABLE DATA INVALID"),void console.error(e)}if(null==r)return void console.error("ELEMENT ID NOT FOUND: "+a);this.createPlayer(r,t,null,"inside");}}var a;}detectScript(){let e=window.document.getElementsByTagName("script"),t=0;for(;t<e.length;){let s=e[t];if(++t,this.isEmptyPlayerScript(s)){let e={};try{e=JSON.parse(s.textContent);}catch(t){return void console.error("JSON DATA INVALID")}this.createPlayer(s,e);}}}isEmptyPlayerScript(e){return !(!e.hasAttribute("data-bigsoda-player")||e.hasAttribute("data-bradmax-player-pid"))}useHTML5(e,t,s,n){let r=o.field(o.field(x.expose,"player"),"composers"),a=o.fields(r);return p.createInstance(o.field(r,null==n?a[0]:n),[]).createPlayer(s,e,t)}setPID(e,t){return e.hasAttribute("data-bradmax-player-pid")||e.setAttribute("data-bradmax-player-pid",t),e.getAttribute("data-bradmax-player-pid")}__keepFieldsFix(){return p.getInstanceFields(x)}static main(){null==x.expose.player.embeder&&(x.expose.player.embeder={},null==o.field(x.expose.player.embeder,"modular_v2.14.417")&&(x.expose.player.embeder["modular_v2.14.417"]=new x));}static collectClickForLaterAutoplay(){if(x.lastCallForCollectClickForLaterAutoplay=new Date,x.htmlVideoElementsForLaterAutoplay.length>=2)return;let e=window.document.createElement("video");e.controls=!1,e.setAttribute("src",exports.mp4),e.setAttribute(x.VIDEO_TAG_FOR_AUTOPLAY_INITIALSED,"1"),f.isiOS&&(e.setAttribute("playsinline",""),e.setAttribute("webkit-playsinline",""));let t=e.play();null!=t?(x.pendingVideoElementsForLaterAutoplay+=1,t.then((function(){e.pause(),x.htmlVideoElementsForLaterAutoplay.push(e),x.pendingVideoElementsForLaterAutoplay-=1;let t=0,s=x.listenersWaitinfForVideoElementForAutoplay;for(;t<s.length;)s[t++]();x.listenersWaitinfForVideoElementForAutoplay=[];}))):(e.pause(),x.htmlVideoElementsForLaterAutoplay.push(e));}static getLastCallForCollectClickForLaterAutoplay(){return x.lastCallForCollectClickForLaterAutoplay}static getHtmlVideoReadyForAutoplay(){return 0==x.htmlVideoElementsForLaterAutoplay.length?null:x.htmlVideoElementsForLaterAutoplay.pop()}static hasPendingVideoElementsForLaterAutoplay(){return x.pendingVideoElementsForLaterAutoplay>0}static hasHtmlVideoReadyForAutoplay(){return x.htmlVideoElementsForLaterAutoplay.length>0}static addListenerForVideoElementForAutoplay(e){x.listenersWaitinfForVideoElementForAutoplay.push(e);}}e.bs.player.composer.Embeder=x,x.__name__="bs.player.composer.Embeder",Object.assign(x.prototype,{__class__:x});class w{constructor(){this.modules={},this.pluginsVideo=[],this.plugins=[],this.eventHub=j.getInstance();}destroy(e){if(null==e&&(e=!1),!e)return void window.bradmax.player.destroy(this);try{V.destroyMonitor(this.uid);}catch(t){let e=Ze.caught(t).unwrap();console.error({msg:"Exception catched during destroying monitor.",exception:e});}let t=0,s=this.plugins;for(;t<s.length;){let e=s[t];++t;try{e.destroy();}catch(t){let s=Ze.caught(t).unwrap();console.error({msg:"Exception catched during destroying plugin.",plugin:e,exception:s});}}for(;this.plugins.length>0;)this.plugins.pop();}activatePlugins(){let e=0,t=this.plugins;for(;e<t.length;){let s=t[e];++e,s.context=s.uid=this.uid,s.set_player(this),this.eventHub.registerPlugin(s),s.set_parentDisplay(this.parent),s.set_variables(this.data),this.modules[s.getPluginName()]=s,"JavascriptApi"==s.getPluginName()&&(this.api=s);}let s=0,n=this.plugins;for(;s<n.length;)n[s++].create();let r=0,a=this.plugins;for(;r<a.length;)a[r++].activate();let l=0,i=this.plugins;for(;l<i.length;)i[l++].postActivate();}initialize(e,t){this.parent=e,this.data=Xe.merge(exports.variables,t),V.getMonitor(this.uid),this.activatePlugins();}__keepFieldsFix(){return p.getInstanceFields(w)}}e.bs.player.core.Player=w,w.__name__="bs.player.core.Player",Object.assign(w.prototype,{__class__:w,uid:null,configuration:null,plugins:null,pluginsVideo:null,modules:null,api:null,parentDisplay:null,parent:null,data:null,eventHub:null});class v{constructor(e){this.className="bs.player.core.events.BaseEvent",this.type=e;}dispatch(e){j.getInstance().dispatch(e,S.__name__,this.type,this);}__keepFieldsFix(){return p.getInstanceFields(v)}}e.bs.player.core.events.BaseEvent=v,v.__name__="bs.player.core.events.BaseEvent",Object.assign(v.prototype,{__class__:v,className:null,type:null,data:null});class S extends v{constructor(e){super(e),this.className=S.__name__;}dispatch(e){j.getInstance().dispatch(e,S.__name__,this.type,this);}static addOnce(e,t,s){j.getInstance().addOnce(e,S.__name__,t,s);}static add(e,t,s){j.getInstance().add(e,S.__name__,t,s);}static remove(e,t,s){j.getInstance().remove(e,S.__name__,t,s);}static disable(e,t){j.getInstance().disable(e,S.__name__,t);}static enable(e,t){j.getInstance().enable(e,S.__name__,t);}}e.bs.player.core.events.AdEvent=S,S.__name__="bs.player.core.events.AdEvent",S.__super__=v,Object.assign(S.prototype,{__class__:S});class O extends v{constructor(e){super(e),this.className=O.__name__;}dispatch(e){j.getInstance().dispatch(e,O.__name__,this.type,this);}static addOnce(e,t,s){j.getInstance().addOnce(e,O.__name__,t,s);}static add(e,t,s){j.getInstance().add(e,O.__name__,t,s);}static remove(e,t,s){j.getInstance().remove(e,O.__name__,t,s);}static disable(e,t){j.getInstance().disable(e,O.__name__,t);}static enable(e,t){j.getInstance().enable(e,O.__name__,t);}}e.bs.player.core.events.ChromecastEvent=O,O.__name__="bs.player.core.events.ChromecastEvent",O.__super__=v,Object.assign(O.prototype,{__class__:O});class I extends v{constructor(e){super(e),this.className=I.__name__;}dispatch(e){j.getInstance().dispatch(e,I.__name__,this.type,this);}static add(e,t,s){j.getInstance().add(e,I.__name__,t,s);}static addOnce(e,t,s){j.getInstance().addOnce(e,I.__name__,t,s);}static remove(e,t,s){j.getInstance().remove(e,I.__name__,t,s);}static disable(e,t){j.getInstance().disable(e,I.__name__,t);}static enable(e,t){j.getInstance().enable(e,I.__name__,t);}static filter(e){}}e.bs.player.core.events.ControlEvent=I,I.__name__="bs.player.core.events.ControlEvent",I.__super__=v,Object.assign(I.prototype,{__class__:I});class E extends v{constructor(e){super(e),this.className=E.__name__;}dispatch(e){j.getInstance().dispatch(e,E.__name__,this.type,this);}static addOnce(e,t,s){j.getInstance().addOnce(e,E.__name__,t,s);}static add(e,t,s){j.getInstance().add(e,E.__name__,t,s);}static remove(e,t,s){j.getInstance().remove(e,E.__name__,t,s);}static disable(e,t){j.getInstance().disable(e,E.__name__,t);}static enable(e,t){j.getInstance().enable(e,E.__name__,t);}static filter(e){}}e.bs.player.core.events.DataProviderEvent=E,E.__name__="bs.player.core.events.DataProviderEvent",E.__super__=v,Object.assign(E.prototype,{__class__:E});class C extends v{constructor(e){super(e),this.className=C.__name__;}dispatch(e){j.getInstance().dispatch(e,C.__name__,this.type,this);}static addOnce(e,t,s){j.getInstance().addOnce(e,C.__name__,t,s);}static add(e,t,s){j.getInstance().add(e,C.__name__,t,s);}static remove(e,t,s){j.getInstance().remove(e,C.__name__,t,s);}static disable(e,t){j.getInstance().disable(e,C.__name__,t);}static enable(e,t){j.getInstance().enable(e,C.__name__,t);}}e.bs.player.core.events.DisplayEvent=C,C.__name__="bs.player.core.events.DisplayEvent",C.__super__=v,Object.assign(C.prototype,{__class__:C});class P extends v{constructor(e){super(e),this.className=P.__name__;}dispatch(e){j.getInstance().dispatch(e,P.__name__,this.type,this);}static addOnce(e,t,s){j.getInstance().addOnce(e,P.__name__,t,s);}static add(e,t,s){j.getInstance().add(e,P.__name__,t,s);}static remove(e,t,s){j.getInstance().remove(e,P.__name__,t,s);}static disable(e,t){j.getInstance().disable(e,P.__name__,t);}static enable(e,t){j.getInstance().enable(e,P.__name__,t);}}e.bs.player.core.events.EditEvent=P,P.__name__="bs.player.core.events.EditEvent",P.__super__=v,Object.assign(P.prototype,{__class__:P});class A extends v{constructor(e){super(e),this.className=A.__name__;}dispatch(e){j.getInstance().dispatch(e,A.__name__,this.type,this);}static add(e,t,s){j.getInstance().add(e,A.__name__,t,s);}static disable(e,t){j.getInstance().disable(e,A.__name__,t);}static enable(e,t){j.getInstance().enable(e,A.__name__,t);}static filter(e){}}e.bs.player.core.events.ErrorEvent=A,A.__name__="bs.player.core.events.ErrorEvent",A.__super__=v,Object.assign(A.prototype,{__class__:A,message:null});class L{constructor(){}setPlatformEvent(e){this.platformEvent=e;}stopPropagation(){null!=this.platformEvent.stopPropagation?(this.platformEvent.stopPropagation(),this.platformEvent.preventDefault()):this.platformEvent.cancelBubble=!0;}__keepFieldsFix(){return p.getInstanceFields(L)}static get_FULLSCREEN_CHANGE(){return L.fullscreenEventName}}e.bs.player.core.events.NativeEvent=L,L.__name__="bs.player.core.events.NativeEvent",L.__properties__={get_FULLSCREEN_CHANGE:"get_FULLSCREEN_CHANGE"},Object.assign(L.prototype,{__class__:L,currentTarget:null,target:null,type:null,mouseX:null,mouseY:null,wheelDelta:null,platformEvent:null});class k extends v{constructor(e){super(e),this.className=k.__name__;}}e.bs.player.core.events.PlayerCommandEvent=k,k.__name__="bs.player.core.events.PlayerCommandEvent",k.__super__=v,Object.assign(k.prototype,{__class__:k});class N extends v{constructor(e){super(e),this.className=N.__name__;}dispatch(e){j.getInstance().dispatch(e,N.__name__,this.type,this);}static add(e,t,s){j.getInstance().add(e,N.__name__,t,s);}static remove(e,t,s){j.getInstance().remove(e,N.__name__,t,s);}static disable(e,t){j.getInstance().disable(e,N.__name__,t);}static enable(e,t){j.getInstance().enable(e,N.__name__,t);}static filter(e){}}e.bs.player.core.events.ResizeEvent=N,N.__name__="bs.player.core.events.ResizeEvent",N.__super__=v,Object.assign(N.prototype,{__class__:N});class F extends v{constructor(e){super(e),this.className=F.__name__;}dispatch(e){j.getInstance().dispatch(e,F.__name__,this.type,this);}static add(e,t,s){j.getInstance().add(e,F.__name__,t,s);}static addOnce(e,t,s){j.getInstance().addOnce(e,F.__name__,t,s);}static remove(e,t,s){j.getInstance().remove(e,F.__name__,t,s);}static disable(e,t){j.getInstance().disable(e,F.__name__,t);}static enable(e,t){j.getInstance().enable(e,F.__name__,t);}static filter(e){}}e.bs.player.core.events.SphericalVideoEvent=F,F.__name__="bs.player.core.events.SphericalVideoEvent",F.__super__=v,Object.assign(F.prototype,{__class__:F});class D extends v{constructor(e){super(e),this.className=D.__name__;}dispatch(e){j.getInstance().dispatch(e,D.__name__,this.type,this);}static add(e,t,s){j.getInstance().add(e,D.__name__,t,s);}static remove(e,t,s){j.getInstance().remove(e,D.__name__,t,s);}static disable(e,t){j.getInstance().disable(e,D.__name__,t);}static enable(e,t){j.getInstance().enable(e,D.__name__,t);}static filter(e){}}e.bs.player.core.events.SubtitleEvent=D,D.__name__="bs.player.core.events.SubtitleEvent",D.__super__=v,Object.assign(D.prototype,{__class__:D});class T extends v{constructor(e){super(e),this.className=T.__name__;}dispatch(e){j.getInstance().dispatch(e,T.__name__,this.type,this);}static addOnce(e,t,s){j.getInstance().addOnce(e,T.__name__,t,s);}static add(e,t,s){j.getInstance().add(e,T.__name__,t,s);}static remove(e,t,s){j.getInstance().remove(e,T.__name__,t,s);}static disable(e,t){j.getInstance().disable(e,T.__name__,t);}static enable(e,t){j.getInstance().enable(e,T.__name__,t);}}e.bs.player.core.events.VideoEvent=T,T.__name__="bs.player.core.events.VideoEvent",T.__super__=v,Object.assign(T.prototype,{__class__:T});class j{constructor(){null==j.instance&&(this.plugins=[]);}registerPlugin(e){this.plugins.push(e),e.set_eventHub(this);}dispatch(e,t,s,n){let r=e+" | "+t+" | "+s;if(!this.isEnabled(r))return;let a=!1,l=0,i=this.plugins;for(;l<i.length;){let t=i[l];++l,t.context==e&&0==t.eventFilter(n)&&(a=!0);}if(!a){if(Object.prototype.hasOwnProperty.call(j.listenersMap.h,r)){let e=0,t=j.listenersMap.h[r];for(;e<t.length;)t[e++](n);}if(Object.prototype.hasOwnProperty.call(j.onceListenersMap.h,r)){let a=0,l=j.onceListenersMap.h[r];for(;a<l.length;)l[a++](n);let i=0,o=j.onceListenersMap.h[r];for(;i<o.length;)this.remove(e,t,s,o[i++]);}}}addOnce(e,t,s,n){let r,a=e+" | "+t+" | "+s;if(Object.prototype.hasOwnProperty.call(j.onceListenersMap.h,a))r=j.onceListenersMap.h[a];else {let e=[];j.onceListenersMap.h[a]=e,r=j.onceListenersMap.h[a];}let l=0;for(;l<r.length;)if(r[l++]==n)return !1;return r.push(n),!0}add(e,t,s,n){let r,a=e+" | "+t+" | "+s;if(Object.prototype.hasOwnProperty.call(j.listenersMap.h,a))r=j.listenersMap.h[a];else {let e=[];j.listenersMap.h[a]=e,r=j.listenersMap.h[a];}let l=0;for(;l<r.length;)if(r[l++]==n)return;r.push(n);}remove(e,t,s,n){let r=e+" | "+t+" | "+s;this.removeListenerFromMap(r,n,j.listenersMap),this.removeListenerFromMap(r,n,j.onceListenersMap);}isEnabled(e){let t=j.disabledListenersMap.h[e];return null==t||0==t}disable(e,t,s){let n=e+" | "+t+" | "+s,r=j.disabledListenersMap.h[n];j.disabledListenersMap.h[n]=null==r?1:r+1;}enable(e,t,s){let n=e+" | "+t+" | "+s,r=j.disabledListenersMap.h[n];if(null!=r&&r>0)if(--r,r<=0){let e=j.disabledListenersMap;Object.prototype.hasOwnProperty.call(e.h,n)&&delete e.h[n];}else j.disabledListenersMap.h[n]=r;}removeListenerFromMap(e,t,s){let n=[];if(Object.prototype.hasOwnProperty.call(s.h,e)&&(n=s.h[e]),n.length>0){let r=0;for(;r<n.length;)if(n[r++]==t){let r=n.slice();return l.remove(r,t),void(s.h[e]=r)}}}__keepFieldsFix(){return p.getInstanceFields(j)}static getInstance(){return j.instance}}e.bs.player.core.manager.EventHub=j,j.__name__="bs.player.core.manager.EventHub",Object.assign(j.prototype,{__class__:j,plugins:null});class U{constructor(e,t,s,n,r){this.langCodeLong=t,this.langCodeShort=e,this.englishName=s,this.nativeName=n,this.relatedLangCodes=r;}__keepFieldsFix(){return p.getInstanceFields(U)}}e.bs.player.core.manager.LangInfo=U,U.__name__="bs.player.core.manager.LangInfo",Object.assign(U.prototype,{__class__:U,langCodeShort:null,langCodeLong:null,englishName:null,nativeName:null,relatedLangCodes:null});class B{constructor(){if(null!=B.instance)return;let e=[];e.push(new U("no","nor",this.toUtf8("Norwegian"),this.toUtf8("Norsk"),["nb","nn"])),e.push(new U("nb","nob",this.toUtf8("Norwegian%20Bokm%C3%A5l"),this.toUtf8("Norsk"),["no","nn"])),e.push(new U("nn","nno",this.toUtf8("Norwegian%20Nynorsk"),this.toUtf8("Norsk%20nynorsk"),["no","nb"])),e.push(new U("da","dan",this.toUtf8("Danish"),this.toUtf8("dansk"),["dk"])),e.push(new U("sv","swe",this.toUtf8("Swedish"),this.toUtf8("svenska"),["se"])),e.push(new U("be","bel",this.toUtf8("Belarusian"),this.toUtf8("%D0%91%D0%B5%D0%BB%D0%B0%D1%80%D1%83%D1%81%D0%BA%D0%B0%D1%8F"))),e.push(new U("bs","bos",this.toUtf8("Bosnian"),this.toUtf8("bosanski%20jezik"))),e.push(new U("bg","bul",this.toUtf8("Bulgarian"),this.toUtf8("%D0%B1%D1%8A%D0%BB%D0%B3%D0%B0%D1%80%D1%81%D0%BA%D0%B8%20%D0%B5%D0%B7%D0%B8%D0%BA"))),e.push(new U("ca","cat",this.toUtf8("Catalan"),this.toUtf8("Catal%C3%A0"))),e.push(new U("hr","hrv",this.toUtf8("Croatian"),this.toUtf8("hrvatski"))),e.push(new U("cz","ces",this.toUtf8("Czech"),this.toUtf8("%C4%8Cesky"))),e.push(new U("nl","nld",this.toUtf8("Dutch"),this.toUtf8("Nederlands"),["dut"])),e.push(new U("en","eng",this.toUtf8("English"),this.toUtf8("English"))),e.push(new U("eo","epo",this.toUtf8("Esperanto"),this.toUtf8("Esperanto"))),e.push(new U("et","est",this.toUtf8("Estonian"),this.toUtf8("eesti"))),e.push(new U("es","spa",this.toUtf8("Spanish"),this.toUtf8("Espa%C3%B1ol"))),e.push(new U("fo","fao",this.toUtf8("Faroese"),this.toUtf8("f%C3%B8royskt"))),e.push(new U("fi","fin",this.toUtf8("Finnish"),this.toUtf8("suomi"))),e.push(new U("fr","fra",this.toUtf8("French"),this.toUtf8("fran%C3%A7ais"),["fre"])),e.push(new U("gl","glg",this.toUtf8("Galician"),this.toUtf8("Galego"))),e.push(new U("de","deu",this.toUtf8("German"),this.toUtf8("Deutsch"),["ger"])),e.push(new U("el","ell",this.toUtf8("Greek"),this.toUtf8("%CE%95%CE%BB%CE%BB%CE%B7%CE%BD%CE%B9%CE%BA%CE%AC"),["gre"])),e.push(new U("hu","hun",this.toUtf8("Hungarian"),this.toUtf8("Magyar"))),e.push(new U("ia","ina",this.toUtf8("Interlingua"),this.toUtf8("Interlingua"))),e.push(new U("it","ita",this.toUtf8("Italian"),this.toUtf8("Italiano"))),e.push(new U("ga","gle",this.toUtf8("Irish"),this.toUtf8("Gaeilge"))),e.push(new U("lb","ltz",this.toUtf8("Luxembourgish"),this.toUtf8("L%C3%ABtzebuergesch"))),e.push(new U("lt","lit",this.toUtf8("Lithuanian"),this.toUtf8("lietuvi%C5%B3"))),e.push(new U("lv","lav",this.toUtf8("Latvian"),this.toUtf8("latvi%C5%B3"))),e.push(new U("pl","pol",this.toUtf8("Polish"),this.toUtf8("polski"))),e.push(new U("pt","por",this.toUtf8("Portuguese"),this.toUtf8("Portugu%C3%AAs"))),e.push(new U("rm","roh",this.toUtf8("Romansh"),this.toUtf8("rumantsch%20grischun"))),e.push(new U("ro","ron",this.toUtf8("Romanian"),this.toUtf8("rom%C3%A2n%C4%83"),["rum"])),e.push(new U("ru","rus",this.toUtf8("Russian"),this.toUtf8("%D1%80%D1%83%D1%81%D1%81%D0%BA%D0%B8%D0%B9%20%D1%8F%D0%B7%D1%8B%D0%BA"))),e.push(new U("sk","slk",this.toUtf8("Slovak"),this.toUtf8("Sloven%C4%8Dina"),["slo"])),e.push(new U("sr","srp",this.toUtf8("Serbian"),this.toUtf8("%D0%A1%D1%80%D0%BF%D1%81%D0%BA%D0%B8"))),e.push(new U("sl","slv",this.toUtf8("Slovene"),this.toUtf8("Sloven%C5%A1%C4%8Dina"))),e.push(new U("tr","tur",this.toUtf8("Turkish"),this.toUtf8("T%C3%BCrk%C3%A7e"))),e.push(new U("uk","ukr",this.toUtf8("Ukrainian"),this.toUtf8("%D1%83%D0%BA%D1%80%D0%B0%D1%97%D0%BD%D1%81%D1%8C%D0%BA%D0%B0"))),e.push(new U("zk","chi",this.toUtf8("Chinese"),this.toUtf8("%E4%B8%AD%E6%96%87"),["zho","zh"])),e.push(new U("ms","may",this.toUtf8("Malay"),this.toUtf8("Bahasa Melayu"),["msa"])),e.push(new U("ar","ara",this.toUtf8("Arabic"),this.toUtf8("%D8%A7%D9%8E%D9%84%D9%92%D8%B9%D9%8E%D8%B1%D9%8E%D8%A8%D9%90%D9%8A%D9%8E%D9%91%D8%A9%D9%8F"),["arb"])),e.push(new U("cdo_","cdo",this.toUtf8("Min Dong Chinese"),this.toUtf8("Min Dong Chinese"))),e.push(new U("cjy_","cjy",this.toUtf8("Jinyu Chinese"),this.toUtf8("Jinyu Chinese"))),e.push(new U("cmn_","cmn",this.toUtf8("Mandarin Chinese"),this.toUtf8("Mandarin Chinese"))),e.push(new U("cpx_","cpx",this.toUtf8("Pu-Xian Chinese"),this.toUtf8("Pu-Xian Chinese"))),e.push(new U("czh_","czh",this.toUtf8("Huizhou Chinese"),this.toUtf8("Huizhou Chinese"))),e.push(new U("czo_","czo",this.toUtf8("Min Zhong Chinese"),this.toUtf8("Min Zhong Chinese"))),e.push(new U("gan_","gan",this.toUtf8("Gan Chinese"),this.toUtf8("Gan Chinese"))),e.push(new U("hak_","hak",this.toUtf8("Hakka Chinese"),this.toUtf8("Hakka Chinese"))),e.push(new U("hsn_","hsn",this.toUtf8("Xiang Chinese"),this.toUtf8("Xiang Chinese"))),e.push(new U("lzh_","lzh",this.toUtf8("Literary Chinese"),this.toUtf8("Literary Chinese"))),e.push(new U("mnp_","mnp",this.toUtf8("Min Bei Chinese"),this.toUtf8("Min Bei Chinese"))),e.push(new U("nan_","nan",this.toUtf8("Min Nan Chinese"),this.toUtf8("Min Nan Chinese"))),e.push(new U("wuu_","wuu",this.toUtf8("Wu Chinese"),this.toUtf8("Wu Chinese"))),e.push(new U("yue_","yue",this.toUtf8("Yue Chinese"),this.toUtf8("Yue Chinese"))),e.push(new U("cnp_","cnp",this.toUtf8("Northern Ping Chinese"),this.toUtf8("Northern Ping Chinese"))),e.push(new U("csp_","csp",this.toUtf8("Southern Ping Chinese"),this.toUtf8("Southern Ping Chinese"))),e.push(new U("mul_","mul",this.toUtf8("Multiple languages"),this.toUtf8("Multiple languages"))),e.push(new U("mis_","mis",this.toUtf8("No code for language"),this.toUtf8("No code for language"))),e.push(new U("und_","und",this.toUtf8("Undefined"),this.toUtf8("Undefined"))),this.setLangInfoList(e);}toUtf8(e){let t=null;return t=decodeURIComponent(e),t}setLangInfoList(e){this.langInfoList=e,this.langInfoByLangShortCode=new _t,this.langInfoByLangLongCode=new _t,this.langInfoByRelatedCode=new _t;let t=0,s=this.langInfoList;for(;t<s.length;){let e=s[t];++t,this.langInfoByLangShortCode.h[e.langCodeShort]=e,this.langInfoByLangLongCode.h[e.langCodeLong]=e;}let n=0,r=this.langInfoList;for(;n<r.length;){let e=r[n];if(++n,null!=e.relatedLangCodes){let t=0,s=e.relatedLangCodes;for(;t<s.length;)this.langInfoByRelatedCode.h[s[t++]]=e;}}}getLangInfoList(){return this.langInfoList}__keepFieldsFix(){return p.getInstanceFields(B)}static getInstance(){return B.instance}static getLanguageNativeNameByCode(e){try{e=e.toLowerCase();let t=B.getInstance();return Object.prototype.hasOwnProperty.call(t.langInfoByLangShortCode.h,e)?t.langInfoByLangShortCode.h[e].nativeName:Object.prototype.hasOwnProperty.call(t.langInfoByLangLongCode.h,e)?t.langInfoByLangLongCode.h[e].nativeName:Object.prototype.hasOwnProperty.call(t.langInfoByRelatedCode.h,e)?t.langInfoByRelatedCode.h[e].nativeName:null}catch(e){return Qe.trace(Ze.caught(e).unwrap(),{fileName:"player/src/bs/player/core/manager/I18NHelper.hx",lineNumber:164,className:"bs.player.core.manager.I18NHelper",methodName:"getLanguageNativeNameByCode"}),null}}static getLanguageInfoByCode(e){try{e=e.toLowerCase();let t=B.getInstance();return Object.prototype.hasOwnProperty.call(t.langInfoByLangShortCode.h,e)?t.langInfoByLangShortCode.h[e]:Object.prototype.hasOwnProperty.call(t.langInfoByLangLongCode.h,e)?t.langInfoByLangLongCode.h[e]:Object.prototype.hasOwnProperty.call(t.langInfoByRelatedCode.h,e)?t.langInfoByRelatedCode.h[e]:null}catch(e){return Qe.trace(Ze.caught(e).unwrap(),{fileName:"player/src/bs/player/core/manager/I18NHelper.hx",lineNumber:185,className:"bs.player.core.manager.I18NHelper",methodName:"getLanguageInfoByCode"}),null}}static findBestFittingLangCodeForSelected(e,t){e=e.toLowerCase();let s=B.getLanguageInfoByCode(e);if(null==s)return -1!=t.indexOf(e)?e:null;let n=[],r=0;for(;r<t.length;)n.push(B.getLanguageInfoByCode(t[r++]));let a=[];if(a.push(s),null!=s.relatedLangCodes){let e=0,t=s.relatedLangCodes;for(;e<t.length;){let s=B.getLanguageInfoByCode(t[e++]);null!=s&&a.push(s);}}let l=0;for(;l<a.length;){let e=a[l++],s=0,r=n.length;for(;s<r;){let r=s++,a=n[r];if(null!=a&&e.langCodeShort==a.langCodeShort)return t[r]}}return null}static normalizeLanguageNameFormat(e){return null==e?null:l.substr(e,0,1).toUpperCase()+l.substr(e,1,e.length)}static preselectSubtitlesSet(e,t){if(null==e||null==t||0==t.length||"off"==e)return;let s=[],n=0;for(;n<t.length;)s.push(t[n++].languageCode);let r=B.findBestFittingLangCodeForSelected(e,s),a=0;for(;a<t.length;){let e=t[a];++a,r==e.languageCode&&(e.preselected=!0);}}}e.bs.player.core.manager.I18NHelper=B,B.__name__="bs.player.core.manager.I18NHelper",Object.assign(B.prototype,{__class__:B,langInfoList:null,langInfoByLangShortCode:null,langInfoByLangLongCode:null,langInfoByRelatedCode:null});class M{constructor(e){this.context=e,this.state="init";}init(){T.add(this.context,"bufferingStart",Et(this,this.onVideoBuffering)),T.add(this.context,"complete",Et(this,this.onVideoComplete)),T.add(this.context,"mediaError",Et(this,this.onVideoError)),T.add(this.context,"playing",Et(this,this.onVideoPlaying)),T.add(this.context,"paused",Et(this,this.onVideoPaused)),T.add(this.context,"seekingStart",Et(this,this.onVideoSeeking)),T.add(this.context,"seekingEnd",Et(this,this.onVideoSeekingEnd)),S.add(this.context,"adPlaying",Et(this,this.onVideoPlaying)),S.add(this.context,"adPaused",Et(this,this.onVideoPaused)),S.add(this.context,"seekingStart",Et(this,this.onVideoSeeking)),S.add(this.context,"seekingEnd",Et(this,this.onVideoSeekingEnd)),E.add(this.context,"mediaMetadataData",Et(this,this.onMetadataData)),E.add(this.context,"mediaAfterPlaybackStartMetadata",Et(this,this.onAfterPlaybackStartMetadataData));}destroy(){T.remove(this.context,"bufferingStart",Et(this,this.onVideoBuffering)),T.remove(this.context,"complete",Et(this,this.onVideoComplete)),T.remove(this.context,"mediaError",Et(this,this.onVideoError)),T.remove(this.context,"playing",Et(this,this.onVideoPlaying)),T.remove(this.context,"paused",Et(this,this.onVideoPaused)),T.remove(this.context,"seekingStart",Et(this,this.onVideoSeeking)),T.remove(this.context,"seekingEnd",Et(this,this.onVideoSeekingEnd)),E.remove(this.context,"mediaMetadataData",Et(this,this.onMetadataData)),E.remove(this.context,"mediaAfterPlaybackStartMetadata",Et(this,this.onAfterPlaybackStartMetadataData));}onVideoPlaying(e){this.state="playing";}onVideoComplete(e){this.state="complete";}onVideoPaused(e){this.state="paused";}onVideoBuffering(e){this.state="buffering";}onVideoError(e){this.state="error";}onVideoSeeking(e){this.state="seeking";}onVideoSeekingEnd(e){this.state="playing",null!=e&&null!=e.data&&null!=e.data.media&&(e.data.media.mediaPlaybackInfo.isPlaying||(this.state="paused"));}onMetadataData(e){this.state="init",this.currentMedia=null!=e?e.data:null;}onAfterPlaybackStartMetadataData(e){this.currentMedia=null!=e?e.data:null;}__keepFieldsFix(){return p.getInstanceFields(M)}}e.bs.player.core.manager.PlaybackStateMonitor=M,M.__name__="bs.player.core.manager.PlaybackStateMonitor",Object.assign(M.prototype,{__class__:M,context:null,state:null,currentMedia:null});class V{__keepFieldsFix(){return p.getInstanceFields(V)}static getMonitor(e){if(!Object.prototype.hasOwnProperty.call(V.monitors.h,e)){let t=new M(e);V.monitors.h[e]=t,t.init();}return V.monitors.h[e]}static destroyMonitor(e){if(Object.prototype.hasOwnProperty.call(V.monitors.h,e)){V.monitors.h[e].destroy();let t=V.monitors;Object.prototype.hasOwnProperty.call(t.h,e)&&delete t.h[e];}}}e.bs.player.core.manager.PlaybackStateRegister=V,V.__name__="bs.player.core.manager.PlaybackStateRegister",Object.assign(V.prototype,{__class__:V});class R{}R.__name__="bs.player.core.model.OptionalLiveStreamInfo",R.__isInterface__=!0;class H{constructor(){H._hx_skip_constructor||this._hx_constructor();}_hx_constructor(){this.customParams=new _t;}__keepFieldsFix(){return p.getInstanceFields(H)}}e.bs.player.core.model.ModelObject=H,H.__name__="bs.player.core.model.ModelObject",Object.assign(H.prototype,{__class__:H,id:null,customParams:null});class q extends H{constructor(){super();}}e.bs.player.core.model.LiveChannelInfo=q,q.__name__="bs.player.core.model.LiveChannelInfo",q.__super__=H,Object.assign(q.prototype,{__class__:q,name:null});class z extends H{constructor(){super(),this.mediaDetails=new se,this.mediaUserSettings=new ne,this.mediaSettings=new re,this.mediaPlaybackInfo=new ae,this.progress=new we,this.drmCustomLicenseServerHandler=null,this.failedPlaybackPlayers=new _t,this.spherical=!1,this.contentMeta=new _t;}hasFallbackSources(){return !(null!=this.source&&this.source.length>0&&null!=this.source[0]&&this.source[0].hasDaiFallbackToOrigin&&null!=this.mediaPlaybackInfo&&!this.mediaPlaybackInfo.isInStreamAdvertisementPlaying)&&(null!=this.source&&this.source.length>1||null!=this.sourceFallbacks&&this.sourceFallbacks.length>0&&this.sourceFallbacks[0].length>0)}useFallbackSources(){this.hasFallbackSources()&&(null!=this.source&&this.source.length>1?this.source=this.source.slice(1):(this.source=this.sourceFallbacks[0],this.sourceFallbacks=this.sourceFallbacks.slice(1)));}}e.bs.player.core.model.Media=z,z.__name__="bs.player.core.model.Media",z.__super__=H,Object.assign(z.prototype,{__class__:z,title:null,duration:null,source:null,sourceFallbacks:null,subtitlesSets:null,audioSets:null,splashImages:null,posterImages:null,mediaDetails:null,mediaUserSettings:null,mediaSettings:null,mediaPlaybackInfo:null,mediaLandingPage:null,mediaPlaylist:null,drmCustomLicenseServerHandler:null,progress:null,failedPlaybackPlayers:null,spherical:null,contentMeta:null});class W extends z{constructor(){super();}}e.bs.player.core.model.Live=W,W.__name__="bs.player.core.model.Live",W.__interfaces__=[R],W.__super__=z,Object.assign(W.prototype,{__class__:W,dvrWindowLength:null,dvrWindowLiveEdge:null,lowLatencyMode:null,channelInfo:null,episodeInfo:null,seasonInfo:null,seriesInfo:null,liveProgramInfo:null});class G extends z{constructor(){super();}}e.bs.player.core.model.Catchup=G,G.__name__="bs.player.core.model.Catchup",G.__interfaces__=[R],G.__super__=z,Object.assign(G.prototype,{__class__:G,channelInfo:null,episodeInfo:null,seasonInfo:null,seriesInfo:null,liveProgramInfo:null});class X extends W{constructor(){super();}}e.bs.player.core.model.LiveStream=X,X.__name__="bs.player.core.model.LiveStream",X.__super__=W,Object.assign(X.prototype,{__class__:X,streamEnd:null,streamEndThankYouImageUrl:null,streamWaitingForTransmissionImageUrl:null});class Y extends W{constructor(){super();}findProgramForDate(e){if(null==this.programs)return null;null==e&&(e=new Date);let t=e.getTime(),s=0,n=this.programs;for(;s<n.length;){let e=n[s];if(++s,e.eventStart.getTime()<=t&&t<e.eventEnd.getTime())return e}return null}}e.bs.player.core.model.LiveChannel=Y,Y.__name__="bs.player.core.model.LiveChannel",Y.__super__=W,Object.assign(Y.prototype,{__class__:Y,name:null,logoImages:null,programs:null});class J extends W{constructor(){super();}}e.bs.player.core.model.LiveProgramStream=J,J.__name__="bs.player.core.model.LiveProgramStream",J.__super__=W,Object.assign(J.prototype,{__class__:J});class K extends H{constructor(){super();}}e.bs.player.core.model.LiveProgram=K,K.__name__="bs.player.core.model.LiveProgram",K.__super__=H,Object.assign(K.prototype,{__class__:K,title:null,descriptionLong:null,descriptionShort:null,eventStart:null,eventEnd:null});class Z extends H{constructor(){super(),this.authParams=new _t;}}e.bs.player.core.model.User=Z,Z.__name__="bs.player.core.model.User",Z.__super__=H,Object.assign(Z.prototype,{__class__:Z,name:null,language:null,domain:null,authParams:null});class ${constructor(){this.currentPos=-1,this.items=[];}hasNext(){return this.currentPos+1<this.items.length}next(){return this.currentPos<this.items.length&&this.currentPos++,0<=this.currentPos&&this.currentPos<this.items.length?this.items[this.currentPos]:null}reset(){this.currentPos=-1;}shift(){this.reset(),this.items.shift();}get_length(){return null!=this.items?this.items.length:0}__keepFieldsFix(){return p.getInstanceFields($)}static clone(e){if(null==e)return null;let t=new $,s=e.items,n=new Array(s.length),r=0,a=s.length;for(;r<a;){let e=r++;n[e]=s[e];}return t.items=n,t.currentPos=e.currentPos+0|0,t}}e.bs.player.core.model.MediaPlaylist=$,$.__name__="bs.player.core.model.MediaPlaylist",Object.assign($.prototype,{__class__:$,items:null,currentPos:null,length:null,__properties__:{get_length:"get_length"}});class Q extends H{constructor(){super();}}e.bs.player.core.model.MediaSource=Q,Q.__name__="bs.player.core.model.MediaSource",Q.__super__=H,Object.assign(Q.prototype,{__class__:Q,url:null,contentType:null,width:null,height:null,bitrate:null,drm:null,spherical:null,hasDaiFallbackToOrigin:null});class ee extends H{constructor(){super();}}e.bs.player.core.model.Drm=ee,ee.__name__="bs.player.core.model.Drm",ee.__super__=H,Object.assign(ee.prototype,{__class__:ee,provider:null,selectedDrmSystem:null,playready:null,widevine:null,fairplay:null});class te extends H{constructor(){super();}}e.bs.player.core.model.DrmData=te,te.__name__="bs.player.core.model.DrmData",te.__super__=H,Object.assign(te.prototype,{__class__:te,laUrl:null,customData:null,certUrl:null,audioRobustness:null,videoRobustness:null});class se{constructor(){}__keepFieldsFix(){return p.getInstanceFields(se)}}e.bs.player.core.model.MediaDetails=se,se.__name__="bs.player.core.model.MediaDetails",Object.assign(se.prototype,{__class__:se,tags:null,genres:null,descriptionLong:null,descriptionShort:null,year:null,mediaCast:null,directors:null,customParams:null});class ne{constructor(){}__keepFieldsFix(){return p.getInstanceFields(ne)}}e.bs.player.core.model.MediaUserSettings=ne,ne.__name__="bs.player.core.model.MediaUserSettings",Object.assign(ne.prototype,{__class__:ne,wasWatched:null,isFavorite:null,resumePostion:null,hasWatchingFinished:null});class re{constructor(){this.hasConcurrencyControl=!1,this.customParams=new _t;}__keepFieldsFix(){return p.getInstanceFields(re)}}e.bs.player.core.model.MediaSettings=re,re.__name__="bs.player.core.model.MediaSettings",Object.assign(re.prototype,{__class__:re,hasConcurrencyControl:null,customParams:null});class ae{constructor(){this.currentTime=null,this.currentTotalBitrateKpbs=null,this.playbackRate=null,this.isPlaying=!1,this.isInStreamAdvertisementPlaying=!1,this.customParams=new _t;}__keepFieldsFix(){return p.getInstanceFields(ae)}}e.bs.player.core.model.MediaPlaybackInfo=ae,ae.__name__="bs.player.core.model.MediaPlaybackInfo",Object.assign(ae.prototype,{__class__:ae,currentTime:null,currentTotalBitrateKpbs:null,playbackRate:null,isPlaying:null,isInStreamAdvertisementPlaying:null,customParams:null});class le extends H{constructor(){super();}}e.bs.player.core.model.Playlist=le,le.__name__="bs.player.core.model.Playlist",le.__super__=H,Object.assign(le.prototype,{__class__:le,mediaList:null});class ie extends H{constructor(){super();}}e.bs.player.core.model.SubtitlesSet=ie,ie.__name__="bs.player.core.model.SubtitlesSet",ie.__super__=H,Object.assign(ie.prototype,{__class__:ie,languageCode:null,name:null,subtitleEntries:null,url:null,preselected:null});class oe{constructor(){this.showTime=0,this.hideTime=0,this.customParams=new _t,this.texts=[];}__keepFieldsFix(){return p.getInstanceFields(oe)}}e.bs.player.core.model.SubtitleEntry=oe,oe.__name__="bs.player.core.model.SubtitleEntry",Object.assign(oe.prototype,{__class__:oe,showTime:null,hideTime:null,texts:null,customParams:null});class ue{constructor(){}__keepFieldsFix(){return p.getInstanceFields(ue)}}e.bs.player.core.model.SubtitleEntryText=ue,ue.__name__="bs.player.core.model.SubtitleEntryText",Object.assign(ue.prototype,{__class__:ue,styles:null,text:null});class ce extends H{constructor(){H._hx_skip_constructor=!0,super(),H._hx_skip_constructor=!1,this._hx_constructor();}_hx_constructor(){this.isDefault=!1,super._hx_constructor();}}e.bs.player.core.model.AudioSet=ce,ce.__name__="bs.player.core.model.AudioSet",ce.__super__=H,Object.assign(ce.prototype,{__class__:ce,languageCode:null,name:null,isDefault:null,preselected:null});class _e extends H{constructor(){super();}}e.bs.player.core.model.Image=_e,_e.__name__="bs.player.core.model.Image",_e.__super__=H,Object.assign(_e.prototype,{__class__:_e,url:null,width:null,height:null});class he extends H{constructor(){super();}}e.bs.player.core.model.Genre=he,he.__name__="bs.player.core.model.Genre",he.__super__=H,Object.assign(he.prototype,{__class__:he,name:null});class pe{constructor(){this.currentOrderNumber=1,this.totalNumber=1,this.durationPlayed=0,this.customParams=new _t,this.showTimeProgress=!0,this.showAdPositionInBreak=!0;}__keepFieldsFix(){return p.getInstanceFields(pe)}}e.bs.player.core.model.AdMedia=pe,pe.__name__="bs.player.core.model.AdMedia",Object.assign(pe.prototype,{__class__:pe,media:null,mediaClickTargetUrl:null,currentOrderNumber:null,totalNumber:null,durationPlayed:null,durationTotal:null,adId:null,customParams:null,showTimeProgress:null,showAdPositionInBreak:null,adStartTime:null});class de{constructor(e,t,s,n){this.offset=e,this.duration=t,this.position=s,this.adsCount=n;}__keepFieldsFix(){return p.getInstanceFields(de)}}e.bs.player.core.model.AdInStreamBreakInfo=de,de.__name__="bs.player.core.model.AdInStreamBreakInfo",Object.assign(de.prototype,{__class__:de,offset:null,duration:null,position:null,adsCount:null});class ge{constructor(e,t){this.label=e,this.data=t;}__keepFieldsFix(){return p.getInstanceFields(ge)}}e.bs.player.core.model.VideoQualityEventData=ge,ge.__name__="bs.player.core.model.VideoQualityEventData",Object.assign(ge.prototype,{__class__:ge,label:null,data:null,bitrateKbps:null,width:null,height:null});class me{constructor(e,t,s,n){null==n&&(n="top"),null==s&&(s="left"),this.x=e,this.width=t,this.xPos=s,this.yPos=n;}__keepFieldsFix(){return p.getInstanceFields(me)}}e.bs.player.core.model.BrandImageLoadedEventData=me,me.__name__="bs.player.core.model.BrandImageLoadedEventData",Object.assign(me.prototype,{__class__:me,x:null,width:null,yPos:null,xPos:null});class be{__keepFieldsFix(){return p.getInstanceFields(be)}}e.bs.player.core.model.MediaProgressSegment=be,be.__name__="bs.player.core.model.MediaProgressSegment",Object.assign(be.prototype,{__class__:be,duration:null,label:null});class fe{__keepFieldsFix(){return p.getInstanceFields(fe)}}e.bs.player.core.model.MediaProgressMarker=fe,fe.__name__="bs.player.core.model.MediaProgressMarker",Object.assign(fe.prototype,{__class__:fe,time:null,label:null});class xe{__keepFieldsFix(){return p.getInstanceFields(xe)}}e.bs.player.core.model.MediaProgressThumbnails=xe,xe.__name__="bs.player.core.model.MediaProgressThumbnails",Object.assign(xe.prototype,{__class__:xe,url:null,imageBaseUrl:null});class we{constructor(){this.segments=null,this.segmentsUrl=null,this.markers=null,this.markersUrl=null,this.thumbnails=null;}__keepFieldsFix(){return p.getInstanceFields(we)}}e.bs.player.core.model.MediaProgress=we,we.__name__="bs.player.core.model.MediaProgress",Object.assign(we.prototype,{__class__:we,segmentsUrl:null,segments:null,markersUrl:null,markers:null,thumbnails:null});class ve{constructor(e,t){null==t&&(t=0),null==e&&(e=0),this.x=e,this.y=t;}__keepFieldsFix(){return p.getInstanceFields(ve)}}e.bs.player.core.model.Point=ve,ve.__name__="bs.player.core.model.Point",Object.assign(ve.prototype,{__class__:ve,x:null,y:null});class Se extends z{constructor(){super();}}e.bs.player.core.model.Episode=Se,Se.__name__="bs.player.core.model.Episode",Se.__super__=z,Object.assign(Se.prototype,{__class__:Se,episodeNumber:null,season:null});class Oe extends H{constructor(){super();}}e.bs.player.core.model.EpisodeInfo=Oe,Oe.__name__="bs.player.core.model.EpisodeInfo",Oe.__super__=H,Object.assign(Oe.prototype,{__class__:Oe,episodeNumber:null,title:null});class Ie extends H{constructor(){super();}}e.bs.player.core.model.Season=Ie,Ie.__name__="bs.player.core.model.Season",Ie.__super__=H,Object.assign(Ie.prototype,{__class__:Ie,title:null,descriptionShort:null,descriptionLong:null,images:null,seasonNumber:null,serie:null,episodes:null});class Ee extends H{constructor(){super();}}e.bs.player.core.model.Serie=Ee,Ee.__name__="bs.player.core.model.Serie",Ee.__super__=H,Object.assign(Ee.prototype,{__class__:Ee,title:null,descriptionShort:null,descriptionLong:null,images:null,seasons:null});class Ce{__keepFieldsFix(){return p.getInstanceFields(Ce)}}e.bs.player.core.model.SocialShareData=Ce,Ce.__name__="bs.player.core.model.SocialShareData",Object.assign(Ce.prototype,{__class__:Ce,url:null,title:null});class Pe{constructor(){this.pluginName="";let e=St.getClass(this);this.pluginName=e.__name__.split(".").pop();let t=this.pluginName,s=exports.configuration;this.pluginConfig=null!=s&&Object.prototype.hasOwnProperty.call(s,t)?o.field(s,t):Object.create(null);}create(){}destroy(){}activate(){}postActivate(){}deactivate(){}eventFilter(e){return !0}registerPlugin(e){}getPluginVersion(){return "v2.14.417"}getPluginName(){return this.pluginName}get_player(){return this.player}set_player(e){return this.player=e}get_variables(){return this.variables}set_variables(e){return this.variables=e}get_eventHub(){return this.eventHub}set_eventHub(e){return this.eventHub=e}get_parentDisplay(){return this.parentDisplay}set_parentDisplay(e){return this.parentDisplay=e}get_display(){return this.display}}Pe.__name__="bs.player.core.plugin.PluginBase",Object.assign(Pe.prototype,{__class__:Pe,uid:null,context:null,className:null,pluginConfig:null,variables:null,eventHub:null,parentDisplay:null,display:null,player:null,pluginName:null,__properties__:{set_player:"set_player",get_player:"get_player",get_display:"get_display",set_parentDisplay:"set_parentDisplay",get_parentDisplay:"get_parentDisplay",set_eventHub:"set_eventHub",get_eventHub:"get_eventHub",set_variables:"set_variables",get_variables:"get_variables"}});class Ae{__keepFieldsFix(){return p.getInstanceFields(Ae)}static readPluginConfig(e){let t,s=St.getClass(e);if(0==o.isObject(s))t=!1;else {let e=Object.prototype.hasOwnProperty.call(s,"__plugfaces__")?o.field(s,"__plugfaces__"):null;t=null!=e&&e.indexOf("IVideoPlayer")>-1;}if(0==t)return Object.create(null);let n=s.__name__.split(".").pop(),r=exports.configuration;return null!=r&&Object.prototype.hasOwnProperty.call(r,n)?o.field(r,n):Object.create(null)}}e.bs.player.core.plugin.VideoPlayerUtil=Ae,Ae.__name__="bs.player.core.plugin.VideoPlayerUtil",Object.assign(Ae.prototype,{__class__:Ae});class Le{constructor(e,t,s){this.remotePlayerController=null,this.remotePlayer=null,this.context=null,this.applicationId=null,this.context=e,this.onApiLoadListener=t,this.applicationId=s,null==this.applicationId&&(this.applicationId="53001214"),this.isConnected=!1,null==Le.instances&&(Le.instances=[]),Le.instances.push(this),Le.libLoaded||(Le.libLoaded=!0,this.checkScriptLoad(),this.loadScript()),I.add(e,"chromecast",Et(this,this.onChromecast)),Le._isAvailable&&(this.onCastApiInitialization(),null!=t&&et.delay(t,0));}get_isAvailable(){return Le._isAvailable}onChromecast(e){this.getChromeCast().requestSession(),this.createSession();}connect(){if(!this.isConnected){this.isConnected=!0;let e=new O("connected");e.data={session:this.castSession,sender:this},e.dispatch(this.context),new T("videoCastingStart").dispatch(this.context);}}disconnect(){if(this.isConnected){this.isConnected=!1,this.castSession=null;let e=new O("disconnected");e.data={},e.dispatch(this.context),new T("videoCastingEnd").dispatch(this.context),this.getCast().framework.CastContext.getInstance().endCurrentSession(!0);}}createSession(){null==this.castSession&&this.monitorSessionCreation();}monitorSessionCreation(){null==this.castSession&&(this.castSession=this.getCast().framework.CastContext.getInstance().getCurrentSession()),null!=this.castSession?(this.connect(),this.monitorSessionTimer=new et(1e3),this.monitorSessionTimer.run=Et(this,this.monitorSession)):this.monitorSessionCreationTimer=et.delay(Et(this,this.monitorSessionCreation),500);}monitorSession(){null!=this.castSession&&"SESSION_ENDED"!=this.castSession.getSessionState()||(null!=this.monitorSessionTimer&&this.monitorSessionTimer.stop(),this.disconnect());}newRemotePlayerController(e){return new window.cast.framework.RemotePlayerController(e)}newRemotePlayer(){return new window.cast.framework.RemotePlayer}newLoadRequest(e){return new window.chrome.cast.media.LoadRequest(e)}newMediaInfo(e,t){return new window.chrome.cast.media.MediaInfo(e,t)}newGenericMediaMetadata(){return new window.chrome.cast.media.GenericMediaMetadata}newImage(e){return new window.chrome.cast.Image(e)}castMediaImage(e){let t,s,n=this.newImage(e.url);if(null!=e.width){let s=e.width;t=!isNaN(s);}else t=!1;if(t&&(n.width=e.width),null!=e.height){let t=e.height;s=!isNaN(t);}else s=!1;return s&&(n.height=e.height),n}onCastApiInitialization(){null!=this.getCast().framework?this.getCast().framework.CastContext.getInstance().setOptions({receiverApplicationId:this.applicationId,autoJoinPolicy:this.getChromeCast().AutoJoinPolicy.ORIGIN_SCOPED}):console.warn("Cannot start Chromecast. Try restart browser and Chromecast device.");}getChromeCast(){return window.chrome.cast}getChrome(){return window.chrome}getCast(){return window.cast}checkScriptLoad(){window.__onGCastApiAvailable=Le.initializeCastApi;}loadScript(){var e=document.getElementsByTagName("head")[0],t=document.createElement("script");t.type="text/javascript",t.src="https://www.gstatic.com/cv/js/sender/v1/cast_sender.js?loadCastFramework=1",e.appendChild(t);}destroy(){if(this.disconnect(),null!=Le.instances){let e=Le.instances.indexOf(this);e>=0&&Le.instances.splice(e,1);}}__keepFieldsFix(){return p.getInstanceFields(Le)}static initializeCastApi(e){if(Le._isAvailable=e,e){let e=Le.instances[0];null==e||null==e.getCast()||null==e.getChromeCast()?Le._isAvailable=!1:e.onCastApiInitialization();}let t=0,s=Le.instances;for(;t<s.length;){let e=s[t];++t,null!=e.onApiLoadListener&&e.onApiLoadListener();}}}e.bs.player.core.plugin.chromecast.ChromecastSender=Le,Le.__name__="bs.player.core.plugin.chromecast.ChromecastSender",Object.assign(Le.prototype,{__class__:Le,applicationId:null,context:null,remotePlayer:null,remotePlayerController:null,castSession:null,onApiLoadListener:null,monitorSessionTimer:null,monitorSessionCreationTimer:null,isConnected:null,isAvailable:null,__properties__:{get_isAvailable:"get_isAvailable"}});class ke{constructor(e,t,s,n,r,a,l,i){null==a&&(a=!1),this.progressPercent=e,this.progressLeft=t,this.progressRight=s,this.progress=n,this.width=r,this.isLast=a,this.label=l,this.duration=i;}__keepFieldsFix(){return p.getInstanceFields(ke)}}e.bs.player.core.vtt.ProgressSegmentData=ke,ke.__name__="bs.player.core.vtt.ProgressSegmentData",Object.assign(ke.prototype,{__class__:ke,progressPercent:null,progressLeft:null,progressRight:null,progress:null,width:null,label:null,duration:null,isLast:null});class Ne{constructor(e,t,s){this.left=e,this.progress=t,this.label=s;}__keepFieldsFix(){return p.getInstanceFields(Ne)}}e.bs.player.core.vtt.ProgressMarkerData=Ne,Ne.__name__="bs.player.core.vtt.ProgressMarkerData",Object.assign(Ne.prototype,{__class__:Ne,left:null,progress:null,label:null});class Fe{constructor(){this.showTime=0,this.hideTime=0;}__keepFieldsFix(){return p.getInstanceFields(Fe)}}e.bs.player.core.vtt.ProgressThumbnailEntry=Fe,Fe.__name__="bs.player.core.vtt.ProgressThumbnailEntry",Object.assign(Fe.prototype,{__class__:Fe,id:null,showTime:null,hideTime:null,source:null});class De{constructor(){}__keepFieldsFix(){return p.getInstanceFields(De)}}e.bs.player.core.vtt.ProgressThumbnailSize=De,De.__name__="bs.player.core.vtt.ProgressThumbnailSize",Object.assign(De.prototype,{__class__:De,w:null,h:null});class Te extends De{constructor(){super();}}e.bs.player.core.vtt.ProgressThumbnailItem=Te,Te.__name__="bs.player.core.vtt.ProgressThumbnailItem",Te.__super__=De,Object.assign(Te.prototype,{__class__:Te,imageId:null,url:null,x:null,y:null});class je extends Te{constructor(){super();}}e.bs.player.core.vtt.ProgressThumbnailSource=je,je.__name__="bs.player.core.vtt.ProgressThumbnailSource",je.__super__=Te,Object.assign(je.prototype,{__class__:je,id:null});class Ue extends Te{constructor(e,t,s,n){super(),this.imageId=e,this.url=t,this.x=NaN,this.y=NaN,this.w=s,this.h=n,this.renderWidth=s,this.renderHeight=n;}}e.bs.player.core.vtt.ProgressThumbnailImage=Ue,Ue.__name__="bs.player.core.vtt.ProgressThumbnailImage",Ue.__super__=Te,Object.assign(Ue.prototype,{__class__:Ue,renderWidth:null,renderHeight:null});class Be{constructor(){this.showTime=0;}__keepFieldsFix(){return p.getInstanceFields(Be)}}e.bs.player.core.vtt.VttMarkersParserEntry=Be,Be.__name__="bs.player.core.vtt.VttMarkersParserEntry",Object.assign(Be.prototype,{__class__:Be,id:null,showTime:null,text:null});class Me{constructor(){Me._hx_skip_constructor||this._hx_constructor();}_hx_constructor(){this.lineNumber=0,this.TIMESTAMP_SEPARATOR=" --\x3e ",this.WHITESPACE_REGEX=new a("[ \t\r\n]+","g"),this.END_LINE_REGEX=new a("(\r\n)|(\n)","g");}readLine(){let e=this.lines[this.lineNumber];return this.lineNumber++,null!=e&&0==this.lineNumber?h.replace(e,"\ufeff",""):e}isFileEnd(){return this.lineNumber>=this.lines.length}isEmptyStr(e){return null==e||""==e}skipEmptyLines(){let e=this.readLine();for(;this.isEmptyStr(e)&&!this.isFileEnd();)e=this.readLine();this.isFileEnd()||this.lineNumber--;}parseTimestamp(e){let t=e.split("."),s=t[0].split(":"),n=t[1],r=s.pop(),a=s.pop(),l=s.pop(),i=0;return i=0+3600*(null==l?0:u.parseInt(l)),i+=60*(null==a?0:u.parseInt(a)),i+=null==r?0:u.parseInt(r),i+=(null==n?0:u.parseInt(n))/1e3,i}parseHeader(e){if(-1==(e=h.trim(e)).indexOf("WEBVTT"))throw Ze.thrown(new Re("Error in line: "+this.lineNumber+". WEBVTT text expected in first line."));return e}__keepFieldsFix(){return p.getInstanceFields(Me)}}e.bs.player.core.vtt.VttParser=Me,Me.__name__="bs.player.core.vtt.VttParser",Object.assign(Me.prototype,{__class__:Me,END_LINE_REGEX:null,WHITESPACE_REGEX:null,TIMESTAMP_SEPARATOR:null,lineNumber:null,lines:null});class Ve extends Me{constructor(){super(),this.lineNumber=0,this.lines=null;}parse(e){this.lines=this.END_LINE_REGEX.split(e),this.lineNumber=0,this.skipEmptyLines(),this.parseHeader(this.readLine()),this.skipEmptyLines();let t=[];for(;!this.isFileEnd();)t.push(this.parseEntry()),this.skipEmptyLines();return t}parseEntry(){let e=new Be,t=this.readLine();if(this.isEmptyStr(t))throw Ze.thrown(new Re("Error in line: "+this.lineNumber+". Cannot parse entry."));t=t.replace(this.WHITESPACE_REGEX.r," "),-1==t.indexOf(this.TIMESTAMP_SEPARATOR)&&(e.id=t,t=this.readLine());let s=t.split(this.TIMESTAMP_SEPARATOR);if(2!=s.length)throw Ze.thrown(new Re("Error in line: "+this.lineNumber+". Cannot parse time for entry."));return e.showTime=this.parseTimestamp(s[0]),t=this.readLine(),e.text=this.parseText(t),e}parseText(e){if(this.isEmptyStr(e))throw Ze.thrown(new Re("Error in line: "+this.lineNumber+". Cannot parse source for entry."));return e}}e.bs.player.core.vtt.VttMarkersParser=Ve,Ve.__name__="bs.player.core.vtt.VttMarkersParser",Ve.__super__=Me,Object.assign(Ve.prototype,{__class__:Ve});class Re{constructor(e){this.message=e;}}Re.__name__="bs.player.core.vtt.VttParserError",Object.assign(Re.prototype,{__class__:Re,message:null});class He{constructor(){this.showTime=0,this.duration=0;}__keepFieldsFix(){return p.getInstanceFields(He)}}e.bs.player.core.vtt.VttSegmentsParserEntry=He,He.__name__="bs.player.core.vtt.VttSegmentsParserEntry",Object.assign(He.prototype,{__class__:He,id:null,showTime:null,hideTime:null,duration:null,text:null});class qe extends Me{constructor(){super(),this.lineNumber=0,this.lines=null;}parse(e){this.lines=this.END_LINE_REGEX.split(e),this.lineNumber=0,this.skipEmptyLines(),this.parseHeader(this.readLine()),this.skipEmptyLines();let t=[];for(;!this.isFileEnd();)t.push(this.parseEntry()),this.skipEmptyLines();return t}parseEntry(){let e=new He,t=this.readLine();if(this.isEmptyStr(t))throw Ze.thrown(new Re("Error in line: "+this.lineNumber+". Cannot parse entry."));t=t.replace(this.WHITESPACE_REGEX.r," "),-1==t.indexOf(this.TIMESTAMP_SEPARATOR)&&(e.id=t,t=this.readLine());let s=t.split(this.TIMESTAMP_SEPARATOR);if(2!=s.length)throw Ze.thrown(new Re("Error in line: "+this.lineNumber+". Cannot parse time for entry."));e.showTime=this.parseTimestamp(s[0]);let n=this.parseTimestamp(s[1]);return e.hideTime=n,e.duration=n-e.showTime,t=this.readLine(),e.text=this.parseText(t),e}parseText(e){if(this.isEmptyStr(e))throw Ze.thrown(new Re("Error in line: "+this.lineNumber+". Cannot parse source for entry."));return e}}e.bs.player.core.vtt.VttSegmentsParser=qe,qe.__name__="bs.player.core.vtt.VttSegmentsParser",qe.__super__=Me,Object.assign(qe.prototype,{__class__:qe});class ze{constructor(){this.entries=[],this.images=[];}__keepFieldsFix(){return p.getInstanceFields(ze)}}e.bs.player.core.vtt.VttThumbnailsParserOutput=ze,ze.__name__="bs.player.core.vtt.VttThumbnailsParserOutput",Object.assign(ze.prototype,{__class__:ze,entries:null,images:null});class We extends Me{constructor(e){Me._hx_skip_constructor=!0,super(),Me._hx_skip_constructor=!1,this._hx_constructor(e);}_hx_constructor(e){this.baseUrl="",this.sourceCounter=0,super._hx_constructor(),this.baseUrl=e,this.sourceCounter=0,this.lineNumber=0,this.lines=null;}parse(e){this.sourceCounter=0,this.lines=this.END_LINE_REGEX.split(e),this.lineNumber=0,this.skipEmptyLines(),this.parseHeader(this.readLine()),this.skipEmptyLines();let t=new ze;for(;!this.isFileEnd();)t.entries.push(this.parseEntry()),this.skipEmptyLines();let s=[],n=[],r=0,a=0,l=t.entries;for(;a<l.length;){let e=l[a];++a,s.indexOf(e.source.url)<0&&(s.push(e.source.url),n.push(new Ue(++r,e.source.url,e.source.w,e.source.h))),e.source.imageId=r;}return t.images=n,t}parseEntry(){let e=new Fe,t=this.readLine();if(this.isEmptyStr(t))throw Ze.thrown(new Re("Error in line: "+this.lineNumber+". Cannot parse entry."));t=t.replace(this.WHITESPACE_REGEX.r," "),-1==t.indexOf(this.TIMESTAMP_SEPARATOR)&&(e.id=t,t=this.readLine());let s=t.split(this.TIMESTAMP_SEPARATOR);if(2!=s.length)throw Ze.thrown(new Re("Error in line: "+this.lineNumber+". Cannot parse time for entry. (2)"));return e.showTime=this.parseTimestamp(s[0]),e.hideTime=this.parseTimestamp(s[1]),t=this.readLine(),e.source=this.parseSource(t),e}parseSource(e){if(this.isEmptyStr(e))throw Ze.thrown(new Re("Error in line: "+this.lineNumber+". Cannot parse source for entry (1)"));let t=new a("#","i").split(e),s=new je;if(s.id=this.sourceCounter++,s.url=this.baseUrl+"/"+t[0],t.length<2||null==t[1])return s;let n=new a("=","i").split(t[1]);if(n.length<2||null==n[0]||null==n[1])return s;let r=n[0],l=n[1].split(",");if(l.length<1)return s;let i=r.indexOf("x");s.x=i<0||l.length<i||null==l[i]?0:u.parseInt(l[i]);let o=r.indexOf("y");s.y=o<0||l.length<o||null==l[o]?0:u.parseInt(l[o]);let c=r.indexOf("w");s.w=c<0||l.length<c||null==l[c]?0:u.parseInt(l[c]);let _=r.indexOf("h");return s.h=_<0||l.length<_||null==l[_]?0:u.parseInt(l[_]),s}}e.bs.player.core.vtt.VttThumbnailsParser=We,We.__name__="bs.player.core.vtt.VttThumbnailsParser",We.__super__=Me,Object.assign(We.prototype,{__class__:We,sourceCounter:null,baseUrl:null});class Ge{static decode(e){let t=null;if(null==e)return t;let s=decodeURIComponent(e.split("+").join(" "));try{t=JSON.parse(s);}catch(e){try{let e=rt.decode(s).toString();try{t=JSON.parse(e);}catch(e){}}catch(e){}}return t}}Ge.__name__="bs.util.ConfigParser";class Xe{constructor(){}__keepFieldsFix(){return p.getInstanceFields(Xe)}static merge(e,t){return Xe._merge(Xe.copy(e),Xe.copy(t))}static _merge(e,t){if(null==t)return e;if(null!=t&&("string"==typeof t||"number"==typeof t&&(0|t)===t||"number"==typeof t||"boolean"==typeof t))return t;if(t instanceof Array){if(null==e)return e;let s=t,n=0;for(;n<s.length;)e.push(s[n++]);return e}let s=o.fields(t),n=0;for(;n<s.length;){let r=s[n];++n;let a=o.field(t,r);if(null==a){e[r]=null;continue}null==a||"string"!=typeof a&&("number"!=typeof a||(0|a)!==a)&&"number"!=typeof a&&"boolean"!=typeof a?a instanceof Array?(Object.prototype.hasOwnProperty.call(e,r)||(e[r]=[]),Xe._merge(o.field(e,r),a)):(Object.prototype.hasOwnProperty.call(e,r)||(e[r]={}),Xe._merge(o.field(e,r),a)):e[r]=a;}return e}static set(e,t,s){e[t]=s;}static get(e,t){return o.field(e,t)}static has(e,t){return Object.prototype.hasOwnProperty.call(e,t)}static fields(e){return o.fields(e)}static copy(e){if(null==e)return null;if(null!=e&&("string"==typeof e||"number"==typeof e&&(0|e)===e||"number"==typeof e||"boolean"==typeof e))return e;if(e instanceof Array){let t=[],s=e,n=0,r=s.length;for(;n<r;)t.push(Xe.copy(s[n++]));return t}let t={},s=o.fields(e),n=0;for(;n<s.length;){let r=s[n];++n,t[r]=Xe.copy(o.field(e,r));}return t}static isArray(e){return e instanceof Array}static isPrimitive(e){return null==e?null:"string"==typeof e||"number"==typeof e&&(0|e)===e||"number"==typeof e||"boolean"==typeof e}}e.bs.util.ObjectTools=Xe,Xe.__name__="bs.util.ObjectTools",Object.assign(Xe.prototype,{__class__:Xe});class Ye{__keepFieldsFix(){return p.getInstanceFields(Ye)}static getTextWidth(e,t){let s=0;return null==Ye.canvasCtx&&(Ye.canvasCtx=St.__cast(window.document.createElement("canvas"),HTMLCanvasElement).getContext("2d")),Ye.canvasCtx.font=t,s=Ye.canvasCtx.measureText(e).width,s}static formatTime(e,t){if(null==t&&(t=!1),isNaN(e))return "";if(e<0)return "live";let s=e%60|0,n=e/60%60|0,r=e/3600%24|0;return (1==t&&r<10?"0"+r:r+"")+":"+(n<10?"0"+n:n+"")+":"+(s<10?"0"+s:s+"")}static formatTimeMinutes(e){if(e<0)return "live";let t=e%60|0,s=e/60|0;return (s<10?"0"+s:s+"")+":"+(t<10?"0"+t:t+"")}static formatDateTime(e,t){if(null==t&&(t=0),null==e)return "";if(isNaN(e.getTime()))return "";let s=new Date(e.getFullYear(),e.getMonth(),e.getDay(),e.getHours(),e.getMinutes(),e.getSeconds()+t),n=s.getSeconds(),r=s.getMinutes();return s.getHours()+":"+(r<10?"0"+r:r+"")+":"+(n<10?"0"+n:n+"")}static initTranslations(){Ye.translations=new _t;let e=exports.i18n,t=0,s=o.fields(e);for(;t<s.length;){let n=s[t];++t,Ye.translations.h[n]=new _t;let r=o.field(e,n),a=Ye.translations.h[n],l=0,i=o.fields(r);for(;l<i.length;){let e=i[l];++l;let t=Ye.decodeUtf8(o.field(r,e));a.h[e]=t;}}}static decodeUtf8(e){try{return decodeURIComponent(escape(e))}catch(t){return e}}static translate(e,t,s){null==t&&(t=Ye.locale),null==Ye.translations&&Ye.initTranslations();try{return Object.prototype.hasOwnProperty.call(Ye.translations.h,t)||(t="en"),Ye.translations.h[t].h[e]}catch(e){return null}}static capilizeFirstLetter(e){return null==e?null:l.substr(e,0,1).toUpperCase()+l.substr(e,1,e.length)}}e.bs.util.TextTools=Ye,Ye.__name__="bs.util.TextTools",Object.assign(Ye.prototype,{__class__:Ye});class Je{__keepFieldsFix(){return p.getInstanceFields(Je)}static random(e){null==e&&(e="xxxx-xxxx-xxxx-xxxx-xxxx");let t,s=e.length,n=Je.UID_CHARS.length,r="",a=0;for(;a<s;){let s;switch(t=e.charAt(a++),t){case"-":case"_":s=t;break;default:s=Je.UID_CHARS.charAt(u.random(n));}r+=s;}return r}static uuidv4(){let e=0,t="",s=null,n=0;for(;n<36;)e=u.random(16),s="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".charAt(n++),t+="x"==s?h.hex(e):"y"==s?h.hex(3&e|8):s;return t}}e.bs.util.UUID=Je,Je.__name__="bs.util.UUID",Object.assign(Je.prototype,{__class__:Je});class Ke{}Ke.__name__="haxe.IMap",Ke.__isInterface__=!0,Object.assign(Ke.prototype,{__class__:Ke,get:null,keys:null});class Ze extends Error{constructor(e,t,s){super(e),this.message=e,this.__previousException=t,this.__nativeException=null!=s?s:this;}unwrap(){return this.__nativeException}toString(){return this.get_message()}get_message(){return this.message}get_native(){return this.__nativeException}static caught(e){return e instanceof Ze?e:e instanceof Error?new Ze(e.message,null,e):new tt(e,null,e)}static thrown(e){if(e instanceof Ze)return e.get_native();if(e instanceof Error)return e;return new tt(e)}}Ze.__name__="haxe.Exception",Ze.__super__=Error,Object.assign(Ze.prototype,{__class__:Ze,__skipStack:null,__nativeException:null,__previousException:null,__properties__:{get_native:"get_native",get_message:"get_message"}});class $e{constructor(e,t){this.high=e,this.low=t;}}$e.__name__="haxe._Int64.___Int64",Object.assign($e.prototype,{__class__:$e,high:null,low:null});class Qe{static formatOutput(e,t){let s=u.string(e);if(null==t)return s;let n=t.fileName+":"+t.lineNumber;if(null!=t.customParams){let e=0,n=t.customParams;for(;e<n.length;)s+=", "+u.string(n[e++]);}return n+": "+s}static trace(e,t){let s=Qe.formatOutput(e,t);"undefined"!=typeof console&&null!=console.log&&console.log(s);}}Qe.__name__="haxe.Log";class et{constructor(e){let t=this;this.id=setInterval((function(){t.run();}),e);}stop(){null!=this.id&&(clearInterval(this.id),this.id=null);}run(){}static delay(e,t){let s=new et(t);return s.run=function(){s.stop(),e();},s}static measure(e,t){let s=l.now()/1e3,n=e();return Qe.trace(l.now()/1e3-s+"s",t),n}static stamp(){return l.now()/1e3}}e.haxe.Timer=et,et.__name__="haxe.Timer",Object.assign(et.prototype,{__class__:et,id:null});class tt extends Ze{constructor(e,t,s){super(String(e),t,s),this.value=e;}unwrap(){return this.value}}tt.__name__="haxe.ValueException",tt.__super__=Ze,Object.assign(tt.prototype,{__class__:tt,value:null});class st{constructor(e){this.length=e.byteLength,this.b=new Uint8Array(e),this.b.bufferValue=e,e.hxBytes=this,e.bytes=this.b;}get(e){return this.b[e]}set(e,t){this.b[e]=t;}blit(e,t,s,n){if(e<0||s<0||n<0||e+n>this.length||s+n>t.length)throw Ze.thrown(yt.OutsideBounds);0==s&&n==t.b.byteLength?this.b.set(t.b,e):this.b.set(t.b.subarray(s,s+n),e);}fill(e,t,s){let n=0;for(;n<t;)++n,this.b[e++]=s;}sub(e,t){if(e<0||t<0||e+t>this.length)throw Ze.thrown(yt.OutsideBounds);return new st(this.b.buffer.slice(e+this.b.byteOffset,e+this.b.byteOffset+t))}compare(e){let t=this.b,s=e.b,n=0,r=this.length<e.length?this.length:e.length;for(;n<r;){let e=n++;if(t[e]!=s[e])return t[e]-s[e]}return this.length-e.length}initData(){null==this.data&&(this.data=new DataView(this.b.buffer,this.b.byteOffset,this.b.byteLength));}getDouble(e){return null==this.data&&(this.data=new DataView(this.b.buffer,this.b.byteOffset,this.b.byteLength)),this.data.getFloat64(e,!0)}getFloat(e){return null==this.data&&(this.data=new DataView(this.b.buffer,this.b.byteOffset,this.b.byteLength)),this.data.getFloat32(e,!0)}setDouble(e,t){null==this.data&&(this.data=new DataView(this.b.buffer,this.b.byteOffset,this.b.byteLength)),this.data.setFloat64(e,t,!0);}setFloat(e,t){null==this.data&&(this.data=new DataView(this.b.buffer,this.b.byteOffset,this.b.byteLength)),this.data.setFloat32(e,t,!0);}getUInt16(e){return null==this.data&&(this.data=new DataView(this.b.buffer,this.b.byteOffset,this.b.byteLength)),this.data.getUint16(e,!0)}setUInt16(e,t){null==this.data&&(this.data=new DataView(this.b.buffer,this.b.byteOffset,this.b.byteLength)),this.data.setUint16(e,t,!0);}getInt32(e){return null==this.data&&(this.data=new DataView(this.b.buffer,this.b.byteOffset,this.b.byteLength)),this.data.getInt32(e,!0)}setInt32(e,t){null==this.data&&(this.data=new DataView(this.b.buffer,this.b.byteOffset,this.b.byteLength)),this.data.setInt32(e,t,!0);}getInt64(e){return new $e(this.getInt32(e+4),this.getInt32(e))}setInt64(e,t){this.setInt32(e,t.low),this.setInt32(e+4,t.high);}getString(e,t,s){if(e<0||t<0||e+t>this.length)throw Ze.thrown(yt.OutsideBounds);null==s&&(s=nt.UTF8);let n="",r=this.b,a=e,l=e+t;switch(s._hx_index){case 0:for(;a<l;){let e=r[a++];if(e<128){if(0==e)break;n+=String.fromCodePoint(e);}else if(e<224){let t=(63&e)<<6|127&r[a++];n+=String.fromCodePoint(t);}else if(e<240){let t=(31&e)<<12|(127&r[a++])<<6|127&r[a++];n+=String.fromCodePoint(t);}else {let t=(15&e)<<18|(127&r[a++])<<12|(127&r[a++])<<6|127&r[a++];n+=String.fromCodePoint(t);}}break;case 1:for(;a<l;){let e=r[a++]|r[a++]<<8;n+=String.fromCodePoint(e);}}return n}readString(e,t){return this.getString(e,t)}toString(){return this.getString(0,this.length)}toHex(){let e="",t=[],s="0123456789abcdef",n=0;for(;n<16;)t.push(l.cca(s,n++));let r=0,a=this.length;for(;r<a;){let s=this.b[r++];e+=String.fromCodePoint(t[s>>4]),e+=String.fromCodePoint(t[15&s]);}return e}getData(){return this.b.bufferValue}static alloc(e){return new st(new ArrayBuffer(e))}static ofString(e,t){if(t==nt.RawNative){let t=new Uint8Array(e.length<<1),s=0,n=e.length;for(;s<n;){let n=s++,r=e.charCodeAt(n);t[n<<1]=255&r,t[n<<1|1]=r>>8;}return new st(t.buffer)}let s=[],n=0;for(;n<e.length;){let t=e.charCodeAt(n++);55296<=t&&t<=56319&&(t=t-55232<<10|1023&e.charCodeAt(n++)),t<=127?s.push(t):t<=2047?(s.push(192|t>>6),s.push(128|63&t)):t<=65535?(s.push(224|t>>12),s.push(128|t>>6&63),s.push(128|63&t)):(s.push(240|t>>18),s.push(128|t>>12&63),s.push(128|t>>6&63),s.push(128|63&t));}return new st(new Uint8Array(s).buffer)}static ofData(e){let t=e.hxBytes;return null!=t?t:new st(e)}static ofHex(e){if(0!=(1&e.length))throw Ze.thrown("Not a hex string (odd number of digits)");let t=[],s=0,n=e.length>>1;for(;s<n;){let n=e.charCodeAt(2*s),r=e.charCodeAt(2*s+1);n=(15&n)+9*((64&n)>>6),r=(15&r)+9*((64&r)>>6),t.push(255&(n<<4|r)),++s;}return new st(new Uint8Array(t).buffer)}static fastGet(e,t){return e.bytes[t]}}e.haxe.io.Bytes=st,st.__name__="haxe.io.Bytes",Object.assign(st.prototype,{__class__:st,length:null,b:null,data:null});var nt=r["haxe.io.Encoding"]={__ename__:!0,__constructs__:null,UTF8:{_hx_name:"UTF8",_hx_index:0,__enum__:"haxe.io.Encoding",toString:n},RawNative:{_hx_name:"RawNative",_hx_index:1,__enum__:"haxe.io.Encoding",toString:n}};nt.__constructs__=[nt.UTF8,nt.RawNative];class rt{static encode(e,t){null==t&&(t=!0);let s=new at(rt.BYTES).encodeBytes(e).toString();if(t)switch(e.length%3){case 1:s+="==";break;case 2:s+="=";}return s}static decode(e,t){if(null==t&&(t=!0),t)for(;61==l.cca(e,e.length-1);)e=l.substr(e,0,-1);return new at(rt.BYTES).decodeBytes(st.ofString(e))}static urlEncode(e,t){null==t&&(t=!1);let s=new at(rt.URL_BYTES).encodeBytes(e).toString();if(t)switch(e.length%3){case 1:s+="==";break;case 2:s+="=";}return s}static urlDecode(e,t){if(null==t&&(t=!1),t)for(;61==l.cca(e,e.length-1);)e=l.substr(e,0,-1);return new at(rt.URL_BYTES).decodeBytes(st.ofString(e))}}e.haxe.crypto.Base64=rt,rt.__name__="haxe.crypto.Base64";class at{constructor(e){let t=e.length,s=1;for(;t>1<<s;)++s;if(s>8||t!=1<<s)throw Ze.thrown("BaseCode : base length must be a power of two.");this.base=e,this.nbits=s;}encodeBytes(e){let t=this.nbits,s=this.base,n=8*e.length/t|0,r=new st(new ArrayBuffer(n+(8*e.length%t==0?0:1))),a=0,l=0,i=(1<<t)-1,o=0,u=0;for(;u<n;){for(;l<t;)l+=8,a<<=8,a|=e.b[o++];l-=t,r.b[u++]=s.b[a>>l&i];}return l>0&&(r.b[u++]=s.b[a<<t-l&i]),r}initTable(){let e=[],t=0;for(;t<256;)e[t++]=-1;let s=0,n=this.base.length;for(;s<n;){let t=s++;e[this.base.b[t]]=t;}this.tbl=e;}decodeBytes(e){let t=this.nbits;null==this.tbl&&this.initTable();let s=this.tbl,n=e.length*t>>3,r=new st(new ArrayBuffer(n)),a=0,l=0,i=0,o=0;for(;o<n;){for(;l<8;){l+=t,a<<=t;let n=s[e.b[i++]];if(-1==n)throw Ze.thrown("BaseCode : invalid encoded char");a|=n;}l-=8,r.b[o++]=a>>l&255;}return r}encodeString(e){return this.encodeBytes(st.ofString(e)).toString()}decodeString(e){return this.decodeBytes(st.ofString(e)).toString()}static encode(e,t){return new at(st.ofString(t)).encodeString(e)}static decode(e,t){return new at(st.ofString(t)).decodeString(e)}}e.haxe.crypto.BaseCode=at,at.__name__="haxe.crypto.BaseCode",Object.assign(at.prototype,{__class__:at,base:null,nbits:null,tbl:null});class lt{constructor(){this.h={};}set(e,t){this.h[e]=t;}get(e){return this.h[e]}exists(e){return this.h.hasOwnProperty(e)}remove(e){return !!this.h.hasOwnProperty(e)&&(delete this.h[e],!0)}keys(){let e=[];for(var t in this.h)this.h.hasOwnProperty(t)&&e.push(+t);return new bt(e)}iterator(){return {ref:this.h,it:this.keys(),hasNext:function(){return this.it.hasNext()},next:function(){let e=this.it.next();return this.ref[e]}}}keyValueIterator(){return new xt(this)}copy(){let e=new lt,t=this.keys();for(;t.hasNext();){let s=t.next();e.h[s]=this.h[s];}return e}toString(){let e="";e="[";let t=this.keys();for(;t.hasNext();){let s=t.next();e+=null==s?"null":""+s,e+=" => ",e+=u.string(u.string(this.h[s])),t.hasNext()&&(e+=", ");}return e+="]",e}clear(){this.h={};}}e.haxe.ds.IntMap=lt,lt.__name__="haxe.ds.IntMap",lt.__interfaces__=[Ke],Object.assign(lt.prototype,{__class__:lt,h:null});class it{constructor(){this.length=0;}add(e){let t=new ot(e,null);null==this.h?this.h=t:this.q.next=t,this.q=t,this.length++;}push(e){let t=new ot(e,this.h);this.h=t,null==this.q&&(this.q=t),this.length++;}first(){return null==this.h?null:this.h.item}last(){return null==this.q?null:this.q.item}pop(){if(null==this.h)return null;let e=this.h.item;return this.h=this.h.next,null==this.h&&(this.q=null),this.length--,e}isEmpty(){return null==this.h}clear(){this.h=null,this.q=null,this.length=0;}remove(e){let t=null,s=this.h;for(;null!=s;){if(s.item==e)return null==t?this.h=s.next:t.next=s.next,this.q==s&&(this.q=t),this.length--,!0;t=s,s=s.next;}return !1}iterator(){return new ut(this.h)}keyValueIterator(){return new ct(this.h)}toString(){let e="",t=!0,s=this.h;for(e="{";null!=s;)t?t=!1:e+=", ",e+=u.string(u.string(s.item)),s=s.next;return e+="}",e}join(e){let t="",s=!0,n=this.h;for(;null!=n;)s?s=!1:t+=null==e?"null":""+e,t+=u.string(n.item),n=n.next;return t}filter(e){let t=new it,s=this.h;for(;null!=s;){let n=s.item;s=s.next,e(n)&&t.add(n);}return t}map(e){let t=new it,s=this.h;for(;null!=s;){let n=s.item;s=s.next,t.add(e(n));}return t}}e.haxe.ds.List=it,it.__name__="haxe.ds.List",Object.assign(it.prototype,{__class__:it,h:null,q:null,length:null});class ot{constructor(e,t){this.item=e,this.next=t;}}e.haxe.ds._List.ListNode=ot,ot.__name__="haxe.ds._List.ListNode",Object.assign(ot.prototype,{__class__:ot,item:null,next:null});class ut{constructor(e){this.head=e;}hasNext(){return null!=this.head}next(){let e=this.head.item;return this.head=this.head.next,e}}e.haxe.ds._List.ListIterator=ut,ut.__name__="haxe.ds._List.ListIterator",Object.assign(ut.prototype,{__class__:ut,head:null});class ct{constructor(e){this.head=e,this.idx=0;}hasNext(){return null!=this.head}next(){let e=this.head.item;return this.head=this.head.next,{value:e,key:this.idx++}}}e.haxe.ds._List.ListKeyValueIterator=ct,ct.__name__="haxe.ds._List.ListKeyValueIterator",Object.assign(ct.prototype,{__class__:ct,idx:null,head:null});class _t{constructor(){this.h=Object.create(null);}exists(e){return Object.prototype.hasOwnProperty.call(this.h,e)}get(e){return this.h[e]}set(e,t){this.h[e]=t;}remove(e){return !!Object.prototype.hasOwnProperty.call(this.h,e)&&(delete this.h[e],!0)}keys(){return new ht(this.h)}iterator(){return new pt(this.h)}keyValueIterator(){return new dt(this.h)}copy(){return _t.createCopy(this.h)}clear(){this.h=Object.create(null);}toString(){return _t.stringify(this.h)}static createCopy(e){let t=new _t;for(var s in e)t.h[s]=e[s];return t}static stringify(e){let t="[",s=!0;for(var n in e)s?s=!1:t+=",",t+=n+" => "+u.string(e[n]);return t+"]"}}e.haxe.ds.StringMap=_t,_t.__name__="haxe.ds.StringMap",_t.__interfaces__=[Ke],Object.assign(_t.prototype,{__class__:_t,h:null});class ht{constructor(e){this.h=e,this.keys=Object.keys(e),this.length=this.keys.length,this.current=0;}hasNext(){return this.current<this.length}next(){return this.keys[this.current++]}}e.haxe.ds._StringMap.StringMapKeyIterator=ht,ht.__name__="haxe.ds._StringMap.StringMapKeyIterator",Object.assign(ht.prototype,{__class__:ht,h:null,keys:null,length:null,current:null});class pt{constructor(e){this.h=e,this.keys=Object.keys(e),this.length=this.keys.length,this.current=0;}hasNext(){return this.current<this.length}next(){return this.h[this.keys[this.current++]]}}e.haxe.ds._StringMap.StringMapValueIterator=pt,pt.__name__="haxe.ds._StringMap.StringMapValueIterator",Object.assign(pt.prototype,{__class__:pt,h:null,keys:null,length:null,current:null});class dt{constructor(e){this.h=e,this.keys=Object.keys(e),this.length=this.keys.length,this.current=0;}hasNext(){return this.current<this.length}next(){let e=this.keys[this.current++];return {key:e,value:this.h[e]}}}e.haxe.ds._StringMap.StringMapKeyValueIterator=dt,dt.__name__="haxe.ds._StringMap.StringMapKeyValueIterator",Object.assign(dt.prototype,{__class__:dt,h:null,keys:null,length:null,current:null});class gt extends Ze{constructor(e,t,s){super(e,t),this.posInfos=null==s?{fileName:"(unknown)",lineNumber:0,className:"(unknown)",methodName:"(unknown)"}:s;}toString(){return super.toString()+" in "+this.posInfos.className+"."+this.posInfos.methodName+" at "+this.posInfos.fileName+":"+this.posInfos.lineNumber}}gt.__name__="haxe.exceptions.PosException",gt.__super__=Ze,Object.assign(gt.prototype,{__class__:gt,posInfos:null});class mt extends gt{constructor(e,t,s){null==e&&(e="Not implemented"),super(e,t,s);}}mt.__name__="haxe.exceptions.NotImplementedException",mt.__super__=gt,Object.assign(mt.prototype,{__class__:mt});var yt=r["haxe.io.Error"]={__ename__:!0,__constructs__:null,Blocked:{_hx_name:"Blocked",_hx_index:0,__enum__:"haxe.io.Error",toString:n},Overflow:{_hx_name:"Overflow",_hx_index:1,__enum__:"haxe.io.Error",toString:n},OutsideBounds:{_hx_name:"OutsideBounds",_hx_index:2,__enum__:"haxe.io.Error",toString:n},Custom:(s=function(e){return {_hx_index:3,e,__enum__:"haxe.io.Error",toString:n}},s._hx_name="Custom",s.__params__=["e"],s)};yt.__constructs__=[yt.Blocked,yt.Overflow,yt.OutsideBounds,yt.Custom];class bt{constructor(e){this.current=0,this.array=e;}hasNext(){return this.current<this.array.length}next(){return this.array[this.current++]}}e.haxe.iterators.ArrayIterator=bt,bt.__name__="haxe.iterators.ArrayIterator",Object.assign(bt.prototype,{__class__:bt,array:null,current:null});class ft{constructor(e){this.array=e;}}ft.__name__="haxe.iterators.ArrayKeyValueIterator",Object.assign(ft.prototype,{__class__:ft,array:null});class xt{constructor(e){this.map=e,this.keys=e.keys();}hasNext(){return this.keys.hasNext()}next(){let e=this.keys.next();return {value:this.map.get(e),key:e}}}xt.__name__="haxe.iterators.MapKeyValueIterator",Object.assign(xt.prototype,{__class__:xt,map:null,keys:null});class wt{constructor(e){this.s=e;}}wt.__name__="haxe.iterators.StringIterator",Object.assign(wt.prototype,{__class__:wt,s:null});class vt{constructor(e){this.s=e;}}vt.__name__="haxe.iterators.StringKeyValueIterator",Object.assign(vt.prototype,{__class__:vt,s:null});class St{static getClass(e){if(null==e)return null;if(e instanceof Array)return Array;{let t=e.__class__;if(null!=t)return t;let s=St.__nativeClassName(e);return null!=s?St.__resolveNativeClass(s):null}}static __string_rec(e,t){if(null==e)return "null";if(t.length>=5)return "<...>";let s=typeof e;switch("function"==s&&(e.__name__||e.__ename__)&&(s="object"),s){case"function":return "<function>";case"object":if(e.__enum__){let s=r[e.__enum__].__constructs__[e._hx_index],n=s._hx_name;return s.__params__?(t+="\t",n+"("+function(n){let r=[];{let n=0,a=s.__params__;for(;n<a.length;){let s=a[n];n+=1,r.push(St.__string_rec(e[s],t));}}return r}().join(",")+")"):n}if(e instanceof Array){let s="[";t+="\t";let n=0,r=e.length;for(;n<r;){let r=n++;s+=(r>0?",":"")+St.__string_rec(e[r],t);}return s+="]",s}let s;try{s=e.toString;}catch(e){return "???"}if(null!=s&&s!=Object.toString&&"function"==typeof s){let t=e.toString();if("[object Object]"!=t)return t}let n="{\n";t+="\t";let a=null!=e.hasOwnProperty,l=null;for(l in e)a&&!e.hasOwnProperty(l)||"prototype"!=l&&"__class__"!=l&&"__super__"!=l&&"__interfaces__"!=l&&"__properties__"!=l&&(2!=n.length&&(n+=", \n"),n+=t+l+" : "+St.__string_rec(e[l],t));return n+="\n"+(t=t.substring(1))+"}",n;case"string":return e;default:return String(e)}}static __interfLoop(e,t){for(;;){if(null==e)return !1;if(e==t)return !0;let s=e.__interfaces__;if(null!=s&&(null==e.__super__||e.__super__.__interfaces__!=s)){let e=0,n=s.length;for(;e<n;){let n=s[e++];if(n==t||St.__interfLoop(n,t))return !0}}e=e.__super__;}}static __instanceof(e,t){if(null==t)return !1;switch(t){case Array:return e instanceof Array;case Lt:return "boolean"==typeof e;case Pt:return null!=e;case At:return "number"==typeof e;case Ct:return "number"==typeof e&&(0|e)===e;case String:return "string"==typeof e;default:if(null==e)return !1;if("function"==typeof t){if(St.__downcastCheck(e,t))return !0}else if("object"==typeof t&&St.__isNativeObj(t)&&e instanceof t)return !0;return t==kt&&null!=e.__name__||(t==Nt&&null!=e.__ename__||null!=e.__enum__&&r[e.__enum__]==t)}}static __downcastCheck(e,t){return e instanceof t||!!t.__isInterface__&&St.__interfLoop(St.getClass(e),t)}static __cast(e,t){if(null==e||St.__instanceof(e,t))return e;throw Ze.thrown("Cannot cast "+u.string(e)+" to "+u.string(t))}static __nativeClassName(e){let t=St.__toStr.call(e).slice(8,-1);return "Object"==t||"Function"==t||"Math"==t||"JSON"==t?null:t}static __isNativeObj(e){return null!=St.__nativeClassName(e)}static __resolveNativeClass(e){return t[e]}}St.__name__="js.Boot";class Ot{static get_supported(){return "undefined"!=typeof window&&void 0!==window.location&&"string"==typeof window.location.protocol}static createXMLHttpRequest(){if("undefined"!=typeof XMLHttpRequest)return new XMLHttpRequest;if("undefined"!=typeof ActiveXObject)return new ActiveXObject("Microsoft.XMLHTTP");throw Ze.thrown("Unable to create XMLHttpRequest object.")}}function It(e){return e instanceof Array?new bt(e):e.iterator()}function Et(e,s){return null==s?null:(null==s.__id__&&(s.__id__=t.$haxeUID++),null==e.hx__closures__?e.hx__closures__={}:n=e.hx__closures__[s.__id__],null==n&&(n=s.bind(e),e.hx__closures__[s.__id__]=n),n);var n;}Ot.__name__="js.Browser",Ot.__properties__={get_supported:"get_supported"},t.$haxeUID|=0,"undefined"!=typeof performance&&"function"==typeof performance.now&&(l.now=performance.now.bind(performance)),null==String.fromCodePoint&&(String.fromCodePoint=function(e){return e<65536?String.fromCharCode(e):String.fromCharCode(55232+(e>>10))+String.fromCharCode(56320+(1023&e))}),Object.defineProperty(String.prototype,"__class__",{value:String,enumerable:!1,writable:!0}),String.__name__="String",Array.__name__="Array",Date.prototype.__class__=Date,Date.__name__="Date";var Ct={},Pt={},At=Number,Lt=Boolean,kt={},Nt={};{let e,t=window.navigator.appVersion,s=window.navigator.userAgent,n=window.navigator.appName,r=parseFloat(navigator.appVersion)+"";f.majorVersion=parseFloat(t);let l=s.indexOf("OPR/");if(-1!=l)n="Opera",r=s.substring(l+4);else if(l=s.indexOf("Opera"),-1!=l)n="Opera",r=s.substring(l+6),l=s.indexOf("Version"),-1!=l&&(r=s.substring(l+8));else if(l=s.indexOf("Edge"),-1!=l){let e;n="Edge",r=s.substring(l+5),window.MediaKeys?(l=s.indexOf("Chrome"),e=-1!=l):e=!1,e?(n="EdgeChromium",r=s.substring(l+7)):"reversed"in document.createElement("ol")&&(n="EdgeChromium",r="80");}else if(l=s.indexOf("Edg/"),-1!=l)n="EdgeChromium",r=s.substring(l+4);else if(l=s.indexOf("MSIE"),-1!=l)n="Microsoft Internet Explorer",r=s.substring(l+5);else {let t;-1!=s.indexOf("Trident/")?(l=s.indexOf("rv:"),t=-1!=l):t=!1,t?(n="Microsoft Internet Explorer",r=s.substring(l+3)):(l=s.indexOf("Chrome"),-1!=l?(n="Chrome",r=s.substring(l+7)):(l=s.indexOf("Safari"),-1!=l?(n="Safari",r=s.substring(l+7),l=s.indexOf("Version"),-1!=l&&(r=s.substring(l+8))):(l=s.indexOf("Firefox"),-1!=l?(n="Firefox",r=s.substring(l+8)):(e=s.lastIndexOf(" ")+1,l=s.lastIndexOf("/"),e<l&&(n=s.substring(e,l),r=s.substring(l+1),n.toLowerCase()==n.toUpperCase()&&(n=window.navigator.appName))))));}let i=r.indexOf(";");if(-1!=i&&(r=r.substring(0,i)),i=r.indexOf(" "),-1!=i)r=r.substring(0,i);else if("Netscape"==n){let e=new a("Trident.*rv:([0-9]{1,}[\\.0-9]{0,})","");e.match(s);try{e.matched(0),r=e.matched(1),n="Microsoft Internet Explorer";}catch(e){}}f.majorVersion=u.parseInt(""+r);let o=f.majorVersion;isNaN(o)&&(r=""+parseFloat(t),f.majorVersion=u.parseInt(t)),f.browserName=n;let c=window.navigator.userAgent;c=c.toLowerCase(),f.isAndroid=c.indexOf("android")>-1,f.isBlackBerry=c.indexOf("blackberry")>-1,f.isiPhone=c.indexOf("iphone")>-1,f.isiPad=c.indexOf("ipad")>-1,f.isiPod=c.indexOf("ipod")>-1,f.isOperaMini=c.indexOf("opera mini")>-1,f.isIeMobile=c.indexOf("iemobile")>-1,f.isWindowsPhone=c.indexOf("windows phone")>-1,f.isEdge="Edge"==f.browserName;let _=navigator.maxTouchPoints&&navigator.maxTouchPoints>2&&-1!=(navigator.platform+"").indexOf("MacIntel");if(f.isiOS=f.isiPhone||f.isiPad||f.isiPod||_,f.mobile=f.isAndroid||f.isBlackBerry||f.isiOS||f.isOperaMini||f.isIeMobile,c.indexOf("smart-tv")>-1||c.indexOf("smarttv")>-1){f.smartTV=!0;let e=c.indexOf("samsungbrowser")>-1,t=c.indexOf("tizen")>-1;f.isSamsungSmartTVTizen=t&&!e;}else f.smartTV=!1,f.isSamsungSmartTVTizen=!1;}{x.expose=o.field(window,"bradmax"),null==x.expose&&(window.bradmax=Object.create(null),x.expose=o.field(window,"bradmax"));let e=["bigsoda"],t=0;for(;t<e.length;){let s=e[t];++t,window[s]=x.expose;}0==Object.prototype.hasOwnProperty.call(x.expose,"player")&&(x.expose.player=Object.create(null));let s=o.field(x.expose,"player");0==Object.prototype.hasOwnProperty.call(s,"plugin")&&(s.plugin=Object.create(null)),0==Object.prototype.hasOwnProperty.call(s,"create")&&(s.create=Object.create(null)),0==Object.prototype.hasOwnProperty.call(s,"destroy")&&(s.destroy=Object.create(null)),0==Object.prototype.hasOwnProperty.call(s,"list")&&(s.list=Object.create(null)),0==Object.prototype.hasOwnProperty.call(s,"getById")&&(s.getById=Object.create(null)),0==Object.prototype.hasOwnProperty.call(s,"embeders")&&(s.embeders=Object.create(null)),0==Object.prototype.hasOwnProperty.call(s,"composers")&&(s.composers=Object.create(null));Object.prototype.hasOwnProperty.call(s,"embeder");let n="modular_v2.14.417";x.sourcePath=f.findThisJsScriptAbsolutePath(n);let r=o.field(s,"embeders");null==o.field(r,n)&&(r[n]=x);let a=o.field(s,"composers");null==o.field(a,n)&&(a[n]=b);}{let e=window.document;L.fullscreenEventName="fullscreenchange","Safari"==f.browserName&&null!=e.webkitIsFullScreen?L.fullscreenEventName="webkitfullscreenchange":"Firefox"==f.browserName&&null!=e.mozFullScreen&&f.majorVersion<64?L.fullscreenEventName="mozfullscreenchange":null!=e.msFullscreenEnabled&&(L.fullscreenEventName="MSFullscreenChange");}St.__toStr={}.toString,a.escapeRe=new RegExp("[.*+?^${}()|[\\]\\\\]","g"),_.winMetaCharacters=[32,40,41,37,33,94,34,60,62,38,124,10,13,44,59],h.winMetaCharacters=_.winMetaCharacters,h.MIN_SURROGATE_CODE_POINT=65536,g._hx_skip_constructor=!1,x.NAMESPACE="bradmax",x.ATTRIBUTE_PID="data-bradmax-player-pid",x.VIDEO_TAG_FOR_AUTOPLAY_INITIALSED="data-ready-for-autoplay",x.PLAYER_ATTRIBUTE_PARENT_ID="data-bs-parent-id",x.PLAYER_ATTRIBUTE_VARIABLES="data-bs-variables",x.HTML_VIDEO_MAX_ELEMENTS_FOR_LATER_AUTOPLAY=2,x.players=new _t,x.wrappers=[],x.htmlVideoElementsForLaterAutoplay=[],x.pendingVideoElementsForLaterAutoplay=0,x.listenersWaitinfForVideoElementForAutoplay=[],j.instance=new j,j.listenersMap=new _t,j.onceListenersMap=new _t,j.disabledListenersMap=new _t,B.instance=new B,V.monitors=new _t,H._hx_skip_constructor=!1,Le.DEFAULT_BRADMAX_SKIN_APP_ID="53001214",Le.libLoaded=!1,Le._isAvailable=!1,Me._hx_skip_constructor=!1,Ye.locale="en",Je.UID_CHARS="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz",rt.CHARS="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",rt.BYTES=st.ofString(rt.CHARS),rt.URL_CHARS="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",rt.URL_BYTES=st.ofString(rt.URL_CHARS);}(exports,window);
!function(t,e){t.bs=t.bs||{},t.bs.player=t.bs.player||{},t.bs.player.plugin=t.bs.player.plugin||{},t.bs.player.plugin.skin=t.bs.player.plugin.skin||{};var s,i=function(){return zt.__string_rec(this,"")},a=a||{},n=require("haxe.EReg"),l=require("haxe.EReg"),r=require("haxe.HxOverrides");Math.__name__="Math";var o=require("haxe.Reflect");class h{static string(t){return zt.__string_rec(t,"")}static parseInt(t){let e=parseInt(t);return isNaN(e)?null:e}static random(t){return t<=0?0:Math.floor(Math.random()*t)}}h.__name__="Std";var u=require("haxe.StringTools"),c=require("bs.net.Http"),d=require("bs.player.core.events.AdEvent"),p=require("bs.player.core.events.ControlEvent"),m=require("bs.player.core.events.DataProviderEvent"),f=require("bs.player.core.events.DisplayEvent"),g=require("bs.util.BrowserTools"),_=require("bs.player.core.events.NativeEvent"),v=require("bs.player.core.events.ResizeEvent"),b=require("bs.player.core.events.SphericalVideoEvent"),y=require("bs.player.core.events.VideoEvent");class k{}k.__name__="bs.player.core.interfaces.IBradmaxThumbnailsService",k.__isInterface__=!0,Object.assign(k.prototype,{__class__:k});var w=require("bs.player.core.manager.PlaybackStateRegister"),x=require("bs.player.core.model.Live"),S=require("bs.player.core.model.LiveStream"),E=require("bs.player.core.model.MediaPlaylist"),P=require("bs.player.core.model.Image"),O=require("bs.player.core.model.Point"),C=require("bs.player.core.model.Episode");class T{constructor(){T._hx_skip_constructor||this._hx_constructor();}_hx_constructor(){this.pluginName="";let t=zt.getClass(this);this.pluginName=t.__name__.split(".").pop();let e=this.pluginName,s=exports.configuration;this.pluginConfig=null!=s&&Object.prototype.hasOwnProperty.call(s,e)?o.field(s,e):Object.create(null);}create(){}destroy(){}activate(){}postActivate(){}deactivate(){}eventFilter(t){return !0}registerPlugin(t){}getPluginVersion(){return "v2.14.417"}getPluginName(){return this.pluginName}get_player(){return this.player}set_player(t){return this.player=t}get_variables(){return this.variables}set_variables(t){return this.variables=t}get_eventHub(){return this.eventHub}set_eventHub(t){return this.eventHub=t}get_parentDisplay(){return this.parentDisplay}set_parentDisplay(t){return this.parentDisplay=t}get_display(){return this.display}}T.__name__="bs.player.core.plugin.PluginBase",Object.assign(T.prototype,{__class__:T});var M=require("bs.player.core.vtt.VttMarkersParserEntry"),A=require("bs.player.core.vtt.VttMarkersParser"),I=require("bs.player.core.vtt.VttSegmentsParserEntry"),L=require("bs.player.core.vtt.VttSegmentsParser"),D=require("bs.player.core.vtt.VttThumbnailsParser");class F extends T{constructor(){T._hx_skip_constructor=!0,super(),T._hx_skip_constructor=!1,this._hx_constructor();}_hx_constructor(){this.fontsLoaded=!1,this.sourcesLoaded=!1,this.ready=!1,this.layoutAvailable=!1,this.activated=!1,this._css={adPlaying:"iab-playing",vpaidPlaying:"vpaid-playing"};let t={current:{time:0,text:Tt.formatTime(0)},duration:{time:0,text:Tt.formatTime(0)},status:{inited:!1,playing:!1,paused:!1,buffering:!1,seeking:!1,complete:!1,live:!1,dvr:!1,seekable:!0},playPause:null,seekEnd:null,replay:null},e=isNaN(1)||!isFinite(1)?"0%":Math.max(0,Math.min(100,100))+"%",s={time:0,text:Tt.formatTime(0),width:"0",has:{thumb:!1,segments:!1,segment:!1,markers:!1,marker:!1,texts:!1},popup:{active:!1,time:0,text:Tt.formatTime(0),position:"0",width:"0",bounds:{offset:"0px",ctrl:null},ctrl:null},ctrl:null},i={width:NaN,height:NaN,current:"xxs",gt:{xxs:!0,xs:!1,sm:!1,md:!1,lg:!1,xl:!1,xxl:!1},lt:{xxs:!1,xs:!0,sm:!0,md:!0,lg:!0,xl:!0,xxl:!0}},a=g.isMobile(),n=g.isSmartTV(),l={browserName:g.browserName.toLowerCase(),desktop:0==a&&0==n,mobile:a,ios:g.isiOS,tv:n,tizen:g.isSamsungSmartTVTizen,webview:g.isWebView(),css:null};this.state={name:"",prefix:"",title:null,video:t,volume:{mute:!1,value:1,prc:e,text:"100",active:!1,ctrl:null,toggle:null},progress:s,playlist:{hasNext:!1,currentPos:-1,items:null,playItem:null},brand:null,splash:{show:{start:!1,actions:!1,state:!1,buttons:!1,end:!1},can:{backward:!1,forward:!1},start:{type:"image"},actions:{seek:{offset:0,animate:!1,countBackward:null,countForward:null,backward:null,forward:null,reset:null},btns:{animate:!1,enabled:!1,countBackward:null,countForward:null,seekBackward:null,seekForward:null},click:null,reset:null},state:{type:"standard"},end:{type:"standard",playNext:null}},share:null,spinner:null,menu:{count:0,audio:{hasItems:!1,activate:null},casting:null,fullscreen:null,pictureInPicture:null,quality:{hasItems:!1,activate:null,value:null},subtitles:{hasItems:!1,activate:null},vr:null,playbackRate:{hasItems:!1,items:null,activate:null}},contextmenu:{show:!1,ctrl:null},ad:null,hide:{css:"show",reset:null},size:i,device:l,message:null,icon:{type:"css",airplay:{id:"bmp-ico-airplay"},alert:{id:"bmp-ico-alert"},subtitles:{id:"bmp-ico-subtitles"},pip:{id:"bmp-ico-pip"},chromecast:{id:"bmp-ico-chromecast"},copy:{id:"bmp-ico-copy"},playNext:{id:"bmp-ico-play-next"},maximize:{id:"bmp-ico-maximize"},minimize:{id:"bmp-ico-minimize"},menu:{id:"bmp-ico-menu"},audio:{id:"bmp-ico-audio"},pause:{id:"bmp-ico-pause"},play:{id:"bmp-ico-play"},replay:{id:"bmp-ico-replay"},quality:{id:"bmp-ico-quality"},share:{id:"bmp-ico-share",type:"css",code:{id:"bmp-ico-code",group:"share"},mail:{id:"bmp-ico-mail",group:"share"},facebook:{id:"bmp-ico-facebook",group:"share"},twitter:{id:"bmp-ico-twitter",group:"share"},linkedin:{id:"bmp-ico-linkedin",group:"share"}},volume:{id:"bmp-ico-volume"},volume1:{id:"bmp-ico-volume-1"},volume2:{id:"bmp-ico-volume-2"},volumeX:{id:"bmp-ico-volume-x"},close:{id:"bmp-ico-close"},left:{id:"bmp-ico-left"},right:{id:"bmp-ico-right"},up:{id:"bmp-ico-up"},down:{id:"bmp-ico-down"},center:{id:"bmp-ico-center"},vr:{id:"bmp-ico-vr"},gyroscope:{id:"bmp-ico-gyroscope"},zoom:{plus:{id:"bmp-ico-zoom-plus"},minus:{id:"bmp-ico-zoom-minus"},reset:{id:"bmp-ico-zoom-reset"}},playbackRate:{id:"bmp-ico-playback-rate"}},camera:null,timeCss:Pt.formatCss,img:{srcset:St.stateToAttribute,sizes:St.stateToSizesAttribute}},this.litOptions={},this.lit=new j,super._hx_constructor();}formatEncapsulation(t){return "[data-"+this.get_prefix()+"-name="+t+"]"}create(){super.create();let t=Ot.copy(this.pluginConfig),e=this;this.readResources(t,(function(s){if(e.parseResources(t,s),e.state.name=e.get_name(),e.state.prefix=e.get_prefix(),e.litOptions.host=e,e.attachFonts(),e.attachCssVars(),e.fetchSources(),null!=e.icon){let t=e.icon,s=null!=e.get_icons()&&null!=e.get_icons().svg,i=null!=e.get_shareIcons()&&null!=e.get_shareIcons().svg;t.updateTypesState(s?"svg":"css",i?"svg":"css");}})),this.start();}destroy(){this.ready=!1,this.sourcesLoaded=!1,this.fontsLoaded=!1,this.activated=!1,this.layoutAvailable=!1,null!=this.size&&this.size.destroy(),null!=this.device&&this.device.destroy(),null!=this.ad&&this.ad.destroy(),null!=this.video&&this.video.destroy(),null!=this.splash&&this.splash.destroy(),null!=this.progress&&this.progress.destroy(),null!=this.volume&&this.volume.destroy(),null!=this.brand&&this.brand.destroy(),null!=this.title&&this.title.destroy(),null!=this.playlist&&this.playlist.destroy(),null!=this.menu&&this.menu.destroy(),null!=this.share&&this.share.destroy(),null!=this.message&&this.message.destroy(),null!=this.hide&&this.hide.destroy(),null!=this.icon&&this.icon.destroy(),null!=this.camera&&this.camera.destroy(),null!=this.contextmenu&&this.contextmenu.destroy(),null!=this.spinner&&this.spinner.destroy();}activate(){this.activated=!0;}postActivate(){null!=this.size&&this.size.postActivate(),null!=this.device&&this.device.postActivate(),null!=this.ad&&this.ad.postActivate(),null!=this.video&&this.video.postActivate(),null!=this.splash&&this.splash.postActivate(),null!=this.progress&&this.progress.postActivate(),null!=this.volume&&this.volume.postActivate(),null!=this.brand&&this.brand.postActivate(),null!=this.title&&this.title.postActivate(),null!=this.playlist&&this.playlist.postActivate(),null!=this.menu&&this.menu.postActivate(),null!=this.share&&this.share.postActivate(),null!=this.message&&this.message.postActivate(),null!=this.hide&&this.hide.postActivate(),null!=this.icon&&this.icon.postActivate(),null!=this.camera&&this.camera.postActivate(),null!=this.contextmenu&&this.contextmenu.postActivate(),null!=this.spinner&&this.spinner.postActivate();}deactivate(){this.activated=!1;}getLayout(t){return null==t&&(t=!1),t?this.get_parsedLayout():this.get_layout()}redrawLayout(t){this.set_layout(t),this.set_parsedLayout(t),this.layoutAvailable=null!=this.get_parsedLayout()&&this.get_parsedLayout().length>0,this.render();}init(){this.state.name=this.get_name(),this.state.prefix=this.get_prefix(),this.litOptions.host=this;}readResources(t,e){let s=this.get_variables(),i=null;Object.prototype.hasOwnProperty.call(s,"skin")&&(i=o.field(s,"skin"));let a=i,n=null;null!=a&&Object.prototype.hasOwnProperty.call(a,"theme")&&(n=o.field(a,"theme")),null!=t&&Object.prototype.hasOwnProperty.call(t,"theme")&&(n=o.field(t,"theme"));let l=this;if(null!=n&&"string"==typeof n){let t=0==n.indexOf("http");if(0==t&&0==["gorilla","disco","zebra","mole","techno","jazz","snake"].includes(n)){let t={plugin:this.pluginName,error:'Invalid theme name: "'+n+'"'};return void console.error(t)}let s=new c(t?this.versionUrl(n):this.versionUrl("https://bradm.ax/player/VERSION/theme/THEME.json".split("THEME").join(n)));s.onError=Ut(this,this.reportError);let i=function(t){let s=null;try{s=JSON.parse(t);}catch(t){let e=It.caught(t),s={plugin:l.pluginName,error:e};console.error(s);}e(Ot.merge(s,a));};s.onData=i,s.request(!1);}else e(a);}parseResources(t,e){null!=e&&null!=t&&(Object.prototype.hasOwnProperty.call(e,"icon")&&Object.prototype.hasOwnProperty.call(t,"icon")&&(Object.prototype.hasOwnProperty.call(e.icon,"svg")&&Object.prototype.hasOwnProperty.call(t.icon,"font")&&o.deleteField(t.icon,"font"),Object.prototype.hasOwnProperty.call(e.icon,"font")&&Object.prototype.hasOwnProperty.call(t.icon,"svg")&&o.deleteField(t.icon,"svg")),Object.prototype.hasOwnProperty.call(e,"share")&&Object.prototype.hasOwnProperty.call(t,"share")&&(Object.prototype.hasOwnProperty.call(e.share,"svg")&&Object.prototype.hasOwnProperty.call(t.share,"font")&&o.deleteField(t.share,"font"),Object.prototype.hasOwnProperty.call(e.share,"font")&&Object.prototype.hasOwnProperty.call(t.share,"svg")&&o.deleteField(t.share,"svg")));let s=Ot.merge(t,e),i=Object.prototype.hasOwnProperty.call(s,"prefix")?o.field(s,"prefix"):null;if(null!=i&&"string"==typeof i){let t=u.trim(i);if(""!=t){let e=t;e=(""+t).toLowerCase().split(" ").join(""),e=new n("[^a-zA-Z0-9_-]","g").split(e).join(""),e=new n("^[0-9]*","g").split(e).join(""),this.set_prefix(e);}}let a=Object.prototype.hasOwnProperty.call(s,"css")?o.field(s,"css"):null;if(null!=a){if(null!=a.adPlaying&&"string"==typeof a.adPlaying){let t=u.trim(a.adPlaying);if(""!=t){let e=t;e=(""+t).toLowerCase().split(" ").join(""),e=new n("[^a-zA-Z0-9_-]","g").split(e).join(""),e=new n("^[0-9]*","g").split(e).join(""),this.get_css().adPlaying=e;}}if(null!=a.vpaidPlaying&&"string"==typeof a.vpaidPlaying){let t=u.trim(a.vpaidPlaying);if(""!=t){let e=t;e=(""+t).toLowerCase().split(" ").join(""),e=new n("[^a-zA-Z0-9_-]","g").split(e).join(""),e=new n("^[0-9]*","g").split(e).join(""),this.get_css().vpaidPlaying=e;}}}let l=Object.prototype.hasOwnProperty.call(s,"name")?o.field(s,"name"):null;if(null!=l&&"string"==typeof l){let t=u.trim(l);if(""!=t){let e=t;e=(""+t).toLowerCase().split(" ").join(""),e=new n("[^a-zA-Z0-9_-]","g").split(e).join(""),e=new n("^[0-9]*","g").split(e).join(""),this.set_name(e);}}let r=Object.prototype.hasOwnProperty.call(s,"color")?o.field(s,"color"):null;null!=r&&"string"==typeof r&&this.set_color(u.trim(r));let h=Object.prototype.hasOwnProperty.call(s,"font")?o.field(s,"font"):null;null!=h&&this.set_font(h);let c=Object.prototype.hasOwnProperty.call(s,"icon")?o.field(s,"icon"):null;null!=c&&this.set_icons(c);let d=Object.prototype.hasOwnProperty.call(s,"share")?o.field(s,"share"):null;if(null!=d&&this.set_shareIcons(d),this.set_styles([]),null!=s&&Object.prototype.hasOwnProperty.call(s,"styles")){let t=o.field(s,"styles");if("string"==typeof t)this.get_styles().push(t);else if(t instanceof Array){let e=t,s=0;for(;s<e.length;){let t=e[s++];this.get_styles().push(t);}}}let p=Object.prototype.hasOwnProperty.call(s,"layout")?o.field(s,"layout"):"";null!=p&&"string"==typeof p&&this.set_layout(u.trim(p));let m=Object.prototype.hasOwnProperty.call(s,"spinner")?o.field(s,"spinner"):null;if(null!=m){let t=Object.prototype.hasOwnProperty.call(m,"html")?o.field(m,"html"):null;if("string"==typeof t){let e=Ct.decodeBase64(t);null!=e&&this.set_spinnerTemplate(this.lit.template(e,"html")({}));}let e=Object.prototype.hasOwnProperty.call(m,"svg")?o.field(m,"svg"):null;if("string"==typeof e){let t=Ct.decodeBase64(e);null!=t&&this.set_spinnerTemplate(this.lit.template(t,"svg")({}));}}this.skinCssSelector="[id="+this.uid+"_skin][data-"+this.get_prefix()+"-name="+this.get_name()+"]",this.skinIcoPrefix=this.uid+"_skin_ico_";}updateResources(){this.attachFonts(),this.attachCssVars(),this.fetchSources();}start(){this.skinElement=window.document.createElement("div"),this.skinElement.id=this.uid+"_skin",this.skinElement.style.display="none",this.get_parentDisplay().appendChild(this.skinElement);let t=this;this.size=new ot(this.context,this.get_variables(),(function(e,s){t.sizeVarChange(e,(function(){t.stateChange({size:e},s);}));}),(function(e){let s={plugin:t.pluginName,error:e};console.error(s);}),this.get_prefix(),this.skinElement),this.device=new K(this.context,this.get_variables(),(function(e,s){t.stateChange({device:e},s);}),(function(e){let s={plugin:t.pluginName,error:e};console.error(s);}),this.get_prefix(),this.skinElement),this.ad=new N(this.context,this.get_variables(),(function(e,s){t.stateChange({ad:e},s);}),(function(e){let s={plugin:t.pluginName,error:e};console.error(s);}),this.get_css(),this.skinElement),this.video=new ft(this.context,this.get_variables(),(function(e,s){t.stateChange({video:e},s);}),(function(e){let s={plugin:t.pluginName,error:e};console.error(s);}),this.get_prefix(),this.skinElement),this.splash=new ut(this.context,this.get_variables(),(function(e,s){t.stateChange({splash:e},s);}),(function(e){let s={plugin:t.pluginName,error:e};console.error(s);})),this.progress=new at(this.context,this.get_variables(),(function(e,s){t.stateChange({progress:e},s);}),(function(e){let s={plugin:t.pluginName,error:e};console.error(s);}),this.skinElement,this.get_player().modules.BradmaxThumbnailsService),this.volume=new gt(this.context,this.get_variables(),(function(e,s){t.stateChange({volume:e},s);}),(function(e){let s={plugin:t.pluginName,error:e};console.error(s);}),this.skinElement),this.brand=new B(this.context,this.get_variables(),(function(e,s){t.stateChange({brand:e},s);}),(function(e){let s={plugin:t.pluginName,error:e};console.error(s);})),this.title=new mt(this.context,this.get_variables(),(function(e,s){t.stateChange({title:e},s);}),(function(e){let s={plugin:t.pluginName,error:e};console.error(s);})),this.playlist=new it(this.context,this.get_variables(),(function(e,s){t.stateChange({playlist:e},s);}),(function(e){let s={plugin:t.pluginName,error:e};console.error(s);})),this.menu=new J(this.context,this.get_variables(),(function(e,s){t.stateChange({menu:e},s);}),(function(e){let s={plugin:t.pluginName,error:e};console.error(s);}),this.get_parentDisplay()),this.share=new lt(this.context,this.get_variables(),(function(e,s){t.stateChange({share:e},s);}),(function(e){let s={plugin:t.pluginName,error:e};console.error(s);})),this.message=new tt(this.context,this.get_variables(),(function(e,s){t.stateChange({message:e},s);}),(function(e){let s={plugin:t.pluginName,error:e};console.error(s);})),this.icon=new Z(this.context,this.get_variables(),(function(e,s){t.stateChange({icon:e},s);}),(function(e){let s={plugin:t.pluginName,error:e};console.error(s);})),this.hide=new Y(this.context,this.get_variables(),(function(e,s){t.stateChange({hide:e},s);}),(function(e){let s={plugin:t.pluginName,error:e};console.error(s);}),this.get_prefix(),this.get_parentDisplay()),this.camera=new U(this.context,this.get_variables(),(function(e,s){t.stateChange({camera:e},s);}),(function(e){let s={plugin:t.pluginName,error:e};console.error(s);}),this.skinElement),this.contextmenu=new H(this.context,this.get_variables(),(function(e,s){t.stateChange({contextmenu:e},s);}),(function(e){let s={plugin:t.pluginName,error:e};console.error(s);}),this.get_prefix(),this.skinElement,this.get_playerVersion());this.contextmenu.renderTemplate=function(e){return t.lit.template(t.lit.parseLayout(e))};if(this.contextmenu.renderHtml=function(e,s){return t.lit.render(s,e,t.litOptions)},null!=this.get_spinnerTemplate()){this.spinner=new ht(this.context,this.get_variables(),(function(e,s){t.stateChange({spinner:e},s);}),(function(e){let s={plugin:t.pluginName,error:e};console.error(s);}));let e=function(e){try{return t.lit.render(t.get_spinnerTemplate(),e,t.litOptions)}catch(e){let s=It.caught(e),i={plugin:t.pluginName,error:s};return console.error(i),null}};this.spinner.renderHtml=e;}if(null!=this.icon){let t=this.icon,e=null!=this.get_icons()&&null!=this.get_icons().svg,s=null!=this.get_shareIcons()&&null!=this.get_shareIcons().svg;t.updateTypesState(e?"svg":"css",s?"svg":"css");}}updateIconTypes(){if(null!=this.icon){let t=this.icon,e=null!=this.get_icons()&&null!=this.get_icons().svg,s=null!=this.get_shareIcons()&&null!=this.get_shareIcons().svg;t.updateTypesState(e?"svg":"css",s?"svg":"css");}}isNotEmpty(t){return null!=t&&"string"==typeof t&&u.trim(t).length>0}versionUrl(t){let e=u.trim(t);return (""+decodeURIComponent(e.split("+").join(" "))).split("VERSION").join(this.get_playerVersion())}attachFonts(){let t=[];if(null!=this.get_font()&&t.push(this.get_font()),null!=this.get_icons()&&null!=this.get_icons().font&&t.push(this.get_icons().font),null!=this.get_shareIcons()&&null!=this.get_shareIcons().font&&t.push(this.get_shareIcons().font),0==t.length)return;let e="",s=0;for(;s<t.length;){let i,a=t[s];if(++s,1==a.fetch&&null!=a.id){let t=a.src;i=null!=t&&"string"==typeof t&&u.trim(t).length>0;}else i=!1;i&&(e+='<link id="'+a.id+'" href="'+this.versionUrl(a.src)+'" rel="stylesheet" crossorigin @load="${ctx._LOADED_}" >');}if(""==e)return void(this.fontsLoaded=!0);let i=window.document.createElement("head"),a=0,n=this;this.lit.render(this.lit.template(e)({_LOADED_:function(){a-=1,n.fontsLoaded=0==a,n.fontsLoaded&&n.runInited();}}),i,this.litOptions),a=vt.injectAssets(window.document.head,this.get_prefix(),i),this.fontsLoaded=0==a;}attachCssVars(){let t=[],e=this,s=function(s,i,a){let n=[];if(null!=a.family&&a.family instanceof Array&&n.push("--"+e.get_prefix()+"-"+s+"-family: "+a.family.join(", ")+";"),null!=a.size&&n.push("--"+e.get_prefix()+"-"+s+"-size: "+a.size+";"),null!=a.code){let t=0,i=o.fields(a.code);for(;t<i.length;){let l=i[t];++t,n.push("--"+e.get_prefix()+"-"+s+"-code-"+l+': "\\'+h.string(o.field(a.code,l))+'";');}}let l=[];if(null!=a.variation){let t=0,e=o.fields(a.variation);for(;t<e.length;){let s=e[t];++t,l.push('"'+s+'" '+h.string(o.field(a.variation,s)));}}let r=l.length>0?"font-variation-settings: "+l.join(", ")+";":"";t.push(i+"{"+r+n.join("")+"}");},i=function(s,i,a){let n=[];null!=a.size&&n.push("--"+e.get_prefix()+"-"+s+"-size: "+a.size+";"),n.length>0&&t.push(i+"{"+n.join("")+"}");};if(null!=this.get_font()&&s("font",""+this.skinCssSelector,this.get_font()),null!=this.get_icons()&&(null!=this.get_icons().font&&s("icon",this.skinCssSelector+" ."+this.get_prefix()+"-ico",this.get_icons().font),null!=this.get_icons().svg&&i("icon",this.skinCssSelector+" ."+this.get_prefix()+"-ico",this.get_icons().svg)),null!=this.get_shareIcons()&&(null!=this.get_shareIcons().font&&s("icon-share",this.skinCssSelector+" ."+this.get_prefix()+"-share-ico",this.get_shareIcons().font),null!=this.get_shareIcons().svg&&i("icon-share",this.skinCssSelector+" ."+this.get_prefix()+"-share-ico",this.get_shareIcons().svg)),0!=t.length){if(null==this.fontVarsElement){let t=this.uid+"_skin_font";this.fontVarsElement=window.document.querySelector(t),null==this.fontVarsElement&&(this.fontVarsElement=window.document.createElement("style"),this.fontVarsElement.id=t,null!=this.skinElement?this.get_parentDisplay().insertBefore(this.fontVarsElement,this.skinElement):this.get_parentDisplay().appendChild(this.fontVarsElement));}this.fontVarsElement.innerText="",this.fontVarsElement.insertAdjacentHTML("beforeend",t.join("\n"));}}fetchSources(){let t,e,s=Object.create(null),i=this,a=function(){let t=s,e=Object.keys(t),a=e.length,n=0;for(;n<a;)if(0==t[e[n++]].loaded)return;i.sourcesLoaded=!0,i.sourcesLoaded&&i.runInited();},n=function(t){Object.prototype.hasOwnProperty.call(s,t)&&(s[t].loaded=!0),a();},l=this.get_layout();if(null!=l&&"string"==typeof l&&u.trim(l).length>0)if(this.get_layout().endsWith(".html")){let t="layout",e=new c(this.versionUrl(this.get_layout()));e.onError=Ut(this,this.reportError),e.onData=function(e){i.redrawLayout(e),n(t);},s[t]={loaded:!1,req:e};}else {let t=Ct.decodeBase64(this.get_layout());null!=t&&(this.redrawLayout(t),a());}else {let t={plugin:this.pluginName,error:"missing layout url"};console.error(t);}if(null!=this.get_icons()&&null!=this.get_icons().svg){let e=this.get_icons().svg.iconset;t=null!=e&&"string"==typeof e&&u.trim(e).length>0;}else t=!1;if(t){let t=this.get_icons().svg.id,e=this.get_icons().svg.iconset;if(e.endsWith(".svg")){if(!Object.prototype.hasOwnProperty.call(s,""+t)){let a=new c(this.versionUrl(e));a.onError=Ut(this,this.reportError),a.onData=function(e){i.renderSvgset(i.uid+"_"+t+"_skin_iconset",e),n(t);},s[""+t]={loaded:!1,req:a};}}else {let s=Ct.decodeBase64(e);null!=s&&(this.renderSvgset(this.uid+"_"+t+"_skin_iconset",s),a());}}if(null!=this.get_shareIcons()&&null!=this.get_shareIcons().svg){let t=this.get_shareIcons().svg.iconset;e=null!=t&&"string"==typeof t&&u.trim(t).length>0;}else e=!1;if(e){let t=this.get_shareIcons().svg.id,e=this.get_shareIcons().svg.iconset;if(e.endsWith(".svg")){if(!Object.prototype.hasOwnProperty.call(s,""+t)){let a=new c(this.versionUrl(e));a.onError=Ut(this,this.reportError),a.onData=function(e){i.renderSvgset(i.uid+"_"+t+"_skin_iconset",e),n(t);},s[""+t]={loaded:!1,req:a};}}else {let s=Ct.decodeBase64(e);null!=s&&(this.renderSvgset(this.uid+"_"+t+"_skin_iconset",s),a());}}let r,o,h,d="style",p=this.get_styles(),m=0;for(;m<p.length;){let t=p[m],e=m++;if(null!=t&&"string"==typeof t&&u.trim(t).length>0){let a=function(t){let s=window.document.head,a=i.get_prefix(),l=i.get_name(),r="[data-"+i.get_prefix()+"-name="+l+"]";vt.appendStyle(s,a,null!=r&&t.includes(":host")?t.split(":host").join(r):t),n(d+"["+e+"]");};if(t.endsWith(".css")){let i=new c(this.versionUrl(t));i.onError=Ut(this,this.reportError),i.onData=a,s[d+"["+e+"]"]={loaded:!1,req:i};}else {let e=Ct.decodeBase64(t);null!=e&&a(e);}}}if(null!=this.get_font()&&0==this.get_font().fetch){let t=this.get_font().src;r=null!=t&&"string"==typeof t&&u.trim(t).length>0;}else r=!1;if(r){let t=Ct.decodeBase64(this.get_font().src);null!=t&&(vt.appendStyle(window.document.head,this.get_prefix()+"-font",t),a());}if(null!=this.get_icons()&&null!=this.get_icons().font&&0==this.get_icons().font.fetch){let t=this.get_icons().font.src;o=null!=t&&"string"==typeof t&&u.trim(t).length>0;}else o=!1;if(o){let t=Ct.decodeBase64(this.get_icons().font.src);null!=t&&(vt.appendStyle(window.document.head,this.get_prefix()+"-icons-font",t),a());}if(null!=this.get_shareIcons()&&null!=this.get_shareIcons().font&&0==this.get_shareIcons().font.fetch){let t=this.get_shareIcons().font.src;h=null!=t&&"string"==typeof t&&u.trim(t).length>0;}else h=!1;if(h){let t=Ct.decodeBase64(this.get_shareIcons().font.src);null!=t&&(vt.appendStyle(window.document.head,this.get_prefix()+"-shere-font",t),a());}let f=s,g=Object.keys(f),_=g.length,v=0;for(;v<_;)f[g[v++]].req.request(!1);}renderSvgset(t,e){let s=window.document.createElement("div");this.lit.render(this.lit.template(e,"svg")({}),s,this.litOptions);let i,a=s.querySelectorAll("symbol"),n=0;for(;n<a.length;)i=a[n++],i.id=""+this.skinIcoPrefix+i.id;let l=window.document.querySelector(t);null!=l&&null!=l.parentNode&&l.parentNode.removeChild(l),l=s.querySelector("svg"),l.id=t,l.style.display="none",null!=this.skinElement?this.get_parentDisplay().insertBefore(l,this.skinElement):this.get_parentDisplay().appendChild(l);}reportError(t){let e={plugin:this.pluginName,error:t};console.error(e);}runInited(){null!=this.initedTimer&&this.initedTimer.stop(),this.initedTimer=Lt.delay(Ut(this,this.inited),200);}inited(){0!=this.sourcesLoaded&&0!=this.fontsLoaded&&(this.ready=this.sourcesLoaded&&this.fontsLoaded,0!=this.ready&&null!=this.skinElement&&(this.skinElement.classList.add(this.get_prefix()+"-ready"),this.skinElement.style.display="block",this.skinElement.classList.add(this.get_prefix()),1!=this.state.device.tizen?this.skinElement.classList.add(this.get_prefix()+"-can-blur"):this.skinElement.classList.add(this.get_prefix()+"-cant-blur"),this.skinElement.setAttribute("data-"+this.get_prefix()+"-name",this.get_name())));}sizeVarChange(t,e){let s=this.skinCssSelector+" { --"+this.get_prefix()+"-width: "+t.width+"px; --"+this.get_prefix()+"-height: "+t.height+"px; }";if(null==this.sizeVarsElement){let t=this.uid+"_skin_size";this.sizeVarsElement=window.document.querySelector(t),null==this.sizeVarsElement&&(this.sizeVarsElement=window.document.createElement("style"),this.sizeVarsElement.id=t,null!=this.skinElement?this.get_parentDisplay().insertBefore(this.sizeVarsElement,this.skinElement):this.get_parentDisplay().appendChild(this.sizeVarsElement));}this.sizeVarsElement.innerText="",this.sizeVarsElement.insertAdjacentHTML("beforeend",s),null!=e&&o.isFunction(e)&&e();}stateChange(t,e){if(null!=t){let e=0,s=o.fields(t);for(;e<s.length;){let i=s[e];++e,this.state[i]=o.field(t,i);}}this.render(e);}render(t){0!=this.activated&&0!=this.layoutAvailable&&(this.lit.render(this.skinTemplate(this.state),this.skinElement,this.litOptions),null!=t&&o.isFunction(t)&&t(this.skinElement));}get_prefix(){return this._prefix}set_prefix(t){return this._prefix=t,this.state.prefix=t,this.skinCssSelector="[id="+this.uid+"_skin][data-"+t+"-name="+this.get_name()+"]",null!=this.hide&&this.hide.set_prefix(t),null!=this.contextmenu&&this.contextmenu.set_prefix(t),null!=this.size&&this.size.set_prefix(t),null!=this.device&&this.device.set_prefix(t),this._prefix}get_css(){return this._css}set_css(t){return this._css=t,this._css}get_name(){return this._name}set_name(t){return this._name=t,this.state.name=t,this.skinCssSelector="[id="+this.uid+"_skin][data-"+this.get_prefix()+"-name="+t+"]",this._name}get_playerVersion(){return "v2.14.417"}get_color(){return this._color}set_color(t){if(this._color=t,null==this.colorVarsElement){let t=this.uid+"_skin_colors";this.colorVarsElement=window.document.querySelector(t),null==this.colorVarsElement&&(this.colorVarsElement=window.document.createElement("style"),this.colorVarsElement.id=t,null!=this.skinElement?this.get_parentDisplay().insertBefore(this.colorVarsElement,this.skinElement):this.get_parentDisplay().appendChild(this.colorVarsElement));}this.colorVarsElement.innerText="";let e="string"==typeof t&&""!=t?this.skinCssSelector+" { --"+this.get_prefix()+"-main-color: "+t+"; }":"";return ""!=e&&this.colorVarsElement.insertAdjacentHTML("beforeend",e),this._color}get_font(){return this._font}set_font(t){return this._font=t,this._font}get_icons(){return this._icons}set_icons(t){return this._icons=t,this._icons}get_shareIcons(){return this._shareIcons}set_shareIcons(t){return this._shareIcons=t,this._shareIcons}get_styles(){return this._styles}set_styles(t){return this._styles=t,this._styles}get_layout(){return this._layout}set_layout(t){return this._layout=t,this._layout}get_parsedLayout(){return this._parsedLayout}set_parsedLayout(t){return this._parsedLayout=this.lit.parseLayout(t),this.skinTemplate=this.lit.template(this._parsedLayout),this._parsedLayout}get_spinnerTemplate(){return this._spinnerTemplate}set_spinnerTemplate(t){return this._spinnerTemplate=t,this._spinnerTemplate}}t.bs.player.plugin.skin.HtmlSkin=F,F.__name__="bs.player.plugin.skin.HtmlSkin",F.__super__=T,Object.assign(F.prototype,{__class__:F});class j{constructor(){this.api=j.native();}render(t,e,s){return this.api.render(t,e,s)}template(t,e){return this.api.template(t,e)}parseLayout(t){return Et.cleanup(t),t=this.litIf(t),t=this.litFor(t)}litFor(t){if(t.indexOf("<for")<0)return t;let e=[],s=[],i=t.length,a=0;for(;a<=i;){let n=t.indexOf("<for",a);if(-1<n){e.push(t.substring(a,n)),a=n+4,n=a;let l=1;for(;0<l&&a<i;){let e=t.charAt(a),s=t.charAt(a+1),i=t.charAt(a+2),n=t.charAt(a+3),r=t.charAt(a+4);l+="<"==e&&"f"==s&&"o"==i&&"r"==n&&" "==r?1:"<"==e&&"/"==s&&"f"==i&&"o"==n&&"r"==r&&">"==t.charAt(a+5)?-1:0,++a;}s.push(this.formatLitFor(t.substring(n-4,a-1))),a+=5;}else e.push(t.substring(a)),a=i+1;}return Et.merge(e,s)}formatLitFor(t){let e=new n("(<for[^>][\\s\\S]*?items=\\W\\$\\{{1})([\\s\\S]+?)(\\}[\\s\\S]*?>)","");if(t=Et.escapeCustomAttributes(t,[e]),0==e.match(t))return t;let s=Et.readCustomAttribute(e.matched(2));return "${"+s+" && "+s+".length > 0 ? "+s+".map((item, index) => html`"+this.litFor(Et.removeCustomTag(t,e))+"`) : nothing}"}litIf(t){if(t.indexOf("<if")<0)return t;let e=[],s=[],i=t.length,a=0;for(;a<=i;){let n=t.indexOf("<if",a);if(-1<n){e.push(t.substring(a,n)),a=n+3,n=a;let l=1;for(;0<l&&a<i;){let e=t.charAt(a),s=t.charAt(a+1),i=t.charAt(a+2),n=t.charAt(a+3);l+="<"==e&&"i"==s&&"f"==i&&" "==n?1:"<"==e&&"/"==s&&"i"==i&&"f"==n&&">"==t.charAt(a+4)?-1:0,++a;}s.push(this._formatLitIf(t.substring(n-3,a-1))),a+=4;}else e.push(t.substring(a)),a=i+1;}return Et.merge(e,s)}_formatLitIf(t){let e=new n("(<if[^>][\\s\\S]*?cond=\\W\\$\\{{1})([\\s\\S]+?)(\\}[\\s\\S]*?>)","");return t=Et.escapeCustomAttributes(t,[e]),0==e.match(t)?t:"${"+Et.readCustomAttribute(e.matched(2))+" ? html`"+this.litIf(Et.removeCustomTag(t,e))+"` : nothing}"}static native(){return exports.lit}}j.__name__="bs.player.plugin.skin.lib.LitHtml",Object.assign(j.prototype,{__class__:j});class V{constructor(t,e,s,i){V._hx_skip_constructor||this._hx_constructor(t,e,s,i);}_hx_constructor(t,e,s,i){this.state=null,this.context=null,this.context=t,this.reportError=i,this.refreshCallback=s;}reportError(t){}refreshCallback(t,e){}postActivate(){}destroy(){}}V.__name__="bs.player.plugin.skin.model.core.BaseModel",Object.assign(V.prototype,{__class__:V});class N extends V{constructor(t,e,s,i,a,n){V._hx_skip_constructor=!0,super(),V._hx_skip_constructor=!1,this._hx_constructor(t,e,s,i,a,n);}_hx_constructor(t,e,s,i,a,n){this.adWasClicked=!1,this.adOnClickUrlShowTime=null,this.isVpaid=!1,this.isMuted=!1,this.isPaused=!1,this.total=0,this.current=0,this.progress=0,this.linkUrl=null,this.duration=null,this.time=null,this.skinElement=null,this.keepSkin=!1,super._hx_constructor(t,e,s,i),this.css=a,this.skinElement=n,this.parseVars(e),this.state=null,1!=this.keepSkin&&(d.add(t,"adEnableControls",Ut(this,this.onHide)),d.add(t,"adDisableControls",Ut(this,this.onShow)),d.add(t,"adBarShow",Ut(this,this.onAdBarShow)),d.add(t,"adBarHide",Ut(this,this.onAdBarHide)),d.add(t,"adInStreamClipPlaying",Ut(this,this.onAdInStreamStart)),m.add(t,"adMetadataData",Ut(this,this.onAdStart)),p.addOnce(t,"skinMute",Ut(this,this.onFirstMute)),p.addOnce(t,"skinUnmute",Ut(this,this.onFirstUnmute)));}destroy(){super.destroy(),d.remove(this.context,"adEnableControls",Ut(this,this.onHide)),d.remove(this.context,"adDisableControls",Ut(this,this.onShow)),d.remove(this.context,"adBarShow",Ut(this,this.onAdBarShow)),d.remove(this.context,"adBarHide",Ut(this,this.onAdBarHide)),d.remove(this.context,"adInStreamClipPlaying",Ut(this,this.onAdInStreamStart)),m.remove(this.context,"adMetadataData",Ut(this,this.onAdStart));}parseVars(t){Object.prototype.hasOwnProperty.call(t,"keepSkinOnAd")&&(this.keepSkin=1==o.field(t,"keepSkinOnAd"));}resetState(t){this.linkUrl=null,this.time=null,this.duration=null,this.progress=0,this.current=0,this.total=0,this.isPaused=!1,this.isVpaid=!1,this.adOnClickUrlShowTime=null,this.adWasClicked=!1,this.state=null,t&&this.refreshCallback(this.state);}createState(t){if(this.isVpaid)return void this.resetState(t);let e=this,s=Tt.translate("advertisement_bar_title"),i=this.progress;this.state={label:s,time:this.time,duration:this.duration,progress:{value:this.progress,prc:isNaN(i)||!isFinite(i)?"0%":Math.max(0,Math.min(100,100*i))+"%"},status:{paused:this.isPaused,muted:this.isMuted,vpaid:this.isVpaid},link:{url:null!=this.linkUrl?this.linkUrl:null,target:"_blank"},skip:null,counter:this.current==this.total&&this.current<=1?null:{current:this.current,total:this.total,text:this.current+"/"+this.total},mute:function(t){e.muteClick(t);},click:function(t){e.adClick(t);}},t&&this.refreshCallback(this.state);}onAdInStreamStart(t){this.parseAdMedia(t.data);}onAdStart(t){this.parseAdMedia(t.data);}parseAdMedia(t){if(this.resetState(!1),null!=t){if(null!=t.durationTotal&&null!=t.durationPlayed){let e=t.durationTotal-t.durationPlayed;this.time={time:e,text:Tt.formatTime(e)};}if(null!=t.durationTotal){let e=t.durationTotal;this.duration={time:e,text:Tt.formatTime(e)};}null!=this.time?(this.current=t.currentOrderNumber,this.total=t.totalNumber,this.linkUrl=t.mediaClickTargetUrl,this.createState(!0),this.adOnClickUrlShowTime=new Date):this.resetState(!0);}else this.resetState(!0);}onHide(t){this.adWasClicked=!1,this.skinElement.classList.contains(this.css.adPlaying)&&this.skinElement.classList.remove(this.css.adPlaying),this.skinElement.classList.contains(this.css.vpaidPlaying)&&this.skinElement.classList.remove(this.css.vpaidPlaying),d.remove(this.context,"adGroupCurrentTimeChange",Ut(this,this.afterShowOnTimeChange)),d.remove(this.context,"adSkipButtonShow",Ut(this,this.afterShowOnShowCloseBtn)),d.remove(this.context,"adAdHide",Ut(this,this.afterShowOnShowCloseBtn)),d.remove(this.context,"adPlaying",Ut(this,this.afterShowOnAdPlayResume)),d.remove(this.context,"adPaused",Ut(this,this.afterShowOnAdPause)),this.resetState(!0);}onShow(t){this.adWasClicked=!1,this.skinElement.classList.contains(this.css.adPlaying)||this.skinElement.classList.add(this.css.adPlaying),this.isVpaid&&!this.skinElement.classList.contains(this.css.vpaidPlaying)&&this.skinElement.classList.add(this.css.vpaidPlaying),this.adOnClickUrlShowTime=new Date,d.add(this.context,"adGroupCurrentTimeChange",Ut(this,this.afterShowOnTimeChange)),d.add(this.context,"adSkipButtonShow",Ut(this,this.afterShowOnShowCloseBtn)),d.add(this.context,"adAdHide",Ut(this,this.afterShowOnShowCloseBtn)),d.add(this.context,"adPlaying",Ut(this,this.afterShowOnAdPlayResume)),d.add(this.context,"adPaused",Ut(this,this.afterShowOnAdPause));}afterShowOnTimeChange(t){if(null==this.state)return;let e,s;if(null!=t.data&&null!=t.data.duration&&null!=t.data.currentTime){let e=t.data.duration;s=isNaN(e);}else s=!0;if(s)e=!0;else {let s=t.data.currentTime;e=isNaN(s);}if(e)return;let i=t.data.duration-t.data.currentTime;this.state.time={time:i,text:Tt.formatTime(i)};let a=t.data.duration;this.duration={time:a,text:Tt.formatTime(a)},this.progress=t.data.currentTime/t.data.duration;let n=this.progress,l=this.progress,r=isNaN(l)||!isFinite(l);this.state.progress={value:n,prc:r?"0%":Math.max(0,Math.min(100,100*l))+"%"},this.refreshCallback(this.state);}afterShowOnShowCloseBtn(t){if(null==this.state)return;let e=this,s=Tt.translate("advertisement_skip_label");this.state.skip={label:s,click:function(t){e.closeClick(t);}},this.refreshCallback(this.state);}afterShowOnAdPlayResume(t){this.isPaused=!1,null!=this.state&&(this.state.status.paused=this.isPaused,this.refreshCallback(this.state));}afterShowOnAdPause(t){this.isPaused=!0,null!=this.state&&(this.state.status.paused=this.isPaused,this.refreshCallback(this.state));}onAdBarShow(t){this.isVpaid=!1,this.skinElement.classList.contains(this.css.vpaidPlaying)&&this.skinElement.classList.remove(this.css.vpaidPlaying),this.createState(!0);}onAdBarHide(t){this.isVpaid=!0,this.skinElement.classList.contains(this.css.vpaidPlaying)||this.skinElement.classList.add(this.css.vpaidPlaying),this.resetState(!0);}onFirstMute(t){this.isMuted=!0,null!=this.state&&(this.state.status.muted=this.isMuted,this.refreshCallback(this.state)),p.remove(this.context,"skinUnmute",Ut(this,this.onFirstUnmute)),p.remove(this.context,"skinMute",Ut(this,this.onFirstMute));}onFirstUnmute(t){this.isMuted=!1,null!=this.state&&(this.state.status.muted=this.isMuted,this.refreshCallback(this.state)),p.remove(this.context,"skinUnmute",Ut(this,this.onFirstUnmute)),p.remove(this.context,"skinMute",Ut(this,this.onFirstMute));}muteClick(t){null!=t&&(t.stopImmediatePropagation(),t.stopPropagation(),t.preventDefault()),p.remove(this.context,"skinUnmute",Ut(this,this.onFirstUnmute)),p.remove(this.context,"skinMute",Ut(this,this.onFirstMute)),new p(this.isMuted?"skinUnmute":"skinMute").dispatch(this.context),this.isMuted=!this.isMuted,null!=this.state&&(this.state.status.muted=this.isMuted,this.refreshCallback(this.state));}closeClick(t){null!=t&&(t.stopImmediatePropagation(),t.stopPropagation(),t.preventDefault()),new d("adSkipClick").dispatch(this.context);}adClick(t){let e=0;if(null!=this.adOnClickUrlShowTime&&(e=(new Date).getTime()-this.adOnClickUrlShowTime.getTime()),e<=500)return;this.isPaused&&!this.adWasClicked?null!=t&&(t.stopImmediatePropagation(),t.stopPropagation(),t.preventDefault()):this.adWasClicked?(null!=t&&(t.stopImmediatePropagation(),t.stopPropagation(),t.preventDefault()),this.linkUrl=null,this.refreshCallback(this.state)):this.adWasClicked=!0;let s=new d("adAdClick");s.data={url:this.linkUrl},s.dispatch(this.context);}}N.__name__="bs.player.plugin.skin.model.ads.AdModel",N.__super__=V,Object.assign(N.prototype,{__class__:N});class R extends V{constructor(t,e,s,i){V._hx_skip_constructor=!0,super(),V._hx_skip_constructor=!1,this._hx_constructor(t,e,s,i);}_hx_constructor(t,e,s,i){this.audioSets=[],super._hx_constructor(t,e,s,i),this.languageCode=Ct.audio(e),this.state={hasItems:!1,activate:null},this.state.activate=Ut(this,this.activate),m.add(t,"audioData",Ut(this,this.onAudioData)),m.add(t,"mediaMetadataData",Ut(this,this.cleanupState)),this.refreshCallback(this.state);}destroy(){super.destroy(),m.remove(this.context,"audioData",Ut(this,this.onAudioData)),m.remove(this.context,"mediaMetadataData",Ut(this,this.cleanupState));}onAudioData(t){if(this.audioSets=t.data,null!=this.audioSets){this.state.items=[];let t=null,e=!1,s=0,i=this.audioSets.length;for(;s<i;){let i=s++;t=this.audioSets[i],e=0==e&&this.languageCode==t.languageCode,this.state.items.push({active:e,label:Tt.capilizeFirstLetter(null==t.name?t.languageCode:t.name),data:t.languageCode}),1==e&&this.dispatch(i);}}else this.state.items=null;this.state.hasItems=null!=this.state.items&&this.state.items.length>0,this.refreshCallback(this.state);}cleanupState(t){this.audioSets=[],o.deleteField(this.state,"items"),this.refreshCallback(this.state);}dispatch(t){let e=this.audioSets[t],s=new p("selectAudio");s.data=e,s.dispatch(this.context);let i=s.data.languageCode,a=!1,n=null;if(n=Wt.getSessionStorage(),a=null!=n,a)try{if(null==i){let t=null;t=Wt.getSessionStorage(),t.removeItem("_brplayer_aud_lang");}else {let t=null;t=Wt.getSessionStorage(),t.setItem("_brplayer_aud_lang",h.string(i));}}catch(t){}}activate(t){if(!Object.prototype.hasOwnProperty.call(this.state,"items"))return;null!=t&&(t.stopImmediatePropagation(),t.stopPropagation(),t.preventDefault());let e=h.parseInt(zt.__cast(t.target,HTMLElement).getAttribute("data-item-index"));if(isNaN(e))return;let s=0,i=this.state.items.length;for(;s<i;){let t=s++;this.state.items[t].active=t==e;}this.dispatch(e),this.refreshCallback(this.state);}}R.__name__="bs.player.plugin.skin.model.audio.AudioModel",R.__super__=V,Object.assign(R.prototype,{__class__:R});class B extends V{constructor(t,e,s,i){super(t,e,s,i),this.parseVars(e);}destroy(){super.destroy();}parseVars(t){let e=null;Object.prototype.hasOwnProperty.call(t,"logoFile")&&(e=o.field(t,"logoFile"));let s,i,a=e;if(null==a||""==a)return;if(Object.prototype.hasOwnProperty.call(t,"logoAutohide"))switch(o.field(t,"logoAutohide")){case 0:case"false":case!1:s=!1;break;default:s=!0;}else s=!0;if(Object.prototype.hasOwnProperty.call(t,"logoVisibleDuringAdPlayback"))switch(o.field(t,"logoVisibleDuringAdPlayback")){case 1:case"true":case!0:i=!0;break;default:i=!1;}else i=!1;let n=null;Object.prototype.hasOwnProperty.call(t,"logoText")&&(n=o.field(t,"logoText"));let l=n,r=null;Object.prototype.hasOwnProperty.call(t,"logoLink")&&(r=o.field(t,"logoLink"));let h,u=r;if(Object.prototype.hasOwnProperty.call(t,"logoLinkTarget"))switch(o.field(t,"logoLinkTarget")){case"_blank":default:h="_blank";break;case"_parent":h="_parent";break;case"_self":h="_self";break;case"_top":h="_top";}else h=null;let c,d,p={url:u,target:h};if(Object.prototype.hasOwnProperty.call(t,"logoXPosition"))switch(o.field(t,"logoXPosition")){case"left":default:c="left";break;case"right":c="right";}else c="left";if(Object.prototype.hasOwnProperty.call(t,"logoYPosition"))if("bottom"===o.field(t,"logoYPosition"))d="bottom";else d="top";else d="top";let m={hide:s,adsVisibility:i,logo:a,text:l,link:p,position:{x:c,y:d,top:!0,left:!0,right:!1,bottom:!1}};m.position.top="top"==m.position.y,m.position.right="right"==m.position.x,m.position.left="left"==m.position.x,m.position.bottom="bottom"==m.position.y,this.state=m,this.refreshCallback(this.state);}}B.__name__="bs.player.plugin.skin.model.brand.BrandModel",B.__super__=V,Object.assign(B.prototype,{__class__:B});class z extends V{constructor(t,e,s,i){V._hx_skip_constructor?super():(V._hx_skip_constructor=!0,super(),V._hx_skip_constructor=!1,this._hx_constructor(t,e,s,i));}_hx_constructor(t,e,s,i){let a;if(this.isDvrWallTimeMode=!1,this.isDvr=!1,this.isLiveStream=!1,this.isMediaSpherical=!1,this.isSeekable=!0,this.duration=0,super._hx_constructor(t,e,s,i),this.minLenForSeeking=Object.prototype.hasOwnProperty.call(e,"dvrMinLenForSeekbar")?parseFloat(o.field(e,"dvrMinLenForSeekbar")):null,null==this.minLenForSeeking&&(this.minLenForSeeking=300),Object.prototype.hasOwnProperty.call(e,"isDvrWallTimeMode"))switch(o.field(e,"isDvrWallTimeMode")){case 1:case"true":case!0:a=!0;break;default:a=!1;}else a=!1;this.isDvrWallTimeMode=a,this.monitor=w.getMonitor(t),m.add(t,"mediaMetadataData",Ut(this,this.onMetadataData)),m.add(t,"mediaAfterPlaybackStartMetadata",Ut(this,this.onAfterPlaybackStartMetadataData));}get_maxDuration(){return this.duration>0?this.duration-(this.isDvr?0:1):0}destroy(){super.destroy(),w.destroyMonitor(this.context),m.remove(this.context,"mediaMetadataData",Ut(this,this.onMetadataData)),m.remove(this.context,"mediaAfterPlaybackStartMetadata",Ut(this,this.onAfterPlaybackStartMetadataData));}updateState(t){}onMetadataData(t){let e=this.monitor.currentMedia;e instanceof C?(this.isDvr=!1,this.isLiveStream=!1):e instanceof x?(this.isDvr=!0,this.isLiveStream=e instanceof S):(this.isDvr=!1,this.isLiveStream=!1),this.updateDurationOnEvent(t,!1),this.isMediaSpherical=e.spherical,this.updateState();}onAfterPlaybackStartMetadataData(t){t.data instanceof x&&!this.isDvr&&(this.isDvr=!0),t.data instanceof x||!this.isDvr||(this.isDvr=!1),this.updateDurationOnEvent(t,!1),this.isMediaSpherical=t.data.spherical,this.updateState();}isSeekingPossible(){return !(this.duration<=0||this.isDvr&&this.duration<this.minLenForSeeking)}updateDurationOnEvent(t,e){null==e&&(e=!0);let s=Object.prototype.hasOwnProperty.call(t.data,"duration")?t.data.duration:NaN;!isNaN(s)&&isFinite(s)&&this.duration!=s&&(this.duration=s,this.isSeekable=this.isSeekingPossible(),1==e&&this.updateState());}}z.__name__="bs.player.plugin.skin.model.core.MediaBaseModel",z.__super__=V,Object.assign(z.prototype,{__class__:z});class W extends z{constructor(t,e,s,i){V._hx_skip_constructor?super():(V._hx_skip_constructor=!0,super(),V._hx_skip_constructor=!1,this._hx_constructor(t,e,s,i));}_hx_constructor(t,e,s,i){this.current={position:0,playback:0,time:0},this.isLive=!1,this.inSyncTimeWindow=15,this.hasPlaybackStarted=!1,this.isComplete=!1,this.isSeeking=!1,this.isBuffering=!1,this.isPaused=!1,this.isPlaying=!1,this.isInited=!1,super._hx_constructor(t,e,s,i),y.add(t,"videoMediaElementInit",Ut(this,this.onVideoMediaElementInit)),y.add(t,"ready",Ut(this,this.onReady)),y.add(t,"playing",Ut(this,this.onPlaying)),y.add(t,"paused",Ut(this,this.onPaused)),y.add(t,"stopped",Ut(this,this.onStopped)),y.add(t,"durationChange",Ut(this,this.onDurationChange)),y.add(t,"currentTimeChange",Ut(this,this.onCurrentTimeChange)),y.add(t,"complete",Ut(this,this.onComplete)),y.add(t,"bufferingStart",Ut(this,this.onBufferingStart)),y.add(t,"bufferingEnd",Ut(this,this.onBufferingEnd)),y.add(t,"seekingStart",Ut(this,this.onSeekingStart)),y.add(t,"seekingEnd",Ut(this,this.onSeekingEnd)),(Object.prototype.hasOwnProperty.call(e,"inSyncTimeWindow")?parseFloat(o.field(e,"inSyncTimeWindow")):null)>0&&(this.inSyncTimeWindow=Object.prototype.hasOwnProperty.call(e,"inSyncTimeWindow")?parseFloat(o.field(e,"inSyncTimeWindow")):null);}getInSyncTimeWindowWithHisteresis(){return this.isLive?2*this.inSyncTimeWindow:this.inSyncTimeWindow}destroy(){super.destroy(),y.remove(this.context,"videoMediaElementInit",Ut(this,this.onVideoMediaElementInit)),y.remove(this.context,"ready",Ut(this,this.onReady)),y.remove(this.context,"playing",Ut(this,this.onPlaying)),y.remove(this.context,"paused",Ut(this,this.onPaused)),y.remove(this.context,"stopped",Ut(this,this.onStopped)),y.remove(this.context,"durationChange",Ut(this,this.onDurationChange)),y.remove(this.context,"currentTimeChange",Ut(this,this.onCurrentTimeChange)),y.remove(this.context,"complete",Ut(this,this.onComplete)),y.remove(this.context,"bufferingStart",Ut(this,this.onBufferingStart)),y.remove(this.context,"bufferingEnd",Ut(this,this.onBufferingEnd)),y.remove(this.context,"seekingStart",Ut(this,this.onSeekingStart)),y.remove(this.context,"seekingEnd",Ut(this,this.onSeekingEnd));}updateState(t){super.updateState(t),this.isComplete="complete"==this.monitor.state||!this.isDvr&&this.current.time>0&&this.duration>0&&this.current.time>=this.get_maxDuration(),this.isPlaying=this.isComplete||this.isDvr||null==t?"playing"==this.monitor.state:t,this.isPaused=!this.isPlaying&&!this.isComplete&&"paused"==this.monitor.state,this.isBuffering=!this.isPlaying&&!this.isComplete&&"buffering"==this.monitor.state,this.isSeeking=!this.isPlaying&&!this.isComplete&&"seeking"==this.monitor.state,this.isDvr?this.isSeekingPossible()?this.isLive=this.current.position/this.duration>=.99||this.current.position+this.getInSyncTimeWindowWithHisteresis()>=this.duration:this.isLive=!0:this.isLive=!1;}onVideoMediaElementInit(t){this.isInited=!0,this.updateState();}onReady(t){this.updateState();}onDurationChange(t){this.updateDurationOnEvent(t);}onCurrentTimeChange(t){this.updateCurrentTimeFromEvent(t),this.updateDurationOnEvent(t,!1),this.updateState(!0);}updateCurrentTimeFromEvent(t){if(null!=t&&null!=t.data&&(t.data.currentTime>=0&&(this.current.position=Math.max(0,t.data.currentTime),this.current.playback=0,this.current.time=this.current.position),null!=t.data.media&&null!=t.data.media.mediaPlaybackInfo&&t.data.media.mediaPlaybackInfo.currentTime>0&&(this.current.playback=t.data.media.mediaPlaybackInfo.currentTime,this.current.time=this.current.playback)),this.current.time>0&&(this.hasPlaybackStarted=!0),this.isDvr&&this.current.position+this.getInSyncTimeWindowWithHisteresis()>=this.duration){let t=this.duration-this.current.position;this.current.position=this.duration,this.current.time+=t;}}onPlaying(t){this.updateDurationOnEvent(t);}onPaused(t){this.updateState();}onStopped(t){this.updateState();}onComplete(t){this.updateState();}onBufferingStart(t){this.updateState();}onBufferingEnd(t){this.updateDurationOnEvent(t);}onSeekingStart(t){this.updateCurrentTimeFromEvent(t),this.updateState();}onSeekingEnd(t){this.updateState();}}W.__name__="bs.player.plugin.skin.model.core.PlaybackBaseModel",W.__super__=z,Object.assign(W.prototype,{__class__:W});class U extends W{constructor(t,e,s,i,a){V._hx_skip_constructor=!0,super(),V._hx_skip_constructor=!1,this._hx_constructor(t,e,s,i,a);}_hx_constructor(t,e,s,i,a){let n=[],l=0;for(;l<3;)++l,n.push(0);this.eventTsRegistry=n,this.isDeviceControlActive=!1,this.isDeviceControlSupported=!1,this.isRendererInitialized=!1,this.wasUserMovingPointer=!1,this.isUserInteracting=!1,this.sphericalElement=null,this.skinElement=null,super._hx_constructor(t,e,s,i),this.skinElement=a,this.state=null,b.add(t,"rendererInitialized",Ut(this,this.onRendererInitialized)),b.add(t,"deviceControlSupport",Ut(this,this.onDeviceControlSupport)),this.refreshCallback(this.state);}destroy(){super.destroy(),b.remove(this.context,"rendererInitialized",Ut(this,this.onRendererInitialized)),b.remove(this.context,"deviceControlSupport",Ut(this,this.onDeviceControlSupport));}updateState(t){super.updateState(t);let e=this;this.state=this.isMediaSpherical&&this.isRendererInitialized?{move:{active:!this.isDeviceControlActive,up:function(t){null!=t&&(t.stopImmediatePropagation(),t.stopPropagation(),t.preventDefault());let s=new b("move");s.data="U",s.dispatch(e.context);},down:function(t){null!=t&&(t.stopImmediatePropagation(),t.stopPropagation(),t.preventDefault());let s=new b("move");s.data="D",s.dispatch(e.context);},left:function(t){null!=t&&(t.stopImmediatePropagation(),t.stopPropagation(),t.preventDefault());let s=new b("move");s.data="L",s.dispatch(e.context);},right:function(t){null!=t&&(t.stopImmediatePropagation(),t.stopPropagation(),t.preventDefault());let s=new b("move");s.data="R",s.dispatch(e.context);},center:function(t){null!=t&&(t.stopImmediatePropagation(),t.stopPropagation(),t.preventDefault());let s=new b("move");s.data="C",s.dispatch(e.context);}},zoom:{active:!this.isDeviceControlActive,plus:function(t){null!=t&&(t.stopImmediatePropagation(),t.stopPropagation(),t.preventDefault());let s=new b("zoom");s.data="P",s.dispatch(e.context);},minus:function(t){null!=t&&(t.stopImmediatePropagation(),t.stopPropagation(),t.preventDefault());let s=new b("zoom");s.data="M",s.dispatch(e.context);},reset:function(t){null!=t&&(t.stopImmediatePropagation(),t.stopPropagation(),t.preventDefault());let s=new b("zoom");s.data="R",s.dispatch(e.context);}},device:{supported:this.isDeviceControlSupported,active:this.isDeviceControlActive,click:Ut(this,this.clickDeviceControl)},ctrl:Ut(this,this.ctrl)}:null,this.refreshCallback(this.state);}ctrl(t){null!=t&&0!=this.isMediaSpherical?(this.sphericalElement=t,this.cachedTouchAction=this.sphericalElement.style.touchAction,this.sphericalElement.style.touchAction="none",this.sphericalElement.addEventListener("touchstart",Ut(this,this.handleSphericalEvent),yt.get_passiveOptions()),this.sphericalElement.addEventListener("touchmove",Ut(this,this.handleSphericalEvent),yt.get_passiveOptions()),this.sphericalElement.addEventListener("touchend",Ut(this,this.handleSphericalEvent),yt.get_passiveOptions()),this.sphericalElement.addEventListener("mousedown",Ut(this,this.handleSphericalEvent),yt.get_passiveOptions()),this.sphericalElement.addEventListener("mousemove",Ut(this,this.handleSphericalEvent),yt.get_passiveOptions()),this.sphericalElement.addEventListener("mouseup",Ut(this,this.handleSphericalEvent),yt.get_passiveOptions()),this.sphericalElement.addEventListener("wheel",Ut(this,this.handleSphericalEvent)),this.sphericalElement.addEventListener("click",Ut(this,this.handleSphericalEvent))):null!=this.sphericalElement&&(null!=this.cachedTouchAction&&(this.sphericalElement.style.touchAction=this.cachedTouchAction),this.cachedTouchAction=null,this.sphericalElement.removeEventListener("touchstart",Ut(this,this.handleSphericalEvent)),this.sphericalElement.removeEventListener("touchmove",Ut(this,this.handleSphericalEvent)),this.sphericalElement.removeEventListener("touchend",Ut(this,this.handleSphericalEvent)),this.sphericalElement.removeEventListener("mousedown",Ut(this,this.handleSphericalEvent)),this.sphericalElement.removeEventListener("mousemove",Ut(this,this.handleSphericalEvent)),this.sphericalElement.removeEventListener("mouseup",Ut(this,this.handleSphericalEvent)),this.sphericalElement.removeEventListener("wheel",Ut(this,this.handleSphericalEvent)),this.sphericalElement.removeEventListener("click",Ut(this,this.handleSphericalEvent)),this.sphericalElement=null);}handleSphericalEvent(t){if(null!=t&&0!=this.isMediaSpherical)switch(t.type){case"blur":case"mouseleave":case"mouseup":case"touchend":if(!this.isUserInteracting)return;if(this.eventAlreadyTriggered(2,t))return;g.enableHtmlSelection();let e=this.skinElement,s=Ut(this,this.handleSphericalEvent);g.enableHtmlSelection(),window.document.removeEventListener("mouseup",s),window.document.removeEventListener("mousemove",s),window.document.removeEventListener("mouseleave",s),window.document.removeEventListener("blur",s),e.removeEventListener("mouseup",s),e.removeEventListener("mousemove",s),e.removeEventListener("blur",s),g.isMobile()&&(window.document.removeEventListener("touchend",s),e.removeEventListener("touchend",s)),new b("up").dispatch(this.context),this.isUserInteracting=!1;break;case"click":this.wasUserMovingPointer&&null!=t&&(t.stopImmediatePropagation(),t.stopPropagation(),t.preventDefault()),this.wasUserMovingPointer=!1;break;case"mousedown":case"touchstart":if(this.isUserInteracting)return;if(this.eventAlreadyTriggered(0,t))return;g.disableHtmlSelection();let i=this.skinElement,a=Ut(this,this.handleSphericalEvent);g.disableHtmlSelection(),window.document.addEventListener("mouseup",a,yt.get_passiveOptions()),window.document.addEventListener("mousemove",a,yt.get_passiveOptions()),window.document.addEventListener("mouseleave",a,yt.get_passiveOptions()),window.document.addEventListener("blur",a,yt.get_passiveOptions()),i.addEventListener("mouseup",a,yt.get_passiveOptions()),i.addEventListener("mousemove",a,yt.get_passiveOptions()),i.addEventListener("blur",a,yt.get_passiveOptions()),g.isMobile()&&(window.document.addEventListener("touchend",a,yt.get_passiveOptions()),i.addEventListener("touchend",a,yt.get_passiveOptions()));let n=new b("down"),l=0;t instanceof MouseEvent&&(l=zt.__cast(t,MouseEvent).clientX);let r=window;if(Object.prototype.hasOwnProperty.call(r,"TouchEvent")&&t instanceof TouchEvent){let e=t;if(e.touches.length>0){l=e.touches.item(0).clientX;}}let o=0;t instanceof MouseEvent&&(o=zt.__cast(t,MouseEvent).clientY);let h=window;if(Object.prototype.hasOwnProperty.call(h,"TouchEvent")&&t instanceof TouchEvent){let e=t;if(e.touches.length>0){o=e.touches.item(0).clientY;}}n.data=new O(l,o),n.dispatch(this.context),this.wasUserMovingPointer=!1,this.isUserInteracting=!0;break;case"mousemove":case"touchmove":if(!this.isUserInteracting)return;if(this.eventAlreadyTriggered(1,t))return;let u=new b("drag"),c=0;t instanceof MouseEvent&&(c=zt.__cast(t,MouseEvent).clientX);let d=window;if(Object.prototype.hasOwnProperty.call(d,"TouchEvent")&&t instanceof TouchEvent){let e=t;if(e.touches.length>0){c=e.touches.item(0).clientX;}}let p=0;t instanceof MouseEvent&&(p=zt.__cast(t,MouseEvent).clientY);let m=window;if(Object.prototype.hasOwnProperty.call(m,"TouchEvent")&&t instanceof TouchEvent){let e=t;if(e.touches.length>0){p=e.touches.item(0).clientY;}}u.data=new O(c,p),u.dispatch(this.context),this.wasUserMovingPointer=!0;break;case"wheel":if(t instanceof WheelEvent){this.isInited&&(this.isPlaying||this.isPaused)&&null!=t&&(t.stopImmediatePropagation(),t.stopPropagation(),t.preventDefault());let e=new b("zoom");e.data=t.deltaY,e.dispatch(this.context);}break;default:return}}eventAlreadyTriggered(t,e){let s=e.timeStamp;if(null==s&&(s=(new Date).getTime()),this.eventTsRegistry[t]==s)return !0;let i=0,a=this.eventTsRegistry.length;for(;i<a;){let e=i++;this.eventTsRegistry[e]=t==e?s:0;}return !1}clickDeviceControl(t){if(!this.isMediaSpherical||null==this.state)return;this.isDeviceControlActive=!this.isDeviceControlActive;let e=this.isDeviceControlActive;null!=this.state&&(null!=this.state.device&&(this.state.device.active=e),null!=this.state.move&&(this.state.move.active=this.state.zoom.active=!e)),this.refreshCallback(this.state);let s=new b("deviceControlActive");s.data=e,s.dispatch(this.context);}onRendererInitialized(t){this.isRendererInitialized!=t.data&&(this.isRendererInitialized=t.data);}onDeviceControlSupport(t){if(this.isDeviceControlSupported==t.data)return;this.isDeviceControlSupported=t.data,this.isDeviceControlActive=this.isDeviceControlSupported,null!=this.state&&null!=this.state.device&&(this.state.device.supported=this.isDeviceControlSupported);let e=this.isDeviceControlActive;null!=this.state&&(null!=this.state.device&&(this.state.device.active=e),null!=this.state.move&&(this.state.move.active=this.state.zoom.active=!e)),this.refreshCallback(this.state);let s=new b("deviceControlActive");s.data=e,s.dispatch(this.context);}}U.__name__="bs.player.plugin.skin.model.camera.CameraModel",U.__super__=W,Object.assign(U.prototype,{__class__:U});class q extends V{constructor(t,e,s,i){let a;if(super(t,e,s,i),Object.prototype.hasOwnProperty.call(e,"videoCastEnabled"))switch(o.field(e,"videoCastEnabled")){case 0:case"false":case!1:a=!1;break;default:a=!0;}else a=!0;this.enabled=a,this.state=null,this.enabled&&(p.add(t,"airplayAvailable",Ut(this,this.onAirPlayAvailable)),p.add(t,"chromecastAvailable",Ut(this,this.onChromecastAvailable)),y.add(t,"videoCastingStart",Ut(this,this.onCastingStart)),y.add(t,"videoCastingEnd",Ut(this,this.onCastingEnd))),this.refreshCallback(this.state);}destroy(){super.destroy(),this.enabled&&(p.remove(this.context,"airplayAvailable",Ut(this,this.onAirPlayAvailable)),p.remove(this.context,"chromecastAvailable",Ut(this,this.onChromecastAvailable)),y.remove(this.context,"videoCastingStart",Ut(this,this.onCastingStart)),y.remove(this.context,"videoCastingEnd",Ut(this,this.onCastingEnd)));}dispatchAirPlay(){new p("airplay").dispatch(this.context);}onAirPlayAvailable(t){this.airPlayAvailable=null!=t&&1==t.data,0!=this.enabled&&(0!=this.airPlayAvailable?(null==this.state&&(this.state={}),this.state.airplay={active:!1,click:Ut(this,this.dispatchAirPlay)},this.refreshCallback(this.state)):null!=this.state&&Object.prototype.hasOwnProperty.call(this.state,"airplay")&&(o.deleteField(this.state,"airplay"),this.refreshCallback(this.state)));}dispatchChromecast(){new p("chromecast").dispatch(this.context);}onChromecastAvailable(t){this.chromecastPlayAvailable=null!=t&&1==t.data,0!=this.enabled&&(0!=this.chromecastPlayAvailable?(null==this.state&&(this.state={}),this.state.chromecast={active:!1,click:Ut(this,this.dispatchChromecast)},this.refreshCallback(this.state)):null!=this.state&&Object.prototype.hasOwnProperty.call(this.state,"chromecast")&&(o.deleteField(this.state,"chromecast"),this.refreshCallback(this.state)));}onCastingStart(t){0!=this.enabled&&(null!=this.state.airplay&&(this.state.airplay.active=!0),null!=this.state.chromecast&&(this.state.chromecast.active=!0),this.refreshCallback(this.state));}onCastingEnd(t){0!=this.enabled&&(null!=this.state.airplay&&(this.state.airplay.active=!1),null!=this.state.chromecast&&(this.state.chromecast.active=!1),this.refreshCallback(this.state));}}q.__name__="bs.player.plugin.skin.model.casting.CastModel",q.__super__=V,Object.assign(q.prototype,{__class__:q});class H extends V{constructor(t,e,s,i,a,n,l){V._hx_skip_constructor=!0,super(),V._hx_skip_constructor=!1,this._hx_constructor(t,e,s,i,a,n,l);}_hx_constructor(t,e,s,i,a,n,l){this.contextmenuElement=null,this.skinElement=null,this.pos=new O(0,0),super._hx_constructor(t,e,s,i),this.skinElement=n;let r=this;this.templateCtx={prefix:a,version:l,clickViewPlayerInformation:function(t){null!=t&&(t.stopImmediatePropagation(),t.stopPropagation(),t.preventDefault()),r.hide(),null!=r.info&&r.info.open();}},this.info=new X(t,e,a,l);this.info.renderTemplate=function(t){return r.renderTemplate(t)};let h;if(this.info.renderHtml=function(t,e){r.renderHtml(t,e);},v.add(t,"resize",Ut(this,this.onResize)),Object.prototype.hasOwnProperty.call(e,"contextMenuDisabled"))switch(o.field(e,"contextMenuDisabled")){case 1:case"true":case!0:h=!0;break;default:h=!1;}else h=!1;1!=h&&(this.state={show:!1,ctrl:null},this.state.ctrl=Ut(this,this.ctrl),this.skinElement.addEventListener("contextmenu",Ut(this,this.onContextMenu)),this.refreshCallback(this.state),p.add(t,"playerInfoShow",Ut(this,this.onPlayerInfoShow)),p.add(t,"playerInfoHide",Ut(this,this.onPlayerInfoHide)));}set_prefix(t){return null!=this.templateCtx&&(this.templateCtx.prefix=t),null!=this.info&&this.info.set_prefix(t),t}renderTemplate(t){return null}renderHtml(t,e){}destroy(){super.destroy(),null!=this.skinElement&&this.skinElement.removeEventListener("contextmenu",Ut(this,this.onContextMenu)),this.disconnectGlobalListeners(),v.remove(this.context,"resize",Ut(this,this.onResize)),p.remove(this.context,"playerInfoShow",Ut(this,this.onPlayerInfoShow)),p.remove(this.context,"playerInfoHide",Ut(this,this.onPlayerInfoHide)),null!=this.info&&this.info.destroy();}ctrl(t){if(null==t)return this.disconnectGlobalListeners(),void(this.contextmenuElement=null);this.contextmenuElement=t,window.requestAnimationFrame(Ut(this,this.updatePosition)),null==this.template&&(this.template=this.renderTemplate('<ul class="${ctx.prefix}-contextmenu-items">\n\t\x3c!-- items --\x3e\n\t<if cond="${!!ctx.items && ctx.items.length > 0}">\n\t\t<for items="${ctx.items}">\n\t\t\t<li class="${ctx.prefix}-contextmenu-item">\n\t\t\t\t\x3c!-- button --\x3e\n\t\t\t\t<if cond="${!!item.click}">\n\t\t\t\t\t<button @click="${item.click}" type="button" class="${ctx.prefix}-contextmenu-button">\n\t\t\t\t\t\t<if cond="${!!item.html}">${asHtml(item.html)}</if>\n\t\t\t\t\t</button>\n\t\t\t\t</if>\n\t\t\t\t\x3c!-- link --\x3e\n\t\t\t\t<if cond="${!!item.link}">\n\t\t\t\t\t<a href="${item.link}" target="_blank" class="${ctx.prefix}-contextmenu-link">\n\t\t\t\t\t\t<if cond="${!!item.html}">${asHtml(item.html)}</if>\n\t\t\t\t\t</a>\n\t\t\t\t</if>\n\t\t\t\t\x3c!-- else --\x3e\n\t\t\t\t<if cond="${!item.click && !item.link}">\n\t\t\t\t\t<if cond="${!!item.html}">${asHtml(item.html)}</if>\n\t\t\t\t</if>\n\t\t\t</li>\n\t\t</for>\n\t</if>\n\t\x3c!-- info --\x3e\n\t<li class="${ctx.prefix}-contextmenu-item">\n\t\t<button @click="${ctx.clickViewPlayerInformation}" type="button" class="${ctx.prefix}-contextmenu-button">\n\t\t\t<span class="${ctx.prefix}-txt-shdw">View player information</span>\n\t\t</button>\n\t</li>\n\t\x3c!-- powered by --\x3e\n\t<li class="${ctx.prefix}-contextmenu-item">\n\t\t<a href="https://bradmax.com" target="_blank" class="${ctx.prefix}-contextmenu-link">\n\t\t\t<small style="flex-direction:column;">\n\t\t\t\t<small class="${ctx.prefix}-txt-shdw" style="font-size: 9px;line-height: 10px;">powered by</small>\n\t\t\t\t<span style="align-items: center;">\n\t\t\t\t\t<svg width="22px" height="14px" viewBox="0 0 24 24">\n\t\t\t\t\t\t<path d="M5,1l0,21.721l15.739,-10.948l-15.648,-10.773l-0.091,0Z" style="fill:#fad600;fill-rule:nonzero;" />\n\t\t\t\t\t</svg>\n\t\t\t\t\t<span style="flex-direction:column;">\n\t\t\t\t\t\t<strong class="${ctx.prefix}-txt-shdw" style="font-size: 12px;line-height: 14px;">Bradmax Media Player</strong>\n\t\t\t\t\t\t<small class="${ctx.prefix}-txt-shdw" style="font-size: 9px;line-height: 9px;">${ctx.version}</small>\n\t\t\t\t\t</span>\n\t\t\t\t</span>\n\t\t\t</small>\n\t\t</a>\n\t</li>\n</ul>\n')),this.renderHtml(this.contextmenuElement,this.template(this.templateCtx)),this.connectGlobalListeners();}onResize(t){this.updatePosition(),null!=this.info&&this.info.resize(t);}onPlayerInfoShow(t){null!=this.info&&this.info.open();}onPlayerInfoHide(t){null!=this.info&&this.info.close();}onContextMenu(t){null!=t&&(t.stopImmediatePropagation(),t.stopPropagation(),t.preventDefault()),this.storePosition(t),this.show();}storePosition(t){this.pos.x=t.pageX,this.pos.y=t.pageY;}updatePosition(){if(null==this.contextmenuElement)return;let t=this.contextmenuElement.offsetWidth+4,e=this.contextmenuElement.offsetHeight+4,s=null;s=this.skinElement.getBoundingClientRect();let i=s,a=window.document.documentElement.scrollLeft,n=window.document.documentElement.scrollTop,l=this.pos.x-(i.x+a),r=this.pos.y-(i.y+n);i.width-l<t?this.contextmenuElement.style.left=i.width-t+"px":this.contextmenuElement.style.left=l+"px",i.height-r<e?this.contextmenuElement.style.top=i.height-e+"px":this.contextmenuElement.style.top=r+"px";}show(){1!=this.state.show?(this.state.show=!0,this.refreshCallback(this.state)):this.updatePosition();}hide(){0!=this.state.show&&(this.state.show=!1,this.refreshCallback(this.state));}connectGlobalListeners(){window.document.addEventListener("click",Ut(this,this.onDocumentClick)),window.addEventListener("keyup",Ut(this,this.onWindowKeyUp));}disconnectGlobalListeners(){window.document.removeEventListener("click",Ut(this,this.onDocumentClick)),window.removeEventListener("keyup",Ut(this,this.onWindowKeyUp));}onDocumentClick(t){this.hide();}onWindowKeyUp(t){27==t.keyCode&&this.hide();}}H.__name__="bs.player.plugin.skin.model.contextmenu.ContextMenuModel",H.__super__=V,Object.assign(H.prototype,{__class__:H});class ${constructor(t,e){$._hx_skip_constructor||this._hx_constructor(t,e);}_hx_constructor(t,e){this.barWidth=null,this.canvas=null,this.canvas2d=null,this.index=0,this.colors=null,this.datum=null,this.width=300,this.height=11,this.colors=t,null!=e&&(this.datum=e),this.barWidth=Math.round(this.width/150);}destroy(){this.index=0,this.canvas2d=null,this.canvas=null;}ctrl(t){if(null==t)return void this.destroy();this.canvas2d=t.getContext("2d");let e=Math.round(150*this.barWidth);if(t.width=e,t.style.width=e+"px",null==this.canvas2d)return;let s=1<window.devicePixelRatio?2:1;t.height=this.height*s,t.style.height=this.height+"px",this.canvas2d.scale(1,s);}render(t){if(null==this.canvas2d)return;let e=0,s=0,i=0,a=0,n=this.datum.length,l=0;for(;l<n;){let n=(l+=2)-2;if(n==this.datum.length-1)break;if(!("number"==typeof this.datum[n+1]==0||"number"==typeof t==0||parseFloat(""+h.string(this.datum[n+1]))<parseFloat(""+h.string(t)))){if(e=parseFloat(""+h.string(t)),s=parseFloat(""+h.string(this.datum[n])),i=parseFloat(""+h.string(this.datum[n+1])),a=Math.min(1,(e-s)/(i-s)),isNaN(a))break;this.canvas2d.fillStyle=""+this.colors[n],this.canvas2d.fillRect(this.index*this.barWidth,0,this.barWidth,this.height),this.canvas2d.fillStyle=""+this.colors[n+1],this.canvas2d.fillRect(this.index*this.barWidth,this.height*(1-a),this.barWidth,this.height),this.index=(this.index+1)%150;break}}this.canvas2d.clearRect(this.index*this.barWidth,0,this.barWidth,this.height);}}$.__name__="bs.player.plugin.skin.model.contextmenu.info.PlayerInfoChart",Object.assign($.prototype,{__class__:$});class G extends ${constructor(t){$._hx_skip_constructor=!0,super(),$._hx_skip_constructor=!1,this._hx_constructor(t);}_hx_constructor(t){this.offset=0,this.duration=0,super._hx_constructor(t);}ctrl(t){super.ctrl(t),null!=this.canvas2d&&(this.canvas2d.fillStyle=""+this.colors[0],this.canvas2d.strokeStyle=""+this.colors[1]);}render(t){if(null==this.canvas2d)return;let e,s,i;t.duration!=this.duration&&(this.offset=this.width/t.duration,this.duration=t.duration),this.canvas2d.clearRect(0,0,this.width,this.height);let a=0,n=t.buffered.length;for(;a<n;){let n=a++;e=t.buffered.start(n)*this.offset,s=t.buffered.end(n)*this.offset,i=s-e,this.canvas2d.fillRect(e,0,i,this.height),this.canvas2d.rect(e,0,i,this.height),this.canvas2d.stroke();}}}G.__name__="bs.player.plugin.skin.model.contextmenu.info.PlayerInfoBufferChart",G.__super__=$,Object.assign(G.prototype,{__class__:G});class X{constructor(t,e,s,i){this.lastDecodedByteCount=0,this.lastDecodedFrames=0,this.lastDecodedFrameTime=0,this.framesPerSecond=0,this.networkActivityBytes=0,this.playerHeight=0,this.playerWidth=0,this.videoElement=null,this.hasNetworkActivitySamples=!1,this.networkActivitySamples=new Bt,this.bandwidthSteps=[0,18750,37500,81250,128e3,256e3,512e3,1024e3,2048e3,4096e3,8192e3,16384e3,32768e3,65536e3,131072e3],this.bandwidthColors=["#000000","#d53e4f","#f46d43","#fdae61","#fee08b","#e6f598","#abdda4","#66c2a5","#2ca02c","#3288bd","#1f77b4","#124588","#9467bd","#8c564b","#ffffff"].slice(0),this.timeOrigin=window.performance.timeOrigin,this.templateCtx={prefix:null,size:{h:0,w:0},version:null,panels:[{title:"Video",id:"video",list:[{defaultValue:0,id:"creationTime",label:"creation time",value:null},{defaultValue:"not available",id:"videoSize",unit:"px",label:"video size",value:null},{defaultValue:"not available",id:"videoFrames",label:"frames",value:null},{chart:null,defaultValue:null,id:"framesPerSecond",unit:"fps",label:"frames per seconds",value:null},{chart:null,defaultValue:null,id:"currentTotalBitrateKpbs",unit:"Kpbs",label:"current total bitrate",value:null},{chart:null,defaultValue:null,id:"networkActivityBytes",unit:"KB",label:"network activity",value:null},{chart:null,defaultValue:0,id:"bufferLength",unit:"s",label:"buffer length",value:null},{chart:null,defaultValue:0,id:"buffer",label:"buffer:",value:null}]},{title:"Media",id:"media",list:[{defaultValue:null,id:"id",label:"id",value:null},{defaultValue:"not available",id:"title",label:"title",value:null},{defaultValue:"not available",id:"duration",unit:"s",label:"duration",value:null},{defaultValue:!1,id:"hasConcurrencyControl",label:"concurrency control",value:null},{defaultValue:!1,id:"isDvr",label:"dvr",value:null},{defaultValue:!1,id:"isLiveStream",label:"live",value:null},{defaultValue:!1,id:"spherical",label:"spherical",value:null},{defaultValue:null,id:"source",label:"source count",value:null},{defaultValue:null,id:"sourceFallbacks",label:"source fallbacks count",value:null},{defaultValue:null,id:"subtitlesSets",label:"subtitles sets count",value:null},{defaultValue:null,id:"audioSets",label:"audio sets count",value:null},{defaultValue:null,id:"splashImages",label:"splash images count",value:null},{defaultValue:null,id:"posterImages",label:"poster images count",value:null},{defaultValue:null,id:"mediaPlaylist",label:"playlist items count",value:null},{defaultValue:null,id:"mediaLandingPage",label:"landing page",value:null}]},{title:"Player",id:"player",list:[{defaultValue:"not available",id:"version",label:"Bradmax Media Player",value:null},{defaultValue:"not available",id:"playerSize",unit:"px",label:"player size",value:null}]},{title:"Configuration",id:"config",list:[{defaultValue:!1,id:"autoplay",label:"autoplay",value:null},{defaultValue:!1,id:"mute",label:"mute",value:null},{defaultValue:null,id:"volume",label:"volume",value:null},{defaultValue:null,id:"startTime",label:"startTime",value:null},{defaultValue:null,id:"qualitySelectionEnabled",label:"quality selection enabled",value:null},{defaultValue:null,id:"qualityLabelType",label:"qualityLabelType",value:null},{defaultValue:null,id:"qualityInitialBandwidthKbs",label:"quality initial bandwidth",value:null},{defaultValue:!0,id:"showSkinOnInit",label:"show skin on init",value:null},{defaultValue:null,id:"shareButtons",label:"share buttons",value:null},{defaultValue:null,id:"endSplash",label:"end splash",value:null},{defaultValue:null,id:"subtitles",label:"subtitles",value:null},{defaultValue:null,id:"audio",label:"audio",value:null},{defaultValue:null,id:"locale",label:"locale",value:null},{defaultValue:null,id:"dvrWindowStartTime",label:"dvr window start time",value:null},{defaultValue:null,id:"dvrWindowEndTime",label:"dvr window end time",value:null},{defaultValue:null,id:"dvrMinLenForSeekbar",label:"dvr minimum length for seekbar",value:null},{defaultValue:!1,id:"isDvrWallTimeMode",label:"dvr wall time",value:null},{defaultValue:!1,id:"iosInlineVideo",label:"ios inline video",value:null},{defaultValue:!1,id:"gdprAgreeRequired",label:"gdpr agree required",value:null},{defaultValue:!1,id:"gdprAgreeForCookie",label:"gdpr agree for cookie",value:null},{defaultValue:null,id:"logoFile",label:"logo",value:null},{defaultValue:null,id:"logoLink",label:"logo link",value:null},{defaultValue:null,id:"logoPosition",label:"logo position",value:null},{defaultValue:null,id:"logoAutohide",label:"logo autohide",value:null},{defaultValue:null,id:"logoVisibleDuringAdPlayback",label:"logo visible during ad playback",value:null},{defaultValue:null,id:"skinColor",label:"skin color",value:null},{defaultValue:!1,id:"fullscreenEnabled",label:"fullscreen enabled",value:null},{defaultValue:!1,id:"pictureInPictureEnabled",label:"picture in picture enabled",value:null},{defaultValue:!1,id:"videoCastEnabled",label:"video casting enabled",value:null}]},{title:"Device",id:"device",list:[{defaultValue:"not available",id:"useragent",label:"user agent",value:null},{defaultValue:"not available",id:"screenSize",unit:"px",label:"screen size",value:null},{defaultValue:!1,id:"isMobile",label:"mobile",value:null},{defaultValue:!1,id:"isSmartTV",label:"smart TV",value:null},{defaultValue:"not available",id:"browserName",label:"browser name",value:null},{defaultValue:!1,id:"isBrowserOnline",label:"online",value:null},{defaultValue:!1,id:"isWebGLAvailable",label:"WebGL",value:null},{defaultValue:!1,id:"isWebGL2Available",label:"WebGL2",value:null},{defaultValue:!1,id:"isDeviceOrientationSupported",label:"device orientation",value:null},{defaultValue:"not available",id:"orientation",unit:"°",label:"orientation",value:null}]}]},this.context=t,null!=s&&this.set_prefix(s),this.templateCtx.version=i,this.initCtx(e),m.add(t,"mediaMetadataData",Ut(this,this.onDataProviderEvent)),m.add(t,"movieData",Ut(this,this.onDataProviderEvent)),y.add(t,"videoMediaElementInit",Ut(this,this.onVideoElementEvent)),y.add(t,"networkActivityUrl",Ut(this,this.onVideoNetworkActivity));}renderTemplate(t){return null}renderHtml(t,e){}set_prefix(t){return null!=this.templateCtx&&(this.templateCtx.prefix=t),t}destroy(){m.remove(this.context,"mediaMetadataData",Ut(this,this.onDataProviderEvent)),m.remove(this.context,"movieData",Ut(this,this.onDataProviderEvent)),y.remove(this.context,"videoMediaElementInit",Ut(this,this.onVideoElementEvent)),y.remove(this.context,"networkActivityUrl",Ut(this,this.onVideoNetworkActivity)),this.destroyCharts();}open(){let t=new f("showMessage");t.data={type:"normal",title:"Player information",text:'<div id="'+this.context+'-info-view" style="flex-direction: column;"></div>',onAfterShow:Ut(this,this.afterShow),close:!0,onAfterClose:Ut(this,this.afterClose),style:{window:{minWidth:"380px",width:"380px",maxWidth:"380px",backgroundColor:"#000",pointerEvents:"all"},overlay:{height:"90%",background:"none",backdropFilter:"none",pointerEvents:"none"}}},t.dispatch(this.context);}close(){new f("closeMessage").dispatch(this.context);}resize(t){this.playerWidth=t.data.width,this.playerHeight=t.data.height;let e=0,s=this.templateCtx.panels;for(;e<s.length;){let t=s[e];++e,"player"==t.id&&this.updatePlayerCtx(t.list);}}afterShow(){let t=window.document.getElementById(this.context+"-info-view");m.add(this.context,"mediaMetadataData",Ut(this,this.onNewDataProviderEvent)),m.add(this.context,"mediaAfterPlaybackStartMetadata",Ut(this,this.onDataProviderEvent)),y.add(this.context,"currentTimeChange",Ut(this,this.onVideoEvent)),null!=t&&(this.templateCtx.size.w=t.clientWidth,this.templateCtx.size.h=t.clientHeight),null==this.template&&(this.template=this.renderTemplate('${ctx.panels.map((panel, panelIndex) => html`\n<div class="${ctx.prefix}-message-info-con">\n\t<h4 class="${ctx.prefix}-message-info-title">${panel.title}:</h4>\n\t<div  class="${ctx.prefix}-message-info-list">\n\t\t${panel.list.map((item, itemIndex) => item.value != item.defaultValue\n\t\t? html`\n\t\t<div class="${ctx.prefix}-message-info-item">\n\t\t\t<small class="${ctx.prefix}-message-info-item-label">${item.label}</small>\n\t\t\t<small  class="${ctx.prefix}-message-info-item-value">\n\t\t\t\t${item.value != null ? html`<strong>${item.value}</strong>${item.unit ? html`<small class="${ctx.prefix}-message-info-item-unit">&nbsp;${item.unit}</small>` : nothing}` : html`<i>${item.defaultValue}</i>`}\n\t\t\t</small>\n\t\t</div>${item.chart ? html`<canvas ${ctrl(item.chart)} class="${ctx.prefix}-message-info-item-chart"></canvas>` : nothing}`\n\t\t: nothing\n\t\t)}\n\t</div>\n</div>`)}\n'));let e=this,s=function(){e.countNetworkActivityBytes(),e.updateCtx(),e.renderHtml(t,e.template(e.templateCtx));};null==this.renderTimer&&(this.renderTimer=new Lt(250)),this.renderTimer.run=s,s();}afterClose(){m.remove(this.context,"mediaMetadataData",Ut(this,this.onNewDataProviderEvent)),m.remove(this.context,"mediaAfterPlaybackStartMetadata",Ut(this,this.onDataProviderEvent)),y.remove(this.context,"currentTimeChange",Ut(this,this.onVideoEvent)),null!=this.renderTimer&&this.renderTimer.stop(),this.renderTimer=null;}onVideoElementEvent(t){this.videoElement=t.data;}onVideoEvent(t){null!=t&&null!=t.data&&null!=t.data.media&&(this.media=t.data.media);}onVideoNetworkActivity(t){this.hasNetworkActivitySamples=!0,this.networkActivitySamples.h[t.data.url]=t.data.loaded;}onNewDataProviderEvent(t){this.networkActivitySamples.h=Object.create(null),null!=t&&null!=t.data&&(this.media=t.data);}onDataProviderEvent(t){null!=t&&null!=t.data&&(this.media=t.data);}initCtx(t){let e=0,s=this.templateCtx.panels;for(;e<s.length;){let i=s[e];switch(++e,i.id){case"config":this.updateConfigCtx(i.list,t);break;case"device":this.updateDeviceCtx(i.list);break;case"player":this.updatePlayerCtx(i.list);break;default:continue}}}updateCtx(){let t=0,e=this.templateCtx.panels;for(;t<e.length;){let s=e[t];switch(++t,s.id){case"media":this.updateMediaCtx(s.list,this.media);break;case"video":this.updateVideoCtx(s.list,this.media);break;default:continue}}}updatePlayerCtx(t){let e=0;for(;e<t.length;){let s=t[e];switch(++e,s.id){case"playerSize":s.value=this.playerWidth+" x "+this.playerHeight;break;case"version":s.value=this.templateCtx.version;break;default:continue}}this.resolvePlugins(t,exports.bs.player.plugin);}updateConfigCtx(t,e){let s=null;Object.prototype.hasOwnProperty.call(e,"logoFile")&&(s=o.field(e,"logoFile"));let i=null!=s,a=0;for(;a<t.length;){let s=t[a];switch(++a,s.id){case"audio":s.value=Ct.audio(e);break;case"autoplay":let t;if(Object.prototype.hasOwnProperty.call(e,"autoplay"))switch(o.field(e,"autoplay")){case 1:case"true":case!0:t=!0;break;default:t=!1;}else t=!1;s.value=t;break;case"dvrMinLenForSeekbar":s.value=Object.prototype.hasOwnProperty.call(e,"dvrMinLenForSeekbar")?parseFloat(o.field(e,"dvrMinLenForSeekbar")):null;break;case"dvrWindowEndTime":s.value=Object.prototype.hasOwnProperty.call(e,"dvrWindowEndTime")?parseFloat(o.field(e,"dvrWindowEndTime")):null;break;case"dvrWindowStartTime":s.value=Object.prototype.hasOwnProperty.call(e,"dvrWindowStartTime")?parseFloat(o.field(e,"dvrWindowStartTime")):null;break;case"endSplash":let a=null;Object.prototype.hasOwnProperty.call(e,"endSplash")&&(a=o.field(e,"endSplash")),s.value=a;break;case"fullscreenEnabled":s.value=Ct.fullscreenEnabled(e);break;case"gdprAgreeForCookie":let n;if(Object.prototype.hasOwnProperty.call(e,"gdprAgreeForCookie"))switch(o.field(e,"gdprAgreeForCookie")){case 1:case"true":case!0:n=!0;break;default:n=!1;}else n=!1;s.value=n;break;case"gdprAgreeRequired":let l;if(Object.prototype.hasOwnProperty.call(e,"gdprAgreeRequired"))switch(o.field(e,"gdprAgreeRequired")){case 1:case"true":case!0:l=!0;break;default:l=!1;}else l=!1;s.value=l;break;case"iosInlineVideo":let r;if(Object.prototype.hasOwnProperty.call(e,"iosInlineVideo"))switch(o.field(e,"iosInlineVideo")){case 1:case"true":case!0:r=!0;break;default:r=!1;}else r=!1;s.value=r;break;case"isDvrWallTimeMode":let h;if(Object.prototype.hasOwnProperty.call(e,"isDvrWallTimeMode"))switch(o.field(e,"isDvrWallTimeMode")){case 1:case"true":case!0:h=!0;break;default:h=!1;}else h=!1;s.value=h;break;case"locale":s.value=Object.prototype.hasOwnProperty.call(e,"locale")?o.field(e,"locale"):null;break;case"logoAutohide":if(i){let t;if(Object.prototype.hasOwnProperty.call(e,"logoAutohide"))switch(o.field(e,"logoAutohide")){case 0:case"false":case!1:t=!1;break;default:t=!0;}else t=!0;s.value=t;}break;case"logoFile":if(i){let t=null;Object.prototype.hasOwnProperty.call(e,"logoFile")&&(t=o.field(e,"logoFile")),s.value=t;}break;case"logoLink":if(i){let t=null;Object.prototype.hasOwnProperty.call(e,"logoLink")&&(t=o.field(e,"logoLink")),s.value=t;}break;case"logoPosition":if(i){let t;if(Object.prototype.hasOwnProperty.call(e,"logoXPosition"))switch(o.field(e,"logoXPosition")){case"left":default:t="left";break;case"right":t="right";}else t="left";let i,a=t+" / ";if(Object.prototype.hasOwnProperty.call(e,"logoYPosition"))if("bottom"===o.field(e,"logoYPosition"))i="bottom";else i="top";else i="top";s.value=a+i;}break;case"logoVisibleDuringAdPlayback":if(i){let t;if(Object.prototype.hasOwnProperty.call(e,"logoVisibleDuringAdPlayback"))switch(o.field(e,"logoVisibleDuringAdPlayback")){case 1:case"true":case!0:t=!0;break;default:t=!1;}else t=!1;s.value=t;}break;case"mute":s.value=Ct.mute(e);break;case"pictureInPictureEnabled":if(Object.prototype.hasOwnProperty.call(e,"pictureInPictureButtonVisible"))switch(o.field(e,"pictureInPictureButtonVisible")){case 0:case"false":case!1:e.pictureInPictureEnabled=!1;break;default:e.pictureInPictureEnabled=!0;}let c;if(Object.prototype.hasOwnProperty.call(e,"pictureInPictureEnabled"))switch(o.field(e,"pictureInPictureEnabled")){case 0:case"false":case!1:c=!1;break;default:c=!0;}else c=!0;s.value=c;break;case"qualityInitialBandwidthKbs":s.value=Object.prototype.hasOwnProperty.call(e,"qualityInitialBandwidthKbs")?parseFloat(o.field(e,"qualityInitialBandwidthKbs")):null;break;case"qualityLabelType":s.value=Object.prototype.hasOwnProperty.call(e,"qualityLabelType")?o.field(e,"qualityLabelType"):null;break;case"qualitySelectionEnabled":let d;if(Object.prototype.hasOwnProperty.call(e,"qualitySelectionEnabled"))switch(o.field(e,"qualitySelectionEnabled")){case 0:case"false":case!1:d=!1;break;default:d=!0;}else d=!0;s.value=d;break;case"shareButtons":let p;if(Object.prototype.hasOwnProperty.call(e,"shareButtons")){let t=o.field(e,"shareButtons");p=null!=t&&"string"==typeof t&&""!=u.trim(t)?t.toLowerCase():null;}else p=null;s.value=p;break;case"showSkinOnInit":let m;if(Object.prototype.hasOwnProperty.call(e,"showSkinOnInit"))switch(o.field(e,"showSkinOnInit")){case 0:case"false":case!1:m=!1;break;default:m=!0;}else m=!0;s.value=m;break;case"skinColor":s.value=Object.prototype.hasOwnProperty.call(e,"skinColor")?o.field(e,"skinColor"):null;break;case"startTime":s.value=Object.prototype.hasOwnProperty.call(e,"startTime")?parseFloat(o.field(e,"startTime")):null;break;case"subtitles":s.value=Ct.subtitles(e);break;case"videoCastEnabled":let f;if(Object.prototype.hasOwnProperty.call(e,"videoCastEnabled"))switch(o.field(e,"videoCastEnabled")){case 0:case"false":case!1:f=!1;break;default:f=!0;}else f=!0;s.value=f;break;case"volume":s.value=Ct.volume(e);break;default:continue}}}updateDeviceCtx(t){let e=0;for(;e<t.length;){let s=t[e];switch(++e,s.id){case"browserName":s.value=g.browserName;break;case"isBrowserOnline":s.value=g.isBrowserOnline();break;case"isDeviceOrientationSupported":s.value=g.isDeviceOrientationSupported();break;case"isMobile":s.value=g.isMobile();break;case"isSmartTV":s.value=g.isSmartTV();break;case"isWebGL2Available":s.value=g.isWebGL2Available();break;case"isWebGLAvailable":s.value=g.isWebGLAvailable();break;case"orientation":s.value=g.getOrientation();break;case"screenSize":let t=g.getScreenSize();s.value=t.width+" x "+t.height;break;case"useragent":s.value=g.getUserAgent();break;default:continue}}}updateMediaCtx(t,e){let s=!1,i=!1;e instanceof C?(s=!1,i=!1):e instanceof x?(s=!0,i=e instanceof S):(s=!1,i=!1);let a=0;for(;a<t.length;){let n=t[a];switch(++a,n.id){case"audioSets":null!=e.audioSets&&e.audioSets.length>0&&(n.value=e.audioSets.length);break;case"duration":n.value=e.duration;break;case"hasConcurrencyControl":n.value=e.mediaSettings.hasConcurrencyControl;break;case"id":n.value=e.id;break;case"isDvr":n.value=s;break;case"isLiveStream":n.value=i;break;case"mediaLandingPage":null!=e.mediaLandingPage&&(n.value=e.mediaLandingPage);break;case"mediaPlaylist":null!=e.mediaPlaylist&&e.mediaPlaylist.get_length()>0&&(n.value=e.mediaPlaylist.get_length());break;case"posterImages":null!=e.posterImages&&e.posterImages.length>0&&(n.value=e.posterImages.length);break;case"source":null!=e.source&&e.source.length>0&&(n.value=e.source.length);break;case"sourceFallbacks":null!=e.sourceFallbacks&&e.sourceFallbacks.length>0&&(n.value=e.sourceFallbacks.length);break;case"spherical":n.value=e.spherical;break;case"splashImages":null!=e.splashImages&&e.splashImages.length>0&&(n.value=e.splashImages.length);break;case"subtitlesSets":null!=e.subtitlesSets&&e.subtitlesSets.length>0&&(n.value=e.subtitlesSets.length);break;case"title":n.value=e.title;break;default:continue}}}updateVideoCtx(t,e){if(null==this.videoElement)return;let i=this.videoElement.getVideoPlaybackQuality(),a=e.mediaPlaybackInfo.currentTime,n=this.videoElement.buffered,l=this.getBufferLength(n,a);null!=i&&(e.mediaPlaybackInfo.isPlaying?this.countFps(i.totalVideoFrames):this.framesPerSecond=0);let o=0;for(;o<t.length;){let h=t[o];switch(++o,h.id){case"buffer":h.value=n.length,null==h.chart&&(null==this.bufferChart&&(this.bufferChart=new G(["#2ca02c","#e6f598"].slice(0))),h.chart=Ut(s=this.bufferChart,s.ctrl)),this.bufferChart.render({duration:e.duration,buffered:n});break;case"bufferLength":h.value=0==l?"0":l.toFixed(2),null==h.chart&&(null==this.bufferLengthChart&&(this.bufferLengthChart=new $(["#000000","#fdae61","#e6f598","#66c2a5","#3288bd","#ffffff"].slice(0),[0,15,30,60,90,120].slice(0))),h.chart=Ut(s=this.bufferLengthChart,s.ctrl)),this.bufferLengthChart.render(l);break;case"creationTime":null!=i&&(h.value=r.dateStr(new Date(this.timeOrigin+i.creationTime)));break;case"currentTime":h.value=a;break;case"currentTotalBitrateKpbs":let t=e.mediaPlaybackInfo.currentTotalBitrateKpbs;null==t&&(t=this.tryToCountBitrate()),h.value=t,null==h.chart&&(null==this.currentTotalBitrateKpbsChart&&(this.currentTotalBitrateKpbsChart=new $(this.bandwidthColors,this.bandwidthSteps.slice(0))),h.chart=Ut(s=this.currentTotalBitrateKpbsChart,s.ctrl)),this.currentTotalBitrateKpbsChart.render(1e3*t);break;case"framesPerSecond":h.value=this.framesPerSecond,null==h.chart&&(null==this.framesPerSecondChart&&(this.framesPerSecondChart=new $(["#d53e4f","#f46d43","#fdae61","#fee08b","#e6f598","#abdda4","#66c2a5"].slice(0),[0,12,18,24,32,48,60].slice(0))),h.chart=Ut(s=this.framesPerSecondChart,s.ctrl)),this.framesPerSecondChart.render(this.framesPerSecond);break;case"networkActivityBytes":if(0==this.hasNetworkActivitySamples)continue;if(h.value=Math.round(this.networkActivityBytes/1e3),null==h.chart){if(null==this.networkActivityChart){let t=this.bandwidthColors,e=this.bandwidthSteps,s=new Array(e.length),i=0,a=e.length;for(;i<a;){let t=i++;s[t]=e[t]/4;}this.networkActivityChart=new $(t,s.slice(0));}h.chart=Ut(s=this.networkActivityChart,s.ctrl);}this.networkActivityChart.render(8*this.networkActivityBytes/1e3);break;case"videoFrames":null!=i&&(h.value=i.droppedVideoFrames+" dropped of "+i.totalVideoFrames);break;case"videoSize":h.value=this.videoElement.videoWidth+" x "+this.videoElement.videoHeight;break;default:continue}}}destroyCharts(){null!=this.currentTotalBitrateKpbsChart&&this.currentTotalBitrateKpbsChart.destroy(),null!=this.bufferLengthChart&&this.bufferLengthChart.destroy(),null!=this.networkActivityChart&&this.networkActivityChart.destroy(),null!=this.framesPerSecondChart&&this.framesPerSecondChart.destroy(),null!=this.bufferChart&&this.bufferChart.destroy();}getBufferLength(t,e){let s=0,i=t.length;for(;s<i;){let i=s++,a=t.start(i),n=t.end(i);if(a<=e&&e<n)return n-e}return 0}countNetworkActivityBytes(){this.networkActivityBytes=0;let t=this.networkActivitySamples.h,e=Object.keys(t),s=e.length,i=0;for(;i<s;)this.networkActivityBytes+=t[e[i++]];this.networkActivitySamples.h=Object.create(null);}countFps(t){let e=t-this.lastDecodedFrames;if(0!=e){let s=window.performance.now();this.framesPerSecond=Math.round(e/(s-this.lastDecodedFrameTime)*1e3),this.lastDecodedFrames=t,this.lastDecodedFrameTime=s;}}tryToCountBitrate(){if("webkitVideoDecodedByteCount"in this.videoElement){let t=parseFloat(this.videoElement.webkitVideoDecodedByteCount),e=(t-this.lastDecodedByteCount)/1e3*8;return this.lastDecodedByteCount=t,Math.round(e)}return null}resolvePlugins(t,e){if(0==o.isObject(e))return;let s=e.__name__;if(null!=s){let i,a,n=s.split(".").pop(),l=e;if(0==o.isObject(l))a=!1;else {let t=Object.prototype.hasOwnProperty.call(l,"__plugfaces__")?o.field(l,"__plugfaces__"):null;a=null!=t&&t.indexOf("IVideoPlayer")>-1;}if(a)i=!0;else {let t=e;if(0==o.isObject(t))i=!1;else {let e=Object.prototype.hasOwnProperty.call(t,"__plugfaces__")?o.field(t,"__plugfaces__"):null;i=null!=e&&e.indexOf("IPlugin")>-1;}}if(i){let e=[],i=0,a=t;for(;i<a.length;){let t=a[i];++i,t.id==s&&e.push(t);}return void(0==e.length&&t.push({id:s,label:""+n,value:"active"}))}}else {let s=0,i=o.fields(e);for(;s<i.length;)this.resolvePlugins(t,o.field(e,i[s++]));}}}X.__name__="bs.player.plugin.skin.model.contextmenu.info.PlayerInfoMessage",Object.assign(X.prototype,{__class__:X});class K extends V{constructor(t,e,s,i,a,n){V._hx_skip_constructor=!0,super(),V._hx_skip_constructor=!1,this._hx_constructor(t,e,s,i,a,n);}_hx_constructor(t,e,s,i,a,n){this.cssPrefix=null,super._hx_constructor(t,e,s,i);let l=g.isMobile(),r=g.isSmartTV();this.state={browserName:g.browserName.toLowerCase(),desktop:0==l&&0==r,mobile:l,ios:g.isiOS,tv:r,tizen:g.isSamsungSmartTVTizen,webview:g.isWebView(),css:null},this.element=n,this.set_prefix(a);}set_prefix(t){if(this.cssPrefix=t,null!=this.element&&null!=this.cssPrefix&&""!=this.cssPrefix){let t=this.toStringArray();this.state.css=t.join(" ");let e=0;for(;e<t.length;)this.element.classList.add(t[e++]);this.refreshCallback(this.state);}return this.cssPrefix}toStringArray(){let t=[this.cssPrefix+"-"+this.state.browserName],e=0,s=o.fields(this.state);for(;e<s.length;){let i=s[e];++e;let a=o.field(this.state,i);"boolean"==typeof a&&1==a&&t.push(this.cssPrefix+"-"+i);}return t}}K.__name__="bs.player.plugin.skin.model.device.DeviceModel",K.__super__=V,Object.assign(K.prototype,{__class__:K});class Q extends V{constructor(t,e,s,i,a){V._hx_skip_constructor=!0,super(),V._hx_skip_constructor=!1,this._hx_constructor(t,e,s,i,a);}_hx_constructor(t,e,s,i,a){let n;if(this.active=!1,super._hx_constructor(t,e,s,i),this.element=a,this.enabled=Ct.fullscreenEnabled(e),Object.prototype.hasOwnProperty.call(e,"fullscreenOrientationLock"))switch(o.field(e,"fullscreenOrientationLock")){case"any":n="any";break;case"landscape":n="landscape";break;case"landscape-primary":n="landscape-primary";break;case"landscape-secondary":n="landscape-secondary";break;case"natural":n="natural";break;case"portrait":n="portrait";break;case"portrait-primary":n="portrait-primary";break;case"portrait-secondary":n="portrait-secondary";break;default:n=null;}else n=null;this.fullscreenOrientationLock=n,this.enabled&&(g.isiOS?(y.add(t,"videoMediaElementInit",Ut(this,this.oniOSVideoMediaElementInit)),y.add(t,"playing",Ut(this,this.oniOSPlaying)),y.add(t,"complete",Ut(this,this.oniOSComplete))):this.enabled&&this.activate());}destroy(){this.enabled&&(this.deactivate(),g.isiOS&&(y.remove(this.context,"videoMediaElementInit",Ut(this,this.oniOSVideoMediaElementInit)),y.remove(this.context,"playing",Ut(this,this.oniOSPlaying)),y.remove(this.context,"complete",Ut(this,this.oniOSComplete)))),super.destroy();}activate(){0!=this.enabled&&1!=this.active&&(this.active=!0,this.state={active:kt.isFullscreen(this.videoElement),toggle:Ut(this,this.toggle)},p.add(this.context,"fullscreen",Ut(this,this.onFullscreen)),this.refreshCallback(this.state));}deactivate(){0!=this.active&&(this.active=!1,this.state=null,p.remove(this.context,"fullscreen",Ut(this,this.onFullscreen)),this.refreshCallback(this.state));}toggle(t){0!=this.enabled&&(null!=t&&(t.stopImmediatePropagation(),t.stopPropagation(),t.preventDefault()),kt.toggle(this.element,this.videoElement,Ut(this,this.toggled)),new p("fullscreen").dispatch(this.context));}toggled(t){if(0==this.enabled)return;let e=kt.isFullscreen(this.videoElement);null!=this.fullscreenOrientationLock&&(e?wt.lock(this.fullscreenOrientationLock):wt.unlock()),this.state.active!=e&&(this.state.active=e,this.refreshCallback(this.state));}onFullscreen(t){0!=this.enabled&&(this.state.active=!this.state.active,this.refreshCallback(this.state));}oniOSVideoMediaElementInit(t){null!=t&&null!=t.data&&this.videoElement!=t.data&&(this.videoElement=t.data,o.isFunction(Ut(s=this.videoElement,s.webkitSupportsPresentationMode))&&o.isFunction(Ut(s=this.videoElement,s.webkitSetPresentationMode))&&(this.videoElement.removeEventListener("webkitpresentationmodechanged",Ut(this,this.oniOSWebkitPresentationModeChanged)),this.videoElement.addEventListener("webkitpresentationmodechanged",Ut(this,this.oniOSWebkitPresentationModeChanged))));}oniOSWebkitPresentationModeChanged(t){0!=this.enabled&&(this.state.active=null!=this.videoElement&&"fullscreen"==this.videoElement.webkitPresentationMode,this.refreshCallback(this.state));}oniOSPlaying(t){0!=this.enabled&&y.add(this.context,"currentTimeChange",Ut(this,this.oniOSCurrentTimeChange));}oniOSCurrentTimeChange(t){null!=t&&null!=t.data&&null!=t.data.media&&null!=t.data.media.mediaPlaybackInfo&&0!=t.data.media.mediaPlaybackInfo.isPlaying&&(this.enabled=1==this.videoElement.webkitSupportsFullscreen,this.enabled?this.activate():this.deactivate(),y.remove(this.context,"currentTimeChange",Ut(this,this.oniOSCurrentTimeChange)));}oniOSComplete(t){0!=this.enabled&&this.deactivate();}}Q.__name__="bs.player.plugin.skin.model.fullscreen.FullscreenModel",Q.__super__=V,Object.assign(Q.prototype,{__class__:Q});class Y extends V{constructor(t,e,s,i,a,n){V._hx_skip_constructor=!0,super(),V._hx_skip_constructor=!1,this._hx_constructor(t,e,s,i,a,n);}_hx_constructor(t,e,s,i,a,n){let l;if(this.pauseSelector=null,this.isPlaying=!1,this.showSkinOnInit=!0,this.skinElement=null,super._hx_constructor(t,e,s,i),this.skinElement=n,null!=a&&this.set_prefix(a),Object.prototype.hasOwnProperty.call(e,"showSkinOnInit"))switch(o.field(e,"showSkinOnInit")){case 0:case"false":case!1:l=!1;break;default:l=!0;}else l=!0;this.showSkinOnInit=l,this.state={css:"show",reset:null},this.state.reset=Ut(this,this.handleReset),m.add(t,"mediaMetadataData",Ut(this,this.onMetadata)),f.add(t,"animateShow",Ut(this,this.onShow)),y.add(t,"playing",Ut(this,this.onPlaying)),y.add(t,"paused",Ut(this,this.onStopped)),y.add(t,"complete",Ut(this,this.onStopped)),g.isMobile()?this.skinElement.addEventListener("touchmove",Ut(this,this.onMove),yt.get_passiveOptions()):this.skinElement.addEventListener("mousemove",Ut(this,this.onMove),yt.get_passiveOptions()),this.refreshCss("show");}set_prefix(t){return this.pauseSelector="."+t+"-hide-pause-on-over",t}destroy(){super.destroy(),g.isMobile()?this.skinElement.removeEventListener("touchmove",Ut(this,this.onMove)):this.skinElement.removeEventListener("mousemove",Ut(this,this.onMove)),m.remove(this.context,"mediaMetadataData",Ut(this,this.onMetadata)),f.remove(this.context,"animateShow",Ut(this,this.onShow)),y.remove(this.context,"playing",Ut(this,this.onPlaying)),y.remove(this.context,"paused",Ut(this,this.onStopped)),y.remove(this.context,"complete",Ut(this,this.onStopped));}refreshCss(t){this.state.css=t,this.refreshCallback(this.state);}handleReset(t){this.isPlaying&&this.startAutohide();}onMove(t){if(!this.isPlaying)return;null!=t.target.closest(this.pauseSelector)?(this.refreshCss("show"),this.stopAutohide()):this.startAutohide();}onMetadata(t){this.isPlaying=!1,this.refreshCss("show"),this.stopAutohide(),this.showSkinOnInit||this.refreshCss("hide-force");}onStopped(t){this.isPlaying=!1,this.refreshCss("show"),this.stopAutohide();}onPlaying(t){this.isPlaying=!0,this.refreshCss("hide"),this.stopAutohide();}onShow(t){this.startAutohide();}startAutohide(){if(this.refreshCss("show"),this.stopAutohide(),!this.isPlaying)return;let t=this;this.animTimer=Lt.delay((function(){t.isPlaying&&(t.refreshCss("hide"),t.stopAutohide());}),100);}stopAutohide(){let t=this.animTimer;null!=t&&t.stop(),this.animTimer=null;}}Y.__name__="bs.player.plugin.skin.model.hide.AutohideModel",Y.__super__=V,Object.assign(Y.prototype,{__class__:Y});class Z extends V{constructor(t,e,s,i){super(t,e,s,i),this.state={type:"css",airplay:{id:"bmp-ico-airplay"},alert:{id:"bmp-ico-alert"},subtitles:{id:"bmp-ico-subtitles"},pip:{id:"bmp-ico-pip"},chromecast:{id:"bmp-ico-chromecast"},copy:{id:"bmp-ico-copy"},playNext:{id:"bmp-ico-play-next"},maximize:{id:"bmp-ico-maximize"},minimize:{id:"bmp-ico-minimize"},menu:{id:"bmp-ico-menu"},audio:{id:"bmp-ico-audio"},pause:{id:"bmp-ico-pause"},play:{id:"bmp-ico-play"},replay:{id:"bmp-ico-replay"},quality:{id:"bmp-ico-quality"},share:{id:"bmp-ico-share",type:"css",code:{id:"bmp-ico-code",group:"share"},mail:{id:"bmp-ico-mail",group:"share"},facebook:{id:"bmp-ico-facebook",group:"share"},twitter:{id:"bmp-ico-twitter",group:"share"},linkedin:{id:"bmp-ico-linkedin",group:"share"}},volume:{id:"bmp-ico-volume"},volume1:{id:"bmp-ico-volume-1"},volume2:{id:"bmp-ico-volume-2"},volumeX:{id:"bmp-ico-volume-x"},close:{id:"bmp-ico-close"},left:{id:"bmp-ico-left"},right:{id:"bmp-ico-right"},up:{id:"bmp-ico-up"},down:{id:"bmp-ico-down"},center:{id:"bmp-ico-center"},vr:{id:"bmp-ico-vr"},gyroscope:{id:"bmp-ico-gyroscope"},zoom:{plus:{id:"bmp-ico-zoom-plus"},minus:{id:"bmp-ico-zoom-minus"},reset:{id:"bmp-ico-zoom-reset"}},playbackRate:{id:"bmp-ico-playback-rate"}};}updateTypesState(t,e){this.state.type=t,this.state.share.type=e,this.refreshCallback(this.state);}}Z.__name__="bs.player.plugin.skin.model.icon.IconModel",Z.__super__=V,Object.assign(Z.prototype,{__class__:Z});class J extends V{constructor(t,e,s,i,a){super(t,e,s,i),this.state={count:0,audio:{hasItems:!1,activate:null},casting:null,fullscreen:null,pictureInPicture:null,quality:{hasItems:!1,activate:null,value:null},subtitles:{hasItems:!1,activate:null},vr:null,playbackRate:{hasItems:!1,items:null,activate:null}};let n=this;this.audio=new R(t,e,(function(t,e){n.menuStateChange({audio:t},e);}),(function(t){n.reportError(t);})),this.casting=new q(t,e,(function(t,e){n.menuStateChange({casting:t},e);}),(function(t){n.reportError(t);})),this.fullscreen=new Q(t,e,(function(t,e){n.menuStateChange({fullscreen:t},e);}),(function(t){n.reportError(t);}),a),this.pip=new et(t,e,(function(t,e){n.menuStateChange({pictureInPicture:t},e);}),(function(t){n.reportError(t);})),this.quality=new nt(t,e,(function(t,e){n.menuStateChange({quality:t},e);}),(function(t){n.reportError(t);})),this.subtitles=new pt(t,e,(function(t,e){n.menuStateChange({subtitles:t},e);}),(function(t){n.reportError(t);})),this.vr=new _t(t,e,(function(t,e){n.menuStateChange({vr:t},e);}),(function(t){n.reportError(t);})),this.playbackRate=new st(t,e,(function(t,e){n.menuStateChange({playbackRate:t},e);}),(function(t){n.reportError(t);}));}menuStateChange(t,e){if(null!=t){let e=0,s=o.fields(t);for(;e<s.length;){let i=s[e];++e,this.state[i]=o.field(t,i);}}let s=0;this.state.quality.hasItems&&(s=1),this.state.subtitles.hasItems&&++s,this.state.audio.hasItems&&++s,null!=this.state.casting&&++s,null!=this.state.pictureInPicture&&++s,null!=this.state.fullscreen&&++s,null!=this.state.vr&&++s,this.state.playbackRate.hasItems&&++s,this.state.count=s,this.refreshCallback(this.state);}destroy(){null!=this.audio&&this.audio.destroy(),null!=this.casting&&this.casting.destroy(),null!=this.fullscreen&&this.fullscreen.destroy(),null!=this.pip&&this.pip.destroy(),null!=this.quality&&this.quality.destroy(),null!=this.subtitles&&this.subtitles.destroy(),null!=this.vr&&this.vr.destroy();}}J.__name__="bs.player.plugin.skin.model.menu.MenuModel",J.__super__=V,Object.assign(J.prototype,{__class__:J});class tt extends V{constructor(t,e,s,i){super(t,e,s,i),this.state=null,f.add(t,"showMessage",Ut(this,this.onOpenEvent)),f.add(t,"closeMessage",Ut(this,this.onCloseEvent)),this.refreshCallback(this.state);}destroy(){super.destroy(),f.remove(this.context,"showMessage",Ut(this,this.onOpenEvent)),f.remove(this.context,"closeMessage",Ut(this,this.onCloseEvent));}close(){new f("closeMessage").dispatch(this.context);}onOpenEvent(t){if(this.state=null,null!=t&&null!=t.data){if(Object.prototype.hasOwnProperty.call(t.data,"type")&&""!=t.data.type)switch(null==this.state&&(this.state={type:{alert:!1,code:!1,normal:!1,text:"normal"}}),t.data.type){case"alert":this.state.type.alert=!0,this.state.type.text="alert";break;case"code":this.state.type.code=!0,this.state.type.text="code";break;case"normal":this.state.type.normal=!0,this.state.type.text="normal";break;default:this.state.type=null;}null!=this.state.type?(Object.prototype.hasOwnProperty.call(t.data,"title")&&""!=t.data.title&&(this.state.title={html:t.data.title}),Object.prototype.hasOwnProperty.call(t.data,"text")&&""!=t.data.text&&(this.state.content={html:t.data.text}),Object.prototype.hasOwnProperty.call(t.data,"textDetails")&&""!=t.data.textDetails&&(null==this.state.content&&(this.state.content={}),this.state.content.text=t.data.textDetails),Object.prototype.hasOwnProperty.call(t.data,"userSingleActionButtonText")&&""!=t.data.userSingleActionButtonText&&Object.prototype.hasOwnProperty.call(t.data,"onUserSingleAction")&&o.isFunction(t.data.onUserSingleAction)&&(this.state.action={icon:this.state.type.code?"copy":null,text:t.data.userSingleActionButtonText,click:t.data.onUserSingleAction}),Object.prototype.hasOwnProperty.call(t.data,"close")&&0==t.data.close?this.state.close=null:this.state.close={click:Ut(this,this.close)},null!=t.data.onAfterShow&&o.isFunction(t.data.onAfterShow)&&(this.onAfterShow=t.data.onAfterShow),null!=t.data.onAfterClose&&o.isFunction(t.data.onAfterClose)&&(this.onAfterClose=t.data.onAfterClose),Object.prototype.hasOwnProperty.call(t.data,"style")&&(this.state.style=o.field(t.data,"style")),this.refreshCallback(this.state,Ut(this,this.afterOpenStateRefresh))):this.refreshCallback(this.state);}else this.refreshCallback(this.state);}afterOpenStateRefresh(t){null!=this.onAfterShow&&this.onAfterShow(),this.onAfterShow=null;}onCloseEvent(t){this.state=null,this.refreshCallback(this.state,Ut(this,this.afterCloseStateRefresh));}afterCloseStateRefresh(t){null!=this.onAfterClose&&this.onAfterClose(),this.onAfterClose=null;}}tt.__name__="bs.player.plugin.skin.model.message.MessageModel",tt.__super__=V,Object.assign(tt.prototype,{__class__:tt});class et extends V{constructor(t,e,s,i){if(super(t,e,s,i),Object.prototype.hasOwnProperty.call(e,"pictureInPictureButtonVisible"))switch(o.field(e,"pictureInPictureButtonVisible")){case 0:case"false":case!1:e.pictureInPictureEnabled=!1;break;default:e.pictureInPictureEnabled=!0;}let a;if(Object.prototype.hasOwnProperty.call(e,"pictureInPictureEnabled"))switch(o.field(e,"pictureInPictureEnabled")){case 0:case"false":case!1:a=!1;break;default:a=!0;}else a=!0;this.enabled=a,this.state=null,this.enabled&&(p.add(t,"pipAvailable",Ut(this,this.onPipAvailable)),p.add(t,"pipEntered",Ut(this,this.onPipEntered)),p.add(t,"pipLeaved",Ut(this,this.onPipLeaved))),this.refreshCallback(this.state);}destroy(){super.destroy(),this.enabled&&(p.remove(this.context,"pipAvailable",Ut(this,this.onPipAvailable)),p.remove(this.context,"pipEntered",Ut(this,this.onPipEntered)),p.remove(this.context,"pipLeaved",Ut(this,this.onPipLeaved)));}onPipAvailable(t){this.isPipAvailable=null!=t&&1==t.data,0!=this.enabled&&(this.isPipAvailable?this.state={active:!1,click:Ut(this,this.dispatchPipToggle)}:this.state=null,this.refreshCallback(this.state));}onPipEntered(t){0!=this.enabled&&(this.state.active=!0,this.refreshCallback(this.state));}onPipLeaved(t){0!=this.enabled&&(this.state.active=!1,this.refreshCallback(this.state));}dispatchPipToggle(t){new p("pipToggle").dispatch(this.context);}}et.__name__="bs.player.plugin.skin.model.pip.PictureInPictureModel",et.__super__=V,Object.assign(et.prototype,{__class__:et});class st extends V{constructor(t,e,s,i){let a;if(super(t,e,s,i),Object.prototype.hasOwnProperty.call(e,"playbackRateEnabled"))switch(o.field(e,"playbackRateEnabled")){case 1:case"true":case!0:a=!0;break;default:a=!1;}else a=!1;this.enabled=a;let n=[.25,.5,.75,1,1.25,1.5,1.75,2],l=Object.prototype.hasOwnProperty.call(e,"playbackRate")?parseFloat(o.field(e,"playbackRate")):null;null==l||isNaN(l)||-1!=n.indexOf(l)||(n=n.concat([l]),n.sort((function(t,e){return t>e?1:-1})));let r=[],h=0;for(;h<n.length;){let t=n[h];++h,r.push({active:1==t,label:1==t?"Normal":""+t,data:""+t});}this.ITEMS=r,this.state={hasItems:!1,items:null,activate:null},this.enabled&&(this.state.hasItems=!0,this.state.items=this.ITEMS,this.state.activate=Ut(this,this.activate)),this.enabled&&(y.add(t,"playbackRate",Ut(this,this.onPlaybackRate)),y.add(t,"videoCastingStart",Ut(this,this.onCastingStart)),y.add(t,"videoCastingEnd",Ut(this,this.onCastingEnd))),this.refreshCallback(this.state);}get_activeRate(){if(null!=this.state&&null!=this.state.items){let t=0,e=this.state.items;for(;t<e.length;){let s=e[t];if(++t,s.active)return parseFloat(s.data)}}return 0}destroy(){super.destroy(),this.enabled&&(y.remove(this.context,"playbackRate",Ut(this,this.onPlaybackRate)),y.remove(this.context,"videoCastingStart",Ut(this,this.onCastingStart)),y.remove(this.context,"videoCastingEnd",Ut(this,this.onCastingEnd)));}onPlaybackRate(t){if(0==t.data)return;if(this.get_activeRate()==t.data||null==this.state.items)return;let e=0,s=this.state.items.length;for(;e<s;){let s=e++,i=t.data,a=parseFloat(this.state.items[s].data);this.state.items[s].active=i==a;}this.refreshCallback(this.state);}onCastingStart(t){let e=this.ITEMS,s=[],i=0;for(;i<e.length;){let t=e[i];++i,parseFloat(t.data)>=.5&&s.push(t);}this.state.items=s,this.refreshCallback(this.state);}onCastingEnd(t){this.state.items=this.ITEMS,this.refreshCallback(this.state);}dispatch(t){let e=this.state.items[t];if(null==e)return;let s=parseFloat(this.state.items[this.state.items.length-1].data),i=Math.max(0,Math.min(s,parseFloat(e.data))),a=new p("setVideoPlaybackRate");a.data=i,a.dispatch(this.context);}activate(t){if(!Object.prototype.hasOwnProperty.call(this.state,"items"))return;null!=t&&(t.stopImmediatePropagation(),t.stopPropagation(),t.preventDefault());let e=h.parseInt(zt.__cast(t.target,HTMLElement).getAttribute("data-item-index"));isNaN(e)||(this.dispatch(e),this.refreshCallback(this.state));}}st.__name__="bs.player.plugin.skin.model.playbackRate.PlaybackRateModel",st.__super__=V,Object.assign(st.prototype,{__class__:st});class it extends V{constructor(t,e,s,i){super(t,e,s,i),this.state={hasNext:!1,currentPos:-1,items:null,playItem:null},this.state.playItem=Ut(this,this.playItem),m.add(t,"mediaMetadataData",Ut(this,this.onMetadataData)),m.add(t,"mediaPlaylistData",Ut(this,this.onPlaylistData)),this.refreshCallback(this.state);}destroy(){super.destroy(),m.remove(this.context,"mediaMetadataData",Ut(this,this.onMetadataData)),m.remove(this.context,"mediaPlaylistData",Ut(this,this.onPlaylistData));}onMetadataData(t){this.state={hasNext:!1,currentPos:-1,items:null,playItem:null},this.state.playItem=Ut(this,this.playItem),this.mediaPlaylist=null,this.refreshCallback(this.state);}onPlaylistData(t){if(null==t||null==t.data)return this.state={hasNext:!1,currentPos:-1,items:null,playItem:null},this.state.playItem=Ut(this,this.playItem),void(this.mediaPlaylist=null);this.mediaPlaylist=E.clone(t.data);let e=null!=this.mediaPlaylist&&this.mediaPlaylist.hasNext();if(this.state.hasNext=e,this.state.currentPos=null!=this.mediaPlaylist?this.mediaPlaylist.currentPos:0,this.state.items=[],null!=this.mediaPlaylist){let t=0,e=this.mediaPlaylist.items;for(;t<e.length;){let s=e[t];++t;let i={},a=this.cleanupCustomParams(o.field(s,"title"));null!=a&&this.copyParams(i,"title",a);let n=this.cleanupCustomParams(o.field(s,"duration"));null!=n&&this.copyParams(i,"duration",n);let l=this.cleanupCustomParams(o.field(s,"splashImages"));null!=l&&this.copyParams(i,"splashImages",l),this.state.items.push(i);}}this.refreshCallback(this.state);}copyParams(t,e,s){if("duration"==e)t[e]={time:s,text:Tt.formatTime(parseFloat(""+h.string(s)))};else if("splashImages"==e){let e=s;null!=e&&e instanceof Array&&e.length>0&&(t.image=St.imageToState(e));}else t[e]=s;}cleanupCustomParams(t){if(null==t||"string"==typeof t||"number"==typeof t)return t;if(t instanceof Array){let e=t,s=[],i=0;for(;i<e.length;)s.push(this.cleanupCustomParams(e[i++]));return s}if(o.isObject(t)){let e=o.copy(t);return Object.prototype.hasOwnProperty.call(e,"customParams")&&o.deleteField(e,"customParams"),e}return t}playItem(t){if(null==this.mediaPlaylist)return;let e=this.mediaPlaylist.items[t];this.mediaPlaylist.currentPos=t,it.play(this.context,e,this.mediaPlaylist);}static play(t,e,s){if(null==e)return;let i=new m("mediaMetadataData");i.data=e,i.dispatch(t);let a=new m("mediaPlaylistData");a.data=s,a.dispatch(t);let n=new m("movieData");n.data=e,n.dispatch(t);let l=new m("audioData");null!=e.audioSets?l.data=e.audioSets:l.data=[],l.dispatch(t);let r=new m("subtitleData");null!=e.subtitlesSets?r.data=e.subtitlesSets:r.data=[],r.dispatch(t),new p("skinPlay").dispatch(t);}}it.__name__="bs.player.plugin.skin.model.playlist.PlaylistModel",it.__super__=V,Object.assign(it.prototype,{__class__:it});class at extends W{constructor(t,e,s,i,a,n){V._hx_skip_constructor=!0,super(),V._hx_skip_constructor=!1,this._hx_constructor(t,e,s,i,a,n);}_hx_constructor(t,e,s,i,a,n){let l=[],r=0;for(;r<3;)++r,l.push(0);this.eventTsRegistry=l,this.popupResizeObserver=null,this.popupRect=null,this.popupElement=null,this.boundsRect=null,this.boundsElement=null,this.handleRect=null,this.handleMoveX=null,this.handleMoveTime=null,this.handleMoveFromTime=null,this.handleElement=null,this.thumbService=null,this.skinRect=null,this.skinElement=null,this.segments=null,this.markers=null,this.thumbnails=null,this.isTrackDown=!1,super._hx_constructor(t,e,s,i),this.skinElement=a,this.skinRect=this.skinElement.getBoundingClientRect(),this.thumbService=n,this.state={time:0,text:Tt.formatTime(0),width:"0",has:{thumb:!1,segments:!1,segment:!1,markers:!1,marker:!1,texts:!1},popup:{active:!1,time:0,text:Tt.formatTime(0),position:"0",width:"0",bounds:{offset:"0px",ctrl:null},ctrl:null},ctrl:null},this.state.ctrl=Ut(this,this.controlHandler),this.state.popup.ctrl=Ut(this,this.controlPopup),this.state.popup.bounds.ctrl=Ut(this,this.controlPopupBounds),v.add(t,"resize",Ut(this,this.onResize)),this.updateState();}destroy(){super.destroy(),v.remove(this.context,"resize",Ut(this,this.onResize)),this.unobservePopupElement();}updateState(t){super.updateState(t),this.state.time=this.current.position,this.state.text=Tt.formatTime(this.state.time);let e=this.state.time/this.duration,s=isNaN(e)||!isFinite(e);this.state.width=s?"0%":Math.max(0,Math.min(100,100*e))+"%",this.state.has.texts=this.state.has.marker||this.state.has.segment,this.refreshSegments(this.state.time),this.refreshCallback(this.state);}onResize(t){if(null!=this.skinElement){let t=null;t=this.skinElement.getBoundingClientRect(),this.skinRect=t;}this.updatePopupSizes();}controlHandler(t){if(null==t)return this.handleElement.removeEventListener("touchstart",Ut(this,this.handle),!1),this.handleElement.removeEventListener("touchmove",Ut(this,this.handle),!1),this.handleElement.removeEventListener("touchend",Ut(this,this.handle),!1),this.handleElement.removeEventListener("mousedown",Ut(this,this.handle),!1),this.handleElement.removeEventListener("mousemove",Ut(this,this.handle),!1),this.handleElement.removeEventListener("mouseup",Ut(this,this.handle),!1),this.handleElement=null,void(this.handleRect=null);this.handleElement=t;let e=null;e=this.handleElement.getBoundingClientRect(),this.handleRect=e,this.handleElement.addEventListener("touchstart",Ut(this,this.handle),yt.get_passiveOptions()),this.handleElement.addEventListener("touchmove",Ut(this,this.handle),yt.get_passiveOptions()),this.handleElement.addEventListener("touchend",Ut(this,this.handle),yt.get_passiveOptions()),this.handleElement.addEventListener("mousedown",Ut(this,this.handle),yt.get_passiveOptions()),this.handleElement.addEventListener("mousemove",Ut(this,this.handle),yt.get_passiveOptions()),this.handleElement.addEventListener("mouseup",Ut(this,this.handle),yt.get_passiveOptions());}dispatchSeek(t){let e=new p("skinSeek");e.data={seekedPosition:t,seekSource:"progress"},e.dispatch(this.context);}handle(t){if(!(this.duration<=0))switch(t.type){case"blur":case"mouseleave":case"mouseup":case"touchend":if(this.eventAlreadyTriggered(2,t))return;let e=this.skinElement,s=Ut(this,this.handle);g.enableHtmlSelection(),window.document.removeEventListener("mouseup",s),window.document.removeEventListener("mousemove",s),window.document.removeEventListener("mouseleave",s),window.document.removeEventListener("blur",s),e.removeEventListener("mouseup",s),e.removeEventListener("mousemove",s),e.removeEventListener("blur",s),g.isMobile()&&(window.document.removeEventListener("touchend",s),e.removeEventListener("touchend",s)),this.state.popup.active=!1;let i=t.target;this.skinElement.contains(i)&&this.isTrackDown?this.handleMoveEnd(t):(this.current.position=this.handleMoveFromTime,this.updateState()),this.handleMoveFromTime=null,this.isTrackDown=!1;break;case"mousedown":case"touchstart":if(this.isTrackDown)return;if(this.eventAlreadyTriggered(0,t))return;let a=this.skinElement,n=Ut(this,this.handle);g.disableHtmlSelection(),window.document.addEventListener("mouseup",n,yt.get_passiveOptions()),window.document.addEventListener("mousemove",n,yt.get_passiveOptions()),window.document.addEventListener("mouseleave",n,yt.get_passiveOptions()),window.document.addEventListener("blur",n,yt.get_passiveOptions()),a.addEventListener("mouseup",n,yt.get_passiveOptions()),a.addEventListener("mousemove",n,yt.get_passiveOptions()),a.addEventListener("blur",n,yt.get_passiveOptions()),g.isMobile()&&(window.document.addEventListener("touchend",n,yt.get_passiveOptions()),a.addEventListener("touchend",n,yt.get_passiveOptions())),this.handleMoveFromTime=this.current.position,this.state.popup.active=!0,this.handleMoving(t),this.isTrackDown=!0;break;case"mousemove":case"touchmove":if(this.eventAlreadyTriggered(1,t))return;this.handleMoving(t);break;default:return}}eventAlreadyTriggered(t,e){let s=e.timeStamp;if(null==s&&(s=(new Date).getTime()),this.eventTsRegistry[t]==s)return !0;let i=0,a=this.eventTsRegistry.length;for(;i<a;){let e=i++;this.eventTsRegistry[e]=t==e?s:0;}return !1}handleMoving(t){if(null==this.duration)return;this.updatePopupSizes();let e=0;t instanceof MouseEvent&&(e=zt.__cast(t,MouseEvent).clientX);let s,i=window;if(Object.prototype.hasOwnProperty.call(i,"TouchEvent")&&t instanceof TouchEvent){let s=t;if(s.touches.length>0){e=s.touches.item(0).clientX;}}if(this.handleMoveX=e,this.handleMoveTime=this.calculateProgressTime(),null!=this.handleMoveTime){if(this.isTrackDown&&(this.current.position=this.handleMoveTime,this.updateState()),this.updatePopupData(this.handleMoveTime),null==t)s=null;else {let e=t.target;s=null==e?null:e.dataset;}this.searchForMarkerByEvent(s),this.searchForSegmentByEvent(s),this.updateState();}}handleMoveEnd(t){this.isSeekingPossible()&&(this.handleMoveTime<=0||(this.current.position=this.handleMoveTime,this.dispatchSeek(this.current.position),this.handleMoveTime=null,this.handleMoveX=null));}onSeekingStart(t){null!=t&&null!=t.data&&t.data.currentTime>=0&&(this.current.position=t.data.currentTime),this.current.position>0&&(this.hasPlaybackStarted=!0),this.updateState();}onCurrentTimeChange(t){let e=this.current.position;super.onCurrentTimeChange(t),this.isTrackDown||this.current.position==e||(this.isDvr&&this.onDurationChange(t),this.updateState(!0));}onDurationChange(t){this.updateOnEvent(t);}onBufferingEnd(t){this.updateOnEvent(t);}onPlaying(t){this.updateOnEvent(t);}updateOnEvent(t){this.updateDurationOnEvent(t,!1),this.updateSegments(this.duration),this.updateMarkers(this.duration),this.updateState();}onMetadataData(t){super.onMetadataData(t),this.resetThumbs(),this.resetSegments(),this.resetMarkers();let e=this.monitor.currentMedia;if(null==e)return void this.updateState();let s=e.progress;if(null==s)return void this.updateState();let i=s.thumbnails;null!=i?this.onThumbsMetadataData(i):this.resetThumbs(),null!=s.segmentsUrl?this.reqSegmentsVtt(s.segmentsUrl):null!=s.segments?"string"==typeof s.segments?this.reqSegmentsVtt(s.segments):this.parseSegmentsObject(s.segments):this.resetSegments(),null!=s.markersUrl?this.reqMarkersVtt(s.markersUrl):null!=s.markers?"string"==typeof s.markers?this.reqMarkersVtt(s.markers):this.parseMarkersObject(s.markers):this.resetMarkers(),this.updateState();}resetThumbs(){o.deleteField(this.state,"thumb"),this.state.has.thumb=!1,this.thumbnails=null,null!=this.thumbService&&this.thumbService.reset();}onThumbsMetadataData(t){let e=t.url;if(null==e)return void console.error("Cannot load external file. "+e);if(e.lastIndexOf("vtt")<0)return void console.error("Not .vtt file format. "+e+".");let s=e;if(null==t.imageBaseUrl){let t=e.split("/");t.pop(),s=t.join("/");}let i=new c(e);i.onError=Ut(this,this.reportError);let a=this;i.onData=function(t){a.parseThumbs(s,t);},i.request();}parseThumbs(t,e){null!=t&&null!=e&&(this.thumbnails=new D(t).parse(e));}searchForThumbByTime(t){if(null!=this.thumbnails){let e=null,s=this.thumbnails.entries,i=0;for(;i<s.length;){let a=s[i];if(++i,t>=a.showTime&&t<=a.hideTime){e={url:a.source.url,x:a.source.x,y:a.source.y,w:a.source.w,h:a.source.h,style:{backgroundImage:"url("+a.source.url+")",backgroundPosition:"-"+a.source.x+"px -"+a.source.y+"px",width:a.source.w+"px",height:a.source.h+"px"}};break}}this.updateStateThumb(e);}else null!=this.thumbService?this.thumbService.searchForThumbByTime(t,Ut(this,this.thumbServiceResolve)):this.updateStateThumb(null);}thumbServiceResolve(t){null!=t?(this.updateStateThumb({url:t.url,x:0,y:0,w:t.width,h:t.height,style:{backgroundImage:"url("+t.url+")",backgroundPosition:"0 0",width:t.width+"px",height:t.height+"px"}}),this.updateState(),this.updatePopupSizes(),this.correctPopupPosition()):this.updateStateThumb(null),this.updateState();}updateStateThumb(t){this.state.thumb=t,this.state.has.thumb=null!=this.state.thumb,null==this.state.thumb&&o.deleteField(this.state,"thumb"),this.state.has.thumb?this.state.popup.width=this.state.thumb.w+"px":this.state.popup.width=null;}resetSegments(){o.deleteField(this.state,"segment"),this.state.has.segment=!1,o.deleteField(this.state,"segments"),this.state.has.segments=!1,this.segments=null;}reqSegmentsVtt(t){let e=new c(t);e.onError=Ut(this,this.reportError),e.onData=Ut(this,this.parseSegmentsVtt),e.request();}parseSegmentsVtt(t){"string"==typeof t?(this.segments=(new L).parse(t),this.updateSegments(this.duration)):console.error("progress.segmentsUrl must be string");}parseSegmentsObject(t){if(!(t instanceof Array))return void console.error("progress.segments must be array");this.segments=[];let e,s=0,i=0,a=0,n=t,l=0;for(;l<n.length;){let t=n[l];++l,Object.prototype.hasOwnProperty.call(t,"duration")&&null!=t.duration&&(s=parseFloat(t.duration),null==s||s<=0||(e=new I,a=i+s,e.showTime=i,e.hideTime=a,e.duration=s,e.text=t.label,this.segments.push(e),i=e.hideTime));}this.updateSegments(this.duration),this.updateState();}searchForSegmentByTime(t){let e=null;if(null!=this.state.segments){let s=this.state.segments,i=0;for(;i<s.length;){let a=s[i];if(++i,t>a.time.show&&t<a.time.hide){e=a;break}}}this.state.segment=e,this.state.has.segment=null!=this.state.segment,null==this.state.segment&&o.deleteField(this.state,"segment");}searchForSegmentByEvent(t){return null!=t&&Object.prototype.hasOwnProperty.call(t,"segmentIndex")&&(this.state.segment=this.state.segments[o.field(t,"segmentIndex")],this.state.has.segment=null!=this.state.segment),this.state.has.segment}updateSegments(t){if(null!=this.segments){if(!isFinite(t)||t<=0)return;let e,s,i,a,n,l,r=[],o=this.segments,h=0;for(;h<o.length;){let u=o[h],c=h++;a=u.showTime,n=u.duration,l=u.hideTime,i=0==c?0:this.segments[c-1].hideTime;let d=(a-i)/t;e={type:"space",time:{show:i,duration:a-i,hide:a},width:isNaN(d)||!isFinite(d)?"0%":Math.max(0,Math.min(100,100*d))+"%",progressWidth:isNaN(0)||!isFinite(0)?"0%":Math.max(0,Math.min(100,0))+"%"},e.time.duration>0&&r.push(e);let p=n/t;if(s={type:"item",time:{show:a,duration:n,hide:l},text:u.text,width:isNaN(p)||!isFinite(p)?"0%":Math.max(0,Math.min(100,100*p))+"%",progressWidth:isNaN(0)||!isFinite(0)?"0%":Math.max(0,Math.min(100,0))+"%"},t>0&&l>t){s.time.duration=t-a,s.time.hide=t;let e=(t-a)/t;s.width=isNaN(e)||!isFinite(e)?"0%":Math.max(0,Math.min(100,100*e))+"%";}if(s.time.duration>0&&r.push(s),c==this.segments.length-1){let i=(t-s.time.hide)/t;e={type:"space",time:{show:s.time.hide,duration:t-s.time.hide,hide:t},width:isNaN(i)||!isFinite(i)?"0%":Math.max(0,Math.min(100,100*i))+"%",progressWidth:isNaN(0)||!isFinite(0)?"0%":Math.max(0,Math.min(100,0))+"%"},e.time.duration>0&&r.push(e);}}this.state.segments=r,this.state.has.segments=this.state.segments.length>0;}else this.resetSegments();}hasSegments(){return !(!Object.prototype.hasOwnProperty.call(this.state,"segments")||null==this.state.segments)&&this.state.segments instanceof Array}refreshSegments(t){if(!this.hasSegments())return;let e=0,s=this.state.segments;for(;e<s.length;){let i=s[e];++e;let a="0%";if(i.time.show<=t&&i.time.hide>=t){let e=(t-i.time.show)/i.time.duration;a=isNaN(e)||!isFinite(e)?"0%":Math.max(0,Math.min(100,100*e))+"%";}else i.time.hide<=t&&(a="100%");i.progressWidth!=a&&(i.progressWidth=a);}}resetMarkers(){this.state.has.marker=!1,o.deleteField(this.state,"marker"),this.state.has.markers=!1,o.deleteField(this.state,"markers"),this.markers=null;}reqMarkersVtt(t){let e=new c(t);e.onError=Ut(this,this.reportError),e.onData=Ut(this,this.parseMarkersVtt),e.request();}parseMarkersVtt(t){null!=t&&(this.markers=(new A).parse(t),this.updateMarkers(this.duration));}parseMarkersObject(t){if(!(t instanceof Array))return void console.error("progress.segments must be array");this.markers=[];let e,s=0,i=t,a=0;for(;a<i.length;){let t=i[a];++a,Object.prototype.hasOwnProperty.call(t,"time")&&null!=t.time&&(s=parseFloat(t.time),null==s||s<=0||(e=new M,e.showTime=s,e.text=Object.prototype.hasOwnProperty.call(t,"label")?o.field(t,"label"):null,this.markers.push(e)));}this.updateMarkers(this.duration),this.updateState();}searchForMarkerByTime(t){let e=null;if(null!=this.state.markers){let s=this.state.markers,i=0;for(;i<s.length;){let a=s[i];if(++i,a.time==t){e=a;break}}}this.state.marker=e,this.state.has.marker=null!=this.state.marker,null==this.state.marker&&o.deleteField(this.state,"marker");}searchForMarkerByEvent(t){return null!=t&&Object.prototype.hasOwnProperty.call(t,"markerIndex")&&(this.state.marker=this.state.markers[o.field(t,"markerIndex")],this.state.has.marker=null!=this.state.marker),this.state.has.marker}updateMarkers(t){let e;if(null!=this.markers){if(!isFinite(t)||t<=0)return;let s=[],i=0,a=this.markers;for(;i<a.length;){let n=a[i];++i;let l=n.showTime/t;e=isNaN(l)||!isFinite(l)?"0%":Math.max(0,Math.min(100,100*l))+"%",s.push({time:n.showTime,text:n.text,left:e});}this.state.markers=s,this.state.has.markers=this.state.markers.length>0;}else this.resetMarkers();}controlPopup(t){if(null==t)return this.unobservePopupElement(),this.popupElement=null,void(this.popupRect=null);this.popupElement=t;let e=null;e=this.popupElement.getBoundingClientRect(),this.popupRect=e,this.observePopupElement();}controlPopupBounds(t){if(null==t)return this.boundsElement=null,void(this.boundsRect=null);if(this.boundsElement=t,null!=this.boundsElement){let t=null;t=this.boundsElement.getBoundingClientRect(),this.boundsRect=t;}}observePopupElement(){let t=this,e=window;Object.prototype.hasOwnProperty.call(e,"ResizeObserver")&&(this.popupResizeObserver=new ResizeObserver((function(){let e=null;e=t.popupElement.getBoundingClientRect(),t.popupRect=e,t.correctPopupPosition();})),this.popupResizeObserver.observe(this.popupElement));}unobservePopupElement(){null!=this.popupResizeObserver&&this.popupResizeObserver.disconnect();}updatePopupData(t){if(null==t)return;let e=t/this.duration,s=isNaN(e)||!isFinite(e);if(this.state.popup.position=s?"0%":Math.max(0,Math.min(100,100*e))+"%",this.state.popup.bounds.offset="0px",this.isDvr){let e=this.duration-t,s={time:-e,text:"-"+Tt.formatTime(e)};if(this.isDvrWallTimeMode&&this.monitor.currentMedia instanceof x&&this.duration>0){let e=this.monitor.currentMedia;if(e.dvrWindowLength>0&&e.dvrWindowLiveEdge>0){let i={time:0,text:Tt.formatDateTime(new Date(1e3*(e.dvrWindowLiveEdge-e.dvrWindowLength*(1-t/this.duration))),0)};null!=i&&(s=i);}}this.state.popup.time=s.time,this.state.popup.text=s.text;}else this.state.popup.time=t,this.state.popup.text=Tt.formatTime(t),this.searchForThumbByTime(t),this.searchForMarkerByTime(t),this.searchForSegmentByTime(t);this.correctPopupPosition();}correctPopupPosition(){if(null==this.popupRect)return;let t=this.popupRect.width/2,e=this.handleMoveX-this.boundsRect.left,s=this.handleMoveX-this.handleRect.left;if(e<t){let e=null!=this.boundsRect?this.handleRect.left-this.boundsRect.left:0,i=Math.abs(t-e);this.state.popup.position=i+"px",this.state.popup.bounds.offset=s-i+"px";}else if(null!=this.boundsRect&&e+t>this.boundsRect.width){let e=this.boundsRect.left-this.handleRect.left,i=this.boundsRect.width-this.handleRect.width,a=this.boundsRect.width-(e+i)-t;this.state.popup.position=a+"px",this.state.popup.bounds.offset=s-a+"px";}else this.state.popup.bounds.offset="0px";}updatePopupSizes(){if(null!=this.handleElement){let t=null;t=this.handleElement.getBoundingClientRect(),this.handleRect=t;}if(null!=this.boundsElement){let t=null;t=this.boundsElement.getBoundingClientRect(),this.boundsRect=t;}if(null!=this.popupElement){let t=null;t=this.popupElement.getBoundingClientRect(),this.popupRect=t;}}calculateProgressTime(){if(null==this.handleMoveX||null==this.handleRect)return 0;let t=0|this.handleRect.left,e=0|this.handleRect.width,s=(this.handleMoveX-t)/e*this.duration;return s>this.duration&&(s=0|this.duration),s<0&&(s=0),s}}at.__name__="bs.player.plugin.skin.model.progress.ProgressModel",at.__super__=W,Object.assign(at.prototype,{__class__:at});class nt extends V{constructor(t,e,s,i){V._hx_skip_constructor=!0,super(),V._hx_skip_constructor=!1,this._hx_constructor(t,e,s,i);}_hx_constructor(t,e,s,i){let a;if(this.activeQualityData="-1",super._hx_constructor(t,e,s,i),Object.prototype.hasOwnProperty.call(e,"qualitySelectionEnabled"))switch(o.field(e,"qualitySelectionEnabled")){case 0:case"false":case!1:a=!1;break;default:a=!0;}else a=!0;this.enabled=a,this.state={hasItems:!1,activate:null,value:null},this.enabled&&(this.state.activate=Ut(this,this.activate)),this.enabled&&(m.add(t,"videoQualityData",Ut(this,this.onQualityData)),m.add(t,"videoQualityPlaybackLevelChange",Ut(this,this.onQualityPlaybackLevelChange)),p.add(t,"videoQualityHasChanged",Ut(this,this.onQualityChange))),this.refreshCallback(this.state);}destroy(){super.destroy(),this.enabled&&(m.remove(this.context,"videoQualityData",Ut(this,this.onQualityData)),m.remove(this.context,"videoQualityPlaybackLevelChange",Ut(this,this.onQualityPlaybackLevelChange)),p.remove(this.context,"videoQualityHasChanged",Ut(this,this.onQualityChange)));}dispatch(t){let e=new p("requestVideoQualityChange");e.data=t.data,e.dispatch(this.context);}activate(t){if(0==this.enabled)return;null!=t&&(t.stopImmediatePropagation(),t.stopPropagation(),t.preventDefault());let e=h.parseInt(zt.__cast(t.target,HTMLElement).getAttribute("data-item-index"));isNaN(e)||this.dispatch(this.state.items[e]);}onQualityPlaybackLevelChange(t){let e=""+t.data;if(!this.state.hasItems)return;let s=this.findItemByData(e);this.activeQualityData==e?this.setAutoSubLabel(null):this.setAutoSubLabel("("+s.label+")"),this.state.value=s.label,this.refreshCallback(this.state);}setAutoSubLabel(t){let e=0,s=this.state.items;for(;e<s.length;){let i=s[e];if(++e,"-1"==i.data){i.sublabel=t;break}}}findItemByData(t){let e=0,s=this.state.items;for(;e<s.length;){let i=s[e];if(++e,i.data==t)return i}return null}onQualityData(t){let e=t.data;this.items=[];let s=0;for(;s<e.length;){let t=e[s];++s,t.label=Tt.capilizeFirstLetter(t.label),this.items.push(t);}0!=this.enabled&&(this.updateStateItems(),this.refreshCallback(this.state));}updateStateItems(){this.state.hasItems=null!=this.items&&this.items.length>0,this.state.hasItems&&(this.state.items=this.items);}updateActiveQuality(){if(!this.state.hasItems||null==this.activeQualityData)return;let t=0,e=this.state.items;for(;t<e.length;){let s=e[t];++t,s.active=o.field(s,"data")==this.activeQualityData;}}onQualityChange(t){this.activeQualityData=t.data,0!=this.enabled&&(this.updateActiveQuality(),this.refreshCallback(this.state));}}nt.__name__="bs.player.plugin.skin.model.quality.QualityModel",nt.__super__=V,Object.assign(nt.prototype,{__class__:nt});class lt extends V{constructor(t,e,s,i){super(t,e,s,i);let a,n=this;if(this.openEmbedCodeWindow=function(s){null!=s&&(s.stopImmediatePropagation(),s.stopPropagation(),s.preventDefault()),n.beforeEmbedWindowOpen(),bt.showWindow(t,e,Ut(n,n.afterEmbedWindowClose));},Object.prototype.hasOwnProperty.call(e,"shareButtons")){let t=o.field(e,"shareButtons");a=null!=t&&"string"==typeof t&&""!=u.trim(t)?t.toLowerCase():null;}else a=null;this.shareButtons=a,this.parse();}openEmbedCodeWindow(t){}destroy(){super.destroy();}parse(){this.state=null,this.containButton("embed")&&(null==this.state&&(this.state={}),this.state.embed={click:Ut(this,this.openEmbedCodeWindow)}),this.containButton("mail")&&(null==this.state&&(this.state={}),this.state.email={click:function(t){null!=t&&(t.stopImmediatePropagation(),t.stopPropagation(),t.preventDefault()),xt.shareViaMail(t);}}),this.containButton("facebook")&&(null==this.state&&(this.state={}),this.state.facebook={click:function(t){null!=t&&(t.stopImmediatePropagation(),t.stopPropagation(),t.preventDefault()),xt.shareOnFacebook(t);}}),this.containButton("twitter")&&(null==this.state&&(this.state={}),this.state.twitter={click:function(t){null!=t&&(t.stopImmediatePropagation(),t.stopPropagation(),t.preventDefault()),xt.shareOnTwitter(t);}}),this.containButton("linkedin")&&(null==this.state&&(this.state={}),this.state.linkedin={click:function(t){null!=t&&(t.stopImmediatePropagation(),t.stopPropagation(),t.preventDefault()),xt.shareOnLinkedIn(t);}}),this.refreshCallback(this.state);}beforeEmbedWindowOpen(){}afterEmbedWindowClose(){}containButton(t){let e=!1;return null!=this.shareButtons&&"string"==typeof this.shareButtons&&(e=this.shareButtons.indexOf(rt.toString(t))>-1),e}}lt.__name__="bs.player.plugin.skin.model.share.ShareModel",lt.__super__=V,Object.assign(lt.prototype,{__class__:lt});class rt{static toString(t){switch(t){case"embed":return "embed";case"facebook":return "facebook";case"linkedin":return "linkedin";case"mail":return "mail";case"twitter":return "twitter";default:return null}}}class ot extends V{constructor(t,e,s,i,a,n){V._hx_skip_constructor=!0,super(),V._hx_skip_constructor=!1,this._hx_constructor(t,e,s,i,a,n);}_hx_constructor(t,e,s,i,a,n){this.resizeObserver=null,this.BREAKPOINT_PX=[0,320,576,768,992,1200,1400],this.BREAKPOINT_KEYS=["xxs","xs","sm","md","lg","xl","xxl"],this.BREAKPOINT_LENGTH=7,super._hx_constructor(t,e,s,i),this.observeElement=n,this.cssPrefix=a,this.state={width:NaN,height:NaN,current:"xxs",gt:{xxs:!0,xs:!1,sm:!1,md:!1,lg:!1,xl:!1,xxl:!1},lt:{xxs:!1,xs:!0,sm:!0,md:!0,lg:!0,xl:!0,xxl:!0}};let l=this.observeElement.ownerDocument;"complete"==l.readyState?this.onReady():l.addEventListener("readystatechange",Ut(this,this.onReady));}set_prefix(t){return this.cssPrefix=t,this.update(),this.refreshCallback(this.state),this.cssPrefix}destroy(){super.destroy(),this.observeElement.ownerDocument.removeEventListener("readystatechange",Ut(this,this.onReady)),null!=this.resizeObserver&&this.resizeObserver.disconnect(),null!=this.timer&&this.timer.stop();}onReady(t){this.observeElement.ownerDocument.removeEventListener("readystatechange",Ut(this,this.onReady)),this.observe();}observe(){let t=window;if(Object.prototype.hasOwnProperty.call(t,"ResizeObserver"))return this.resizeObserver=new ResizeObserver(Ut(this,this.onResizeObserver)),void this.resizeObserver.observe(this.observeElement);let e=this,s=function(){let t=null;t=e.observeElement.getBoundingClientRect();let s=t;e.updateSize(s.width,s.height);};s(),this.timer=new Lt(500),this.timer.run=s;}onResizeObserver(t){let e=NaN,s=NaN,i=0;for(;i<t.length;){let a=t[i];if(++i,a.contentRect)e=a.contentRect.width,s=a.contentRect.height;else if(a.contentBoxSize){let t=a.contentBoxSize instanceof Array?a.contentBoxSize[0]:a.contentBoxSize;e=t.inlineSize,s=t.blockSize;}}let a=e,n=s;a<1||n<1||this.updateSize(a,n);}updateSize(t,e){let s=!1;if(this.state.width!=t&&(this.state.width=t,s=!0),this.state.height!=e&&(this.state.height=e,s=!0),s){this.update(),this.refreshCallback(this.state);let t=new v("resize");t.data=this.state,t.dispatch(this.context);}}update(){let t="",e=[],s=[],i=NaN,a="",n="",l="",r=0,o=this.BREAKPOINT_LENGTH;for(;r<o;){let o=r++;t=this.BREAKPOINT_KEYS[o],i=this.BREAKPOINT_PX[o],n=this.cssPrefix+"-gt-"+t,l=this.cssPrefix+"-lt-"+t,s.push(this.cssPrefix+"-is-"+t),i<this.state.width?(this.state.gt[t]=!0,this.state.lt[t]=!1,a=t,e.push(n),s.push(l)):(this.state.gt[t]=!1,this.state.lt[t]=!0,e.push(l),s.push(n));}e.push(this.cssPrefix+"-is-"+a),this.state.current=a,this.observeElement.classList.remove(...s),this.observeElement.classList.add(...e);}}ot.__name__="bs.player.plugin.skin.model.size.SizeModel",ot.__super__=V,Object.assign(ot.prototype,{__class__:ot});class ht extends V{constructor(t,e,s,i){super(t,e,s,i),this.state={ctrl:Ut(this,this.ctrl)},this.refreshCallback(this.state);}renderHtml(t){}ctrl(t){null!=t&&this.renderHtml(t);}}ht.__name__="bs.player.plugin.skin.model.spinner.SpinnerModel",ht.__super__=V,Object.assign(ht.prototype,{__class__:ht});class ut extends W{constructor(t,e,s,i){V._hx_skip_constructor=!0,super(),V._hx_skip_constructor=!1,this._hx_constructor(t,e,s,i);}_hx_constructor(t,e,s,i){this.seekFromPosition=NaN,this.hasShareButtons=!1,super._hx_constructor(t,e,s,i),this.state={show:{start:!1,actions:!1,state:!1,buttons:!1,end:!1},can:{backward:!1,forward:!1},start:{type:"image"},actions:{seek:{offset:0,animate:!1,countBackward:null,countForward:null,backward:null,forward:null,reset:null},btns:{animate:!1,enabled:!1,countBackward:null,countForward:null,seekBackward:null,seekForward:null},click:null,reset:null},state:{type:"standard"},end:{type:"standard",playNext:null}};let a=this;this.state.actions.seek.countBackward=function(t){a._handleSeekCount(-1,"splash",t);};let n=this;this.state.actions.seek.countForward=function(t){n._handleSeekCount(1,"splash",t);};let l=this;this.state.actions.seek.backward=function(t){l._handleSeekEmit(-1,"splash",t);};let r=this;this.state.actions.seek.forward=function(t){r._handleSeekEmit(1,"splash",t);},this.state.actions.seek.reset=Ut(this,this._handleActionsSeekReset);let h=this;this.state.actions.btns.countBackward=function(t){h._handleSeekCount(-1,"splashButton",t);};let c=this;this.state.actions.btns.countForward=function(t){c._handleSeekCount(1,"splashButton",t);};let d=this;this.state.actions.btns.seekBackward=function(t){d._handleSeekEmit(-1,"splashButton",t);};let f,g=this;if(this.state.actions.btns.seekForward=function(t){g._handleSeekEmit(1,"splashButton",t);},this.state.actions.click=Ut(this,this._handleActionsClick),this.state.actions.reset=Ut(this,this._handleActionsReset),this.state.end.playNext=Ut(this,this.playNext),Object.prototype.hasOwnProperty.call(e,"shareButtons")){let t=o.field(e,"shareButtons");f=null!=t&&"string"==typeof t&&""!=u.trim(t)?t.toLowerCase():null;}else f=null;this.hasShareButtons=null!=f,this.parseVars(e),m.add(t,"mediaPlaylistData",Ut(this,this.onPlaylistData)),p.add(t,"skinSeek",Ut(this,this.onSeekEvent)),this.updateState();}destroy(){super.destroy(),m.remove(this.context,"mediaPlaylistData",Ut(this,this.onPlaylistData)),p.remove(this.context,"skinSeek",Ut(this,this.onSeekEvent)),this.cleanEndState();}onSeekEvent(t){let e,s=t.data.seekSource,i=!1,a=Math.round(t.data.seekedPosition-this.seekFromPosition);switch(this.state.actions.seek.offset!=a&&(this.state.actions.seek.offset=a,i=!0),s){case"jsapi":case"keyboard":case"splash":e=!0;break;default:e=!1;}if(e){let t=this.seekFromPosition;isNaN(t)&&(this.seekFromPosition=this.current.position);}else this.seekFromPosition=NaN,0!=this.state.actions.seek.offset&&(this.state.actions.seek.offset=0,i=!0);this.state.actions.seek.animate!=e&&(this.state.actions.seek.animate=e,i=!0);let n="splashButton"==s;this.state.actions.btns.animate!=n&&(this.state.actions.btns.animate=n,i=!0),i&&this.updateState();}_handleSeekCount(t,e,s){let i=null!=s.detail&&Object.prototype.hasOwnProperty.call(s.detail,"count")?o.field(s.detail,"count"):1;if(0==i)return void this._handleActionsSeekReset();let a="splashButton"==e?0:1,n=!1;if(i>a){let e=Math.round(10*Math.max(1,i-a))*t;this.state.actions.seek.offset!=e&&(this.state.actions.seek.offset=e,n=!0);}let l="splash"==e;this.state.actions.seek.animate!=l&&(this.state.actions.seek.animate=l,n=!0);let r="splashButton"==e;this.state.actions.btns.animate!=r&&(this.state.actions.btns.animate=r,n=!0),n&&this.updateState();}_handleSeekEmit(t,e,s){let i=null!=s.detail&&Object.prototype.hasOwnProperty.call(s.detail,"count")?o.field(s.detail,"count"):1;if(null==i||isNaN(i))return;let a=Math.round(10*Math.max(1,i-("splashButton"==e?0:1)))*t;if(isNaN(a))return;let n=Math.max(0,Math.min(this.get_maxDuration(),this.current.position+a));if(isNaN(n))return;null!=s&&(s.stopImmediatePropagation(),s.stopPropagation(),s.preventDefault());let l=new p("skinSeek");l.data={seekedPosition:n,seekSource:e},l.dispatch(this.context);}_handleActionsSeekReset(){this.seekFromPosition=NaN,this.state.actions.seek.offset=0,this.updateState();}_handleActionsClick(t){if(null!=t&&(t.stopImmediatePropagation(),t.stopPropagation(),t.preventDefault()),!this.state.show.buttons)return this.state.actions.btns.enabled?void new p("skinPlayPause").dispatch(this.context):(this.state.actions.btns.enabled=!0,void this.updateState());new p("skinPlayPause").dispatch(this.context);}_handleActionsReset(){this.state.actions.btns.enabled&&(this.state.actions.btns.enabled=!1,this.updateState());}parseVars(t){let e=null;Object.prototype.hasOwnProperty.call(t,"startSplash")&&(e=o.field(t,"startSplash")),null!=e&&(this.state.start.type="image");let s=null;Object.prototype.hasOwnProperty.call(t,"endSplash")&&(s=o.field(t,"endSplash"));let i=s;if(null!=i)if(null==i)this.state.end.type="standard";else switch(i){case"countdown":this.state.end.type="countdown";break;case"share":case"social":this.state.end.type=this.hasShareButtons?"share":"standard";break;case"tiles":this.state.end.type="tiles";break;default:this.state.end.type="standard";}}updateState(t){super.updateState(t);let e=!(this.isComplete||this.isSeeking||this.isBuffering||this.duration>1&&!(this.current.time<this.duration));this.state.show.start=e&&!this.isPlaying&&!this.hasPlaybackStarted&&null!=this.state.start.image&&null!=this.state.start.image.url,this.state.show.state=this.isInited&&e,this.state.show.end=!this.isPlaying&&this.isComplete&&!this.isSeeking&&!this.isBuffering,this.state.show.actions=this.isInited&&!this.state.show.end,this.state.show.buttons=this.state.show.state&&this.isInited&&!this.isPlaying||this.isPaused,this.state.can.backward=this.current.position>0,this.state.can.forward=this.duration>1&&this.current.position<this.duration,this.refreshCallback(this.state);}onMetadataData(t){this.hasPlaybackStarted=!1,this.cleanEndState();let e=this.monitor.currentMedia;null!=e&&null!=e.splashImages&&e.splashImages.length>0?this.state.start.image=St.imageToState(e.splashImages):o.deleteField(this.state,"image"),super.onMetadataData(t),this.checkEndStateThankYouImage();}onSeekingEnd(t){let e;if(1==this.state.show.end)switch(this.state.end.type){case"countdown":e=null==this.state.end.countdown||null==this.state.end.standard;break;case"image":e=null==this.state.end.image;break;case"reload":case"standard":default:e=null==this.state.end.standard;break;case"share":case"social":e=null==this.state.end.share;break;case"tiles":e=null==this.state.end.tiles||null==this.state.end.standard;}else e=!1;e?this.refreshEndState():this.updateState();}cleanEndState(){null!=this.tiles&&this.tiles.destroy(),this.tiles=null,null!=this.countdown&&this.countdown.destroy(),this.countdown=null,o.deleteField(this.state.end,"nextMedia"),o.deleteField(this.state.end,"standard"),o.deleteField(this.state.end,"countdown"),o.deleteField(this.state.end,"tiles"),o.deleteField(this.state.end,"share"),o.deleteField(this.state.end,"image");}refreshEndState(){let t=null!=this.mediaPlaylist&&this.mediaPlaylist.hasNext();this.cleanEndState();let e=this;switch(this.state.end.type){case"countdown":t?(this.updateNextMediaState(),this.countdown=new ct(this.context,null,(function(t,s){e.state.end.countdown=t,e.updateState();}),Ut(this,this.reportError),Ut(this,this.playNext))):(this.updateNextMediaState(),this.initStandardEndsplash());break;case"image":this.updateNextMediaState(),this.checkEndStateThankYouImage();break;case"reload":case"standard":default:this.updateNextMediaState(),this.initStandardEndsplash();break;case"share":case"social":this.initShareEndsplash();break;case"tiles":t?this.tiles=new dt(this.context,null,(function(t,s){e.state.end.tiles=t,e.updateState();}),Ut(this,this.reportError),this.mediaPlaylist.items.length):(this.updateNextMediaState(),this.initStandardEndsplash());}}updateNextMediaState(){if(this.mediaPlaylist.hasNext()){let t=this.mediaPlaylist.items[this.mediaPlaylist.currentPos+1],e={};null!=t.title&&(e.title=t.title),null!=t.splashImages&&t.splashImages.length>0&&(e.image=St.imageToState(t.splashImages)),null!=t.duration&&(e.duration={time:t.duration,text:Tt.formatTime(t.duration)}),o.fields(e).length>0?this.state.end.nextMedia=e:o.deleteField(this.state.end,"nextMedia");}else o.deleteField(this.state.end,"nextMedia");}onPlaying(t){if(this.isLiveStream){let t=this.monitor.currentMedia.streamWaitingForTransmissionImageUrl;if(null!=t&&""!=t){let e=new P;e.url=t,this.state.state.image=St.imageToState([e]),this.state.state.type="image";}}super.onPlaying(t);}onCurrentTimeChange(t){"standard"!=this.state.state.type&&(o.deleteField(this.state.state,"image"),this.state.state.type="standard"),super.onCurrentTimeChange(t);}onComplete(t){this.refreshEndState(),super.onComplete(t);}onPlaylistData(t){this.mediaPlaylist=E.clone(t.data);}playNext(t){null!=t&&null!=t&&(t.stopImmediatePropagation(),t.stopPropagation(),t.preventDefault());let e=null!=this.mediaPlaylist&&this.mediaPlaylist.hasNext()?this.mediaPlaylist.next():null;null==e||null==e.mediaLandingPage||""==e.mediaLandingPage?it.play(this.context,e,this.mediaPlaylist):window.open(e.mediaLandingPage,"_self");}initStandardEndsplash(){this.state.end.standard={replay:!0};}initShareEndsplash(){this.state.end.share={show:!0};}checkEndStateThankYouImage(){if(this.isLiveStream){let t=this.monitor.currentMedia.streamEndThankYouImageUrl;if(null!=t&&""!=t){let e=new P;e.url=t,this.state.end.image=St.imageToState([e]),this.state.end.type="image",this.updateState();}}}}ut.__name__="bs.player.plugin.skin.model.splash.SplashModel",ut.__super__=W,Object.assign(ut.prototype,{__class__:ut});class ct extends V{constructor(t,e,s,i,a){V._hx_skip_constructor=!0,super(),V._hx_skip_constructor=!1,this._hx_constructor(t,e,s,i,a);}_hx_constructor(t,e,s,i,a){this.counter=10,super._hx_constructor(t,e,s,i),this.onComplete=a,this.state={timer:10},this.refreshCallback(this.state),this.stopCountdown(),this.timer=new Lt(1e3),this.timer.run=Ut(this,this.onCountdown);}destroy(){super.destroy(),null!=this.timer&&this.timer.stop();}onCountdown(){this.counter--,this.state.timer=this.counter,this.refreshCallback(this.state),this.counter>0||this.handleCoundown();}stopCountdown(){this.counter=10,null!=this.timer&&this.timer.stop(),this.timer=null;}handleCoundown(t){this.stopCountdown(),this.onComplete(t);}}ct.__name__="bs.player.plugin.skin.model.splash.end.SplashEndCountdownModel",ct.__super__=V,Object.assign(ct.prototype,{__class__:ct});class dt extends V{constructor(t,e,s,i,a){V._hx_skip_constructor=!0,super(),V._hx_skip_constructor=!1,this._hx_constructor(t,e,s,i,a);}_hx_constructor(t,e,s,i,a){this.tileHeight=0,this.tileWidth=0,this.gridHeight=0,this.gridWidth=0,this.maxTilesCount=0,this.rafId=0,super._hx_constructor(t,e,s,i),this.mediaPlaylistCount=a,this.maxTilesCount=0|Math.max(1,Math.min(12,a)),this.state={count:1,grid:{columns:1,rows:1,ctrl:null},playlist:{from:0,to:1},page:{current:1,total:1,next:null,prev:null}},this.state.count=a,this.state.grid.ctrl=Ut(this,this.gridCtrl),this.state.page.next=Ut(this,this.nextPage),this.state.page.prev=Ut(this,this.prevPage),v.add(t,"resize",Ut(this,this.onResize)),this.refreshCallback(this.state);}destroy(){super.destroy(),v.remove(this.context,"resize",Ut(this,this.onResize)),this.cleanupTilesGrid();}onResize(t){this.setupTilesGrid();}nextPage(t){this.state.page.current!=this.state.page.total&&(this.state.page.current++,this.updateEndTilesGridPlaylist(),this.refreshCallback(this.state));}prevPage(t){1!=this.state.page.current&&(this.state.page.current--,this.updateEndTilesGridPlaylist(),this.refreshCallback(this.state));}gridCtrl(t){this.gridElement=t,this.tileElement=null!=this.gridElement&&null!=this.gridElement.firstElementChild?this.gridElement.firstElementChild:null,this.cleanupTilesGrid();let e=Ut(this,this.setupTilesGrid),s=-1;s=window.requestAnimationFrame((function(t){e();})),this.rafId=s,this.timer=new Lt(250),this.timer.run=Ut(this,this.setupTilesGrid);}updateEndTilesGridPlaylist(){let t=this.state.grid.columns*this.state.grid.rows,e=this.state.page.current;this.state.playlist.from=t*(e-1),this.state.playlist.to=t*e-1;}cleanupTilesGrid(){if(null!=this.rafId){let t=this.rafId;null==t||isNaN(t)||window.cancelAnimationFrame(t);}this.rafId=null,null!=this.timer&&this.timer.stop(),this.timer=null;}setupTilesGrid(){if(this.cleanupTilesGrid(),null==this.gridElement||null==this.gridElement.firstElementChild)return;let t=this.gridElement.style.maxWidth;this.gridElement.style.maxWidth="unset";let e=null;e=this.gridElement.getBoundingClientRect();let s=e,i=null;i=this.gridElement.firstElementChild.getBoundingClientRect();let a=i;if(this.gridElement.style.maxWidth=t,this.gridWidth==s.width&&this.gridHeight==s.height&&this.tileWidth==a.width&&this.tileHeight==a.height)return;this.gridWidth=s.width,this.gridHeight=s.height,this.tileWidth=a.width,this.tileHeight=a.height;let n=Math.floor(Math.max(1,Math.min(Math.min(4,this.maxTilesCount),this.gridWidth/(this.tileWidth+2)))),l=Math.floor(Math.max(1,Math.min(3,this.gridHeight/this.tileHeight)));this.state.page.current=1,this.state.page.total=Math.ceil(this.mediaPlaylistCount/(n*l)),this.state.grid.columns=n,this.state.grid.rows=l,this.updateEndTilesGridPlaylist(),this.gridElement.style.maxWidth=Math.ceil((this.tileWidth+2)*n)+"px",this.refreshCallback(this.state);}}dt.__name__="bs.player.plugin.skin.model.splash.end.SplashEndTilesModel",dt.__super__=V,Object.assign(dt.prototype,{__class__:dt});class pt extends V{constructor(t,e,s,i){V._hx_skip_constructor=!0,super(),V._hx_skip_constructor=!1,this._hx_constructor(t,e,s,i);}_hx_constructor(t,e,s,i){this.subtitlesSets=[],super._hx_constructor(t,e,s,i),this.languageCode=Ct.subtitles(e),this.state={hasItems:!1,activate:null},this.state.activate=Ut(this,this.activate),m.add(t,"subtitleData",Ut(this,this.onSubtitleData)),m.add(t,"mediaMetadataData",Ut(this,this.cleanupState)),this.refreshCallback(this.state);}destroy(){super.destroy(),m.remove(this.context,"subtitleData",Ut(this,this.onSubtitleData)),m.remove(this.context,"mediaMetadataData",Ut(this,this.cleanupState));}onSubtitleData(t){if(this.subtitlesSets=t.data,null!=this.subtitlesSets){this.state.items=[];let t=null,e=!1,s=0,i=this.subtitlesSets.length;for(;s<i;){let i=s++;t=this.subtitlesSets[i],e=0==e&&this.languageCode==t.languageCode,this.state.items.push({active:e,label:Tt.capilizeFirstLetter(null==t.name?t.languageCode:t.name),data:t.languageCode}),1==e&&this.dispatch(i);}}else this.state.items=null;this.state.hasItems=null!=this.state.items&&this.state.items.length>0,this.refreshCallback(this.state);}cleanupState(t){this.subtitlesSets=[],o.deleteField(this.state,"items"),this.refreshCallback(this.state);}dispatch(t){let e=this.subtitlesSets[t],s=new p("selectSubtitles");s.data=e,s.dispatch(this.context);let i=s.data.languageCode,a=!1,n=null;if(n=Wt.getSessionStorage(),a=null!=n,a)try{if(null==i){let t=null;t=Wt.getSessionStorage(),t.removeItem("_brplayer_sub_lang");}else {let t=null;t=Wt.getSessionStorage(),t.setItem("_brplayer_sub_lang",h.string(i));}}catch(t){}}activate(t){if(!Object.prototype.hasOwnProperty.call(this.state,"items"))return;null!=t&&(t.stopImmediatePropagation(),t.stopPropagation(),t.preventDefault());let e=h.parseInt(zt.__cast(t.target,HTMLElement).getAttribute("data-item-index"));if(isNaN(e))return;let s=0,i=this.state.items.length;for(;s<i;){let t=s++;this.state.items[t].active=t==e;}this.dispatch(e),this.refreshCallback(this.state);}}pt.__name__="bs.player.plugin.skin.model.subtitles.SubtitlesModel",pt.__super__=V,Object.assign(pt.prototype,{__class__:pt});class mt extends V{constructor(t,e,s,i){super(t,e,s,i),m.add(t,"mediaMetadataData",Ut(this,this.onMetadataData));}destroy(){super.destroy(),m.remove(this.context,"mediaMetadataData",Ut(this,this.onMetadataData));}onMetadataData(t){if(null==t||null==t.data)return this.state=null,void this.refreshCallback(this.state);let e=t.data;e.title!=this.state&&(this.state=e.title,this.refreshCallback(this.state));}}mt.__name__="bs.player.plugin.skin.model.title.TitleModel",mt.__super__=V,Object.assign(mt.prototype,{__class__:mt});class ft extends W{constructor(t,e,s,i,a,n){super(t,e,s,i),this.cssPrefix=a,this.skinElement=n,this.resetState(),this.refreshCallback(this.state);}resetState(){this.state={current:{time:0,text:Tt.formatTime(0)},duration:{time:0,text:Tt.formatTime(0)},status:{inited:!1,playing:!1,paused:!1,buffering:!1,seeking:!1,complete:!1,live:!1,dvr:!1,seekable:!0},playPause:null,seekEnd:null,replay:null};let t=this;this.state.playPause=function(e){null!=e&&(e.stopImmediatePropagation(),e.stopPropagation(),e.preventDefault()),new p("skinPlayPause").dispatch(t.context);};this.state.seekEnd=function(e){null!=e&&(e.stopImmediatePropagation(),e.stopPropagation(),e.preventDefault());let s=new p("skinSeek");s.data={seekedPosition:t.duration,seekSource:"syncLive"},s.dispatch(t.context);};this.state.replay=function(e){null!=e&&(e.stopImmediatePropagation(),e.stopPropagation(),e.preventDefault());let s=new p("skinSeek");s.data={seekedPosition:0,seekSource:"syncLive"},s.dispatch(t.context),new p("skinPlayPause").dispatch(t.context);};}updateState(t){if(super.updateState(t),this.isDvr)if(this.isDvrWallTimeMode&&null!=this.monitor.currentMedia.mediaPlaybackInfo&&this.monitor.currentMedia.mediaPlaybackInfo.currentTime>0){let t={time:0,text:Tt.formatDateTime(new Date(1e3*this.monitor.currentMedia.mediaPlaybackInfo.currentTime),0)};this.state.dvrTime=t;let e=this.current.playback;this.state.current={time:e,text:Tt.formatTime(e)};}else {this.state.dvrTime=null;let t=this.duration-this.current.time;this.state.current={time:-t,text:"-"+Tt.formatTime(t)};}else {this.state.dvrTime=null;let t=this.isComplete?this.duration:this.current.time;this.state.current={time:t,text:Tt.formatTime(t)};}let e=this.duration;this.state.duration={time:e,text:Tt.formatTime(e)},this.state.status.inited=this.isInited,this.state.status.playing=this.isPlaying,this.state.status.paused=this.isPaused,this.state.status.buffering=this.isBuffering,this.state.status.seeking=this.isSeeking,this.state.status.complete=this.isComplete,this.state.status.live=this.isLive,this.state.status.dvr=this.isDvr,this.state.status.seekable=this.isSeekable;let s=[],i=[];if(this.isLive?(s.push(this.cssPrefix+"-is-live"),i.push(this.cssPrefix+"-not-live")):(s.push(this.cssPrefix+"-not-live"),i.push(this.cssPrefix+"-is-live")),this.isDvr?(s.push(this.cssPrefix+"-is-dvr"),i.push(this.cssPrefix+"-not-dvr")):(s.push(this.cssPrefix+"-not-dvr"),i.push(this.cssPrefix+"-is-dvr")),this.isSeekable?(s.push(this.cssPrefix+"-is-seekable"),i.push(this.cssPrefix+"-not-seekable")):(s.push(this.cssPrefix+"-not-seekable"),i.push(this.cssPrefix+"-is-seekable")),i.length>0){let t=[],e=0;for(;e<i.length;){let s=i[e];++e,1==this.skinElement.classList.contains(s)&&t.push(s);}t.length>0&&this.skinElement.classList.remove(...t);}if(s.length>0){let t=[],e=0;for(;e<s.length;){let i=s[e];++e,0==this.skinElement.classList.contains(i)&&t.push(i);}t.length>0&&this.skinElement.classList.add(...t);}this.refreshCallback(this.state);}}ft.__name__="bs.player.plugin.skin.model.video.VideoModel",ft.__super__=W,Object.assign(ft.prototype,{__class__:ft});class gt extends V{constructor(t,e,s,i,a){V._hx_skip_constructor=!0,super(),V._hx_skip_constructor=!1,this._hx_constructor(t,e,s,i,a);}_hx_constructor(t,e,s,i,a){let n=[],l=0;for(;l<3;)++l,n.push(0);this.eventTsRegistry=n,this.moveDir="ltr",this.moveAxis="y",this.handleVolume=null,this.handleElement=null,this.skinElement=null,this.isTrackDown=!1,super._hx_constructor(t,e,s,i),this.skinElement=a,this.state={mute:!1,value:1,prc:isNaN(1)||!isFinite(1)?"0%":Math.max(0,Math.min(100,100))+"%",text:"100",active:!1,ctrl:null,toggle:null},this.state.ctrl=Ut(this,this.controlTrack),this.state.toggle=Ut(this,this.toggle),p.add(t,"skinVolume",Ut(this,this.onVolumeEvent)),p.add(t,"skinMute",Ut(this,this.onMuteEvent)),p.add(t,"skinUnmute",Ut(this,this.onUnmuteEvent)),v.add(t,"resize",Ut(this,this.onResize)),this.refreshCallback(this.state);}destroy(){super.destroy(),v.remove(this.context,"resize",Ut(this,this.onResize)),p.remove(this.context,"skinVolume",Ut(this,this.onVolumeEvent)),p.remove(this.context,"skinMute",Ut(this,this.onMuteEvent)),p.remove(this.context,"skinUnmute",Ut(this,this.onUnmuteEvent));}onResize(t){this.updateMoveDataset();}updateMoveDataset(){if(null==this.handleElement)return;let t=this.handleElement.dataset;null!=t&&(this.moveAxis=Object.prototype.hasOwnProperty.call(t,"axis")?t.axis:"y",this.moveDir=Object.prototype.hasOwnProperty.call(t,"direction")?t.direction:"ltr");}controlTrack(t){null!=t?(this.handleElement=t,this.updateMoveDataset(),this.handleElement.addEventListener("touchstart",Ut(this,this.handleTrack),yt.get_passiveOptions()),this.handleElement.addEventListener("touchmove",Ut(this,this.handleTrack),yt.get_passiveOptions()),this.handleElement.addEventListener("touchend",Ut(this,this.handleTrack),yt.get_passiveOptions()),this.handleElement.addEventListener("mousedown",Ut(this,this.handleTrack),yt.get_passiveOptions()),this.handleElement.addEventListener("mousemove",Ut(this,this.handleTrack),yt.get_passiveOptions()),this.handleElement.addEventListener("mouseup",Ut(this,this.handleTrack),yt.get_passiveOptions())):null!=this.handleElement&&(this.handleElement.removeEventListener("touchstart",Ut(this,this.handleTrack)),this.handleElement.removeEventListener("touchmove",Ut(this,this.handleTrack)),this.handleElement.removeEventListener("touchend",Ut(this,this.handleTrack)),this.handleElement.removeEventListener("mousedown",Ut(this,this.handleTrack)),this.handleElement.removeEventListener("mousemove",Ut(this,this.handleTrack)),this.handleElement.removeEventListener("mouseup",Ut(this,this.handleTrack)),this.handleElement=null);}toggle(t){if(null!=t&&(t.stopImmediatePropagation(),t.stopPropagation(),t.preventDefault()),this.state.mute||0==this.state.value){let t=0==this.state.value?1:this.state.value;return this.updateValue(t),this.dispatchVolume(t),void this.dispatchUnmute()}this.dispatchMute();}handleTrack(t){switch(t.type){case"blur":case"mouseleave":case"mouseup":case"touchend":if(this.eventAlreadyTriggered(2,t))return;let e=this.skinElement,s=Ut(this,this.handleTrack);g.enableHtmlSelection(),window.document.removeEventListener("mouseup",s),window.document.removeEventListener("mousemove",s),window.document.removeEventListener("mouseleave",s),window.document.removeEventListener("blur",s),e.removeEventListener("mouseup",s),e.removeEventListener("mousemove",s),e.removeEventListener("blur",s),g.isMobile()&&(window.document.removeEventListener("touchend",s),e.removeEventListener("touchend",s)),this.state.active=!1;let i=t.target;this.skinElement.contains(i)&&this.isTrackDown?this.handleMoveEnd(t):this.refreshCallback(this.state),this.isTrackDown=!1;break;case"mousedown":case"touchstart":if(this.isTrackDown)return;if(this.eventAlreadyTriggered(0,t))return;let a=this.skinElement,n=Ut(this,this.handleTrack);g.disableHtmlSelection(),window.document.addEventListener("mouseup",n,yt.get_passiveOptions()),window.document.addEventListener("mousemove",n,yt.get_passiveOptions()),window.document.addEventListener("mouseleave",n,yt.get_passiveOptions()),window.document.addEventListener("blur",n,yt.get_passiveOptions()),a.addEventListener("mouseup",n,yt.get_passiveOptions()),a.addEventListener("mousemove",n,yt.get_passiveOptions()),a.addEventListener("blur",n,yt.get_passiveOptions()),g.isMobile()&&(window.document.addEventListener("touchend",n,yt.get_passiveOptions()),a.addEventListener("touchend",n,yt.get_passiveOptions())),this.state.active=!0,this.handleMoving(t),this.isTrackDown=!0;break;case"mousemove":case"touchmove":if(this.eventAlreadyTriggered(1,t))return;this.handleMoving(t);}}eventAlreadyTriggered(t,e){let s=e.timeStamp;if(null==s&&(s=(new Date).getTime()),this.eventTsRegistry[t]==s)return !0;let i=0,a=this.eventTsRegistry.length;for(;i<a;){let e=i++;this.eventTsRegistry[e]=t==e?s:0;}return !1}handleMoving(t){let e=this.calculateVolume(t);null!=e&&this.handleVolume!=e&&(this.handleVolume=e,this.isTrackDown&&(this.updateValue(this.handleVolume),this.dispatchVolume(this.handleVolume),this.refreshCallback(this.state)));}handleMoveEnd(t){null!=this.handleVolume&&(this.updateValue(this.handleVolume),this.dispatchVolume(this.handleVolume));}calculateVolume(t){let e=null;if("x"==this.moveAxis){let s=0;t instanceof MouseEvent&&(s=zt.__cast(t,MouseEvent).clientX);let i=window;if(Object.prototype.hasOwnProperty.call(i,"TouchEvent")&&t instanceof TouchEvent){let e=t;if(e.touches.length>0){s=e.touches.item(0).clientX;}}e=s;}else {let s=0;t instanceof MouseEvent&&(s=zt.__cast(t,MouseEvent).clientY);let i=window;if(Object.prototype.hasOwnProperty.call(i,"TouchEvent")&&t instanceof TouchEvent){let e=t;if(e.touches.length>0){s=e.touches.item(0).clientY;}}e=s;}let s=null;s=this.handleElement.getBoundingClientRect();let i=s,a=0;a="x"==this.moveAxis?e-i.x:e-i.y;let n=0;return n="x"==this.moveAxis?a/i.width:a/i.height,n>.995?n=1:n<.005&&(n=0),"ltr"===this.moveDir?1-n:n}updateValue(t){if(null==t)return;this.state.value=t;let e=isNaN(t)||!isFinite(t);this.state.prc=e?"0%":Math.max(0,Math.min(100,100*t))+"%",this.state.text=""+(100*t|0);}onVolumeEvent(t){this.updateValue(t.data),this.refreshCallback(this.state);}onMuteEvent(t){this.state.mute=!0,this.refreshCallback(this.state);}onUnmuteEvent(t){this.state.mute=!1,this.refreshCallback(this.state);}dispatchVolume(t){let e=new p("skinVolume");e.data=t,e.dispatch(this.context);let s=null==t?"null":""+t,i=!1,a=null;if(a=Wt.getSessionStorage(),i=null!=a,i)try{if(null==s){let t=null;t=Wt.getSessionStorage(),t.removeItem("_brplayer_vol");}else {let t=null;t=Wt.getSessionStorage(),t.setItem("_brplayer_vol",r.substr(h.string(s),0,5));}}catch(t){}}dispatchMute(){new p("skinMute").dispatch(this.context);let t=!1,e=null;if(e=Wt.getSessionStorage(),t=null!=e,t)try{let t=null;t=Wt.getSessionStorage(),t.setItem("_brplayer_muted","1");}catch(t){}}dispatchUnmute(){new p("skinUnmute").dispatch(this.context);let t=!1,e=null;if(e=Wt.getSessionStorage(),t=null!=e,t)try{let t=null;t=Wt.getSessionStorage(),t.setItem("_brplayer_muted","0");}catch(t){}}}gt.__name__="bs.player.plugin.skin.model.volume.VolumeModel",gt.__super__=V,Object.assign(gt.prototype,{__class__:gt});class _t extends z{constructor(t,e,s,i){V._hx_skip_constructor=!0,super(),V._hx_skip_constructor=!1,this._hx_constructor(t,e,s,i);}_hx_constructor(t,e,s,i){this.isVrDevice=!1,this.isVrEnabled=!1,super._hx_constructor(t,e,s,i),this.state=null,b.add(t,"vrEnabled",Ut(this,this.onVrEnabled)),b.add(t,"vrSupport",Ut(this,this.onVrSupport)),b.add(t,"vrActive",Ut(this,this.onVrActive)),this.refreshCallback(this.state);}destroy(){super.destroy(),b.remove(this.context,"vrEnabled",Ut(this,this.onVrEnabled)),b.remove(this.context,"vrSupport",Ut(this,this.onVrSupport)),b.remove(this.context,"vrActive",Ut(this,this.onVrActive));}updateState(t){super.updateState(t),this.formatState();}formatState(){this.state=this.isMediaSpherical?{enabled:this.isVrEnabled,active:!1,supported:this.isVrDevice,click:Ut(this,this.click)}:null,this.refreshCallback(this.state);}onVrEnabled(t){this.isVrEnabled=t.data,null!=this.state&&(this.state.enabled=this.isVrEnabled,this.refreshCallback(this.state));}onVrSupport(t){this.isVrDevice=t.data,null!=this.state&&(this.state.supported=this.isVrDevice,this.refreshCallback(this.state));}onVrActive(t){null!=this.state&&(this.state.active=t.data,this.refreshCallback(this.state));}click(t){new b(this.state.active?"vrEnd":"vrStart").dispatch(this.context);}}_t.__name__="bs.player.plugin.skin.model.vr.VrModel",_t.__super__=z,Object.assign(_t.prototype,{__class__:_t});class vt{static injectAssets(t,e,s){let i=0;if(null==s)return 0;let a=[],n=0,l=t.getElementsByTagName("link");for(;n<l.length;)a.push(l[n++]);let r=[],o=0,h=s.children;for(;o<h.length;)r.push(h[o++]);let u=[],c=0;for(;c<r.length;){let t=r[c];++c,"LINK"==t.tagName&&u.push(t);}let d=u,p=null,m=null,f=!1,g=0;for(;g<d.length;){let s=d[g];if(++g,null==s||!(s instanceof HTMLLinkElement))continue;if(f=!1,m=null!=s.href&&""!=s.href?s.href:null,null==m)continue;p=null!=s.id&&""!=s.id?s.id:e+"-"+Nt.encode(s.href);let n=[],l=0;for(;l<a.length;){let t=a[l];++l,t.id==p&&n.push(t);}f=n.length<1,f&&(t.appendChild(s),++i);}return i}static appendStyle(t,e,s){let i=e+"-skin-"+Nt.encode(s),a=t.querySelector("style#"+i);null==a&&(a=window.document.createElement("style"),a.id=""+i,a.insertAdjacentHTML("beforeend",s),t.appendChild(a));}}vt.__name__="bs.player.plugin.skin.util.Dom";class bt{static showWindow(t,e,s){let i=bt.getEmbedCode(e),a=u.htmlEscape(i),n='<small id="'+t+'-embed-code-text" style="word-break: break-all;">'+a+"</small>",l='<p style="text-align:center;"><a>'+Tt.translate("embed_code_info")+"</a></p>",r=window.document.queryCommandSupported("copy"),o=new f("showMessage");o.data={type:"code",title:Tt.translate("embed_code"),text:n+(r?"":l),onAfterShow:function(){let e=window.document.getElementById(t+"-embed-code-text");null!=e&&(g.focusElement(e,{preventScroll:!0}),g.highlightHtmlNode(e));},close:!0,onAfterClose:s},r&&(o.data.userSingleActionButtonText=Tt.translate("embed_code_copy"),o.data.onUserSingleAction=function(){g.copyToClipboard(i),new f("closeMessage").dispatch(t);}),o.dispatch(t);}static getEmbedCode(t){let e,s=Mt.UID_CHARS.length,i="",a=0;for(;a<24;){let t;switch(e="xxxx-xxxx-xxxx-xxxx-xxxx".charAt(a++),e){case"-":case"_":t=e;break;default:t=Mt.UID_CHARS.charAt(h.random(s));}i+=t;}let n=i;return '<div style="width: 640px; height: 480px;" id="'+n+'"></div><script src="'+bt.findEmbedScriptPath(t,"modular_v2.14.417")+'" type="text/javascript" data-bs-parent-id="'+n+'" data-bs-variables="'+Vt.encode(Ft.ofString(JSON.stringify(t)))+'"><\/script>'}static findEmbedScriptPath(t,e){let s=null;if(s=o.field(t,"playerSourcePath"),null!=s&&""!=s)return s;if(null!=e&&""!=e){let t=window;if(Object.prototype.hasOwnProperty.call(t,"bradmax")){let s=o.field(t,"bradmax");if(Object.prototype.hasOwnProperty.call(s,"player")){let t=o.field(s,"player");if(Object.prototype.hasOwnProperty.call(t,"embeders")){let s=o.field(t,"embeders");if(Object.prototype.hasOwnProperty.call(s,e)){let t=o.field(s,e);if(Object.prototype.hasOwnProperty.call(t,"sourcePath"))return o.field(t,"sourcePath")}}}}}return null}}bt.__name__="bs.player.plugin.skin.util.EmbedCode";class yt{static get_passiveOptions(){return !!yt.get_supportPassive()&&{passive:!0}}static get_supportPassive(){if(null==yt._supportPassive){yt._supportPassive=!1;try{let t=Object.defineProperty({},"passive",{get:function(){yt._supportPassive=!0;}});window.addEventListener("testPassive",null,t),window.removeEventListener("testPassive",null,t);}catch(t){}}return yt._supportPassive}}yt.__name__="bs.player.plugin.skin.util.Event";class kt{static toggle(t,e,s){g.isSmartTV()||(kt.isFullscreen(e)?kt.exit(t,e,s):kt.enter(t,e,s));}static isFullscreen(t){let e=!1,s=window.document,i=window,a=t;return null!=i.bradmaxIsFullscreenEnabled&&o.isFunction(Ut(i,i.bradmaxIsFullscreenEnabled))?e=i.bradmaxIsFullscreenEnabled():null!=s.fullscreenElement||null!=s.webkitFullscreenElement||null!=s.mozFullScreenElement||null!=s.msFullscreenElement||null!=a&&(1==a.webkitDisplayingFullscreen||"fullscreen"==a.webkitPresentationMode)?e=!0:kt.isFullscreenEmulation&&(e=kt.isFullscreenEmulationActive),e}static enter(t,e,s){let i=window,a=t,n=e,l=null;window.document.addEventListener(_.get_FULLSCREEN_CHANGE(),s),null!=i.bradmaxSetFullscreen?i.bradmaxSetFullscreen(!0):null!=a.requestFullscreen?l=a.requestFullscreen():null!=a.requestFullScreen?l=a.requestFullScreen():null!=a.msRequestFullscreen?l=a.msRequestFullscreen():null!=a.mozRequestFullScreen?l=a.mozRequestFullScreen():null!=a.webkitRequestFullscreen?l=a.webkitRequestFullscreen():null!=n&&null!=n.webkitSupportsFullscreen&&1==n.webkitSupportsFullscreen&&null!=n.webkitEnterFullscreen&&o.isFunction(Ut(n,n.webkitEnterFullscreen))?n.webkitEnterFullscreen():null!=n&&null!=n.webkitSetPresentationMode&&o.isFunction(Ut(n,n.webkitSetPresentationMode))&&null!=n.webkitSupportsPresentationMode&&o.isFunction(Ut(n,n.webkitSupportsPresentationMode))&&n.webkitSupportsPresentationMode("fullscreen")?n.webkitSetPresentationMode("fullscreen"):(kt.isFullscreenEmulation=!0,kt.enterEmulatedFullscreen(a)),null!=l&&l.catch((function(t){console.warn("BRADMAX PLAYER NOTICE:\nBrowser doesn't allow openinng fullscreen mode without user interaction.\nPlayer is waiting for user to click 'fullscreen' button.\n\nPlease also check server HTTP response headers. Fullscreen could be also blocked by setting Feature-Policy proper header https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/Feature-Policy/fullscreen \n\n",t);}));}static enterEmulatedFullscreen(t){kt.isFullscreenEmulationActive=!0;let e=t.style;t.setAttribute("data-pre-fullscreen",t.style.cssText),e.objectFit="contain",e.userSelect="text",e.position="fixed",e.top="0",e.left="0",e.boxSizing="border-box",e.minWidth="0px",e.maxWidth="nonet",e.minHeight="0px",e.maxHeight="none",e.width="100%",e.height="100%",e.transform="none",e.inset="0px",e.margin="0px",e.zIndex="10000";let s=window.document;s.body.setAttribute("data-pre-fullscreen",s.body.style.cssText),s.body.style.overflow="hidden";}static exitEmulatedFullscreen(t){kt.isFullscreenEmulationActive=!1,t.style.cssText=t.getAttribute("data-pre-fullscreen");let e=window.document;e.body.style.cssText=e.body.getAttribute("data-pre-fullscreen");}static exit(t,e,s){let i=window.document,a=window,n=e;null!=a.bradmaxSetFullscreen?a.bradmaxSetFullscreen(!1):kt.isFullscreenEmulation?kt.exitEmulatedFullscreen(t):null!=i.exitFullscreen?i.exitFullscreen():null!=i.exitFullScreen?i.exitFullScreen():null!=i.msExitFullscreen?i.msExitFullscreen():null!=i.mozCancelFullScreen?i.mozCancelFullScreen():null!=i.webkitExitFullscreen?i.webkitExitFullscreen():null!=n&&null!=n.webkitExitFullscreen&&n.webkitExitFullscreen(),i.addEventListener(_.get_FULLSCREEN_CHANGE(),s);}}kt.__name__="bs.player.plugin.skin.util.FullscreenTool";class wt{static unlock(){let t=wt.orientationApi();if(null!=t&&null!=t.unlock&&o.isFunction(Ut(t,t.unlock))){try{t.unlock();}catch(t){let e=It.caught(t);console.error(e);}return}let e=wt.oldUnlockOrientationApi();if(null!=e&&o.isFunction(e))try{e();}catch(t){let e=It.caught(t);console.error(e);}}static lock(t){if(null==t)return void wt.unlock();let e=wt.orientationApi();if(null!=e&&null!=e.lock&&o.isFunction(Ut(e,e.lock)))return void e.lock(t).then((function(t){})).catch((function(t){console.error(t);}));let s=wt.oldLockOrientationApi();if(null!=s&&o.isFunction(s))try{s(t);}catch(t){let e=It.caught(t);console.error(e);}}static orientationApi(){let t=window;if(Object.prototype.hasOwnProperty.call(t,"screen")){if(null!=t.screen.orientation)return t.screen.orientation;let e=t.screen;if(null!=e.mozOrientation)return e.mozOrientation;if(null!=e.msOrientation)return e.msOrientation}return null}static oldLockOrientationApi(){let t=window;if(Object.prototype.hasOwnProperty.call(t,"screen")){let e=t.screen;if(null!=e.lockOrientation&&o.isFunction(e.lockOrientation))return e.lockOrientation;if(null!=e.mozLockOrientation&&o.isFunction(e.mozLockOrientation))return e.mozLockOrientation;if(null!=e.msLockOrientation&&o.isFunction(e.msLockOrientation))return e.msLockOrientation}return null}static oldUnlockOrientationApi(){let t=window;if(Object.prototype.hasOwnProperty.call(t,"screen")){let e=t.screen;if(null!=e.unlockOrientation&&o.isFunction(e.unlockOrientation))return e.unlockOrientation;if(null!=e.mozUnlockOrientation&&o.isFunction(e.mozUnlockOrientation))return e.mozUnlockOrientation;if(null!=e.msUnlockOrientation&&o.isFunction(e.msUnlockOrientation))return e.msUnlockOrientation}return null}}wt.__name__="bs.player.plugin.skin.util.ScreenOrientationTool";class xt{static shareViaMail(t){let e=xt.collectShareUrl(),s=xt.collectShareTitle();xt.goToUrl("mailto:?body="+e+(null!=s?"&subject="+s:""),"_self");}static shareOnFacebook(t){let e=xt.collectShareUrl(),s=xt.collectShareTitle();xt.goToUrl("http://www.facebook.com/sharer.php?u="+e+(null!=s?"&t="+s:""));}static shareOnTwitter(t){let e=xt.collectShareUrl(),s=xt.collectShareTitle();xt.goToUrl("http://twitter.com/share/?url="+e+(null!=s?"&text="+s:""));}static shareOnLinkedIn(t){let e=xt.collectShareUrl(),s=xt.collectShareTitle();xt.goToUrl("http://www.linkedin.com/shareArticle?mini=true&url="+e+(null!=s?"&title="+s:""));}static collectShareUrl(){let t=window.top.location.href;return ""==t?null:encodeURIComponent(t)}static collectShareTitle(){let t=window.top.document.title;return ""==t?null:encodeURIComponent(t)}static goToUrl(t,e){null==e&&(e="_blank"),window.open(t,e);}}xt.__name__="bs.player.plugin.skin.util.Share";class St{static stateToSizesAttribute(t,e){return null==e||null==e.sources||e.sources.length<2?null:"(min-width: "+t.width+"px) "+t.width+"px, (min-height: "+t.height+"px) "+t.height+"px"}static stateToAttribute(t){if(null==t||null==t.sources)return null;if(null!=t.srcset)return t.srcset;let e=[],s=0,i=t.sources;for(;s<i.length;){let t=i[s];++s;let a="";null!=t.width&&(a=" "+t.width+"w"),e.push(""+t.url+a);}let a=e.join(", ");return t.srcset=a,""+a}static imageToState(t){let e=[],s=0;for(;s<t.length;)e.push(o.copy(t[s++]));e.sort((function(t,e){return e.width-t.width}));let i=[],a=0;for(;a<e.length;){let t=e[a];++a,(null==t.width||t.width<=0)&&i.push(t);}let n=[],l=0;for(;l<e.length;){let t=e[l];++l,null!=t.width&&t.width>0&&n.push(t);}let r=i.length>0?i[0]:n.length>0?n[n.length-1]:null,h=null!=r?r.url:null;if(null==h)return null;let u={url:h};if(n.length>0){u.sources=[];let t=0;for(;t<n.length;){let e=n[t];++t;let s={url:e.url};null!=e.width&&(s.width=e.width),u.sources.push(s);}0==u.sources.length&&o.deleteField(u,"sources");}return u}}St.__name__="bs.player.plugin.skin.util.Srcset";class Et{static cleanup(t){let e=new l("(\x3c!--)([\\s\\S]*?)(--\x3e)","g".split("u").join("")),s=new l("[\n\r]+","g".split("u").join("")),i=new l("[ ]+","g".split("u").join(""));return t=(t=(t=t.replace(e,"")).replace(s,"\n\r")).replace(i," ")}static merge(t,e){let s="",i=0;for(;i<t.length;){let a=t[i++],n=i-1;s+=a+(n<e.length?e[n]:"");}return s}static removeCustomTag(t,e){return t.replace(e.r,"")}static readCustomAttribute(t){return u.htmlUnescape(t)}static escapeCustomAttributes(t,e){let s=0;for(;s<e.length;)t=e[s++].map(t,(function(t){return ""+t.matched(1)+u.htmlEscape(t.matched(2))+t.matched(3)}));return t}}Et.__name__="bs.player.plugin.skin.util.Template";class Pt{static formatCss(t,e){let s=Object.prototype.hasOwnProperty.call(e,"time")?o.field(e,"time"):null;if(null==s)return null;if("number"==typeof s)return Pt.timeToText(t.time,e.time,NaN);let i=e;return Pt.timeToText(t.time,i.time.show,i.time.hide)}static timeToText(t,e,s){return isNaN(t)?null:t<.1?"future":isNaN(e)?null:isNaN(s)?e<t?"past":"future":t>e&&t<s?"current":e<t?"past":"future"}}Pt.__name__="bs.player.plugin.skin.util.Time";var Ot=require("bs.util.ObjectTools");class Ct{static volume(t){let e=!1,s=null;if(s=Wt.getSessionStorage(),e=null!=s,e){let t,e=NaN,s=!1,i=null;if(i=Wt.getSessionStorage(),s=null!=i,s){try{let t,s=null,i=!1,a=null;if(a=Wt.getSessionStorage(),i=null!=a,i){let e=null;e=Wt.getSessionStorage(),s=e.getItem("_brplayer_vol"),null==s||(s=u.trim(s)),t=s;}else t=s;null!=t&&""!=t&&(e=parseFloat(t));}catch(t){}t=e;}else t=e;if(null!=t&&!isNaN(t)&&isFinite(t))return t}let i=Object.prototype.hasOwnProperty.call(t,"volume")?parseFloat(o.field(t,"volume")):null;return null!=i&&!isNaN(i)&&isFinite(i)?i:1}static mute(t){let e,s=!1,i=null;if(i=Wt.getSessionStorage(),s=null!=i,s){let t=!1,s=!1,i=null;if(i=Wt.getSessionStorage(),s=null!=i,s){try{let e,s=null,i=!1,a=null;if(a=Wt.getSessionStorage(),i=null!=a,i){let t=null;t=Wt.getSessionStorage(),s=t.getItem("_brplayer_muted"),null==s||(s=u.trim(s)),e=s;}else e=s;null!=e&&""!=e&&(t=null!=e&&"1"==e);}catch(t){}e=t;}else e=!1;}else e=!1;if(e)return !0;if(!Object.prototype.hasOwnProperty.call(t,"mute"))return !1;switch(o.field(t,"mute")){case 1:case"true":case!0:return !0;default:return !1}}static audio(t){let e=null;Object.prototype.hasOwnProperty.call(t,"audio")&&(e=o.field(t,"audio"));let s=!1,i=null;if(i=Wt.getSessionStorage(),s=null!=i,s){let t,s=null,i=!1,a=null;if(a=Wt.getSessionStorage(),i=null!=a,i){try{let t,e=null,i=!1,a=null;if(a=Wt.getSessionStorage(),i=null!=a,i){let s=null;s=Wt.getSessionStorage(),e=s.getItem("_brplayer_aud_lang"),null==e||(e=u.trim(e)),t=e;}else t=e;null!=t&&""!=t&&(s=t);}catch(t){}t=s;}else t=s;null!=t&&(e=t);}return e}static subtitles(t){let e=null;Object.prototype.hasOwnProperty.call(t,"subtitles")&&(e=o.field(t,"subtitles"));let s=!1,i=null;if(i=Wt.getSessionStorage(),s=null!=i,s){let t,s=null,i=!1,a=null;if(a=Wt.getSessionStorage(),i=null!=a,i){try{let t,e=null,i=!1,a=null;if(a=Wt.getSessionStorage(),i=null!=a,i){let s=null;s=Wt.getSessionStorage(),e=s.getItem("_brplayer_sub_lang"),null==e||(e=u.trim(e)),t=e;}else t=e;null!=t&&""!=t&&(s=t);}catch(t){}t=s;}else t=s;null!=t&&(e=t);}return e}static fullscreenEnabled(t){if(Object.prototype.hasOwnProperty.call(t,"hideUIElements")){let e=o.field(t,"hideUIElements");null!=e&&"string"==typeof e&&e.indexOf("fullscreenButton")>-1&&(t.fullscreenEnabled=!1);}if(!Object.prototype.hasOwnProperty.call(t,"fullscreenEnabled"))return !0;switch(o.field(t,"fullscreenEnabled")){case 0:case"false":case!1:return !1;default:return !0}}static decodeBase64(t){try{return Vt.urlDecode(t).toString()}catch(e){try{return Vt.decode(t).toString()}catch(e){try{return window.atob(t)}catch(t){return null}}}}}Ct.__name__="bs.util.PlayerVariableParser";var Tt=require("bs.util.TextTools"),Mt=require("bs.util.UUID");class It extends Error{constructor(t,e,s){super(t),this.message=t,this.__previousException=e,this.__nativeException=null!=s?s:this;}get_native(){return this.__nativeException}static caught(t){return t instanceof It?t:t instanceof Error?new It(t.message,null,t):new Dt(t,null,t)}static thrown(t){if(t instanceof It)return t.get_native();if(t instanceof Error)return t;return new Dt(t)}}It.__name__="haxe.Exception",It.__super__=Error,Object.assign(It.prototype,{__class__:It});var Lt=require("haxe.Timer");class Dt extends It{constructor(t,e,s){super(String(t),e,s),this.value=t;}}Dt.__name__="haxe.ValueException",Dt.__super__=It,Object.assign(Dt.prototype,{__class__:Dt});var Ft=require("haxe.io.Bytes"),jt=a["haxe.io.Encoding"]={__ename__:!0,__constructs__:null,UTF8:{_hx_name:"UTF8",_hx_index:0,__enum__:"haxe.io.Encoding",toString:i},RawNative:{_hx_name:"RawNative",_hx_index:1,__enum__:"haxe.io.Encoding",toString:i}};jt.__constructs__=[jt.UTF8,jt.RawNative];var Vt=require("haxe.crypto.Base64");class Nt{constructor(){}bitOR(t,e){return (t>>>1|e>>>1)<<1|1&t|1&e}bitXOR(t,e){return (t>>>1^e>>>1)<<1|1&t^1&e}bitAND(t,e){return (t>>>1&e>>>1)<<1|1&t&e}addme(t,e){let s=(65535&t)+(65535&e);return (t>>16)+(e>>16)+(s>>16)<<16|65535&s}hex(t){let e="",s=0;for(;s<t.length;){let i=t[s];++s,e+="0123456789abcdef".charAt(i>>4&15)+"0123456789abcdef".charAt(15&i),e+="0123456789abcdef".charAt(i>>12&15)+"0123456789abcdef".charAt(i>>8&15),e+="0123456789abcdef".charAt(i>>20&15)+"0123456789abcdef".charAt(i>>16&15),e+="0123456789abcdef".charAt(i>>28&15)+"0123456789abcdef".charAt(i>>24&15);}return e}rol(t,e){return t<<e|t>>>32-e}cmn(t,e,s,i,a,n){return this.addme(this.rol(this.addme(this.addme(e,t),this.addme(i,n)),a),s)}ff(t,e,s,i,a,n,l){return this.cmn(this.bitOR(this.bitAND(e,s),this.bitAND(~e,i)),t,e,a,n,l)}gg(t,e,s,i,a,n,l){return this.cmn(this.bitOR(this.bitAND(e,i),this.bitAND(s,~i)),t,e,a,n,l)}hh(t,e,s,i,a,n,l){return this.cmn(this.bitXOR(this.bitXOR(e,s),i),t,e,a,n,l)}ii(t,e,s,i,a,n,l){return this.cmn(this.bitXOR(s,this.bitOR(e,~i)),t,e,a,n,l)}doEncode(t){let e=1732584193,s=-271733879,i=-1732584194,a=271733878,n=0;for(;n<t.length;){let l=e,r=s,o=i,h=a;e=this.ff(e,s,i,a,t[n],7,-680876936),a=this.ff(a,e,s,i,t[n+1],12,-389564586),i=this.ff(i,a,e,s,t[n+2],17,606105819),s=this.ff(s,i,a,e,t[n+3],22,-1044525330),e=this.ff(e,s,i,a,t[n+4],7,-176418897),a=this.ff(a,e,s,i,t[n+5],12,1200080426),i=this.ff(i,a,e,s,t[n+6],17,-1473231341),s=this.ff(s,i,a,e,t[n+7],22,-45705983),e=this.ff(e,s,i,a,t[n+8],7,1770035416),a=this.ff(a,e,s,i,t[n+9],12,-1958414417),i=this.ff(i,a,e,s,t[n+10],17,-42063),s=this.ff(s,i,a,e,t[n+11],22,-1990404162),e=this.ff(e,s,i,a,t[n+12],7,1804603682),a=this.ff(a,e,s,i,t[n+13],12,-40341101),i=this.ff(i,a,e,s,t[n+14],17,-1502002290),s=this.ff(s,i,a,e,t[n+15],22,1236535329),e=this.gg(e,s,i,a,t[n+1],5,-165796510),a=this.gg(a,e,s,i,t[n+6],9,-1069501632),i=this.gg(i,a,e,s,t[n+11],14,643717713),s=this.gg(s,i,a,e,t[n],20,-373897302),e=this.gg(e,s,i,a,t[n+5],5,-701558691),a=this.gg(a,e,s,i,t[n+10],9,38016083),i=this.gg(i,a,e,s,t[n+15],14,-660478335),s=this.gg(s,i,a,e,t[n+4],20,-405537848),e=this.gg(e,s,i,a,t[n+9],5,568446438),a=this.gg(a,e,s,i,t[n+14],9,-1019803690),i=this.gg(i,a,e,s,t[n+3],14,-187363961),s=this.gg(s,i,a,e,t[n+8],20,1163531501),e=this.gg(e,s,i,a,t[n+13],5,-1444681467),a=this.gg(a,e,s,i,t[n+2],9,-51403784),i=this.gg(i,a,e,s,t[n+7],14,1735328473),s=this.gg(s,i,a,e,t[n+12],20,-1926607734),e=this.hh(e,s,i,a,t[n+5],4,-378558),a=this.hh(a,e,s,i,t[n+8],11,-2022574463),i=this.hh(i,a,e,s,t[n+11],16,1839030562),s=this.hh(s,i,a,e,t[n+14],23,-35309556),e=this.hh(e,s,i,a,t[n+1],4,-1530992060),a=this.hh(a,e,s,i,t[n+4],11,1272893353),i=this.hh(i,a,e,s,t[n+7],16,-155497632),s=this.hh(s,i,a,e,t[n+10],23,-1094730640),e=this.hh(e,s,i,a,t[n+13],4,681279174),a=this.hh(a,e,s,i,t[n],11,-358537222),i=this.hh(i,a,e,s,t[n+3],16,-722521979),s=this.hh(s,i,a,e,t[n+6],23,76029189),e=this.hh(e,s,i,a,t[n+9],4,-640364487),a=this.hh(a,e,s,i,t[n+12],11,-421815835),i=this.hh(i,a,e,s,t[n+15],16,530742520),s=this.hh(s,i,a,e,t[n+2],23,-995338651),e=this.ii(e,s,i,a,t[n],6,-198630844),a=this.ii(a,e,s,i,t[n+7],10,1126891415),i=this.ii(i,a,e,s,t[n+14],15,-1416354905),s=this.ii(s,i,a,e,t[n+5],21,-57434055),e=this.ii(e,s,i,a,t[n+12],6,1700485571),a=this.ii(a,e,s,i,t[n+3],10,-1894986606),i=this.ii(i,a,e,s,t[n+10],15,-1051523),s=this.ii(s,i,a,e,t[n+1],21,-2054922799),e=this.ii(e,s,i,a,t[n+8],6,1873313359),a=this.ii(a,e,s,i,t[n+15],10,-30611744),i=this.ii(i,a,e,s,t[n+6],15,-1560198380),s=this.ii(s,i,a,e,t[n+13],21,1309151649),e=this.ii(e,s,i,a,t[n+4],6,-145523070),a=this.ii(a,e,s,i,t[n+11],10,-1120210379),i=this.ii(i,a,e,s,t[n+2],15,718787259),s=this.ii(s,i,a,e,t[n+9],21,-343485551),e=this.addme(e,l),s=this.addme(s,r),i=this.addme(i,o),a=this.addme(a,h),n+=16;}return [e,s,i,a]}static encode(t){let e=new Nt;return e.hex(e.doEncode(Nt.str2blks(t)))}static str2blks(t){let e=Ft.ofString(t),s=1+(e.length+8>>6),i=[],a=16*s,n=0;for(;n<a;)i[n++]=0;let l=0,r=e.length,o=8*r;for(;l<r;)i[l>>2]|=e.b[l]<<(o+l)%4*8,++l;i[l>>2]|=128<<(o+l)%4*8;let h=16*s-2;return i[h]=255&o,i[h]=(i[h]|=(o>>>8&255)<<8)|(o>>>16&255)<<16,i[h]|=(o>>>24&255)<<24,i}}Nt.__name__="haxe.crypto.Md5",Object.assign(Nt.prototype,{__class__:Nt});var Rt=a["haxe.ds.Either"]={__ename__:!0,__constructs__:null,Left:(s=function(t){return {_hx_index:0,v:t,__enum__:"haxe.ds.Either",toString:i}},s._hx_name="Left",s.__params__=["v"],s),Right:(s=function(t){return {_hx_index:1,v:t,__enum__:"haxe.ds.Either",toString:i}},s._hx_name="Right",s.__params__=["v"],s)};Rt.__constructs__=[Rt.Left,Rt.Right];var Bt=require("haxe.ds.StringMap");class zt{static getClass(t){if(null==t)return null;if(t instanceof Array)return Array;{let e=t.__class__;if(null!=e)return e;let s=zt.__nativeClassName(t);return null!=s?zt.__resolveNativeClass(s):null}}static __string_rec(t,e){if(null==t)return "null";if(e.length>=5)return "<...>";let s=typeof t;switch("function"==s&&(t.__name__||t.__ename__)&&(s="object"),s){case"function":return "<function>";case"object":if(t.__enum__){let s=a[t.__enum__].__constructs__[t._hx_index],i=s._hx_name;return s.__params__?(e+="\t",i+"("+function(i){let a=[];{let i=0,n=s.__params__;for(;i<n.length;){let s=n[i];i+=1,a.push(zt.__string_rec(t[s],e));}}return a}().join(",")+")"):i}if(t instanceof Array){let s="[";e+="\t";let i=0,a=t.length;for(;i<a;){let a=i++;s+=(a>0?",":"")+zt.__string_rec(t[a],e);}return s+="]",s}let s;try{s=t.toString;}catch(t){return "???"}if(null!=s&&s!=Object.toString&&"function"==typeof s){let e=t.toString();if("[object Object]"!=e)return e}let i="{\n";e+="\t";let n=null!=t.hasOwnProperty,l=null;for(l in t)n&&!t.hasOwnProperty(l)||"prototype"!=l&&"__class__"!=l&&"__super__"!=l&&"__interfaces__"!=l&&"__properties__"!=l&&(2!=i.length&&(i+=", \n"),i+=e+l+" : "+zt.__string_rec(t[l],e));return i+="\n"+(e=e.substring(1))+"}",i;case"string":return t;default:return String(t)}}static __interfLoop(t,e){for(;;){if(null==t)return !1;if(t==e)return !0;let s=t.__interfaces__;if(null!=s&&(null==t.__super__||t.__super__.__interfaces__!=s)){let t=0,i=s.length;for(;t<i;){let i=s[t++];if(i==e||zt.__interfLoop(i,e))return !0}}t=t.__super__;}}static __instanceof(t,e){if(null==e)return !1;switch(e){case Array:return t instanceof Array;case Gt:return "boolean"==typeof t;case Ht:return null!=t;case $t:return "number"==typeof t;case qt:return "number"==typeof t&&(0|t)===t;case String:return "string"==typeof t;default:if(null==t)return !1;if("function"==typeof e){if(zt.__downcastCheck(t,e))return !0}else if("object"==typeof e&&zt.__isNativeObj(e)&&t instanceof e)return !0;return e==Xt&&null!=t.__name__||(e==Kt&&null!=t.__ename__||null!=t.__enum__&&a[t.__enum__]==e)}}static __downcastCheck(t,e){return t instanceof e||!!e.__isInterface__&&zt.__interfLoop(zt.getClass(t),e)}static __cast(t,e){if(null==t||zt.__instanceof(t,e))return t;throw It.thrown("Cannot cast "+h.string(t)+" to "+h.string(e))}static __nativeClassName(t){let e=zt.__toStr.call(t).slice(8,-1);return "Object"==e||"Function"==e||"Math"==e||"JSON"==e?null:e}static __isNativeObj(t){return null!=zt.__nativeClassName(t)}static __resolveNativeClass(t){return e[t]}}zt.__name__="js.Boot";class Wt{static getSessionStorage(){try{let t=window.sessionStorage;if(t.getItem(""),0==t.length){let e="_hx_"+Math.random();t.setItem(e,e),t.removeItem(e);}return t}catch(t){return null}}}function Ut(t,s){return null==s?null:(null==s.__id__&&(s.__id__=e.$haxeUID++),null==t.hx__closures__?t.hx__closures__={}:i=t.hx__closures__[s.__id__],null==i&&(i=s.bind(t),t.hx__closures__[s.__id__]=i),i);var i;}Wt.__name__="js.Browser",e.$haxeUID|=0,Object.defineProperty(String.prototype,"__class__",{value:String,enumerable:!1,writable:!0}),String.__name__="String",Array.__name__="Array",Date.prototype.__class__=Date,Date.__name__="Date";var qt={},Ht={},$t=Number,Gt=Boolean,Xt={},Kt={};zt.__toStr={}.toString,T._hx_skip_constructor=!1,F.__plugfaces__="IPlugin",V._hx_skip_constructor=!1,$._hx_skip_constructor=!1,kt.isFullscreenEmulation=!1,kt.isFullscreenEmulationActive=!1;}(exports,window);
function t(t,n,i){return n=h(n),f(t,e$1()?Reflect.construct(n,i||[],h(t).constructor):n.apply(t,i))}function e$1(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})));}catch(t){}return (e$1=function(){return !!t})()}function n(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i);}return n}function i(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?n(Object(i),!0).forEach((function(e){a$1(t,e,i[e]);})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):n(Object(i)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e));}));}return t}function r(t){var e=function(t,e){if("object"!=typeof t||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var i=n.call(t,e||"default");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return ("string"===e?String:Number)(t)}(t,"string");return "symbol"==typeof e?e:String(e)}function o(t){return o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},o(t)}function l(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function s$1(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,r(i.key),i);}}function u(t,e,n){return e&&s$1(t.prototype,e),n&&s$1(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function a$1(t,e,n){return (e=r(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function c(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&d(t,e);}function h(t){return h=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},h(t)}function d(t,e){return d=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},d(t,e)}function v(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function f(t,e){if(e&&("object"==typeof e||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return v(t)}function _(){return _="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,n){var i=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=h(t)););return t}(t,e);if(i){var r=Object.getOwnPropertyDescriptor(i,e);return r.get?r.get.call(arguments.length<3?t:n):r.value}},_.apply(this,arguments)}function p(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var i,r,o,l,s=[],u=!0,a=!1;try{if(o=(n=n.call(t)).next,0===e){if(Object(n)!==n)return;u=!1;}else for(;!(u=(i=o.call(n)).done)&&(s.push(i.value),s.length!==e);u=!0);}catch(t){a=!0,r=t;}finally{try{if(!u&&null!=n.return&&(l=n.return(),Object(l)!==l))return}finally{if(a)throw r}}return s}}(t,e)||m(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function y(t){return function(t){if(Array.isArray(t))return g(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||m(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function m(t,e){if(t){if("string"==typeof t)return g(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return "Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?g(t,e):void 0}}function g(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}function b(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=m(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var i=0,r=function(){};return {s:r,n:function(){return i>=t.length?{done:!0}:{done:!1,value:t[i++]}},e:function(t){throw t},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,l=!0,s=!1;return {s:function(){n=n.call(t);},n:function(){var t=n.next();return l=t.done,t},e:function(t){s=!0,o=t;},f:function(){try{l||null==n.return||n.return();}finally{if(s)throw o}}}}var $,w=globalThis,A=w.trustedTypes,k=A?A.createPolicy("lit-html",{createHTML:function(t){return t}}):void 0,x="$lit$",C="lit$".concat((Math.random()+"").slice(9),"$"),O="?"+C,E="<".concat(O,">"),S=document,I=function(){return S.createComment("")},T=function(t){return null===t||"object"!=o(t)&&"function"!=typeof t},j=Array.isArray,P="[ \t\n\f\r]",M=/<(?:(!--|\/[^a-zA-Z])|(\/?[a-zA-Z][^>\s]*)|(\/?$))/g,N=/-->/g,H=/>/g,V=RegExp(">|".concat(P,"(?:([^\\s\"'>=/]+)(").concat(P,"*=").concat(P,"*(?:[^ \t\n\f\r\"'`<>=]|(\"|')|))|$)"),"g"),L=/'/g,D=/"/g,R=/^(?:script|style|textarea|title)$/i,B=function(t){return function(e){for(var n=arguments.length,i=new Array(n>1?n-1:0),r=1;r<n;r++)i[r-1]=arguments[r];return {_$litType$:t,strings:e,values:i}}},U=B(1),q=B(2),Y=Symbol.for("lit-noChange"),W=Symbol.for("lit-nothing"),z=new WeakMap,F=S.createTreeWalker(S,129);
/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */function Z(t,e){if(!Array.isArray(t)||!t.hasOwnProperty("raw"))throw Error("invalid template strings array");return void 0!==k?k.createHTML(e):e}var Q=function(t,e){for(var n,i=t.length-1,r=[],o=2===e?"<svg>":"",l=M,s=0;s<i;s++){for(var u=t[s],a=void 0,c=void 0,h=-1,d=0;d<u.length&&(l.lastIndex=d,null!==(c=l.exec(u)));){var v;d=l.lastIndex,l===M?"!--"===c[1]?l=N:void 0!==c[1]?l=H:void 0!==c[2]?(R.test(c[2])&&(n=RegExp("</"+c[2],"g")),l=V):void 0!==c[3]&&(l=V):l===V?">"===c[0]?(l=null!==(v=n)&&void 0!==v?v:M,h=-1):void 0===c[1]?h=-2:(h=l.lastIndex-c[2].length,a=c[1],l=void 0===c[3]?V:'"'===c[3]?D:L):l===D||l===L?l=V:l===N||l===H?l=M:(l=V,n=void 0);}var f=l===V&&t[s+1].startsWith("/>")?" ":"";o+=l===M?u+E:h>=0?(r.push(a),u.slice(0,h)+x+u.slice(h)+C+f):u+C+(-2===h?s:f);}return [Z(t,o+(t[i]||"<?>")+(2===e?"</svg>":"")),r]},G=function(){function t(e,n){var i,r=e.strings,o=e._$litType$;l(this,t),this.parts=[];var s=0,u=0,a=r.length-1,c=this.parts,h=p(Q(r,o),2),d=h[0],v=h[1];if(this.el=t.createElement(d,n),F.currentNode=this.el.content,2===o){var f=this.el.content.firstChild;f.replaceWith.apply(f,y(f.childNodes));}for(;null!==(i=F.nextNode())&&c.length<a;){if(1===i.nodeType){if(i.hasAttributes()){var _,m=b(i.getAttributeNames());try{for(m.s();!(_=m.n()).done;){var g=_.value;if(g.endsWith(x)){var $=v[u++],w=i.getAttribute(g).split(C),k=/([.?@])?(.*)/.exec($);c.push({type:1,index:s,name:k[2],strings:w,ctor:"."===k[1]?et:"?"===k[1]?nt:"@"===k[1]?it:tt}),i.removeAttribute(g);}else g.startsWith(C)&&(c.push({type:6,index:s}),i.removeAttribute(g));}}catch(t){m.e(t);}finally{m.f();}}if(R.test(i.tagName)){var E=i.textContent.split(C),S=E.length-1;if(S>0){i.textContent=A?A.emptyScript:"";for(var T=0;T<S;T++)i.append(E[T],I()),F.nextNode(),c.push({type:2,index:++s});i.append(E[S],I());}}}else if(8===i.nodeType)if(i.data===O)c.push({type:2,index:s});else for(var j=-1;-1!==(j=i.data.indexOf(C,j+1));)c.push({type:7,index:s}),j+=C.length-1;s++;}}return u(t,null,[{key:"createElement",value:function(t,e){var n=S.createElement("template");return n.innerHTML=t,n}}]),t}();function J(t,e){var n,i,r,o,l,s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:t,u=arguments.length>3?arguments[3]:void 0;if(e===Y)return e;var a=void 0!==u?null===(n=s._$Co)||void 0===n?void 0:n[u]:s._$Cl,c=T(e)?void 0:e._$litDirective$;return (null===(i=a)||void 0===i?void 0:i.constructor)!==c&&(null!==(r=a)&&void 0!==r&&null!==(o=r._$AO)&&void 0!==o&&o.call(r,!1),void 0===c?a=void 0:(a=new c(t))._$AT(t,s,u),void 0!==u?(null!==(l=s._$Co)&&void 0!==l?l:s._$Co=[])[u]=a:s._$Cl=a),void 0!==a&&(e=J(t,a._$AS(t,e.values),a,u)),e}var K=function(){function t(e,n){l(this,t),this._$AV=[],this._$AN=void 0,this._$AD=e,this._$AM=n;}return u(t,[{key:"parentNode",get:function(){return this._$AM.parentNode}},{key:"_$AU",get:function(){return this._$AM._$AU}},{key:"u",value:function(t){var e,n=this._$AD,i=n.el.content,r=n.parts,o=(null!==(e=null==t?void 0:t.creationScope)&&void 0!==e?e:S).importNode(i,!0);F.currentNode=o;for(var l=F.nextNode(),s=0,u=0,a=r[0];void 0!==a;){var c;if(s===a.index){var h=void 0;2===a.type?h=new X(l,l.nextSibling,this,t):1===a.type?h=new a.ctor(l,a.name,a.strings,this,t):6===a.type&&(h=new rt(l,this,t)),this._$AV.push(h),a=r[++u];}s!==(null===(c=a)||void 0===c?void 0:c.index)&&(l=F.nextNode(),s++);}return F.currentNode=S,o}},{key:"p",value:function(t){var e,n=0,i=b(this._$AV);try{for(i.s();!(e=i.n()).done;){var r=e.value;void 0!==r&&(void 0!==r.strings?(r._$AI(t,r,n),n+=r.strings.length-2):r._$AI(t[n])),n++;}}catch(t){i.e(t);}finally{i.f();}}}]),t}(),X=function(){function t(e,n,i,r){var o;l(this,t),this.type=2,this._$AH=W,this._$AN=void 0,this._$AA=e,this._$AB=n,this._$AM=i,this.options=r,this._$Cv=null===(o=null==r?void 0:r.isConnected)||void 0===o||o;}return u(t,[{key:"_$AU",get:function(){var t,e;return null!==(t=null===(e=this._$AM)||void 0===e?void 0:e._$AU)&&void 0!==t?t:this._$Cv}},{key:"parentNode",get:function(){var t,e=this._$AA.parentNode,n=this._$AM;return void 0!==n&&11===(null===(t=e)||void 0===t?void 0:t.nodeType)&&(e=n.parentNode),e}},{key:"startNode",get:function(){return this._$AA}},{key:"endNode",get:function(){return this._$AB}},{key:"_$AI",value:function(t){t=J(this,t,arguments.length>1&&void 0!==arguments[1]?arguments[1]:this),T(t)?t===W||null==t||""===t?(this._$AH!==W&&this._$AR(),this._$AH=W):t!==this._$AH&&t!==Y&&this._(t):void 0!==t._$litType$?this.$(t):void 0!==t.nodeType?this.T(t):function(t){return j(t)||"function"==typeof(null==t?void 0:t[Symbol.iterator])}(t)?this.k(t):this._(t);}},{key:"S",value:function(t){return this._$AA.parentNode.insertBefore(t,this._$AB)}},{key:"T",value:function(t){this._$AH!==t&&(this._$AR(),this._$AH=this.S(t));}},{key:"_",value:function(t){this._$AH!==W&&T(this._$AH)?this._$AA.nextSibling.data=t:this.T(S.createTextNode(t)),this._$AH=t;}},{key:"$",value:function(t){var e,n=t.values,i=t._$litType$,r="number"==typeof i?this._$AC(t):(void 0===i.el&&(i.el=G.createElement(Z(i.h,i.h[0]),this.options)),i);if((null===(e=this._$AH)||void 0===e?void 0:e._$AD)===r)this._$AH.p(n);else {var o=new K(r,this),l=o.u(this.options);o.p(n),this.T(l),this._$AH=o;}}},{key:"_$AC",value:function(t){var e=z.get(t.strings);return void 0===e&&z.set(t.strings,e=new G(t)),e}},{key:"k",value:function(e){j(this._$AH)||(this._$AH=[],this._$AR());var n,i,r=this._$AH,o=0,l=b(e);try{for(l.s();!(i=l.n()).done;){var s=i.value;o===r.length?r.push(n=new t(this.S(I()),this.S(I()),this,this.options)):n=r[o],n._$AI(s),o++;}}catch(t){l.e(t);}finally{l.f();}o<r.length&&(this._$AR(n&&n._$AB.nextSibling,o),r.length=o);}},{key:"_$AR",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this._$AA.nextSibling,e=arguments.length>1?arguments[1]:void 0;for(null===(n=this._$AP)||void 0===n||n.call(this,!1,!0,e);t&&t!==this._$AB;){var n,i=t.nextSibling;t.remove(),t=i;}}},{key:"setConnected",value:function(t){var e;void 0===this._$AM&&(this._$Cv=t,null===(e=this._$AP)||void 0===e||e.call(this,t));}}]),t}(),tt=function(){function t(e,n,i,r,o){l(this,t),this.type=1,this._$AH=W,this._$AN=void 0,this.element=e,this.name=n,this._$AM=r,this.options=o,i.length>2||""!==i[0]||""!==i[1]?(this._$AH=Array(i.length-1).fill(new String),this.strings=i):this._$AH=W;}return u(t,[{key:"tagName",get:function(){return this.element.tagName}},{key:"_$AU",get:function(){return this._$AM._$AU}},{key:"_$AI",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this,n=arguments.length>2?arguments[2]:void 0,i=arguments.length>3?arguments[3]:void 0,r=this.strings,o=!1;if(void 0===r)t=J(this,t,e,0),(o=!T(t)||t!==this._$AH&&t!==Y)&&(this._$AH=t);else {var l,s,u=t;for(t=r[0],l=0;l<r.length-1;l++){var a;(s=J(this,u[n+l],e,l))===Y&&(s=this._$AH[l]),o||(o=!T(s)||s!==this._$AH[l]),s===W?t=W:t!==W&&(t+=(null!==(a=s)&&void 0!==a?a:"")+r[l+1]),this._$AH[l]=s;}}o&&!i&&this.j(t);}},{key:"j",value:function(t){t===W?this.element.removeAttribute(this.name):this.element.setAttribute(this.name,null!=t?t:"");}}]),t}(),et=function(e){function n(){var e;return l(this,n),(e=t(this,n,arguments)).type=3,e}return c(n,tt),u(n,[{key:"j",value:function(t){this.element[this.name]=t===W?void 0:t;}}]),n}(),nt=function(e){function n(){var e;return l(this,n),(e=t(this,n,arguments)).type=4,e}return c(n,tt),u(n,[{key:"j",value:function(t){this.element.toggleAttribute(this.name,!!t&&t!==W);}}]),n}(),it=function(e){function n(e,i,r,o,s){var u;return l(this,n),(u=t(this,n,[e,i,r,o,s])).type=5,u}return c(n,tt),u(n,[{key:"_$AI",value:function(t){var e;if((t=null!==(e=J(this,t,arguments.length>1&&void 0!==arguments[1]?arguments[1]:this,0))&&void 0!==e?e:W)!==Y){var n=this._$AH,i=t===W&&n!==W||t.capture!==n.capture||t.once!==n.once||t.passive!==n.passive,r=t!==W&&(n===W||i);i&&this.element.removeEventListener(this.name,this,n),r&&this.element.addEventListener(this.name,this,t),this._$AH=t;}}},{key:"handleEvent",value:function(t){var e,n;"function"==typeof this._$AH?this._$AH.call(null!==(e=null===(n=this.options)||void 0===n?void 0:n.host)&&void 0!==e?e:this.element,t):this._$AH.handleEvent(t);}}]),n}(),rt=function(){function t(e,n,i){l(this,t),this.element=e,this.type=6,this._$AN=void 0,this._$AM=n,this.options=i;}return u(t,[{key:"_$AU",get:function(){return this._$AM._$AU}},{key:"_$AI",value:function(t){J(this,t);}}]),t}(),ot=w.litHtmlPolyfillSupport;null!=ot&&ot(G,X),(null!==($=w.litHtmlVersions)&&void 0!==$?$:w.litHtmlVersions=[]).push("3.1.2");var lt=function(t,e,n){var i,r=null!==(i=null==n?void 0:n.renderBefore)&&void 0!==i?i:e,o=r._$litPart$;if(void 0===o){var l,s=null!==(l=null==n?void 0:n.renderBefore)&&void 0!==l?l:null;r._$litPart$=o=new X(e.insertBefore(I(),s),s,void 0,null!=n?n:{});}return o._$AI(t),o},st=1,ut=2,at=6,ct=function(t){return function(){for(var e=arguments.length,n=new Array(e),i=0;i<e;i++)n[i]=arguments[i];return {_$litDirective$:t,values:n}}},ht=function(){function t(e){l(this,t);}return u(t,[{key:"_$AU",get:function(){return this._$AM._$AU}},{key:"_$AT",value:function(t,e,n){this._$Ct=t,this._$AM=e,this._$Ci=n;}},{key:"_$AS",value:function(t,e){return this.update(t,e)}},{key:"update",value:function(t,e){return this.render.apply(this,y(e))}}]),t}(),dt=function t(e,n){var i=e._$AN;if(void 0===i)return !1;var r,o=b(i);try{for(o.s();!(r=o.n()).done;){var l,s=r.value;null!==(l=s._$AO)&&void 0!==l&&l.call(s,n,!1),t(s,n);}}catch(t){o.e(t);}finally{o.f();}return !0},vt=function(t){var e,n;do{var i;if(void 0===(e=t._$AM))break;(n=e._$AN).delete(t),t=e;}while(0===(null===(i=n)||void 0===i?void 0:i.size))},ft=function(t){for(var e;e=t._$AM;t=e){var n=e._$AN;if(void 0===n)e._$AN=n=new Set;else if(n.has(t))break;n.add(t),yt(e);}};
/**
 * @license
 * Copyright 2018 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */function _t(t){void 0!==this._$AN?(vt(this),this._$AM=t,ft(this)):this._$AM=t;}function pt(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=this._$AH,r=this._$AN;if(void 0!==r&&0!==r.size)if(e)if(Array.isArray(i))for(var o=n;o<i.length;o++)dt(i[o],!1),vt(i[o]);else null!=i&&(dt(i,!1),vt(i));else dt(this,t);}var yt=function(t){var e,n;t.type==ut&&(null!==(e=t._$AP)&&void 0!==e||(t._$AP=pt),null!==(n=t._$AQ)&&void 0!==n||(t._$AQ=_t));},mt=function(e){function n(){var e;return l(this,n),(e=t(this,n,arguments))._$AN=void 0,e}return c(n,ht),u(n,[{key:"_$AT",value:function(t,e,i){_(h(n.prototype),"_$AT",this).call(this,t,e,i),ft(this),this.isConnected=t._$AU;}},{key:"_$AO",value:function(t){var e,n,i=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];t!==this.isConnected&&(this.isConnected=t,t?null===(e=this.reconnected)||void 0===e||e.call(this):null===(n=this.disconnected)||void 0===n||n.call(this)),i&&(dt(this,t),vt(this));}},{key:"setValue",value:function(t){if(function(t){return void 0===t.strings}(this._$Ct))this._$Ct._$AI(t,this);else {var e=y(this._$Ct._$AH);e[this._$Ci]=t,this._$Ct._$AI(e,this,0);}}},{key:"disconnected",value:function(){}},{key:"reconnected",value:function(){}}]),n}(),gt=new WeakMap,bt=ct(function(e){function n(){return l(this,n),t(this,n,arguments)}return c(n,mt),u(n,[{key:"render",value:function(t){return W}},{key:"update",value:function(t,e){var n,i=p(e,1)[0],r=i!==this.Y;return r&&void 0!==this.Y&&this.rt(void 0),(r||this.lt!==this.ct)&&(this.Y=i,this.ht=null===(n=t.options)||void 0===n?void 0:n.host,this.rt(this.ct=t.element)),W}},{key:"rt",value:function(t){if("function"==typeof this.Y){var e,n=null!==(e=this.ht)&&void 0!==e?e:globalThis,i=gt.get(n);void 0===i&&(i=new WeakMap,gt.set(n,i)),void 0!==i.get(this.Y)&&this.Y.call(this.ht,void 0),i.set(this.Y,t),void 0!==t&&this.Y.call(this.ht,t);}else this.Y.value=t;}},{key:"lt",get:function(){var t,e,n;return "function"==typeof this.Y?null===(t=gt.get(null!==(e=this.ht)&&void 0!==e?e:globalThis))||void 0===t?void 0:t.get(this.Y):null===(n=this.Y)||void 0===n?void 0:n.value}},{key:"disconnected",value:function(){this.lt===this.ct&&this.rt(void 0);}},{key:"reconnected",value:function(){this.rt(this.ct);}}]),n}()),$t="important",wt=" !"+$t,At=ct(function(e){function n(e){var i,r;if(l(this,n),r=t(this,n,[e]),e.type!==st||"style"!==e.name||(null===(i=e.strings)||void 0===i?void 0:i.length)>2)throw Error("The `styleMap` directive must be used in the `style` attribute and must be the only part in the attribute.");return f(r)}return c(n,ht),u(n,[{key:"render",value:function(t){return Object.keys(t).reduce((function(e,n){var i=t[n];return null==i?e:e+"".concat(n=n.includes("-")?n:n.replace(/(?:^(webkit|moz|ms|o)|)(?=[A-Z])/g,"-$&").toLowerCase(),":").concat(i,";")}),"")}},{key:"update",value:function(t,e){var n=p(e,1)[0],i=t.element.style;if(void 0===this.ft)return this.ft=new Set(Object.keys(n)),this.render(n);var r,o=b(this.ft);try{for(o.s();!(r=o.n()).done;){var l=r.value;null==n[l]&&(this.ft.delete(l),l.includes("-")?i.removeProperty(l):i[l]=null);}}catch(t){o.e(t);}finally{o.f();}for(var s in n){var u=n[s];if(null!=u){this.ft.add(s);var a="string"==typeof u&&u.endsWith(wt);s.includes("-")||a?i.setProperty(s,a?u.slice(0,-11):u,a?$t:""):i[s]=u;}}return Y}}]),n}()),kt=function(e){function n(e){var i;if(l(this,n),(i=t(this,n,[e])).it=W,e.type!==ut)throw Error(i.constructor.directiveName+"() can only be used in child bindings");return f(i)}return c(n,ht),u(n,[{key:"render",value:function(t){if(t===W||null==t)return this._t=void 0,this.it=t;if(t===Y)return t;if("string"!=typeof t)throw Error(this.constructor.directiveName+"() called with a non-string value");if(t===this.it)return this._t;this.it=t;var e=[t];return e.raw=e,this._t={_$litType$:this.constructor.resultType,strings:e,values:[]}}}]),n}();kt.directiveName="unsafeHTML",kt.resultType=1;var xt,Ct=ct(kt),Ot=function(e){function n(e){var i;l(this,n),a$1(v(i=t(this,n,[e])),"_id",null),a$1(v(i),"_baseUrl",null);var r=e.type,o=e.element,s=e.options;if(r!==at)throw new Error("The `icon` directive must be used as `element` directive");var u=s.host.state.prefix;return i._addCssClass(o,u),i}return c(n,ht),u(n,[{key:"update",value:function(t,e){var n=p(e,1)[0];if(!n)return Y;var i=n.id,r=location.hash?location.href.split(location.hash).join(""):location.href;if(this._id===i&&this._baseUrl===r)return Y;var o,l,s=this._parse(t,n),u=s.element,a=s.host,c=s.prefix,h=s.skinIcoPrefix,d=s.type,v=s.group;try{switch(d){case"css":this._addCssClass(u,c,v),this._updateId(u,i);break;case"svg":lt(q(xt||(o=['<svg xmlns="http://www.w3.org/2000/svg"><use href="',"#","",'"></use></svg>'],l||(l=o.slice(0)),xt=Object.freeze(Object.defineProperties(o,{raw:{value:Object.freeze(l)}}))),r,h,i),u,{host:a}),this._addCssClass(u,c,v),this._updateId(u,i);}}catch(t){console.error(t);}return this._baseUrl=r,Y}},{key:"render",value:function(t){return Y}},{key:"_parse",value:function(t,e){var n=t.element,i=t.options.host,r=i.skinIcoPrefix,o=i.state,l=o.prefix,s=o.icon,u=null,a=null;return "group"in e&&e.group in s&&(u=s[a=e.group].type),!u&&null!=s&&s.type&&(u=null==s?void 0:s.type),{element:n,host:i,skinIcoPrefix:r,prefix:l,type:u,group:a}}},{key:"_updateId",value:function(t,e){t.classList.contains(this._id)&&t.classList.remove(this._id),t.classList.contains(e)||t.classList.add(e),this._id=e;}},{key:"_addCssClass",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,i="".concat(e,"-ico");if(t.classList.contains(i)||t.classList.add(i),null!=n){var r="".concat(e,"-").concat(n,"-ico");t.classList.contains(r)||t.classList.add(r);}}}]),n}(),Et=ct(Ot),St=ct(function(e){function n(e){var i;if(l(this,n),a$1(v(i=t(this,n,[e])),"_target",null),a$1(v(i),"_count",0),a$1(v(i),"_defaultSingleClick",null),a$1(v(i),"defaultDoubleClick",null),e.type!==at)throw new Error("The `multiclick` directive must be used as `element` directive");var r=i._handleClick.bind(v(i)),o=e.element;return o&&o.removeEventListener("click",r),null==o||o.addEventListener("click",r),i}return c(n,ht),u(n,[{key:"update",value:function(t,e){var n=p(e,2),i=n[0],r=n[1];return this._defaultSingleClick=i,this._defaultDoubleClick=r,Y}},{key:"render",value:function(t,e){return this._defaultSingleClick=t,this._defaultDoubleClick=e,Y}},{key:"_handleClick",value:function(t){var e=this;if(null!=this.timeout&&clearTimeout(this.timeout),t.target.isSameNode(this._target)||(this._count=0),this._target=t.target,this._count++,t.defaultPrevented)return this._count=0,void(this._target=null);this._dispatchEvent("multiclick"),this.timeout=setTimeout((function(){if(null!=e.timeout&&clearTimeout(e.timeout),t.defaultPrevented)return e._count=0,e._dispatchEvent("multiclick"),void(e._target=null);e._count>1?("function"==typeof e._defaultDoubleClick&&e._defaultDoubleClick(t),e._dispatchEvent("doublemulticlick")):("function"==typeof e._defaultSingleClick&&e._defaultSingleClick(t),e._dispatchEvent("singlemulticlick")),e._count=0,e._target=null;}),250);}},{key:"_dispatchEvent",value:function(t){this._target.dispatchEvent(new CustomEvent(t,{detail:{count:this._count}}));}}]),n}()),It=function(e){function n(e){var i;l(this,n),a$1(v(i=t(this,n,[e])),"_prefix",null),a$1(v(i),"_delayScrollIdx",null),a$1(v(i),"_delayCssVarsIdx",null),a$1(v(i),"_observer",null),a$1(v(i),"_element",void 0),a$1(v(i),"_triggerElement",void 0),a$1(v(i),"_windowElement",void 0),a$1(v(i),"_anchorBox",void 0),a$1(v(i),"_windowBox",void 0),a$1(v(i),"_handleObserver",(function(t,e){if(null!=i._prefix){var n,r=b(t);try{for(r.s();!(n=r.n()).done;){var o=n.value,l=o.type,s=o.target;if("attributes"===l){var u,a,c,h,d=s.classList;if(d&&0!==(null==d?void 0:d.length))if(d.contains("".concat(i._prefix,"-popup-trigger"))&&i._triggerElement!=s)null===(u=i._triggerElement)||void 0===u||u.removeEventListener("mouseover",i._handleTriggerMouseOver),null===(a=i._triggerElement)||void 0===a||a.removeEventListener("click",i._handleTriggerClick),i._triggerElement=s,null===(c=i._triggerElement)||void 0===c||c.addEventListener("mouseover",i._handleTriggerMouseOver),null===(h=i._triggerElement)||void 0===h||h.addEventListener("click",i._handleTriggerClick),i._updateCssVars();else d.contains("".concat(i._prefix,"-popup-window"))?(i._windowElement=s,i._updateCssVars()):d.contains("".concat(i._prefix,"-popup-openned"))?(i._updateCssVars(),i._scrollIntoView(null==s?void 0:s.querySelector(".".concat(i._prefix,"-popup-list-item.").concat(i._prefix,"-active")))):d.contains("".concat(i._prefix,"-popup-list-item"))&&d.contains("".concat(i._prefix,"-active"))&&(i._updateCssVars(),i._scrollIntoView(s));}}}catch(t){r.e(t);}finally{r.f();}}})),a$1(v(i),"_handleMouseLeave",(function(t){var e;null===(e=i._element)||void 0===e||e.classList.remove("".concat(i._prefix,"-popup-openned"));})),a$1(v(i),"_handleTriggerClick",(function(t){var e;null===(e=i._element)||void 0===e||e.classList.toggle("".concat(i._prefix,"-popup-openned"));})),a$1(v(i),"_handleTriggerMouseOver",(function(t){i._updateCssVars(),i._delayScrollCallback((function(){var t;i._scrollIntoView(null===(t=i._element)||void 0===t?void 0:t.querySelector(".".concat(i._prefix,"-popup-list-item.").concat(i._prefix,"-active")));}));})),a$1(v(i),"_scrollIntoView",(function(t){null==t||t.scrollIntoView({behavior:"instant",block:"nearest",inline:"nearest"});})),a$1(v(i),"_delayScrollCallback",(function(t){"requestIdleCallback"in window?(null!=i._delayScrollIdx&&window.cancelIdleCallback(i._delayScrollIdx),i._delayScrollIdx=window.requestIdleCallback(t,{timeout:100})):(null!=i._delayScrollIdx&&window.clearTimeout(i._delayScrollIdx),i._delayScrollIdx=window.setTimeout(t,100));})),a$1(v(i),"_delayCssVarsCallback",(function(t){"requestIdleCallback"in window?(null!=i._delayCssVarsIdx&&window.cancelIdleCallback(i._delayCssVarsIdx),i._delayCssVarsIdx=window.requestIdleCallback(t,{timeout:100})):(null!=i._delayCssVarsIdx&&window.clearTimeout(i._delayCssVarsIdx),i._delayCssVarsIdx=window.setTimeout(t,100));}));var r,o,s=e.type,u=e.element,c=e.options;if(s!==at)throw new Error("The `popupList` directive must be used as `element` directive");c.host&&c.host.get_prefix&&"function"==typeof c.host.get_prefix&&i._element!=u?(i._prefix=c.host.get_prefix(),null===(r=i._element)||void 0===r||r.removeEventListener("mouseleave",i._handleMouseLeave),i._element=u,null===(o=i._element)||void 0===o||o.addEventListener("mouseleave",i._handleMouseLeave),i._startObserver()):console.warn(" !!! ctx.prefix is required !!! ");return i}return c(n,ht),u(n,[{key:"update",value:function(t){return Y}},{key:"render",value:function(){return Y}},{key:"_startObserver",value:function(){var t;null!=this._prefix&&(null===(t=this._observer)||void 0===t||t.disconnect(),this._observer=new MutationObserver(this._handleObserver),this._observer.observe(this._element,{attributeFilter:["class"],attributeOldValue:!1,attributes:!0,characterData:!1,characterDataOldValue:!1,childList:!0,subtree:!0}));}},{key:"_updateCssVars",value:function(){var t=this;this._delayCssVarsCallback((function(){var e=[];t._element&&e.push(new Promise((function(e){var n=t._element.getBoundingClientRect();t._isEmptyDOMRect(n)||null!=t._anchorBox&&t._isSameDOMRect(t._anchorBox,n)||(t._anchorBox=n,t._element.style.setProperty("--".concat(t._prefix,"-popup-anchor-x"),"".concat(t._anchorBox.x,"px"))),e(t._element);}))),t._windowElement&&e.push(new Promise((function(e){var n=t._windowElement.getBoundingClientRect();t._isEmptyDOMRect(n)||null!=t._windowBox&&t._isSameDOMRect(t._windowBox,n)||(t._windowBox=n,t._windowElement.style.setProperty("--".concat(t._prefix,"-popup-window-x"),"".concat(t._windowBox.x,"px"))),e(t._windowElement);}))),e.length>0&&Promise.all(e).catch((function(t){return console.error(t)})).then();}));}},{key:"_isEmptyDOMRect",value:function(t){return !t.x||!t.y||!t.width||!t.height||0===t.width&&0===t.height}},{key:"_isSameDOMRect",value:function(t,e){return t.x===e.x&&t.y===e.y&&t.width===e.width&&t.height===e.height}}]),n}(),Tt=ct(It),jt=function(e){function n(e){var i;if(l(this,n),a$1(v(i=t(this,n,[e])),"_prefix",null),a$1(v(i),"_name",null),a$1(v(i),"_delayIdx",null),a$1(v(i),"_observer",null),a$1(v(i),"_element",null),a$1(v(i),"_rect",null),a$1(v(i),"_delayCallback",(function(t){"requestIdleCallback"in window?(null!=i._delayIdx&&window.cancelIdleCallback(i._delayIdx),i._delayIdx=window.requestIdleCallback(t,{timeout:100})):(null!=i._delayIdx&&window.clearTimeout(i._delayIdx),i._delayIdx=window.setTimeout(t,100));})),a$1(v(i),"_handleObserver",(function(t,e){if(null!=i._prefix){var n,r=b(t);try{for(r.s();!(n=r.n()).done;){"attributes"===n.value.type&&i._measure();}}catch(t){r.e(t);}finally{r.f();}}})),e.type!==at)throw new Error("The `boundingVars` directive must be used as `element` directive");var r=e.element,o=e.options,s=i._getPrefix(o);if(!s)throw new Error("The `boundingVars` directive require `prefix` in part.options.host (ctx.prefix)");if(i._prefix=s,!r)throw new Error("The `boundingVars` directive require `element` to be present");return i._element=r,i._startObserver(),i}return c(n,ht),u(n,[{key:"update",value:function(t,e){var n=p(e,1)[0];this._setName(n);var i=t.element,r=t.options;this._element!=i&&(this._element=i);var o=this._getPrefix(r);return this._prefix!=o&&(this._prefix=o),null==this._prefix?Y:this._measure()}},{key:"render",value:function(t){var e=p(t,1)[0];return this._setName(e),this._measure()}},{key:"_setName",value:function(t){if(!t)throw new Error("The `boundingVars` directive require `name` attribute");this._name!=t&&(this._name=t);}},{key:"_getPrefix",value:function(t){return t.host&&t.host.get_prefix&&"function"==typeof t.host.get_prefix?t.host.get_prefix():null}},{key:"_measure",value:function(){var t=this;return null==this._prefix||this._delayCallback((function(){var e=t._element.getBoundingClientRect();t._isEmptyDOMRect(e)||t._rect&&e&&t._isSameDOMRect(t._rect,e)||(t._rect=e,t._element.style.setProperty("--".concat(t._prefix,"-").concat(t._name,"-height"),"".concat(e.height,"px")));})),Y}},{key:"_isEmptyDOMRect",value:function(t){return !t.x||!t.y||!t.width||!t.height||0===t.width&&0===t.height}},{key:"_isSameDOMRect",value:function(t,e){return t.x===e.x&&t.y===e.y&&t.width===e.width&&t.height===e.height}},{key:"_startObserver",value:function(){var t;null!=this._prefix&&(null===(t=this._observer)||void 0===t||t.disconnect(),this._observer=new MutationObserver(this._handleObserver),this._observer.observe(this._element,{attributeFilter:["class"],attributeOldValue:!1,attributes:!0,characterData:!1,characterDataOldValue:!1,childList:!0,subtree:!0}));}}]),n}(),Pt=ct(jt),Mt={html:U,svg:q,nothing:W,render:lt,asHtml:Ct,ctrl:bt,style:At,optional:function(t){return null!=t?t:W},multiclick:St,icon:Et,popupList:Tt,boundingVars:Pt},Nt=Object.keys(Mt).map((function(t){return "var ".concat(t," = this.").concat(t,";")})).join(""),Ht=i(i({},Mt),{},{template:function(t){return Function("context","return (function lit(ctx) { "+Nt+" return "+(arguments.length>1&&void 0!==arguments[1]?arguments[1]:"html")+"`"+t+"`; }).call(this,context)").bind(Mt)}});exports.lit=Ht;
!function(e,t){e.bs=e.bs||{},e.bs.player=e.bs.player||{},e.bs.player.plugin=e.bs.player.plugin||{},e.bs.player.plugin.dataProvider=e.bs.player.plugin.dataProvider||{};var r=function(){return B.__string_rec(this,"")},a=a||{};Math.__name__="Math";var s=require("haxe.Reflect");class i{static string(e){return B.__string_rec(e,"")}}i.__name__="Std";var l=require("haxe.StringTools"),o=require("bs.net.Http"),n=require("bs.player.core.events.ControlEvent"),p=require("bs.player.core.events.DataProviderEvent"),c=require("bs.player.core.events.ErrorEvent"),u=require("bs.player.core.manager.I18NHelper"),h=require("bs.player.core.model.Media"),d=require("bs.player.core.model.LiveStream"),_=require("bs.player.core.model.LiveChannel"),m=require("bs.player.core.model.MediaPlaylist"),y=require("bs.player.core.model.MediaSource"),g=require("bs.player.core.model.MediaDetails"),b=require("bs.player.core.model.MediaUserSettings"),P=require("bs.player.core.model.MediaSettings"),O=require("bs.player.core.model.MediaPlaybackInfo"),f=require("bs.player.core.model.SubtitlesSet"),w=require("bs.player.core.model.AudioSet"),S=require("bs.player.core.model.Image"),v=require("bs.player.core.model.Genre"),j=require("bs.player.core.model.MediaProgress");class x{constructor(){x._hx_skip_constructor||this._hx_constructor();}_hx_constructor(){this.pluginName="";let e=B.getClass(this);this.pluginName=e.__name__.split(".").pop();let t=this.pluginName,r=exports.configuration;this.pluginConfig=null!=r&&Object.prototype.hasOwnProperty.call(r,t)?s.field(r,t):Object.create(null);}create(){}destroy(){}activate(){}postActivate(){}deactivate(){}eventFilter(e){return !0}registerPlugin(e){}getPluginVersion(){return "v2.14.417"}getPluginName(){return this.pluginName}get_player(){return this.player}set_player(e){return this.player=e}get_variables(){return this.variables}set_variables(e){return this.variables=e}get_eventHub(){return this.eventHub}set_eventHub(e){return this.eventHub=e}get_parentDisplay(){return this.parentDisplay}set_parentDisplay(e){return this.parentDisplay=e}get_display(){return this.display}}x.__name__="bs.player.core.plugin.PluginBase",Object.assign(x.prototype,{__class__:x});class E extends x{constructor(){x._hx_skip_constructor=!0,super(),x._hx_skip_constructor=!1,this._hx_constructor();}_hx_constructor(){this.emittedMediaPlaylist=null,this.emittedMedia=null,this.data=null,this.reportErrors=!0,this.debugMode=!1,super._hx_constructor();let e=B.getClass(this);this.thisClass=e.__name__.split(".").pop(),this.parser=new D(this.reportErrors),this.parser.reportError=W(this,this.reportError);}activate(){super.activate();let e=this.get_variables();Object.prototype.hasOwnProperty.call(e,"dataDebugMode")&&(this.debugMode=s.field(this.get_variables(),"dataDebugMode"));let t=this.get_variables();Object.prototype.hasOwnProperty.call(t,"dataReportErrors")&&(this.reportErrors=s.field(this.get_variables(),"dataReportErrors"));}postActivate(){let e=this.get_variables();if(Object.prototype.hasOwnProperty.call(e,"dataSource"))this.mediaLoad(s.field(this.get_variables(),"dataSource"));else {let e=this.get_variables();Object.prototype.hasOwnProperty.call(e,"dataProvider")&&this.parseData(s.field(this.get_variables(),"dataProvider"));}}changeSource(e){this.mediaLoad(e);}injectData(e){this.parseData(e);}mediaLoad(e){if(null==e){if(this.reportErrors||this.debugMode){let e="["+this.thisClass+"] Error in BradmaxDataProvider : Empty source url";console.error(e);let t=new c("mediaProviderError");t.data="Error in BradmaxDataProvider : Empty source url",t.dispatch(this.context);}return}let t=new o(e);t.onData=W(this,this.parseString),t.onError=W(this,this.mediaLoadError),t.request(!1);}mediaLoadError(e){let t="Error in BradmaxDataProvider : Invalid http request: "+i.string(e);if(this.reportErrors||this.debugMode){let e="["+this.thisClass+"] "+t;console.error(e);let r=new c("mediaProviderError");r.data=t,r.dispatch(this.context);}}parseString(e){this.data=null;try{let t=e;for(;-1!=t.indexOf("/*")||-1!=t.indexOf("*/");){let e=t.indexOf("/*"),r=t.indexOf("*/",e)+2;-1!=e&&-1!=r&&(t=t.substring(0,e)+t.substring(r,t.length));}this.data=JSON.parse(t);}catch(e){let t="Error in BradmaxDataProvider : Invalid string while parsing to object (JSON) : "+i.string(N.caught(e).unwrap());if(this.reportErrors||this.debugMode){let e="["+this.thisClass+"] "+t;console.error(e);let r=new c("mediaProviderError");r.data=t,r.dispatch(this.context);}return}if(null!=this.data)this.parseData(this.data);else if(this.reportErrors||this.debugMode){let e="["+this.thisClass+"] Error in BradmaxDataProvider : Invalid string while parsing to object (JSON)";console.error(e);let t=new c("mediaProviderError");t.data="Error in BradmaxDataProvider : Invalid string while parsing to object (JSON)",t.dispatch(this.context);}}parseData(e){if(null==this.parser){if(this.reportErrors||this.debugMode){let e="["+this.thisClass+"] Error in BradmaxDataProvider : BradmaxMediaParser return empty object";console.error(e);let t=new c("mediaProviderError");t.data="Error in BradmaxDataProvider : BradmaxMediaParser return empty object",t.dispatch(this.context);}return}if(null!=e&&!(e instanceof Array)){let t=e;e=[t];let r=this.parsePlaylistLegacyNames(t);if(null!=r){let t=0;for(;t<r.length;)e.push(r[t++]);}}if(this.parser.parse(e),null==this.parser.playlist){if(this.reportErrors||this.debugMode){let e="["+this.thisClass+"] Error in BradmaxDataProvider : BradmaxMediaParser return empty playlist object";console.error(e);let t=new c("mediaProviderError");t.data="Error in BradmaxDataProvider : BradmaxMediaParser return empty playlist object",t.dispatch(this.context);}return}let t=this.get_variables();if(Object.prototype.hasOwnProperty.call(t,"startTime")&&this.get_variables().startTime>0&&this.parser.playlist.items.length>0){let e=this.parser.playlist.items[0],t=this.get_variables();e.mediaUserSettings.resumePostion=s.field(t,"startTime"),s.deleteField(this.get_variables(),"startTime");}this.parser.playlist.hasNext()&&(this.emitMedia(this.parser.playlist.next()),this.emittedMediaPlaylist=this.parser.playlist,this.emitMediaPlaylist(this.emittedMediaPlaylist));}parsePlaylistLegacyNames(e){let t=null,r=["mediaPlaylist","playList"],a=0;for(;a<r.length;){let s=r[a];if(++a,t=this.findPlaylistLegacyName(s,e),null==t&&(t=this.findPlaylistLegacyName(s.toLowerCase(),e)),null!=t)return t}return t}findPlaylistLegacyName(e,t){let r=null;if(Object.prototype.hasOwnProperty.call(t,e)){let a=s.field(t,e);if(a instanceof Array)r=a;else if(Object.prototype.hasOwnProperty.call(a,"items")){let e=s.field(a,"items");e instanceof Array&&(r=e);}s.deleteField(t,e);}return r}emitMediaPlaylist(e){let t=new p("mediaPlaylistData");t.data=e,t.dispatch(this.context);}orderMediaSourceForBetterSupport(e){if(null==e||null==e.source||0==e.source.length)return;let t=null;t=C.mobile||"Safari"==C.browserName?[W(this,this.isHlsUrl),W(this,this.isMpegDashUrl),W(this,this.isMsSmoothStreamingUrl)]:"Edge"==C.browserName||"Microsoft Internet Explorer"==C.browserName?[W(this,this.isMsSmoothStreamingUrl),W(this,this.isMpegDashUrl),W(this,this.isHlsUrl)]:[W(this,this.isMpegDashUrl),W(this,this.isHlsUrl),W(this,this.isMsSmoothStreamingUrl)];let r=[],a=new U,s=0,i=e.source;for(;s<i.length;)a.add(i[s++]);let l=0;for(;l<t.length;){let e=t[l++],s=new U,i=a.h;for(;null!=i;){let t=i.item;i=i.next,e(t.url)&&(r.push(t),s.add(t));}let o=s.h;for(;null!=o;){let e=o.item;o=o.next,a.remove(e);}}let o=a.h;for(;null!=o;){let e=o.item;o=o.next,r.push(e);}e.source=r;}isHlsUrl(e){return this.normalizeSourceUrl(e).endsWith(".m3u8")}isMpegDashUrl(e){return this.normalizeSourceUrl(e).endsWith(".mpd")}isMsSmoothStreamingUrl(e){let t=this.normalizeSourceUrl(e);return !!t.endsWith(".ism/manifest")||t.endsWith(".isml/manifest")}normalizeSourceUrl(e){return null==e?"":e.split("?")[0].toLowerCase()}emitMedia(e){this.orderMediaSourceForBetterSupport(e),this.emittedMedia=e;let t=new p("mediaMetadataData");t.data=e,t.dispatch(this.context);let r=new p("movieData");r.data=e,r.dispatch(this.context);let a=new p("subtitleData");null!=e.subtitlesSets?a.data=e.subtitlesSets:a.data=null,a.dispatch(this.context),this.emitSubtitlesSet(e.subtitlesSets);let s=new p("audioData");null!=e.audioSets?s.data=e.audioSets:s.data=null,s.dispatch(this.context),this.emitAudioSet(e.audioSets);}emitAudioSet(e){if(null==e)return;let t=null,r=this.get_variables();Object.prototype.hasOwnProperty.call(r,"audio")&&(t=s.field(this.get_variables(),"audio"));let a=!1,o=null;if(o=q.getSessionStorage(),a=null!=o,a){let e,r=null,a=!1,s=null;if(s=q.getSessionStorage(),a=null!=s,a){try{let e,t=null,a=!1,s=null;if(s=q.getSessionStorage(),a=null!=s,a){let r=null;r=q.getSessionStorage(),t=r.getItem("_brplayer_aud_lang"),null==t||(t=l.trim(t)),e=t;}else e=t;null!=e&&""!=e&&(r=e);}catch(p){}e=r;}else e=r;null!=e&&(t=e);}if(null==t)return;let p=[],c=0;for(;c<e.length;){let r=e[c];++c,r.languageCode==t&&p.push(r);}if(null==p||p.length<1)return;let u=p[0];if(null==u)return;let h=new n("selectAudio");h.data=u,h.dispatch(this.context);let d=u.languageCode,_=!1,m=null;if(m=q.getSessionStorage(),_=null!=m,_)try{if(null==d){let e=null;e=q.getSessionStorage(),e.removeItem("_brplayer_aud_lang");}else {let e=null;e=q.getSessionStorage(),e.setItem("_brplayer_aud_lang",i.string(d));}}catch(p){}}emitSubtitlesSet(e){if(null==e)return;let t=null,r=this.get_variables();Object.prototype.hasOwnProperty.call(r,"subtitles")&&(t=s.field(this.get_variables(),"subtitles"));let a=!1,o=null;if(o=q.getSessionStorage(),a=null!=o,a){let e,r=null,a=!1,s=null;if(s=q.getSessionStorage(),a=null!=s,a){try{let e,t=null,a=!1,s=null;if(s=q.getSessionStorage(),a=null!=s,a){let r=null;r=q.getSessionStorage(),t=r.getItem("_brplayer_sub_lang"),null==t||(t=l.trim(t)),e=t;}else e=t;null!=e&&""!=e&&(r=e);}catch(p){}e=r;}else e=r;null!=e&&(t=e);}if(null==t)return;let p=[],c=0;for(;c<e.length;){let r=e[c];++c,r.languageCode==t&&p.push(r);}if(null==p||p.length<1)return;let u=p[0];if(null==u)return;let h=new n("selectSubtitles");h.data=u,h.dispatch(this.context);let d=u.languageCode,_=!1,m=null;if(m=q.getSessionStorage(),_=null!=m,_)try{if(null==d){let e=null;e=q.getSessionStorage(),e.removeItem("_brplayer_sub_lang");}else {let e=null;e=q.getSessionStorage(),e.setItem("_brplayer_sub_lang",i.string(d));}}catch(p){}}emitDebug(e){}emitWarning(e){}emitError(e){if(this.reportErrors||this.debugMode){let t="["+this.thisClass+"] "+e;console.error(t);let r=new c("mediaProviderError");r.data=e,r.dispatch(this.context);}}reportError(e,t){if(e!=M.ERROR);else {let e="Error in BradmaxDataProvider : parser : "+t;if(this.reportErrors||this.debugMode){let t="["+this.thisClass+"] "+e;console.error(t);let r=new c("mediaProviderError");r.data=e,r.dispatch(this.context);}}}}e.bs.player.plugin.dataProvider.BradmaxDataProvider=E,E.__name__="bs.player.plugin.dataProvider.BradmaxDataProvider",E.__super__=x,Object.assign(E.prototype,{__class__:E});var M=a["bs.player.plugin.dataProvider.BradmaxDataParseExceptionType"]={__ename__:!0,__constructs__:null,ERROR:{_hx_name:"ERROR",_hx_index:0,__enum__:"bs.player.plugin.dataProvider.BradmaxDataParseExceptionType",toString:r},WARNING:{_hx_name:"WARNING",_hx_index:1,__enum__:"bs.player.plugin.dataProvider.BradmaxDataParseExceptionType",toString:r}};M.__constructs__=[M.ERROR,M.WARNING];class D{constructor(e){null==e&&(e=!1),this.reportErrors=!1,this.reportErrors=e;}reportError(e,t){}parse(e){this.playlist=new m;let t=0;for(;t<e.length;)this.playlist.items.push(this.parseMedia(e[t++]));}parseMedia(e){let t=new h;if(Object.prototype.hasOwnProperty.call(e,"liveStream")&&null!=s.field(e,"liveStream")&&(t=new d,t.duration=-1),Object.prototype.hasOwnProperty.call(e,"channel")&&(t=new _),Object.prototype.hasOwnProperty.call(e,"customParams")&&(t.customParams=e.customParams),Object.prototype.hasOwnProperty.call(e,"id")&&(t.id=e.id),Object.prototype.hasOwnProperty.call(e,"title")&&(t.title=e.title),Object.prototype.hasOwnProperty.call(e,"duration")&&(t.duration=e.duration),Object.prototype.hasOwnProperty.call(e,"source"))t.source=this.parseMediaSource(e.source);else if(Object.prototype.hasOwnProperty.call(e,"sourceWithFallbacks")){let r=this.parseMediaSourceWithFallbacls(e.sourceWithFallbacks);r.length>0&&(t.source=r[0]),r.length>1&&(t.sourceFallbacks=r.slice(1));}else this.reportErrors&&this.reportError(M.ERROR,"media source is missing");if(this.reportErrors&&0==t.source.length&&this.reportError(M.ERROR,"media sources are empty"),Object.prototype.hasOwnProperty.call(e,"audioSets")&&(t.audioSets=this.parseMediaAudioSet(e.audioSets)),Object.prototype.hasOwnProperty.call(e,"mediaDetails")&&(t.mediaDetails=this.parseMediaDetails(e.mediaDetails)),Object.prototype.hasOwnProperty.call(e,"mediaPlaybackInfo")&&(t.mediaPlaybackInfo=this.parseMediaPlaybackInfo(e.mediaPlaybackInfo)),Object.prototype.hasOwnProperty.call(e,"mediaSettings")&&(t.mediaSettings=this.parseMediaSettings(e.mediaSettings)),Object.prototype.hasOwnProperty.call(e,"mediaUserSettings")&&(t.mediaUserSettings=this.parseMediaUserSettings(e.mediaUserSettings)),Object.prototype.hasOwnProperty.call(e,"splashImages")&&(t.splashImages=this.parseMediaImages(e.splashImages)),Object.prototype.hasOwnProperty.call(e,"subtitlesSets")&&(t.subtitlesSets=this.parseMediaSubtitleSets(e.subtitlesSets)),Object.prototype.hasOwnProperty.call(e,"posterImages")&&(t.posterImages=this.parseMediaImages(e.posterImages)),Object.prototype.hasOwnProperty.call(e,"mediaLandingPage")&&(t.mediaLandingPage=e.mediaLandingPage),Object.prototype.hasOwnProperty.call(e,"progress")&&(t.progress=this.parseProgress(e.progress)),t instanceof _?this.parseLiveChannelFields(t,e):t instanceof d&&this.parseLiveStreamFields(t,e),Object.prototype.hasOwnProperty.call(e,"spherical"))switch(""+e.spherical){case"1":case"true":t.spherical=!0;break;default:t.spherical=!1;}return Object.prototype.hasOwnProperty.call(e,"contentMeta")&&(t.contentMeta=this.parseContentMeta(e.contentMeta)),t}parseLiveStreamFields(e,t){let r=s.field(t,"liveStream");Object.prototype.hasOwnProperty.call(r,"endDate")&&(e.streamEnd=this.parseIso8266Date(r.endDate)),Object.prototype.hasOwnProperty.call(r,"thankYouImageUrl")&&(e.streamEndThankYouImageUrl=r.thankYouImageUrl),Object.prototype.hasOwnProperty.call(r,"waitingForTransmissionImageUrl")&&(e.streamWaitingForTransmissionImageUrl=r.waitingForTransmissionImageUrl),Object.prototype.hasOwnProperty.call(r,"lowLatencyMode")&&(e.lowLatencyMode=r.lowLatencyMode);}parseIso8266Date(e){let t=new Date(e);return new Date(t.getTime())}parseLiveChannelFields(e,t){e.id=t.id,e.name=null!=t.channel?t.channel.name:t.title;}parseMediaSource(e){let t=[],r=0;for(;r<e.length;){let a=e[r];++r;let i=new y;if(Object.prototype.hasOwnProperty.call(a,"customParams"))if(B.__implements(a.customParams,I))i.customParams=a.customParams;else if(B.__instanceof(a.customParams,k)){let e=0,t=s.fields(a.customParams);for(;e<t.length;){let r=t[e];++e,i.customParams.h[r]=s.field(a.customParams,r);}}Object.prototype.hasOwnProperty.call(a,"id")&&(i.id=a.id),Object.prototype.hasOwnProperty.call(a,"url")?i.url=a.url:this.reportErrors&&this.reportError(M.WARNING,"media source need url attribute to be present"),Object.prototype.hasOwnProperty.call(a,"width")&&(i.width=a.width),Object.prototype.hasOwnProperty.call(a,"height")&&(i.height=a.height),Object.prototype.hasOwnProperty.call(a,"contentType")&&(i.contentType=a.contentType),Object.prototype.hasOwnProperty.call(a,"drm")&&(i.drm=this.parseDrm(a.drm)),t.push(i);}return t}parseDrm(e){return {provider:s.field(e,"provider"),selectedDrmSystem:s.field(e,"selectedDrmSystem"),playready:this.parseDrmData(s.field(e,"playready")),widevine:this.parseDrmData(s.field(e,"widevine")),fairplay:this.parseDrmData(s.field(e,"fairplay"))}}parseDrmData(e){return null==e?null:{laUrl:s.field(e,"laUrl"),customData:s.field(e,"customData"),certUrl:s.field(e,"certUrl"),audioRobustness:s.field(e,"audioRobustness"),videoRobustness:s.field(e,"videoRobustness")}}parseMediaSourceWithFallbacls(e){let t=[],r=0;for(;r<e.length;){let a=e[r];++r;let s=[],i=0;for(;i<a.length;){let e=a[i];++i;let t=new y;Object.prototype.hasOwnProperty.call(e,"customParams")&&(t.customParams=e.customParams),Object.prototype.hasOwnProperty.call(e,"id")&&(t.id=e.id),Object.prototype.hasOwnProperty.call(e,"url")?t.url=e.url:this.reportErrors&&this.reportError(M.WARNING,"media source need url attribute to be present"),Object.prototype.hasOwnProperty.call(e,"width")&&(t.width=e.width),Object.prototype.hasOwnProperty.call(e,"height")&&(t.height=e.height),Object.prototype.hasOwnProperty.call(e,"contentType")&&(t.contentType=e.contentType),s.push(t);}t.push(s);}return t}parseMediaAudioSet(e){let t=[],r=0;for(;r<e.length;){let a=e[r];++r;let s=new w;Object.prototype.hasOwnProperty.call(a,"customParams")&&(s.customParams=a.customParams),Object.prototype.hasOwnProperty.call(a,"id")&&(s.id=a.id),Object.prototype.hasOwnProperty.call(a,"languageCode")?(s.name=u.getLanguageNativeNameByCode(a.languageCode),s.languageCode=a.languageCode):this.reportErrors?this.reportError(M.WARNING,"media audio set need languageCode attribute to be present"):Object.prototype.hasOwnProperty.call(a,"name")&&(s.name=a.name),t.push(s);}return t}parseMediaDetails(e){let t=new g;return Object.prototype.hasOwnProperty.call(e,"customParams")&&(t.customParams=s.field(e,"customParams")),Object.prototype.hasOwnProperty.call(e,"descriptionLong")&&(t.descriptionLong=e.descriptionLong),Object.prototype.hasOwnProperty.call(e,"descriptionShort")&&(t.descriptionShort=e.descriptionShort),Object.prototype.hasOwnProperty.call(e,"directors")&&(t.directors=e.directors),Object.prototype.hasOwnProperty.call(e,"genres")&&(t.genres=this.parseMediaGenres(e.genres)),Object.prototype.hasOwnProperty.call(e,"mediaCast")&&(t.mediaCast=e.mediaCast),Object.prototype.hasOwnProperty.call(e,"tags")&&(t.tags=e.tags),Object.prototype.hasOwnProperty.call(e,"year")&&(t.year=e.year),t}parseMediaGenres(e){let t=[],r=0;for(;r<e.length;){let a=e[r];++r;let s=new v;Object.prototype.hasOwnProperty.call(a,"customParams")&&(s.customParams=a.customParams),Object.prototype.hasOwnProperty.call(a,"id")&&(s.id=a.id),Object.prototype.hasOwnProperty.call(a,"name")?s.name=a.name:this.reportErrors&&this.reportError(M.WARNING,"media genre need name attribute to be present"),t.push(s);}return t}parseMediaPlaybackInfo(e){let t=new O;return Object.prototype.hasOwnProperty.call(e,"currentTime")&&(t.currentTime=e.currentTime),Object.prototype.hasOwnProperty.call(e,"isPlaying")&&(t.isPlaying=e.isPlaying),Object.prototype.hasOwnProperty.call(e,"customParams")&&(t.customParams=e.customParams),t}parseProgress(e){let t=new j;if(Object.prototype.hasOwnProperty.call(e,"segments")){let r=e.segments;null!=r&&(r instanceof Array&&(t.segments=r),"string"==typeof r&&(t.segmentsUrl=r));}if(Object.prototype.hasOwnProperty.call(e,"markers")){let r=e.markers;null!=r&&(r instanceof Array&&(t.markers=r),"string"==typeof r&&(t.markersUrl=r));}return Object.prototype.hasOwnProperty.call(e,"thumbnails")&&(t.thumbnails=e.thumbnails),t}parseContentMeta(e){let t=new A,r=0,a=s.fields(e);for(;r<a.length;){let i=a[r];++r,t.h[i]=s.field(e,i);}return t}parseMediaSettings(e){let t=new P;return Object.prototype.hasOwnProperty.call(e,"hasConcurrencyControl")&&(t.hasConcurrencyControl=e.hasConcurrencyControl),Object.prototype.hasOwnProperty.call(e,"customParams")&&(t.customParams=e.customParams),t}parseMediaUserSettings(e){let t=new b;return Object.prototype.hasOwnProperty.call(e,"hasWatchingFinished")&&(t.hasWatchingFinished=e.hasWatchingFinished),Object.prototype.hasOwnProperty.call(e,"isFavorite")&&(t.isFavorite=e.isFavorite),Object.prototype.hasOwnProperty.call(e,"resumePostion")&&(t.resumePostion=e.resumePostion),Object.prototype.hasOwnProperty.call(e,"wasWatched")&&(t.wasWatched=e.wasWatched),t}parseMediaImages(e){let t=[],r=0;for(;r<e.length;){let a=e[r];++r;let s=new S;Object.prototype.hasOwnProperty.call(a,"customParams")&&(s.customParams=a.customParams),Object.prototype.hasOwnProperty.call(a,"id")&&(s.id=a.id),Object.prototype.hasOwnProperty.call(a,"url")?s.url=a.url:this.reportErrors&&this.reportError(M.WARNING,"media image need url attribute to be present"),Object.prototype.hasOwnProperty.call(a,"width")&&(s.width=a.width),Object.prototype.hasOwnProperty.call(a,"height")&&(s.height=a.height),t.push(s);}return t}parseMediaSubtitleSets(e){let t=[],r=0;for(;r<e.length;){let a=e[r];++r;let s=new f;Object.prototype.hasOwnProperty.call(a,"customParams")&&(s.customParams=a.customParams),Object.prototype.hasOwnProperty.call(a,"id")&&(s.id=a.id),Object.prototype.hasOwnProperty.call(a,"url")?s.url=a.url:this.reportErrors&&this.reportError(M.WARNING,"media subtitle set need url attribute to be present"),Object.prototype.hasOwnProperty.call(a,"languageCode")?(s.name=u.getLanguageNativeNameByCode(a.languageCode),s.languageCode=a.languageCode):this.reportErrors?this.reportError(M.WARNING,"media subtitle set need languageCode attribute to be present"):Object.prototype.hasOwnProperty.call(a,"name")&&(s.name=a.name),t.push(s);}return t}}D.__name__="bs.player.plugin.dataProvider.BradmaxMediaParser",Object.assign(D.prototype,{__class__:D});var C=require("bs.util.BrowserTools");class I{}I.__name__="haxe.IMap",I.__isInterface__=!0;class N extends Error{constructor(e,t,r){super(e),this.message=e,this.__previousException=t,this.__nativeException=null!=r?r:this;}unwrap(){return this.__nativeException}static caught(e){return e instanceof N?e:e instanceof Error?new N(e.message,null,e):new L(e,null,e)}}N.__name__="haxe.Exception",N.__super__=Error,Object.assign(N.prototype,{__class__:N});class L extends N{constructor(e,t,r){super(String(e),t,r),this.value=e;}unwrap(){return this.value}}L.__name__="haxe.ValueException",L.__super__=N,Object.assign(L.prototype,{__class__:L});var U=require("haxe.ds.List");class R{constructor(e,t){this.item=e,this.next=t;}}R.__name__="haxe.ds._List.ListNode",Object.assign(R.prototype,{__class__:R});var A=require("haxe.ds.StringMap");class B{static getClass(e){if(null==e)return null;if(e instanceof Array)return Array;{let t=e.__class__;if(null!=t)return t;let r=B.__nativeClassName(e);return null!=r?B.__resolveNativeClass(r):null}}static __string_rec(e,t){if(null==e)return "null";if(t.length>=5)return "<...>";let r=typeof e;switch("function"==r&&(e.__name__||e.__ename__)&&(r="object"),r){case"function":return "<function>";case"object":if(e.__enum__){let r=a[e.__enum__].__constructs__[e._hx_index],s=r._hx_name;return r.__params__?(t+="\t",s+"("+function(a){let s=[];{let a=0,i=r.__params__;for(;a<i.length;){let r=i[a];a+=1,s.push(B.__string_rec(e[r],t));}}return s}().join(",")+")"):s}if(e instanceof Array){let r="[";t+="\t";let a=0,s=e.length;for(;a<s;){let s=a++;r+=(s>0?",":"")+B.__string_rec(e[s],t);}return r+="]",r}let r;try{r=e.toString;}catch(e){return "???"}if(null!=r&&r!=Object.toString&&"function"==typeof r){let t=e.toString();if("[object Object]"!=t)return t}let s="{\n";t+="\t";let i=null!=e.hasOwnProperty,l=null;for(l in e)i&&!e.hasOwnProperty(l)||"prototype"!=l&&"__class__"!=l&&"__super__"!=l&&"__interfaces__"!=l&&"__properties__"!=l&&(2!=s.length&&(s+=", \n"),s+=t+l+" : "+B.__string_rec(e[l],t));return s+="\n"+(t=t.substring(1))+"}",s;case"string":return e;default:return String(e)}}static __interfLoop(e,t){for(;;){if(null==e)return !1;if(e==t)return !0;let r=e.__interfaces__;if(null!=r&&(null==e.__super__||e.__super__.__interfaces__!=r)){let e=0,a=r.length;for(;e<a;){let a=r[e++];if(a==t||B.__interfLoop(a,t))return !0}}e=e.__super__;}}static __instanceof(e,t){if(null==t)return !1;switch(t){case Array:return e instanceof Array;case G:return "boolean"==typeof e;case k:return null!=e;case T:return "number"==typeof e;case F:return "number"==typeof e&&(0|e)===e;case String:return "string"==typeof e;default:if(null==e)return !1;if("function"==typeof t){if(B.__downcastCheck(e,t))return !0}else if("object"==typeof t&&B.__isNativeObj(t)&&e instanceof t)return !0;return t==H&&null!=e.__name__||(t==J&&null!=e.__ename__||null!=e.__enum__&&a[e.__enum__]==t)}}static __downcastCheck(e,t){return e instanceof t||!!t.__isInterface__&&B.__interfLoop(B.getClass(e),t)}static __implements(e,t){return B.__interfLoop(B.getClass(e),t)}static __nativeClassName(e){let t=B.__toStr.call(e).slice(8,-1);return "Object"==t||"Function"==t||"Math"==t||"JSON"==t?null:t}static __isNativeObj(e){return null!=B.__nativeClassName(e)}static __resolveNativeClass(e){return t[e]}}B.__name__="js.Boot";class q{static getSessionStorage(){try{let e=window.sessionStorage;if(e.getItem(""),0==e.length){let t="_hx_"+Math.random();e.setItem(t,t),e.removeItem(t);}return e}catch(e){return null}}}function W(e,r){return null==r?null:(null==r.__id__&&(r.__id__=t.$haxeUID++),null==e.hx__closures__?e.hx__closures__={}:a=e.hx__closures__[r.__id__],null==a&&(a=r.bind(e),e.hx__closures__[r.__id__]=a),a);var a;}q.__name__="js.Browser",t.$haxeUID|=0,Object.defineProperty(String.prototype,"__class__",{value:String,enumerable:!1,writable:!0}),String.__name__="String",Array.__name__="Array",Date.prototype.__class__=Date,Date.__name__="Date";var F={},k={},T=Number,G=Boolean,H={},J={};B.__toStr={}.toString,x._hx_skip_constructor=!1,E.__plugfaces__="IPlugin";}(exports,window);!function(e,t){e.bs=e.bs||{},e.bs.player=e.bs.player||{},e.bs.player.plugin=e.bs.player.plugin||{},e.bs.player.plugin.video=e.bs.player.plugin.video||{};var i=require("haxe.EReg"),s=require("haxe.EReg"),a=require("haxe.HxOverrides");Math.__name__="Math";var r=require("haxe.Reflect");class n{static string(e){return J.__string_rec(e,"")}static parseInt(e){let t=parseInt(e);return isNaN(t)?null:t}}n.__name__="Std";var l=require("haxe.StringTools");class o{static getInstanceFields(e){let t=[];for(;null!=e;){let i=0,s=Object.getOwnPropertyNames(e.prototype);for(;i<s.length;){let e=s[i];switch(++i,e){case"__class__":case"__properties__":case"constructor":break;default:-1==t.indexOf(e)&&t.push(e);}}e=e.__super__;}return t}}o.__name__="Type";var d=require("bs.player.composer.Embeder"),h=require("bs.player.core.events.AdEvent"),u=require("bs.player.core.events.ChromecastEvent"),m=require("bs.player.core.events.ControlEvent"),c=require("bs.player.core.events.DataProviderEvent"),v=require("bs.player.core.events.DisplayEvent"),y=require("bs.player.core.events.ResizeEvent"),p=require("bs.player.core.events.VideoEvent"),b=require("bs.player.core.manager.I18NHelper"),g=require("bs.player.core.model.Media"),S=require("bs.player.core.model.Live"),P=require("bs.player.core.model.LiveStream"),f=require("bs.player.core.model.MediaSource"),E=require("bs.player.core.model.SubtitlesSet"),T=require("bs.player.core.model.SubtitleEntry"),k=require("bs.player.core.model.SubtitleEntryText"),C=require("bs.player.core.model.AudioSet");class w{}w.__name__="bs.player.core.model.DrmCustomLicenseServerHandler",w.__isInterface__=!0,Object.assign(w.prototype,{__class__:w,initContext:null,destroy:null,customFairplayCertificateRequestHandler:null,customFairplayLicenseRequestHandler:null});var _=require("bs.player.core.model.Point");class A{constructor(){A._hx_skip_constructor||this._hx_constructor();}_hx_constructor(){this.pluginName="";let e=J.getClass(this);this.pluginName=e.__name__.split(".").pop();let t=this.pluginName,i=exports.configuration;this.pluginConfig=null!=i&&Object.prototype.hasOwnProperty.call(i,t)?r.field(i,t):Object.create(null);}create(){}destroy(){}activate(){}postActivate(){}deactivate(){}eventFilter(e){return !0}registerPlugin(e){}getPluginVersion(){return "v2.14.417"}getPluginName(){return this.pluginName}get_player(){return this.player}set_player(e){return this.player=e}get_variables(){return this.variables}set_variables(e){return this.variables=e}get_eventHub(){return this.eventHub}set_eventHub(e){return this.eventHub=e}get_parentDisplay(){return this.parentDisplay}set_parentDisplay(e){return this.parentDisplay=e}get_display(){return this.display}}A.__name__="bs.player.core.plugin.PluginBase",Object.assign(A.prototype,{__class__:A,uid:null,context:null,className:null,pluginConfig:null,variables:null,eventHub:null,parentDisplay:null,display:null,player:null,pluginName:null});class V{constructor(e,t){this.context=e,this.playerContainer=t,this.isInitialized=!1,m.add(e,"selectSubtitles",$(this,this.onSelectSubtitles)),y.add(e,"resize",$(this,this.onResize));}destroy(){m.remove(this.context,"selectSubtitles",$(this,this.onSelectSubtitles)),y.remove(this.context,"resize",$(this,this.onResize)),this.playerContainer=null;}onSelectSubtitles(e){this.initSubtitlesPlaceholder();}onResize(e){if(null!=this.subtitlesParentContainer){let e=this.subtitlesParentContainer.getBoundingClientRect().height;this.subtitlesContainer.style.fontSize=Math.floor(.05*e)+"px",this.subtitlesContainer.style.lineHeight=Math.floor(.08*e)+"px";}}initSubtitlesPlaceholder(){if(this.isInitialized)return;this.isInitialized=!0;let e=this.playerContainer.getElementsByClassName("htmlSubtitlesPlaceholder");if(0==e.length){this.subtitlesParentContainer=window.document.createElement("div"),this.subtitlesParentContainer.setAttribute("class","htmlSubtitlesPlaceholder"),this.subtitlesParentContainer.setAttribute("style","height: 100%;left: 0px;position: absolute;top: 0px;width: 100%;");let e=this.playerContainer.childNodes,t=e.length-1,i=0,s=e.length;for(;i<s;){let s=i++;"video"==e.item(s).nodeName.toLowerCase()&&(t=s);}t<e.length-1?this.playerContainer.insertBefore(this.subtitlesParentContainer,e[t+1]):this.playerContainer.appendChild(this.subtitlesParentContainer);}else this.subtitlesParentContainer=e.item(0),this.subtitlesParentContainer.innerHTML="";null==this.subtitlesContainer?(this.subtitlesContainer=window.document.createElement("div"),this.subtitlesContainer.style.position="absolute",this.subtitlesContainer.style.display="table",this.subtitlesContainer.style.textAlign="center",this.subtitlesContainer.style.overflow="initial",this.subtitlesContainer.style.pointerEvents="none",this.subtitlesContainer.style.bottom="5%",this.subtitlesContainer.style.left="10%",this.subtitlesContainer.style.width="80%",this.subtitlesContainer.style.height="auto",this.subtitlesContainer.style.justifyContent="center",this.subtitlesContainer.style.color="white",this.subtitlesContainer.style.backgroundColor="transparent",this.subtitlesContainer.style.fontFamily='"Helvetica Neue", Helvetica, Arial,sans-serif',this.subtitlesContainer.style.textShadow="0px 0px 7px #000000, 0px 0px 4px #000000, 0px 0px 10px #000000"):null!=this.subtitlesContainer.parentElement&&this.subtitlesContainer.parentElement.removeChild(this.subtitlesContainer),this.onResize(),this.subtitlesParentContainer.appendChild(this.subtitlesContainer);}onCueEnter(e){this.initSubtitlesPlaceholder();let t=window.document.createElement("p"),i=[],s=0,a=e.texts;for(;s<a.length;)i.push(a[s++].text);t.innerText=i.join("\n"),t.style.margin="0",t.style.display="table-row",null==this.subtitlesParentContainer.parentNode&&this.playerContainer.appendChild(this.subtitlesParentContainer),e.customParams.h._element=t,this.subtitlesContainer.appendChild(t);}onCueExit(e){this.subtitlesContainer.removeChild(e.customParams.h._element);}}V.__name__="bs.player.core.renderer.SubtitlesRenderer",Object.assign(V.prototype,{__class__:V,context:null,playerContainer:null,subtitlesParentContainer:null,subtitlesContainer:null,isInitialized:null});class I extends A{constructor(){A._hx_skip_constructor=!0,super(),A._hx_skip_constructor=!1,this._hx_constructor();}_hx_constructor(){this.isFirstFrameVideoEventDispatched=!1,this.videoPlaybackRate=1,this.lastAdError=null,this.lastMediaError=null,this.permamentPlaybackErrorTimer=null,this.videoCurrentTime=null,this.volumeValue=null,this.isQuickFallbackPathForLiveEnabled=!0,this.minAudioTracksForInfo=2,this.chromecastSender=te,this.chromecastSession=te,this.chromecastConnected=!1,this.videoPlayers=[],this.videoPlayersClasses=[],super._hx_constructor(),this.isAdVideoTagInitializedForMobiles=!1,this.isInStreamAdPlaying=!1,this.currentMedia=null,this.lastDataProviderEvent=null,this.shouldVideoPlay=!1;}isSingleVideoTagPlay(){return !(!W.isiOS&&"Safari"!=W.browserName)||W.isSamsungSmartTVTizen}hasInStreamAds(){let e=this.get_variables();return Object.prototype.hasOwnProperty.call(e,"yospace")}hasDefinedAds(){let e=this.get_variables();if(Object.prototype.hasOwnProperty.call(e,"freewheel"))return !0;{let e=this.get_variables();return Object.prototype.hasOwnProperty.call(e,"advertisement")}}hasAdvertisementPlugin(){let e=exports.bs.player.plugin;return null!=e&&(null!=r.field(e,"freewheel")&&null!=r.field(r.field(e,"freewheel"),"FreeWheel")||null!=r.field(e,"advertisement")&&null!=r.field(r.field(e,"advertisement"),"AdvertisementDataProvider"))}create(){let e;if(super.create(),this.htmlVideo=this.getVideoElementReadyForAutoplayOrCreate(),this.htmlVideo.controls=!1,this.isSingleVideoTagPlay()?this.htmlAdVideo=this.htmlVideo:(this.htmlAdVideo=this.getVideoElementReadyForAutoplayOrCreate(),this.htmlAdVideo.controls=!1),this.htmlAdVideo.classList.add("bs-v-supporting-ad-play"),this.shouldVideoPlay=1==this.get_variables().autoplay,W.isiOS&&"Safari"==W.browserName&&1==this.get_variables().autoplay&&1==this.get_variables().mute&&(this.get_variables().iosInlineVideo=!0,this.log("BRADMAX PLAYER NOTICE:\nBrowser run with iosInlineVideo:true mode, because it is required for autoplay muted video for iOS.\n","warn")),W.isiOS){let t=this.get_variables();e=0==Object.prototype.hasOwnProperty.call(t,"iosInlineVideo")||1==J.__cast(r.field(this.get_variables(),"iosInlineVideo"),se);}else e=!1;e&&(this.htmlVideo.setAttribute("playsinline",""),this.htmlVideo.setAttribute("webkit-playsinline","")),this.initVideoElementSize(this.htmlVideo),this.initVideoElementSize(this.htmlAdVideo);let t=this.get_variables();Object.prototype.hasOwnProperty.call(t,"mute")&&J.__cast(r.field(this.get_variables(),"mute"),se)&&(this.htmlVideo.muted=this.htmlAdVideo.muted=!0);let i=this.get_variables();if(Object.prototype.hasOwnProperty.call(i,"playbackRate")){let e=r.field(this.get_variables(),"playbackRate");!isNaN(e)&&isFinite(e)&&e>=-1&&(this.videoPlaybackRate=e);}this.updateVideoMediaElementCrossOrigin(),this.triggerVideoMediaElementInitEvent(),this.div=this.get_parentDisplay(),this.insertChildElementFirst(this.div,this.htmlVideo),this.isSingleVideoTagPlay()||this.insertChildElementFirst(this.div,this.htmlAdVideo),this.nativeVideo=this.htmlVideo,this.nativeAdVideo=this.htmlAdVideo,this.initVideoPlayersClasses();let s=this.context;u.add(s,"connected",$(this,this.onChromecastConnect)),u.add(s,"disconnected",$(this,this.onChromecastDisonnect)),m.add(s,"skinPause",$(this,this.onPauseEvent)),m.add(s,"skinStop",$(this,this.onStopEvent)),m.add(s,"skinPlay",$(this,this.onPlayEvent)),m.add(s,"skinPlayPause",$(this,this.onPlayPauseEvent)),m.add(s,"skinSeek",$(this,this.onSeekEvent)),m.add(s,"selectAudio",$(this,this.onSelectAudioEvent)),m.add(s,"selectSubtitles",$(this,this.onSelectSubtitlesEvent)),m.add(s,"skinVolume",$(this,this.onVolumeEvent)),m.add(s,"skinMute",$(this,this.onMuteEvent)),m.add(s,"skinUnmute",$(this,this.onUnmuteEvent));let a=this;c.add(s,"mediaMetadataData",(function(e){a.onSetDataEvent(e,false);}));let n=this;c.add(s,"adMetadataData",(function(e){n.onSetDataEvent(e,true);})),y.add(s,"resize",$(this,this.onPlayerResizeEvent)),p.add(s,"ready",$(this,this.onVideoReadyEvent)),p.add(s,"connectionError",$(this,this.onNetworkErrorEvent)),p.add(s,"mediaError",$(this,this.onVideoErrorEvent)),p.add(s,"loadError",$(this,this.onVideoErrorEvent)),p.add(s,"currentTimeChange",$(this,this.onVideoTimeChange)),p.add(s,"drmAuthenticationError",$(this,this.onVideoDrmAuthError)),p.add(s,"drmModuleCrush",$(this,this.onVideoDrmModuleCrush)),h.add(s,"adPlay",$(this,this.onAdPlay)),h.add(s,"adPause",$(this,this.onAdPause)),h.add(s,"adResume",$(this,this.onAdResume)),h.add(s,"adMediaError",$(this,this.onAdErrorEvent)),p.add(s,"playing",$(this,this.onVideoPlaying)),h.add(s,"adPlaying",$(this,this.onAdVideoPlaying)),p.add(s,"currentTimeChange",$(this,this.onVideoPlaying)),h.add(s,"adCurrentTimeChange",$(this,this.onAdVideoPlaying)),h.add(s,"adInStreamPlaying",$(this,this.onAdInStreamPlaying)),h.add(s,"adInStreamPlayingSilent",$(this,this.onAdInStreamPlaying)),h.add(s,"adInStreamEnd",$(this,this.onAdInStreamEnd)),h.add(s,"adInStreamEndSilent",$(this,this.onAdInStreamEnd)),h.add(s,"adConnectionError",$(this,this.onNetworkErrorEvent)),m.add(s,"setVideoPlaybackRate",$(this,this.onSetVideoPlaybackRate)),m.add(s,"reloadVideoAfterNetworkProblem",$(this,this.onReloadVideoAfterNetworkProblem)),this.setDefaultVariablesFromVideoPluginConfig(),this.subtitlesRenderer=new V(this.context,this.get_parentDisplay()),this.externalSubtitlesController=new R(this.context,this.subtitlesRenderer),null!=this.get_variables().locale&&(z.locale=this.get_variables().locale),window.document.removeEventListener("visibilitychange",$(this,this.onSaveBandwidthModeVisibilityChange));let l=this.get_variables();Object.prototype.hasOwnProperty.call(l,"saveBandwidthMode")&&J.__cast(this.get_variables().saveBandwidthMode,se)&&window.document.addEventListener("visibilitychange",$(this,this.onSaveBandwidthModeVisibilityChange)),this.isFirstFrameVideoEventDispatched=!1;}insertChildElementFirst(e,t){null!=e.firstElementChild?e.insertBefore(t,e.firstElementChild):e.appendChild(t);}onSaveBandwidthModeVisibilityChange(){null!=this.playerInstance&&this.playerInstance.saveBandwidthModeVisibilityChange("visible"!=window.document.visibilityState);}initVideoElementSize(e){null!=e&&null!=e.style&&(e.style.position="absolute",e.style.top="0",e.style.left="0",e.style.width="100%",e.style.height="100%");}postActivate(){super.postActivate(),this.updateVideoMediaElementCrossOrigin(),this.triggerVideoMediaElementInitEvent(),this.triggerInitialVolumeControlEvent(),this.triggerInitialMuteControlEvent();}updateVideoMediaElementCrossOrigin(){if(null==this.htmlVideo)return;let e=this.get_variables();Object.prototype.hasOwnProperty.call(e,"anonymousCrossOrigin")&&J.__cast(r.field(this.get_variables(),"anonymousCrossOrigin"),se)?"anonymous"!=this.htmlVideo.crossOrigin&&this.htmlVideo.setAttribute("crossOrigin","anonymous"):null!=this.htmlVideo.crossOrigin&&this.htmlVideo.removeAttribute("crossOrigin");}triggerInitialVolumeControlEvent(){let e=U.volume(this.get_variables());if(null!=e){let t=new m("skinVolume");t.data=e,t.dispatch(this.context);}}triggerInitialMuteControlEvent(){let e=U.mute(this.get_variables());1==this.get_variables().mute&&r.deleteField(this.get_variables(),"mute"),e&&new m("skinMute").dispatch(this.context);}triggerVideoMediaElementInitEvent(){if(null!=this.htmlVideo){let e=new p("videoMediaElementInit");e.data=this.htmlVideo,e.dispatch(this.context);}}destroy(){u.remove(this.context,"connected",$(this,this.onChromecastConnect)),u.remove(this.context,"disconnected",$(this,this.onChromecastDisonnect)),m.remove(this.context,"skinPause",$(this,this.onPauseEvent)),m.remove(this.context,"skinPlay",$(this,this.onPlayEvent)),m.remove(this.context,"skinPlayPause",$(this,this.onPlayPauseEvent)),m.remove(this.context,"skinSeek",$(this,this.onSeekEvent)),m.remove(this.context,"selectAudio",$(this,this.onSelectAudioEvent)),m.remove(this.context,"selectSubtitles",$(this,this.onSelectSubtitlesEvent)),m.remove(this.context,"skinVolume",$(this,this.onVolumeEvent)),m.remove(this.context,"skinMute",$(this,this.onMuteEvent)),m.remove(this.context,"skinUnmute",$(this,this.onUnmuteEvent));let e=this;c.remove(this.context,"mediaMetadataData",(function(t){e.onSetDataEvent(t,false);}));let t=this;c.remove(this.context,"adMetadataData",(function(e){t.onSetDataEvent(e,true);})),y.remove(this.context,"resize",$(this,this.onPlayerResizeEvent)),p.remove(this.context,"ready",$(this,this.onVideoReadyEvent)),p.remove(this.context,"connectionError",$(this,this.onNetworkErrorEvent)),p.remove(this.context,"mediaError",$(this,this.onVideoErrorEvent)),p.remove(this.context,"loadError",$(this,this.onVideoErrorEvent)),p.remove(this.context,"currentTimeChange",$(this,this.onVideoTimeChange)),p.remove(this.context,"drmAuthenticationError",$(this,this.onVideoDrmAuthError)),h.remove(this.context,"adPlay",$(this,this.onAdPlay)),h.remove(this.context,"adPause",$(this,this.onAdPause)),h.remove(this.context,"adResume",$(this,this.onAdResume)),h.remove(this.context,"adMediaError",$(this,this.onAdErrorEvent)),p.remove(this.context,"playing",$(this,this.onVideoPlaying)),h.remove(this.context,"adPlaying",$(this,this.onAdVideoPlaying)),p.remove(this.context,"currentTimeChange",$(this,this.onVideoPlaying)),h.remove(this.context,"adCurrentTimeChange",$(this,this.onAdVideoPlaying)),h.remove(this.context,"adInStreamPlaying",$(this,this.onAdInStreamPlaying)),h.remove(this.context,"adInStreamPlayingSilent",$(this,this.onAdInStreamPlaying)),h.remove(this.context,"adInStreamEnd",$(this,this.onAdInStreamEnd)),h.remove(this.context,"adInStreamEndSilent",$(this,this.onAdInStreamEnd)),h.remove(this.context,"adConnectionError",$(this,this.onNetworkErrorEvent)),m.remove(this.context,"setVideoPlaybackRate",$(this,this.onSetVideoPlaybackRate)),m.remove(this.context,"reloadVideoAfterNetworkProblem",$(this,this.onReloadVideoAfterNetworkProblem)),null!=this.externalSubtitlesController&&(this.externalSubtitlesController.destroy(),this.externalSubtitlesController=null),null!=this.subtitlesRenderer&&(this.subtitlesRenderer.destroy(),this.subtitlesRenderer=null),null!=this.currentMedia&&null!=this.currentMedia.drmCustomLicenseServerHandler&&this.currentMedia.drmCustomLicenseServerHandler.destroy(),this.currentMedia=null;let i=0,s=this.videoPlayers;for(;i<s.length;)s[i++].destroy();this.videoPlayers=null,null!=this.playerInstance&&this.playerInstance.destroy(),this.playerInstance=null,null!=this.adPlayerInstance&&this.adPlayerInstance.destroy(),this.adPlayerInstance=null,null!=this.nativeVideo&&null!=this.nativeVideo.parentElement&&null!=this.nativeVideo.load&&(this.nativeVideo.setAttribute("src",""),this.nativeVideo.load(),this.nativeVideo.parentElement.removeChild(this.nativeVideo)),this.nativeVideo=null,null!=this.nativeAdVideo&&null!=this.nativeAdVideo.parentElement&&null!=this.nativeAdVideo.load&&(this.nativeAdVideo.setAttribute("src",""),this.nativeAdVideo.load(),this.nativeAdVideo.parentElement.removeChild(this.nativeAdVideo)),this.nativeAdVideo=null,null!=this.htmlVideo&&null!=this.htmlVideo.parentElement&&null!=this.htmlVideo.load&&(this.htmlVideo.setAttribute("src",""),this.htmlVideo.load(),this.htmlVideo.parentElement.removeChild(this.htmlVideo)),this.htmlVideo=null,null!=this.htmlAdVideo&&null!=this.htmlAdVideo.parentElement&&null!=this.htmlAdVideo.load&&(this.htmlAdVideo.setAttribute("src",""),this.htmlAdVideo.load(),this.htmlAdVideo.parentElement.removeChild(this.htmlAdVideo)),this.htmlAdVideo=null,this.div=null,this.videoPlayersClasses=null,this.isAdVideoTagInitializedForMobiles=null,this.videoPlaybackRate=1,window.document.removeEventListener("visibilitychange",$(this,this.onSaveBandwidthModeVisibilityChange)),this.removeFirstFrameListeners(),this.isFirstFrameVideoEventDispatched=!1,super.destroy();}initVideoPlayersClasses(){if("Safari"==W.browserName&&!W.isSamsungSmartTVTizen||W.isMobile()){this.videoPlayersClasses.push(O);let e=0,t=this.get_player().pluginsVideo;for(;e<t.length;)this.videoPlayersClasses.push(J.getClass(t[e++]));}else {let e=0,t=this.get_player().pluginsVideo;for(;e<t.length;)this.videoPlayersClasses.push(J.getClass(t[e++]));this.videoPlayersClasses.push(O);}}moveSelectedMediaSourceToFirstPosition(e,t){let i=[];i.push(e[t]);let s=0,a=e.length;for(;s<a;){let a=s++;a!=t&&i.push(e[a]);}return i}onChromecastConnect(e){this.chromecastConnected=!0,this.chromecastSession=e.data.session,this.chromecastSender=e.data.sender,this.videoPlayersClasses[0].__name__!=F.__name__&&this.videoPlayersClasses.splice(0,0,F),this.onSetDataEvent(this.lastDataProviderEvent,!1),this.updateChromecastPlayerInstanceSession(this.chromecastSession,this.chromecastSender);}onChromecastDisonnect(e){this.chromecastConnected=!1,this.chromecastSession=null,this.playerInstance instanceof F&&this.playerInstance.onChromecastDisonnect(),this.videoPlayersClasses[0].__name__==F.__name__&&this.videoPlayersClasses.shift(),this.onSetDataEvent(this.lastDataProviderEvent,!1),null!=this.currentMedia&&this.currentMedia.mediaPlaybackInfo.currentTime>0&&(this.currentMedia.mediaUserSettings.resumePostion=this.currentMedia.mediaPlaybackInfo.currentTime),null!=this.currentMedia&&this.currentMedia.mediaPlaybackInfo.isPlaying&&new m("skinPlay").dispatch(this.context);}updateChromecastPlayerInstanceSession(e,t){this.playerInstance instanceof F&&this.playerInstance.setSession(this.chromecastSession,this.chromecastSender);}setupParamsForFallbackMechanism(e,t){this.currentMedia=e,this.lastDataProviderEvent=t,this.videoCurrentTime=null,this.currentMedia.mediaUserSettings.resumePostion>0&&(this.videoCurrentTime=this.currentMedia.mediaUserSettings.resumePostion);}onSetDataEvent(e,t){this.updateVideoMediaElementCrossOrigin();let i=this;if((W.isiOS||"Safari"==W.browserName)&&1==this.get_variables().autoplay&&"1"!=this.htmlVideo.getAttribute(d.VIDEO_TAG_FOR_AUTOPLAY_INITIALSED))if(d.hasHtmlVideoReadyForAutoplay())this.recreateNativeVideoElement();else if(d.hasPendingVideoElementsForLaterAutoplay())return void d.addListenerForVideoElementForAutoplay((function(){i.onSetDataEvent(e,t);}));if(null!=this.playerInstance&&(this.isSingleVideoTagPlay()||this.hasInStreamAds())&&this.playerInstance.destroy(),null==this.videoPlayersClasses)return;if(null==e.data)return;let s,a=-1,r=null;t?r=e.data.media:(r=e.data,this.setupParamsForFallbackMechanism(r,e));let n=this.videoPlayersClasses;Object.prototype.hasOwnProperty.call(r.customParams.h,"preferedVideoPlayersClassesOrder")&&(n=this.makePreferedVideoClassesInOrder(r.customParams.h.preferedVideoPlayersClassesOrder));let l=0,o=n.length;for(;l<o;){let e=l++;s=n[e];let t=r.failedPlaybackPlayers,i=n[e].__name__;if(Object.prototype.hasOwnProperty.call(t.h,i))continue;let o=0,d=r.source.length;for(;o<d;){let t=o++;if(s.canPlay(r.source[t])){a=e,r.source=this.moveSelectedMediaSourceToFirstPosition(r.source,t);break}}if(a>-1)break}if(a<0)return void this.dispatchNotSupportedVideoError();let h,u=null,m=0,c=n.length;for(;m<c;){let e=m++;s=n[e],e==a&&(t?(this.shouldPlayerInstanceBeUpdated(this.adPlayerInstance,n[e])&&this.adPlayerInstance.destroy(),u=this.adPlayerInstance=s.getInstance(this.context,t)):(this.shouldPlayerInstanceBeUpdated(this.playerInstance,n[e])&&this.playerInstance.destroy(),u=this.playerInstance=s.getInstance(this.context,t)),u.variables=this.get_variables(),u.minAudioTracksForInfo=this.minAudioTracksForInfo,u.isQuickFallbackPathForLiveEnabled=this.isQuickFallbackPathForLiveEnabled,!t&&"Safari"!=W.browserName&&null!=this.nativeVideo.textTracks&&this.nativeVideo.textTracks.length>0&&null!=this.nativeVideo.replaceWith&&this.recreateNativeVideoElement(),u.attachVideo(t?this.nativeAdVideo:this.nativeVideo));}if(null!=this.videoPlaybackRate){let e=this.videoPlaybackRate;h=!isNaN(e);}else h=!1;h&&u.setPlaybackRate(this.videoPlaybackRate),null!=this.volumeValue&&u.volume(this.volumeValue),u.setData(r),this.externalSubtitlesController.setData(r),this.isFirstFrameVideoEventDispatched=!1,this.addFirstFrameListeners(t);}removeFirstFrameListeners(){W.canRequestVideoFrameCallback()&&(this.nativeAdVideo&&this.nativeAdVideo.cancelVideoFrameCallback($(this,this.dispatchFirstFrameVideoEvent)),this.nativeVideo&&this.nativeVideo.cancelVideoFrameCallback($(this,this.dispatchFirstFrameVideoEvent))),h.remove(this.context,"adCurrentTimeChange",$(this,this.dispatchFirstFrameVideoEvent)),p.remove(this.context,"currentTimeChange",$(this,this.dispatchFirstFrameVideoEvent));}addFirstFrameListeners(e){W.canRequestVideoFrameCallback()&&(e?this.nativeAdVideo:this.nativeVideo).requestVideoFrameCallback($(this,this.dispatchFirstFrameVideoEvent)),h.addOnce(this.context,"adCurrentTimeChange",$(this,this.dispatchFirstFrameVideoEvent)),p.addOnce(this.context,"currentTimeChange",$(this,this.dispatchFirstFrameVideoEvent));}dispatchFirstFrameVideoEvent(e){1!=this.isFirstFrameVideoEventDispatched&&(this.isFirstFrameVideoEventDispatched=!0,new p("firstFrame").dispatch(this.context),this.removeFirstFrameListeners());}recreateNativeVideoElement(){let e=this.getVideoElementReadyForAutoplayOrCreate();if(e.controls=!1,null!=this.nativeVideo.attributes)try{let t=this.nativeVideo.attributes,i=0;for(;i<t.length;){let s=t[i];++i,"src"!=s.name&&e.setAttribute(s.name,s.value);}}catch(e){}e.muted=this.htmlVideo.muted,e.volume=this.htmlVideo.volume,e.playbackRate=this.htmlVideo.playbackRate,this.htmlVideo=e,this.setDefaultPoster(this.htmlVideo),this.nativeVideo.replaceWith(this.htmlVideo),this.nativeVideo=this.htmlVideo,this.updateVideoMediaElementCrossOrigin(),this.triggerVideoMediaElementInitEvent();}dispatchNotSupportedVideoError(){let e=new p("playbackPermamentError");e.data={additionalData:{message:"Provided video is not supported."}},this.lastMediaError=e,this.showMediaErrorMessage(e);}getVideoElementReadyForAutoplayOrCreate(){let e=d.getHtmlVideoReadyForAutoplay(),t=W.isMobile()&&"Safari"==W.browserName||W.isSmartTV();if(t&&null==e&&null!=I.lastUsedVideoElement){let t=window.bradmax.player.list(),i=!1,s=0;for(;s<t.length;)if(t[s++].uid==I.lastUsedVideoElementContext){i=!0;break}I.lastUsedVideoElementContext!=this.context&&i||(e=I.lastUsedVideoElement),W.isSmartTV()&&null!=e&&null!=e.textTracks&&e.textTracks.length>0&&(e=null);}return null==e&&(e=window.document.createElement("video")),t&&(I.lastUsedVideoElement=e,I.lastUsedVideoElementContext=this.context),this.setDefaultPoster(e),e}setDefaultPoster(e){W.isAndroid&&null!=e&&(e.poster="data:image/gif;base64,R0lGODlhAQABAIAAAAUEBAAAACwAAAAAAQABAAACAkQBADs=");}makePreferedVideoClassesInOrder(e){let t=[],i=0;for(;i<e.length;){let s=e[i];++i,-1!=this.videoPlayersClasses.indexOf(s)&&t.push(s);}return t}shouldPlayerInstanceBeUpdated(e,t){return null!=e&&J.getClass(e)!=t}setDefaultVariablesFromVideoPluginConfig(){let e,t,i=["qualitySelectionEnabled","minAudioTracksForInfo","isQuickFallbackPathForLiveEnabled"],s=0;for(;s<i.length;){let e,t=i[s];if(++s,null!=this.pluginConfig&&Object.prototype.hasOwnProperty.call(this.pluginConfig,t)&&null!=this.get_variables()){let i=this.get_variables();e=!Object.prototype.hasOwnProperty.call(i,t);}else e=!1;e&&(this.get_variables()[t]=r.field(this.pluginConfig,t));}if(null!=this.get_variables()){let t=this.get_variables();e=Object.prototype.hasOwnProperty.call(t,"minAudioTracksForInfo");}else e=!1;if(e){let e=r.field(this.get_variables(),"minAudioTracksForInfo");e>=1&&(this.minAudioTracksForInfo=e);}if(null!=this.get_variables()){let e=this.get_variables();t=Object.prototype.hasOwnProperty.call(e,"isQuickFallbackPathForLiveEnabled");}else t=!1;t&&(this.isQuickFallbackPathForLiveEnabled=r.field(this.get_variables(),"isQuickFallbackPathForLiveEnabled"));}onPlayerResizeEvent(e){null==this.playerInstance||e.data instanceof _||this.playerInstance.playerResize(e.data);}onSetVideoPlaybackRate(e){let t;if(this.videoPlaybackRate=parseFloat(e.data),null!=this.playerInstance&&null!=this.videoPlaybackRate){let e=this.videoPlaybackRate;t=isNaN(e);}else t=!0;t||this.playerInstance.setPlaybackRate(this.videoPlaybackRate);}onReloadVideoAfterNetworkProblem(e){this.reloadVideoAfterNetworkProblem();}onVideoReadyEvent(e){}onPauseEvent(e){null!=this.playerInstance&&(this.shouldVideoPlay=!1,this.playerInstance.pause());}onStopEvent(e){null!=this.playerInstance&&(this.shouldVideoPlay=!1,this.playerInstance.pause(),this.playerInstance.destroy());}log(e,t){null==t&&(t="log"),console&&("error"==t?console.error(e):"warn"==t?console.warn(e):console.log(e));}initAdVideoTagForMobilesAndPropagate(){if(null==this.playerInstance)return !1;let e=!0;if(!this.isAdVideoTagInitializedForMobiles&&!W.isWebView()&&(W.isMobile()||"Safari"==W.browserName)&&this.hasDefinedAds()&&this.hasAdvertisementPlugin()){if(!this.isSingleVideoTagPlay()||null==this.playerInstance||this.playerInstance instanceof O||(this.playerInstance.destroy(),e=!1),this.isAdVideoTagInitializedForMobiles=!0,null==this.adPlayerInstance){this.adPlayerInstance=O.getInstance(this.context,!0),this.adPlayerInstance.variables=this.get_variables(),this.adPlayerInstance.attachVideo(this.nativeAdVideo);let e=new g,t=new f;t.url=exports.mp4,e.source=[t],this.adPlayerInstance.setData(e);}this.adPlayerInstance.play(),this.adPlayerInstance.pause();}return e}onPlayEvent(e){this.initAdVideoTagForMobilesAndPropagate()&&(this.shouldVideoPlay=!0,this.playerInstance.play());}onPlayPauseEvent(e){this.initAdVideoTagForMobilesAndPropagate()&&(this.shouldVideoPlay=!this.shouldVideoPlay,this.playerInstance.playPause());}onSeekEvent(e){null!=this.playerInstance&&this.playerInstance.seek(e.data.seekedPosition);}onSelectAudioEvent(e){}onSelectSubtitlesEvent(e){}onVolumeEvent(e){this.volumeValue=parseFloat(e.data),null!=this.playerInstance&&(this.htmlVideo.muted=this.volumeValue<=0,this.playerInstance.volume(this.volumeValue)),null!=this.adPlayerInstance&&(this.htmlAdVideo.muted=this.volumeValue<=0,this.adPlayerInstance.volume(this.volumeValue));}onMuteEvent(e){this.htmlVideo.muted=this.htmlAdVideo.muted=!0;}onUnmuteEvent(e){this.htmlVideo.muted=this.htmlAdVideo.muted=!1,this.htmlVideo.volume=0==this.htmlVideo.volume?1:this.htmlVideo.volume,this.htmlAdVideo.volume=0==this.htmlAdVideo.volume?1:this.htmlAdVideo.volume;}onAdPlay(e){null!=this.adPlayerInstance&&(this.shouldVideoPlay=!0,this.adPlayerInstance.play());}onAdPause(e){null!=this.adPlayerInstance&&(this.shouldVideoPlay=!1,this.adPlayerInstance.pause());}onAdResume(e){null!=this.adPlayerInstance&&(this.shouldVideoPlay=!0,this.adPlayerInstance.play());}onVideoPlaying(e){this.isSingleVideoTagPlay()||(null!=this.htmlVideo&&(this.htmlVideo.style.display="block"),null!=this.htmlAdVideo&&(this.htmlAdVideo.style.display="none"));}hasFallbackSourceToCheck(){let e=null!=this.currentMedia&&null!=this.currentMedia.source&&this.currentMedia.source.length>0&&Object.prototype.hasOwnProperty.call(this.currentMedia.source[0].customParams.h,"yospaceStream"),t=null==this.currentMedia.drmCustomLicenseServerHandler||W.isSamsungSmartTVTizen;return !(null==this.currentMedia||!this.currentMedia.hasFallbackSources()||null==this.lastDataProviderEvent)&&(t||e)}reloadVideoWithNextFallbackSource(){let e=null!=this.nativeAdVideo&&null!=this.nativeAdVideo.src&&!this.nativeAdVideo.paused;if(e&&(this.shouldVideoPlay=!1),null==this.lastAdError||null!=this.lastMediaError||this.currentMedia.hasFallbackSources()||(this.currentMedia.mediaPlaybackInfo.isInStreamAdvertisementPlaying=!0),null!=this.currentMedia&&!this.currentMedia.hasFallbackSources()){this.get_variables().autoplay=!1,null==this.htmlVideo||this.htmlVideo.paused||this.htmlVideo.pause(),null==this.htmlAdVideo||this.htmlAdVideo.paused||this.htmlAdVideo.pause(),this.stopPermamentPlaybackErrorTimer();let e=new p("playbackPermamentError");return null!=this.lastMediaError&&(e.data=this.lastMediaError.data),void e.dispatch(this.context)}this.log("BRADMAX PLAYER NOTICE:\nError occurred during video load. Trying to load next fallback video.\n","warn");let t=new p("mediaErrorUsingFallbackSource");t.data=this.currentMedia,t.dispatch(this.context),this.currentMedia.useFallbackSources(),this.shouldVideoPlay||1!=this.get_variables().autoplay||(this.get_variables().autoplay=!1),this.lastDataProviderEvent.dispatch(this.context),e&&new h("adPlaying").dispatch(this.context),this.shouldVideoPlay&&new m("skinPlay").dispatch(this.context);}reloadVideoAfterNetworkProblem(){if(new v("closeMessage").dispatch(this.context),null!=this.playerInstance&&(this.playerInstance.destroy(),this.playerInstance=null),null!=this.adPlayerInstance&&(this.adPlayerInstance.destroy(),this.adPlayerInstance=null),null!=this.lastDataProviderEvent){if(this.lastDataProviderEvent.data instanceof g&&this.videoCurrentTime>0){let e=this.lastDataProviderEvent.data;null!=e.mediaUserSettings&&(e.mediaUserSettings.resumePostion=this.videoCurrentTime);}this.lastDataProviderEvent.dispatch(this.context);}new m("skinPlay").dispatch(this.context);}onNetworkErrorEvent(e){this.lastMediaError=e,this.stopPermamentPlaybackErrorTimer(),this.hasFallbackSourceToCheck()?this.reloadVideoWithNextFallbackSource():this.showNetworkTemporaryErrorMessage(e);}onVideoErrorEvent(e){this.lastMediaError=e,this.stopPermamentPlaybackErrorTimer(),this.hasFallbackSourceToCheck()?this.hasInStreamAds()?j.delay($(this,this.reloadVideoWithNextFallbackSource),0):this.reloadVideoWithNextFallbackSource():(this.showMediaErrorMessage(e),this.playerInstance.pause());}onAdErrorEvent(e){this.lastAdError=e,this.hasFallbackSourceToCheck()?this.hasInStreamAds()?j.delay($(this,this.reloadVideoWithNextFallbackSource),0):this.reloadVideoWithNextFallbackSource():(this.showMediaErrorMessage(e),this.playerInstance.pause());}onVideoDrmAuthError(e){this.stopPermamentPlaybackErrorTimer();let t=new p("playbackPermamentError");t.data=e.data,t.dispatch(this.context);}onVideoDrmModuleCrush(e){this.stopPermamentPlaybackErrorTimer();let t=new p("playbackPermamentError");t.data=e.data,t.dispatch(this.context);}showMediaErrorMessage(e){let t=new v("showMessage");t.data={type:"normal",title:z.translate("error"),text:z.translate("cannot_decode_media"),textDetails:this.getVideoEventErrorMessage(e),close:!1},t.dispatch(this.context),this.startPermamentPlaybackErrorTimer();}showNetworkPermamentErrorMessage(e){let t=new v("showMessage");t.data={type:"normal",title:z.translate("error"),text:z.translate("connection_error_permanent"),textDetails:this.getVideoEventErrorMessage(e),close:!1},t.dispatch(this.context),this.startPermamentPlaybackErrorTimer();}showNetworkTemporaryErrorMessage(e){let t=new v("showMessage");t.data={type:"normal",title:z.translate("error"),text:z.translate("connection_error"),textDetails:this.getVideoEventErrorMessage(e),userSingleActionButtonText:z.translate("try_again"),onUserSingleAction:$(this,this.reloadVideoAfterNetworkProblem),close:!1},t.dispatch(this.context),new p("connectionErrorWaitingForUserAction").dispatch(this.context),this.stopPermamentPlaybackErrorTimer();}startPermamentPlaybackErrorTimer(){this.stopPermamentPlaybackErrorTimer();let e=6e3;Object.prototype.hasOwnProperty.call(this.pluginConfig,"permamentPlaybackErrorSafetyWindow")&&this.pluginConfig.permamentPlaybackErrorSafetyWindow>0&&(e=this.pluginConfig.permamentPlaybackErrorSafetyWindow),this.permamentPlaybackErrorTimer=j.delay($(this,this.onPermamentPlaybackErrorTimer),e);}stopPermamentPlaybackErrorTimer(){null!=this.permamentPlaybackErrorTimer&&(this.permamentPlaybackErrorTimer.stop(),this.permamentPlaybackErrorTimer=null);}onPermamentPlaybackErrorTimer(){this.stopPermamentPlaybackErrorTimer();let e=new p("playbackPermamentError");null!=this.lastMediaError&&(e.data=this.lastMediaError.data),e.dispatch(this.context);}getVideoEventErrorMessage(e){if(0==r.field(this.get_variables(),"showErrorDetails"))return "";let t=z.translate("details");if(null!=this.playerInstance){let e=J.getClass(this.playerInstance).__name__.split(".");t+=" ["+e[e.length-1]+"]";}return t+=":\n",null!=e&&null!=e.data&&null!=e.data.additionalData&&null!=e.data.additionalData.message&&(t+=n.string(e.data.additionalData.message)),t}onVideoTimeChange(e){null!=e&&null!=e.data&&(this.videoCurrentTime=e.data.currentTime);}onAdVideoPlaying(e){this.isInStreamAdPlaying||this.isSingleVideoTagPlay()||(this.htmlVideo.style.display="none",this.htmlAdVideo.style.display="block");}onAdInStreamPlaying(e){this.isInStreamAdPlaying=!0;}onAdInStreamEnd(e){this.isInStreamAdPlaying=!1;}eventFilter(e){let t=e instanceof p;return t&&"connectionError"==e.type&&this.hasFallbackSourceToCheck()?(this.onNetworkErrorEvent(e),!1):t&&("mediaError"==e.type||"loadError"==e.type)&&this.hasFallbackSourceToCheck()?(this.onVideoErrorEvent(e),!1):super.eventFilter(e)}getSupportRateForUrls(e){let t=[],i=0;for(;i<e.length;){let s=e[i++],a=0,r=0,n=this.videoPlayersClasses.length;for(;r<n;){let e=r++,t=this.videoPlayersClasses[e],i=new f;i.url=s,t.canPlay(i)&&(a=e+1);}t.push(a);}return t}}e.bs.player.plugin.video.Video=I,I.__name__="bs.player.plugin.video.Video",I.__super__=A,Object.assign(I.prototype,{__class__:I,videoPlayersClasses:null,videoPlayers:null,nativeVideo:null,nativeAdVideo:null,chromecastConnected:null,chromecastSession:null,chromecastSender:null,htmlVideo:null,htmlAdVideo:null,div:null,minAudioTracksForInfo:null,isQuickFallbackPathForLiveEnabled:null,playerInstance:null,adPlayerInstance:null,externalSubtitlesController:null,subtitlesRenderer:null,isAdVideoTagInitializedForMobiles:null,isInStreamAdPlaying:null,volumeValue:null,currentMedia:null,videoCurrentTime:null,lastDataProviderEvent:null,permamentPlaybackErrorTimer:null,lastMediaError:null,lastAdError:null,shouldVideoPlay:null,videoPlaybackRate:null,isFirstFrameVideoEventDispatched:null});class R{constructor(e,t){this.context=e,this.areListenersAttached=!1,this.renderer=t,this.hasPlaybackStarted=!1,this.activeEntries=new K;}setData(e){this.media=e,this.hasPlaybackStarted=!1,this.selectedSubtitlesSet=null,this.hasMediaExternalSubtitles(e)?this.attachListeners():this.detachListeners();}hasMediaExternalSubtitles(e){if(null!=e.subtitlesSets){let t=0,i=e.subtitlesSets;for(;t<i.length;){let e=i[t];if(++t,null!=e.url&&(this.isExtensionSrt(e.url)||this.isExtensionVtt(e.url)))return !0}}return !1}isExtensionSrt(e){return !!(e=this.stripQueryParams(e)).endsWith(".srt")||e.endsWith(".SRT")}isExtensionVtt(e){return !!((e=this.stripQueryParams(e)).endsWith(".vtt")||e.endsWith(".VTT")||e.endsWith(".webvtt"))||e.endsWith(".WEBVTT")}stripQueryParams(e){let t=new s("[?#].*","".split("u").join(""));return null!=e&&(e=e.replace(t,"")),e}attachListeners(){this.areListenersAttached||(m.add(this.context,"selectSubtitles",$(this,this.onSelectSubtitles)),p.add(this.context,"playing",$(this,this.onPlayEvent)),p.add(this.context,"currentTimeChange",$(this,this.onTimeupdate)),this.areListenersAttached=!0);}detachListeners(){this.areListenersAttached&&(m.remove(this.context,"selectSubtitles",$(this,this.onSelectSubtitles)),p.remove(this.context,"playing",$(this,this.onPlayEvent)),p.remove(this.context,"currentTimeChange",$(this,this.onTimeupdate)),this.areListenersAttached=!1);}onPlayEvent(e){this.hasPlaybackStarted=!0,this.loadSelectedSubtitles();}onSelectSubtitles(e){if(null==e)return;let t=this.activeEntries.h;for(;null!=t;){let e=t.item;t=t.next,this.renderer.onCueExit(e);}this.activeEntries.clear(),this.selectSubtitlesSet(e.data);}selectSubtitlesSet(e){null!=e&&null!=e.url&&(this.isExtensionSrt(e.url)||this.isExtensionVtt(e.url))?(this.selectedSubtitlesSet=e,this.loadSelectedSubtitles()):this.selectedSubtitlesSet=null;}loadSelectedSubtitles(){if(this.hasPlaybackStarted&&null!=this.selectedSubtitlesSet&&null==this.selectedSubtitlesSet.subtitleEntries){let e=new X(this.selectedSubtitlesSet.url);e.onData=$(this,this.onLoadExternalSubtitlesSuccess),e.onError=$(this,this.onLoadExternalSubtitlesError),e.request();}}onTimeupdate(e){if(null==e||null==e.data||null==this.selectedSubtitlesSet||null==this.selectedSubtitlesSet.subtitleEntries)return;this.currentTime=e.data.currentTime;let t=new K,i=this.activeEntries.h;for(;null!=i;){let e=i.item;i=i.next;let s=this.currentTime;e.showTime<=s&&s<e.hideTime||(this.renderer.onCueExit(e),t.add(e));}let s=t.h;for(;null!=s;){let e=s.item;s=s.next,this.activeEntries.remove(e);}let a=this.findEntriesByTime(this.currentTime),r=0;for(;r<a.length;){let e=a[r];++r,this.isEntryOnList(e,this.activeEntries)||(this.activeEntries.push(e),this.renderer.onCueEnter(e));}}isEntryOnList(e,t){let i=t.h;for(;null!=i;){let t=i.item;if(i=i.next,t==e)return !0}return !1}findEntriesByTime(e){let t=[],i=this.selectedSubtitlesSet.subtitleEntries,s=0,a=i.length,r=Math.floor(a/2);for(;s<a;)e<i[r].showTime?a=r-1:s=r+1,r=Math.floor((s+a)/2);let n=r-1;for(;;){let s;if(n>=0){let t=i[n];s=t.showTime<=e&&e<t.hideTime;}else s=!1;if(!s)break;t.unshift(i[n]),--n;}for(n=r;;){let s;if(n<i.length){let t=i[n];s=t.showTime<=e&&e<t.hideTime;}else s=!1;if(!s)break;t.push(i[n]),++n;}return t}destroy(){this.detachListeners();}onLoadExternalSubtitlesSuccess(e){let t=null;t=this.isExtensionSrt(this.selectedSubtitlesSet.url)?new M:new L;try{this.selectedSubtitlesSet.subtitleEntries=t.parse(e);}catch(e){let t=H.caught(e).unwrap();if(!(t instanceof D))throw e;{let e="Cannot load subtitles file. Parse error. \n"+n.string(t.message);console.error(e);}}}onLoadExternalSubtitlesError(e){let t="Cannot load external subtitles file "+this.selectedSubtitlesSet.url+".";console.error(t);}}R.__name__="bs.player.plugin.video.caption.ExternalSubtitlesController",Object.assign(R.prototype,{__class__:R,media:null,context:null,areListenersAttached:null,selectedSubtitlesSet:null,currentTime:null,activeEntries:null,hasPlaybackStarted:null,renderer:null});class x{}x.__name__="bs.player.plugin.video.caption.SubtitlesParserInterface",x.__isInterface__=!0,Object.assign(x.prototype,{__class__:x,parse:null});class M{constructor(){this.timeEntriesSeparator=" --\x3e ",this.lineNumber=0,this.lines=null,this.endLinesRegexp=new i("(\r\n)|(\n)","g"),this.milisecondsSeparatorRegexp=new i("[,\\.]","g"),this.whiteSpacesRegexp=new i("[ \t\r\n]+","g");}readLine(){let e=this.lines[this.lineNumber];return this.lineNumber++,null!=e&&0==this.lineNumber?l.replace(e,"\ufeff",""):e}isFileEnd(){return this.lineNumber>=this.lines.length}isEmptyStr(e){return null==e||""==e}skipEmptyLines(){let e=this.readLine();for(;this.isEmptyStr(e)&&!this.isFileEnd();)e=this.readLine();this.isFileEnd()||this.lineNumber--;}parseEntry(){let e=new T;if(this.isEmptyStr(this.readLine()))throw H.thrown(new D("Error in line: "+this.lineNumber+". Cannot parse entry number."));let t=this.readLine();if(this.isEmptyStr(t))throw H.thrown(new D("Error in line: "+this.lineNumber+". Cannot parse time for entry."));t=t.replace(this.whiteSpacesRegexp.r," ");let i=t.split(this.timeEntriesSeparator);if(2!=i.length)throw H.thrown(new D("Error in line: "+this.lineNumber+". Cannot parse time for entry."));e.showTime=this.parseTime(i[0]),e.hideTime=this.parseTime(i[1]),e.texts=[];let s=this.readLine();for(;!this.isEmptyStr(s);){let t=new k;t.text=l.trim(s),e.texts.push(t),s=this.readLine();}if(0==e.texts.length)throw H.thrown(new D("Error in line: "+this.lineNumber+". No text for entry."));return e}parseTime(e){if(null==e)throw H.thrown(new D("Error in line: "+this.lineNumber+". Cannot parse time for entry."));let t=this.milisecondsSeparatorRegexp.split(e),i=0;t.length>1&&(i=n.parseInt(t[1]));let s=t[0].split(":");if(3!=s.length)throw H.thrown(new D("Error in line: "+this.lineNumber+". Cannot parse time for entry."));let a=0;return a=0+3600*n.parseInt(s[0]),a+=60*n.parseInt(s[1]),a+=n.parseInt(s[2]),a+=i/1e3,a}parse(e){this.lines=this.endLinesRegexp.split(e),this.lineNumber=0,this.skipEmptyLines();let t=[];for(;!this.isFileEnd();)t.push(this.parseEntry()),this.skipEmptyLines();return t}}M.__name__="bs.player.plugin.video.caption.SrtSubtitlesParser",M.__interfaces__=[x],Object.assign(M.prototype,{__class__:M,lineNumber:null,lines:null,endLinesRegexp:null,timeEntriesSeparator:null,milisecondsSeparatorRegexp:null,whiteSpacesRegexp:null});class D{constructor(e){this.message=e;}}D.__name__="bs.player.plugin.video.caption.SubtitlesParserError",Object.assign(D.prototype,{__class__:D,message:null});class L extends M{constructor(){super();}parse(e){this.lines=this.endLinesRegexp.split(e),this.lineNumber=0,this.skipEmptyLines();let t=this.readLine();if(t=l.trim(t),65279==a.cca(t,0)&&(t=a.substr(t,1,null)),"WEBVTT"!=t)throw H.thrown(new D("Error in line: "+this.lineNumber+". WEBVTT text expected in first line."));this.skipEmptyLines();let i=[];for(;!this.isFileEnd();)i.push(this.parseEntry()),this.skipEmptyLines();return i}}L.__name__="bs.player.plugin.video.caption.VttSubtitlesParser",L.__super__=M,Object.assign(L.prototype,{__class__:L});class F{constructor(e){this.state=0,this.castSession=null,this.isSeeking=!1,this.isAdvertisement=!1,this.isQuickFallbackPathForLiveEnabled=!0,this.minAudioTracksForInfo=2,null==F.instances.h[(e?"ad_":"")+this.context]&&(this.volumeLevel=1,this.isAdvertisement=e);}setSession(e,t){this.castSession=e,this.sender=t,m.add(this.context,"skinVolume",$(this,this.onVolumeChange)),m.add(this.context,"skinMute",$(this,this.onMuteChange)),m.add(this.context,"skinUnmute",$(this,this.onUnMuteChange)),null!=this.castSession&&(this.state=10,this.setupMedia());}setPlaybackRate(e){if(this.isAdvertisement||this.currentPlaybackRate==e)return;if(this.desiredPlaybackRate=e,null==this.castSession)return;let t=this.castSession.getMediaSession();null!=t&&this.castSession.sendMessage("urn:x-cast:com.google.cast.media",{type:"SET_PLAYBACK_RATE",playbackRate:this.desiredPlaybackRate,mediaSessionId:t.mediaSessionId,requestId:1}).then((function(e){})).catch((function(e){console.error("Set playback rate error: "+e);}));}getPlaybackRate(){return this.isAdvertisement?1:this.currentPlaybackRate}triggerVideoPlaybackRateEvent(){if(this.isAdvertisement)return;let e=new p("playbackRate");e.data=this.getPlaybackRate(),e.dispatch(this.context);}setupMedia(){if(null!=this.media&&null!=this.media.source&&this.media.source.length>0&&null!=this.castSession&&null!=this.sender){this.state=20;let e=this.sender.newMediaInfo(this.media.source[0].url);e.metadata=this.sender.newGenericMediaMetadata(),e.metadata.title=this.media.title;let t=(null!=this.media.splashImages?this.media.splashImages:[]).concat(null!=this.media.posterImages?this.media.posterImages:[]),i=[],s=0;for(;s<t.length;){let e=t[s];++s,null!=e&&i.push(e);}let a=[],r=0;for(;r<i.length;)a.push(this.sender.castMediaImage(i[r++]));if(e.metadata.images=a,e.customData={statsId:this.media.id,statsTitle:this.media.title},null!=this.mediaVmapResponse||null!=this.mediaVmapUrl){let t={};null!=this.mediaVmapResponse?t.adsResponse=this.mediaVmapResponse:t.adTagUrl=this.mediaVmapUrl,e.vmapAdsRequest=t;}let n,l=this.sender.newLoadRequest(e);if(l.autoplay=this.media.mediaPlaybackInfo.isPlaying,this.media.mediaPlaybackInfo.currentTime>0&&(l.currentTime=this.media.mediaPlaybackInfo.currentTime),null!=this.desiredPlaybackRate){let e=this.desiredPlaybackRate;n=!isNaN(e);}else n=!1;n&&this.desiredPlaybackRate>=.5&&(l.playbackRate=this.desiredPlaybackRate);let o=this.castSession.loadMedia(l);this.setupMediaTimeoutTimer=j.delay($(this,this.onRemoteMediaSetupTimeout),12e3),o.then($(this,this.onRemoteMediaLoad),$(this,this.onRemoteMediaError)).catch($(this,this.onRemoteMediaError));}}stopSetupMediaTimeoutTimer(){null!=this.setupMediaTimeoutTimer&&(this.setupMediaTimeoutTimer.stop(),this.setupMediaTimeoutTimer=null);}onRemoteMediaSetupTimeout(){this.stopSetupMediaTimeoutTimer(),this.onRemoteMediaError({description:'Chromecast cannot initialize remote media. Probably Chromecast is blocking playback because of more restricted CORS policy (no wildcard "*" is allowed). Please check page if you are a stream provider: https://developers.google.com/cast/docs/chrome_sender/advanced#cors_requirements '});}onRemoteMediaError(e){this.stopSetupMediaTimeoutTimer();let t="";null!=e&&null!=e.code&&(t="errorCode: "+n.string(e.code)),null!=e&&null!=e.description&&(t+=" description: "+n.string(e.description)),this.dispatchEvent(this.isAdvertisement?new h("adConnectionError"):new p("connectionError"),{errObj:e,isTemporaryNetworkIssue:!1,message:t}),this.sender.disconnect();}onRemoteMediaLoad(){this.stopSetupMediaTimeoutTimer(),new p("videoCastingStart").dispatch(this.context),this.remotePlayer=this.sender.newRemotePlayer(),this.remotePlayerController=this.sender.newRemotePlayerController(this.remotePlayer),this.state=30,this.media.mediaPlaybackInfo.currentTime>0&&this.remotePlayer.canSeek&&this.seek(this.media.mediaPlaybackInfo.currentTime),this.volume(this.volumeLevel),this.dispatchEvent(this.isAdvertisement?new h("adPlaying"):new p("playing")),this.media.mediaPlaybackInfo.isPlaying||this.dispatchEvent(this.isAdvertisement?new h("adPaused"):new p("paused")),this.dispatchEvent(this.isAdvertisement?new h("adDurationChange"):new p("durationChange"));let e=this.sender.getCast().framework.RemotePlayerEventType;this.remotePlayerController.addEventListener(e.CURRENT_TIME_CHANGED,$(this,this.onRemoteTimeChange)),this.remotePlayerController.addEventListener(e.DURATION_CHANGED,$(this,this.onRemoteDurationChange)),this.remotePlayerController.addEventListener(e.IS_PAUSED_CHANGED,$(this,this.onRemotePauseChange)),this.remotePlayerController.addEventListener(e.MEDIA_INFO_CHANGED,$(this,this.onRemoteMediaInfoChange));}onRemoteTimeChange(){null!=this.remotePlayer&&null!=this.remotePlayerController&&this.remotePlayer.isConnected&&(this.dispatchEvent(this.isAdvertisement?new h("adCurrentTimeChange"):new p("currentTimeChange")),this.isSeeking&&(this.isSeeking=!1,this.dispatchEvent(this.isAdvertisement?new h("seekingEnd"):new p("seekingEnd"))),this.remotePlayer.isPaused&&this.dispatchEvent(this.isAdvertisement?new h("adPaused"):new p("paused")));}onRemoteDurationChange(){null!=this.remotePlayer&&null!=this.remotePlayerController&&this.remotePlayer.isConnected&&(this.dispatchEvent(this.isAdvertisement?new h("adDurationChange"):new p("durationChange")),0==this.remotePlayer.duration&&null==this.remotePlayer.mediaInfo&&this.dispatchEvent(this.isAdvertisement?new h("adComplete"):new p("complete")));}onRemotePauseChange(){null!=this.remotePlayer&&null!=this.remotePlayerController&&this.remotePlayer.isConnected&&(this.remotePlayer.isPaused?this.dispatchEvent(this.isAdvertisement?new h("adPaused"):new p("paused")):this.dispatchEvent(this.isAdvertisement?new h("adPlaying"):new p("playing")));}onRemoteMediaInfoChange(){if(null!=this.remotePlayer&&null!=this.remotePlayerController&&this.remotePlayer.isConnected){if(null!=this.castSession){let e=this.castSession.getMediaSession();if(null!=e){let t=e.playbackRate;!isNaN(t)&&t>0&&t!=this.currentPlaybackRate&&(this.currentPlaybackRate=t,this.triggerVideoPlaybackRateEvent());}}this.hasVideoComplete()&&(this.state=10,this.dispatchEvent(this.isAdvertisement?new h("adComplete"):new p("complete")));}}onChromecastDisonnect(){if(null!=this.mediaVmapResponse&&null!=this.variables.freewheel){this.variables.freewheel.testFeed=this.mediaVmapResponse;let e=new h("feedUpdate");e.data=this.mediaVmapResponse,e.dispatch(this.context);}if(null!=this.mediaVmapUrl&&null!=this.variables.freewheel){this.variables.freewheel.testFeedUrl=this.mediaVmapUrl;let e=new h("feedUpdate");e.data=this.mediaVmapUrl,e.dispatch(this.context);}if(null!=this.media&&null!=this.media.mediaPlaybackInfo&&this.media.mediaPlaybackInfo.currentTime>0&&(this.media.mediaUserSettings.resumePostion=this.media.mediaPlaybackInfo.currentTime),m.remove(this.context,"skinVolume",$(this,this.onVolumeChange)),m.remove(this.context,"skinMute",$(this,this.onMuteChange)),m.remove(this.context,"skinUnmute",$(this,this.onUnMuteChange)),null!=this.remotePlayerController){let e=this.sender.getCast().framework.RemotePlayerEventType;this.remotePlayerController.removeEventListener(e.CURRENT_TIME_CHANGED,$(this,this.onRemoteTimeChange)),this.remotePlayerController.removeEventListener(e.DURATION_CHANGED,$(this,this.onRemoteDurationChange)),this.remotePlayerController.removeEventListener(e.IS_PAUSED_CHANGED,$(this,this.onRemotePauseChange)),this.remotePlayerController.removeEventListener(e.MEDIA_INFO_CHANGED,$(this,this.onRemoteMediaInfoChange));}this.state=0,this.media=null,this.remotePlayer=null,this.remotePlayerController=null;}dispatchEvent(e,t){let i=0,s=0;null!=this.remotePlayer&&(i=this.remotePlayer.duration,s=this.remotePlayer.currentTime,0==s&&null!=this.remotePlayer.savedPlayerState&&(s=this.remotePlayer.savedPlayerState.currentTime,i=this.remotePlayer.savedPlayerState.mediaInfo.duration)),null!=this.media&&(this.media.mediaPlaybackInfo.currentTime=s,this.media.mediaPlaybackInfo.isPlaying=null!=this.remotePlayer&&!this.remotePlayer.isPaused,this.media.mediaPlaybackInfo.playbackRate=this.getPlaybackRate()),null==e.data&&(e.data={}),e.data.duration=i,e.data.currentTime=s,e.data.media=this.media,e.data.additionalData=t,e.dispatch(this.context);}create(){}destroy(){}attachVideo(e){}attachSubtitlesRenderer(e){}playerResize(e){}videoReady(){}onDurationChange(e){}pause(){null!=this.remotePlayer&&null!=this.remotePlayerController&&(this.remotePlayer.isPaused||this.remotePlayerController.playOrPause());}play(){null!=this.remotePlayer&&null!=this.remotePlayerController&&this.remotePlayer.isPaused&&(this.hasVideoComplete()?(this.media.mediaPlaybackInfo.isPlaying=!0,this.setupMedia()):this.remotePlayerController.playOrPause());}playPause(){this.hasVideoComplete()?(this.media.mediaPlaybackInfo.isPlaying=!0,this.setupMedia()):null!=this.remotePlayerController&&this.remotePlayerController.playOrPause();}hasVideoComplete(){return null!=this.media&&null!=this.remotePlayer&&null==this.remotePlayer.mediaInfo&&null!=this.castSession&&this.state>=10&&(null==this.remotePlayer.savedPlayerState||this.remotePlayer.savedPlayerState.duration>0&&this.remotePlayer.savedPlayerState.currentTime>=this.remotePlayer.savedPlayerState.duration-1)}reset(){}seek(e){null!=this.remotePlayer&&null!=this.remotePlayerController&&(this.remotePlayer.currentTime=e,this.remotePlayerController.seek(),this.isSeeking=!0,this.dispatchEvent(this.isAdvertisement?new h("seekingStart"):new p("seekingStart")));}selectAudio(e){}selectSubtitles(e){}volume(e){this.volumeLevel=e,null!=this.remotePlayer&&null!=this.remotePlayerController&&(this.remotePlayer.volumeLevel=e,this.remotePlayerController.setVolumeLevel());}onVolumeChange(e){null!=e&&null!=e.data&&this.volume(e.data);}onMuteChange(e){null!=this.remotePlayer&&null!=this.remotePlayerController&&0==this.remotePlayer.isMuted&&this.remotePlayerController.muteOrUnmute();}onUnMuteChange(e){null!=this.remotePlayer&&null!=this.remotePlayerController&&1==this.remotePlayer.isMuted&&this.remotePlayerController.muteOrUnmute();}setData(e){if(this.media=e,this.mediaVmapResponse=null,this.mediaVmapUrl=null,null!=this.variables.freewheel){null!=this.variables.freewheel.testFeed&&(this.mediaVmapResponse=this.variables.freewheel.testFeed,this.variables.freewheel.testFeed=""),null!=this.variables.freewheel.testFeedUrl&&(this.mediaVmapUrl=this.variables.freewheel.testFeedUrl,this.variables.freewheel.testFeedUrl="");let e=new h("feedUpdate");e.data="",e.dispatch(this.context);}null!=this.castSession&&this.state>=10&&(e.mediaPlaybackInfo.isPlaying=!0,this.setupMedia());}saveBandwidthModeVisibilityChange(e){}static canPlay(e){return !0}static getInstance(e,t){let i=t?"ad_":"";if(Object.prototype.hasOwnProperty.call(F.instances.h,i+e))return F.instances.h[i+e];{let s=new F(t);return F.instances.h[i+e]=s,s.context=e,s.create(),s}}}F.__name__="bs.player.plugin.video.chromecast.ChromecastVideo",Object.assign(F.prototype,{__class__:F,minAudioTracksForInfo:null,isQuickFallbackPathForLiveEnabled:null,context:null,variables:null,isAdvertisement:null,isSeeking:null,media:null,mediaVmapResponse:null,mediaVmapUrl:null,sender:null,remotePlayer:null,remotePlayerController:null,castSession:null,state:null,volumeLevel:null,setupMediaTimeoutTimer:null,desiredPlaybackRate:null,currentPlaybackRate:null});class O{constructor(e){this.playbackRate=1,this.isStartTimeInitialized=!1,this.currentTime=0,this.initialAsAdvertisement=!1,this.isInStreamAdvertisement=!1,this.isAdvertisement=!1,this.isQuickFallbackPathForLiveEnabled=!0,this.minAudioTracksForInfo=2,null==O.instances.h[(e?"ad_":"")+this.context]&&(this.isAdvertisement=e,this.initialAsAdvertisement=e,this.isInStreamAdvertisement=!1,this.state=0,this.fairPlayDrm=new N(this),this.areSubtitlesAndAudioTracksInitialized=!1,this.isStartTimeInitialized=!1,this.isBuffering=!1,this.prePlaybackSeekRelativePosition=null,this.videoElementCommandsQueue=[],this.videoElementPromise=null,this.androidHlsPlaybackWatchdogTimer=null,this.androidHlsPlaybackEndWatchdogTimer=null,this.onErrorFallbackTriesNum=0,this.iosIsStalledConnection=!1,this.iosIsStalledConnectionDetectionEnabled=!1,this.iosIsStalledConnectionProblemsStart=null,this.hasCriticalErrorBeenDispatched=!1,this.mobileOrSafariBufferingTimeoutOccurred=!1);}create(){m.add(this.context,"selectSubtitles",$(this,this.onSelectSubtitles)),m.add(this.context,"selectAudio",$(this,this.onSelectAudio)),"Safari"!=W.browserName||W.isSamsungSmartTVTizen||(y.add(this.context,"resize",$(this,this.onPlayerResizeEvent)),window.addEventListener("resize",$(this,this.onWindowResize))),h.add(this.context,"adInStreamPlaying",$(this,this.onAdInStreamPlaying)),h.add(this.context,"adInStreamPlayingSilent",$(this,this.onAdInStreamPlaying)),h.add(this.context,"adInStreamEnd",$(this,this.onAdInStreamEnd)),h.add(this.context,"adInStreamEndSilent",$(this,this.onAdInStreamEnd)),h.add(this.context,"adInStreamClipPlaying",$(this,this.onAdClipInStreamPlaying)),h.add(this.context,"adInStreamClipPlayingSilent",$(this,this.onAdClipInStreamPlaying)),h.add(this.context,"adInStreamClipEnd",$(this,this.onAdClipInStreamEnd)),h.add(this.context,"adInStreamClipEndSilent",$(this,this.onAdClipInStreamEnd)),h.add(this.context,"adInStreamAdsBreaksInfo",$(this,this.onAdInStreamAdsBreaksInfo));}onAdInStreamPlaying(e){this.isAdvertisement=!0,this.isInStreamAdvertisement=!0,null!=this.media&&null!=this.media.mediaPlaybackInfo&&(this.media.mediaPlaybackInfo.isInStreamAdvertisementPlaying=!0);}onAdInStreamEnd(e){this.isAdvertisement=this.initialAsAdvertisement,this.isInStreamAdvertisement=!1,null!=this.media&&null!=this.media.mediaPlaybackInfo&&(this.media.mediaPlaybackInfo.isInStreamAdvertisementPlaying=!1),!W.isiOS&&"Safari"!=W.browserName||W.isSamsungSmartTVTizen||(this.iosHitDecoderAfter=this.video.currentTime+.5);}onAdClipInStreamPlaying(e){null!=this.video&&null!=this.media&&(this.inStreamAdvertStartPos=this.video.currentTime,null!=e.data&&e.data.adStartTime>=0&&(this.inStreamAdvertStartPos=e.data.adStartTime,(W.isiOS||"Safari"==W.browserName)&&!W.isSamsungSmartTVTizen&&this.inStreamAdvertStartPos>86400&&null!=this.dvrPlaybackStartTs&&this.dvrPlaybackStartTs>0&&(this.inStreamAdvertStartPos-=this.dvrPlaybackStartTs)),this.inStreamAdvertMedia=null,null!=e&&null!=e.data&&(this.inStreamAdvertMedia=e.data.media));}onAdClipInStreamEnd(e){this.inStreamAdvertStartPos=null,this.inStreamAdvertMedia=null;}onAdInStreamAdsBreaksInfo(e){let t=this.getPlaybackStartTime(this.media);null!=t&&t>0&&this.currentTime!=t&&!this.isStartTimeInitialized&&(this.currentTime=t);}isWebSafari(){return "Safari"==W.browserName&&!W.isSamsungSmartTVTizen}destroy(){this.stopLiveEdgeUpdateTimer(),this.stopAndroidHlsPlaybackEndWatchdogTimer(),this.stopLiveStreamEndingTimeout(),this.stopMobileOrSafariBufferingTimeoutTimer(),this.stopPlaybackRestartTimeoutTimer(),this.stopInitializeAfterCanplaythrouTimer(),this.stopSafariErrorTimeoutTimer(),m.remove(this.context,"selectSubtitles",$(this,this.onSelectSubtitles)),m.remove(this.context,"selectAudio",$(this,this.onSelectAudio)),"Safari"!=W.browserName||W.isSamsungSmartTVTizen||(y.remove(this.context,"resize",$(this,this.onPlayerResizeEvent)),window.removeEventListener("resize",$(this,this.onWindowResize))),h.remove(this.context,"adInStreamPlaying",$(this,this.onAdInStreamPlaying)),h.remove(this.context,"adInStreamPlayingSilent",$(this,this.onAdInStreamPlaying)),h.remove(this.context,"adInStreamEnd",$(this,this.onAdInStreamEnd)),h.remove(this.context,"adInStreamEndSilent",$(this,this.onAdInStreamEnd)),h.remove(this.context,"adInStreamClipPlaying",$(this,this.onAdClipInStreamPlaying)),h.remove(this.context,"adInStreamClipPlayingSilent",$(this,this.onAdClipInStreamPlaying)),h.remove(this.context,"adInStreamClipEnd",$(this,this.onAdClipInStreamEnd)),h.remove(this.context,"adInStreamClipEndSilent",$(this,this.onAdClipInStreamEnd)),h.remove(this.context,"adInStreamAdsBreaksInfo",$(this,this.onAdInStreamAdsBreaksInfo)),null!=this.video&&(this.video.removeEventListener("pause",$(this,this.onVideoPause)),this.video.removeEventListener("play",$(this,this.onVideoPlay)),this.video.removeEventListener("playing",$(this,this.onVideoPlaying)),this.video.removeEventListener("timeupdate",$(this,this.onVideoTimeupdate)),this.video.removeEventListener("durationchange",$(this,this.onVideoDurationchange)),this.video.removeEventListener("waiting",$(this,this.onVideoWaiting)),this.video.removeEventListener("ended",$(this,this.onVideoEnded)),this.video.removeEventListener("seeking",$(this,this.onVideoSeeking)),this.video.removeEventListener("seeked",$(this,this.onVideoSeeked)),this.isWebSafari()?this.video.removeEventListener("error",$(this,this.onErrorWebSafari)):this.video.removeEventListener("error",$(this,this.onError)),!W.isiOS&&"Safari"!=W.browserName||W.isSamsungSmartTVTizen||this.video.removeEventListener("stalled",$(this,this.onIosStalled)),this.video.removeEventListener("canplaythrough",$(this,this.onVideoCanplaythrough)),null!=this.fairPlayDrm&&this.video.removeEventListener("webkitneedkey",$(G=this.fairPlayDrm,G.onNeedKey)),this.video.removeEventListener("loadedmetadata",$(this,this.onVideoLoadedMetadata)),null!=this.video.textTracks&&this.video.textTracks.removeEventListener("addtrack",$(this,this.onAddTrack)),this.video.removeEventListener("ratechange",$(this,this.onVideoRateChange)),this.video.setAttribute("src",""),this.video.load()),this.video=null,this.mediaSourceUrl=null,O.canPlayFileExtensionCache=new Y,O.instances=new Y,this.isAdvertisement=null,this.media=null,this.currentTime=null,this.state=null,this.fairPlayDrm.reset(),this.areSubtitlesAndAudioTracksInitialized=null,this.isStartTimeInitialized=!1,this.isBuffering=!1,this.onErrorFallbackTriesNum=0,this.iosIsStalledConnection=!1,this.iosIsStalledConnectionDetectionEnabled=!1,this.iosIsStalledConnectionProblemsStart=null;}dispatchEvent(e,t){if(!this.isEventFromRightContext())return;let i=this.video.duration,s=this.currentTime;if(null!=this.media&&(this.media.mediaPlaybackInfo.playbackRate=this.getPlaybackRate()),null!=this.media&&this.areSubtitlesAndAudioTracksInitialized){if(this.media.mediaPlaybackInfo.currentTime=s,this.media.mediaPlaybackInfo.isPlaying=!this.video.paused,this.isDvr()){i=this.getDVRWindowSize(),this.media.duration=i;let t=this.getDVRWindowRange();this.isVideoCurrentTimeReliable()?(s=this.dvrRelativePlaybackTimeToDvrWindowTime(this.video.currentTime),this.media.mediaPlaybackInfo.currentTime=this.dvrRelativePlaybackTimeToTs(this.video.currentTime)):(s=this.dvrRelativePlaybackTimeToDvrWindowTime(this.currentTime),this.media.mediaPlaybackInfo.currentTime=this.dvrRelativePlaybackTimeToTs(this.currentTime));let a=this.media;a.dvrWindowLength=i,null!=t&&(a.dvrWindowLiveEdge=this.dvrRelativePlaybackTimeToTs(t.end),"currentTimeChange"==e.type&&(this.dvrWindowTailLastSend=t.start));}}else if(null!=this.media&&this.isDvr()&&0==this.currentTime){let e=this.getPlaybackStartTime(this.media),t=this.getDVRWindowRange();this.media.mediaPlaybackInfo.currentTime=e>0?e:null!=t?this.dvrRelativePlaybackTimeToTs(t.end):this.getNowTs();}null!=this.prePlaybackSeekRelativePosition&&0==s&&(s=this.prePlaybackSeekRelativePosition*this.media.duration);let a=0,r=0,n=this.video.buffered.length;for(;r<n;){let e=r++;a+=this.video.buffered.end(e)-this.video.buffered.start(e);}null==e.data&&(e.data={}),this.isInStreamAdvertisement&&this.inStreamAdvertStartPos>=0&&(s=this.video.currentTime-this.inStreamAdvertStartPos,null!=this.inStreamAdvertMedia&&(i=this.inStreamAdvertMedia.duration),s>i&&(s=i),0==this.video.currentTime&&s<0&&(s=i,null!=this.media&&null!=this.media.mediaPlaybackInfo&&(this.media.mediaPlaybackInfo.currentTime=this.inStreamAdvertStartPos+i))),e.data.duration=i,e.data.currentTime=s,e.data.videoTagCurrentTime=this.video.currentTime,e.data.source=this.video.currentSrc,e.data.totalBufferedTime=a,e.data.media=this.media,e.data.additionalData=t,this.isPlaybackNotAllowed&&(null==e.data.additionalData&&(e.data.additionalData={}),e.data.additionalData.isPlaybackNotAllowed=!0),e.dispatch(this.context);}dvrRelativePlaybackTimeToDvrWindowTime(e){let t=this.getDVRWindowRange();return null==t?e:e-t.start}dvrWindowTimeToDvrRelativePlaybackTime(e){if(null!=this.dvrWindowTailLastSend)return e+this.dvrWindowTailLastSend;let t=this.getDVRWindowRange();return null==t?e:e+t.start}isDvr(){return null!=this.media&&this.media instanceof S}dvrRelativePlaybackTimeToTs(e){let t=0;return null!=this.dvrPlaybackStartTs&&(t=this.dvrPlaybackStartTs),t+e}getDVRWindowRangeRaw(){if(null==this.video||null==this.video.seekable||0==this.video.seekable.length)return null;return {start:this.video.seekable.start(0),end:this.video.seekable.end(0)}}getDVRWindowRange(){let e=this.getDVRWindowRangeRaw();return null==e?null:(null!=this.dvrWindowStartTimeTs&&null!=this.dvrPlaybackStartTs&&this.dvrRelativePlaybackTimeToTs(e.start)<this.dvrWindowStartTimeTs&&(e.start=this.dvrWindowStartTimeTs-this.dvrPlaybackStartTs),null!=this.dvrWindowEndTimeTs&&null!=this.dvrPlaybackStartTs&&this.dvrWindowEndTimeTs<this.dvrRelativePlaybackTimeToTs(e.end)&&(e.end=this.dvrWindowEndTimeTs-this.dvrPlaybackStartTs),e)}getDVRWindowSize(){let e,t=this.getDVRWindowRange();if(null!=t){let i=t.end;e=!isFinite(i);}else e=!0;return e?0:t.end-t.start}getNowTs(){return (new Date).getTime()/1e3}attachSubtitlesRenderer(e){this.subtitlesRenderer=e;}attachVideo(e){this.video=e,this.video.addEventListener("pause",$(this,this.onVideoPause)),this.video.addEventListener("play",$(this,this.onVideoPlay)),this.video.addEventListener("playing",$(this,this.onVideoPlaying)),this.video.addEventListener("timeupdate",$(this,this.onVideoTimeupdate)),this.video.addEventListener("durationchange",$(this,this.onVideoDurationchange)),this.video.addEventListener("waiting",$(this,this.onVideoWaiting)),this.video.addEventListener("ended",$(this,this.onVideoEnded)),this.video.addEventListener("seeking",$(this,this.onVideoSeeking)),this.video.addEventListener("seeked",$(this,this.onVideoSeeked)),this.isWebSafari()?this.video.addEventListener("error",$(this,this.onErrorWebSafari)):this.video.addEventListener("error",$(this,this.onError)),!W.isiOS&&"Safari"!=W.browserName||W.isSamsungSmartTVTizen||this.video.addEventListener("stalled",$(this,this.onIosStalled)),this.video.addEventListener("canplaythrough",$(this,this.onVideoCanplaythrough)),this.video.addEventListener("loadedmetadata",$(this,this.onVideoLoadedMetadata)),null!=this.video.textTracks&&this.video.textTracks.addEventListener("addtrack",$(this,this.onAddTrack)),"Safari"!=W.browserName||W.isSamsungSmartTVTizen||this.video.addEventListener("webkitneedkey",$(G=this.fairPlayDrm,G.onNeedKey),!1),this.video.addEventListener("ratechange",$(this,this.onVideoRateChange)),this.checkPlaybackRate(),this.triggerVideoPlaybackRateEvent();}setPlaybackRate(e){this.isAdvertisement||(this.playbackRate=e,this.checkPlaybackRate());}getPlaybackRate(){return this.video.playbackRate}onVideoRateChange(e){this.triggerVideoPlaybackRateEvent();}triggerVideoPlaybackRateEvent(){if(this.isAdvertisement)return;let e=new p("playbackRate");e.data=this.getPlaybackRate(),e.dispatch(this.context);}checkPlaybackRate(){let e;if(this.isAdvertisement)e=!0;else {let t=this.playbackRate;e=isNaN(t);}e||this.getPlaybackRate()==this.playbackRate||(this.video.playbackRate=this.playbackRate);}onAddTrack(e){let t=this.isAdvertisement?new h("addTrack"):new p("addTrack");t.data={track:e},this.dispatchEvent(t);}onVideoPause(){this.isEventFromRightContext()&&(this.stopAndroidHlsPlaybackEndWatchdogTimer(),this.lastPausedTime=new Date,this.video.currentTime>0&&this.video.currentTime==this.video.duration||(this.state=102,this.dispatchEvent(this.isAdvertisement?new h("adPaused"):new p("paused"))));}onVideoPlay(){this.isEventFromRightContext()&&(this.state=103,this.stopAndroidHlsPlaybackEndWatchdogTimer(),(!W.isiOS&&"Safari"!=W.browserName||W.isSamsungSmartTVTizen||!this.isDvr()||this.isVideoElementPlaying())&&(this.checkPlaybackRate(),this.storeStartPlayingPositionForCastingIos(),this.dispatchEvent(this.isAdvertisement?new h("adPlaying"):new p("playing"))));}onVideoPlaying(){this.isEventFromRightContext()&&(this.stopMobileOrSafariBufferingTimeoutTimer(),this.stopAndroidHlsPlaybackEndWatchdogTimer(),this.storeStartPlayingPositionForCastingIos());}storeStartPlayingPositionForCastingIos(){(W.isiOS||"Safari"==W.browserName)&&!W.isSamsungSmartTVTizen&&null!=this.video&&this.video.currentTime>0&&(this.iosLastPlayingEvent=new Date,this.iosLastPlayingEventPosition=this.video.currentTime);}shouldRestorePlaybackPositionForCastingIos(){return !!((W.isiOS||"Safari"==W.browserName)&&!W.isSamsungSmartTVTizen&&null!=this.iosLastPlayingEvent&&this.isAirPlayCasting()&&(new Date).getTime()-this.iosLastPlayingEvent.getTime()<3e3&&null!=this.iosLastPlayingEventPosition&&null!=this.video&&this.video.currentTime>=1&&this.video.duration!=1/0&&this.video.duration>=1)&&this.iosLastPlayingEventPosition-this.video.currentTime>1}restorePlayingPositionForCastingIos(){let e=this.iosLastPlayingEventPosition;this.iosLastPlayingEvent=null,this.iosLastPlayingEventPosition=null;let t=this;j.delay((function(){t.seek(e);}),100);}stopAndroidHlsPlaybackEndWatchdogTimer(){null!=this.androidHlsPlaybackEndWatchdogTimer&&(this.androidHlsPlaybackEndWatchdogTimer.stop(),this.androidHlsPlaybackEndWatchdogTimer=null);}onVideoTimeupdate(){if(!this.isEventFromRightContext())return;if(null!=this.mobileOrSafariBufferingTimeoutTimer&&null!=this.video&&this.video.readyState>=2&&(this.video.readyState>=3?this.stopMobileOrSafariBufferingTimeoutTimer():2==this.video.readyState&&this.startMobileOrSafariBufferingTimeoutTimer()),this.isDvr()&&null==this.liveEdgeUpdateTimer&&(this.liveEdgeUpdateTimer=new j(1e3),this.liveEdgeUpdateTimer.run=$(this,this.onLiveEdgeUpdate)),W.isAndroid&&this.isVideoElementPlaying()&&(this.stopAndroidHlsPlaybackEndWatchdogTimer(),this.androidHlsPlaybackEndWatchdogTimer=j.delay($(this,this.onVideoWaiting),1e3)),null!=this.androidHlsPlaybackWatchdogTimer&&null!=this.video&&this.video.currentTime>0&&(this.androidHlsPlaybackWatchdogTimer.stop(),this.androidHlsPlaybackWatchdogTimer=null),null!=this.iosHitDecoderAfter&&null!=this.video&&this.iosHitDecoderAfter<=this.video.currentTime&&(this.iosHitDecoderAfter=null,this.video.pause(),this.video.play()),this.shouldRestorePlaybackPositionForCastingIos())return void this.restorePlayingPositionForCastingIos();this.isVideoCurrentTimeReliable()&&(this.currentTime=this.video.currentTime,0<this.dvrWindowStartTimeTs&&0<this.media.mediaPlaybackInfo.currentTime&&(W.isiOS||"Safari"==W.browserName)&&!W.isSamsungSmartTVTizen&&this.media.mediaPlaybackInfo.currentTime<this.dvrWindowStartTimeTs&&this.seek(this.currentTime+(this.dvrWindowStartTimeTs-this.media.mediaPlaybackInfo.currentTime))),this.iosIsStalledConnectionDetectionEnabled&&!this.isAirPlayCasting()&&this.iosDetectStalledConnection(),this.onErrorFallbackTriesNum>0&&this.isVideoElementPlaying()&&(this.onErrorFallbackTriesNum=0);let e=(101==this.state||15==this.state||this.isBuffering)&&this.isVideoElementPlaying();e&&(this.state=103),this.dispatchEvent(this.isAdvertisement?new h("adCurrentTimeChange"):new p("currentTimeChange")),e&&(this.isBuffering=!1,this.dispatchEvent(new p("bufferingEnd")),!W.isiOS&&"Safari"!=W.browserName||W.isSamsungSmartTVTizen||!this.isVideoElementPlaying()||(this.storeStartPlayingPositionForCastingIos(),this.dispatchEvent(this.isAdvertisement?new h("adPlaying"):new p("playing")))),this.isDvr()&&null!=this.dvrWindowEndTimeTs&&this.media.mediaPlaybackInfo.currentTime>this.dvrWindowEndTimeTs&&(new m("skinPause").dispatch(this.context),this.dispatchEvent(this.isAdvertisement?new h("adComplete"):new p("complete")));}isAirPlayCasting(){return !(!W.isiOS||null==this.video)&&this.video.webkitCurrentPlaybackTargetIsWireless}iosDetectStalledConnection(){if(null==this.video||this.video.seeking||this.video.ended||this.video.paused||null==this.video.buffered||0==this.video.buffered.length)return;let e=!1,t=0,i=this.video.buffered.length;for(;t<i;){let i=t++;if(this.video.buffered.start(i)<=this.video.currentTime&&this.video.currentTime<=this.video.buffered.end(i)){e=!0;break}}if(e)this.iosIsStalledConnectionProblemsStart=null;else {null==this.iosIsStalledConnectionProblemsStart&&(this.iosIsStalledConnectionProblemsStart=new Date);let e=5e3;this.isAdsInsertionStream(this.media)&&(e=25e3),null!=this.iosIsStalledConnectionProblemsStart&&(new Date).getTime()-this.iosIsStalledConnectionProblemsStart.getTime()>e&&(null!=this.video&&this.video.pause(),this.iosIsStalledConnection=!0,this.onError({message:"Connection with server has stalled/broken. No data from server."}));}}isVideoElementPlaying(){let e=!0;if((W.isiOS||"Safari"==W.browserName)&&!W.isSamsungSmartTVTizen){let t=null!=this.video&&null!=this.video.seekable&&this.video.seekable.length>0&&this.video.seekable.end(0)-this.video.seekable.start(0)>0,i=null!=this.video&&this.video.duration==1/0&&null!=this.video.buffered&&this.video.buffered.length>0&&this.video.buffered.end(0)-this.video.buffered.start(0)>0&&this.video.buffered.end(0)-this.video.buffered.start(0)<30&&this.video.buffered.start(0)<=this.video.currentTime&&this.video.currentTime<=this.video.buffered.end(0);e=t||i;}return null!=this.video&&this.video.currentTime>0&&!this.video.paused&&!this.video.seeking&&!this.video.ended&&this.video.readyState>2&&e}isVideoCurrentTimeReliable(){return !(null==this.video||!this.isStartTimeInitialized||4!=this.video.readyState)&&(!this.isDvr()||this.video.currentTime>1)}onVideoDurationchange(){if(this.isEventFromRightContext()&&!this.isAirPlayCasting()){if(this.media instanceof g&&!(this.media instanceof S)&&this.video.duration==1/0){let e=new S,t=o.getInstanceFields(g),i=0;for(;i<t.length;){let s=t[i];++i,e[s]=r.field(this.media,s);}this.media=e;let s=new c("mediaAfterPlaybackStartMetadata");s.data=e,s.dispatch(this.context);}if(this.media instanceof S&&this.video.duration!=1/0&&this.video.duration>0){let e=new g,t=o.getInstanceFields(g),i=0;for(;i<t.length;){let s=t[i];++i,e[s]=r.field(this.media,s);}this.media=e;let s=new c("mediaAfterPlaybackStartMetadata");s.data=this.media,s.dispatch(this.context);}if(this.media.duration=this.video.duration,null!=this.prePlaybackSeekRelativePosition&&this.video.duration>0){let e=this.prePlaybackSeekRelativePosition;this.prePlaybackSeekRelativePosition=null;let t=e*this.video.duration,i=Math.abs(this.video.duration-this.media.duration)>2,s=Math.abs(this.video.currentTime-t)>1;(i||s)&&this.seek(t);}this.dispatchEvent(this.isAdvertisement?new h("adDurationChange"):new p("durationChange"));}}onVideoWaiting(){this.isEventFromRightContext()&&(this.state>=101&&(this.state=101),this.dispatchEvent(new p("bufferingStart")),this.isBuffering=!0,this.stopAndroidHlsPlaybackEndWatchdogTimer(),this.startMobileOrSafariBufferingTimeoutTimer());}onMobileOrSafariBufferingTimeout(){this.stopMobileOrSafariBufferingTimeoutTimer(),this.isInStreamAdvertisement&&this.isDvr()&&null!=this.video&&this.video.readyState<4?this.video.currentTime+=10:(this.mobileOrSafariBufferingTimeoutOccurred=!0,this.onError("Buffering timeout occured."));}onVideoEnded(){this.isEventFromRightContext()&&(this.stopLiveStreamEndingTimeout(),this.stopAndroidHlsPlaybackEndWatchdogTimer(),200!=this.state&&0!=this.state&&(this.state=200,this.dispatchEvent(this.isAdvertisement?new h("adComplete"):new p("complete"))));}onVideoSeeking(){if(!this.isEventFromRightContext())return;this.stopAndroidHlsPlaybackEndWatchdogTimer();let e=this.state;this.state=101,this.dispatchEvent(this.isAdvertisement?new h("seekingStart"):new p("seekingStart")),!W.isiOS&&"Safari"!=W.browserName||W.isSamsungSmartTVTizen||this.isBuffering||102!=e||(this.isBuffering=!0,this.dispatchEvent(new p("bufferingStart")));}onVideoSeeked(){this.isEventFromRightContext()&&(this.stopAndroidHlsPlaybackEndWatchdogTimer(),this.state=102,this.dispatchEvent(this.isAdvertisement?new h("seekingEnd"):new p("seekingEnd")),!W.isiOS&&"Safari"!=W.browserName||W.isSamsungSmartTVTizen||!this.isVideoElementPlaying()||(this.storeStartPlayingPositionForCastingIos(),this.dispatchEvent(this.isAdvertisement?new h("adPlaying"):new p("playing"))),!W.isiOS&&"Safari"!=W.browserName||W.isSamsungSmartTVTizen||!this.isBuffering||(this.isBuffering=!1,this.dispatchEvent(new p("bufferingEnd"))),this.refreshIosOrSafariWhenPausedAtStart());}refreshIosOrSafariWhenPausedAtStart(){let e=this,t=function(){return !(!W.isiOS&&"Safari"!=W.browserName||W.isSamsungSmartTVTizen||null==e.video||0!=e.video.currentTime)&&e.video.paused};t()&&(null!=this.refreshIosOrSafariWhenPausedAtStartTimer&&this.refreshIosOrSafariWhenPausedAtStartTimer.stop(),this.refreshIosOrSafariWhenPausedAtStartTimer=j.delay((function(){if(t()){let t=e.video.play();null!=t&&t.then((function(){e.video.pause();}));}}),500));}initDvrWindowStartTimestamp(){if(null==this.dvrPlaybackStartTs&&this.isDvr()){let e=this.getDVRWindowRangeRaw();null==e&&null!=this.video&&null!=this.video.buffered&&this.video.buffered.length>0&&(e={end:this.video.buffered.end(0)}),null!=e&&(this.dvrPlaybackStartTs=this.getNowTs()-e.end),null!=this.dvrPlaybackStartTs&&null!=this.dvrRequestedInitialTimeTs&&this.seek(this.dvrRequestedInitialTimeTs-this.dvrPlaybackStartTs);}}onVideoCanplaythrough(){this.isEventFromRightContext()&&(this.initStartTimeForLiveStreamEventRecording(),this.isPlaybackNotAllowed&&"Safari"==W.browserName&&!W.isSamsungSmartTVTizen?(this.stopInitializeAfterCanplaythrouTimer(),this.initializeAfterCanplaythrouTimer=j.delay($(this,this.initializeAfterCanplaythrou),500)):this.initializeAfterCanplaythrou());}initStartTimeForLiveStreamEventRecording(){if((null==this.dvrPlaybackStartTs&&this.isDvr()||101==this.state)&&this.video.buffered.length>0&&0==this.currentTime&&null==this.getPlaybackStartTime(this.media)&&this.isDvr()&&this.video.currentTime<.1&&this.video.seekable.length>0){let e=null,t=0,i=this.video.seekable.length;for(;t<i;){let i=this.video.seekable.end(t++);isFinite(i)&&((null==e||i>e)&&(e=i));}null!=e&&(this.video.currentTime=Math.max(0,e-15));}}initializeAfterCanplaythrou(){this.areSubtitlesAndAudioTracksInitialized||(this.updateSubtitlesSets(),this.updateAudioSets(),this.areSubtitlesAndAudioTracksInitialized=!0,"Safari"!=W.browserName||W.isSamsungSmartTVTizen||this.updateSafariStylingForSubtitles()),this.initVideoCurrentTime(),this.initDvrWindowStartTimestamp();}onVideoLoadedMetadata(){this.isEventFromRightContext()&&(!W.isiOS&&"Safari"!=W.browserName||W.isSamsungSmartTVTizen)&&this.initVideoCurrentTime();}initVideoCurrentTime(){if(this.video.readyState>=1&&!this.isStartTimeInitialized)if(0!=this.currentTime){let e=Math.floor(1e3*this.currentTime)/1e3;this.video.currentTime=e,this.isStartTimeInitialized=this.video.currentTime==e;}else this.isStartTimeInitialized=!0;}reset(){null!=this.video&&(this.video.pause(),this.video.setAttribute("src",""),this.video.load()),this.mediaSourceUrl="",this.isStartTimeInitialized=!1,this.fairPlayDrm.reset(),this.state=0;}pause(){this.stopAndroidHlsPlaybackEndWatchdogTimer(),this.videoElementCommandAdd(2);}startMobileOrSafariBufferingTimeoutTimer(){((W.isiOS||"Safari"==W.browserName)&&!W.isSamsungSmartTVTizen||W.isAndroid)&&(this.stopMobileOrSafariBufferingTimeoutTimer(),this.mobileOrSafariBufferingTimeoutTimer=j.delay($(this,this.onMobileOrSafariBufferingTimeout),14e3));}stopMobileOrSafariBufferingTimeoutTimer(){null!=this.mobileOrSafariBufferingTimeoutTimer&&(this.mobileOrSafariBufferingTimeoutTimer.stop(),this.mobileOrSafariBufferingTimeoutTimer=null);}reloadPlayerSourceAndCurrentTimeIfNeeded(){return null!=this.media&&null!=this.media.source&&null!=this.video&&this.mediaSourceUrl!=this.media.source[0].url?(this.video.src=this.mediaSourceUrl=this.media.source[0].url,this.state=0,this.hasCriticalErrorBeenDispatched=!1,this.mobileOrSafariBufferingTimeoutOccurred=!1,!0):(this.video.getAttribute("src")!=this.mediaSourceUrl&&(W.isiOS&&(this.isStartTimeInitialized=!1),this.hasCriticalErrorBeenDispatched=!1,this.mobileOrSafariBufferingTimeoutOccurred=!1,this.video.src=this.mediaSourceUrl),!1)}play(){this.stopAndroidHlsPlaybackEndWatchdogTimer(),this.reloadPlayerSourceAndCurrentTimeIfNeeded(),this.videoElementCommandAdd(1);}onAndrdoidHlsPlaybackStartTimout(){null!=this.androidHlsPlaybackWatchdogTimer&&this.androidHlsPlaybackWatchdogTimer.stop(),this.androidHlsPlaybackWatchdogTimer=null,null==this.video||this.video.readyState>1||this.video.currentTime>0||(this.video.currentTime=1);}videoElementCommandAdd(e){this.videoElementCommandsQueue.push(e),1==this.videoElementCommandsQueue.length&&null==this.videoElementPromise&&this.onVideoElementCommandComplete();}onVideoElementCommandComplete(){if(this.videoElementPromise=null,0==this.videoElementCommandsQueue.length)return;let e=this.videoElementCommandsQueue.shift();1==e?this.videoElementCommandPlay():2==e?this.videoElementCommandPause():3==e?this.videoElementCommandPlayPause():console.error("ERROR: Invalid command type for VideoWeb ("+e+")");}onPlayerResetWithMseExtension(){null!=this.video&&(this.video.removeEventListener("player_reset",$(this,this.onPlayerResetWithMseExtension)),this.videoElementCommandPlay());}videoElementCommandPlay(){if(null!=this.video&&this.video.hasAttribute("data-mse-resetting"))this.video.addEventListener("player_reset",$(this,this.onPlayerResetWithMseExtension));else {if(this.isPlaybackNotAllowed=!1,this.reloadPlayerSourceAndCurrentTimeIfNeeded(),0==this.state){let e=this.getM3U8MediaSource(this.media.source);W.isAndroid&&null!=e&&(this.androidHlsPlaybackWatchdogTimer=new j(7e3),this.androidHlsPlaybackWatchdogTimer.run=$(this,this.onAndrdoidHlsPlaybackStartTimout));let t=null!=e&&Object.prototype.hasOwnProperty.call(e.customParams.h,"laUrl")&&Object.prototype.hasOwnProperty.call(e.customParams.h,"certUrl"),i=null!=e&&null!=e.drm,s=null!=e&&null!=this.media.drmCustomLicenseServerHandler;if(s&&this.media.drmCustomLicenseServerHandler.initContext(this.media,e,this.variables),t||i||s)return this.video.load(),void this.fairPlayDrm.init(this.media,e)}if(null!=this.video&&(W.isiOS||"Safari"==W.browserName)&&!W.isSamsungSmartTVTizen&&this.video.duration==1/0){let e=!1,t=0,i=this.video.buffered.length;for(;t<i;){let i=t++;if(this.video.buffered.start(i)<=this.video.currentTime&&this.video.currentTime<=this.video.buffered.end(i)){e=!0;break}}if(e&&1==this.video.buffered.length&&null!=this.lastPausedTime){e=((new Date).getTime()-this.lastPausedTime.getTime())/1e3<this.video.buffered.end(0)-this.video.buffered.start(0);}if(this.video.buffered.length>0&&!e)return this.log("BRADMAX PLAYER NOTICE:\nVideo paused outside DVR window. Restarting video for catching-up live stream.","warn"),void this.handlePlaybackRestart()}try{this.videoElementPromise=this.videoElemPlayCallWithErrorCatch(),null!=this.videoElementPromise&&(!W.isiOS&&"Safari"!=W.browserName||W.isSamsungSmartTVTizen)?this.videoElementPromise.then($(this,this.onVideoElementCommandComplete),$(this,this.onVideoElementCommandComplete)):this.onVideoElementCommandComplete();}catch(e){console.error("Error occured during play call on video HtmlMediaElement."),this.onVideoElementCommandComplete();}}}videoElemPlayCallWithErrorCatch(){let e=null;return e=this.video.play(),null!=e&&e.catch($(this,this.onPlayPromiseError)),e}log(e,t){null==t&&(t="log"),console&&("error"==t?console.error(e):"warn"==t?console.warn(e):console.log(e));}onPlayPromiseError(e){if(null!=e&&"AbortError"==e.name&&null!=this.video&&null!=this.video.src&&-1!=this.video.src.indexOf("data:video/mp4;base64,"))return;let t=this;null==e||"NotAllowedError"!=e.name&&"AbortError"!=e.name?(this.log("BRADMAX PLAYER NOTICE:\nException occured durring starting player. Details below:\n","error"),this.log(e,"error")):(this.isPlaybackNotAllowed=!0,this.videoElementPromise=null,this.variables.autoplay?this.log("BRADMAX PLAYER NOTICE:\nBrowser doesn't allow for autoplaying video without user interaction.\nPlayer is waiting for user 'play' click. You can autoplay muted video (mute=true).\n\nMode details about browser autoplay policy: https://developers.google.com/web/updates/2017/09/autoplay-policy-changes","warn"):(this.log("BRADMAX PLAYER NOTICE:\nBrowser block starting playing video. Details below:\n","warn"),this.log(e,"warn")),j.delay((function(){t.isBuffering=!1,t.dispatchEvent(new p("bufferingEnd")),t.dispatchEvent(t.isAdvertisement?new h("adPlaying"):new p("playing")),t.dispatchEvent(t.isAdvertisement?new h("adPaused"):new p("paused")),t.onVideoTimeupdate();}),0));}videoElementCommandPause(){this.video.pause(),this.onVideoElementCommandComplete();}videoElementCommandPlayPause(){this.video.paused?this.videoElementCommandPlay():this.videoElementCommandPause();}stopPlaybackRestartTimeoutTimer(){null!=this.playbackRestartTimeoutTimer&&(this.playbackRestartTimeoutTimer.stop(),this.playbackRestartTimeoutTimer=null);}stopSafariErrorTimeoutTimer(){null!=this.safariErrorTimoutTimer&&(this.safariErrorTimoutTimer.stop(),this.safariErrorTimoutTimer=null);}stopInitializeAfterCanplaythrouTimer(){null!=this.initializeAfterCanplaythrouTimer&&(this.initializeAfterCanplaythrouTimer.stop(),this.initializeAfterCanplaythrouTimer=null);}stopLiveEdgeUpdateTimer(){null!=this.liveEdgeUpdateTimer&&(this.liveEdgeUpdateTimer.stop(),this.liveEdgeUpdateTimer=null);}onLiveEdgeUpdate(){null!=this.video&&this.video.paused&&!this.video.seeking&&!this.video.ended&&this.video.readyState>2&&this.onVideoTimeupdate();}hasLiveStreamEnded(){if(!(this.media instanceof P))return !1;let e=this.media;return null==e.streamEnd||e.streamEnd.getTime()<(new Date).getTime()}hasVideoErrorCode(){return null!=this.video&&null!=this.video.error&&this.video.error.code>=0}onErrorWebSafari(e){let t=this.video.currentTime,i=null!=this.video&&null!=this.video.error&&3==this.video.error.code,s=this;i?(this.stopSafariErrorTimeoutTimer(),this.safariErrorTimoutTimer=j.delay((function(){null!=s.video&&t!=s.video.currentTime||s.onError(e);}),2e3)):this.onError(e);}onError(e){if(this.isAdvertisement&&!this.isInStreamAdvertisement)return void this.dispatchEvent(new h("adMediaError"),this.prepareErrorMessage(e));if(this.hasCriticalErrorBeenDispatched)return;if(!this.isEventFromRightContext()||10==this.state&&!this.hasVideoErrorCode()||150==this.state)return;if(this.stopPlaybackRestartTimeoutTimer(),this.stopAndroidHlsPlaybackEndWatchdogTimer(),this.stopSafariErrorTimeoutTimer(),this.state>=200)return;if(this.media instanceof P){let e=this.hasLiveStreamEnded();if(!e&&this.onErrorFallbackTriesNum>=5&&(this.onErrorFallbackTriesNum-=1),e)return void this.handleLiveStreamEnding()}let t=this.isDvr()?5:3,i=W.isAndroid&&!this.isNetworkConnectionProblem(),s=this.isQuickFallbackPathForLiveEnabled&&this.isDvr()&&this.media.hasFallbackSources(),a=this.isDvr()&&102==this.state;if((103==this.state||101==this.state||a)&&this.onErrorFallbackTriesNum<t&&!i&&!s){this.stopPlaybackRestartTimeoutTimer(),this.state=150,this.playbackRestartTimeoutTimer=j.delay($(this,this.handlePlaybackRestart),1e3*(this.onErrorFallbackTriesNum+1));let t={videowebError:e,currTry:this.onErrorFallbackTriesNum};return void this.dispatchEvent(this.isAdvertisement&&!this.isInStreamAdvertisement?new h("adMediaErrorFallbackTry"):new p("mediaErrorFallbackTry"),t)}let r=this.state;this.state=210,this.stopMobileOrSafariBufferingTimeoutTimer(),this.isNetworkConnectionProblem()?this.dispatchEvent(this.isAdvertisement&&!this.isInStreamAdvertisement?new h("adConnectionError"):new p("connectionError"),this.prepareErrorMessage(e)):!this.hasVideoErrorCode()&&(10<=r&&r<=15||20==r)?(this.hasCriticalErrorBeenDispatched=!0,this.dispatchEvent(new p("drmAuthenticationError"),this.prepareErrorMessage(e)),this.reset()):null!=this.video&&3==this.video.networkState?(this.hasCriticalErrorBeenDispatched=!0,this.dispatchEvent(this.isAdvertisement&&!this.isInStreamAdvertisement?new h("adMediaError"):new p("loadError"),this.prepareErrorMessage(e)),this.reset()):(this.hasCriticalErrorBeenDispatched=!0,this.dispatchEvent(this.isAdvertisement&&!this.isInStreamAdvertisement?new h("adMediaError"):new p("mediaError"),this.prepareErrorMessage(e)),this.reset());}onIosStalled(e){this.iosIsStalledConnectionDetectionEnabled=!0;}prepareErrorMessage(e){let t=this.isNetworkConnectionProblem()&&(this.media instanceof P||this.video.currentTime>0||null!=this.video.error&&2==this.video.error.code||null!=this.media.mediaUserSettings&&this.media.mediaUserSettings.resumePostion>0),i="";return null!=this.video&&null!=this.video.error&&(i=" code: ",i=1==this.video.error.code?" code: MEDIA_ERR_ABORTED":2==this.video.error.code?" code: MEDIA_ERR_NETWORK":3==this.video.error.code?" code: MEDIA_ERR_DECODE":4==this.video.error.code?" code: MEDIA_ERR_SRC_NOT_SUPPORTED":" code: "+this.video.error.code),null!=this.video&&null!=this.video.networkState&&(i+=" net: ",0==this.video.networkState?i+="NETWORK_EMPTY":1==this.video.networkState?i+="NETWORK_IDLE":2==this.video.networkState?i+="NETWORK_LOADING":3==this.video.networkState?i+="NETWORK_NO_SOURCE":i+=this.video.networkState),null!=this.video&&null!=this.video.src&&(i+="\nurl: "+this.video.src),null!=e&&(this.log("bradmax.player.error: Error occured durring playback. "+i,"error"),this.log(e,"error")),{errObj:e,isTemporaryNetworkIssue:t,message:i}}stopLiveStreamEndingTimeout(){null!=this.liveStreamEndingTimeout&&(this.liveStreamEndingTimeout.stop(),this.liveStreamEndingTimeout=null);}handleLiveStreamEnding(){new m("skinPause").dispatch(this.context),this.state=180,this.stopLiveStreamEndingTimeout(),this.stopAndroidHlsPlaybackEndWatchdogTimer(),this.liveStreamEndingTimeout=j.delay($(this,this.onVideoEnded),500);}isNetworkConnectionProblem(){return null!=this.video&&null!=this.media&&(!!(!t.navigator.onLine||this.mobileOrSafariBufferingTimeoutOccurred||null!=this.video.error&&2==this.video.error.code||this.iosIsStalledConnection)||3==this.video.networkState&&(null!=this.video.error&&4!=this.video.error.code))}handlePlaybackRestart(){this.onErrorFallbackTriesNum++;let e=this.currentTime;this.video.pause(),this.video.setAttribute("src",""),this.video.load(),this.mediaSourceUrl="",this.isStartTimeInitialized=!1,this.isDvr()||this.seek(e),this.fairPlayDrm.reset(),this.state=0,this.play();}playPause(){this.videoElementCommandAdd(3);}seek(e){this.video.duration>0&&e+1>=this.video.duration&&(e=this.video.duration-1);let t,i=this.video.paused&&(null==this.video.getAttribute("src")||""==this.video.getAttribute("src"))&&null!=this.media&&this.media.duration>0;if(i&&(this.prePlaybackSeekRelativePosition=e/this.media.duration),this.isDvr()&&(e=this.dvrWindowTimeToDvrRelativePlaybackTime(e)),this.currentTime=e,this.reloadPlayerSourceAndCurrentTimeIfNeeded(),this.stopAndroidHlsPlaybackEndWatchdogTimer(),!i&&this.video.readyState>=1&&this.currentTime>=0){let e=this.currentTime;t=isFinite(e);}else t=!1;t&&(this.video.currentTime=this.currentTime),i&&this.video.load(),!this.video.paused||"Microsoft Internet Explorer"!=W.browserName&&"Edge"!=W.browserName||this.preloadPausedVideoAfterSeek();}preloadPausedVideoAfterSeek(){let e=this;try{let t=this.video.play();null!=t?t.then((function(){e.video.pause();})):this.video.pause();}catch(e){console.error("Error occured during seeking in VideoWeb component, when video was played.");}}selectAudio(e){}selectSubtitles(e){}volume(e){this.video.volume=e;}isEventFromRightContext(){return null!=this.video&&null!=this.media&&null!=this.media.source&&this.video.getAttribute("src")==this.media.source[0].url}setData(e){this.media=e,this.areSubtitlesAndAudioTracksInitialized=!1,this.isStartTimeInitialized=!1,this.onErrorFallbackTriesNum=0,this.iosIsStalledConnection=!1,this.iosIsStalledConnectionDetectionEnabled=!1,this.isPlaybackNotAllowed=!1,this.hasCriticalErrorBeenDispatched=!1,this.mobileOrSafariBufferingTimeoutOccurred=!1,this.stopAndroidHlsPlaybackEndWatchdogTimer(),this.stopInitializeAfterCanplaythrouTimer(),this.mediaSourceUrl=e.source[0].url,null!=this.video&&null!=this.video.src&&this.video.duration>0&&(this.pause(),null!=this.video.seekable&&this.video.seekable.length>0&&(this.video.currentTime=this.video.seekable.start(0))),Object.prototype.hasOwnProperty.call(this.variables,"dvrWindowStartTime")?(this.dvrWindowStartTimeTs=r.field(this.variables,"dvrWindowStartTime"),this.getNowTs()<this.dvrWindowStartTimeTs&&(this.dvrWindowStartTimeTs=null),r.deleteField(this.variables,"dvrWindowStartTime")):this.dvrWindowStartTimeTs=null,Object.prototype.hasOwnProperty.call(this.variables,"dvrWindowEndTime")?(this.dvrWindowEndTimeTs=r.field(this.variables,"dvrWindowEndTime"),r.deleteField(this.variables,"dvrWindowEndTime")):this.dvrWindowEndTimeTs=null,this.dvrPlaybackStartTs=null,this.dvrRequestedInitialTimeTs=null,this.dvrWindowTailLastSend=null,this.currentTime=0,this.prePlaybackSeekRelativePosition=null;let t=this.getPlaybackStartTime(e);null!=t&&t>0&&(this.video.currentTime=this.currentTime=t),this.state=0,1==this.variables.autoplay&&this.play();}getPlaybackStartTime(e){let t=null;return null!=this.dvrWindowStartTimeTs&&null!=this.dvrWindowEndTimeTs&&this.dvrWindowEndTimeTs<this.getNowTs()&&this.isDvr()&&(t=this.dvrWindowStartTimeTs,this.dvrRequestedInitialTimeTs=this.dvrWindowStartTimeTs),null!=e&&null!=e.mediaUserSettings&&null!=e.mediaUserSettings.resumePostion&&(t=e.mediaUserSettings.resumePostion),null==t&&null!=this.dvrWindowStartTimeTs&&t<this.dvrWindowStartTimeTs&&(t=this.dvrWindowStartTimeTs),null==t&&null!=this.dvrWindowEndTimeTs&&this.dvrWindowEndTimeTs<t&&(t=this.dvrWindowEndTimeTs),this.isDvr()&&null!=t&&(this.dvrRequestedInitialTimeTs=t),t}playerResize(e){}videoReady(){}onDurationChange(e){}updateSubtitlesSets(){let e=this.video.textTracks;if(null!=e&&e.length>0){let t=[],i=0;for(;i<e.length;){let s=e[i];if(++i,null==s.language||""==s.language)continue;let a=new E;a.id=s.language+"",a.name=b.normalizeLanguageNameFormat(b.getLanguageNativeNameByCode(s.language)),a.languageCode=s.language,t.push(a);}if(null!=this.variables.subtitles&&t.length>0&&b.preselectSubtitlesSet(this.variables.subtitles,t),t.length>0){let e=new c("subtitleData");e.data=t,e.dispatch(this.context);}}}onSelectSubtitles(e){if(null==e||null==this.video)return;let t=e.data;if(null!=t){let e=this.video.textTracks,i=null,s=0;for(;s<e.length;){let a=e[s];++s,a.mode="hidden",a.language==t.id&&(i=a);}null!=i&&(i.mode="showing");}else {let e=this.video.textTracks,t=0;for(;t<e.length;)e[t++].mode="hidden";}}updateAudioSets(){let e=this.video.audioTracks;if(null!=e&&e.length>=this.minAudioTracksForInfo){let t=[],i=0;for(;i<e.length;){let s=e[i];if(++i,null==s.language||""==s.language)continue;let a=new C;a.id=n.string(s.language)+"",a.name=b.normalizeLanguageNameFormat(b.getLanguageNativeNameByCode(s.language)),null!=a.name&&""!=a.name||(a.name=s.label),null!=a.name&&""!=a.name||(a.name=s.language),a.languageCode=s.language,a.isDefault=s.enabled,t.push(a);}if(t.length>=this.minAudioTracksForInfo){let e=new c("audioData");e.data=t,e.dispatch(this.context);}}}onSelectAudio(e){if(null==e||null==this.video)return;let t=e.data;if(null==t)return;if(this.getActiveTrackLanguage()==t.id)return;let i=!this.video.paused;i&&this.video.pause();let s=this;j.delay((function(){let e=J.__cast(s.video,HTMLVideoElement).audioTracks;if(null!=e){let i=0;for(;i<e.length;)e[i++].enabled=!1;if(null!=t){let i=0;for(;i<e.length;){let s=e[i];++i,s.language==t.id&&(s.enabled=!0);}}}i&&s.video.play();}),100);}getActiveTrackLanguage(){let e=null,t=J.__cast(this.video,HTMLVideoElement).audioTracks;if(null==t)return e;let i=0;for(;i<t.length;){let s=t[i];if(++i,s.enabled){e=s.language;break}}return e}onPlayerResizeEvent(e){"Safari"!=W.browserName||W.isSamsungSmartTVTizen||this.updateSafariStylingForSubtitles();}onWindowResize(){"Safari"!=W.browserName||W.isSamsungSmartTVTizen||(this.updateSafariStylingForSubtitles(),j.delay($(this,this.updateSafariStylingForSubtitles),300));}updateSafariStylingForSubtitles(){if(null==this.video)return;if(!O.subtitlesStylesForSafariInitialized){let e="",t=0;for(;t<100;){let i=t++;e+="video.bs-subs-top"+i+"::-webkit-media-text-track-container {top:"+i+"%;overflow:visible;} ",e+="video.bs-subs-height"+i+"::-webkit-media-text-track-container {height:"+i+"%;} ";}let i=10;for(;i<80;){let t=i++;e+="video.bs-subs-fontsize"+t+"::cue {font-size:"+t+"px;} ";}let s=document.createElement("style");s.setAttribute("type","text/css"),s.innerHTML=e,document.body.appendChild(s),O.subtitlesStylesForSafariInitialized=!0;}let e=this.video.clientWidth,t=this.video.clientHeight,i=this.video.videoWidth,s=this.video.videoHeight;if(i>0&&s>0&&e>0&&t>0){let a=this.getVideoVisibleVideoSize(e,t,i,s),r=[],n=0,l=this.video.classList;for(;n<l.length;){let e=l[n];++n,null!=e&&0!=e.indexOf("bs-subs-")&&r.push(e);}let o=r.join(" ")+" ";t>e&&a.y>0&&(a=this.adjustSubtitlesPlaceholderForMobiles(e,t,a),o+="bs-subs-top"+Math.floor(100*a.y/t)+" bs-subs-height"+Math.floor(100*a.h/t)+" bs-subs-fontsize"+Math.ceil(.05*Math.min(a.w,a.h))),e>t&&W.isiPhone&&(o+=" bs-subs-height"+(100-Math.ceil(3e3/t))+" "),this.video.setAttribute("class",o);}}getVideoVisibleVideoSize(e,t,i,s){let a=i/s,r=0,n=0;e/t>i/s?(n=t,r=t/s*i):(r=e,n=e/i*s);let l=0,o=0,d=0,h=0;return r/n>a?(h=n,d=n*a):(d=r,h=r/a),l=(e-d)/2,o=(t-h)/2,{x:l,y:o,w:d,h}}adjustSubtitlesPlaceholderForMobiles(e,t,i){return t>e&&i.y>0?{x:i.x,y:Math.floor(i.y/2),w:i.w,h:i.h+i.y}:i}getM3U8MediaSource(e){let t=0;for(;t<e.length;){let i=e[t];if(++t,"m3u8"==O.getExtension(i.url))return i}return null}isAdsInsertionStream(e){return null!=e.source&&e.source.length>0&&null!=e.source[0]&&1==e.source[0].customParams.h.yospaceStream}saveBandwidthModeVisibilityChange(e){}static canPlay(e){let t=O.getExtension(e.url);if("com/videoplayback"==t&&null!=e.url&&-1!=e.url.indexOf("googlevideo.com/videoplayback")&&-1!=e.url.indexOf("mime=video/mp4")&&(t="mp4"),W.isAndroid&&"m3u8"==t)return !1;if(!Object.prototype.hasOwnProperty.call(O.canPlayFileExtensionCache.h,t)){let e=O.canPlayFileExtensionCache,i=O.checkIfCanPlayFileType(t);e.h[t]=i;}return O.canPlayFileExtensionCache.h[t]}static getExtension(e){let t=e.split("?")[0];if(t=a.substr(t,t.lastIndexOf(".")+1,null).toLowerCase(),-1!=e.indexOf(";jsessionid=")){let i=e.split(";jsessionid=")[0];t=a.substr(i,i.lastIndexOf(".")+1,null).toLowerCase();}return t}static checkIfCanPlayFileType(e){let t="";return t="m3u8"==e?"application/vnd.apple.mpegurl":"video/"+e,""!=window.document.createElement("video").canPlayType(t)}static getInstance(e,t){let i=t?"ad_":"";if(Object.prototype.hasOwnProperty.call(O.instances.h,i+e))return O.instances.h[i+e];{let s=new O(t);return O.instances.h[i+e]=s,s.context=e,s.create(),s}}}O.__name__="bs.player.plugin.video.videoPlayer.VideoWeb",Object.assign(O.prototype,{__class__:O,minAudioTracksForInfo:null,isQuickFallbackPathForLiveEnabled:null,context:null,variables:null,isAdvertisement:null,isInStreamAdvertisement:null,initialAsAdvertisement:null,inStreamAdvertStartPos:null,inStreamAdvertMedia:null,hasCriticalErrorBeenDispatched:null,video:null,media:null,mediaSourceUrl:null,subtitlesRenderer:null,currentTime:null,state:null,fairPlayDrm:null,mobileOrSafariBufferingTimeoutTimer:null,mobileOrSafariBufferingTimeoutOccurred:null,initializeAfterCanplaythrouTimer:null,areSubtitlesAndAudioTracksInitialized:null,prePlaybackSeekRelativePosition:null,videoElementPromise:null,videoElementCommandsQueue:null,isStartTimeInitialized:null,isPlaybackNotAllowed:null,onErrorFallbackTriesNum:null,isBuffering:null,lastPausedTime:null,iosIsStalledConnection:null,iosIsStalledConnectionDetectionEnabled:null,iosIsStalledConnectionProblemsStart:null,iosHitDecoderAfter:null,iosLastPlayingEvent:null,iosLastPlayingEventPosition:null,androidHlsPlaybackWatchdogTimer:null,androidHlsPlaybackEndWatchdogTimer:null,playbackRestartTimeoutTimer:null,liveStreamEndingTimeout:null,liveEdgeUpdateTimer:null,safariErrorTimoutTimer:null,dvrWindowStartTimeTs:null,dvrWindowTailLastSend:null,dvrWindowEndTimeTs:null,dvrPlaybackStartTs:null,dvrRequestedInitialTimeTs:null,playbackRate:null,refreshIosOrSafariWhenPausedAtStartTimer:null});class N{constructor(e){this.videoWeb=e,this.initialized=!1,this.initKeySessionData=null;}reset(){this.clearStepTimeoutTimer(),null!=this.keySession&&(this.keySession.removeEventListener("webkitkeymessage",$(this,this.onLicenseWaiting),!1),this.keySession.removeEventListener("webkitkeyadded",$(this,this.onKeyAdded),!1),this.keySession.removeEventListener("webkitkeyerror",$(G=this.videoWeb,G.onError),!1)),this.initialized=!1,this.laUrl=null,this.certUrl=null,this.certificate=null,this.keySystem=null,this.keySession=null,this.stepTimeoutTimer=null,this.initKeySessionData=null;}setStepTimeoutTimer(){this.clearStepTimeoutTimer(),this.stepTimeoutTimer=j.delay($(this,this.onStepTimeout),3e4);}clearStepTimeoutTimer(){null!=this.stepTimeoutTimer&&(this.stepTimeoutTimer.stop(),this.stepTimeoutTimer=null);}init(e,t){if("Safari"!=W.browserName)return void this.videoWeb.onError("FairPlay DRM is not supported by this browser.");this.videoWeb.state=10,this.currMedia=e,this.setStepTimeoutTimer();let i=null;try{i=t.drm.provider;}catch(e){}this.drmProvider=null!=i?i.toLowerCase():null;try{this.certUrl=t.customParams.h.certUrl,this.laUrl=t.customParams.h.laUrl;}catch(e){}try{null==this.certUrl&&(this.certUrl=t.drm.fairplay.certUrl,this.laUrl=t.drm.fairplay.laUrl);}catch(e){}try{this.drmCustomData=t.drm.fairplay.customData;}catch(e){}if("ezdrm"==i){let e=new XMLHttpRequest;e.responseType="arraybuffer",e.addEventListener("load",$(this,this.onCertificateResponseRawBytes),!1),e.addEventListener("error",$(this,this.onServerCertificateDownloadError),!1),e.open("GET",this.certUrl,!0),e.send();}else if("keyos"==i){let e=new XMLHttpRequest;e.responseType="arraybuffer",e.addEventListener("load",$(this,this.onCertificateResponseRawBytes),!1),e.addEventListener("error",$(this,this.onServerCertificateDownloadError),!1),e.open("GET",this.certUrl,!0),e.send();}else if("default"==i){let e=new XMLHttpRequest;e.responseType="arraybuffer",e.addEventListener("load",$(this,this.onCertificateResponseRawBytes),!1),e.addEventListener("error",$(this,this.onServerCertificateDownloadError),!1),e.open("GET",this.certUrl,!0),e.send();}else if(null==e.drmCustomLicenseServerHandler){let e=new X(this.certUrl);e.setHeader("Accept","application/json"),e.onData=$(this,this.onCertificateResponse),e.onError=$(this,this.onServerCertificateDownloadError),e.request(!0);}else e.drmCustomLicenseServerHandler.customFairplayCertificateRequestHandler($(this,this.onCertificateResponse),$(this,this.onServerCertificateDownloadError));}onServerCertificateDownloadError(e){this.videoWeb.state=11,this.videoWeb.onError("DRM initialization error. Error occurred during DRM server certificate download.");}onCertificateResponseRawBytes(e){this.videoWeb.state=11,this.setStepTimeoutTimer(),this.certificate=new Uint8Array(e.target.response),this.videoWeb.videoElemPlayCallWithErrorCatch();}onCertificateResponse(e){this.videoWeb.state=11,this.setStepTimeoutTimer();let t=JSON.parse(e);if(!Object.prototype.hasOwnProperty.call(t,"certificate"))throw new Error("Cannot initialize DRM module.");if(this.certificate=this.base64DecodeUint8Array(t.certificate),this.videoWeb.videoElemPlayCallWithErrorCatch(),null!=this.initKeySessionData){let e=this.initKeySessionData;this.initKeySessionData=null,this.initKeySession(e);}}onNeedKey(e){"Safari"==W.browserName?null!=this.certificate?this.initKeySession(e.initData):this.initKeySessionData=e.initData:this.videoWeb.onError("FairPlay DRM is not supported by this browser.");}initKeySession(e){this.videoWeb.state<12&&(this.setStepTimeoutTimer(),this.videoWeb.state=12);let t=this.extractContentId(e,!0),i=this.concatInitDataIdAndCertificate(e,t,this.certificate);this.videoWeb.video.webkitKeys||(this.keySystem=this.selectKeySystem(),this.videoWeb.video.webkitSetMediaKeys(new window.WebKitMediaKeys(this.keySystem))),this.videoWeb.video.webkitKeys||this.videoWeb.onError("DRM initialization error. Could not create MediaKeys."),this.keySession=this.videoWeb.video.webkitKeys.createSession("video/mp4",i),null==this.keySession&&this.videoWeb.onError("DRM initialization error. Could not create key session"),this.keySession.contentId=t,this.keySession.keyPath=this.extractContentId(e,!1),this.keySession.addEventListener("webkitkeymessage",$(this,this.onLicenseWaiting),!1),this.keySession.addEventListener("webkitkeyadded",$(this,this.onKeyAdded),!1),this.keySession.addEventListener("webkitkeyerror",$(G=this.videoWeb,G.onError),!1);}extractContentId(e,t){null==t&&(t=!0);let s=this.arrayToString(e),a=null;if("ezdrm"==this.drmProvider){let e=document.createElement("a");e.href=s,a=e.hostname;}else {if(-1==s.indexOf("skd://"))throw new Error("DRM Initialization error. Cannot prepare content identifier from initData.");if(a=s.split("skd://")[1],t){let e=new i("\\?.*?key[^=]*=([a-fA-F0-9]+)","");e.match(a)&&(a=e.matched(1)),a=a.split("?")[0];}}return a}concatInitDataIdAndCertificate(e,t,i){"string"==typeof t&&(t=this.stringToArray(t));let s=0,a=new ArrayBuffer(e.byteLength+4+t.byteLength+4+i.byteLength),r=new DataView(a);new Uint8Array(a,0,e.byteLength).set(e),s=0+e.byteLength,r.setUint32(s,t.byteLength,!0),s+=4;let n=new Uint16Array(a,s,t.length);return n.set(t),s+=n.byteLength,r.setUint32(s,i.byteLength,!0),s+=4,new Uint8Array(a,s,i.byteLength).set(i),new Uint8Array(a,0,a.byteLength)}selectKeySystem(){if(window.WebKitMediaKeys.isTypeSupported("com.apple.fps.1_0","video/mp4"))return "com.apple.fps.1_0";throw new Error("Key System not supported")}onLicenseWaiting(e){this.videoWeb.state<13&&(this.videoWeb.state=13,this.setStepTimeoutTimer());let t=e.message;if("ezdrm"==this.drmProvider){let e=new XMLHttpRequest;e.responseType="arraybuffer",e.addEventListener("load",$(this,this.onLicenseLoadedRawBytes),!1),e.addEventListener("error",$(G=this.videoWeb,G.onError),!1),e.open("POST",this.laUrl,!0),e.setRequestHeader("Content-type","application/octet-stream"),e.send(t);}else if("keyos"==this.drmProvider){let e=new X(this.laUrl);e.setHeader("customdata",this.drmCustomData),e.onData=$(this,this.onLicenseLoadedBase64),e.onError=$(G=this.videoWeb,G.onError);let i="";i+="spc="+this.base64EncodeUint8Array(t);let s=this.keySession.contentId;i+="&assetId="+encodeURIComponent(s),e.setPostData(i),e.request(!0);}else if("default"==this.drmProvider){let e=new X(this.laUrl);e.setHeader("customdata",this.drmCustomData),e.onData=$(this,this.onLicenseLoadedBase64),e.onError=$(G=this.videoWeb,G.onError);let i="";i+="spc="+this.base64EncodeUint8Array(t);let s=this.keySession.contentId;i+="&assetId="+encodeURIComponent(s),e.setPostData(i),e.request(!0);}else if(null==this.currMedia.drmCustomLicenseServerHandler){let e=this.base64EncodeUint8Array(t),i=new X(this.laUrl);i.setHeader("Accept","application/json"),i.setHeader("Content-Type","application/json"),i.onData=$(this,this.onLicenseLoaded),i.onError=$(G=this.videoWeb,G.onError),i.setPostData(JSON.stringify({spc:e})),i.request(!0);}else this.currMedia.drmCustomLicenseServerHandler.customFairplayLicenseRequestHandler(t,$(this,this.onCustomLicenseLoaderSuccess),$(G=this.videoWeb,G.onError),this.keySession);}onLicenseLoadedRawBytes(e){this.videoWeb.state<14&&(this.videoWeb.state=14,this.setStepTimeoutTimer()),this.keySession.update(new Uint8Array(e.target.response));}onLicenseLoadedBase64(e){this.videoWeb.state<14&&(this.videoWeb.state=14,this.setStepTimeoutTimer()),this.keySession.update(this.base64DecodeUint8Array(e));}onLicenseLoaded(e){this.videoWeb.state<14&&(this.videoWeb.state=14,this.setStepTimeoutTimer());let t=this.base64DecodeUint8Array(JSON.parse(e).licence);this.keySession.update(t);}onCustomLicenseLoaderSuccess(e){this.videoWeb.state<14&&(this.videoWeb.state=14,this.setStepTimeoutTimer()),this.keySession.update(new Uint8Array(e));}onKeyAdded(){this.clearStepTimeoutTimer(),this.videoWeb.state=15;}onStepTimeout(){null!=this.videoWeb.video&&this.videoWeb.video.currentTime>0||(this.videoWeb.state=20,this.videoWeb.onError("DRM initialization error. Internal error - DRM initialisation timeout."));}stringToArray(e){let t=new Uint16Array(new ArrayBuffer(2*e.length)),i=0,s=e.length;for(;i<s;){let s=i++;t[s]=a.cca(e,s);}return t}arrayToString(e){let t=new Uint16Array(e.buffer),i="",s=0,a=t.length;for(;s<a;){let e=s++;i+=String.fromCodePoint(t[e]);}return i}base64DecodeUint8Array(e){let t=window.atob(e),i=t.length,s=new Uint8Array(new ArrayBuffer(i)),r=0;for(;r<i;){let e=r++;s[e]=a.cca(t,e);}return s}base64EncodeUint8Array(e){let t,i,s,a,r,n,l,o="",d=0;for(;d<e.length;)t=e[d++],i=d<e.length?e[d++]:null,s=d<e.length?e[d++]:null,a=t>>2,r=(3&t)<<4|i>>4,n=(15&i)<<2|s>>6,l=63&s,null==i?(l=64,n=64):null==s&&(l=64),o+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".charAt(a)+"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".charAt(r)+"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".charAt(n)+"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".charAt(l);return o}}N.__name__="bs.player.plugin.video.videoPlayer.VideoWebHelperForFairPlayDrm",Object.assign(N.prototype,{__class__:N,videoWeb:null,initialized:null,laUrl:null,certUrl:null,certificate:null,keySystem:null,keySession:null,stepTimeoutTimer:null,drmProvider:null,drmCustomData:null,initKeySessionData:null,currMedia:null});var W=require("bs.util.BrowserTools");class U{static volume(e){let t=!1,i=null;if(i=Z.getSessionStorage(),t=null!=i,t){let e,t=NaN,i=!1,s=null;if(s=Z.getSessionStorage(),i=null!=s,i){try{let e,i=null,s=!1,a=null;if(a=Z.getSessionStorage(),s=null!=a,s){let t=null;t=Z.getSessionStorage(),i=t.getItem("_brplayer_vol"),null==i||(i=l.trim(i)),e=i;}else e=i;null!=e&&""!=e&&(t=parseFloat(e));}catch(e){}e=t;}else e=t;if(null!=e&&!isNaN(e)&&isFinite(e))return e}let s=Object.prototype.hasOwnProperty.call(e,"volume")?parseFloat(r.field(e,"volume")):null;return null!=s&&!isNaN(s)&&isFinite(s)?s:1}static mute(e){let t,i=!1,s=null;if(s=Z.getSessionStorage(),i=null!=s,i){let e=!1,i=!1,s=null;if(s=Z.getSessionStorage(),i=null!=s,i){try{let t,i=null,s=!1,a=null;if(a=Z.getSessionStorage(),s=null!=a,s){let e=null;e=Z.getSessionStorage(),i=e.getItem("_brplayer_muted"),null==i||(i=l.trim(i)),t=i;}else t=i;null!=t&&""!=t&&(e=null!=t&&"1"==t);}catch(e){}t=e;}else t=!1;}else t=!1;if(t)return !0;if(!Object.prototype.hasOwnProperty.call(e,"mute"))return !1;switch(r.field(e,"mute")){case 1:case"true":case!0:return !0;default:return !1}}}U.__name__="bs.util.PlayerVariableParser";var z=require("bs.util.TextTools");class H extends Error{constructor(e,t,i){super(e),this.message=e,this.__previousException=t,this.__nativeException=null!=i?i:this;}unwrap(){return this.__nativeException}get_native(){return this.__nativeException}static caught(e){return e instanceof H?e:e instanceof Error?new H(e.message,null,e):new q(e,null,e)}static thrown(e){if(e instanceof H)return e.get_native();if(e instanceof Error)return e;return new q(e)}}H.__name__="haxe.Exception",H.__super__=Error,Object.assign(H.prototype,{__class__:H,__skipStack:null,__nativeException:null,__previousException:null});var j=require("haxe.Timer");class q extends H{constructor(e,t,i){super(String(e),t,i),this.value=e;}unwrap(){return this.value}}q.__name__="haxe.ValueException",q.__super__=H,Object.assign(q.prototype,{__class__:q,value:null});var K=require("haxe.ds.List");class Q{constructor(e,t){this.item=e,this.next=t;}}Q.__name__="haxe.ds._List.ListNode",Object.assign(Q.prototype,{__class__:Q,item:null,next:null});var G,Y=require("haxe.ds.StringMap"),X=require("haxe.http.HttpJs");class J{static getClass(e){if(null==e)return null;if(e instanceof Array)return Array;{let t=e.__class__;if(null!=t)return t;let i=J.__nativeClassName(e);return null!=i?J.__resolveNativeClass(i):null}}static __string_rec(e,t){if(null==e)return "null";if(t.length>=5)return "<...>";let i=typeof e;switch("function"==i&&(e.__name__||e.__ename__)&&(i="object"),i){case"function":return "<function>";case"object":if(e instanceof Array){let i="[";t+="\t";let s=0,a=e.length;for(;s<a;){let a=s++;i+=(a>0?",":"")+J.__string_rec(e[a],t);}return i+="]",i}let i;try{i=e.toString;}catch(e){return "???"}if(null!=i&&i!=Object.toString&&"function"==typeof i){let t=e.toString();if("[object Object]"!=t)return t}let s="{\n";t+="\t";let a=null!=e.hasOwnProperty,r=null;for(r in e)a&&!e.hasOwnProperty(r)||"prototype"!=r&&"__class__"!=r&&"__super__"!=r&&"__interfaces__"!=r&&"__properties__"!=r&&(2!=s.length&&(s+=", \n"),s+=t+r+" : "+J.__string_rec(e[r],t));return s+="\n"+(t=t.substring(1))+"}",s;case"string":return e;default:return String(e)}}static __interfLoop(e,t){for(;;){if(null==e)return !1;if(e==t)return !0;let i=e.__interfaces__;if(null!=i&&(null==e.__super__||e.__super__.__interfaces__!=i)){let e=0,s=i.length;for(;e<s;){let s=i[e++];if(s==t||J.__interfLoop(s,t))return !0}}e=e.__super__;}}static __instanceof(e,t){if(null==t)return !1;switch(t){case Array:return e instanceof Array;case se:return "boolean"==typeof e;case te:return null!=e;case ie:return "number"==typeof e;case ee:return "number"==typeof e&&(0|e)===e;case String:return "string"==typeof e;default:if(null==e)return !1;if("function"==typeof t){if(J.__downcastCheck(e,t))return !0}else if("object"==typeof t&&J.__isNativeObj(t)&&e instanceof t)return !0;return t==ae&&null!=e.__name__||t==re&&null!=e.__ename__}}static __downcastCheck(e,t){return e instanceof t||!!t.__isInterface__&&J.__interfLoop(J.getClass(e),t)}static __cast(e,t){if(null==e||J.__instanceof(e,t))return e;throw H.thrown("Cannot cast "+n.string(e)+" to "+n.string(t))}static __nativeClassName(e){let t=J.__toStr.call(e).slice(8,-1);return "Object"==t||"Function"==t||"Math"==t||"JSON"==t?null:t}static __isNativeObj(e){return null!=J.__nativeClassName(e)}static __resolveNativeClass(e){return t[e]}}J.__name__="js.Boot";class Z{static getSessionStorage(){try{let e=window.sessionStorage;if(e.getItem(""),0==e.length){let t="_hx_"+Math.random();e.setItem(t,t),e.removeItem(t);}return e}catch(e){return null}}}function $(e,i){return null==i?null:(null==i.__id__&&(i.__id__=t.$haxeUID++),null==e.hx__closures__?e.hx__closures__={}:s=e.hx__closures__[i.__id__],null==s&&(s=i.bind(e),e.hx__closures__[i.__id__]=s),s);var s;}Z.__name__="js.Browser",t.$haxeUID|=0,null==String.fromCodePoint&&(String.fromCodePoint=function(e){return e<65536?String.fromCharCode(e):String.fromCharCode(55232+(e>>10))+String.fromCharCode(56320+(1023&e))}),Object.defineProperty(String.prototype,"__class__",{value:String,enumerable:!1,writable:!0}),String.__name__="String",Array.__name__="Array",Date.prototype.__class__=Date,Date.__name__="Date";var ee={},te={},ie=Number,se=Boolean,ae={},re={};J.__toStr={}.toString,A._hx_skip_constructor=!1,I.SUPPORT_RATE_NOT_SUPPORTED=0,I.SUPPORT_RATE_BEST_RATE=1,I.PERMAMENT_PLAYBACK_ERROR_SAFETY_WINDOW=6e3,I.__plugfaces__="IVideoPluginSupportRateForUrls,IPlugin",F.instances=new Y,O.canPlayFileExtensionCache=new Y,O.instances=new Y,O.subtitlesStylesForSafariInitialized=!1;}(exports,window);
!function(e,t){e.bs=e.bs||{},e.bs.player=e.bs.player||{},e.bs.player.plugin=e.bs.player.plugin||{},e.bs.player.plugin.video=e.bs.player.plugin.video||{},e.bs.player.plugin.video.videoPlayer=e.bs.player.plugin.video.videoPlayer||{};var i=require("haxe.HxOverrides");Math.__name__="Math";var s=require("haxe.Reflect");class a{static string(e){return L.__string_rec(e,"")}static parseInt(e){let t=parseInt(e);return isNaN(t)?null:t}}a.__name__="Std";class l{static getInstanceFields(e){let t=[];for(;null!=e;){let i=0,s=Object.getOwnPropertyNames(e.prototype);for(;i<s.length;){let e=s[i];switch(++i,e){case"__class__":case"__properties__":case"constructor":break;default:-1==t.indexOf(e)&&t.push(e);}}e=e.__super__;}return t}}l.__name__="Type";var r=require("bs.player.core.events.AdEvent"),n=require("bs.player.core.events.ControlEvent"),o=require("bs.player.core.events.DataProviderEvent"),d=require("bs.player.core.events.VideoEvent"),h=require("bs.player.core.manager.I18NHelper"),u=require("bs.player.core.model.Media"),v=require("bs.player.core.model.Live"),c=require("bs.player.core.model.LiveStream"),p=require("bs.player.core.model.SubtitlesSet"),m=require("bs.player.core.model.AudioSet"),y=require("bs.player.core.model.VideoQualityEventData");class g{constructor(){this.pluginName="";let e=L.getClass(this);this.pluginName=e.__name__.split(".").pop();let t=this.pluginName,i=exports.configuration;this.pluginConfig=null!=i&&Object.prototype.hasOwnProperty.call(i,t)?s.field(i,t):Object.create(null);}create(){}destroy(){}activate(){}postActivate(){}deactivate(){}eventFilter(e){return !0}registerPlugin(e){}getPluginVersion(){return "v2.14.417"}getPluginName(){return this.pluginName}get_player(){return this.player}set_player(e){return this.player=e}get_variables(){return this.variables}set_variables(e){return this.variables=e}get_eventHub(){return this.eventHub}set_eventHub(e){return this.eventHub=e}get_parentDisplay(){return this.parentDisplay}set_parentDisplay(e){return this.parentDisplay=e}get_display(){return this.display}}g.__name__="bs.player.core.plugin.PluginBase",Object.assign(g.prototype,{__class__:g,uid:null,context:null,className:null,pluginConfig:null,variables:null,eventHub:null,parentDisplay:null,display:null,player:null,pluginName:null});var f=require("bs.player.core.plugin.VideoPlayerUtil");class b{static create(e){return null==e&&(e={}),new exports.Hls(e)}}b.__name__="bs.player.plugin.video.videoPlayer.HlsJsFactory";class S{constructor(e){this.saveBandwidthModeStore=null,this.playbackRate=1,this.initialAsAdvertisement=!1,this.isInStreamAdvertisement=!1,this.isAdvertisement=!1,this.isQuickFallbackPathForLiveEnabled=!0,this.minAudioTracksForInfo=2,null==S.instances.h[(e?"ad_":"")+this.context]&&(this.pluginConfig=f.readPluginConfig(this),this.isAdvertisement=e,this.initialAsAdvertisement=e,this.isInStreamAdvertisement=!1,this.isQualitySelectionEnabled=!0,this.hasSubtitlesAndAudioInitialized=!1,this.liveStreamRestartsOnError=0,this.prePlaybackSeekRelativePosition=null,this.prePlaybackHandlingSeeking=!1,this.dvrPlaybackStartTs=null,this.dvrRequestedInitialTimeTs=null,this.dvrWindowLength=null,this.isHlsLiveStream=!1,this.isPlaybackNotAllowed=!1,this.lastTimeUpdatePostionForEdgeBrowser=null,this.unfreezeEdgeBrowserTimer=null,this.hlsQualityLevel=a.parseInt("-1"),this.playbackState=0,this.saveBandwidthModeStore=null);}create(){n.add(this.context,"selectSubtitles",A(this,this.onSelectSubtitles)),n.add(this.context,"selectAudio",A(this,this.onSelectAudio)),n.add(this.context,"requestVideoQualityChange",A(this,this.onVideoQualityChange)),r.add(this.context,"adInStreamPlaying",A(this,this.onAdInStreamPlaying)),r.add(this.context,"adInStreamPlayingSilent",A(this,this.onAdInStreamPlaying)),r.add(this.context,"adInStreamEnd",A(this,this.onAdInStreamEnd)),r.add(this.context,"adInStreamEndSilent",A(this,this.onAdInStreamEnd)),r.add(this.context,"adInStreamClipPlaying",A(this,this.onAdClipInStreamPlaying)),r.add(this.context,"adInStreamClipPlayingSilent",A(this,this.onAdClipInStreamPlaying)),r.add(this.context,"adInStreamClipEnd",A(this,this.onAdClipInStreamEnd)),r.add(this.context,"adInStreamClipEndSilent",A(this,this.onAdClipInStreamEnd));}destroy(){n.remove(this.context,"selectSubtitles",A(this,this.onSelectSubtitles)),n.remove(this.context,"selectAudio",A(this,this.onSelectAudio)),n.remove(this.context,"requestVideoQualityChange",A(this,this.onVideoQualityChange)),r.remove(this.context,"adInStreamPlaying",A(this,this.onAdInStreamPlaying)),r.remove(this.context,"adInStreamPlayingSilent",A(this,this.onAdInStreamPlaying)),r.remove(this.context,"adInStreamEnd",A(this,this.onAdInStreamEnd)),r.remove(this.context,"adInStreamEndSilent",A(this,this.onAdInStreamEnd)),r.remove(this.context,"adInStreamClipPlaying",A(this,this.onAdClipInStreamPlaying)),r.remove(this.context,"adInStreamClipPlayingSilent",A(this,this.onAdClipInStreamPlaying)),r.remove(this.context,"adInStreamClipEnd",A(this,this.onAdClipInStreamEnd)),r.remove(this.context,"adInStreamClipEndSilent",A(this,this.onAdClipInStreamEnd)),this.stopLiveEdgeUpdateTimer(),this.cleanVideoAndPlayer(),this.media=null,this.liveStreamRestartsOnError=0;}cleanVideoAndPlayer(){this.cleanPlayer(),null!=this.video&&(this.video.removeEventListener("pause",A(this,this.onHlsjsPause)),this.video.removeEventListener("play",A(this,this.onHlsjsPlay)),this.video.removeEventListener("playing",A(this,this.onHlsjsPlaying)),this.video.removeEventListener("timeupdate",A(this,this.onHlsjsTimeupdate)),this.video.removeEventListener("durationchange",A(this,this.onHlsjsDurationchange)),this.video.removeEventListener("waiting",A(this,this.onHlsjsWaiting)),this.video.removeEventListener("ended",A(this,this.onHlsjsEnded)),this.video.removeEventListener("seeked",A(this,this.onHlsjsSeeked)),this.video.removeEventListener("canplaythrough",A(this,this.onVideoCanplaythrough)),null!=this.video.textTracks&&this.video.textTracks.removeEventListener("addtrack",A(this,this.onAddTrack)),this.video.removeEventListener("ratechange",A(this,this.onVideoRateChange)),this.video.pause(),this.video=null),this.source=null,this.saveBandwidthModeStore=null;}onAdInStreamPlaying(e){this.isAdvertisement=!0,this.isInStreamAdvertisement=!0,null!=this.media&&null!=this.media.mediaPlaybackInfo&&(this.media.mediaPlaybackInfo.isInStreamAdvertisementPlaying=!0);}onAdClipInStreamPlaying(e){null!=this.video&&null!=this.media&&(this.inStreamAdvertStartPos=null,this.video.currentTime>=0&&(this.inStreamAdvertStartPos=this.video.currentTime),this.inStreamAdvertMedia=null,null!=e&&null!=e.data&&(this.inStreamAdvertMedia=e.data.media));}onAdClipInStreamEnd(e){this.inStreamAdvertStartPos=null,this.inStreamAdvertMedia=null;}onAdInStreamEnd(e){this.isAdvertisement=this.initialAsAdvertisement,this.isInStreamAdvertisement=!1,null!=this.media&&null!=this.media.mediaPlaybackInfo&&(this.media.mediaPlaybackInfo.isInStreamAdvertisementPlaying=!1);}onLiveEdgeUpdate(){null!=this.player&&this.hasSubtitlesAndAudioInitialized&&this.isPaused()&&this.dispatchEvent(this.isAdvertisement?new r("adCurrentTimeChange"):new d("currentTimeChange"));}dispatchEvent(e,t){if(null==this.video)return;let i=this.video.duration,s=this.video.currentTime;if(null!=this.media&&this.hasSubtitlesAndAudioInitialized&&(this.media.mediaPlaybackInfo.currentTime=s,this.media.mediaPlaybackInfo.isPlaying=!this.video.paused,null!=this.player&&null!=this.player.levels&&null!=this.player.currentLevel&&this.player.currentLevel<this.player.levels.length&&null!=this.player.levels[this.player.currentLevel]&&this.player.levels[this.player.currentLevel].bitrate>0&&(this.media.mediaPlaybackInfo.currentTotalBitrateKpbs=Math.round(this.player.levels[this.player.currentLevel].bitrate/1e3)),this.media.mediaPlaybackInfo.playbackRate=this.getPlaybackRate(),this.isDvr()&&(s=this.dvrRelativePlaybackTimeToDvrWindowTime(this.video.currentTime),this.media.mediaPlaybackInfo.currentTime=this.dvrRelatibePlaybackTimeToTs(this.video.currentTime))),this.isDvr()){let e=this.media,t=this.getDVRWindowRange(),s=this.getDvrWindowLengthFromHls();s>0&&(this.dvrWindowLength=s),i=this.isDvrSeekingSupported()?this.dvrWindowLength:1,null!=t&&null!=this.dvrPlaybackStartTs?(e.dvrWindowLength=t.end-t.start,e.dvrWindowLiveEdge=this.dvrRelatibePlaybackTimeToTs(t.end)):(e.dvrWindowLength=this.dvrWindowLength,e.dvrWindowLiveEdge=(new Date).getTime()/1e3),null!=e.dvrWindowLength&&(i=e.dvrWindowLength),null==this.liveEdgeUpdateTimer&&(this.liveEdgeUpdateTimer=new w(1e3),this.liveEdgeUpdateTimer.run=A(this,this.onLiveEdgeUpdate));}null==e.data&&(e.data={}),0==s&&null!=this.media&&null!=this.media.mediaUserSettings&&this.media.mediaUserSettings.resumePostion>0&&(s=this.media.mediaUserSettings.resumePostion),this.isInStreamAdvertisement&&this.inStreamAdvertStartPos>=0&&(s=this.video.currentTime-this.inStreamAdvertStartPos,null!=this.inStreamAdvertMedia&&(i=this.inStreamAdvertMedia.duration),s>i&&(s=i)),e.data.duration=i,e.data.currentTime=s,e.data.videoTagCurrentTime=this.video.currentTime,e.data.source=this.video.currentSrc,e.data.media=this.media,e.data.additionalData=t,this.isPlaybackNotAllowed&&(null==e.data.additionalData&&(e.data.additionalData={}),e.data.additionalData.isPlaybackNotAllowed=!0),e.dispatch(this.context);}isDvrSeekingSupported(){return this.dvrWindowLength>0&&this.dvrWindowLength>this.getLiveStreamDvrMinLen()}getDvrWindowLengthFromHls(){let e=0;if(null!=this.player&&null!=this.player.levels){let t=0,i=this.player.levels;for(;t<i.length;){let s=i[t];++t,null!=s.details&&s.details.totalduration>e&&(e=s.details.totalduration);}}return e}onHlsjsLevelLoaded(e,t){null!=t&&null!=t.details&&(this.isHlsLiveStream=t.details.live,this.checkMediaType(),null==this.dvrWindowLength&&(this.dvrWindowLength=t.details.totalduration),null!=t.level&&this.updateVideoQualityPlaybackLevel(t.level)),this.triggerCodecsEvent();}getLiveStreamDvrMinLen(){let e=600;return Object.prototype.hasOwnProperty.call(this.variables,"dvrMinLenForSeekbar")&&this.variables.dvrMinLenForSeekbar>=0&&(e=this.variables.dvrMinLenForSeekbar),Object.prototype.hasOwnProperty.call(this.pluginConfig,"liveStreamDvrMinLen")&&null!=s.field(this.pluginConfig,"liveStreamDvrMinLen")&&(e=this.pluginConfig.liveStreamDvrMinLen),e}onHlsjsManifestLoaded(e,t){this.isDvr()&&(this.dvrPlaybackStartTs=null),this.triggerCodecsEvent(),this.updateVideoQualityList();}checkMediaType(){if(this.media instanceof u&&this.isHlsLiveStream&&!(this.media instanceof v)){let e=new v,t=l.getInstanceFields(u),i=0;for(;i<t.length;){let a=t[i];++i,e[a]=s.field(this.media,a);}this.media=e;let a=new o("mediaAfterPlaybackStartMetadata");a.data=e,a.dispatch(this.context);}if(this.media instanceof v&&!this.isHlsLiveStream&&this.video.duration>0){let e=new u,t=l.getInstanceFields(u),i=0;for(;i<t.length;){let a=t[i];++i,e[a]=s.field(this.media,a);}this.media=e;let a=new o("mediaAfterPlaybackStartMetadata");a.data=this.media,a.dispatch(this.context);}}xhrSetupForToHttpsRedirect(e,t){"http://"==i.substr(t,0,7)&&(t="https://"+i.substr(t,7,null)),this.xhrSetupForNetworkActivity(e,t),e.open("GET",t,!0);}xhrSetupForNetworkActivity(e,t){let i=this;e.addEventListener("progress",(function(e){i.emitNetworkActivity(t,e);}));}emitNetworkActivity(e,t){let i=new d("networkActivityUrl");i.data={url:e,loaded:t.loaded},i.dispatch(this.context);}initPlayer(){let e={maxMaxBufferLength:120,maxBufferLength:30,autoStartLoad:!0,lowLatencyMode:!1,capLevelOnFPSDrop:!0,fpsDroppedMonitoringPeriod:1e4,fpsDroppedMonitoringThreshold:.05};if(T.isSamsungSmartTVTizen&&(e.liveSyncDuration=20),Object.prototype.hasOwnProperty.call(this.pluginConfig,"hlsSettings")&&null!=this.pluginConfig.hlsSettings){let t=0,i=s.fields(this.pluginConfig.hlsSettings);for(;t<i.length;){let a=i[t];++t,e[a]=s.field(this.pluginConfig.hlsSettings,a);}}if(Object.prototype.hasOwnProperty.call(this.variables,"hlsSettings")&&null!=this.variables.hlsSettings){let t=0,i=s.fields(this.variables.hlsSettings);for(;t<i.length;){let a=i[t];++t,e[a]=s.field(this.variables.hlsSettings,a);}}if(Object.prototype.hasOwnProperty.call(this.variables,"saveBandwidthMode")&&L.__cast(this.variables.saveBandwidthMode,I)&&(e.capLevelToPlayerSize=!0),null!=this.media){let t=this.getPlaybackStartTime(this.media);null!=t&&(e.startPosition=t),null!=this.media.source&&this.media.source.length>0&&null!=this.media.source[0]&&1==this.media.source[0].customParams.h.hlsjsForceHttpsUse?e.xhrSetup=A(this,this.xhrSetupForToHttpsRedirect):e.xhrSetup=A(this,this.xhrSetupForNetworkActivity),this.media instanceof v&&1==this.media.lowLatencyMode&&(e.lowLatencyMode=!0);}null!=this.player&&this.player.destroy();let t=Object.prototype.hasOwnProperty.call(this.variables,"system73")&&0==this.liveStreamRestartsOnError&&window.BigInt&&window.S73HlsjsWrapper&&!this.isAdvertisement;t&&(this.s73Wrapper=S73HlsjsWrapper(s.field(this.variables,"system73"),{Hls:exports.Hls}),this.s73Wrapper.wrapPlayerConfig(e)),this.player=b.create(e),t&&this.s73Wrapper.wrapPlayer(this.player),this.player.attachMedia(this.video),this.player.on(exports.Hls.Events.LEVEL_LOADED,A(this,this.onHlsjsLevelLoaded)),this.player.on(exports.Hls.Events.LEVEL_SWITCHED,A(this,this.onHlsjsPlaybackBitrateChange)),this.player.on(exports.Hls.Events.MANIFEST_LOADED,A(this,this.onHlsjsManifestLoaded)),this.player.on(exports.Hls.Events.ERROR,A(this,this.onHlsjsError));}onPlayerResetWithMseExtension(){if(null==this.video)return;this.video.removeEventListener("player_reset",A(this,this.onPlayerResetWithMseExtension));let e=this.video;this.video=null,this.attachVideo(e),null!=this.media&&this.play();}attachSubtitlesRenderer(e){this.subtitlesRenderer=e;}attachVideo(e){this.video!=e&&(this.cleanPlayer(),Object.prototype.hasOwnProperty.call(this.variables,"qualitySelectionEnabled")&&(this.isQualitySelectionEnabled=s.field(this.variables,"qualitySelectionEnabled")),this.video=e,this.initPlayer(),this.video.addEventListener("pause",A(this,this.onHlsjsPause)),this.video.addEventListener("play",A(this,this.onHlsjsPlay)),this.video.addEventListener("playing",A(this,this.onHlsjsPlaying)),this.video.addEventListener("timeupdate",A(this,this.onHlsjsTimeupdate)),this.video.addEventListener("durationchange",A(this,this.onHlsjsDurationchange)),this.video.addEventListener("waiting",A(this,this.onHlsjsWaiting)),this.video.addEventListener("ended",A(this,this.onHlsjsEnded)),this.video.addEventListener("seeked",A(this,this.onHlsjsSeeked)),this.video.addEventListener("canplaythrough",A(this,this.onVideoCanplaythrough)),null!=this.video.textTracks&&this.video.textTracks.addEventListener("addtrack",A(this,this.onAddTrack)),this.video.addEventListener("ratechange",A(this,this.onVideoRateChange)),this.checkPlaybackRate(),this.triggerVideoPlaybackRateEvent());}setPlaybackRate(e){this.isAdvertisement||(this.playbackRate=e,this.checkPlaybackRate());}getPlaybackRate(){return this.video.playbackRate}onVideoRateChange(e){this.triggerVideoPlaybackRateEvent();}triggerVideoPlaybackRateEvent(){if(this.isAdvertisement)return;let e=new d("playbackRate");e.data=this.getPlaybackRate(),e.dispatch(this.context);}checkPlaybackRate(){let e;if(this.isAdvertisement)e=!0;else {let t=this.playbackRate;e=isNaN(t);}e||this.getPlaybackRate()==this.playbackRate||(this.video.playbackRate=this.playbackRate);}cleanPlayer(){if(null!=this.s73Wrapper){try{this.s73Wrapper.destroy();}catch(e){}this.s73Wrapper=null;}null!=this.player&&(this.player.detachMedia(),this.player.destroy(),this.player=null);}reset(){}isPaused(){return null==this.video||this.video.paused}onAddTrack(e){let t=this.isAdvertisement?new r("addTrack"):new d("addTrack");t.data={track:e},this.dispatchEvent(t);}onHlsjsPause(e){return this.dispatchEvent(this.isAdvertisement?new r("adPaused"):new d("paused")),this.dispatchEvent(new d("bufferingEnd")),this.isBuffering=!1,20==this.playbackState&&this.onHlsjsEnded(),null}onHlsjsPlay(e){return this.checkPlaybackRate(),this.dispatchEvent(this.isAdvertisement?new r("adPlaying"):new d("playing")),null}stopLiveStreamRestartTimeoutTimer(){null!=this.liveStreamRestartTimeoutTimer&&(this.liveStreamRestartTimeoutTimer.stop(),this.liveStreamRestartTimeoutTimer=null);}stopLiveStreamRestartDelayTimer(){null!=this.liveStreamRestartDelayTimer&&(this.liveStreamRestartDelayTimer.stop(),this.liveStreamRestartDelayTimer=null);}stopLiveStreamEndingTimeout(){null!=this.liveStreamEndingTimeout&&(this.liveStreamEndingTimeout.stop(),this.liveStreamEndingTimeout=null);}stopLiveEdgeUpdateTimer(){null!=this.liveEdgeUpdateTimer&&(this.liveEdgeUpdateTimer.stop(),this.liveEdgeUpdateTimer=null);}onHlsjsPlaying(e){return this.stopLiveStreamRestartTimeoutTimer(),this.liveStreamRestartsOnError=0,this.dispatchEvent(new d("bufferingEnd")),this.isBuffering=!1,this.dispatchEvent(this.isAdvertisement?new r("adPlaying"):new d("playing")),null}unfreezeEdgeBrowser(){this.stopUnfreezeEdgeBrowserTimer();let e=this;null!=this.video&&this.video.currentTime>0&&(this.video.currentTime+=.2,this.lastTimeUpdatePostionForEdgeBrowser=null,w.delay((function(){e.video.currentTime+=.2;}),100));}stopUnfreezeEdgeBrowserTimer(){null!=this.unfreezeEdgeBrowserTimer&&(this.unfreezeEdgeBrowserTimer.stop(),this.unfreezeEdgeBrowserTimer=null);}isVideoStalledAtEnd(){return null!=this.video&&!this.isDvr()&&Math.abs(this.video.duration-this.video.currentTime)<.15}isVideoStalledAtBegin(e){if(null!=this.player&&null!=e&&"bufferStalledError"==e.details&&null!=e.error&&null!=e.error.message&&-1!=e.error.message.indexOf("Playback stalling at @0 due to low buffer")&&null!=this.player.bufferController.tracks.audio&&null!=this.player.bufferController.tracks.video&&this.player.bufferController.tracks.audio.buffer.buffered.length>0&&this.player.bufferController.tracks.video.buffer.buffered.length>0){let e=this.player.bufferController.tracks.audio.buffer.buffered.start(0),t=this.player.bufferController.tracks.video.buffer.buffered.start(0);return e>=0&&t>=0&&Math.abs(e-t)>3*this.player.config.maxBufferHole}return !1}seekOverBeginingInconsistiency(){if(null!=this.player&&null!=this.player.bufferController.tracks.audio&&null!=this.player.bufferController.tracks.video&&this.player.bufferController.tracks.audio.buffer.buffered.length>0&&this.player.bufferController.tracks.video.buffer.buffered.length>0){let e=this.player.bufferController.tracks.audio.buffer.buffered.start(0),t=this.player.bufferController.tracks.video.buffer.buffered.start(0),i=Math.max(e,t);i>=0&&this.seek(i);}}triggerVideoCompleteOnVideoStalledAtEnd(){this.video.pause(),this.playbackState=25,this.video.currentTime=0;}triggerVideoCompleteOnVideoStalledAtEndComplete(){this.dispatchEvent(new d("bufferingEnd")),this.isBuffering=!1,this.onHlsjsEnded(),this.playbackState=0;}onHlsjsTimeupdate(e){if(0==this.video.readyState||25==this.playbackState)return null;this.playbackState=0;let t=this.isDvr();return this.getNowTs(),this.stopUnfreezeEdgeBrowserTimer(),T.isEdge&&null!=this.video&&!this.video.paused&&(this.lastTimeUpdatePostionForEdgeBrowser==this.video.currentTime&&this.lastTimeUpdatePostionForEdgeBrowser>0&&(this.unfreezeEdgeBrowserTimer=w.delay(A(this,this.unfreezeEdgeBrowser),2e3)),this.lastTimeUpdatePostionForEdgeBrowser=this.video.currentTime),!this.isPlaybackNotAllowed||null==this.video||this.video.paused||this.video.seeking||(this.isPlaybackNotAllowed=!1),this.dispatchEvent(this.isAdvertisement?new r("adCurrentTimeChange"):new d("currentTimeChange")),this.isBuffering&&null!=this.video&&!this.video.paused&&!this.video.seeking&&this.video.readyState>=4&&(this.video.playbackRate>0||null==this.video.playbackRate)&&(this.dispatchEvent(new d("bufferingEnd")),this.isBuffering=!1),t&&null!=this.dvrWindowEndTimeTs&&this.media.mediaPlaybackInfo.currentTime>this.dvrWindowEndTimeTs&&(new n("skinPause").dispatch(this.context),this.onHlsjsEnded()),null}onHlsjsDurationchange(e){if(this.isHlsLiveStream||null!=this.media.duration||(this.media.duration=this.video.duration),null!=this.prePlaybackSeekRelativePosition){let e=this.prePlaybackSeekRelativePosition;this.prePlaybackSeekRelativePosition=null,this.video.duration>0&&Math.abs(this.video.duration-this.media.duration)>2&&(this.prePlaybackHandlingSeeking=!0,this.seek(e*this.video.duration),this.pause());}return this.dispatchEvent(this.isAdvertisement?new r("adDurationChange"):new d("durationChange")),null}onHlsjsWaiting(e){return this.isVideoStalledAtEnd()?(this.triggerVideoCompleteOnVideoStalledAtEnd(),null):(this.isBuffering=!0,this.dispatchEvent(new d("bufferingStart")),null)}onHlsjsPlaybackBitrateChange(e,t){return null!=t&&null!=t.level&&this.updateVideoQualityPlaybackLevel(t.level),null}updateVideoQualityPlaybackLevel(e){this.hlsQualityLevel=e;let t=new o("videoQualityPlaybackLevelChange");t.data=e,t.dispatch(this.context);}triggerCodecsEvent(){if(null!=this.player.levels&&null!=this.player.currentLevel&&this.player.levels.length>=this.player.currentLevel&&null!=this.player.levels[this.player.currentLevel]){let e=this.player.levels[this.player.currentLevel];if(null!=e&&null!=e.audioCodec&&null!=e.videoCodec){let t=new o("codecData");t.data={audioCodec:e.audioCodec,videoCodec:e.videoCodec},t.dispatch(this.context);}}}updateVideoQualityList(){if(!this.isQualitySelectionEnabled||null==this.player.levels||this.player.levels.length<2||this.isAdvertisement)return;let e=new o("videoQualityData");e.data=this.getQualityLevels(),e.dispatch(this.context);let t=new n("videoQualityHasChanged");t.data="-1",t.dispatch(this.context),this.setInitialVideoQualityKbps();}setInitialVideoQualityKbps(){if(!Object.prototype.hasOwnProperty.call(this.variables,"qualityInitialBandwidthKbs"))return;let e=s.field(this.variables,"qualityInitialBandwidthKbs");if(null==e)return;let t=1e3*a.parseInt(e);if(null==t||isNaN(t)||!isFinite(t))return;let i=0;if(t>0){i=-1;let e=this.player.levels,l=0;for(;l<e.length;){let r=e[l],n=l++;if(!Object.prototype.hasOwnProperty.call(r,"bitrate"))continue;let o=s.field(r,"bitrate");if(null==o)continue;let d=a.parseInt(o);null!=d&&!isNaN(d)&&isFinite(d)&&(d<=t&&(i=n));}}-1==i||this.player.startLevel==i&&this.player.nextAutoLevel==i||(this.player.startLevel=this.player.nextAutoLevel=i);}getQualityLevels(){let e="resolution";if(Object.prototype.hasOwnProperty.call(this.variables,"qualityLabelType")&&(e=s.field(this.variables,"qualityLabelType"),e=e.toLowerCase()),"resolution"==e){let t=0,i=this.player.levels;for(;t<i.length;){let s=i[t];if(++t,!(s.width>0&&s.height>0)){e="bitrate";break}}}let t=[];t.push(new y("Auto","-1"));let i=0,l=this.player.levels.length;for(;i<l;){let s=i++,l="resolution"==e?a.string(this.player.levels[s].height)+"p":this.mapBitrateToLabel(this.player.levels[s].bitrate),r=new y(l,null==s?"null":""+s);r.height=this.player.levels[s].height,r.width=this.player.levels[s].width,r.bitrateKbps=this.player.levels[s].bitrate>0?this.player.levels[s].bitrate/1e3:null,t.push(r);}return t.reverse(),t}mapBitrateToLabel(e){return Math.floor(e/1e3)+"k"}onVideoCanplaythrough(){if(this.hasSubtitlesAndAudioInitialized||(this.updateSubtitlesSets(),this.updateAudioSets(),this.triggerCodecsEvent(),this.updateVideoQualityList(),this.hasSubtitlesAndAudioInitialized=!0),null==this.dvrPlaybackStartTs&&this.isDvr()){let e=this.getDVRWindowRangeRaw();null!=e&&(this.dvrPlaybackStartTs=this.getNowTs()-e.end,null!=this.dvrRequestedInitialTimeTs&&this.seek(this.dvrRequestedInitialTimeTs-this.dvrPlaybackStartTs));}}getDVRWindowRangeRaw(){if(null==this.video||null==this.video.duration||this.video.duration<=0||null==this.dvrWindowLength)return null;return {start:this.video.duration-this.dvrWindowLength,end:this.video.duration}}isDvr(){return null!=this.media&&this.media instanceof v}onHlsjsEndingTimeout(){this.onHlsjsEnded();}onHlsjsEnded(e){return this.stopLiveStreamEndingTimeout(),this.media instanceof c&&(this.playbackState=21),this.dispatchEvent(this.isAdvertisement?new r("adComplete"):new d("complete")),null}onHlsjsSeeked(e){return this.prePlaybackHandlingSeeking&&(this.prePlaybackHandlingSeeking=!1,this.play(),this.pause()),25==this.playbackState&&this.triggerVideoCompleteOnVideoStalledAtEndComplete(),this.dispatchEvent(this.isAdvertisement?new r("seekingEnd"):new d("seekingEnd")),this.isPaused()&&(this.dispatchEvent(new d("bufferingEnd")),this.isBuffering=!1),null}onHlsjsError(e,t){if(this.isAdvertisement&&!this.isInStreamAdvertisement)return this.dispatchEvent(new r("adMediaError"),this.prepareErrorMessage(e)),null;if(10==this.playbackState)return null;if(t&&t.type==exports.Hls.ErrorTypes.OTHER_ERROR)return null;if(t&&t.type==exports.Hls.ErrorTypes.MEDIA_ERROR&&"bufferFullError"==t.details)return null;if(t&&t.type==exports.Hls.ErrorTypes.MEDIA_ERROR&&("bufferNudgeOnStall"==t.details||"bufferStalledError"==t.details))return this.isVideoStalledAtBegin(t)?this.seekOverBeginingInconsistiency():this.isDvr()?this.hasLiveStreamEnded()&&this.handleLiveStreamEnding():this.isVideoStalledAtEnd()&&this.triggerVideoCompleteOnVideoStalledAtEnd(),null;if(t&&t.type==exports.Hls.ErrorTypes.NETWORK_ERROR&&!t.fatal)return null;if(t&&t.type==exports.Hls.ErrorTypes.MEDIA_ERROR&&!t.fatal)return null;this.stopLiveStreamRestartTimeoutTimer();let i=!0;if(this.media instanceof c){let e=this.hasLiveStreamEnded();!e&&this.liveStreamRestartsOnError>=5&&(this.liveStreamRestartsOnError-=1),e&&(i=!1,this.handleLiveStreamEnding());}if(null!=e&&null!=t&&(console.error("bradmax.player.error: "+e),console.error(t)),i&&this.isDvr()&&this.liveStreamRestartsOnError<5&&!this.media.hasFallbackSources()){i=!1,this.stopLiveStreamRestartDelayTimer(),this.liveStreamRestartDelayTimer=w.delay(A(this,this.handleLivestreamRestart),2e3*(this.liveStreamRestartsOnError+1)),this.playbackState=10,this.isBuffering=!0,new d("bufferingStart").dispatch(this.context);let e={hasplayerError:t,currTry:this.liveStreamRestartsOnError};this.dispatchEvent(this.isAdvertisement?new r("adMediaErrorFallbackTry"):new d("mediaErrorFallbackTry"),e);}return i&&(this.isNetworkConnectionProblem(t)?(this.pause(),this.dispatchEvent(this.isAdvertisement?new r("adConnectionError"):new d("connectionError"),this.prepareErrorMessage(t))):this.dispatchEvent(this.isAdvertisement?new r("adMediaError"):new d("mediaError"),this.prepareErrorMessage(t))),null}prepareErrorMessage(e){let t=this.isNetworkConnectionProblem(e)&&(this.media instanceof c||this.video.currentTime>0||null!=e&&null!=e.response&&e.response.code>=500||null!=this.media.mediaUserSettings&&this.media.mediaUserSettings.resumePostion>0),i="";return null!=e&&null!=e.details&&(i=" type: "+a.string(e.details)),null!=e&&null!=e.context&&null!=e.context.url&&(i+="\nurl: "+a.string(e.context.url)),{errObj:e,isTemporaryNetworkIssue:t,message:i}}hasLiveStreamEnded(){if(!(this.media instanceof c))return !1;let e=this.media;return null!=e.streamEnd&&e.streamEnd.getTime()<(new Date).getTime()||null==e.streamEnd&&null!=e.streamEndThankYouImageUrl&&(null==e.lowLatencyMode||!e.lowLatencyMode)}handleLiveStreamEnding(){new n("skinPause").dispatch(this.context),this.playbackState=20,this.stopLiveStreamEndingTimeout(),this.liveStreamEndingTimeout=w.delay(A(this,this.onHlsjsEndingTimeout),500);}isNetworkConnectionProblem(e){return null!=e&&e.type==exports.Hls.ErrorTypes.NETWORK_ERROR&&null!=this.video&&null!=this.media}handleLivestreamRestart(){this.liveStreamRestartsOnError++,this.playbackState=11,this.stopLiveStreamRestartDelayTimer(),this.stopLiveStreamRestartTimeoutTimer();let e=this.video;this.cleanVideoAndPlayer(),this.attachVideo(e),this.play(),this.liveStreamRestartTimeoutTimer=w.delay(A(this,this.onHlsjsLivestreamRestartTimeout),1e4);}onHlsjsLivestreamRestartTimeout(){this.liveStreamRestartsOnError<5?this.handleLivestreamRestart():(this.playbackState=30,this.dispatchEvent(this.isAdvertisement?new r("adMediaError"):new d("mediaError"),{message:"Livestream restart all tries failed."}));}onVideoQualityChange(e){if(null==e||null==e.data||"string"!=typeof e.data||null==this.player||null==this.player.levels||this.player.levels.length<2)return;let t=e.data,i=a.string(this.hlsQualityLevel);if(this.player.autoLevelEnabled&&(i="-1"),this.player.currentLevel>=0&&this.updateVideoQualityPlaybackLevel(this.player.currentLevel),t==i)return;this.hlsQualityLevel=a.parseInt(t),this.player.currentLevel=this.hlsQualityLevel,Object.prototype.hasOwnProperty.call(this.variables,"saveBandwidthMode")&&L.__cast(this.variables.saveBandwidthMode,I)&&(this.player.capLevelToPlayerSize="-1"==t);let s=new n("videoQualityHasChanged");s.data=t,s.dispatch(this.context);}updateAudioSets(){let e=this.player.audioTracks;if(null!=e&&e.length>=this.minAudioTracksForInfo){let t=[],i=0;for(;i<e.length;){let s=e[i];if(++i,null==s.lang||""==s.lang)continue;let l=new m;l.id=a.string(s.id),l.name=h.normalizeLanguageNameFormat(h.getLanguageNativeNameByCode(s.lang)),null!=l.name&&""!=l.name||(l.name=s.name),null!=l.name&&""!=l.name||(l.name=s.lang),l.languageCode=s.lang,l.isDefault=s.default,t.push(l);}if(t.length>=this.minAudioTracksForInfo){let e=new o("audioData");e.data=t,e.dispatch(this.context);}}}updateSubtitlesSets(){let e=this.player.subtitleTracks;if(null!=e&&e.length>0){let t=[],i=0;for(;i<e.length;){let l=e[i];if(++i,null==l.lang||""==l.lang)continue;let r=new p;r.id=a.string(l.id),r.name=h.normalizeLanguageNameFormat(h.getLanguageNativeNameByCode(l.lang)),r.languageCode=l.lang,r.preselected=l.autoselect&&s.field(l,"default"),t.push(r);}if(null!=this.variables.subtitles&&t.length>0&&h.preselectSubtitlesSet(this.variables.subtitles,t),t.length>0){let e=new o("subtitleData");e.data=t,e.dispatch(this.context);}}else if(null!=this.video&&null!=this.video.textTracks&&this.video.textTracks.length>0){let e=[],t=0,i=this.video.textTracks;for(;t<i.length;){let s=i[t];if(++t,null==s.language||""==s.language)continue;let a=new p;a.id=null==s.id?"null":""+s.id,a.name=h.normalizeLanguageNameFormat(h.getLanguageNativeNameByCode(s.language)),a.languageCode=s.language,a.preselected="showing"==s.mode,e.push(a);}if(null!=this.variables.subtitles&&e.length>0&&h.preselectSubtitlesSet(this.variables.subtitles,e),e.length>0){let t=new o("subtitleData");t.data=e,t.dispatch(this.context);}}}onHasplayerKeySessionCreated(e){return new d("drmAuthenticationComplete").dispatch(this.context),null}onSelectSubtitles(e){if(null==e||null==this.player)return;let t=e.data;if(this.player.subtitleTracks.length>0)if(null!=t){let e=a.parseInt(t.id),i=0,s=this.player.subtitleTracks;for(;i<s.length;)if(s[i++].id==e){this.player.subtitleTrack=e;break}}else this.player.subtitleTrack=-1;else if(null!=this.video&&null!=this.video.textTracks&&this.video.textTracks.length>0)if(null!=t){let e=0,i=this.video.textTracks.length;for(;e<i;){let i=this.video.textTracks[e++];i.id==t.id?i.mode="showing":i.mode="disabled";}}else {let e=0,t=this.video.textTracks.length;for(;e<t;){this.video.textTracks[e++].mode="disabled";}}}onSelectAudio(e){if(null==e||null==this.player)return;let t=e.data;if(null!=t){let e=a.parseInt(t.id),i=0,s=this.player.audioTracks;for(;i<s.length;)if(s[i++].id==e){this.player.audioTrack=e;break}}}pause(){T.isEdge&&null!=this.unfreezeEdgeBrowserTimer||null!=this.video&&this.video.pause();}initSource(){let e=this;null!=this.media&&this.source!=this.media.source[0].url&&(this.setDefaultPlayback(),this.source=this.media.source[0].url,w.delay((function(){e.isBuffering=!0,new d("bufferingStart").dispatch(e.context);}),0));}play(){if(null!=this.video&&this.video.hasAttribute("data-mse-resetting"))this.video.addEventListener("player_reset",A(this,this.onPlayerResetWithMseExtension));else {if(this.initSource(),this.isDvr()){let e=this.getDVRWindowRange();null!=e&&(this.video.currentTime<e.start?this.seek(0):this.video.currentTime>e.end&&this.seek(e.end-e.start));}if(null!=this.video){let e=this.video.play();null!=e&&e.catch(A(this,this.onPlayPromiseError));}}}log(e,t){null==t&&(t="log"),console&&("error"==t?console.error(e):"warn"==t?console.warn(e):console.log(e));}onPlayPromiseError(e){let t=this;null==e||"NotAllowedError"!=e.name&&"AbortError"!=e.name?(this.log("BRADMAX PLAYER NOTICE:\nException occured durring starting player. Details below:\n","error"),this.log(e,"error")):(this.isPlaybackNotAllowed=!0,this.variables.autoplay?this.log("BRADMAX PLAYER NOTICE:\nBrowser doesn't allow for autoplaying video without user interaction.\nPlayer is waiting for user 'play' click. You can autoplay muted video (mute=true).\n\nMode details about browser autoplay policy: https://developers.google.com/web/updates/2017/09/autoplay-policy-changes","warn"):(this.log("BRADMAX PLAYER NOTICE:\nBrowser block starting playing video. Details below:\n","warn"),this.log(e,"warn")),21!=this.playbackState&&20!=this.playbackState&&11!=this.playbackState&&10!=this.playbackState&&w.delay((function(){t.dispatchEvent(t.isAdvertisement?new r("adPaused"):new d("paused")),t.dispatchEvent(new d("bufferingEnd")),t.isBuffering=!1;}),0));}playPause(){this.isPaused()?this.play():this.pause();}setDefaultPlayback(){this.cleanPlayer(),this.initPlayer(),this.player.loadSource(this.media.source[0].url);}getPlaybackStartTime(e){let t=null;return null!=this.dvrWindowStartTimeTs&&null!=this.dvrWindowEndTimeTs&&this.dvrWindowEndTimeTs<this.getNowTs()&&(t=this.dvrWindowStartTimeTs),null!=e&&null!=e.mediaUserSettings&&null!=e.mediaUserSettings.resumePostion&&(t=e.mediaUserSettings.resumePostion),null!=this.prePlaybackSeekRelativePosition&&null!=e&&e.duration>0&&(t=this.prePlaybackSeekRelativePosition*e.duration),null!=t&&null!=this.dvrWindowStartTimeTs&&t<this.dvrWindowStartTimeTs&&(t=this.dvrWindowStartTimeTs),null!=t&&null!=this.dvrWindowEndTimeTs&&this.dvrWindowEndTimeTs<t&&(t=this.dvrWindowEndTimeTs),t}seek(e){let t=this.isPaused()&&null==this.source,i=!1,s=this;if(this.isDvr()){e=this.dvrWindowTimeToDvrRelativePlaybackTime(e);let t=this.getDVRWindowRange();if(null!=t){let s=0;null!=this.player&&null!=this.player.bufferController&&null!=this.player.bufferController.details&&this.player.bufferController.details.averagetargetduration>0&&(s=this.player.bufferController.details.averagetargetduration),e>t.end-s?e=t.end-s:e<t.start&&(e=t.start),i=e<=t.start+s;}}else e<0?e=0:null!=this.video&&e>this.video.duration&&(e=this.video.duration),t&&(this.media.duration>0&&(this.prePlaybackSeekRelativePosition=e/this.media.duration,this.prePlaybackHandlingSeeking=!0),this.initSource()),this.isPaused()&&!t&&w.delay((function(){s.isBuffering=!0,new d("bufferingStart").dispatch(s.context);}),0);this.video.currentTime=e,this.dispatchEvent(new d("seekingStart")),null!=this.video&&this.video.paused&&!i&&(this.play(),this.pause());}dvrWindowTimeToDvrRelativePlaybackTime(e){let t=this.getDVRWindowRange();return null==t?e:e+t.start}getDvrWindowEndTimeOffset(){let e=0;if(null!=this.dvrWindowEndTimeTs){let t=this.getDVRWindowRange();null!=t&&this.dvrWindowEndTimeTs<t.end&&(e=t.end-this.dvrWindowEndTimeTs);}return e}getDVRWindowRange(){let e=this.getDVRWindowRangeRaw();return null==e?null:(null!=this.dvrWindowStartTimeTs&&null!=this.dvrPlaybackStartTs&&this.dvrRelatibePlaybackTimeToTs(e.start)<this.dvrWindowStartTimeTs&&(e.start=this.dvrWindowStartTimeTs-this.dvrPlaybackStartTs),null!=this.dvrWindowEndTimeTs&&null!=this.dvrPlaybackStartTs&&this.dvrWindowEndTimeTs<this.dvrRelatibePlaybackTimeToTs(e.end)&&(e.end=this.dvrWindowEndTimeTs-this.dvrPlaybackStartTs),e)}dvrRelativePlaybackTimeToDvrWindowTime(e){let t=this.getDVRWindowRange();return null==t?e:e-t.start}dvrRelatibePlaybackTimeToTs(e){let t=0;return null!=this.dvrPlaybackStartTs&&(t=this.dvrPlaybackStartTs),t+e}getDVRWindowSize(){let e=this.getDVRWindowRange();return null==e?0:e.end-e.start}getNowTs(){return (new Date).getTime()/1e3}selectAudio(e){}selectSubtitles(e){}volume(e){this.video.volume=e;}setData(e){this.media=e,this.hasSubtitlesAndAudioInitialized=!1,this.isHlsLiveStream=!1,this.isPlaybackNotAllowed=!1,this.isBuffering=!1,this.lastTimeUpdatePostionForEdgeBrowser=null,this.prePlaybackHandlingSeeking=!1,this.stopUnfreezeEdgeBrowserTimer(),this.stopLiveStreamRestartDelayTimer(),this.stopLiveEdgeUpdateTimer(),this.hlsQualityLevel=a.parseInt("-1"),null!=this.player&&(this.player.stopLoad(),this.player.destroy(),this.player=null),this.liveStreamRestartsOnError=0,this.dvrPlaybackStartTs=null,this.dvrRequestedInitialTimeTs=null,this.dvrWindowLength=null,Object.prototype.hasOwnProperty.call(this.variables,"dvrWindowStartTime")?(this.dvrWindowStartTimeTs=s.field(this.variables,"dvrWindowStartTime"),this.getNowTs()<this.dvrWindowStartTimeTs&&(this.dvrWindowStartTimeTs=null),s.deleteField(this.variables,"dvrWindowStartTime")):this.dvrWindowStartTimeTs=null,Object.prototype.hasOwnProperty.call(this.variables,"dvrWindowEndTime")?(this.dvrWindowEndTimeTs=s.field(this.variables,"dvrWindowEndTime"),s.deleteField(this.variables,"dvrWindowEndTime")):this.dvrWindowEndTimeTs=null,1==this.variables.autoplay&&this.play();}playerResize(e){}videoReady(){}onDurationChange(e){}saveBandwidthModeVisibilityChange(e){e?(this.saveBandwidthModeStore={currentLevel:this.player.currentLevel,nextLevel:this.player.nextLevel,nextAutoLevel:this.player.nextAutoLevel,nextLoadLevel:this.player.nextLoadLevel,capLevelToPlayerSize:this.player.capLevelToPlayerSize},this.player.capLevelToPlayerSize=!1,this.player.nextLevel=0,this.player.nextAutoLevel=0,this.player.nextLoadLevel=0):null!=this.saveBandwidthModeStore&&(this.player.nextLevel=this.saveBandwidthModeStore.nextLevel,this.player.nextAutoLevel=this.saveBandwidthModeStore.nextAutoLevel,this.player.nextLoadLevel=this.saveBandwidthModeStore.nextLoadLevel,this.player.currentLevel=this.saveBandwidthModeStore.currentLevel,this.player.capLevelToPlayerSize=this.saveBandwidthModeStore.capLevelToPlayerSize,this.saveBandwidthModeStore=null);}static canPlay(e){return !(!T.isSamsungSmartTVTizen&&"Safari"==T.browserName)&&(!("Microsoft Internet Explorer"==T.browserName&&T.majorVersion<11)&&(null==e.drm&&e.url.toLowerCase().indexOf(".m3u8")>1))}static getInstance(e,t){let i=t?"ad_":"";if(Object.prototype.hasOwnProperty.call(S.instances.h,i+e))return S.instances.h[i+e];{let s=new S(t);return S.instances.h[i+e]=s,s.context=e,s.create(),s}}}e.bs.player.plugin.video.videoPlayer.VideoHlsJs=S,S.__name__="bs.player.plugin.video.videoPlayer.VideoHlsJs",Object.assign(S.prototype,{__class__:S,minAudioTracksForInfo:null,isQuickFallbackPathForLiveEnabled:null,context:null,variables:null,isAdvertisement:null,isInStreamAdvertisement:null,initialAsAdvertisement:null,inStreamAdvertStartPos:null,inStreamAdvertMedia:null,video:null,pluginConfig:null,hasSubtitlesAndAudioInitialized:null,player:null,s73Wrapper:null,media:null,source:null,subtitlesRenderer:null,isQualitySelectionEnabled:null,liveStreamRestartsOnError:null,liveStreamRestartTimeoutTimer:null,liveStreamEndingTimeout:null,liveStreamRestartDelayTimer:null,prePlaybackSeekRelativePosition:null,prePlaybackHandlingSeeking:null,dvrPlaybackStartTs:null,dvrRequestedInitialTimeTs:null,dvrWindowLength:null,isHlsLiveStream:null,hlsQualityLevel:null,isPlaybackNotAllowed:null,isBuffering:null,lastTimeUpdatePostionForEdgeBrowser:null,unfreezeEdgeBrowserTimer:null,playbackState:null,liveEdgeUpdateTimer:null,dvrWindowStartTimeTs:null,dvrWindowEndTimeTs:null,playbackRate:null,saveBandwidthModeStore:null});var T=require("bs.util.BrowserTools");class E extends Error{constructor(e,t,i){super(e),this.message=e,this.__previousException=t,this.__nativeException=null!=i?i:this;}get_native(){return this.__nativeException}static thrown(e){if(e instanceof E)return e.get_native();if(e instanceof Error)return e;return new k(e)}}E.__name__="haxe.Exception",E.__super__=Error,Object.assign(E.prototype,{__class__:E,__skipStack:null,__nativeException:null,__previousException:null});var w=require("haxe.Timer");class k extends E{constructor(e,t,i){super(String(e),t,i),this.value=e;}}k.__name__="haxe.ValueException",k.__super__=E,Object.assign(k.prototype,{__class__:k,value:null});var P=require("haxe.ds.StringMap");class L{static getClass(e){if(null==e)return null;if(e instanceof Array)return Array;{let t=e.__class__;if(null!=t)return t;let i=L.__nativeClassName(e);return null!=i?L.__resolveNativeClass(i):null}}static __string_rec(e,t){if(null==e)return "null";if(t.length>=5)return "<...>";let i=typeof e;switch("function"==i&&(e.__name__||e.__ename__)&&(i="object"),i){case"function":return "<function>";case"object":if(e instanceof Array){let i="[";t+="\t";let s=0,a=e.length;for(;s<a;){let a=s++;i+=(a>0?",":"")+L.__string_rec(e[a],t);}return i+="]",i}let i;try{i=e.toString;}catch(e){return "???"}if(null!=i&&i!=Object.toString&&"function"==typeof i){let t=e.toString();if("[object Object]"!=t)return t}let s="{\n";t+="\t";let a=null!=e.hasOwnProperty,l=null;for(l in e)a&&!e.hasOwnProperty(l)||"prototype"!=l&&"__class__"!=l&&"__super__"!=l&&"__interfaces__"!=l&&"__properties__"!=l&&(2!=s.length&&(s+=", \n"),s+=t+l+" : "+L.__string_rec(e[l],t));return s+="\n"+(t=t.substring(1))+"}",s;case"string":return e;default:return String(e)}}static __interfLoop(e,t){for(;;){if(null==e)return !1;if(e==t)return !0;let i=e.__interfaces__;if(null!=i&&(null==e.__super__||e.__super__.__interfaces__!=i)){let e=0,s=i.length;for(;e<s;){let s=i[e++];if(s==t||L.__interfLoop(s,t))return !0}}e=e.__super__;}}static __instanceof(e,t){if(null==t)return !1;switch(t){case Array:return e instanceof Array;case I:return "boolean"==typeof e;case x:return null!=e;case C:return "number"==typeof e;case R:return "number"==typeof e&&(0|e)===e;case String:return "string"==typeof e;default:if(null==e)return !1;if("function"==typeof t){if(L.__downcastCheck(e,t))return !0}else if("object"==typeof t&&L.__isNativeObj(t)&&e instanceof t)return !0;return t==D&&null!=e.__name__||t==H&&null!=e.__ename__}}static __downcastCheck(e,t){return e instanceof t||!!t.__isInterface__&&L.__interfLoop(L.getClass(e),t)}static __cast(e,t){if(null==e||L.__instanceof(e,t))return e;throw E.thrown("Cannot cast "+a.string(e)+" to "+a.string(t))}static __nativeClassName(e){let t=L.__toStr.call(e).slice(8,-1);return "Object"==t||"Function"==t||"Math"==t||"JSON"==t?null:t}static __isNativeObj(e){return null!=L.__nativeClassName(e)}static __resolveNativeClass(e){return t[e]}}function A(e,i){return null==i?null:(null==i.__id__&&(i.__id__=t.$haxeUID++),null==e.hx__closures__?e.hx__closures__={}:s=e.hx__closures__[i.__id__],null==s&&(s=i.bind(e),e.hx__closures__[i.__id__]=s),s);var s;}L.__name__="js.Boot",t.$haxeUID|=0,Object.defineProperty(String.prototype,"__class__",{value:String,enumerable:!1,writable:!0}),String.__name__="String",Array.__name__="Array",Date.prototype.__class__=Date,Date.__name__="Date";var R={},x={},C=Number,I=Boolean,D={},H={};L.__toStr={}.toString,S.instances=new P,S.__plugfaces__="ICanPlay,INoPlayerPlugin,IVideoPlayer";}(exports,window);
// CUSTOM HEADER
// For proper exporting Hls lib into modular and non-modular(old) player.
var globalThis$1 = exports || {};
// CUSTOM HEADER END

!function e(t){var r,i;r=this,i=function(){function r(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,i=Array(t);r<t;r++)i[r]=e[r];return i}function i(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,g(i.key),i);}}function n(e,t,r){return t&&i(e.prototype,t),r&&i(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function a(e,t){var i="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(i)return (i=i.call(e)).next.bind(i);if(Array.isArray(e)||(i=function(e,t){if(e){if("string"==typeof e)return r(e,t);var i={}.toString.call(e).slice(8,-1);return "Object"===i&&e.constructor&&(i=e.constructor.name),"Map"===i||"Set"===i?Array.from(e):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?r(e,t):void 0}}(e))||t){i&&(e=i);var n=0;return function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function s(e,t,r){return (t=g(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function o(){return o=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var i in r)({}).hasOwnProperty.call(r,i)&&(e[i]=r[i]);}return e},o.apply(null,arguments)}function l(e){return l=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},l(e)}function u(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,f(e,t);}function d(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})));}catch(e){}return (d=function(){return !!e})()}function h(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,i);}return r}function c(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?h(Object(r),!0).forEach((function(t){s(e,t,r[t]);})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):h(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t));}));}return e}function f(e,t){return f=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},f(e,t)}function g(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var i=r.call(e,t||"default");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return ("string"===t?String:Number)(e)}(e,"string");return "symbol"==typeof t?t:t+""}function v(e){var t="function"==typeof Map?new Map:void 0;return v=function(e){if(null===e||!function(e){try{return -1!==Function.toString.call(e).indexOf("[native code]")}catch(t){return "function"==typeof e}}(e))return e;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if(void 0!==t){if(t.has(e))return t.get(e);t.set(e,r);}function r(){return function(e,t,r){if(d())return Reflect.construct.apply(null,arguments);var i=[null];i.push.apply(i,t);var n=new(e.bind.apply(e,i));return r&&f(n,r.prototype),n}(e,arguments,l(this).constructor)}return r.prototype=Object.create(e.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),f(r,e)},v(e)}function m(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var p={exports:{}};!function(e,t){var r,i,n,a,s;r=/^(?=((?:[a-zA-Z0-9+\-.]+:)?))\1(?=((?:\/\/[^\/?#]*)?))\2(?=((?:(?:[^?#\/]*\/)*[^;?#\/]*)?))\3((?:;[^?#]*)?)(\?[^#]*)?(#[^]*)?$/,i=/^(?=([^\/?#]*))\1([^]*)$/,n=/(?:\/|^)\.(?=\/)/g,a=/(?:\/|^)\.\.\/(?!\.\.\/)[^\/]*(?=\/)/g,s={buildAbsoluteURL:function(e,t,r){if(r=r||{},e=e.trim(),!(t=t.trim())){if(!r.alwaysNormalize)return e;var n=s.parseURL(e);if(!n)throw new Error("Error trying to parse base URL.");return n.path=s.normalizePath(n.path),s.buildURLFromParts(n)}var a=s.parseURL(t);if(!a)throw new Error("Error trying to parse relative URL.");if(a.scheme)return r.alwaysNormalize?(a.path=s.normalizePath(a.path),s.buildURLFromParts(a)):t;var o=s.parseURL(e);if(!o)throw new Error("Error trying to parse base URL.");if(!o.netLoc&&o.path&&"/"!==o.path[0]){var l=i.exec(o.path);o.netLoc=l[1],o.path=l[2];}o.netLoc&&!o.path&&(o.path="/");var u={scheme:o.scheme,netLoc:a.netLoc,path:null,params:a.params,query:a.query,fragment:a.fragment};if(!a.netLoc&&(u.netLoc=o.netLoc,"/"!==a.path[0]))if(a.path){var d=o.path,h=d.substring(0,d.lastIndexOf("/")+1)+a.path;u.path=s.normalizePath(h);}else u.path=o.path,a.params||(u.params=o.params,a.query||(u.query=o.query));return null===u.path&&(u.path=r.alwaysNormalize?s.normalizePath(a.path):a.path),s.buildURLFromParts(u)},parseURL:function(e){var t=r.exec(e);return t?{scheme:t[1]||"",netLoc:t[2]||"",path:t[3]||"",params:t[4]||"",query:t[5]||"",fragment:t[6]||""}:null},normalizePath:function(e){for(e=e.split("").reverse().join("").replace(n,"");e.length!==(e=e.replace(a,"")).length;);return e.split("").reverse().join("")},buildURLFromParts:function(e){return e.scheme+e.netLoc+e.path+e.params+e.query+e.fragment}},e.exports=s;}(p);var y=p.exports,E=Number.isFinite||function(e){return "number"==typeof e&&isFinite(e)},T=Number.isSafeInteger||function(e){return "number"==typeof e&&Math.abs(e)<=S},S=Number.MAX_SAFE_INTEGER||9007199254740991,L=function(e){return e.MEDIA_ATTACHING="hlsMediaAttaching",e.MEDIA_ATTACHED="hlsMediaAttached",e.MEDIA_DETACHING="hlsMediaDetaching",e.MEDIA_DETACHED="hlsMediaDetached",e.MEDIA_ENDED="hlsMediaEnded",e.BUFFER_RESET="hlsBufferReset",e.BUFFER_CODECS="hlsBufferCodecs",e.BUFFER_CREATED="hlsBufferCreated",e.BUFFER_APPENDING="hlsBufferAppending",e.BUFFER_APPENDED="hlsBufferAppended",e.BUFFER_EOS="hlsBufferEos",e.BUFFER_FLUSHING="hlsBufferFlushing",e.BUFFER_FLUSHED="hlsBufferFlushed",e.MANIFEST_LOADING="hlsManifestLoading",e.MANIFEST_LOADED="hlsManifestLoaded",e.MANIFEST_PARSED="hlsManifestParsed",e.LEVEL_SWITCHING="hlsLevelSwitching",e.LEVEL_SWITCHED="hlsLevelSwitched",e.LEVEL_LOADING="hlsLevelLoading",e.LEVEL_LOADED="hlsLevelLoaded",e.LEVEL_UPDATED="hlsLevelUpdated",e.LEVEL_PTS_UPDATED="hlsLevelPtsUpdated",e.LEVELS_UPDATED="hlsLevelsUpdated",e.AUDIO_TRACKS_UPDATED="hlsAudioTracksUpdated",e.AUDIO_TRACK_SWITCHING="hlsAudioTrackSwitching",e.AUDIO_TRACK_SWITCHED="hlsAudioTrackSwitched",e.AUDIO_TRACK_LOADING="hlsAudioTrackLoading",e.AUDIO_TRACK_LOADED="hlsAudioTrackLoaded",e.SUBTITLE_TRACKS_UPDATED="hlsSubtitleTracksUpdated",e.SUBTITLE_TRACKS_CLEARED="hlsSubtitleTracksCleared",e.SUBTITLE_TRACK_SWITCH="hlsSubtitleTrackSwitch",e.SUBTITLE_TRACK_LOADING="hlsSubtitleTrackLoading",e.SUBTITLE_TRACK_LOADED="hlsSubtitleTrackLoaded",e.SUBTITLE_FRAG_PROCESSED="hlsSubtitleFragProcessed",e.CUES_PARSED="hlsCuesParsed",e.NON_NATIVE_TEXT_TRACKS_FOUND="hlsNonNativeTextTracksFound",e.INIT_PTS_FOUND="hlsInitPtsFound",e.FRAG_LOADING="hlsFragLoading",e.FRAG_LOAD_EMERGENCY_ABORTED="hlsFragLoadEmergencyAborted",e.FRAG_LOADED="hlsFragLoaded",e.FRAG_DECRYPTED="hlsFragDecrypted",e.FRAG_PARSING_INIT_SEGMENT="hlsFragParsingInitSegment",e.FRAG_PARSING_USERDATA="hlsFragParsingUserdata",e.FRAG_PARSING_METADATA="hlsFragParsingMetadata",e.FRAG_PARSED="hlsFragParsed",e.FRAG_BUFFERED="hlsFragBuffered",e.FRAG_CHANGED="hlsFragChanged",e.FPS_DROP="hlsFpsDrop",e.FPS_DROP_LEVEL_CAPPING="hlsFpsDropLevelCapping",e.MAX_AUTO_LEVEL_UPDATED="hlsMaxAutoLevelUpdated",e.ERROR="hlsError",e.DESTROYING="hlsDestroying",e.KEY_LOADING="hlsKeyLoading",e.KEY_LOADED="hlsKeyLoaded",e.LIVE_BACK_BUFFER_REACHED="hlsLiveBackBufferReached",e.BACK_BUFFER_REACHED="hlsBackBufferReached",e.STEERING_MANIFEST_LOADED="hlsSteeringManifestLoaded",e}({}),A=function(e){return e.NETWORK_ERROR="networkError",e.MEDIA_ERROR="mediaError",e.KEY_SYSTEM_ERROR="keySystemError",e.MUX_ERROR="muxError",e.OTHER_ERROR="otherError",e}({}),R=function(e){return e.KEY_SYSTEM_NO_KEYS="keySystemNoKeys",e.KEY_SYSTEM_NO_ACCESS="keySystemNoAccess",e.KEY_SYSTEM_NO_SESSION="keySystemNoSession",e.KEY_SYSTEM_NO_CONFIGURED_LICENSE="keySystemNoConfiguredLicense",e.KEY_SYSTEM_LICENSE_REQUEST_FAILED="keySystemLicenseRequestFailed",e.KEY_SYSTEM_SERVER_CERTIFICATE_REQUEST_FAILED="keySystemServerCertificateRequestFailed",e.KEY_SYSTEM_SERVER_CERTIFICATE_UPDATE_FAILED="keySystemServerCertificateUpdateFailed",e.KEY_SYSTEM_SESSION_UPDATE_FAILED="keySystemSessionUpdateFailed",e.KEY_SYSTEM_STATUS_OUTPUT_RESTRICTED="keySystemStatusOutputRestricted",e.KEY_SYSTEM_STATUS_INTERNAL_ERROR="keySystemStatusInternalError",e.MANIFEST_LOAD_ERROR="manifestLoadError",e.MANIFEST_LOAD_TIMEOUT="manifestLoadTimeOut",e.MANIFEST_PARSING_ERROR="manifestParsingError",e.MANIFEST_INCOMPATIBLE_CODECS_ERROR="manifestIncompatibleCodecsError",e.LEVEL_EMPTY_ERROR="levelEmptyError",e.LEVEL_LOAD_ERROR="levelLoadError",e.LEVEL_LOAD_TIMEOUT="levelLoadTimeOut",e.LEVEL_PARSING_ERROR="levelParsingError",e.LEVEL_SWITCH_ERROR="levelSwitchError",e.AUDIO_TRACK_LOAD_ERROR="audioTrackLoadError",e.AUDIO_TRACK_LOAD_TIMEOUT="audioTrackLoadTimeOut",e.SUBTITLE_LOAD_ERROR="subtitleTrackLoadError",e.SUBTITLE_TRACK_LOAD_TIMEOUT="subtitleTrackLoadTimeOut",e.FRAG_LOAD_ERROR="fragLoadError",e.FRAG_LOAD_TIMEOUT="fragLoadTimeOut",e.FRAG_DECRYPT_ERROR="fragDecryptError",e.FRAG_PARSING_ERROR="fragParsingError",e.FRAG_GAP="fragGap",e.REMUX_ALLOC_ERROR="remuxAllocError",e.KEY_LOAD_ERROR="keyLoadError",e.KEY_LOAD_TIMEOUT="keyLoadTimeOut",e.BUFFER_ADD_CODEC_ERROR="bufferAddCodecError",e.BUFFER_INCOMPATIBLE_CODECS_ERROR="bufferIncompatibleCodecsError",e.BUFFER_APPEND_ERROR="bufferAppendError",e.BUFFER_APPENDING_ERROR="bufferAppendingError",e.BUFFER_STALLED_ERROR="bufferStalledError",e.BUFFER_FULL_ERROR="bufferFullError",e.BUFFER_SEEK_OVER_HOLE="bufferSeekOverHole",e.BUFFER_NUDGE_ON_STALL="bufferNudgeOnStall",e.INTERNAL_EXCEPTION="internalException",e.INTERNAL_ABORTED="aborted",e.ATTACH_MEDIA_ERROR="attachMediaError",e.UNKNOWN="unknown",e}({}),k=function(e,t){this.trace=void 0,this.debug=void 0,this.log=void 0,this.warn=void 0,this.info=void 0,this.error=void 0;var r="["+e+"]:";this.trace=b,this.debug=t.debug.bind(null,r),this.log=t.log.bind(null,r),this.warn=t.warn.bind(null,r),this.info=t.info.bind(null,r),this.error=t.error.bind(null,r);},b=function(){},D={trace:b,debug:b,log:b,warn:b,info:b,error:b};function w(){return o({},D)}function I(e,t,r){return t[e]?t[e].bind(t):(i=e,(n=self.console[i])?n.bind(self.console,"["+i+"] >"):b);var i,n;}var C=w();function _(e,t,r){var i=w();if("object"==typeof console&&!0===e||"object"==typeof e){var n=["debug","log","info","warn","error"];n.forEach((function(t){i[t]=I(t,e);}));try{i.log('Debug logs enabled for "'+t+'" in hls.js version '+void 0);}catch(e){return w()}n.forEach((function(t){C[t]=I(t,e);}));}else o(C,i);return i}var P=C,x=/\{\$([a-zA-Z0-9-_]+)\}/g;function F(e){return x.test(e)}function M(e,t){if(null!==e.variableList||e.hasVariableRefs){var r=e.variableList;return t.replace(x,(function(t){var i=t.substring(2,t.length-1),n=null==r?void 0:r[i];return void 0===n?(e.playlistParsingError||(e.playlistParsingError=new Error('Missing preceding EXT-X-DEFINE tag for Variable Reference: "'+i+'"')),t):n}))}return t}function O(e,t,r){var i,n,a=e.variableList;if(a||(e.variableList=a={}),"QUERYPARAM"in t){i=t.QUERYPARAM;try{var s=new self.URL(r).searchParams;if(!s.has(i))throw new Error('"'+i+'" does not match any query parameter in URI: "'+r+'"');n=s.get(i);}catch(t){e.playlistParsingError||(e.playlistParsingError=new Error("EXT-X-DEFINE QUERYPARAM: "+t.message));}}else i=t.NAME,n=t.VALUE;i in a?e.playlistParsingError||(e.playlistParsingError=new Error('EXT-X-DEFINE duplicate Variable Name declarations: "'+i+'"')):a[i]=n||"";}function N(e,t,r){var i=t.IMPORT;if(r&&i in r){var n=e.variableList;n||(e.variableList=n={}),n[i]=r[i];}else e.playlistParsingError||(e.playlistParsingError=new Error('EXT-X-DEFINE IMPORT attribute not found in Multivariant Playlist: "'+i+'"'));}var U=/^(\d+)x(\d+)$/,B=/(.+?)=(".*?"|.*?)(?:,|$)/g,G=function(){function e(t,r){"string"==typeof t&&(t=e.parseAttrList(t,r)),o(this,t);}var t=e.prototype;return t.decimalInteger=function(e){var t=parseInt(this[e],10);return t>Number.MAX_SAFE_INTEGER?1/0:t},t.hexadecimalInteger=function(e){if(this[e]){var t=(this[e]||"0x").slice(2);t=(1&t.length?"0":"")+t;for(var r=new Uint8Array(t.length/2),i=0;i<t.length/2;i++)r[i]=parseInt(t.slice(2*i,2*i+2),16);return r}return null},t.hexadecimalIntegerAsNumber=function(e){var t=parseInt(this[e],16);return t>Number.MAX_SAFE_INTEGER?1/0:t},t.decimalFloatingPoint=function(e){return parseFloat(this[e])},t.optionalFloat=function(e,t){var r=this[e];return r?parseFloat(r):t},t.enumeratedString=function(e){return this[e]},t.enumeratedStringList=function(e,t){var r=this[e];return (r?r.split(/[ ,]+/):[]).reduce((function(e,t){return e[t.toLowerCase()]=!0,e}),t)},t.bool=function(e){return "YES"===this[e]},t.decimalResolution=function(e){var t=U.exec(this[e]);if(null!==t)return {width:parseInt(t[1],10),height:parseInt(t[2],10)}},e.parseAttrList=function(e,t){var r,i={};for(B.lastIndex=0;null!==(r=B.exec(e));){var n=r[1].trim(),a=r[2],s=0===a.indexOf('"')&&a.lastIndexOf('"')===a.length-1,o=!1;if(s)a=a.slice(1,-1);else switch(n){case"IV":case"SCTE35-CMD":case"SCTE35-IN":case"SCTE35-OUT":o=!0;}if(t&&(s||o))a=M(t,a);else if(!o&&!s)switch(n){case"CLOSED-CAPTIONS":if("NONE"===a)break;case"ALLOWED-CPC":case"CLASS":case"ASSOC-LANGUAGE":case"AUDIO":case"BYTERANGE":case"CHANNELS":case"CHARACTERISTICS":case"CODECS":case"DATA-ID":case"END-DATE":case"GROUP-ID":case"ID":case"IMPORT":case"INSTREAM-ID":case"KEYFORMAT":case"KEYFORMATVERSIONS":case"LANGUAGE":case"NAME":case"PATHWAY-ID":case"QUERYPARAM":case"RECENTLY-REMOVED-DATERANGES":case"SERVER-URI":case"STABLE-RENDITION-ID":case"STABLE-VARIANT-ID":case"START-DATE":case"SUBTITLES":case"SUPPLEMENTAL-CODECS":case"URI":case"VALUE":case"VIDEO":case"X-ASSET-LIST":case"X-ASSET-URI":P.warn(e+": attribute "+n+" is missing quotes");}i[n]=a;}return i},n(e,[{key:"clientAttrs",get:function(){return Object.keys(this).filter((function(e){return "X-"===e.substring(0,2)}))}}])}();function K(e){return "SCTE35-OUT"===e||"SCTE35-IN"===e||"SCTE35-CMD"===e}var H=function(){return n((function(e,t,r){var i;if(void 0===r&&(r=0),this.attr=void 0,this.tagAnchor=void 0,this.tagOrder=void 0,this._startDate=void 0,this._endDate=void 0,this._cue=void 0,this._badValueForSameId=void 0,this.tagAnchor=(null==t?void 0:t.tagAnchor)||null,this.tagOrder=null!=(i=null==t?void 0:t.tagOrder)?i:r,t){var n=t.attr;for(var a in n)if(Object.prototype.hasOwnProperty.call(e,a)&&e[a]!==n[a]){P.warn('DATERANGE tag attribute: "'+a+'" does not match for tags with ID: "'+e.ID+'"'),this._badValueForSameId=a;break}e=o(new G({}),n,e);}if(this.attr=e,this._startDate=t?t.startDate:new Date(e["START-DATE"]),"END-DATE"in this.attr){var s=(null==t?void 0:t.endDate)||new Date(this.attr["END-DATE"]);E(s.getTime())&&(this._endDate=s);}}),[{key:"id",get:function(){return this.attr.ID}},{key:"class",get:function(){return this.attr.CLASS}},{key:"cue",get:function(){var e=this._cue;return void 0===e?this._cue=this.attr.enumeratedStringList(this.attr.CUE?"CUE":"X-CUE",{pre:!1,post:!1,once:!1}):e}},{key:"startTime",get:function(){var e=this.tagAnchor;return null===e||null===e.programDateTime?(P.warn('Expected tagAnchor Fragment with PDT set for DateRange "'+this.id+'": '+e),NaN):e.start+(this.startDate.getTime()-e.programDateTime)/1e3}},{key:"startDate",get:function(){return this._startDate}},{key:"endDate",get:function(){if(this._endDate)return this._endDate;var e=this.duration;return null!==e?new Date(this._startDate.getTime()+1e3*e):null}},{key:"duration",get:function(){if("DURATION"in this.attr){var e=this.attr.decimalFloatingPoint("DURATION");if(E(e))return e}else if(this._endDate)return (this._endDate.getTime()-this._startDate.getTime())/1e3;return null}},{key:"plannedDuration",get:function(){return "PLANNED-DURATION"in this.attr?this.attr.decimalFloatingPoint("PLANNED-DURATION"):null}},{key:"endOnNext",get:function(){return this.attr.bool("END-ON-NEXT")}},{key:"isInterstitial",get:function(){return "com.apple.hls.interstitial"===this.class}},{key:"isValid",get:function(){return !!this.id&&!this._badValueForSameId&&E(this.startDate.getTime())&&(null===this.duration||this.duration>=0)&&(!this.endOnNext||!!this.class)&&(!this.attr.CUE||!this.cue.pre&&!this.cue.post||this.cue.pre!==this.cue.post)&&(!this.isInterstitial||"X-ASSET-URI"in this.attr||"X-ASSET-LIST"in this.attr)}}])}(),V=function(){this.aborted=!1,this.loaded=0,this.retry=0,this.total=0,this.chunkCount=0,this.bwEstimate=0,this.loading={start:0,first:0,end:0},this.parsing={start:0,end:0},this.buffering={start:0,first:0,end:0};},Y="audio",W="video",j="audiovideo",q=function(){function e(e){var t;this._byteRange=null,this._url=null,this.baseurl=void 0,this.relurl=void 0,this.elementaryStreams=((t={})[Y]=null,t[W]=null,t[j]=null,t),this.baseurl=e;}return e.prototype.setByteRange=function(e,t){var r,i=e.split("@",2);r=1===i.length?(null==t?void 0:t.byteRangeEndOffset)||0:parseInt(i[1]),this._byteRange=[r,parseInt(i[0])+r];},n(e,[{key:"byteRange",get:function(){return this._byteRange?this._byteRange:[]}},{key:"byteRangeStartOffset",get:function(){return this.byteRange[0]}},{key:"byteRangeEndOffset",get:function(){return this.byteRange[1]}},{key:"url",get:function(){return !this._url&&this.baseurl&&this.relurl&&(this._url=y.buildAbsoluteURL(this.baseurl,this.relurl,{alwaysNormalize:!0})),this._url||""},set:function(e){this._url=e;}}])}(),X=function(e){function t(t,r){var i;return (i=e.call(this,r)||this)._decryptdata=null,i.rawProgramDateTime=null,i.programDateTime=null,i.tagList=[],i.duration=0,i.sn=0,i.levelkeys=void 0,i.type=void 0,i.loader=null,i.keyLoader=null,i.level=-1,i.cc=0,i.startPTS=void 0,i.endPTS=void 0,i.startDTS=void 0,i.endDTS=void 0,i.start=0,i.deltaPTS=void 0,i.maxStartPTS=void 0,i.minEndPTS=void 0,i.stats=new V,i.data=void 0,i.bitrateTest=!1,i.title=null,i.initSegment=null,i.endList=void 0,i.gap=void 0,i.urlId=0,i.type=t,i}u(t,e);var r=t.prototype;return r.setKeyFormat=function(e){if(this.levelkeys){var t=this.levelkeys[e];t&&!this._decryptdata&&(this._decryptdata=t.getDecryptData(this.sn));}},r.abortRequests=function(){var e,t;null==(e=this.loader)||e.abort(),null==(t=this.keyLoader)||t.abort();},r.setElementaryStreamInfo=function(e,t,r,i,n,a){void 0===a&&(a=!1);var s=this.elementaryStreams,o=s[e];o?(o.startPTS=Math.min(o.startPTS,t),o.endPTS=Math.max(o.endPTS,r),o.startDTS=Math.min(o.startDTS,i),o.endDTS=Math.max(o.endDTS,n)):s[e]={startPTS:t,endPTS:r,startDTS:i,endDTS:n,partial:a};},r.clearElementaryStreamInfo=function(){var e=this.elementaryStreams;e[Y]=null,e[W]=null,e[j]=null;},n(t,[{key:"decryptdata",get:function(){if(!this.levelkeys&&!this._decryptdata)return null;if(!this._decryptdata&&this.levelkeys&&!this.levelkeys.NONE){var e=this.levelkeys.identity;if(e)this._decryptdata=e.getDecryptData(this.sn);else {var t=Object.keys(this.levelkeys);if(1===t.length)return this._decryptdata=this.levelkeys[t[0]].getDecryptData(this.sn)}}return this._decryptdata}},{key:"end",get:function(){return this.start+this.duration}},{key:"endProgramDateTime",get:function(){if(null===this.programDateTime)return null;if(!E(this.programDateTime))return null;var e=E(this.duration)?this.duration:0;return this.programDateTime+1e3*e}},{key:"encrypted",get:function(){var e;if(null!=(e=this._decryptdata)&&e.encrypted)return !0;if(this.levelkeys){var t=Object.keys(this.levelkeys),r=t.length;if(r>1||1===r&&this.levelkeys[t[0]].encrypted)return !0}return !1}}])}(q),z=function(e){function t(t,r,i,n,a){var s;(s=e.call(this,i)||this).fragOffset=0,s.duration=0,s.gap=!1,s.independent=!1,s.relurl=void 0,s.fragment=void 0,s.index=void 0,s.stats=new V,s.duration=t.decimalFloatingPoint("DURATION"),s.gap=t.bool("GAP"),s.independent=t.bool("INDEPENDENT"),s.relurl=t.enumeratedString("URI"),s.fragment=r,s.index=n;var o=t.enumeratedString("BYTERANGE");return o&&s.setByteRange(o,a),a&&(s.fragOffset=a.fragOffset+a.duration),s}return u(t,e),n(t,[{key:"start",get:function(){return this.fragment.start+this.fragOffset}},{key:"end",get:function(){return this.start+this.duration}},{key:"loaded",get:function(){var e=this.elementaryStreams;return !!(e.audio||e.video||e.audiovideo)}}])}(q),Q=function(){function e(e){this.PTSKnown=!1,this.alignedSliding=!1,this.averagetargetduration=void 0,this.endCC=0,this.endSN=0,this.fragments=void 0,this.fragmentHint=void 0,this.partList=null,this.dateRanges=void 0,this.dateRangeTagCount=0,this.live=!0,this.ageHeader=0,this.advancedDateTime=void 0,this.updated=!0,this.advanced=!0,this.availabilityDelay=void 0,this.misses=0,this.startCC=0,this.startSN=0,this.startTimeOffset=null,this.targetduration=0,this.totalduration=0,this.type=null,this.url=void 0,this.m3u8="",this.version=null,this.canBlockReload=!1,this.canSkipUntil=0,this.canSkipDateRanges=!1,this.skippedSegments=0,this.recentlyRemovedDateranges=void 0,this.partHoldBack=0,this.holdBack=0,this.partTarget=0,this.preloadHint=void 0,this.renditionReports=void 0,this.tuneInGoal=0,this.deltaUpdateFailed=void 0,this.driftStartTime=0,this.driftEndTime=0,this.driftStart=0,this.driftEnd=0,this.encryptedFragments=void 0,this.playlistParsingError=null,this.variableList=null,this.hasVariableRefs=!1,this.fragments=[],this.encryptedFragments=[],this.dateRanges={},this.url=e;}return e.prototype.reloaded=function(e){if(!e)return this.advanced=!0,void(this.updated=!0);var t=this.lastPartSn-e.lastPartSn,r=this.lastPartIndex-e.lastPartIndex;this.updated=this.endSN!==e.endSN||!!r||!!t||!this.live,this.advanced=this.endSN>e.endSN||t>0||0===t&&r>0,this.updated||this.advanced?this.misses=Math.floor(.6*e.misses):this.misses=e.misses+1,this.availabilityDelay=e.availabilityDelay;},n(e,[{key:"hasProgramDateTime",get:function(){return !!this.fragments.length&&E(this.fragments[this.fragments.length-1].programDateTime)}},{key:"levelTargetDuration",get:function(){return this.averagetargetduration||this.targetduration||10}},{key:"drift",get:function(){var e=this.driftEndTime-this.driftStartTime;return e>0?1e3*(this.driftEnd-this.driftStart)/e:1}},{key:"edge",get:function(){return this.partEnd||this.fragmentEnd}},{key:"partEnd",get:function(){var e;return null!=(e=this.partList)&&e.length?this.partList[this.partList.length-1].end:this.fragmentEnd}},{key:"fragmentEnd",get:function(){var e;return null!=(e=this.fragments)&&e.length?this.fragments[this.fragments.length-1].end:0}},{key:"age",get:function(){return this.advancedDateTime?Math.max(Date.now()-this.advancedDateTime,0)/1e3:0}},{key:"lastPartIndex",get:function(){var e;return null!=(e=this.partList)&&e.length?this.partList[this.partList.length-1].index:-1}},{key:"lastPartSn",get:function(){var e;return null!=(e=this.partList)&&e.length?this.partList[this.partList.length-1].fragment.sn:this.endSN}}])}();function J(e){return Uint8Array.from(atob(e),(function(e){return e.charCodeAt(0)}))}function $(e){return Uint8Array.from(unescape(encodeURIComponent(e)),(function(e){return e.charCodeAt(0)}))}function Z(e){var t,r,i=e.split(":"),n=null;if("data"===i[0]&&2===i.length){var a=i[1].split(";"),s=a[a.length-1].split(",");if(2===s.length){var o="base64"===s[0],l=s[1];o?(a.splice(-1,1),n=J(l)):(t=$(l).subarray(0,16),(r=new Uint8Array(16)).set(t,16-t.length),n=r);}}return n}var ee=0,te=1;function re(e){return "AES-128"===e||"AES-256"===e||"AES-256-CTR"===e}function ie(e){switch(e){case"AES-128":case"AES-256":return ee;case"AES-256-CTR":return te;default:throw new Error("invalid full segment method "+e)}}var ne="undefined"!=typeof self?self:void 0,ae={CLEARKEY:"org.w3.clearkey",FAIRPLAY:"com.apple.fps",PLAYREADY:"com.microsoft.playready",WIDEVINE:"com.widevine.alpha"},se="org.w3.clearkey",oe="com.apple.streamingkeydelivery",le="com.microsoft.playready",ue="urn:uuid:edef8ba9-79d6-4ace-a3c8-27dcd51d21ed";function de(e){switch(e){case oe:return ae.FAIRPLAY;case le:return ae.PLAYREADY;case ue:return ae.WIDEVINE;case se:return ae.CLEARKEY}}var he="edef8ba979d64acea3c827dcd51d21ed";function ce(e){switch(e){case ae.FAIRPLAY:return oe;case ae.PLAYREADY:return le;case ae.WIDEVINE:return ue;case ae.CLEARKEY:return se}}function fe(e){var t=e.drmSystems,r=e.widevineLicenseUrl,i=t?[ae.FAIRPLAY,ae.WIDEVINE,ae.PLAYREADY,ae.CLEARKEY].filter((function(e){return !!t[e]})):[];return !i[ae.WIDEVINE]&&r&&i.push(ae.WIDEVINE),i}var ge,ve=null!=ne&&null!=(ge=ne.navigator)&&ge.requestMediaKeySystemAccess?self.navigator.requestMediaKeySystemAccess.bind(self.navigator):null;function me(e,t,r){return Uint8Array.prototype.slice?e.slice(t,r):new Uint8Array(Array.prototype.slice.call(e,t,r))}function pe(e,t){if(void 0===t&&(t=!1),"undefined"!=typeof TextDecoder){var r=new TextDecoder("utf-8").decode(e);if(t){var i=r.indexOf("\0");return -1!==i?r.substring(0,i):r}return r.replace(/\0/g,"")}for(var n,a,s,o=e.length,l="",u=0;u<o;){if(0===(n=e[u++])&&t)return l;if(0!==n&&3!==n)switch(n>>4){case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:l+=String.fromCharCode(n);break;case 12:case 13:a=e[u++],l+=String.fromCharCode((31&n)<<6|63&a);break;case 14:a=e[u++],s=e[u++],l+=String.fromCharCode((15&n)<<12|(63&a)<<6|(63&s)<<0);}}return l}var ye=function(e){for(var t="",r=0;r<e.length;r++){var i=e[r].toString(16);i.length<2&&(i="0"+i),t+=i;}return t},Ee=Math.pow(2,32)-1,Te=[].push,Se={video:1,audio:2,id3:3,text:4};function Le(e){return String.fromCharCode.apply(null,e)}function Ae(e,t){var r=e[t]<<8|e[t+1];return r<0?65536+r:r}function Re(e,t){var r=be(e,t);return r<0?4294967296+r:r}function ke(e,t){var r=Re(e,t);return r*=Math.pow(2,32),r+=Re(e,t+4)}function be(e,t){return e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3]}function De(e,t,r){e[t]=r>>24,e[t+1]=r>>16&255,e[t+2]=r>>8&255,e[t+3]=255&r;}function we(e,t){var r=[];if(!t.length)return r;for(var i=e.byteLength,n=0;n<i;){var a=Re(e,n),s=a>1?n+a:i;if(Le(e.subarray(n+4,n+8))===t[0])if(1===t.length)r.push(e.subarray(n+8,s));else {var o=we(e.subarray(n+8,s),t.slice(1));o.length&&Te.apply(r,o);}n=s;}return r}function Ie(e){var t=[],r=e[0],i=8,n=Re(e,i);i+=4;var a=0,s=0;0===r?(a=Re(e,i),s=Re(e,i+4),i+=8):(a=ke(e,i),s=ke(e,i+8),i+=16),i+=2;var o=e.length+s,l=Ae(e,i);i+=2;for(var u=0;u<l;u++){var d=i,h=Re(e,d);d+=4;var c=2147483647&h;if(1==(2147483648&h)>>>31)return P.warn("SIDX has hierarchical references (not supported)"),null;var f=Re(e,d);d+=4,t.push({referenceSize:c,subsegmentDuration:f,info:{duration:f/n,start:o,end:o+c-1}}),o+=c,i=d+=4;}return {earliestPresentationTime:a,timescale:n,version:r,referencesCount:l,references:t}}function Ce(e){for(var t=[],r=we(e,["moov","trak"]),i=0;i<r.length;i++){var n=r[i],a=we(n,["tkhd"])[0];if(a){var s=a[0],o=Re(a,0===s?12:20),l=we(n,["mdia","mdhd"])[0];if(l){var u=Re(l,0===(s=l[0])?12:20),d=we(n,["mdia","hdlr"])[0];if(d){var h=Le(d.subarray(8,12)),f={soun:Y,vide:W}[h];if(f){var g=_e(we(n,["mdia","minf","stbl","stsd"])[0]);t[o]={timescale:u,type:f},t[f]=c({timescale:u,id:o},g);}}}}}return we(e,["moov","mvex","trex"]).forEach((function(e){var r=Re(e,4),i=t[r];i&&(i.default={duration:Re(e,12),flags:Re(e,20)});})),t}function _e(e){var t=e.subarray(8),r=t.subarray(86),i=Le(t.subarray(4,8)),n=i,a="enca"===i||"encv"===i;if(a){var s=we(t,[i])[0];we(s.subarray("enca"===i?28:78),["sinf"]).forEach((function(e){var t=we(e,["schm"])[0];if(t){var r=Le(t.subarray(4,8));if("cbcs"===r||"cenc"===r){var i=we(e,["frma"])[0];i&&(n=Le(i));}}}));}switch(n){case"avc1":case"avc2":case"avc3":case"avc4":var o=we(r,["avcC"])[0];n+="."+xe(o[1])+xe(o[2])+xe(o[3]);break;case"mp4a":var l=we(t,[i])[0],u=we(l.subarray(28),["esds"])[0];if(u&&u.length>7){var d=4;if(3!==u[d++])break;d=Pe(u,d),d+=2;var h=u[d++];if(128&h&&(d+=2),64&h&&(d+=u[d++]),4!==u[d++])break;d=Pe(u,d);var c=u[d++];if(64!==c)break;if(n+="."+xe(c),d+=12,5!==u[d++])break;d=Pe(u,d);var f=u[d++],g=(248&f)>>3;31===g&&(g+=1+((7&f)<<3)+((224&u[d])>>5)),n+="."+g;}break;case"hvc1":case"hev1":var v=we(r,["hvcC"])[0],m=v[1],p=["","A","B","C"][m>>6],y=31&m,E=Re(v,2),T=(32&m)>>5?"H":"L",S=v[12],L=v.subarray(6,12);n+="."+p+y,n+="."+E.toString(16).toUpperCase(),n+="."+T+S;for(var A="",R=L.length;R--;){var k=L[R];(k||A)&&(A="."+k.toString(16).toUpperCase()+A);}n+=A;break;case"dvh1":case"dvhe":var b=we(r,["dvcC"])[0],D=b[2]>>1&127,w=b[2]<<5&32|b[3]>>3&31;n+="."+Fe(D)+"."+Fe(w);break;case"vp09":var I=we(r,["vpcC"])[0],C=I[4],_=I[5],P=I[6]>>4&15;n+="."+Fe(C)+"."+Fe(_)+"."+Fe(P);break;case"av01":var x=we(r,["av1C"])[0],F=x[1]>>>5,M=31&x[1],O=x[2]>>>7?"H":"M",N=(64&x[2])>>6,U=(32&x[2])>>5,B=2===F&&N?U?12:10:N?10:8,G=(16&x[2])>>4,K=(8&x[2])>>3,H=(4&x[2])>>2,V=3&x[2];n+="."+F+"."+Fe(M)+O+"."+Fe(B)+"."+G+"."+K+H+V+"."+Fe(1)+"."+Fe(1)+"."+Fe(1)+".0";}return {codec:n,encrypted:a}}function Pe(e,t){for(var r=t+5;128&e[t++]&&t<r;);return t}function xe(e){return ("0"+e.toString(16).toUpperCase()).slice(-2)}function Fe(e){return (e<10?"0":"")+e}function Me(e){var t=we(e,["schm"])[0];if(t){var r=Le(t.subarray(4,8));if("cbcs"===r||"cenc"===r)return we(e,["schi","tenc"])[0]}return P.error("[eme] missing 'schm' box"),null}function Oe(e){var t=Re(e,0),r=8;1&t&&(r+=4),4&t&&(r+=4);for(var i=0,n=Re(e,4),a=0;a<n;a++)256&t&&(i+=Re(e,r),r+=4),512&t&&(r+=4),1024&t&&(r+=4),2048&t&&(r+=4);return i}function Ne(e,t){var r=new Uint8Array(e.length+t.length);return r.set(e),r.set(t,e.length),r}function Ue(e,t){var r=[],i=t.samples,n=t.timescale,a=t.id,s=!1;return we(i,["moof"]).map((function(o){var l=o.byteOffset-8;we(o,["traf"]).map((function(o){var u=we(o,["tfdt"]).map((function(e){var t=e[0],r=Re(e,4);return 1===t&&(r*=Math.pow(2,32),r+=Re(e,8)),r/n}))[0];return void 0!==u&&(e=u),we(o,["tfhd"]).map((function(u){var d=Re(u,4),h=16777215&Re(u,0),c=0,f=0!=(16&h),g=0,v=0!=(32&h),m=8;d===a&&(0!=(1&h)&&(m+=8),0!=(2&h)&&(m+=4),0!=(8&h)&&(c=Re(u,m),m+=4),f&&(g=Re(u,m),m+=4),v&&(m+=4),"video"===t.type&&(s=function(e){if(!e)return !1;var t=e.indexOf("."),r=t<0?e:e.substring(0,t);return "hvc1"===r||"hev1"===r||"dvh1"===r||"dvhe"===r}(t.codec)),we(o,["trun"]).map((function(a){var o=a[0],u=16777215&Re(a,0),d=0!=(1&u),h=0,f=0!=(4&u),v=0!=(256&u),m=0,p=0!=(512&u),y=0,E=0!=(1024&u),T=0!=(2048&u),S=0,L=Re(a,4),A=8;d&&(h=Re(a,A),A+=4),f&&(A+=4);for(var R=h+l,k=0;k<L;k++){if(v?(m=Re(a,A),A+=4):m=c,p?(y=Re(a,A),A+=4):y=g,E&&(A+=4),T&&(S=0===o?Re(a,A):be(a,A),A+=4),t.type===W)for(var b=0;b<y;){var D=Re(i,R);Be(s,i[R+=4])&&Ge(i.subarray(R,R+D),s?2:1,e+S/n,r),R+=D,b+=D+4;}e+=m/n;}})));}))}));})),r}function Be(e,t){if(e){var r=t>>1&63;return 39===r||40===r}return 6==(31&t)}function Ge(e,t,r,i){var n=Ke(e),a=0;a+=t;for(var s=0,o=0,l=0;a<n.length;){s=0;do{if(a>=n.length)break;s+=l=n[a++];}while(255===l);o=0;do{if(a>=n.length)break;o+=l=n[a++];}while(255===l);var u=n.length-a,d=a;if(o<u)a+=o;else if(o>u){P.error("Malformed SEI payload. "+o+" is too small, only "+u+" bytes left to parse.");break}if(4===s){if(181===n[d++]){var h=Ae(n,d);if(d+=2,49===h){var c=Re(n,d);if(d+=4,1195456820===c){var f=n[d++];if(3===f){var g=n[d++],v=64&g,m=v?2+3*(31&g):0,p=new Uint8Array(m);if(v){p[0]=g;for(var y=1;y<m;y++)p[y]=n[d++];}i.push({type:f,payloadType:s,pts:r,bytes:p});}}}}}else if(5===s&&o>16){for(var E=[],T=0;T<16;T++){var S=n[d++].toString(16);E.push(1==S.length?"0"+S:S),3!==T&&5!==T&&7!==T&&9!==T||E.push("-");}for(var L=o-16,A=new Uint8Array(L),R=0;R<L;R++)A[R]=n[d++];i.push({payloadType:s,pts:r,uuid:E.join(""),userData:pe(A),userDataBytes:A});}}}function Ke(e){for(var t=e.byteLength,r=[],i=1;i<t-2;)0===e[i]&&0===e[i+1]&&3===e[i+2]?(r.push(i+2),i+=2):i++;if(0===r.length)return e;var n=t-r.length,a=new Uint8Array(n),s=0;for(i=0;i<n;s++,i++)s===r[0]&&(s++,r.shift()),a[i]=e[s];return a}function He(e,t,r){if(16!==e.byteLength)throw new RangeError("Invalid system id");var i,n;i=new Uint8Array,n=new Uint8Array;var a=new Uint8Array(4);return r&&r.byteLength>0&&new DataView(a.buffer).setUint32(0,r.byteLength,!1),function(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),i=1;i<t;i++)r[i-1]=arguments[i];for(var n=r.length,a=8,s=n;s--;)a+=r[s].byteLength;var o=new Uint8Array(a);for(o[0]=a>>24&255,o[1]=a>>16&255,o[2]=a>>8&255,o[3]=255&a,o.set(e,4),s=0,a=8;s<n;s++)o.set(r[s],a),a+=r[s].byteLength;return o}([112,115,115,104],new Uint8Array([0,0,0,0]),e,n,i,a,r||new Uint8Array)}var Ve={},Ye=function(){function e(e,t,r,i,n){void 0===i&&(i=[1]),void 0===n&&(n=null),this.uri=void 0,this.method=void 0,this.keyFormat=void 0,this.keyFormatVersions=void 0,this.encrypted=void 0,this.isCommonEncryption=void 0,this.iv=null,this.key=null,this.keyId=null,this.pssh=null,this.method=e,this.uri=t,this.keyFormat=r,this.keyFormatVersions=i,this.iv=n,this.encrypted=!!e&&"NONE"!==e,this.isCommonEncryption=this.encrypted&&!re(e);}e.clearKeyUriToKeyIdMap=function(){Ve={};};var t=e.prototype;return t.isSupported=function(){if(this.method){if(re(this.method)||"NONE"===this.method)return !0;if("identity"===this.keyFormat)return "SAMPLE-AES"===this.method;switch(this.keyFormat){case oe:case ue:case le:case se:return -1!==["ISO-23001-7","SAMPLE-AES","SAMPLE-AES-CENC","SAMPLE-AES-CTR"].indexOf(this.method)}}return !1},t.getDecryptData=function(t){if(!this.encrypted||!this.uri)return null;if(re(this.method)&&this.uri&&!this.iv){"number"!=typeof t&&(P.warn('missing IV for initialization segment with method="'+this.method+'" - compliance issue'),t=0);var r=function(e){for(var t=new Uint8Array(16),r=12;r<16;r++)t[r]=e>>8*(15-r)&255;return t}(t);return new e(this.method,this.uri,"identity",this.keyFormatVersions,r)}var i=Z(this.uri);if(i)switch(this.keyFormat){case ue:this.pssh=i,i.length>=22&&(this.keyId=i.subarray(i.length-22,i.length-6));break;case le:var n=new Uint8Array([154,4,240,121,152,64,66,134,171,146,230,91,224,136,95,149]);this.pssh=He(n,0,i);var a=new Uint16Array(i.buffer,i.byteOffset,i.byteLength/2),s=String.fromCharCode.apply(null,Array.from(a)),o=s.substring(s.indexOf("<"),s.length),l=(new DOMParser).parseFromString(o,"text/xml").getElementsByTagName("KID")[0];if(l){var u=l.childNodes[0]?l.childNodes[0].nodeValue:l.getAttribute("VALUE");if(u){var d=J(u).subarray(0,16);!function(e){var t=function(e,t,r){var i=e[t];e[t]=e[r],e[r]=i;};t(e,0,3),t(e,1,2),t(e,4,5),t(e,6,7);}(d),this.keyId=d;}}break;default:var h=i.subarray(0,16);if(16!==h.length){var c=new Uint8Array(16);c.set(h,16-h.length),h=c;}this.keyId=h;}if(!this.keyId||16!==this.keyId.byteLength){var f=Ve[this.uri];if(!f){var g=Object.keys(Ve).length%Number.MAX_SAFE_INTEGER;f=new Uint8Array(16),new DataView(f.buffer,12,4).setUint32(0,g),Ve[this.uri]=f;}this.keyId=f;}return this},e}();function We(e){if(void 0===e&&(e=!0),"undefined"!=typeof self)return (e||!self.MediaSource)&&self.ManagedMediaSource||self.MediaSource||self.WebKitMediaSource}var je={audio:{a3ds:1,"ac-3":.95,"ac-4":1,alac:.9,alaw:1,dra1:1,"dts+":1,"dts-":1,dtsc:1,dtse:1,dtsh:1,"ec-3":.9,enca:1,fLaC:.9,flac:.9,FLAC:.9,g719:1,g726:1,m4ae:1,mha1:1,mha2:1,mhm1:1,mhm2:1,mlpa:1,mp4a:1,"raw ":1,Opus:1,opus:1,samr:1,sawb:1,sawp:1,sevc:1,sqcp:1,ssmv:1,twos:1,ulaw:1},video:{avc1:1,avc2:1,avc3:1,avc4:1,avcp:1,av01:.8,drac:1,dva1:1,dvav:1,dvh1:.7,dvhe:.7,encv:1,hev1:.75,hvc1:.75,mjp2:1,mp4v:1,mvc1:1,mvc2:1,mvc3:1,mvc4:1,resv:1,rv60:1,s263:1,svc1:1,svc2:1,"vc-1":1,vp08:1,vp09:.9},text:{stpp:1,wvtt:1}};function qe(e,t,r){return void 0===r&&(r=!0),!e.split(",").some((function(e){return !Xe(e,t,r)}))}function Xe(e,t,r){var i;void 0===r&&(r=!0);var n=We(r);return null!=(i=null==n?void 0:n.isTypeSupported(ze(e,t)))&&i}function ze(e,t){return t+'/mp4;codecs="'+e+'"'}function Qe(e){if(e){var t=e.substring(0,4);return je.video[t]}return 2}function Je(e){return e.split(",").reduce((function(e,t){var r=je.video[t];return r?(2*r+e)/(e?3:2):(je.audio[t]+e)/(e?2:1)}),0)}var $e={},Ze=/flac|opus|mp4a\.40\.34/i;function et(e,t){return void 0===t&&(t=!0),e.replace(Ze,(function(e){return function(e,t){if(void 0===t&&(t=!0),$e[e])return $e[e];for(var r={flac:["flac","fLaC","FLAC"],opus:["opus","Opus"],"mp4a.40.34":["mp3"]}[e],i=0;i<r.length;i++){var n;if(Xe(r[i],"audio",t))return $e[e]=r[i],r[i];if("mp3"===r[i]&&null!=(n=We(t))&&n.isTypeSupported("audio/mpeg"))return ""}return e}(e.toLowerCase(),t)}))}function tt(e,t){return e&&"mp4a"!==e?e:t?t.split(",")[0]:t}function rt(e){var t=We(e)||{isTypeSupported:function(){return !1}};return {mpeg:t.isTypeSupported("audio/mpeg"),mp3:t.isTypeSupported('audio/mp4; codecs="mp3"'),ac3:t.isTypeSupported('audio/mp4; codecs="ac-3"')}}var it=/#EXT-X-STREAM-INF:([^\r\n]*)(?:[\r\n](?:#[^\r\n]*)?)*([^\r\n]+)|#EXT-X-(SESSION-DATA|SESSION-KEY|DEFINE|CONTENT-STEERING|START):([^\r\n]*)[\r\n]+/g,nt=/#EXT-X-MEDIA:(.*)/g,at=/^#EXT(?:INF|-X-TARGETDURATION):/m,st=new RegExp([/#EXTINF:\s*(\d*(?:\.\d+)?)(?:,(.*)\s+)?/.source,/(?!#) *(\S[^\r\n]*)/.source,/#EXT-X-BYTERANGE:*(.+)/.source,/#EXT-X-PROGRAM-DATE-TIME:(.+)/.source,/#.*/.source].join("|"),"g"),ot=new RegExp([/#(EXTM3U)/.source,/#EXT-X-(DATERANGE|DEFINE|KEY|MAP|PART|PART-INF|PLAYLIST-TYPE|PRELOAD-HINT|RENDITION-REPORT|SERVER-CONTROL|SKIP|START):(.+)/.source,/#EXT-X-(BITRATE|DISCONTINUITY-SEQUENCE|MEDIA-SEQUENCE|TARGETDURATION|VERSION): *(\d+)/.source,/#EXT-X-(DISCONTINUITY|ENDLIST|GAP|INDEPENDENT-SEGMENTS)/.source,/(#)([^:]*):(.*)/.source,/(#)(.*)(?:.*)\r?\n?/.source].join("|")),lt=function(){function e(){}return e.findGroup=function(e,t){for(var r=0;r<e.length;r++){var i=e[r];if(i.id===t)return i}},e.resolve=function(e,t){return y.buildAbsoluteURL(t,e,{alwaysNormalize:!0})},e.isMediaPlaylist=function(e){return at.test(e)},e.parseMasterPlaylist=function(t,r){var i,n={contentSteering:null,levels:[],playlistParsingError:null,sessionData:null,sessionKeys:null,startTimeOffset:null,variableList:null,hasVariableRefs:F(t)},a=[];for(it.lastIndex=0;null!=(i=it.exec(t));)if(i[1]){var s,o=new G(i[1],n),l=M(n,i[2]),u={attrs:o,bitrate:o.decimalInteger("BANDWIDTH")||o.decimalInteger("AVERAGE-BANDWIDTH"),name:o.NAME,url:e.resolve(l,r)},d=o.decimalResolution("RESOLUTION");d&&(u.width=d.width,u.height=d.height),ft(o.CODECS,u),null!=(s=u.unknownCodecs)&&s.length||a.push(u),n.levels.push(u);}else if(i[3]){var h=i[3],c=i[4];switch(h){case"SESSION-DATA":var f=new G(c,n),g=f["DATA-ID"];g&&(null===n.sessionData&&(n.sessionData={}),n.sessionData[g]=f);break;case"SESSION-KEY":var v=ht(c,r,n);v.encrypted&&v.isSupported()?(null===n.sessionKeys&&(n.sessionKeys=[]),n.sessionKeys.push(v)):P.warn('[Keys] Ignoring invalid EXT-X-SESSION-KEY tag: "'+c+'"');break;case"DEFINE":O(n,new G(c,n),r);break;case"CONTENT-STEERING":var m=new G(c,n);n.contentSteering={uri:e.resolve(m["SERVER-URI"],r),pathwayId:m["PATHWAY-ID"]||"."};break;case"START":n.startTimeOffset=ct(c);}}var p=a.length>0&&a.length<n.levels.length;return n.levels=p?a:n.levels,0===n.levels.length&&(n.playlistParsingError=new Error("no levels found in manifest")),n},e.parseMasterPlaylistMedia=function(t,r,i){var n,a={},s=i.levels,o={AUDIO:s.map((function(e){return {id:e.attrs.AUDIO,audioCodec:e.audioCodec}})),SUBTITLES:s.map((function(e){return {id:e.attrs.SUBTITLES,textCodec:e.textCodec}})),"CLOSED-CAPTIONS":[]},l=0;for(nt.lastIndex=0;null!==(n=nt.exec(t));){var u=new G(n[1],i),d=u.TYPE;if(d){var h=o[d],c=a[d]||[];a[d]=c;var f=u.LANGUAGE,g=u["ASSOC-LANGUAGE"],v=u.CHANNELS,m=u.CHARACTERISTICS,p=u["INSTREAM-ID"],y={attrs:u,bitrate:0,id:l++,groupId:u["GROUP-ID"]||"",name:u.NAME||f||"",type:d,default:u.bool("DEFAULT"),autoselect:u.bool("AUTOSELECT"),forced:u.bool("FORCED"),lang:f,url:u.URI?e.resolve(u.URI,r):""};if(g&&(y.assocLang=g),v&&(y.channels=v),m&&(y.characteristics=m),p&&(y.instreamId=p),null!=h&&h.length){var E=e.findGroup(h,y.groupId)||h[0];gt(y,E,"audioCodec"),gt(y,E,"textCodec");}c.push(y);}}return a},e.parseLevelPlaylist=function(e,t,r,i,n,a){var s,l,u,d=new Q(t),h=d.fragments,c=[],f=null,g=0,v=0,m=0,p=0,y=null,T=new X(i,t),S=-1,L=!1,A=null;for(st.lastIndex=0,d.m3u8=e,d.hasVariableRefs=F(e);null!==(s=st.exec(e));){L&&(L=!1,(T=new X(i,t)).start=m,T.sn=g,T.cc=p,T.level=r,f&&(T.initSegment=f,T.rawProgramDateTime=f.rawProgramDateTime,f.rawProgramDateTime=null,A&&(T.setByteRange(A),A=null)));var R=s[1];if(R){T.duration=parseFloat(R);var k=(" "+s[2]).slice(1);T.title=k||null,T.tagList.push(k?["INF",R,k]:["INF",R]);}else if(s[3]){if(E(T.duration)){T.start=m,u&&pt(T,u,d),T.sn=g,T.level=r,T.cc=p,h.push(T);var b=(" "+s[3]).slice(1);T.relurl=M(d,b),vt(T,y,c),y=T,m+=T.duration,g++,v=0,L=!0;}}else if(s[4]){var D=(" "+s[4]).slice(1);y?T.setByteRange(D,y):T.setByteRange(D);}else if(s[5])T.rawProgramDateTime=(" "+s[5]).slice(1),T.tagList.push(["PROGRAM-DATE-TIME",T.rawProgramDateTime]),-1===S&&(S=h.length);else {if(!(s=s[0].match(ot))){P.warn("No matches on slow regex match for level playlist!");continue}for(l=1;l<s.length&&void 0===s[l];l++);var w=(" "+s[l]).slice(1),I=(" "+s[l+1]).slice(1),C=s[l+2]?(" "+s[l+2]).slice(1):"";switch(w){case"PLAYLIST-TYPE":d.type=I.toUpperCase();break;case"MEDIA-SEQUENCE":g=d.startSN=parseInt(I);break;case"SKIP":d.skippedSegments&&(d.playlistParsingError=new Error("#EXT-X-SKIP MUST NOT appear more than once in a Playlist"));var _=new G(I,d),x=_.decimalInteger("SKIPPED-SEGMENTS");if(E(x)){d.skippedSegments+=x;for(var U=x;U--;)h.push(null);g+=x;}var B=_.enumeratedString("RECENTLY-REMOVED-DATERANGES");B&&(d.recentlyRemovedDateranges=(d.recentlyRemovedDateranges||[]).concat(B.split("\t")));break;case"TARGETDURATION":d.targetduration=Math.max(parseInt(I),1);break;case"VERSION":d.version=parseInt(I);break;case"INDEPENDENT-SEGMENTS":case"EXTM3U":break;case"ENDLIST":d.live=!1;break;case"#":(I||C)&&T.tagList.push(C?[I,C]:[I]);break;case"DISCONTINUITY":p++,T.tagList.push(["DIS"]);break;case"GAP":T.gap=!0,T.tagList.push([w]);break;case"BITRATE":T.tagList.push([w,I]);break;case"DATERANGE":var K=new G(I,d),V=new H(K,d.dateRanges[K.ID],d.dateRangeTagCount);d.dateRangeTagCount++,V.isValid||d.skippedSegments?d.dateRanges[V.id]=V:P.warn('Ignoring invalid DATERANGE tag: "'+I+'"'),T.tagList.push(["EXT-X-DATERANGE",I]);break;case"DEFINE":var Y=new G(I,d);"IMPORT"in Y?N(d,Y,a):O(d,Y,t);break;case"DISCONTINUITY-SEQUENCE":p=parseInt(I);break;case"KEY":var W=ht(I,t,d);if(W.isSupported()){if("NONE"===W.method){u=void 0;break}u||(u={}),u[W.keyFormat]&&(u=o({},u)),u[W.keyFormat]=W;}else P.warn('[Keys] Ignoring invalid EXT-X-KEY tag: "'+I+'"');break;case"START":d.startTimeOffset=ct(I);break;case"MAP":var j=new G(I,d);if(T.duration){var q=new X(i,t);mt(q,j,r,u),f=q,T.initSegment=f,f.rawProgramDateTime&&!T.rawProgramDateTime&&(T.rawProgramDateTime=f.rawProgramDateTime);}else {var J=T.byteRangeEndOffset;if(J){var $=T.byteRangeStartOffset;A=J-$+"@"+$;}else A=null;mt(T,j,r,u),f=T,L=!0;}f.cc=p;break;case"SERVER-CONTROL":var Z=new G(I);d.canBlockReload=Z.bool("CAN-BLOCK-RELOAD"),d.canSkipUntil=Z.optionalFloat("CAN-SKIP-UNTIL",0),d.canSkipDateRanges=d.canSkipUntil>0&&Z.bool("CAN-SKIP-DATERANGES"),d.partHoldBack=Z.optionalFloat("PART-HOLD-BACK",0),d.holdBack=Z.optionalFloat("HOLD-BACK",0);break;case"PART-INF":var ee=new G(I);d.partTarget=ee.decimalFloatingPoint("PART-TARGET");break;case"PART":var te=d.partList;te||(te=d.partList=[]);var re=v>0?te[te.length-1]:void 0,ie=v++,ne=new G(I,d),ae=new z(ne,T,t,ie,re);te.push(ae),T.duration+=ae.duration;break;case"PRELOAD-HINT":var se=new G(I,d);d.preloadHint=se;break;case"RENDITION-REPORT":var oe=new G(I,d);d.renditionReports=d.renditionReports||[],d.renditionReports.push(oe);break;default:P.warn("line parsed but not handled: "+s);}}}y&&!y.relurl?(h.pop(),m-=y.duration,d.partList&&(d.fragmentHint=y)):d.partList&&(vt(T,y,c),T.cc=p,d.fragmentHint=T,u&&pt(T,u,d));var le=h.length,ue=h[0],de=h[le-1];if((m+=d.skippedSegments*d.targetduration)>0&&le&&de){d.averagetargetduration=m/le;var he=de.sn;d.endSN="initSegment"!==he?he:0,d.live||(de.endList=!0),ue&&(d.startCC=ue.cc),S>0&&(function(e,t){for(var r=e[t],i=t;i--;){var n=e[i];if(!n)return;n.programDateTime=r.programDateTime-1e3*n.duration,r=n;}}(h,S),ue&&c.unshift(ue));}else d.endSN=0,d.startCC=0;return d.fragmentHint&&(m+=d.fragmentHint.duration),d.totalduration=m,c.length&&d.dateRangeTagCount&&ue&&ut(c,d),d.endCC=p,d},e}();function ut(e,t){for(var r=e.length,i=e[r-1],n=t.live?1/0:t.totalduration,a=Object.keys(t.dateRanges),s=a.length;s--;){var o=t.dateRanges[a[s]],l=o.startDate.getTime();o.tagAnchor=i;for(var u=r;u--;){var d=dt(t,l,e,u,n);if(-1!==d){o.tagAnchor=t.fragments[d];break}}}}function dt(e,t,r,i,n){var a=r[i];if(a){var s,o=((null==(s=r[i+1])?void 0:s.start)||n)-a.start,l=a.programDateTime;if((t>=l||0===i)&&t<=l+1e3*o){var u=r[i].sn-e.startSN,d=e.fragments;if(d.length>r.length)for(var h=(r[i+1]||d[d.length-1]).sn-e.startSN;h>u;h--){var c=d[h].programDateTime;if(t>=c&&t<c+1e3*d[h].duration)return h}return u}}return -1}function ht(e,t,r){var i,n,a=new G(e,r),s=null!=(i=a.METHOD)?i:"",o=a.URI,l=a.hexadecimalInteger("IV"),u=a.KEYFORMATVERSIONS,d=null!=(n=a.KEYFORMAT)?n:"identity";o&&a.IV&&!l&&P.error("Invalid IV: "+a.IV);var h=o?lt.resolve(o,t):"",c=(u||"1").split("/").map(Number).filter(Number.isFinite);return new Ye(s,h,d,c,l)}function ct(e){var t=new G(e).decimalFloatingPoint("TIME-OFFSET");return E(t)?t:null}function ft(e,t){var r=(e||"").split(/[ ,]+/).filter((function(e){return e}));["video","audio","text"].forEach((function(e){var i=r.filter((function(t){return function(e,t){var r=je[t];return !!r&&!!r[e.slice(0,4)]}(t,e)}));i.length&&(t[e+"Codec"]=i.join(","),r=r.filter((function(e){return -1===i.indexOf(e)})));})),t.unknownCodecs=r;}function gt(e,t,r){var i=t[r];i&&(e[r]=i);}function vt(e,t,r){if(e.rawProgramDateTime){if(e.programDateTime=Date.parse(e.rawProgramDateTime),!E(e.programDateTime))return e.programDateTime=null,void(e.rawProgramDateTime=null);r.push(e);}else null!=t&&t.programDateTime&&(e.programDateTime=t.endProgramDateTime);}function mt(e,t,r,i){e.relurl=t.URI,t.BYTERANGE&&e.setByteRange(t.BYTERANGE),e.level=r,e.sn="initSegment",i&&(e.levelkeys=i),e.initSegment=null;}function pt(e,t,r){e.levelkeys=t;var i=r.encryptedFragments;i.length&&i[i.length-1].levelkeys===t||!Object.keys(t).some((function(e){return t[e].isCommonEncryption}))||i.push(e);}var yt="manifest",Et="level",Tt="audioTrack",St="subtitleTrack",Lt="main",At="audio",Rt="subtitle";function kt(e){switch(e.type){case Tt:return At;case St:return Rt;default:return Lt}}function bt(e,t){var r=e.url;return void 0!==r&&0!==r.indexOf("data:")||(r=t.url),r}var Dt=function(){function e(e){this.hls=void 0,this.loaders=Object.create(null),this.variableList=null,this.hls=e,this.registerListeners();}var t=e.prototype;return t.startLoad=function(e){},t.stopLoad=function(){this.destroyInternalLoaders();},t.registerListeners=function(){var e=this.hls;e.on(L.MANIFEST_LOADING,this.onManifestLoading,this),e.on(L.LEVEL_LOADING,this.onLevelLoading,this),e.on(L.AUDIO_TRACK_LOADING,this.onAudioTrackLoading,this),e.on(L.SUBTITLE_TRACK_LOADING,this.onSubtitleTrackLoading,this);},t.unregisterListeners=function(){var e=this.hls;e.off(L.MANIFEST_LOADING,this.onManifestLoading,this),e.off(L.LEVEL_LOADING,this.onLevelLoading,this),e.off(L.AUDIO_TRACK_LOADING,this.onAudioTrackLoading,this),e.off(L.SUBTITLE_TRACK_LOADING,this.onSubtitleTrackLoading,this);},t.createInternalLoader=function(e){var t=this.hls.config,r=t.pLoader,i=t.loader,n=new(r||i)(t);return this.loaders[e.type]=n,n},t.getInternalLoader=function(e){return this.loaders[e.type]},t.resetInternalLoader=function(e){this.loaders[e]&&delete this.loaders[e];},t.destroyInternalLoaders=function(){for(var e in this.loaders){var t=this.loaders[e];t&&t.destroy(),this.resetInternalLoader(e);}},t.destroy=function(){this.variableList=null,this.unregisterListeners(),this.destroyInternalLoaders();},t.onManifestLoading=function(e,t){var r=t.url;this.variableList=null,this.load({id:null,level:0,responseType:"text",type:yt,url:r,deliveryDirectives:null});},t.onLevelLoading=function(e,t){var r=t.id,i=t.level,n=t.pathwayId,a=t.url,s=t.deliveryDirectives;this.load({id:r,level:i,pathwayId:n,responseType:"text",type:Et,url:a,deliveryDirectives:s});},t.onAudioTrackLoading=function(e,t){var r=t.id,i=t.groupId,n=t.url,a=t.deliveryDirectives;this.load({id:r,groupId:i,level:null,responseType:"text",type:Tt,url:n,deliveryDirectives:a});},t.onSubtitleTrackLoading=function(e,t){var r=t.id,i=t.groupId,n=t.url,a=t.deliveryDirectives;this.load({id:r,groupId:i,level:null,responseType:"text",type:St,url:n,deliveryDirectives:a});},t.load=function(e){var t,r,i,n=this,a=this.hls.config,s=this.getInternalLoader(e);if(s){var l=s.context;if(l&&l.url===e.url&&l.level===e.level)return void this.hls.logger.trace("[playlist-loader]: playlist request ongoing");this.hls.logger.log("[playlist-loader]: aborting previous loader for type: "+e.type),s.abort();}if(r=e.type===yt?a.manifestLoadPolicy.default:o({},a.playlistLoadPolicy.default,{timeoutRetry:null,errorRetry:null}),s=this.createInternalLoader(e),E(null==(t=e.deliveryDirectives)?void 0:t.part)&&(e.type===Et&&null!==e.level?i=this.hls.levels[e.level].details:e.type===Tt&&null!==e.id?i=this.hls.audioTracks[e.id].details:e.type===St&&null!==e.id&&(i=this.hls.subtitleTracks[e.id].details),i)){var u=i.partTarget,d=i.targetduration;if(u&&d){var h=1e3*Math.max(3*u,.8*d);r=o({},r,{maxTimeToFirstByteMs:Math.min(h,r.maxTimeToFirstByteMs),maxLoadTimeMs:Math.min(h,r.maxTimeToFirstByteMs)});}}var c=r.errorRetry||r.timeoutRetry||{},f={loadPolicy:r,timeout:r.maxLoadTimeMs,maxRetry:c.maxNumRetry||0,retryDelay:c.retryDelayMs||0,maxRetryDelay:c.maxRetryDelayMs||0},g={onSuccess:function(e,t,r,i){var a=n.getInternalLoader(r);n.resetInternalLoader(r.type);var s=e.data;0===s.indexOf("#EXTM3U")?(t.parsing.start=performance.now(),lt.isMediaPlaylist(s)?n.handleTrackOrLevelPlaylist(e,t,r,i||null,a):n.handleMasterPlaylist(e,t,r,i)):n.handleManifestParsingError(e,r,new Error("no EXTM3U delimiter"),i||null,t);},onError:function(e,t,r,i){n.handleNetworkError(t,r,!1,e,i);},onTimeout:function(e,t,r){n.handleNetworkError(t,r,!0,void 0,e);}};s.load(e,f,g);},t.handleMasterPlaylist=function(e,t,r,i){var n=this.hls,a=e.data,s=bt(e,r),o=lt.parseMasterPlaylist(a,s);if(o.playlistParsingError)this.handleManifestParsingError(e,r,o.playlistParsingError,i,t);else {var l=o.contentSteering,u=o.levels,d=o.sessionData,h=o.sessionKeys,c=o.startTimeOffset,f=o.variableList;this.variableList=f;var g=lt.parseMasterPlaylistMedia(a,s,o),v=g.AUDIO,m=void 0===v?[]:v,p=g.SUBTITLES,y=g["CLOSED-CAPTIONS"];m.length&&(m.some((function(e){return !e.url}))||!u[0].audioCodec||u[0].attrs.AUDIO||(this.hls.logger.log("[playlist-loader]: audio codec signaled in quality level, but no embedded audio track signaled, create one"),m.unshift({type:"main",name:"main",groupId:"main",default:!1,autoselect:!1,forced:!1,id:-1,attrs:new G({}),bitrate:0,url:""}))),n.trigger(L.MANIFEST_LOADED,{levels:u,audioTracks:m,subtitles:p,captions:y,contentSteering:l,url:s,stats:t,networkDetails:i,sessionData:d,sessionKeys:h,startTimeOffset:c,variableList:f});}},t.handleTrackOrLevelPlaylist=function(e,t,r,i,n){var a=this.hls,s=r.id,o=r.level,l=r.type,u=bt(e,r),d=E(o)?o:E(s)?s:0,h=kt(r),c=lt.parseLevelPlaylist(e.data,u,d,h,0,this.variableList);if(l===yt){var f={attrs:new G({}),bitrate:0,details:c,name:"",url:u};a.trigger(L.MANIFEST_LOADED,{levels:[f],audioTracks:[],url:u,stats:t,networkDetails:i,sessionData:null,sessionKeys:null,contentSteering:null,startTimeOffset:null,variableList:null});}t.parsing.end=performance.now(),r.levelDetails=c,this.handlePlaylistLoaded(c,e,t,r,i,n);},t.handleManifestParsingError=function(e,t,r,i,n){this.hls.trigger(L.ERROR,{type:A.NETWORK_ERROR,details:R.MANIFEST_PARSING_ERROR,fatal:t.type===yt,url:e.url,err:r,error:r,reason:r.message,response:e,context:t,networkDetails:i,stats:n});},t.handleNetworkError=function(e,t,r,i,n){void 0===r&&(r=!1);var a="A network "+(r?"timeout":"error"+(i?" (status "+i.code+")":""))+" occurred while loading "+e.type;e.type===Et?a+=": "+e.level+" id: "+e.id:e.type!==Tt&&e.type!==St||(a+=" id: "+e.id+' group-id: "'+e.groupId+'"');var s=new Error(a);this.hls.logger.warn("[playlist-loader]: "+a);var o=R.UNKNOWN,l=!1,u=this.getInternalLoader(e);switch(e.type){case yt:o=r?R.MANIFEST_LOAD_TIMEOUT:R.MANIFEST_LOAD_ERROR,l=!0;break;case Et:o=r?R.LEVEL_LOAD_TIMEOUT:R.LEVEL_LOAD_ERROR,l=!1;break;case Tt:o=r?R.AUDIO_TRACK_LOAD_TIMEOUT:R.AUDIO_TRACK_LOAD_ERROR,l=!1;break;case St:o=r?R.SUBTITLE_TRACK_LOAD_TIMEOUT:R.SUBTITLE_LOAD_ERROR,l=!1;}u&&this.resetInternalLoader(e.type);var d={type:A.NETWORK_ERROR,details:o,fatal:l,url:e.url,loader:u,context:e,error:s,networkDetails:t,stats:n};if(i){var h=(null==t?void 0:t.url)||e.url;d.response=c({url:h,data:void 0},i);}this.hls.trigger(L.ERROR,d);},t.handlePlaylistLoaded=function(e,t,r,i,n,a){var s=this.hls,o=i.type,l=i.level,u=i.id,d=i.groupId,h=i.deliveryDirectives,c=bt(t,i),f=kt(i),g="number"==typeof i.level&&f===Lt?l:void 0;if(e.fragments.length){e.targetduration||(e.playlistParsingError=new Error("Missing Target Duration"));var v=e.playlistParsingError;if(v)s.trigger(L.ERROR,{type:A.NETWORK_ERROR,details:R.LEVEL_PARSING_ERROR,fatal:!1,url:c,error:v,reason:v.message,response:t,context:i,level:g,parent:f,networkDetails:n,stats:r});else switch(e.live&&a&&(a.getCacheAge&&(e.ageHeader=a.getCacheAge()||0),a.getCacheAge&&!isNaN(e.ageHeader)||(e.ageHeader=0)),o){case yt:case Et:s.trigger(L.LEVEL_LOADED,{details:e,level:g||0,id:u||0,stats:r,networkDetails:n,deliveryDirectives:h});break;case Tt:s.trigger(L.AUDIO_TRACK_LOADED,{details:e,id:u||0,groupId:d||"",stats:r,networkDetails:n,deliveryDirectives:h});break;case St:s.trigger(L.SUBTITLE_TRACK_LOADED,{details:e,id:u||0,groupId:d||"",stats:r,networkDetails:n,deliveryDirectives:h});}}else {var m=new Error("No Segments found in Playlist");s.trigger(L.ERROR,{type:A.NETWORK_ERROR,details:R.LEVEL_EMPTY_ERROR,fatal:!1,url:c,error:m,reason:m.message,response:t,context:i,level:g,parent:f,networkDetails:n,stats:r});}},e}();function wt(e,t){var r;try{r=new Event("addtrack");}catch(e){(r=document.createEvent("Event")).initEvent("addtrack",!1,!1);}r.track=e,t.dispatchEvent(r);}function It(e,t){var r=e.mode;if("disabled"===r&&(e.mode="hidden"),e.cues&&!e.cues.getCueById(t.id))try{if(e.addCue(t),!e.cues.getCueById(t.id))throw new Error("addCue is failed for: "+t)}catch(r){P.debug("[texttrack-utils]: "+r);try{var i=new self.TextTrackCue(t.startTime,t.endTime,t.text);i.id=t.id,e.addCue(i);}catch(e){P.debug("[texttrack-utils]: Legacy TextTrackCue fallback failed: "+e);}}"disabled"===r&&(e.mode=r);}function Ct(e){var t=e.mode;if("disabled"===t&&(e.mode="hidden"),e.cues)for(var r=e.cues.length;r--;)e.removeCue(e.cues[r]);"disabled"===t&&(e.mode=t);}function _t(e,t,r,i){var n=e.mode;if("disabled"===n&&(e.mode="hidden"),e.cues&&e.cues.length>0)for(var a=function(e,t,r){var i=[],n=function(e,t){if(t<e[0].startTime)return 0;var r=e.length-1;if(t>e[r].endTime)return -1;for(var i=0,n=r;i<=n;){var a=Math.floor((n+i)/2);if(t<e[a].startTime)n=a-1;else {if(!(t>e[a].startTime&&i<r))return a;i=a+1;}}return e[i].startTime-t<t-e[n].startTime?i:n}(e,t);if(n>-1)for(var a=n,s=e.length;a<s;a++){var o=e[a];if(o.startTime>=t&&o.endTime<=r)i.push(o);else if(o.startTime>r)return i}return i}(e.cues,t,r),s=0;s<a.length;s++)i&&!i(a[s])||e.removeCue(a[s]);"disabled"===n&&(e.mode=n);}function Pt(e){for(var t=[],r=0;r<e.length;r++){var i=e[r];"subtitles"!==i.kind&&"captions"!==i.kind||!i.label||t.push(e[r]);}return t}var xt="org.id3",Ft="com.apple.quicktime.HLS",Mt="https://aomedia.org/emsg/ID3";function Ot(e,t,r){return void 0===t&&(t=0),void 0===r&&(r=1/0),function(e,t,r,i){var n=function(e){return e instanceof ArrayBuffer?e:e.buffer}(e),a=1;"BYTES_PER_ELEMENT"in i&&(a=i.BYTES_PER_ELEMENT);var s,o=(s=e)&&s.buffer instanceof ArrayBuffer&&void 0!==s.byteLength&&void 0!==s.byteOffset?e.byteOffset:0,l=(o+e.byteLength)/a,u=(o+t)/a,d=Math.floor(Math.max(0,Math.min(u,l))),h=Math.floor(Math.min(d+Math.max(r,0),l));return new i(n,d,h-d)}(e,t,r,Uint8Array)}function Nt(e,t){if(e<0)return -Nt(-e,t);var r=Math.pow(10,t);if(Math.abs(e*r%1-.5)<Number.EPSILON){var i=Math.floor(e*r);return (i%2==0?i:i+1)/r}return Math.round(e*r)/r}function Ut(e){var t={key:e.type,description:"",data:"",mimeType:null,pictureType:null};if(!(e.size<2))if(3===e.data[0]){var r=e.data.subarray(1).indexOf(0);if(-1!==r){var i=pe(Ot(e.data,1,r)),n=e.data[2+r],a=e.data.subarray(3+r).indexOf(0);if(-1!==a){var s,o=pe(Ot(e.data,3+r,a));return s="--\x3e"===i?pe(Ot(e.data,4+r+a)):function(e){return e instanceof ArrayBuffer?e:0==e.byteOffset&&e.byteLength==e.buffer.byteLength?e.buffer:new Uint8Array(e).buffer}(e.data.subarray(4+r+a)),t.mimeType=i,t.pictureType=n,t.description=o,t.data=s,t}}}else console.log("Ignore frame with unrecognized character encoding");}function Bt(e){return "PRIV"===e.type?function(e){if(!(e.size<2)){var t=pe(e.data,!0),r=new Uint8Array(e.data.subarray(t.length+1));return {key:e.type,info:t,data:r.buffer}}}(e):"W"===e.type[0]?function(e){if("WXXX"===e.type){if(e.size<2)return;var t=1,r=pe(e.data.subarray(t),!0);t+=r.length+1;var i=pe(e.data.subarray(t));return {key:e.type,info:r,data:i}}var n=pe(e.data);return {key:e.type,info:"",data:n}}(e):"APIC"===e.type?Ut(e):function(e){if(!(e.size<2)){if("TXXX"===e.type){var t=1,r=pe(e.data.subarray(t),!0);t+=r.length+1;var i=pe(e.data.subarray(t));return {key:e.type,info:r,data:i}}var n=pe(e.data.subarray(1));return {key:e.type,info:"",data:n}}}(e)}function Gt(e,t){var r=0;return r=(127&e[t])<<21,r|=(127&e[t+1])<<14,r|=(127&e[t+2])<<7,r|=127&e[t+3]}function Kt(e){var t=String.fromCharCode(e[0],e[1],e[2],e[3]),r=Gt(e,4);return {type:t,size:r,data:e.subarray(10,10+r)}}function Ht(e,t){return t+10<=e.length&&51===e[t]&&68===e[t+1]&&73===e[t+2]&&e[t+3]<255&&e[t+4]<255&&e[t+6]<128&&e[t+7]<128&&e[t+8]<128&&e[t+9]<128}function Vt(e,t){return t+10<=e.length&&73===e[t]&&68===e[t+1]&&51===e[t+2]&&e[t+3]<255&&e[t+4]<255&&e[t+6]<128&&e[t+7]<128&&e[t+8]<128&&e[t+9]<128}var Yt=10,Wt=10;function jt(e){for(var t=0,r=[];Vt(e,t);){var i=Gt(e,t+6);e[t+5]>>6&1&&(t+=Yt);for(var n=(t+=Yt)+i;t+Wt<n;){var a=Kt(e.subarray(t)),s=Bt(a);s&&r.push(s),t+=a.size+Yt;}Ht(e,t)&&(t+=Yt);}return r}function qt(e){return e&&"PRIV"===e.key&&"com.apple.streaming.transportStreamTimestamp"===e.info}function Xt(){if("undefined"!=typeof self)return self.VTTCue||self.TextTrackCue}function zt(e,t,r,i,n){var a=new e(t,r,"");try{a.value=i,n&&(a.type=n);}catch(s){a=new e(t,r,JSON.stringify(n?c({type:n},i):i));}return a}var Qt=function(){var e=Xt();try{e&&new e(0,Number.POSITIVE_INFINITY,"");}catch(e){return Number.MAX_VALUE}return Number.POSITIVE_INFINITY}(),Jt=function(){function e(e){this.hls=void 0,this.id3Track=null,this.media=null,this.dateRangeCuesAppended={},this.hls=e,this._registerListeners();}var t=e.prototype;return t.destroy=function(){this._unregisterListeners(),this.id3Track=null,this.media=null,this.dateRangeCuesAppended={},this.hls=null;},t._registerListeners=function(){var e=this.hls;e.on(L.MEDIA_ATTACHED,this.onMediaAttached,this),e.on(L.MEDIA_DETACHING,this.onMediaDetaching,this),e.on(L.MANIFEST_LOADING,this.onManifestLoading,this),e.on(L.FRAG_PARSING_METADATA,this.onFragParsingMetadata,this),e.on(L.BUFFER_FLUSHING,this.onBufferFlushing,this),e.on(L.LEVEL_UPDATED,this.onLevelUpdated,this),e.on(L.LEVEL_PTS_UPDATED,this.onLevelPtsUpdated,this);},t._unregisterListeners=function(){var e=this.hls;e.off(L.MEDIA_ATTACHED,this.onMediaAttached,this),e.off(L.MEDIA_DETACHING,this.onMediaDetaching,this),e.off(L.MANIFEST_LOADING,this.onManifestLoading,this),e.off(L.FRAG_PARSING_METADATA,this.onFragParsingMetadata,this),e.off(L.BUFFER_FLUSHING,this.onBufferFlushing,this),e.off(L.LEVEL_UPDATED,this.onLevelUpdated,this),e.off(L.LEVEL_PTS_UPDATED,this.onLevelPtsUpdated,this);},t.onMediaAttached=function(e,t){this.media=t.media;},t.onMediaDetaching=function(){this.id3Track&&(Ct(this.id3Track),this.id3Track=null),this.media=null,this.dateRangeCuesAppended={};},t.onManifestLoading=function(){this.dateRangeCuesAppended={};},t.createTrack=function(e){var t=this.getID3Track(e.textTracks);return t.mode="hidden",t},t.getID3Track=function(e){if(this.media){for(var t=0;t<e.length;t++){var r=e[t];if("metadata"===r.kind&&"id3"===r.label)return wt(r,this.media),r}return this.media.addTextTrack("metadata","id3")}},t.onFragParsingMetadata=function(e,t){if(this.media){var r=this.hls.config,i=r.enableEmsgMetadataCues,n=r.enableID3MetadataCues;if(i||n){var a=t.samples;this.id3Track||(this.id3Track=this.createTrack(this.media));var s=Xt();if(s)for(var o=0;o<a.length;o++){var l=a[o].type;if((l!==Mt||i)&&n){var u=jt(a[o].data);if(u){var d=a[o].pts,h=d+a[o].duration;h>Qt&&(h=Qt),h-d<=0&&(h=d+.25);for(var c=0;c<u.length;c++){var f=u[c];if(!qt(f)){this.updateId3CueEnds(d,l);var g=zt(s,d,h,f,l);g&&this.id3Track.addCue(g);}}}}}}}},t.updateId3CueEnds=function(e,t){var r,i=null==(r=this.id3Track)?void 0:r.cues;if(i)for(var n=i.length;n--;){var a=i[n];a.type===t&&a.startTime<e&&a.endTime===Qt&&(a.endTime=e);}},t.onBufferFlushing=function(e,t){var r=t.startOffset,i=t.endOffset,n=t.type,a=this.id3Track,s=this.hls;if(s){var o=s.config,l=o.enableEmsgMetadataCues,u=o.enableID3MetadataCues;a&&(l||u)&&_t(a,r,i,"audio"===n?function(e){return e.type===xt&&u}:"video"===n?function(e){return e.type===Mt&&l}:function(e){return e.type===xt&&u||e.type===Mt&&l});}},t.onLevelUpdated=function(e,t){var r=t.details;this.updateDateRangeCues(r,!0);},t.onLevelPtsUpdated=function(e,t){Math.abs(t.drift)>.01&&this.updateDateRangeCues(t.details);},t.updateDateRangeCues=function(e,t){var r=this;if(this.media&&e.hasProgramDateTime&&this.hls.config.enableDateRangeMetadataCues){var i=this.dateRangeCuesAppended,n=this.id3Track,a=e.dateRanges,s=Object.keys(a);if(n&&t)for(var o=Object.keys(i).filter((function(e){return !s.includes(e)})),l=function(){var e=o[u];Object.keys(i[e].cues).forEach((function(t){n.removeCue(i[e].cues[t]);})),delete i[e];},u=o.length;u--;)l();var d=e.fragments[e.fragments.length-1];if(0!==s.length&&E(null==d?void 0:d.programDateTime)){this.id3Track||(this.id3Track=this.createTrack(this.media));for(var h=Xt(),c=function(){var e=s[f],t=a[e],n=t.startTime,o=i[e],l=(null==o?void 0:o.cues)||{},u=(null==o?void 0:o.durationKnown)||!1,d=Qt,c=t.duration;if(t.endDate&&null!==c)d=n+c,u=!0;else if(t.endOnNext&&!u){var g=s.reduce((function(e,r){if(r!==t.id){var i=a[r];if(i.class===t.class&&i.startDate>t.startDate&&(!e||t.startDate<e.startDate))return i}return e}),null);g&&(d=g.startTime,u=!0);}for(var v,m,p=Object.keys(t.attr),y=0;y<p.length;y++){var E=p[y];if("ID"!==(m=E)&&"CLASS"!==m&&"CUE"!==m&&"START-DATE"!==m&&"DURATION"!==m&&"END-DATE"!==m&&"END-ON-NEXT"!==m){var T=l[E];if(T)u&&!o.durationKnown?T.endTime=d:Math.abs(T.startTime-n)>.01&&(T.startTime=n,T.endTime=d);else if(h){var S=t.attr[E];K(E)&&(v=S,S=Uint8Array.from(v.replace(/^0x/,"").replace(/([\da-fA-F]{2}) ?/g,"0x$1 ").replace(/ +$/,"").split(" ")).buffer);var L=zt(h,n,d,{key:E,data:S},Ft);L&&(L.id=e,r.id3Track.addCue(L),l[E]=L);}}}i[e]={cues:l,dateRange:t,durationKnown:u};},f=0;f<s.length;f++)c();}}},e}(),$t=function(){function e(e){var t=this;this.hls=void 0,this.config=void 0,this.media=null,this.levelDetails=null,this.currentTime=0,this.stallCount=0,this._latency=null,this._targetLatencyUpdated=!1,this.onTimeupdate=function(){var e=t.media,r=t.levelDetails;if(e&&r){t.currentTime=e.currentTime;var i=t.computeLatency();if(null!==i){t._latency=i;var n=t.config,a=n.lowLatencyMode,s=n.maxLiveSyncPlaybackRate;if(a&&1!==s&&r.live){var o=t.targetLatency;if(null!==o){var l=i-o;if(l<Math.min(t.maxLatency,o+r.targetduration)&&l>.05&&t.forwardBufferLength>1){var u=Math.min(2,Math.max(1,s)),d=Math.round(2/(1+Math.exp(-.75*l-t.edgeStalled))*20)/20;e.playbackRate=Math.min(u,Math.max(1,d));}else 1!==e.playbackRate&&0!==e.playbackRate&&(e.playbackRate=1);}}}}},this.hls=e,this.config=e.config,this.registerListeners();}var t=e.prototype;return t.destroy=function(){this.unregisterListeners(),this.onMediaDetaching(),this.levelDetails=null,this.hls=null;},t.registerListeners=function(){this.hls.on(L.MEDIA_ATTACHED,this.onMediaAttached,this),this.hls.on(L.MEDIA_DETACHING,this.onMediaDetaching,this),this.hls.on(L.MANIFEST_LOADING,this.onManifestLoading,this),this.hls.on(L.LEVEL_UPDATED,this.onLevelUpdated,this),this.hls.on(L.ERROR,this.onError,this);},t.unregisterListeners=function(){this.hls.off(L.MEDIA_ATTACHED,this.onMediaAttached,this),this.hls.off(L.MEDIA_DETACHING,this.onMediaDetaching,this),this.hls.off(L.MANIFEST_LOADING,this.onManifestLoading,this),this.hls.off(L.LEVEL_UPDATED,this.onLevelUpdated,this),this.hls.off(L.ERROR,this.onError,this);},t.onMediaAttached=function(e,t){this.media=t.media,this.media.addEventListener("timeupdate",this.onTimeupdate);},t.onMediaDetaching=function(){this.media&&(this.media.removeEventListener("timeupdate",this.onTimeupdate),this.media=null);},t.onManifestLoading=function(){this.levelDetails=null,this._latency=null,this.stallCount=0;},t.onLevelUpdated=function(e,t){var r=t.details;this.levelDetails=r,r.advanced&&this.onTimeupdate(),!r.live&&this.media&&this.media.removeEventListener("timeupdate",this.onTimeupdate);},t.onError=function(e,t){var r;t.details===R.BUFFER_STALLED_ERROR&&(this.stallCount++,null!=(r=this.levelDetails)&&r.live&&this.hls.logger.warn("[latency-controller]: Stall detected, adjusting target latency"));},t.estimateLiveEdge=function(){var e=this.levelDetails;return null===e?null:e.edge+e.age},t.computeLatency=function(){var e=this.estimateLiveEdge();return null===e?null:e-this.currentTime},n(e,[{key:"latency",get:function(){return this._latency||0}},{key:"maxLatency",get:function(){var e=this.config,t=this.levelDetails;return void 0!==e.liveMaxLatencyDuration?e.liveMaxLatencyDuration:t?e.liveMaxLatencyDurationCount*t.targetduration:0}},{key:"targetLatency",get:function(){var e=this.levelDetails;if(null===e)return null;var t=e.holdBack,r=e.partHoldBack,i=e.targetduration,n=this.config,a=n.liveSyncDuration,s=n.liveSyncDurationCount,o=n.lowLatencyMode,l=this.hls.userConfig,u=o&&r||t;(this._targetLatencyUpdated||l.liveSyncDuration||l.liveSyncDurationCount||0===u)&&(u=void 0!==a?a:s*i);var d=i;return u+Math.min(this.stallCount*this.config.liveSyncOnStallIncrease,d)},set:function(e){this.stallCount=0,this.config.liveSyncDuration=e,this._targetLatencyUpdated=!0;}},{key:"liveSyncPosition",get:function(){var e=this.estimateLiveEdge(),t=this.targetLatency,r=this.levelDetails;if(null===e||null===t||null===r)return null;var i=r.edge,n=e-t-this.edgeStalled,a=i-r.totalduration,s=i-(this.config.lowLatencyMode&&r.partTarget||r.targetduration);return Math.min(Math.max(a,n),s)}},{key:"drift",get:function(){var e=this.levelDetails;return null===e?1:e.drift}},{key:"edgeStalled",get:function(){var e=this.levelDetails;if(null===e)return 0;var t=3*(this.config.lowLatencyMode&&e.partTarget||e.targetduration);return Math.max(e.age-t,0)}},{key:"forwardBufferLength",get:function(){var e=this.media,t=this.levelDetails;if(!e||!t)return 0;var r=e.buffered.length;return (r?e.buffered.end(r-1):t.edge)-this.currentTime}}])}(),Zt=["NONE","TYPE-0","TYPE-1",null],er=["SDR","PQ","HLG"],tr="",rr="YES",ir="v2";function nr(e){var t=e.canSkipUntil,r=e.canSkipDateRanges,i=e.age;return t&&i<t/2?r?ir:rr:tr}var ar=function(){function e(e,t,r){this.msn=void 0,this.part=void 0,this.skip=void 0,this.msn=e,this.part=t,this.skip=r;}return e.prototype.addDirectives=function(e){var t=new self.URL(e);return void 0!==this.msn&&t.searchParams.set("_HLS_msn",this.msn.toString()),void 0!==this.part&&t.searchParams.set("_HLS_part",this.part.toString()),this.skip&&t.searchParams.set("_HLS_skip",this.skip),t.href},e}(),sr=function(){function e(e){this._attrs=void 0,this.audioCodec=void 0,this.bitrate=void 0,this.codecSet=void 0,this.url=void 0,this.frameRate=void 0,this.height=void 0,this.id=void 0,this.name=void 0,this.videoCodec=void 0,this.width=void 0,this.details=void 0,this.fragmentError=0,this.loadError=0,this.loaded=void 0,this.realBitrate=0,this.supportedPromise=void 0,this.supportedResult=void 0,this._avgBitrate=0,this._audioGroups=void 0,this._subtitleGroups=void 0,this._urlId=0,this.url=[e.url],this._attrs=[e.attrs],this.bitrate=e.bitrate,e.details&&(this.details=e.details),this.id=e.id||0,this.name=e.name,this.width=e.width||0,this.height=e.height||0,this.frameRate=e.attrs.optionalFloat("FRAME-RATE",0),this._avgBitrate=e.attrs.decimalInteger("AVERAGE-BANDWIDTH"),this.audioCodec=e.audioCodec,this.videoCodec=e.videoCodec,this.codecSet=[e.videoCodec,e.audioCodec].filter((function(e){return !!e})).map((function(e){return e.substring(0,4)})).join(","),this.addGroupId("audio",e.attrs.AUDIO),this.addGroupId("text",e.attrs.SUBTITLES);}var t=e.prototype;return t.hasAudioGroup=function(e){return or(this._audioGroups,e)},t.hasSubtitleGroup=function(e){return or(this._subtitleGroups,e)},t.addGroupId=function(e,t){if(t)if("audio"===e){var r=this._audioGroups;r||(r=this._audioGroups=[]),-1===r.indexOf(t)&&r.push(t);}else if("text"===e){var i=this._subtitleGroups;i||(i=this._subtitleGroups=[]),-1===i.indexOf(t)&&i.push(t);}},t.addFallback=function(){},n(e,[{key:"maxBitrate",get:function(){return Math.max(this.realBitrate,this.bitrate)}},{key:"averageBitrate",get:function(){return this._avgBitrate||this.realBitrate||this.bitrate}},{key:"attrs",get:function(){return this._attrs[0]}},{key:"codecs",get:function(){return this.attrs.CODECS||""}},{key:"pathwayId",get:function(){return this.attrs["PATHWAY-ID"]||"."}},{key:"videoRange",get:function(){return this.attrs["VIDEO-RANGE"]||"SDR"}},{key:"score",get:function(){return this.attrs.optionalFloat("SCORE",0)}},{key:"uri",get:function(){return this.url[0]||""}},{key:"audioGroups",get:function(){return this._audioGroups}},{key:"subtitleGroups",get:function(){return this._subtitleGroups}},{key:"urlId",get:function(){return 0},set:function(e){}},{key:"audioGroupIds",get:function(){return this.audioGroups?[this.audioGroupId]:void 0}},{key:"textGroupIds",get:function(){return this.subtitleGroups?[this.textGroupId]:void 0}},{key:"audioGroupId",get:function(){var e;return null==(e=this.audioGroups)?void 0:e[0]}},{key:"textGroupId",get:function(){var e;return null==(e=this.subtitleGroups)?void 0:e[0]}}])}();function or(e,t){return !(!t||!e)&&-1!==e.indexOf(t)}function lr(e,t){var r=t.startPTS;if(E(r)){var i,n=0;t.sn>e.sn?(n=r-e.start,i=e):(n=e.start-r,i=t),i.duration!==n&&(i.duration=n);}else t.sn>e.sn?e.cc===t.cc&&e.minEndPTS?t.start=e.start+(e.minEndPTS-e.start):t.start=e.start+e.duration:t.start=Math.max(e.start-t.duration,0);}function ur(e,t,r,i,n,a){i-r<=0&&(P.warn("Fragment should have a positive duration",t),i=r+t.duration,a=n+t.duration);var s=r,o=i,l=t.startPTS,u=t.endPTS;if(E(l)){var d=Math.abs(l-r);E(t.deltaPTS)?t.deltaPTS=Math.max(d,t.deltaPTS):t.deltaPTS=d,s=Math.max(r,l),r=Math.min(r,l),n=Math.min(n,t.startDTS),o=Math.min(i,u),i=Math.max(i,u),a=Math.max(a,t.endDTS);}var h=r-t.start;0!==t.start&&(t.start=r),t.duration=i-t.start,t.startPTS=r,t.maxStartPTS=s,t.startDTS=n,t.endPTS=i,t.minEndPTS=o,t.endDTS=a;var c,f=t.sn;if(!e||f<e.startSN||f>e.endSN)return 0;var g=f-e.startSN,v=e.fragments;for(v[g]=t,c=g;c>0;c--)lr(v[c],v[c-1]);for(c=g;c<v.length-1;c++)lr(v[c],v[c+1]);return e.fragmentHint&&lr(v[v.length-1],e.fragmentHint),e.PTSKnown=e.alignedSliding=!0,h}function dr(e,t){for(var r=null,i=e.fragments,n=i.length-1;n>=0;n--){var a=i[n].initSegment;if(a){r=a;break}}e.fragmentHint&&delete e.fragmentHint.endPTS;var s,l=0;!function(e,t,r){for(var i=t.skippedSegments,n=Math.max(e.startSN,t.startSN)-t.startSN,a=(e.fragmentHint?1:0)+(i?t.endSN:Math.min(e.endSN,t.endSN))-t.startSN,s=t.startSN-e.startSN,o=t.fragmentHint?t.fragments.concat(t.fragmentHint):t.fragments,l=e.fragmentHint?e.fragments.concat(e.fragmentHint):e.fragments,u=n;u<=a;u++){var d=l[s+u],h=o[u];i&&!h&&d&&(h=t.fragments[u]=d),d&&h&&r(d,h);}}(e,t,(function(e,i){e.relurl&&(l=e.cc-i.cc),E(e.startPTS)&&E(e.endPTS)&&(i.start=i.startPTS=e.startPTS,i.startDTS=e.startDTS,i.maxStartPTS=e.maxStartPTS,i.endPTS=e.endPTS,i.endDTS=e.endDTS,i.minEndPTS=e.minEndPTS,i.duration=e.endPTS-e.startPTS,i.duration&&(s=i),t.PTSKnown=t.alignedSliding=!0),i.elementaryStreams=e.elementaryStreams,i.loader=e.loader,i.stats=e.stats,e.initSegment&&(i.initSegment=e.initSegment,r=e.initSegment);}));var u=t.fragmentHint?t.fragments.concat(t.fragmentHint):t.fragments;if(r&&u.forEach((function(e){var t;!e||e.initSegment&&e.initSegment.relurl!==(null==(t=r)?void 0:t.relurl)||(e.initSegment=r);})),t.skippedSegments)if(t.deltaUpdateFailed=t.fragments.some((function(e){return !e})),t.deltaUpdateFailed){P.warn("[level-helper] Previous playlist missing segments skipped in delta playlist");for(var d=t.skippedSegments;d--;)t.fragments.shift();t.startSN=t.fragments[0].sn,t.startCC=t.fragments[0].cc;}else {t.canSkipDateRanges&&(t.dateRanges=function(e,t){var r=t.dateRanges,i=t.recentlyRemovedDateranges,n=o({},e);i&&i.forEach((function(e){delete n[e];}));var a=Object.keys(n).length;return a&&Object.keys(r).forEach((function(e){var t=n[e],i=new H(r[e].attr,t);i.isValid?(n[e]=i,t||(i.tagOrder+=a)):P.warn('Ignoring invalid Playlist Delta Update DATERANGE tag: "'+JSON.stringify(r[e].attr)+'"');})),n}(e.dateRanges,t));var h=e.fragments.filter((function(e){return e.rawProgramDateTime}));if(e.hasProgramDateTime&&!t.hasProgramDateTime)for(var c=1;c<u.length;c++)null===u[c].programDateTime&&vt(u[c],u[c-1],h);ut(h,t);}var f=t.fragments;if(l){P.warn("discontinuity sliding from playlist, take drift into account");for(var g=0;g<f.length;g++)f[g].cc+=l;}t.skippedSegments&&(t.startCC=t.fragments[0].cc),function(e,t,r){if(e&&t)for(var i=0,n=0,a=e.length;n<=a;n++){var s=e[n],o=t[n+i];s&&o&&s.index===o.index&&s.fragment.sn===o.fragment.sn?r(s,o):i--;}}(e.partList,t.partList,(function(e,t){t.elementaryStreams=e.elementaryStreams,t.stats=e.stats;})),s?ur(t,s,s.startPTS,s.endPTS,s.startDTS,s.endDTS):hr(e,t),f.length&&(t.totalduration=t.edge-f[0].start),t.driftStartTime=e.driftStartTime,t.driftStart=e.driftStart;var v=t.advancedDateTime;if(t.advanced&&v){var m=t.edge;t.driftStart||(t.driftStartTime=v,t.driftStart=m),t.driftEndTime=v,t.driftEnd=m;}else t.driftEndTime=e.driftEndTime,t.driftEnd=e.driftEnd,t.advancedDateTime=e.advancedDateTime;}function hr(e,t){var r=t.startSN+t.skippedSegments-e.startSN,i=e.fragments;r<0||r>=i.length||cr(t,i[r].start);}function cr(e,t){if(t){for(var r=e.fragments,i=e.skippedSegments;i<r.length;i++)r[i].start+=t;e.fragmentHint&&(e.fragmentHint.start+=t);}}function fr(e,t,r){return e?gr(e.partList,t,r):null}function gr(e,t,r){if(e)for(var i=e.length;i--;){var n=e[i];if(n.index===r&&n.fragment.sn===t)return n}return null}function vr(e){e.forEach((function(e,t){var r=e.details;null!=r&&r.fragments&&r.fragments.forEach((function(e){e.level=t;}));}));}function mr(e){switch(e.details){case R.FRAG_LOAD_TIMEOUT:case R.KEY_LOAD_TIMEOUT:case R.LEVEL_LOAD_TIMEOUT:case R.MANIFEST_LOAD_TIMEOUT:return !0}return !1}function pr(e,t){var r=mr(t);return e.default[(r?"timeout":"error")+"Retry"]}function yr(e,t){var r="linear"===e.backoff?1:Math.pow(2,t);return Math.min(r*e.retryDelayMs,e.maxRetryDelayMs)}function Er(e){return c(c({},e),{errorRetry:null,timeoutRetry:null})}function Tr(e,t,r,i){if(!e)return !1;var n=null==i?void 0:i.code,a=t<e.maxNumRetry&&(function(e){return 0===e&&!1===navigator.onLine||!!e&&(e<400||e>499)}(n)||!!r);return e.shouldRetry?e.shouldRetry(e,t,r,i,a):a}var Sr=function(e,t){for(var r=0,i=e.length-1,n=null,a=null;r<=i;){var s=t(a=e[n=(r+i)/2|0]);if(s>0)r=n+1;else {if(!(s<0))return a;i=n-1;}}return null};function Lr(e,t,r,i,n){void 0===r&&(r=0),void 0===i&&(i=0),void 0===n&&(n=.005);var a=null;if(e){a=t[1+e.sn-t[0].sn]||null;var s=e.endDTS-r;s>0&&s<15e-7&&(r+=15e-7),a&&e.level!==a.level&&a.end<=e.end&&(a=t[2+e.sn-t[0].sn]||null);}else 0===r&&0===t[0].start&&(a=t[0]);if(a&&((!e||e.level===a.level)&&0===Ar(r,i,a)||function(e,t,r){if(t&&0===t.start&&t.level<e.level&&(t.endPTS||0)>0){var i=t.tagList.reduce((function(e,t){return "INF"===t[0]&&(e+=parseFloat(t[1])),e}),r);return e.start<=i}return !1}(a,e,Math.min(n,i))))return a;var o=Sr(t,Ar.bind(null,r,i));return !o||o===e&&a?a:o}function Ar(e,t,r){if(void 0===e&&(e=0),void 0===t&&(t=0),r.start<=e&&r.start+r.duration>e)return 0;var i=Math.min(t,r.duration+(r.deltaPTS?r.deltaPTS:0));return r.start+r.duration-i<=e?1:r.start-i>e&&r.start?-1:0}function Rr(e,t,r){var i=1e3*Math.min(t,r.duration+(r.deltaPTS?r.deltaPTS:0));return (r.endProgramDateTime||0)-i>e}function kr(e,t){return Sr(e,(function(e){return e.cc<t?1:e.cc>t?-1:0}))}var br=0,Dr=2,wr=3,Ir=5,Cr=0,_r=1,Pr=2,xr=function(e){function t(t){var r;return (r=e.call(this,"error-controller",t.logger)||this).hls=void 0,r.playlistError=0,r.penalizedRenditions={},r.hls=t,r.registerListeners(),r}u(t,e);var r=t.prototype;return r.registerListeners=function(){var e=this.hls;e.on(L.ERROR,this.onError,this),e.on(L.MANIFEST_LOADING,this.onManifestLoading,this),e.on(L.LEVEL_UPDATED,this.onLevelUpdated,this);},r.unregisterListeners=function(){var e=this.hls;e&&(e.off(L.ERROR,this.onError,this),e.off(L.ERROR,this.onErrorOut,this),e.off(L.MANIFEST_LOADING,this.onManifestLoading,this),e.off(L.LEVEL_UPDATED,this.onLevelUpdated,this));},r.destroy=function(){this.unregisterListeners(),this.hls=null,this.penalizedRenditions={};},r.startLoad=function(e){},r.stopLoad=function(){this.playlistError=0;},r.getVariantLevelIndex=function(e){return (null==e?void 0:e.type)===Lt?e.level:this.hls.loadLevel},r.onManifestLoading=function(){this.playlistError=0,this.penalizedRenditions={};},r.onLevelUpdated=function(){this.playlistError=0;},r.onError=function(e,t){var r;if(!t.fatal){var i=this.hls,n=t.context;switch(t.details){case R.FRAG_LOAD_ERROR:case R.FRAG_LOAD_TIMEOUT:case R.KEY_LOAD_ERROR:case R.KEY_LOAD_TIMEOUT:return void(t.errorAction=this.getFragRetryOrSwitchAction(t));case R.FRAG_PARSING_ERROR:if(null!=(r=t.frag)&&r.gap)return void(t.errorAction=Fr());case R.FRAG_GAP:case R.FRAG_DECRYPT_ERROR:return t.errorAction=this.getFragRetryOrSwitchAction(t),void(t.errorAction.action=Dr);case R.LEVEL_EMPTY_ERROR:case R.LEVEL_PARSING_ERROR:var a,s,o=t.parent===Lt?t.level:i.loadLevel;return void(t.details===R.LEVEL_EMPTY_ERROR&&null!=(a=t.context)&&null!=(s=a.levelDetails)&&s.live?t.errorAction=this.getPlaylistRetryOrSwitchAction(t,o):(t.levelRetry=!1,t.errorAction=this.getLevelSwitchAction(t,o)));case R.LEVEL_LOAD_ERROR:case R.LEVEL_LOAD_TIMEOUT:return void("number"==typeof(null==n?void 0:n.level)&&(t.errorAction=this.getPlaylistRetryOrSwitchAction(t,n.level)));case R.AUDIO_TRACK_LOAD_ERROR:case R.AUDIO_TRACK_LOAD_TIMEOUT:case R.SUBTITLE_LOAD_ERROR:case R.SUBTITLE_TRACK_LOAD_TIMEOUT:if(n){var l=i.levels[i.loadLevel];if(l&&(n.type===Tt&&l.hasAudioGroup(n.groupId)||n.type===St&&l.hasSubtitleGroup(n.groupId)))return t.errorAction=this.getPlaylistRetryOrSwitchAction(t,i.loadLevel),t.errorAction.action=Dr,void(t.errorAction.flags=_r)}return;case R.KEY_SYSTEM_STATUS_OUTPUT_RESTRICTED:var u=i.levels[i.loadLevel],d=null==u?void 0:u.attrs["HDCP-LEVEL"];return void(d?t.errorAction={action:Dr,flags:Pr,hdcpLevel:d}:this.keySystemError(t));case R.BUFFER_ADD_CODEC_ERROR:case R.REMUX_ALLOC_ERROR:case R.BUFFER_APPEND_ERROR:var h;return void(t.errorAction||(t.errorAction=this.getLevelSwitchAction(t,null!=(h=t.level)?h:i.loadLevel)));case R.INTERNAL_EXCEPTION:case R.BUFFER_APPENDING_ERROR:case R.BUFFER_FULL_ERROR:case R.LEVEL_SWITCH_ERROR:case R.BUFFER_STALLED_ERROR:case R.BUFFER_SEEK_OVER_HOLE:case R.BUFFER_NUDGE_ON_STALL:return void(t.errorAction=Fr())}t.type===A.KEY_SYSTEM_ERROR&&this.keySystemError(t);}},r.keySystemError=function(e){var t=this.getVariantLevelIndex(e.frag);e.levelRetry=!1,e.errorAction=this.getLevelSwitchAction(e,t);},r.getPlaylistRetryOrSwitchAction=function(e,t){var r=pr(this.hls.config.playlistLoadPolicy,e),i=this.playlistError++;if(Tr(r,i,mr(e),e.response))return {action:Ir,flags:Cr,retryConfig:r,retryCount:i};var n=this.getLevelSwitchAction(e,t);return r&&(n.retryConfig=r,n.retryCount=i),n},r.getFragRetryOrSwitchAction=function(e){var t=this.hls,r=this.getVariantLevelIndex(e.frag),i=t.levels[r],n=t.config,a=n.fragLoadPolicy,s=n.keyLoadPolicy,o=pr(e.details.startsWith("key")?s:a,e),l=t.levels.reduce((function(e,t){return e+t.fragmentError}),0);if(i&&(e.details!==R.FRAG_GAP&&i.fragmentError++,Tr(o,l,mr(e),e.response)))return {action:Ir,flags:Cr,retryConfig:o,retryCount:l};var u=this.getLevelSwitchAction(e,r);return o&&(u.retryConfig=o,u.retryCount=l),u},r.getLevelSwitchAction=function(e,t){var r=this.hls;null==t&&(t=r.loadLevel);var i=this.hls.levels[t];if(i){var n,a,s=e.details;i.loadError++,s===R.BUFFER_APPEND_ERROR&&i.fragmentError++;var o=-1,l=r.levels,u=r.loadLevel,d=r.minAutoLevel,h=r.maxAutoLevel;r.autoLevelEnabled||(r.loadLevel=-1);for(var c,f=null==(n=e.frag)?void 0:n.type,g=(f===At&&s===R.FRAG_PARSING_ERROR||"audio"===e.sourceBufferName&&(s===R.BUFFER_ADD_CODEC_ERROR||s===R.BUFFER_APPEND_ERROR))&&l.some((function(e){var t=e.audioCodec;return i.audioCodec!==t})),v="video"===e.sourceBufferName&&(s===R.BUFFER_ADD_CODEC_ERROR||s===R.BUFFER_APPEND_ERROR)&&l.some((function(e){var t=e.codecSet,r=e.audioCodec;return i.codecSet!==t&&i.audioCodec===r})),m=null!=(a=e.context)?a:{},p=m.type,y=m.groupId,E=function(){var t=(T+u)%l.length;if(t!==u&&t>=d&&t<=h&&0===l[t].loadError){var r,n,a=l[t];if(s===R.FRAG_GAP&&f===Lt&&e.frag){var c=l[t].details;if(c){var m=Lr(e.frag,c.fragments,e.frag.start);if(null!=m&&m.gap)return 0}}else {if(p===Tt&&a.hasAudioGroup(y)||p===St&&a.hasSubtitleGroup(y))return 0;if(f===At&&null!=(r=i.audioGroups)&&r.some((function(e){return a.hasAudioGroup(e)}))||f===Rt&&null!=(n=i.subtitleGroups)&&n.some((function(e){return a.hasSubtitleGroup(e)}))||g&&i.audioCodec===a.audioCodec||!g&&i.audioCodec!==a.audioCodec||v&&i.codecSet===a.codecSet)return 0}return o=t,1}},T=l.length;T--&&(0===(c=E())||1!==c););if(o>-1&&r.loadLevel!==o)return e.levelRetry=!0,this.playlistError=0,{action:Dr,flags:Cr,nextAutoLevel:o}}return {action:Dr,flags:_r}},r.onErrorOut=function(e,t){var r;switch(null==(r=t.errorAction)?void 0:r.action){case br:break;case Dr:this.sendAlternateToPenaltyBox(t),t.errorAction.resolved||t.details===R.FRAG_GAP?/MediaSource readyState: ended/.test(t.error.message)&&(this.warn('MediaSource ended after "'+t.sourceBufferName+'" sourceBuffer append error. Attempting to recover from media error.'),this.hls.recoverMediaError()):t.fatal=!0;}t.fatal&&this.hls.stopLoad();},r.sendAlternateToPenaltyBox=function(e){var t=this.hls,r=e.errorAction;if(r){var i=r.flags,n=r.hdcpLevel,a=r.nextAutoLevel;switch(i){case Cr:this.switchLevel(e,a);break;case Pr:n&&(t.maxHdcpLevel=Zt[Zt.indexOf(n)-1],r.resolved=!0),this.warn('Restricting playback to HDCP-LEVEL of "'+t.maxHdcpLevel+'" or lower');}r.resolved||this.switchLevel(e,a);}},r.switchLevel=function(e,t){void 0!==t&&e.errorAction&&(this.warn("switching to level "+t+" after "+e.details),this.hls.nextAutoLevel=t,e.errorAction.resolved=!0,this.hls.nextLoadLevel=this.hls.nextAutoLevel);},t}(k);function Fr(e){return {action:br,flags:Cr}}var Mr=function(e){function t(t,r){var i;return (i=e.call(this,r,t.logger)||this).hls=void 0,i.timer=-1,i.requestScheduled=-1,i.canLoad=!1,i.hls=t,i}u(t,e);var r=t.prototype;return r.destroy=function(){this.clearTimer(),this.hls=this.log=this.warn=null;},r.clearTimer=function(){-1!==this.timer&&(self.clearTimeout(this.timer),this.timer=-1);},r.startLoad=function(){this.canLoad=!0,this.requestScheduled=-1,this.loadPlaylist();},r.stopLoad=function(){this.canLoad=!1,this.clearTimer();},r.switchParams=function(e,t,r){var i=null==t?void 0:t.renditionReports;if(i){for(var n=-1,a=0;a<i.length;a++){var s=i[a],o=void 0;try{o=new self.URL(s.URI,t.url).href;}catch(e){this.warn("Could not construct new URL for Rendition Report: "+e),o=s.URI||"";}if(o===e){n=a;break}o===e.substring(0,o.length)&&(n=a);}if(-1!==n){var l=i[n],u=parseInt(l["LAST-MSN"])||(null==t?void 0:t.lastPartSn),d=parseInt(l["LAST-PART"])||(null==t?void 0:t.lastPartIndex);if(this.hls.config.lowLatencyMode){var h=Math.min(t.age-t.partTarget,t.targetduration);d>=0&&h>t.partTarget&&(d+=1);}var c=r&&nr(r);return new ar(u,d>=0?d:void 0,c)}}},r.loadPlaylist=function(e){-1===this.requestScheduled&&(this.requestScheduled=self.performance.now());},r.shouldLoadPlaylist=function(e){return this.canLoad&&!!e&&!!e.url&&(!e.details||e.details.live)},r.shouldReloadPlaylist=function(e){return -1===this.timer&&-1===this.requestScheduled&&this.shouldLoadPlaylist(e)},r.playlistLoaded=function(e,t,r){var i=this,n=t.details,a=t.stats,s=self.performance.now(),o=a.loading.first?Math.max(0,s-a.loading.first):0;if(n.advancedDateTime=Date.now()-o,n.live||null!=r&&r.live){if(n.reloaded(r),r&&this.log("live playlist "+e+" "+(n.advanced?"REFRESHED "+n.lastPartSn+"-"+n.lastPartIndex:n.updated?"UPDATED":"MISSED")),r&&n.fragments.length>0&&dr(r,n),!this.canLoad||!n.live)return;var l,u=void 0,d=void 0;if(n.canBlockReload&&n.endSN&&n.advanced){var h=this.hls.config.lowLatencyMode,c=n.lastPartSn,f=n.endSN,g=n.lastPartIndex,v=c===f;-1!==g?(u=v?f+1:c,d=v?h?0:g:g+1):u=f+1;var m=n.age,p=m+n.ageHeader,y=Math.min(p-n.partTarget,1.5*n.targetduration);if(y>0){if(p>3*n.targetduration)this.log("Playlist last advanced "+m.toFixed(2)+"s ago. Omitting segment and part directives."),u=void 0,d=void 0;else if(null!=r&&r.tuneInGoal&&p-n.partTarget>r.tuneInGoal)this.warn("CDN Tune-in goal increased from: "+r.tuneInGoal+" to: "+y+" with playlist age: "+n.age),y=0;else {var E=Math.floor(y/n.targetduration);u+=E,void 0!==d&&(d+=Math.round(y%n.targetduration/n.partTarget)),this.log("CDN Tune-in age: "+n.ageHeader+"s last advanced "+m.toFixed(2)+"s goal: "+y+" skip sn "+E+" to part "+d);}n.tuneInGoal=y;}if(l=this.getDeliveryDirectives(n,t.deliveryDirectives,u,d),h||!v)return void this.loadPlaylist(l)}else (n.canBlockReload||n.canSkipUntil)&&(l=this.getDeliveryDirectives(n,t.deliveryDirectives,u,d));var T=this.hls.mainForwardBufferInfo,S=T?T.end-T.len:0,L=function(e,t){void 0===t&&(t=1/0);var r=1e3*e.targetduration;if(e.updated){var i=e.fragments;if(i.length&&4*r>t){var n=1e3*i[i.length-1].duration;n<r&&(r=n);}}else r/=2;return Math.round(r)}(n,1e3*(n.edge-S));n.updated&&s>this.requestScheduled+L&&(this.requestScheduled=a.loading.start),void 0!==u&&n.canBlockReload?this.requestScheduled=a.loading.first+L-(1e3*n.partTarget||1e3):-1===this.requestScheduled||this.requestScheduled+L<s?this.requestScheduled=s:this.requestScheduled-s<=0&&(this.requestScheduled+=L);var A=this.requestScheduled-s;A=Math.max(0,A),this.log("reload live playlist "+e+" in "+Math.round(A)+" ms"),this.timer=self.setTimeout((function(){return i.loadPlaylist(l)}),A);}else this.clearTimer();},r.getDeliveryDirectives=function(e,t,r,i){var n=nr(e);return null!=t&&t.skip&&e.deltaUpdateFailed&&(r=t.msn,i=t.part,n=tr),new ar(r,i,n)},r.checkRetry=function(e){var t=this,r=e.details,i=mr(e),n=e.errorAction,a=n||{},s=a.action,o=a.retryCount,l=void 0===o?0:o,u=a.retryConfig,d=!!n&&!!u&&(s===Ir||!n.resolved&&s===Dr);if(d){var h;if(this.requestScheduled=-1,l>=u.maxNumRetry)return !1;if(i&&null!=(h=e.context)&&h.deliveryDirectives)this.warn("Retrying playlist loading "+(l+1)+"/"+u.maxNumRetry+' after "'+r+'" without delivery-directives'),this.loadPlaylist();else {var c=yr(u,l);this.timer=self.setTimeout((function(){return t.loadPlaylist()}),c),this.warn("Retrying playlist loading "+(l+1)+"/"+u.maxNumRetry+' after "'+r+'" in '+c+"ms");}e.levelRetry=!0,n.resolved=!0;}return d},t}(k),Or=function(){function e(e,t,r){void 0===t&&(t=0),void 0===r&&(r=0),this.halfLife=void 0,this.alpha_=void 0,this.estimate_=void 0,this.totalWeight_=void 0,this.halfLife=e,this.alpha_=e?Math.exp(Math.log(.5)/e):0,this.estimate_=t,this.totalWeight_=r;}var t=e.prototype;return t.sample=function(e,t){var r=Math.pow(this.alpha_,e);this.estimate_=t*(1-r)+r*this.estimate_,this.totalWeight_+=e;},t.getTotalWeight=function(){return this.totalWeight_},t.getEstimate=function(){if(this.alpha_){var e=1-Math.pow(this.alpha_,this.totalWeight_);if(e)return this.estimate_/e}return this.estimate_},e}(),Nr=function(){function e(e,t,r,i){void 0===i&&(i=100),this.defaultEstimate_=void 0,this.minWeight_=void 0,this.minDelayMs_=void 0,this.slow_=void 0,this.fast_=void 0,this.defaultTTFB_=void 0,this.ttfb_=void 0,this.defaultEstimate_=r,this.minWeight_=.001,this.minDelayMs_=50,this.slow_=new Or(e),this.fast_=new Or(t),this.defaultTTFB_=i,this.ttfb_=new Or(e);}var t=e.prototype;return t.update=function(e,t){var r=this.slow_,i=this.fast_,n=this.ttfb_;r.halfLife!==e&&(this.slow_=new Or(e,r.getEstimate(),r.getTotalWeight())),i.halfLife!==t&&(this.fast_=new Or(t,i.getEstimate(),i.getTotalWeight())),n.halfLife!==e&&(this.ttfb_=new Or(e,n.getEstimate(),n.getTotalWeight()));},t.sample=function(e,t){var r=(e=Math.max(e,this.minDelayMs_))/1e3,i=8*t/r;this.fast_.sample(r,i),this.slow_.sample(r,i);},t.sampleTTFB=function(e){var t=e/1e3,r=Math.sqrt(2)*Math.exp(-Math.pow(t,2)/2);this.ttfb_.sample(r,Math.max(e,5));},t.canEstimate=function(){return this.fast_.getTotalWeight()>=this.minWeight_},t.getEstimate=function(){return this.canEstimate()?Math.min(this.fast_.getEstimate(),this.slow_.getEstimate()):this.defaultEstimate_},t.getEstimateTTFB=function(){return this.ttfb_.getTotalWeight()>=this.minWeight_?this.ttfb_.getEstimate():this.defaultTTFB_},t.destroy=function(){},e}(),Ur={supported:!0,configurations:[],decodingInfoResults:[{supported:!0,powerEfficient:!0,smooth:!0}]},Br={};function Gr(e,t,r){var i=e.videoCodec,n=e.audioCodec;if(!i||!n||!r)return Promise.resolve(Ur);var a={width:e.width,height:e.height,bitrate:Math.ceil(Math.max(.9*e.bitrate,e.averageBitrate)),framerate:e.frameRate||30},s=e.videoRange;"SDR"!==s&&(a.transferFunction=s.toLowerCase());var o=i.split(",").map((function(e){return {type:"media-source",video:c(c({},a),{},{contentType:ze(e,"video")})}}));return n&&e.audioGroups&&e.audioGroups.forEach((function(e){var r;e&&(null==(r=t.groups[e])||r.tracks.forEach((function(t){if(t.groupId===e){var r=t.channels||"",i=parseFloat(r);E(i)&&i>2&&o.push.apply(o,n.split(",").map((function(e){return {type:"media-source",audio:{contentType:ze(e,"audio"),channels:""+i}}})));}})));})),Promise.all(o.map((function(e){var t=function(e){var t=e.audio,r=e.video,i=r||t;if(i){var n=i.contentType.split('"')[1];if(r)return "r"+r.height+"x"+r.width+"f"+Math.ceil(r.framerate)+(r.transferFunction||"sd")+"_"+n+"_"+Math.ceil(r.bitrate/1e5);if(t)return "c"+t.channels+(t.spatialRendering?"s":"n")+"_"+n}return ""}(e);return Br[t]||(Br[t]=r.decodingInfo(e))}))).then((function(e){return {supported:!e.some((function(e){return !e.supported})),configurations:o,decodingInfoResults:e}})).catch((function(e){return {supported:!1,configurations:o,decodingInfoResults:[],error:e}}))}function Kr(e,t){var r=!1,i=[];if(e&&(r="SDR"!==e,i=[e]),t){var n="SDR"!==(i=t.allowedVideoRanges||er.slice(0)).join("")&&!t.videoCodec;(r=void 0!==t.preferHDR?t.preferHDR:n&&function(){if("function"==typeof matchMedia){var e=matchMedia("(dynamic-range: high)"),t=matchMedia("bad query");if(e.media!==t.media)return !0===e.matches}return !1}())||(i=["SDR"]);}return {preferHDR:r,allowedVideoRanges:i}}function Hr(e,t){P.log('[abr] start candidates with "'+e+'" ignored because '+t);}function Vr(e,t,r){if("attrs"in e){var i=t.indexOf(e);if(-1!==i)return i}for(var n=0;n<t.length;n++)if(Yr(e,t[n],r))return n;return -1}function Yr(e,t,r){var i=e.groupId,n=e.name,a=e.lang,s=e.assocLang,o=e.characteristics,l=e.default,u=e.forced;return (void 0===i||t.groupId===i)&&(void 0===n||t.name===n)&&(void 0===a||t.lang===a)&&(void 0===a||t.assocLang===s)&&(void 0===l||t.default===l)&&(void 0===u||t.forced===u)&&(void 0===o||function(e,t){void 0===t&&(t="");var r=e.split(","),i=t.split(",");return r.length===i.length&&!r.some((function(e){return -1===i.indexOf(e)}))}(o,t.characteristics))&&(void 0===r||r(e,t))}function Wr(e,t){var r=e.audioCodec,i=e.channels;return !(void 0!==r&&(t.audioCodec||"").substring(0,4)!==r.substring(0,4)||void 0!==i&&i!==(t.channels||"2"))}function jr(e,t,r){for(var i=t;i;i--)if(r(e[i]))return i;for(var n=t+1;n<e.length;n++)if(r(e[n]))return n;return -1}var qr=function(e){function t(t){var r;return (r=e.call(this,"abr",t.logger)||this).hls=void 0,r.lastLevelLoadSec=0,r.lastLoadedFragLevel=-1,r.firstSelection=-1,r._nextAutoLevel=-1,r.nextAutoLevelKey="",r.audioTracksByGroup=null,r.codecTiers=null,r.timer=-1,r.fragCurrent=null,r.partCurrent=null,r.bitrateTestDelay=0,r.bwEstimator=void 0,r._abandonRulesCheck=function(){var e=r,t=e.fragCurrent,i=e.partCurrent,n=e.hls,a=n.autoLevelEnabled,s=n.media;if(t&&s){var o=performance.now(),l=i?i.stats:t.stats,u=i?i.duration:t.duration,d=o-l.loading.start,h=n.minAutoLevel;if(l.aborted||l.loaded&&l.loaded===l.total||t.level<=h)return r.clearTimer(),void(r._nextAutoLevel=-1);if(a&&!s.paused&&s.playbackRate&&s.readyState){var c=n.mainForwardBufferInfo;if(null!==c){var f=r.bwEstimator.getEstimateTTFB(),g=Math.abs(s.playbackRate);if(!(d<=Math.max(f,u/(2*g)*1e3))){var v=c.len/g,m=l.loading.first?l.loading.first-l.loading.start:-1,p=l.loaded&&m>-1,y=r.getBwEstimate(),T=n.levels,S=T[t.level],A=l.total||Math.max(l.loaded,Math.round(u*S.averageBitrate/8)),R=p?d-m:d;R<1&&p&&(R=Math.min(d,8*l.loaded/y));var k=p?1e3*l.loaded/R:0,b=k?(A-l.loaded)/k:8*A/y+f/1e3;if(!(b<=v)){var D,w=k?8*k:y,I=Number.POSITIVE_INFINITY;for(D=t.level-1;D>h;D--){var C=T[D].maxBitrate;if((I=r.getTimeToLoadFrag(f/1e3,w,u*C,!T[D].details))<v)break}if(!(I>=b||I>10*u)){n.nextLoadLevel=n.nextAutoLevel=D,p?r.bwEstimator.sample(d-Math.min(f,m),l.loaded):r.bwEstimator.sampleTTFB(d);var _=T[D].maxBitrate;r.getBwEstimate()*r.hls.config.abrBandWidthUpFactor>_&&r.resetEstimator(_),r.clearTimer(),r.warn("Fragment "+t.sn+(i?" part "+i.index:"")+" of level "+t.level+" is loading too slowly;\n      Time to underbuffer: "+v.toFixed(3)+" s\n      Estimated load time for current fragment: "+b.toFixed(3)+" s\n      Estimated load time for down switch fragment: "+I.toFixed(3)+" s\n      TTFB estimate: "+(0|m)+" ms\n      Current BW estimate: "+(E(y)?0|y:"Unknown")+" bps\n      New BW estimate: "+(0|r.getBwEstimate())+" bps\n      Switching to level "+D+" @ "+(0|_)+" bps"),n.trigger(L.FRAG_LOAD_EMERGENCY_ABORTED,{frag:t,part:i,stats:l});}}}}}}},r.hls=t,r.bwEstimator=r.initEstimator(),r.registerListeners(),r}u(t,e);var r=t.prototype;return r.resetEstimator=function(e){e&&(this.log("setting initial bwe to "+e),this.hls.config.abrEwmaDefaultEstimate=e),this.firstSelection=-1,this.bwEstimator=this.initEstimator();},r.initEstimator=function(){var e=this.hls.config;return new Nr(e.abrEwmaSlowVoD,e.abrEwmaFastVoD,e.abrEwmaDefaultEstimate)},r.registerListeners=function(){var e=this.hls;e.on(L.MANIFEST_LOADING,this.onManifestLoading,this),e.on(L.FRAG_LOADING,this.onFragLoading,this),e.on(L.FRAG_LOADED,this.onFragLoaded,this),e.on(L.FRAG_BUFFERED,this.onFragBuffered,this),e.on(L.LEVEL_SWITCHING,this.onLevelSwitching,this),e.on(L.LEVEL_LOADED,this.onLevelLoaded,this),e.on(L.LEVELS_UPDATED,this.onLevelsUpdated,this),e.on(L.MAX_AUTO_LEVEL_UPDATED,this.onMaxAutoLevelUpdated,this),e.on(L.ERROR,this.onError,this);},r.unregisterListeners=function(){var e=this.hls;e&&(e.off(L.MANIFEST_LOADING,this.onManifestLoading,this),e.off(L.FRAG_LOADING,this.onFragLoading,this),e.off(L.FRAG_LOADED,this.onFragLoaded,this),e.off(L.FRAG_BUFFERED,this.onFragBuffered,this),e.off(L.LEVEL_SWITCHING,this.onLevelSwitching,this),e.off(L.LEVEL_LOADED,this.onLevelLoaded,this),e.off(L.LEVELS_UPDATED,this.onLevelsUpdated,this),e.off(L.MAX_AUTO_LEVEL_UPDATED,this.onMaxAutoLevelUpdated,this),e.off(L.ERROR,this.onError,this));},r.destroy=function(){this.unregisterListeners(),this.clearTimer(),this.hls=this._abandonRulesCheck=null,this.fragCurrent=this.partCurrent=null;},r.onManifestLoading=function(e,t){this.lastLoadedFragLevel=-1,this.firstSelection=-1,this.lastLevelLoadSec=0,this.fragCurrent=this.partCurrent=null,this.onLevelsUpdated(),this.clearTimer();},r.onLevelsUpdated=function(){this.lastLoadedFragLevel>-1&&this.fragCurrent&&(this.lastLoadedFragLevel=this.fragCurrent.level),this._nextAutoLevel=-1,this.onMaxAutoLevelUpdated(),this.codecTiers=null,this.audioTracksByGroup=null;},r.onMaxAutoLevelUpdated=function(){this.firstSelection=-1,this.nextAutoLevelKey="";},r.onFragLoading=function(e,t){var r,i=t.frag;this.ignoreFragment(i)||(i.bitrateTest||(this.fragCurrent=i,this.partCurrent=null!=(r=t.part)?r:null),this.clearTimer(),this.timer=self.setInterval(this._abandonRulesCheck,100));},r.onLevelSwitching=function(e,t){this.clearTimer();},r.onError=function(e,t){if(!t.fatal)switch(t.details){case R.BUFFER_ADD_CODEC_ERROR:case R.BUFFER_APPEND_ERROR:this.lastLoadedFragLevel=-1,this.firstSelection=-1;break;case R.FRAG_LOAD_TIMEOUT:var r=t.frag,i=this.fragCurrent,n=this.partCurrent;if(r&&i&&r.sn===i.sn&&r.level===i.level){var a=performance.now(),s=n?n.stats:r.stats,o=a-s.loading.start,l=s.loading.first?s.loading.first-s.loading.start:-1;if(s.loaded&&l>-1){var u=this.bwEstimator.getEstimateTTFB();this.bwEstimator.sample(o-Math.min(u,l),s.loaded);}else this.bwEstimator.sampleTTFB(o);}}},r.getTimeToLoadFrag=function(e,t,r,i){return e+r/t+(i?this.lastLevelLoadSec:0)},r.onLevelLoaded=function(e,t){var r=this.hls.config,i=t.stats.loading,n=i.end-i.start;E(n)&&(this.lastLevelLoadSec=n/1e3),t.details.live?this.bwEstimator.update(r.abrEwmaSlowLive,r.abrEwmaFastLive):this.bwEstimator.update(r.abrEwmaSlowVoD,r.abrEwmaFastVoD);},r.onFragLoaded=function(e,t){var r=t.frag,i=t.part,n=i?i.stats:r.stats;if(r.type===Lt&&this.bwEstimator.sampleTTFB(n.loading.first-n.loading.start),!this.ignoreFragment(r)){if(this.clearTimer(),r.level===this._nextAutoLevel&&(this._nextAutoLevel=-1),this.firstSelection=-1,this.hls.config.abrMaxWithRealBitrate){var a=i?i.duration:r.duration,s=this.hls.levels[r.level],o=(s.loaded?s.loaded.bytes:0)+n.loaded,l=(s.loaded?s.loaded.duration:0)+a;s.loaded={bytes:o,duration:l},s.realBitrate=Math.round(8*o/l);}if(r.bitrateTest){var u={stats:n,frag:r,part:i,id:r.type};this.onFragBuffered(L.FRAG_BUFFERED,u),r.bitrateTest=!1;}else this.lastLoadedFragLevel=r.level;}},r.onFragBuffered=function(e,t){var r=t.frag,i=t.part,n=null!=i&&i.stats.loaded?i.stats:r.stats;if(!n.aborted&&!this.ignoreFragment(r)){var a=n.parsing.end-n.loading.start-Math.min(n.loading.first-n.loading.start,this.bwEstimator.getEstimateTTFB());this.bwEstimator.sample(a,n.loaded),n.bwEstimate=this.getBwEstimate(),r.bitrateTest?this.bitrateTestDelay=a/1e3:this.bitrateTestDelay=0;}},r.ignoreFragment=function(e){return e.type!==Lt||"initSegment"===e.sn},r.clearTimer=function(){this.timer>-1&&(self.clearInterval(this.timer),this.timer=-1);},r.getAutoLevelKey=function(){return this.getBwEstimate()+"_"+this.getStarvationDelay().toFixed(2)},r.getNextABRAutoLevel=function(){var e=this.fragCurrent,t=this.partCurrent,r=this.hls;if(r.levels.length<=1)return r.loadLevel;var i=r.maxAutoLevel,n=r.config,a=r.minAutoLevel,s=t?t.duration:e?e.duration:0,o=this.getBwEstimate(),l=this.getStarvationDelay(),u=n.abrBandWidthFactor,d=n.abrBandWidthUpFactor;if(l){var h=this.findBestLevel(o,a,i,l,0,u,d);if(h>=0)return h}var c=s?Math.min(s,n.maxStarvationDelay):n.maxStarvationDelay;if(!l){var f=this.bitrateTestDelay;f&&(c=(s?Math.min(s,n.maxLoadingDelay):n.maxLoadingDelay)-f,this.info("bitrate test took "+Math.round(1e3*f)+"ms, set first fragment max fetchDuration to "+Math.round(1e3*c)+" ms"),u=d=1);}var g=this.findBestLevel(o,a,i,l,c,u,d);if(this.info((l?"rebuffering expected":"buffer is empty")+", optimal quality level "+g),g>-1)return g;var v=r.levels[a],m=r.levels[r.loadLevel];return (null==v?void 0:v.bitrate)<(null==m?void 0:m.bitrate)?a:r.loadLevel},r.getStarvationDelay=function(){var e=this.hls,t=e.media;if(!t)return 1/0;var r=t&&0!==t.playbackRate?Math.abs(t.playbackRate):1,i=e.mainForwardBufferInfo;return (i?i.len:0)/r},r.getBwEstimate=function(){return this.bwEstimator.canEstimate()?this.bwEstimator.getEstimate():this.hls.config.abrEwmaDefaultEstimate},r.findBestLevel=function(e,t,r,i,n,a,s){var o,l=this,u=i+n,d=this.lastLoadedFragLevel,h=-1===d?this.hls.firstLevel:d,c=this.fragCurrent,f=this.partCurrent,g=this.hls,v=g.levels,m=g.allAudioTracks,p=g.loadLevel,y=g.config;if(1===v.length)return 0;var T,S=v[h],L=!(null==S||null==(o=S.details)||!o.live),A=-1===p||-1===d,R="SDR",k=(null==S?void 0:S.frameRate)||0,b=y.audioPreference,D=y.videoPreference,w=this.audioTracksByGroup||(this.audioTracksByGroup=function(e){return e.reduce((function(e,t){var r=e.groups[t.groupId];r||(r=e.groups[t.groupId]={tracks:[],channels:{2:0},hasDefault:!1,hasAutoSelect:!1}),r.tracks.push(t);var i=t.channels||"2";return r.channels[i]=(r.channels[i]||0)+1,r.hasDefault=r.hasDefault||t.default,r.hasAutoSelect=r.hasAutoSelect||t.autoselect,r.hasDefault&&(e.hasDefaultAudio=!0),r.hasAutoSelect&&(e.hasAutoSelectAudio=!0),e}),{hasDefaultAudio:!1,hasAutoSelectAudio:!1,groups:{}})}(m)),I=-1;if(A){if(-1!==this.firstSelection)return this.firstSelection;var C=this.codecTiers||(this.codecTiers=function(e,t,r,i){return e.slice(r,i+1).reduce((function(e,r,i){if(!r.codecSet)return e;var n=r.audioGroups,a=e[r.codecSet];a||(e[r.codecSet]=a={minBitrate:1/0,minHeight:1/0,minFramerate:1/0,minIndex:i,maxScore:0,videoRanges:{SDR:0},channels:{2:0},hasDefaultAudio:!n,fragmentError:0}),a.minBitrate=Math.min(a.minBitrate,r.bitrate);var s=Math.min(r.height,r.width);return a.minHeight=Math.min(a.minHeight,s),a.minFramerate=Math.min(a.minFramerate,r.frameRate),a.minIndex=Math.min(a.minIndex,i),a.maxScore=Math.max(a.maxScore,r.score),a.fragmentError+=r.fragmentError,a.videoRanges[r.videoRange]=(a.videoRanges[r.videoRange]||0)+1,n&&n.forEach((function(e){if(e){var r=t.groups[e];r&&(a.hasDefaultAudio=a.hasDefaultAudio||t.hasDefaultAudio?r.hasDefault:r.hasAutoSelect||!t.hasDefaultAudio&&!t.hasAutoSelectAudio,Object.keys(r.channels).forEach((function(e){a.channels[e]=(a.channels[e]||0)+r.channels[e];})));}})),e}),{})}(v,w,t,r)),_=function(e,t,r,i,n){for(var a=Object.keys(e),s=null==i?void 0:i.channels,o=null==i?void 0:i.audioCodec,l=null==n?void 0:n.videoCodec,u=s&&2===parseInt(s),d=!1,h=!1,c=1/0,f=1/0,g=1/0,v=1/0,m=0,p=[],y=Kr(t,n),T=y.preferHDR,S=y.allowedVideoRanges,L=function(){var t=e[a[A]];d||(d=t.channels[2]>0),c=Math.min(c,t.minHeight),f=Math.min(f,t.minFramerate),g=Math.min(g,t.minBitrate),S.filter((function(e){return t.videoRanges[e]>0})).length>0&&(h=!0);},A=a.length;A--;)L();c=E(c)?c:0,f=E(f)?f:0;var R=Math.max(1080,c),k=Math.max(30,f);g=E(g)?g:r,r=Math.max(g,r),h||(t=void 0);var b=a.length>1;return {codecSet:a.reduce((function(t,i){var n=e[i];if(i===t)return t;if(p=h?S.filter((function(e){return n.videoRanges[e]>0})):[],b){if(n.minBitrate>r)return Hr(i,"min bitrate of "+n.minBitrate+" > current estimate of "+r),t;if(!n.hasDefaultAudio)return Hr(i,"no renditions with default or auto-select sound found"),t;if(o&&i.indexOf(o.substring(0,4))%5!=0)return Hr(i,'audio codec preference "'+o+'" not found'),t;if(s&&!u){if(!n.channels[s])return Hr(i,"no renditions with "+s+" channel sound found (channels options: "+Object.keys(n.channels)+")"),t}else if((!o||u)&&d&&0===n.channels[2])return Hr(i,"no renditions with stereo sound found"),t;if(n.minHeight>R)return Hr(i,"min resolution of "+n.minHeight+" > maximum of "+R),t;if(n.minFramerate>k)return Hr(i,"min framerate of "+n.minFramerate+" > maximum of "+k),t;if(!p.some((function(e){return n.videoRanges[e]>0})))return Hr(i,"no variants with VIDEO-RANGE of "+JSON.stringify(p)+" found"),t;if(l&&i.indexOf(l.substring(0,4))%5!=0)return Hr(i,'video codec preference "'+l+'" not found'),t;if(n.maxScore<m)return Hr(i,"max score of "+n.maxScore+" < selected max of "+m),t}return t&&(Je(i)>=Je(t)||n.fragmentError>e[t].fragmentError)?t:(v=n.minIndex,m=n.maxScore,i)}),void 0),videoRanges:p,preferHDR:T,minFramerate:f,minBitrate:g,minIndex:v}}(C,R,e,b,D),P=_.codecSet,x=_.videoRanges,F=_.minFramerate,M=_.minBitrate,O=_.minIndex,N=_.preferHDR;I=O,T=P,R=N?x[x.length-1]:x[0],k=F,e=Math.max(e,M),this.log("picked start tier "+JSON.stringify(_));}else T=null==S?void 0:S.codecSet,R=null==S?void 0:S.videoRange;for(var U,B=f?f.duration:c?c.duration:0,G=this.bwEstimator.getEstimateTTFB()/1e3,K=[],H=function(){var t,o=v[V],c=V>h;if(!o)return 0;if(y.useMediaCapabilities&&!o.supportedResult&&!o.supportedPromise){var g=navigator.mediaCapabilities;"function"==typeof(null==g?void 0:g.decodingInfo)&&function(e,t,r,i,n,a){var s=e.audioCodec?e.audioGroups:null,o=null==a?void 0:a.audioCodec,l=null==a?void 0:a.channels,u=l?parseInt(l):o?1/0:2,d=null;if(null!=s&&s.length)try{d=1===s.length&&s[0]?t.groups[s[0]].channels:s.reduce((function(e,r){if(r){var i=t.groups[r];if(!i)throw new Error("Audio track group "+r+" not found");Object.keys(i.channels).forEach((function(t){e[t]=(e[t]||0)+i.channels[t];}));}return e}),{2:0});}catch(e){return !0}return void 0!==e.videoCodec&&(e.width>1920&&e.height>1088||e.height>1920&&e.width>1088||e.frameRate>Math.max(i,30)||"SDR"!==e.videoRange&&e.videoRange!==r||e.bitrate>Math.max(n,8e6))||!!d&&E(u)&&Object.keys(d).some((function(e){return parseInt(e)>u}))}(o,w,R,k,e,b)?(o.supportedPromise=Gr(o,w,g),o.supportedPromise.then((function(e){if(l.hls){o.supportedResult=e;var t=l.hls.levels,r=t.indexOf(o);e.error?l.warn('MediaCapabilities decodingInfo error: "'+e.error+'" for level '+r+" "+JSON.stringify(e)):e.supported||(l.warn("Unsupported MediaCapabilities decodingInfo result for level "+r+" "+JSON.stringify(e)),r>-1&&t.length>1&&(l.log("Removing unsupported level "+r),l.hls.removeLevel(r)));}}))):o.supportedResult=Ur;}if((T&&o.codecSet!==T||R&&o.videoRange!==R||c&&k>o.frameRate||!c&&k>0&&k<o.frameRate||o.supportedResult&&(null==(t=o.supportedResult.decodingInfoResults)||!t[0].smooth))&&(!A||V!==I))return K.push(V),0;var m,D=o.details,C=(f?null==D?void 0:D.partTarget:null==D?void 0:D.averagetargetduration)||B;m=c?s*e:a*e;var _=B&&i>=2*B&&0===n?v[V].averageBitrate:v[V].maxBitrate,P=l.getTimeToLoadFrag(G,m,_*C,void 0===D);if(m>=_&&(V===d||0===o.loadError&&0===o.fragmentError)&&(P<=G||!E(P)||L&&!l.bitrateTestDelay||P<u)){var x=l.forcedAutoLevel;return V===p||-1!==x&&x===p||(K.length&&l.trace("Skipped level(s) "+K.join(",")+" of "+r+' max with CODECS and VIDEO-RANGE:"'+v[K[0]].codecs+'" '+v[K[0]].videoRange+'; not compatible with "'+S.codecs+'" '+R),l.info("switch candidate:"+h+"->"+V+" adjustedbw("+Math.round(m)+")-bitrate="+Math.round(m-_)+" ttfb:"+G.toFixed(1)+" avgDuration:"+C.toFixed(1)+" maxFetchDuration:"+u.toFixed(1)+" fetchDuration:"+P.toFixed(1)+" firstSelection:"+A+" codecSet:"+o.codecSet+" videoRange:"+o.videoRange+" hls.loadLevel:"+p)),A&&(l.firstSelection=V),{v:V}}},V=r;V>=t;V--)if(0!==(U=H())&&U)return U.v;return -1},n(t,[{key:"firstAutoLevel",get:function(){var e=this.hls,t=e.maxAutoLevel,r=e.minAutoLevel,i=this.getBwEstimate(),n=this.hls.config.maxStarvationDelay,a=this.findBestLevel(i,r,t,0,n,1,1);if(a>-1)return a;var s=this.hls.firstLevel,o=Math.min(Math.max(s,r),t);return this.warn("Could not find best starting auto level. Defaulting to first in playlist "+s+" clamped to "+o),o}},{key:"forcedAutoLevel",get:function(){return this.nextAutoLevelKey?-1:this._nextAutoLevel}},{key:"nextAutoLevel",get:function(){var e=this.forcedAutoLevel,t=this.bwEstimator.canEstimate(),r=this.lastLoadedFragLevel>-1;if(!(-1===e||t&&r&&this.nextAutoLevelKey!==this.getAutoLevelKey()))return e;var i=t&&r?this.getNextABRAutoLevel():this.firstAutoLevel;if(-1!==e){var n=this.hls.levels;if(n.length>Math.max(e,i)&&n[e].loadError<=n[i].loadError)return e}return this._nextAutoLevel=i,this.nextAutoLevelKey=this.getAutoLevelKey(),i},set:function(e){var t=this.hls,r=t.maxAutoLevel,i=t.minAutoLevel,n=Math.min(Math.max(e,i),r);this._nextAutoLevel!==n&&(this.nextAutoLevelKey="",this._nextAutoLevel=n);}}])}(k),Xr=function(e){function t(t,r){var i;return (i=e.call(this,t,r)||this)._boundTick=void 0,i._tickTimer=null,i._tickInterval=null,i._tickCallCount=0,i._boundTick=i.tick.bind(i),i}u(t,e);var r=t.prototype;return r.destroy=function(){this.onHandlerDestroying(),this.onHandlerDestroyed();},r.onHandlerDestroying=function(){this.clearNextTick(),this.clearInterval();},r.onHandlerDestroyed=function(){},r.hasInterval=function(){return !!this._tickInterval},r.hasNextTick=function(){return !!this._tickTimer},r.setInterval=function(e){return !this._tickInterval&&(this._tickCallCount=0,this._tickInterval=self.setInterval(this._boundTick,e),!0)},r.clearInterval=function(){return !!this._tickInterval&&(self.clearInterval(this._tickInterval),this._tickInterval=null,!0)},r.clearNextTick=function(){return !!this._tickTimer&&(self.clearTimeout(this._tickTimer),this._tickTimer=null,!0)},r.tick=function(){this._tickCallCount++,1===this._tickCallCount&&(this.doTick(),this._tickCallCount>1&&this.tickImmediate(),this._tickCallCount=0);},r.tickImmediate=function(){this.clearNextTick(),this._tickTimer=self.setTimeout(this._boundTick,0);},r.doTick=function(){},t}(k),zr="NOT_LOADED",Qr="APPENDING",Jr="PARTIAL",$r="OK",Zr=function(){function e(e){this.activePartLists=Object.create(null),this.endListFragments=Object.create(null),this.fragments=Object.create(null),this.timeRanges=Object.create(null),this.bufferPadding=.2,this.hls=void 0,this.hasGaps=!1,this.hls=e,this._registerListeners();}var t=e.prototype;return t._registerListeners=function(){var e=this.hls;e.on(L.MANIFEST_LOADING,this.onManifestLoading,this),e.on(L.BUFFER_APPENDED,this.onBufferAppended,this),e.on(L.FRAG_BUFFERED,this.onFragBuffered,this),e.on(L.FRAG_LOADED,this.onFragLoaded,this);},t._unregisterListeners=function(){var e=this.hls;e.off(L.MANIFEST_LOADING,this.onManifestLoading,this),e.off(L.BUFFER_APPENDED,this.onBufferAppended,this),e.off(L.FRAG_BUFFERED,this.onFragBuffered,this),e.off(L.FRAG_LOADED,this.onFragLoaded,this);},t.destroy=function(){this._unregisterListeners(),this.fragments=this.activePartLists=this.endListFragments=this.timeRanges=null;},t.getAppendedFrag=function(e,t){var r=this.activePartLists[t];if(r)for(var i=r.length;i--;){var n=r[i];if(!n)break;var a=n.end;if(n.start<=e&&null!==a&&e<=a)return n}return this.getBufferedFrag(e,t)},t.getBufferedFrag=function(e,t){return this.getFragAtPos(e,t,!0)},t.getFragAtPos=function(e,t,r){for(var i=this.fragments,n=Object.keys(i),a=n.length;a--;){var s=i[n[a]];if((null==s?void 0:s.body.type)===t&&(!r||s.buffered)){var o=s.body;if(o.start<=e&&e<=o.end)return o}}return null},t.detectEvictedFragments=function(e,t,r,i,n){var a=this;this.timeRanges&&(this.timeRanges[e]=t);var s=(null==i?void 0:i.fragment.sn)||-1;Object.keys(this.fragments).forEach((function(i){var o=a.fragments[i];if(o&&!(s>=o.body.sn))if(o.buffered||o.loaded&&!n){var l=o.range[e];l&&(0!==l.time.length?l.time.some((function(e){var r=!a.isTimeBuffered(e.startPTS,e.endPTS,t);return r&&a.removeFragment(o.body),r})):a.removeFragment(o.body));}else o.body.type===r&&a.removeFragment(o.body);}));},t.detectPartialFragments=function(e){var t=this,r=this.timeRanges;if(r&&"initSegment"!==e.frag.sn){var i=e.frag,n=ti(i),a=this.fragments[n];if(!(!a||a.buffered&&i.gap)){var s=!i.relurl;Object.keys(r).forEach((function(n){var o=i.elementaryStreams[n];if(o){var l=r[n],u=s||!0===o.partial;a.range[n]=t.getBufferedTimes(i,e.part,u,l);}})),a.loaded=null,Object.keys(a.range).length?(a.buffered=!0,(a.body.endList=i.endList||a.body.endList)&&(this.endListFragments[a.body.type]=a),ei(a)||this.removeParts(i.sn-1,i.type)):this.removeFragment(a.body);}}},t.removeParts=function(e,t){var r=this.activePartLists[t];r&&(this.activePartLists[t]=r.filter((function(t){return t.fragment.sn>=e})));},t.fragBuffered=function(e,t){var r=ti(e),i=this.fragments[r];!i&&t&&(i=this.fragments[r]={body:e,appendedPTS:null,loaded:null,buffered:!1,range:Object.create(null)},e.gap&&(this.hasGaps=!0)),i&&(i.loaded=null,i.buffered=!0);},t.getBufferedTimes=function(e,t,r,i){for(var n={time:[],partial:r},a=e.start,s=e.end,o=e.minEndPTS||s,l=e.maxStartPTS||a,u=0;u<i.length;u++){var d=i.start(u)-this.bufferPadding,h=i.end(u)+this.bufferPadding;if(l>=d&&o<=h){n.time.push({startPTS:Math.max(a,i.start(u)),endPTS:Math.min(s,i.end(u))});break}if(a<h&&s>d){var c=Math.max(a,i.start(u)),f=Math.min(s,i.end(u));f>c&&(n.partial=!0,n.time.push({startPTS:c,endPTS:f}));}else if(s<=d)break}return n},t.getPartialFragment=function(e){var t,r,i,n=null,a=0,s=this.bufferPadding,o=this.fragments;return Object.keys(o).forEach((function(l){var u=o[l];u&&ei(u)&&(r=u.body.start-s,i=u.body.end+s,e>=r&&e<=i&&(t=Math.min(e-r,i-e),a<=t&&(n=u.body,a=t)));})),n},t.isEndListAppended=function(e){var t=this.endListFragments[e];return void 0!==t&&(t.buffered||ei(t))},t.getState=function(e){var t=ti(e),r=this.fragments[t];return r?r.buffered?ei(r)?Jr:$r:Qr:zr},t.isTimeBuffered=function(e,t,r){for(var i,n,a=0;a<r.length;a++){if(i=r.start(a)-this.bufferPadding,n=r.end(a)+this.bufferPadding,e>=i&&t<=n)return !0;if(t<=i)return !1}return !1},t.onManifestLoading=function(){this.removeAllFragments();},t.onFragLoaded=function(e,t){if("initSegment"!==t.frag.sn&&!t.frag.bitrateTest){var r=t.frag,i=t.part?null:t,n=ti(r);this.fragments[n]={body:r,appendedPTS:null,loaded:i,buffered:!1,range:Object.create(null)};}},t.onBufferAppended=function(e,t){var r=t.frag,i=t.part,n=t.timeRanges,a=t.type;if("initSegment"!==r.sn){var s=r.type;if(i){var o=this.activePartLists[s];o||(this.activePartLists[s]=o=[]),o.push(i);}this.timeRanges=n;var l=n[a];this.detectEvictedFragments(a,l,s,i);}},t.onFragBuffered=function(e,t){this.detectPartialFragments(t);},t.hasFragment=function(e){var t=ti(e);return !!this.fragments[t]},t.hasFragments=function(e){var t=this.fragments,r=Object.keys(t);if(!e)return r.length>0;for(var i=r.length;i--;){var n=t[r[i]];if((null==n?void 0:n.body.type)===e)return !0}return !1},t.hasParts=function(e){var t;return !(null==(t=this.activePartLists[e])||!t.length)},t.removeFragmentsInRange=function(e,t,r,i,n){var a=this;i&&!this.hasGaps||Object.keys(this.fragments).forEach((function(s){var o=a.fragments[s];if(o){var l=o.body;l.type!==r||i&&!l.gap||l.start<t&&l.end>e&&(o.buffered||n)&&a.removeFragment(l);}}));},t.removeFragment=function(e){var t=ti(e);e.stats.loaded=0,e.clearElementaryStreamInfo();var r=this.activePartLists[e.type];if(r){var i=e.sn;this.activePartLists[e.type]=r.filter((function(e){return e.fragment.sn!==i}));}delete this.fragments[t],e.endList&&delete this.endListFragments[e.type];},t.removeAllFragments=function(){this.fragments=Object.create(null),this.endListFragments=Object.create(null),this.activePartLists=Object.create(null),this.hasGaps=!1;},e}();function ei(e){var t,r,i;return e.buffered&&(e.body.gap||(null==(t=e.range.video)?void 0:t.partial)||(null==(r=e.range.audio)?void 0:r.partial)||(null==(i=e.range.audiovideo)?void 0:i.partial))}function ti(e){return e.type+"_"+e.level+"_"+e.sn}var ri={length:0,start:function(){return 0},end:function(){return 0}},ii=function(){function e(){}return e.isBuffered=function(t,r){if(t)for(var i=e.getBuffered(t),n=i.length;n--;)if(r>=i.start(n)&&r<=i.end(n))return !0;return !1},e.bufferInfo=function(t,r,i){if(t){var n=e.getBuffered(t);if(n.length){for(var a=[],s=0;s<n.length;s++)a.push({start:n.start(s),end:n.end(s)});return e.bufferedInfo(a,r,i)}}return {len:0,start:r,end:r,nextStart:void 0}},e.bufferedInfo=function(e,t,r){t=Math.max(0,t),e.sort((function(e,t){return e.start-t.start||t.end-e.end}));var i=[];if(r)for(var n=0;n<e.length;n++){var a=i.length;if(a){var s=i[a-1].end;e[n].start-s<r?e[n].end>s&&(i[a-1].end=e[n].end):i.push(e[n]);}else i.push(e[n]);}else i=e;for(var o,l=0,u=t,d=t,h=0;h<i.length;h++){var c=i[h].start,f=i[h].end;if(t+r>=c&&t<f)u=c,l=(d=f)-t;else if(t+r<c){o=c;break}}return {len:l,start:u||0,end:d||0,nextStart:o}},e.getBuffered=function(e){try{return e.buffered||ri}catch(e){return P.log("failed to get media.buffered",e),ri}},e}(),ni=function(e,t,r,i,n,a){void 0===i&&(i=0),void 0===n&&(n=-1),void 0===a&&(a=!1),this.level=void 0,this.sn=void 0,this.part=void 0,this.id=void 0,this.size=void 0,this.partial=void 0,this.transmuxing={start:0,executeStart:0,executeEnd:0,end:0},this.buffering={audio:{start:0,executeStart:0,executeEnd:0,end:0},video:{start:0,executeStart:0,executeEnd:0,end:0},audiovideo:{start:0,executeStart:0,executeEnd:0,end:0}},this.level=e,this.sn=t,this.id=r,this.size=i,this.part=n,this.partial=a;};function ai(e,t){for(var r=0,i=e.length;r<i;r++){var n;if((null==(n=e[r])?void 0:n.cc)===t)return e[r]}return null}function si(e,t){if(e){var r=e.start+t;e.start=e.startPTS=r,e.endPTS=r+e.duration;}}function oi(e,t){for(var r=t.fragments,i=0,n=r.length;i<n;i++)si(r[i],e);t.fragmentHint&&si(t.fragmentHint,e),t.alignedSliding=!0;}function li(e,t,r){t&&(function(e,t){if(function(e,t){return !!(e&&t.startCC<e.endCC&&t.endCC>e.startCC)}(t,e)){var r=Math.min(t.endCC,e.endCC),i=ai(t.fragments,r),n=ai(e.fragments,r);i&&n&&(P.log("Aligning playlist at start of dicontinuity sequence "+r),oi(i.start-n.start,e));}}(r,t),!r.alignedSliding&&t&&ui(r,t),r.alignedSliding||!t||r.skippedSegments||hr(t,r));}function ui(e,t){if(e.hasProgramDateTime&&t.hasProgramDateTime){var r=e.fragments,i=t.fragments;if(r.length&&i.length){var n,a,s=Math.min(t.endCC,e.endCC);t.startCC<s&&e.startCC<s&&(n=ai(i,s),a=ai(r,s)),n&&a||(a=ai(r,(n=i[Math.floor(i.length/2)]).cc)||r[Math.floor(r.length/2)]);var o=n.programDateTime,l=a.programDateTime;o&&l&&oi((l-o)/1e3-(a.start-n.start),e);}}}var di=Math.pow(2,17),hi=function(){function e(e){this.config=void 0,this.loader=null,this.partLoadTimeout=-1,this.config=e;}var t=e.prototype;return t.destroy=function(){this.loader&&(this.loader.destroy(),this.loader=null);},t.abort=function(){this.loader&&this.loader.abort();},t.load=function(e,t){var r=this,i=e.url;if(!i)return Promise.reject(new gi({type:A.NETWORK_ERROR,details:R.FRAG_LOAD_ERROR,fatal:!1,frag:e,error:new Error("Fragment does not have a "+(i?"part list":"url")),networkDetails:null}));this.abort();var n=this.config,a=n.fLoader,s=n.loader;return new Promise((function(o,l){if(r.loader&&r.loader.destroy(),e.gap){if(e.tagList.some((function(e){return "GAP"===e[0]})))return void l(fi(e));e.gap=!1;}var u=r.loader=a?new a(n):new s(n),d=ci(e);e.loader=u;var h=Er(n.fragLoadPolicy.default),f={loadPolicy:h,timeout:h.maxLoadTimeMs,maxRetry:0,retryDelay:0,maxRetryDelay:0,highWaterMark:"initSegment"===e.sn?1/0:di};e.stats=u.stats,u.load(d,f,{onSuccess:function(t,i,n,a){r.resetLoader(e,u);var s=t.data;n.resetIV&&e.decryptdata&&(e.decryptdata.iv=new Uint8Array(s.slice(0,16)),s=s.slice(16)),o({frag:e,part:null,payload:s,networkDetails:a});},onError:function(t,n,a,s){r.resetLoader(e,u),l(new gi({type:A.NETWORK_ERROR,details:R.FRAG_LOAD_ERROR,fatal:!1,frag:e,response:c({url:i,data:void 0},t),error:new Error("HTTP Error "+t.code+" "+t.text),networkDetails:a,stats:s}));},onAbort:function(t,i,n){r.resetLoader(e,u),l(new gi({type:A.NETWORK_ERROR,details:R.INTERNAL_ABORTED,fatal:!1,frag:e,error:new Error("Aborted"),networkDetails:n,stats:t}));},onTimeout:function(t,i,n){r.resetLoader(e,u),l(new gi({type:A.NETWORK_ERROR,details:R.FRAG_LOAD_TIMEOUT,fatal:!1,frag:e,error:new Error("Timeout after "+f.timeout+"ms"),networkDetails:n,stats:t}));},onProgress:function(r,i,n,a){t&&t({frag:e,part:null,payload:n,networkDetails:a});}});}))},t.loadPart=function(e,t,r){var i=this;this.abort();var n=this.config,a=n.fLoader,s=n.loader;return new Promise((function(o,l){if(i.loader&&i.loader.destroy(),e.gap||t.gap)l(fi(e,t));else {var u=i.loader=a?new a(n):new s(n),d=ci(e,t);e.loader=u;var h=Er(n.fragLoadPolicy.default),f={loadPolicy:h,timeout:h.maxLoadTimeMs,maxRetry:0,retryDelay:0,maxRetryDelay:0,highWaterMark:di};t.stats=u.stats,u.load(d,f,{onSuccess:function(n,a,s,l){i.resetLoader(e,u),i.updateStatsFromPart(e,t);var d={frag:e,part:t,payload:n.data,networkDetails:l};r(d),o(d);},onError:function(r,n,a,s){i.resetLoader(e,u),l(new gi({type:A.NETWORK_ERROR,details:R.FRAG_LOAD_ERROR,fatal:!1,frag:e,part:t,response:c({url:d.url,data:void 0},r),error:new Error("HTTP Error "+r.code+" "+r.text),networkDetails:a,stats:s}));},onAbort:function(r,n,a){e.stats.aborted=t.stats.aborted,i.resetLoader(e,u),l(new gi({type:A.NETWORK_ERROR,details:R.INTERNAL_ABORTED,fatal:!1,frag:e,part:t,error:new Error("Aborted"),networkDetails:a,stats:r}));},onTimeout:function(r,n,a){i.resetLoader(e,u),l(new gi({type:A.NETWORK_ERROR,details:R.FRAG_LOAD_TIMEOUT,fatal:!1,frag:e,part:t,error:new Error("Timeout after "+f.timeout+"ms"),networkDetails:a,stats:r}));}});}}))},t.updateStatsFromPart=function(e,t){var r=e.stats,i=t.stats,n=i.total;if(r.loaded+=i.loaded,n){var a=Math.round(e.duration/t.duration),s=Math.min(Math.round(r.loaded/n),a),o=(a-s)*Math.round(r.loaded/s);r.total=r.loaded+o;}else r.total=Math.max(r.loaded,r.total);var l=r.loading,u=i.loading;l.start?l.first+=u.first-u.start:(l.start=u.start,l.first=u.first),l.end=u.end;},t.resetLoader=function(e,t){e.loader=null,this.loader===t&&(self.clearTimeout(this.partLoadTimeout),this.loader=null),t.destroy();},e}();function ci(e,t){void 0===t&&(t=null);var r,i=t||e,n={frag:e,part:t,responseType:"arraybuffer",url:i.url,headers:{},rangeStart:0,rangeEnd:0},a=i.byteRangeStartOffset,s=i.byteRangeEndOffset;if(E(a)&&E(s)){var o,l=a,u=s;if("initSegment"===e.sn&&("AES-128"===(r=null==(o=e.decryptdata)?void 0:o.method)||"AES-256"===r)){var d=s-a;d%16&&(u=s+(16-d%16)),0!==a&&(n.resetIV=!0,l=a-16);}n.rangeStart=l,n.rangeEnd=u;}return n}function fi(e,t){var r=new Error("GAP "+(e.gap?"tag":"attribute")+" found"),i={type:A.MEDIA_ERROR,details:R.FRAG_GAP,fatal:!1,frag:e,error:r,networkDetails:null};return t&&(i.part=t),(t||e).stats.aborted=!0,new gi(i)}var gi=function(e){function t(t){var r;return (r=e.call(this,t.error.message)||this).data=void 0,r.data=t,r}return u(t,e),t}(v(Error)),vi=function(){function e(e,t,r){this.subtle=void 0,this.aesIV=void 0,this.aesMode=void 0,this.subtle=e,this.aesIV=t,this.aesMode=r;}return e.prototype.decrypt=function(e,t){switch(this.aesMode){case ee:return this.subtle.decrypt({name:"AES-CBC",iv:this.aesIV},t,e);case te:return this.subtle.decrypt({name:"AES-CTR",counter:this.aesIV,length:64},t,e);default:throw new Error("[AESCrypto] invalid aes mode "+this.aesMode)}},e}(),mi=function(){function e(e,t,r){this.subtle=void 0,this.key=void 0,this.aesMode=void 0,this.subtle=e,this.key=t,this.aesMode=r;}return e.prototype.expandKey=function(){var e=function(e){switch(e){case ee:return "AES-CBC";case te:return "AES-CTR";default:throw new Error("[FastAESKey] invalid aes mode "+e)}}(this.aesMode);return this.subtle.importKey("raw",this.key,{name:e},!1,["encrypt","decrypt"])},e}(),pi=function(){function e(){this.rcon=[0,1,2,4,8,16,32,64,128,27,54],this.subMix=[new Uint32Array(256),new Uint32Array(256),new Uint32Array(256),new Uint32Array(256)],this.invSubMix=[new Uint32Array(256),new Uint32Array(256),new Uint32Array(256),new Uint32Array(256)],this.sBox=new Uint32Array(256),this.invSBox=new Uint32Array(256),this.key=new Uint32Array(0),this.ksRows=0,this.keySize=0,this.keySchedule=void 0,this.invKeySchedule=void 0,this.initTable();}var t=e.prototype;return t.uint8ArrayToUint32Array_=function(e){for(var t=new DataView(e),r=new Uint32Array(4),i=0;i<4;i++)r[i]=t.getUint32(4*i);return r},t.initTable=function(){var e=this.sBox,t=this.invSBox,r=this.subMix,i=r[0],n=r[1],a=r[2],s=r[3],o=this.invSubMix,l=o[0],u=o[1],d=o[2],h=o[3],c=new Uint32Array(256),f=0,g=0,v=0;for(v=0;v<256;v++)c[v]=v<128?v<<1:v<<1^283;for(v=0;v<256;v++){var m=g^g<<1^g<<2^g<<3^g<<4;m=m>>>8^255&m^99,e[f]=m,t[m]=f;var p=c[f],y=c[p],E=c[y],T=257*c[m]^16843008*m;i[f]=T<<24|T>>>8,n[f]=T<<16|T>>>16,a[f]=T<<8|T>>>24,s[f]=T,T=16843009*E^65537*y^257*p^16843008*f,l[m]=T<<24|T>>>8,u[m]=T<<16|T>>>16,d[m]=T<<8|T>>>24,h[m]=T,f?(f=p^c[c[c[E^p]]],g^=c[c[g]]):f=g=1;}},t.expandKey=function(e){for(var t=this.uint8ArrayToUint32Array_(e),r=!0,i=0;i<t.length&&r;)r=t[i]===this.key[i],i++;if(!r){this.key=t;var n=this.keySize=t.length;if(4!==n&&6!==n&&8!==n)throw new Error("Invalid aes key size="+n);var a,s,o,l,u=this.ksRows=4*(n+6+1),d=this.keySchedule=new Uint32Array(u),h=this.invKeySchedule=new Uint32Array(u),c=this.sBox,f=this.rcon,g=this.invSubMix,v=g[0],m=g[1],p=g[2],y=g[3];for(a=0;a<u;a++)a<n?o=d[a]=t[a]:(l=o,a%n==0?(l=c[(l=l<<8|l>>>24)>>>24]<<24|c[l>>>16&255]<<16|c[l>>>8&255]<<8|c[255&l],l^=f[a/n|0]<<24):n>6&&a%n==4&&(l=c[l>>>24]<<24|c[l>>>16&255]<<16|c[l>>>8&255]<<8|c[255&l]),d[a]=o=(d[a-n]^l)>>>0);for(s=0;s<u;s++)a=u-s,l=3&s?d[a]:d[a-4],h[s]=s<4||a<=4?l:v[c[l>>>24]]^m[c[l>>>16&255]]^p[c[l>>>8&255]]^y[c[255&l]],h[s]=h[s]>>>0;}},t.networkToHostOrderSwap=function(e){return e<<24|(65280&e)<<8|(16711680&e)>>8|e>>>24},t.decrypt=function(e,t,r){for(var i,n,a,s,o,l,u,d,h,c,f,g,v,m,p=this.keySize+6,y=this.invKeySchedule,E=this.invSBox,T=this.invSubMix,S=T[0],L=T[1],A=T[2],R=T[3],k=this.uint8ArrayToUint32Array_(r),b=k[0],D=k[1],w=k[2],I=k[3],C=new Int32Array(e),_=new Int32Array(C.length),P=this.networkToHostOrderSwap;t<C.length;){for(h=P(C[t]),c=P(C[t+1]),f=P(C[t+2]),g=P(C[t+3]),o=h^y[0],l=g^y[1],u=f^y[2],d=c^y[3],v=4,m=1;m<p;m++)i=S[o>>>24]^L[l>>16&255]^A[u>>8&255]^R[255&d]^y[v],n=S[l>>>24]^L[u>>16&255]^A[d>>8&255]^R[255&o]^y[v+1],a=S[u>>>24]^L[d>>16&255]^A[o>>8&255]^R[255&l]^y[v+2],s=S[d>>>24]^L[o>>16&255]^A[l>>8&255]^R[255&u]^y[v+3],o=i,l=n,u=a,d=s,v+=4;i=E[o>>>24]<<24^E[l>>16&255]<<16^E[u>>8&255]<<8^E[255&d]^y[v],n=E[l>>>24]<<24^E[u>>16&255]<<16^E[d>>8&255]<<8^E[255&o]^y[v+1],a=E[u>>>24]<<24^E[d>>16&255]<<16^E[o>>8&255]<<8^E[255&l]^y[v+2],s=E[d>>>24]<<24^E[o>>16&255]<<16^E[l>>8&255]<<8^E[255&u]^y[v+3],_[t]=P(i^b),_[t+1]=P(s^D),_[t+2]=P(a^w),_[t+3]=P(n^I),b=h,D=c,w=f,I=g,t+=4;}return _.buffer},e}(),yi=function(){function e(e,t){var r=(void 0===t?{}:t).removePKCS7Padding,i=void 0===r||r;if(this.logEnabled=!0,this.removePKCS7Padding=void 0,this.subtle=null,this.softwareDecrypter=null,this.key=null,this.fastAesKey=null,this.remainderData=null,this.currentIV=null,this.currentResult=null,this.useSoftware=void 0,this.enableSoftwareAES=void 0,this.enableSoftwareAES=e.enableSoftwareAES,this.removePKCS7Padding=i,i)try{var n=self.crypto;n&&(this.subtle=n.subtle||n.webkitSubtle);}catch(e){}this.useSoftware=!this.subtle;}var t=e.prototype;return t.destroy=function(){this.subtle=null,this.softwareDecrypter=null,this.key=null,this.fastAesKey=null,this.remainderData=null,this.currentIV=null,this.currentResult=null;},t.isSync=function(){return this.useSoftware},t.flush=function(){var e=this.currentResult,t=this.remainderData;if(!e||t)return this.reset(),null;var r,i,n,a=new Uint8Array(e);return this.reset(),this.removePKCS7Padding?(i=(r=a).byteLength,(n=i&&new DataView(r.buffer).getUint8(i-1))?me(r,0,i-n):r):a},t.reset=function(){this.currentResult=null,this.currentIV=null,this.remainderData=null,this.softwareDecrypter&&(this.softwareDecrypter=null);},t.decrypt=function(e,t,r,i){var n=this;return this.useSoftware?new Promise((function(a,s){n.softwareDecrypt(new Uint8Array(e),t,r,i);var o=n.flush();o?a(o.buffer):s(new Error("[softwareDecrypt] Failed to decrypt data"));})):this.webCryptoDecrypt(new Uint8Array(e),t,r,i)},t.softwareDecrypt=function(e,t,r,i){var n=this.currentIV,a=this.currentResult,s=this.remainderData;if(i!==ee||16!==t.byteLength)return P.warn("SoftwareDecrypt: can only handle AES-128-CBC"),null;this.logOnce("JS AES decrypt"),s&&(e=Ne(s,e),this.remainderData=null);var o=this.getValidChunk(e);if(!o.length)return null;n&&(r=n);var l=this.softwareDecrypter;l||(l=this.softwareDecrypter=new pi),l.expandKey(t);var u=a;return this.currentResult=l.decrypt(o.buffer,0,r),this.currentIV=me(o,-16).buffer,u||null},t.webCryptoDecrypt=function(e,t,r,i){var n=this;if(this.key!==t||!this.fastAesKey){if(!this.subtle)return Promise.resolve(this.onWebCryptoError(e,t,r,i));this.key=t,this.fastAesKey=new mi(this.subtle,t,i);}return this.fastAesKey.expandKey().then((function(t){return n.subtle?(n.logOnce("WebCrypto AES decrypt"),new vi(n.subtle,new Uint8Array(r),i).decrypt(e.buffer,t)):Promise.reject(new Error("web crypto not initialized"))})).catch((function(a){return P.warn("[decrypter]: WebCrypto Error, disable WebCrypto API, "+a.name+": "+a.message),n.onWebCryptoError(e,t,r,i)}))},t.onWebCryptoError=function(e,t,r,i){var n=this.enableSoftwareAES;if(n){this.useSoftware=!0,this.logEnabled=!0,this.softwareDecrypt(e,t,r,i);var a=this.flush();if(a)return a.buffer}throw new Error("WebCrypto"+(n?" and softwareDecrypt":"")+": failed to decrypt data")},t.getValidChunk=function(e){var t=e,r=e.length-e.length%16;return r!==e.length&&(t=me(e,0,r),this.remainderData=me(e,r)),t},t.logOnce=function(e){this.logEnabled&&(P.log("[decrypter]: "+e),this.logEnabled=!1);},e}(),Ei=function(e){for(var t="",r=e.length,i=0;i<r;i++)t+="["+e.start(i).toFixed(3)+"-"+e.end(i).toFixed(3)+"]";return t},Ti="STOPPED",Si="IDLE",Li="KEY_LOADING",Ai="FRAG_LOADING",Ri="FRAG_LOADING_WAITING_RETRY",ki="WAITING_TRACK",bi="PARSING",Di="PARSED",wi="ENDED",Ii="ERROR",Ci="WAITING_INIT_PTS",_i="WAITING_LEVEL",Pi=function(e){function t(t,r,i,n,a){var s;return (s=e.call(this,n,t.logger)||this).hls=void 0,s.fragPrevious=null,s.fragCurrent=null,s.fragmentTracker=void 0,s.transmuxer=null,s._state=Ti,s.playlistType=void 0,s.media=null,s.mediaBuffer=null,s.config=void 0,s.bitrateTest=!1,s.lastCurrentTime=0,s.nextLoadPosition=0,s.startPosition=0,s.startTimeOffset=null,s.loadedmetadata=!1,s.retryDate=0,s.levels=null,s.fragmentLoader=void 0,s.keyLoader=void 0,s.levelLastLoaded=null,s.startFragRequested=!1,s.decrypter=void 0,s.initPTS=[],s.buffering=!0,s.loadingParts=!1,s.loopSn=void 0,s.onMediaSeeking=function(){var e=s,t=e.config,r=e.fragCurrent,i=e.media,n=e.mediaBuffer,a=e.state,o=i?i.currentTime:0,l=ii.bufferInfo(n||i,o,t.maxBufferHole);if(s.log("media seeking to "+(E(o)?o.toFixed(3):o)+", state: "+a),s.state===wi)s.resetLoadingState();else if(r){var u=t.maxFragLookUpTolerance,d=r.start-u,h=r.start+r.duration+u;if(!l.len||h<l.start||d>l.end){var c=o>h;(o<d||c)&&(c&&r.loader&&(s.log("seeking outside of buffer while fragment load in progress, cancel fragment load"),r.abortRequests(),s.resetLoadingState()),s.fragPrevious=null);}}if(i&&(s.fragmentTracker.removeFragmentsInRange(o,1/0,s.playlistType,!0),o>s.lastCurrentTime&&(s.lastCurrentTime=o),!s.loadingParts)){var f=Math.max(l.end,o),g=s.shouldLoadParts(s.getLevelDetails(),f);g&&(s.log("LL-Part loading ON after seeking to "+o.toFixed(2)+" with buffer @"+f.toFixed(2)),s.loadingParts=g);}s.loadedmetadata||l.len||(s.nextLoadPosition=s.startPosition=o),s.tickImmediate();},s.onMediaEnded=function(){s.startPosition=s.lastCurrentTime=0,s.playlistType===Lt&&s.hls.trigger(L.MEDIA_ENDED,{stalled:!1});},s.playlistType=a,s.hls=t,s.fragmentLoader=new hi(t.config),s.keyLoader=i,s.fragmentTracker=r,s.config=t.config,s.decrypter=new yi(t.config),s}u(t,e);var r=t.prototype;return r.registerListeners=function(){var e=this.hls;e.on(L.MEDIA_ATTACHED,this.onMediaAttached,this),e.on(L.MEDIA_DETACHING,this.onMediaDetaching,this),e.on(L.MANIFEST_LOADING,this.onManifestLoading,this),e.on(L.MANIFEST_LOADED,this.onManifestLoaded,this),e.on(L.ERROR,this.onError,this);},r.unregisterListeners=function(){var e=this.hls;e.off(L.MEDIA_ATTACHED,this.onMediaAttached,this),e.off(L.MEDIA_DETACHING,this.onMediaDetaching,this),e.off(L.MANIFEST_LOADING,this.onManifestLoading,this),e.off(L.MANIFEST_LOADED,this.onManifestLoaded,this),e.off(L.ERROR,this.onError,this);},r.doTick=function(){this.onTickEnd();},r.onTickEnd=function(){},r.startLoad=function(e){},r.stopLoad=function(){if(this.state!==Ti){this.fragmentLoader.abort(),this.keyLoader.abort(this.playlistType);var e=this.fragCurrent;null!=e&&e.loader&&(e.abortRequests(),this.fragmentTracker.removeFragment(e)),this.resetTransmuxer(),this.fragCurrent=null,this.fragPrevious=null,this.clearInterval(),this.clearNextTick(),this.state=Ti;}},r.pauseBuffering=function(){this.buffering=!1;},r.resumeBuffering=function(){this.buffering=!0;},r._streamEnded=function(e,t){if(t.live||e.nextStart||!e.end||!this.media)return !1;var r=t.partList;if(null!=r&&r.length){var i=r[r.length-1];return ii.isBuffered(this.media,i.start+i.duration/2)}var n=t.fragments[t.fragments.length-1].type;return this.fragmentTracker.isEndListAppended(n)},r.getLevelDetails=function(){var e;if(this.levels&&null!==this.levelLastLoaded)return null==(e=this.levelLastLoaded)?void 0:e.details},r.onMediaAttached=function(e,t){var r=this.media=this.mediaBuffer=t.media;r.addEventListener("seeking",this.onMediaSeeking),r.addEventListener("ended",this.onMediaEnded);var i=this.config;this.levels&&i.autoStartLoad&&this.state===Ti&&this.startLoad(i.startPosition);},r.onMediaDetaching=function(){var e=this.media;null!=e&&e.ended&&(this.log("MSE detaching and video ended, reset startPosition"),this.startPosition=this.lastCurrentTime=0),e&&(e.removeEventListener("seeking",this.onMediaSeeking),e.removeEventListener("ended",this.onMediaEnded)),this.keyLoader&&this.keyLoader.detach(),this.media=this.mediaBuffer=null,this.loopSn=void 0,this.startFragRequested=this.loadedmetadata=this.loadingParts=!1,this.fragmentTracker.removeAllFragments(),this.stopLoad();},r.onManifestLoading=function(){this.initPTS=[],this.levels=this.levelLastLoaded=this.fragCurrent=null,this.lastCurrentTime=this.startPosition=0,this.startFragRequested=!1;},r.onError=function(e,t){},r.onManifestLoaded=function(e,t){this.startTimeOffset=t.startTimeOffset;},r.onHandlerDestroying=function(){this.stopLoad(),this.transmuxer&&(this.transmuxer.destroy(),this.transmuxer=null),e.prototype.onHandlerDestroying.call(this),this.hls=this.onMediaSeeking=this.onMediaEnded=null;},r.onHandlerDestroyed=function(){this.state=Ti,this.fragmentLoader&&this.fragmentLoader.destroy(),this.keyLoader&&this.keyLoader.destroy(),this.decrypter&&this.decrypter.destroy(),this.hls=this.log=this.warn=this.decrypter=this.keyLoader=this.fragmentLoader=this.fragmentTracker=null,e.prototype.onHandlerDestroyed.call(this);},r.loadFragment=function(e,t,r){this.startFragRequested=!0,this._loadFragForPlayback(e,t,r);},r._loadFragForPlayback=function(e,t,r){var i=this;this._doFragLoad(e,t,r,(function(t){if(i.fragContextChanged(e))return i.warn("Fragment "+e.sn+(t.part?" p: "+t.part.index:"")+" of level "+e.level+" was dropped during download."),void i.fragmentTracker.removeFragment(e);e.stats.chunkCount++,i._handleFragmentLoadProgress(t);})).then((function(t){if(t){var r=i.state;i.fragContextChanged(e)?(r===Ai||!i.fragCurrent&&r===bi)&&(i.fragmentTracker.removeFragment(e),i.state=Si):("payload"in t&&(i.log("Loaded "+e.type+" sn: "+e.sn+" of "+i.playlistLabel()+" "+e.level),i.hls.trigger(L.FRAG_LOADED,t)),i._handleFragmentLoadComplete(t));}})).catch((function(t){i.state!==Ti&&i.state!==Ii&&(i.warn("Frag error: "+((null==t?void 0:t.message)||t)),i.resetFragmentLoading(e));}));},r.clearTrackerIfNeeded=function(e){var t,r=this.fragmentTracker;if(r.getState(e)===Qr){var i=e.type,n=this.getFwdBufferInfo(this.mediaBuffer,i),a=Math.max(e.duration,n?n.len:this.config.maxBufferLength),s=this.backtrackFragment;(1==(s?e.sn-s.sn:0)||this.reduceMaxBufferLength(a,e.duration))&&r.removeFragment(e);}else 0===(null==(t=this.mediaBuffer)?void 0:t.buffered.length)?r.removeAllFragments():r.hasParts(e.type)&&(r.detectPartialFragments({frag:e,part:null,stats:e.stats,id:e.type}),r.getState(e)===Jr&&r.removeFragment(e));},r.checkLiveUpdate=function(e){if(e.updated&&!e.live){var t=e.fragments[e.fragments.length-1];this.fragmentTracker.detectPartialFragments({frag:t,part:null,stats:t.stats,id:t.type});}e.fragments[0]||(e.deltaUpdateFailed=!0);},r.flushMainBuffer=function(e,t,r){if(void 0===r&&(r=null),e-t){var i={startOffset:e,endOffset:t,type:r};this.hls.trigger(L.BUFFER_FLUSHING,i);}},r._loadInitSegment=function(e,t){var r=this;this._doFragLoad(e,t).then((function(t){if(!t||r.fragContextChanged(e)||!r.levels)throw new Error("init load aborted");return t})).then((function(t){var i=r.hls,n=t.payload,a=e.decryptdata;if(n&&n.byteLength>0&&null!=a&&a.key&&a.iv&&re(a.method)){var s=self.performance.now();return r.decrypter.decrypt(new Uint8Array(n),a.key.buffer,a.iv.buffer,ie(a.method)).catch((function(t){throw i.trigger(L.ERROR,{type:A.MEDIA_ERROR,details:R.FRAG_DECRYPT_ERROR,fatal:!1,error:t,reason:t.message,frag:e}),t})).then((function(n){var a=self.performance.now();return i.trigger(L.FRAG_DECRYPTED,{frag:e,payload:n,stats:{tstart:s,tdecrypt:a}}),t.payload=n,r.completeInitSegmentLoad(t)}))}return r.completeInitSegmentLoad(t)})).catch((function(t){r.state!==Ti&&r.state!==Ii&&(r.warn(t),r.resetFragmentLoading(e));}));},r.completeInitSegmentLoad=function(e){if(!this.levels)throw new Error("init load aborted, missing levels");var t=e.frag.stats;this.state!==Ti&&(this.state=Si),e.frag.data=new Uint8Array(e.payload),t.parsing.start=t.buffering.start=self.performance.now(),t.parsing.end=t.buffering.end=self.performance.now(),this.tick();},r.fragContextChanged=function(e){var t=this.fragCurrent;return !e||!t||e.sn!==t.sn||e.level!==t.level},r.fragBufferedComplete=function(e,t){var r,i,n=this.mediaBuffer?this.mediaBuffer:this.media;if(this.log("Buffered "+e.type+" sn: "+e.sn+(t?" part: "+t.index:"")+" of "+this.fragInfo(e)+" > buffer:"+(n?Ei(ii.getBuffered(n)):"(detached)")+")"),"initSegment"!==e.sn){var a;if(e.type!==Rt){var s=e.elementaryStreams;if(!Object.keys(s).some((function(e){return !!s[e]})))return void(this.state=Si)}var o=null==(a=this.levels)?void 0:a[e.level];null!=o&&o.fragmentError&&(this.log("Resetting level fragment error count of "+o.fragmentError+" on frag buffered"),o.fragmentError=0);}this.state=Si,n&&(!this.loadedmetadata&&e.type==Lt&&n.buffered.length&&(null==(r=this.fragCurrent)?void 0:r.sn)===(null==(i=this.fragPrevious)?void 0:i.sn)&&(this.loadedmetadata=!0,this.seekToStartPos()),this.tick());},r.seekToStartPos=function(){},r._handleFragmentLoadComplete=function(e){var t=this.transmuxer;if(t){var r=e.frag,i=e.part,n=e.partsLoaded,a=!n||0===n.length||n.some((function(e){return !e})),s=new ni(r.level,r.sn,r.stats.chunkCount+1,0,i?i.index:-1,!a);t.flush(s);}},r._handleFragmentLoadProgress=function(e){},r._doFragLoad=function(e,t,r,i){var n,a=this;void 0===r&&(r=null),this.fragCurrent=e;var s=null==t?void 0:t.details;if(!this.levels||!s)throw new Error("frag load aborted, missing level"+(s?"":" detail")+"s");var o=null;!e.encrypted||null!=(n=e.decryptdata)&&n.key?!e.encrypted&&s.encryptedFragments.length&&this.keyLoader.loadClear(e,s.encryptedFragments):(this.log("Loading key for "+e.sn+" of ["+s.startSN+"-"+s.endSN+"], "+this.playlistLabel()+" "+e.level),this.state=Li,this.fragCurrent=e,o=this.keyLoader.load(e).then((function(e){if(!a.fragContextChanged(e.frag))return a.hls.trigger(L.KEY_LOADED,e),a.state===Li&&(a.state=Si),e})),this.hls.trigger(L.KEY_LOADING,{frag:e}),null===this.fragCurrent&&(o=Promise.reject(new Error("frag load aborted, context changed in KEY_LOADING"))));var l=this.fragPrevious;if("initSegment"!==e.sn&&(!l||e.sn!==l.sn)){var u=this.shouldLoadParts(t.details,e.end);u!==this.loadingParts&&(this.log("LL-Part loading "+(u?"ON":"OFF")+" loading sn "+(null==l?void 0:l.sn)+"->"+e.sn),this.loadingParts=u);}if(r=Math.max(e.start,r||0),this.loadingParts&&"initSegment"!==e.sn){var d=s.partList;if(d&&i){r>e.end&&s.fragmentHint&&(e=s.fragmentHint);var h=this.getNextPart(d,e,r);if(h>-1){var c,f=d[h];return this.log("Loading part sn: "+e.sn+" p: "+f.index+" cc: "+e.cc+" of playlist ["+s.startSN+"-"+s.endSN+"] parts [0-"+h+"-"+(d.length-1)+"] "+this.playlistLabel()+": "+e.level+", target: "+parseFloat(r.toFixed(3))),this.nextLoadPosition=f.start+f.duration,this.state=Ai,c=o?o.then((function(r){return !r||a.fragContextChanged(r.frag)?null:a.doFragPartsLoad(e,f,t,i)})).catch((function(e){return a.handleFragLoadError(e)})):this.doFragPartsLoad(e,f,t,i).catch((function(e){return a.handleFragLoadError(e)})),this.hls.trigger(L.FRAG_LOADING,{frag:e,part:f,targetBufferTime:r}),null===this.fragCurrent?Promise.reject(new Error("frag load aborted, context changed in FRAG_LOADING parts")):c}if(!e.url||this.loadedEndOfParts(d,r))return Promise.resolve(null)}}if("initSegment"!==e.sn&&this.loadingParts)this.log("LL-Part loading OFF after next part miss @"+r.toFixed(2)),this.loadingParts=!1;else if(!e.url)return Promise.resolve(null);this.log("Loading "+e.type+" sn: "+e.sn+" of "+this.fragInfo(e,!1)+") cc: "+e.cc+" "+(s?"["+s.startSN+"-"+s.endSN+"]":"")+", target: "+parseFloat(r.toFixed(3))),E(e.sn)&&!this.bitrateTest&&(this.nextLoadPosition=e.start+e.duration),this.state=Ai;var g,v=this.config.progressive;return g=v&&o?o.then((function(t){return !t||a.fragContextChanged(null==t?void 0:t.frag)?null:a.fragmentLoader.load(e,i)})).catch((function(e){return a.handleFragLoadError(e)})):Promise.all([this.fragmentLoader.load(e,v?i:void 0),o]).then((function(e){var t=e[0];return !v&&t&&i&&i(t),t})).catch((function(e){return a.handleFragLoadError(e)})),this.hls.trigger(L.FRAG_LOADING,{frag:e,targetBufferTime:r}),null===this.fragCurrent?Promise.reject(new Error("frag load aborted, context changed in FRAG_LOADING")):g},r.doFragPartsLoad=function(e,t,r,i){var n=this;return new Promise((function(a,s){var o,l=[],u=null==(o=r.details)?void 0:o.partList;!function t(o){n.fragmentLoader.loadPart(e,o,i).then((function(i){l[o.index]=i;var s=i.part;n.hls.trigger(L.FRAG_LOADED,i);var d=fr(r.details,e.sn,o.index+1)||gr(u,e.sn,o.index+1);if(!d)return a({frag:e,part:s,partsLoaded:l});t(d);})).catch(s);}(t);}))},r.handleFragLoadError=function(e){if("data"in e){var t=e.data;e.data&&t.details===R.INTERNAL_ABORTED?this.handleFragLoadAborted(t.frag,t.part):this.hls.trigger(L.ERROR,t);}else this.hls.trigger(L.ERROR,{type:A.OTHER_ERROR,details:R.INTERNAL_EXCEPTION,err:e,error:e,fatal:!0});return null},r._handleTransmuxerFlush=function(e){var t=this.getCurrentContext(e);if(t&&this.state===bi){var r=t.frag,i=t.part,n=t.level,a=self.performance.now();r.stats.parsing.end=a,i&&(i.stats.parsing.end=a);var s=this.getLevelDetails(),o=s&&r.sn>s.endSN||this.shouldLoadParts(s,r.end);o!==this.loadingParts&&(this.log("LL-Part loading "+(o?"ON":"OFF")+" after parsing segment ending @"+r.end.toFixed(2)),this.loadingParts=o),this.updateLevelTiming(r,i,n,e.partial);}else this.fragCurrent||this.state===Ti||this.state===Ii||(this.state=Si);},r.shouldLoadParts=function(e,t){if(this.config.lowLatencyMode){if(!e)return this.loadingParts;if(null!=e&&e.partList){var r,i=e.partList[0];if(t>=i.end+((null==(r=e.fragmentHint)?void 0:r.duration)||0)&&this.lastCurrentTime>i.start-i.fragment.duration)return !0}}return !1},r.getCurrentContext=function(e){var t=this.levels,r=this.fragCurrent,i=e.level,n=e.sn,a=e.part;if(null==t||!t[i])return this.warn("Levels object was unset while buffering fragment "+n+" of level "+i+". The current chunk will not be buffered."),null;var s=t[i],o=s.details,l=a>-1?fr(o,n,a):null,u=l?l.fragment:function(e,t,r){if(!e)return null;var i=e.fragments[t-e.startSN];return i||((i=e.fragmentHint)&&i.sn===t?i:t<e.startSN&&r&&r.sn===t?r:null)}(o,n,r);return u?(r&&r!==u&&(u.stats=r.stats),{frag:u,part:l,level:s}):null},r.bufferFragmentData=function(e,t,r,i,n){var a;if(e&&this.state===bi){var s=e.data1,o=e.data2,l=s;if(s&&o&&(l=Ne(s,o)),null!=(a=l)&&a.length){var u={type:e.type,frag:t,part:r,chunkMeta:i,parent:t.type,data:l};if(this.hls.trigger(L.BUFFER_APPENDING,u),e.dropped&&e.independent&&!r){if(n)return;this.flushBufferGap(t);}}}},r.flushBufferGap=function(e){var t=this.media;if(t)if(ii.isBuffered(t,t.currentTime)){var r=t.currentTime,i=ii.bufferInfo(t,r,0),n=e.duration,a=Math.min(2*this.config.maxFragLookUpTolerance,.25*n),s=Math.max(Math.min(e.start-a,i.end-a),r+a);e.start-s>a&&this.flushMainBuffer(s,e.start);}else this.flushMainBuffer(0,e.start);},r.getFwdBufferInfo=function(e,t){var r,i=this.getLoadPosition();if(!E(i))return null;var n=this.lastCurrentTime>i||null!=(r=this.media)&&r.paused?0:this.config.maxBufferHole;return this.getFwdBufferInfoAtPos(e,i,t,n)},r.getFwdBufferInfoAtPos=function(e,t,r,i){var n=ii.bufferInfo(e,t,i);if(0===n.len&&void 0!==n.nextStart){var a=this.fragmentTracker.getBufferedFrag(t,r);if(a&&(n.nextStart<=a.end||a.gap))return ii.bufferInfo(e,t,Math.max(n.nextStart,i))}return n},r.getMaxBufferLength=function(e){var t,r=this.config;return t=e?Math.max(8*r.maxBufferSize/e,r.maxBufferLength):r.maxBufferLength,Math.min(t,r.maxMaxBufferLength)},r.reduceMaxBufferLength=function(e,t){var r=this.config,i=Math.max(Math.min(e-t,r.maxBufferLength),t),n=Math.max(e-3*t,r.maxMaxBufferLength/2,i);return n>=i&&(r.maxMaxBufferLength=n,this.warn("Reduce max buffer length to "+n+"s"),!0)},r.getAppendedFrag=function(e,t){var r;void 0===t&&(t=Lt);var i=null==(r=this.fragmentTracker)?void 0:r.getAppendedFrag(e,t);return i&&"fragment"in i?i.fragment:i},r.getNextFragment=function(e,t){var r=t.fragments,i=r.length;if(!i)return null;var n=this.config,a=r[0].start,s=n.lowLatencyMode&&!!t.partList,o=null;if(t.live){var l=n.initialLiveManifestSize;if(i<l)return this.warn("Not enough fragments to start playback (have: "+i+", need: "+l+")"),null;(!t.PTSKnown&&!this.startFragRequested&&-1===this.startPosition||e<a)&&(s&&!this.loadingParts&&(this.log("LL-Part loading ON for initial live fragment"),this.loadingParts=!0),o=this.getInitialLiveFragment(t,r),this.startPosition=this.nextLoadPosition=o?this.hls.liveSyncPosition||o.start:e);}else e<=a&&(o=r[0]);if(!o){var u=this.loadingParts?t.partEnd:t.fragmentEnd;o=this.getFragmentAtPosition(e,u,t);}return this.mapToInitFragWhenRequired(o)},r.isLoopLoading=function(e,t){var r=this.fragmentTracker.getState(e);return (r===$r||r===Jr&&!!e.gap)&&this.nextLoadPosition>t},r.getNextFragmentLoopLoading=function(e,t,r,i,n){var a=null;if(e.gap&&(a=this.getNextFragment(this.nextLoadPosition,t))&&!a.gap&&r.nextStart){var s=this.getFwdBufferInfoAtPos(this.mediaBuffer?this.mediaBuffer:this.media,r.nextStart,i,0);if(null!==s&&r.len+s.len>=n){var o=a.sn;return this.loopSn!==o&&(this.log('buffer full after gaps in "'+i+'" playlist starting at sn: '+o),this.loopSn=o),null}}return this.loopSn=void 0,a},r.mapToInitFragWhenRequired=function(e){return null==e||!e.initSegment||null!=e&&e.initSegment.data||this.bitrateTest?e:e.initSegment},r.getNextPart=function(e,t,r){for(var i=-1,n=!1,a=!0,s=0,o=e.length;s<o;s++){var l=e[s];if(a=a&&!l.independent,i>-1&&r<l.start)break;var u=l.loaded;u?i=-1:(n||l.independent||a)&&l.fragment===t&&(i=s),n=u;}return i},r.loadedEndOfParts=function(e,t){var r=e[e.length-1];return r&&t>r.start&&r.loaded},r.getInitialLiveFragment=function(e,t){var r=this.fragPrevious,i=null;if(r){if(e.hasProgramDateTime&&(this.log("Live playlist, switching playlist, load frag with same PDT: "+r.programDateTime),i=function(e,t,r){if(null===t||!Array.isArray(e)||!e.length||!E(t))return null;if(t<(e[0].programDateTime||0))return null;if(t>=(e[e.length-1].endProgramDateTime||0))return null;r=r||0;for(var i=0;i<e.length;++i){var n=e[i];if(Rr(t,r,n))return n}return null}(t,r.endProgramDateTime,this.config.maxFragLookUpTolerance)),!i){var n=r.sn+1;if(n>=e.startSN&&n<=e.endSN){var a=t[n-e.startSN];r.cc===a.cc&&(i=a,this.log("Live playlist, switching playlist, load frag with next SN: "+i.sn));}i||(i=kr(t,r.cc))&&this.log("Live playlist, switching playlist, load frag with same CC: "+i.sn);}}else {var s=this.hls.liveSyncPosition;null!==s&&(i=this.getFragmentAtPosition(s,this.bitrateTest?e.fragmentEnd:e.edge,e));}return i},r.getFragmentAtPosition=function(e,t,r){var i,n,a=this.config,s=this.fragPrevious,o=r.fragments,l=r.endSN,u=r.fragmentHint,d=a.maxFragLookUpTolerance,h=r.partList,c=!!(this.loadingParts&&null!=h&&h.length&&u);if(c&&u&&!this.bitrateTest&&(o=o.concat(u),l=u.sn),i=e<t?Lr(s,o,e,e<this.lastCurrentTime||e>t-d||null!=(n=this.media)&&n.paused?0:d):o[o.length-1]){var f=i.sn-r.startSN,g=this.fragmentTracker.getState(i);if((g===$r||g===Jr&&i.gap)&&(s=i),s&&i.sn===s.sn&&(!c||h[0].fragment.sn>i.sn)&&s&&i.level===s.level){var v=o[f+1];i=i.sn<l&&this.fragmentTracker.getState(v)!==$r?v:null;}}return i},r.synchronizeToLiveEdge=function(e){var t=this.config,r=this.media;if(r){var i=this.hls.liveSyncPosition,n=r.currentTime,a=e.fragments[0].start,s=e.edge,o=n>=a-t.maxFragLookUpTolerance&&n<=s;if(null!==i&&r.duration>i&&(n<i||!o)){var l=void 0!==t.liveMaxLatencyDuration?t.liveMaxLatencyDuration:t.liveMaxLatencyDurationCount*e.targetduration;(!o&&r.readyState<4||n<s-l)&&(this.loadedmetadata||(this.nextLoadPosition=i),r.readyState&&(this.warn("Playback: "+n.toFixed(3)+" is located too far from the end of live sliding playlist: "+s+", reset currentTime to : "+i.toFixed(3)),r.currentTime=i));}}},r.alignPlaylists=function(e,t,r){var i=e.fragments.length;if(!i)return this.warn("No fragments in live playlist"),0;var n=e.fragments[0].start,a=!t,s=e.alignedSliding&&E(n);if(a||!s&&!n){var o=this.fragPrevious;li(0,r,e);var l=e.fragments[0].start;return this.log("Live playlist sliding: "+l.toFixed(2)+" start-sn: "+(t?t.startSN:"na")+"->"+e.startSN+" prev-sn: "+(o?o.sn:"na")+" fragments: "+i),l}return n},r.waitForCdnTuneIn=function(e){return e.live&&e.canBlockReload&&e.partTarget&&e.tuneInGoal>Math.max(e.partHoldBack,3*e.partTarget)},r.setStartPosition=function(e,t){var r=this.startPosition;if(r<t&&(r=-1),-1===r||-1===this.lastCurrentTime){var i=null!==this.startTimeOffset,n=i?this.startTimeOffset:e.startTimeOffset;null!==n&&E(n)?(r=t+n,n<0&&(r+=e.edge),r=Math.min(Math.max(t,r),t+e.totalduration),this.log("Start time offset "+n+" found in "+(i?"multivariant":"media")+" playlist, adjust startPosition to "+r),this.startPosition=r):e.live?r=this.hls.liveSyncPosition||t:this.startPosition=r=0,this.lastCurrentTime=r;}this.nextLoadPosition=r;},r.getLoadPosition=function(){var e=this.media,t=0;return this.loadedmetadata&&e?t=e.currentTime:this.nextLoadPosition&&(t=this.nextLoadPosition),t},r.handleFragLoadAborted=function(e,t){this.transmuxer&&"initSegment"!==e.sn&&e.stats.aborted&&(this.warn("Fragment "+e.sn+(t?" part "+t.index:"")+" of level "+e.level+" was aborted"),this.resetFragmentLoading(e));},r.resetFragmentLoading=function(e){this.fragCurrent&&(this.fragContextChanged(e)||this.state===Ri)||(this.state=Si);},r.onFragmentOrKeyLoadError=function(e,t){if(t.chunkMeta&&!t.frag){var r=this.getCurrentContext(t.chunkMeta);r&&(t.frag=r.frag);}var i=t.frag;if(i&&i.type===e&&this.levels)if(this.fragContextChanged(i)){var n;this.warn("Frag load error must match current frag to retry "+i.url+" > "+(null==(n=this.fragCurrent)?void 0:n.url));}else {var a=t.details===R.FRAG_GAP;a&&this.fragmentTracker.fragBuffered(i,!0);var s=t.errorAction,o=s||{},l=o.action,u=o.retryCount,d=void 0===u?0:u,h=o.retryConfig;if(s&&l===Ir&&h){this.resetStartWhenNotLoaded(this.levelLastLoaded);var c=yr(h,d);this.warn("Fragment "+i.sn+" of "+e+" "+i.level+" errored with "+t.details+", retrying loading "+(d+1)+"/"+h.maxNumRetry+" in "+c+"ms"),s.resolved=!0,this.retryDate=self.performance.now()+c,this.state=Ri;}else if(h&&s){if(this.resetFragmentErrors(e),!(d<h.maxNumRetry))return void this.warn(t.details+" reached or exceeded max retry ("+d+")");a||l===wr||(s.resolved=!0);}else (null==s?void 0:s.action)===Dr?this.state=_i:this.state=Ii;this.tickImmediate();}},r.reduceLengthAndFlushBuffer=function(e){if(this.state===bi||this.state===Di){var t=e.frag,r=e.parent,i=this.getFwdBufferInfo(this.mediaBuffer,r),n=i&&i.len>.5;n&&this.reduceMaxBufferLength(i.len,(null==t?void 0:t.duration)||10);var a=!n;return a&&this.warn("Buffer full error while media.currentTime is not buffered, flush "+r+" buffer"),t&&(this.fragmentTracker.removeFragment(t),this.nextLoadPosition=t.start),this.resetLoadingState(),a}return !1},r.resetFragmentErrors=function(e){e===At&&(this.fragCurrent=null),this.loadedmetadata||(this.startFragRequested=!1),this.state!==Ti&&(this.state=Si);},r.afterBufferFlushed=function(e,t,r){if(e){var i=ii.getBuffered(e);this.fragmentTracker.detectEvictedFragments(t,i,r),this.state===wi&&this.resetLoadingState();}},r.resetLoadingState=function(){this.log("Reset loading state"),this.fragCurrent=null,this.fragPrevious=null,this.state!==Ti&&(this.state=Si);},r.resetStartWhenNotLoaded=function(e){if(!this.loadedmetadata){this.startFragRequested=!1;var t=e?e.details:null;null!=t&&t.live?(this.startPosition=-1,this.setStartPosition(t,0),this.resetLoadingState()):this.nextLoadPosition=this.startPosition;}},r.resetWhenMissingContext=function(e){this.warn("The loading context changed while buffering fragment "+e.sn+" of level "+e.level+". This chunk will not be buffered."),this.removeUnbufferedFrags(),this.resetStartWhenNotLoaded(this.levelLastLoaded),this.resetLoadingState();},r.removeUnbufferedFrags=function(e){void 0===e&&(e=0),this.fragmentTracker.removeFragmentsInRange(e,1/0,this.playlistType,!1,!0);},r.updateLevelTiming=function(e,t,r,i){var n,a=this,s=r.details;if(s){if(!Object.keys(e.elementaryStreams).reduce((function(t,n){var o=e.elementaryStreams[n];if(o){var l=o.endPTS-o.startPTS;if(l<=0)return a.warn("Could not parse fragment "+e.sn+" "+n+" duration reliably ("+l+")"),t||!1;var u=i?0:ur(s,e,o.startPTS,o.endPTS,o.startDTS,o.endDTS);return a.hls.trigger(L.LEVEL_PTS_UPDATED,{details:s,level:r,drift:u,type:n,frag:e,start:o.startPTS,end:o.endPTS}),!0}return t}),!1)&&null===(null==(n=this.transmuxer)?void 0:n.error)){var o=new Error("Found no media in fragment "+e.sn+" of level "+e.level+" resetting transmuxer to fallback to playlist timing");if(0===r.fragmentError&&(r.fragmentError++,e.gap=!0,this.fragmentTracker.removeFragment(e),this.fragmentTracker.fragBuffered(e,!0)),this.warn(o.message),this.hls.trigger(L.ERROR,{type:A.MEDIA_ERROR,details:R.FRAG_PARSING_ERROR,fatal:!1,error:o,frag:e,reason:"Found no media in msn "+e.sn+' of level "'+r.url+'"'}),!this.hls)return;this.resetTransmuxer();}this.state=Di,this.log("Parsed "+e.type+" sn: "+e.sn+(t?" part: "+t.index:"")+" of "+this.fragInfo(e)+")"),this.hls.trigger(L.FRAG_PARSED,{frag:e,part:t});}else this.warn("level.details undefined");},r.playlistLabel=function(){return this.playlistType===Lt?"level":"track"},r.fragInfo=function(e,t){var r,i;return void 0===t&&(t=!0),this.playlistLabel()+" "+e.level+" (frag:["+(null!=(r=t?e.startPTS:e.start)?r:NaN).toFixed(3)+"-"+(null!=(i=t?e.endPTS:e.end)?i:NaN).toFixed(3)+"]"},r.resetTransmuxer=function(){var e;null==(e=this.transmuxer)||e.reset();},r.recoverWorkerError=function(e){"demuxerWorker"===e.event&&(this.fragmentTracker.removeAllFragments(),this.transmuxer&&(this.transmuxer.destroy(),this.transmuxer=null),this.resetStartWhenNotLoaded(this.levelLastLoaded),this.resetLoadingState());},n(t,[{key:"state",get:function(){return this._state},set:function(e){var t=this._state;t!==e&&(this._state=e,this.log(t+"->"+e));}}])}(Xr),xi=function(){function e(){this.chunks=[],this.dataLength=0;}var t=e.prototype;return t.push=function(e){this.chunks.push(e),this.dataLength+=e.length;},t.flush=function(){var e,t=this.chunks,r=this.dataLength;return t.length?(e=1===t.length?t[0]:function(e,t){for(var r=new Uint8Array(t),i=0,n=0;n<e.length;n++){var a=e[n];r.set(a,i),i+=a.length;}return r}(t,r),this.reset(),e):new Uint8Array(0)},t.reset=function(){this.chunks.length=0,this.dataLength=0;},e}();function Fi(e,t){return void 0===e&&(e=""),void 0===t&&(t=9e4),{type:e,id:-1,pid:-1,inputTimeScale:t,sequenceNumber:-1,samples:[],dropped:0}}function Mi(e,t){for(var r=t,i=0;Vt(e,t);)i+=10,i+=Gt(e,t+6),Ht(e,t+10)&&(i+=10),t+=i;if(i>0)return e.subarray(r,r+i)}function Oi(e){if(8===e.data.byteLength){var t=new Uint8Array(e.data),r=1&t[3],i=(t[4]<<23)+(t[5]<<15)+(t[6]<<7)+t[7];return i/=45,r&&(i+=47721858.84),Math.round(i)}}function Ni(e){for(var t=jt(e),r=0;r<t.length;r++){var i=t[r];if(qt(i))return Oi(i)}}function Ui(e,t){return Vt(e,t)&&Gt(e,t+6)+10<=e.length-t}var Bi=function(){function e(){this._audioTrack=void 0,this._id3Track=void 0,this.frameIndex=0,this.cachedData=null,this.basePTS=null,this.initPTS=null,this.lastPTS=null;}var t=e.prototype;return t.resetInitSegment=function(e,t,r,i){this._id3Track={type:"id3",id:3,pid:-1,inputTimeScale:9e4,sequenceNumber:0,samples:[],dropped:0};},t.resetTimeStamp=function(e){this.initPTS=e,this.resetContiguity();},t.resetContiguity=function(){this.basePTS=null,this.lastPTS=null,this.frameIndex=0;},t.canParse=function(e,t){return !1},t.appendFrame=function(e,t,r){},t.demux=function(e,t){this.cachedData&&(e=Ne(this.cachedData,e),this.cachedData=null);var r,i=Mi(e,0),n=i?i.length:0,a=this._audioTrack,s=this._id3Track,o=i?Ni(i):void 0,l=e.length;for((null===this.basePTS||0===this.frameIndex&&E(o))&&(this.basePTS=Gi(o,t,this.initPTS),this.lastPTS=this.basePTS),null===this.lastPTS&&(this.lastPTS=this.basePTS),i&&i.length>0&&s.samples.push({pts:this.lastPTS,dts:this.lastPTS,data:i,type:xt,duration:Number.POSITIVE_INFINITY});n<l;){if(this.canParse(e,n)){var u=this.appendFrame(a,e,n);u?(this.frameIndex++,this.lastPTS=u.sample.pts,r=n+=u.length):n=l;}else Ui(e,n)?(i=Mi(e,n),s.samples.push({pts:this.lastPTS,dts:this.lastPTS,data:i,type:xt,duration:Number.POSITIVE_INFINITY}),r=n+=i.length):n++;if(n===l&&r!==l){var d=me(e,r);this.cachedData?this.cachedData=Ne(this.cachedData,d):this.cachedData=d;}}return {audioTrack:a,videoTrack:Fi(),id3Track:s,textTrack:Fi()}},t.demuxSampleAes=function(e,t,r){return Promise.reject(new Error("["+this+"] This demuxer does not support Sample-AES decryption"))},t.flush=function(e){var t=this.cachedData;return t&&(this.cachedData=null,this.demux(t,0)),{audioTrack:this._audioTrack,videoTrack:Fi(),id3Track:this._id3Track,textTrack:Fi()}},t.destroy=function(){},e}(),Gi=function(e,t,r){return E(e)?90*e:9e4*t+(r?9e4*r.baseTime/r.timescale:0)};function Ki(e,t){return 255===e[t]&&240==(246&e[t+1])}function Hi(e,t){return 1&e[t+1]?7:9}function Vi(e,t){return (3&e[t+3])<<11|e[t+4]<<3|(224&e[t+5])>>>5}function Yi(e,t){return t+1<e.length&&Ki(e,t)}function Wi(e,t){if(Yi(e,t)){var r=Hi(e,t);if(t+r>=e.length)return !1;var i=Vi(e,t);if(i<=r)return !1;var n=t+i;return n===e.length||Yi(e,n)}return !1}function ji(e,t,r,i,n){if(!e.samplerate){var a=function(e,t,r,i){var n,a,s,o,l,u=navigator.userAgent.toLowerCase(),d=i,h=[96e3,88200,64e3,48e3,44100,32e3,24e3,22050,16e3,12e3,11025,8e3,7350];n=a=1+((192&t[r+2])>>>6);var c=(60&t[r+2])>>>2;if(!(c>h.length-1))return o=(1&t[r+2])<<2,o|=(192&t[r+3])>>>6,P.log("manifest codec:"+i+", ADTS type:"+n+", samplingIndex:"+c),/firefox|palemoon/i.test(u)?c>=6?(n=5,l=new Array(4),s=c-3):(n=2,l=new Array(2),s=c):-1!==u.indexOf("android")?(n=2,l=new Array(2),s=c):(n=5,l=new Array(4),i&&(-1!==i.indexOf("mp4a.40.29")||-1!==i.indexOf("mp4a.40.5"))||!i&&c>=6?s=c-3:((i&&-1!==i.indexOf("mp4a.40.2")&&(c>=6&&1===o||/vivaldi/i.test(u))||!i&&1===o)&&(n=2,l=new Array(2)),s=c)),l[0]=n<<3,l[0]|=(14&c)>>1,l[1]|=(1&c)<<7,l[1]|=o<<3,5===n&&(l[1]|=(14&s)>>1,l[2]=(1&s)<<7,l[2]|=8,l[3]=0),{config:l,samplerate:h[c],channelCount:o,codec:"mp4a.40."+n,parsedCodec:"mp4a.40."+a,manifestCodec:d};var f=new Error("invalid ADTS sampling index:"+c);e.emit(L.ERROR,L.ERROR,{type:A.MEDIA_ERROR,details:R.FRAG_PARSING_ERROR,fatal:!0,error:f,reason:f.message});}(t,r,i,n);if(!a)return;e.config=a.config,e.samplerate=a.samplerate,e.channelCount=a.channelCount,e.codec=a.codec,e.manifestCodec=a.manifestCodec,e.parsedCodec=a.parsedCodec,P.log("parsed codec:"+e.parsedCodec+", codec:"+e.codec+", rate:"+a.samplerate+", channels:"+a.channelCount);}}function qi(e){return 9216e4/e}function Xi(e,t,r,i,n){var a,s=i+n*qi(e.samplerate),o=function(e,t){var r=Hi(e,t);if(t+r<=e.length){var i=Vi(e,t)-r;if(i>0)return {headerLength:r,frameLength:i}}}(t,r);if(o){var l=o.frameLength,u=o.headerLength,d=u+l,h=Math.max(0,r+d-t.length);h?(a=new Uint8Array(d-u)).set(t.subarray(r+u,t.length),0):a=t.subarray(r+u,r+d);var c={unit:a,pts:s};return h||e.samples.push(c),{sample:c,length:d,missing:h}}var f=t.length-r;return (a=new Uint8Array(f)).set(t.subarray(r,t.length),0),{sample:{unit:a,pts:s},length:f,missing:-1}}var zi=null,Qi=[32,64,96,128,160,192,224,256,288,320,352,384,416,448,32,48,56,64,80,96,112,128,160,192,224,256,320,384,32,40,48,56,64,80,96,112,128,160,192,224,256,320,32,48,56,64,80,96,112,128,144,160,176,192,224,256,8,16,24,32,40,48,56,64,80,96,112,128,144,160],Ji=[44100,48e3,32e3,22050,24e3,16e3,11025,12e3,8e3],$i=[[0,72,144,12],[0,0,0,0],[0,72,144,12],[0,144,144,12]],Zi=[0,1,1,4];function en(e,t,r,i,n){if(!(r+24>t.length)){var a=tn(t,r);if(a&&r+a.frameLength<=t.length){var s=i+n*(9e4*a.samplesPerFrame/a.sampleRate),o={unit:t.subarray(r,r+a.frameLength),pts:s,dts:s};return e.config=[],e.channelCount=a.channelCount,e.samplerate=a.sampleRate,e.samples.push(o),{sample:o,length:a.frameLength,missing:0}}}}function tn(e,t){var r=e[t+1]>>3&3,i=e[t+1]>>1&3,n=e[t+2]>>4&15,a=e[t+2]>>2&3;if(1!==r&&0!==n&&15!==n&&3!==a){var s=e[t+2]>>1&1,o=e[t+3]>>6,l=1e3*Qi[14*(3===r?3-i:3===i?3:4)+n-1],u=Ji[3*(3===r?0:2===r?1:2)+a],d=3===o?1:2,h=$i[r][i],c=Zi[i],f=8*h*c,g=Math.floor(h*l/u+s)*c;if(null===zi){var v=(navigator.userAgent||"").match(/Chrome\/(\d+)/i);zi=v?parseInt(v[1]):0;}return !!zi&&zi<=87&&2===i&&l>=224e3&&0===o&&(e[t+3]=128|e[t+3]),{sampleRate:u,channelCount:d,frameLength:g,samplesPerFrame:f}}}function rn(e,t){return 255===e[t]&&224==(224&e[t+1])&&0!=(6&e[t+1])}function nn(e,t){return t+1<e.length&&rn(e,t)}function an(e,t){if(t+1<e.length&&rn(e,t)){var r=tn(e,t),i=4;null!=r&&r.frameLength&&(i=r.frameLength);var n=t+i;return n===e.length||nn(e,n)}return !1}var sn=function(e){function t(t,r){var i;return (i=e.call(this)||this).observer=void 0,i.config=void 0,i.observer=t,i.config=r,i}u(t,e);var r=t.prototype;return r.resetInitSegment=function(t,r,i,n){e.prototype.resetInitSegment.call(this,t,r,i,n),this._audioTrack={container:"audio/adts",type:"audio",id:2,pid:-1,sequenceNumber:0,segmentCodec:"aac",samples:[],manifestCodec:r,duration:n,inputTimeScale:9e4,dropped:0};},t.probe=function(e,t){if(!e)return !1;var r=Mi(e,0),i=(null==r?void 0:r.length)||0;if(an(e,i))return !1;for(var n=e.length;i<n;i++)if(Wi(e,i))return t.log("ADTS sync word found !"),!0;return !1},r.canParse=function(e,t){return function(e,t){return function(e,t){return t+5<e.length}(e,t)&&Ki(e,t)&&Vi(e,t)<=e.length-t}(e,t)},r.appendFrame=function(e,t,r){ji(e,this.observer,t,r,e.manifestCodec);var i=Xi(e,t,r,this.basePTS,this.frameIndex);if(i&&0===i.missing)return i},t}(Bi),on=/\/emsg[-/]ID3/i,ln=function(){function e(e,t){this.remainderData=null,this.timeOffset=0,this.config=void 0,this.videoTrack=void 0,this.audioTrack=void 0,this.id3Track=void 0,this.txtTrack=void 0,this.config=t;}var t=e.prototype;return t.resetTimeStamp=function(){},t.resetInitSegment=function(e,t,r,i){var n=this.videoTrack=Fi("video",1),a=this.audioTrack=Fi("audio",1),s=this.txtTrack=Fi("text",1);if(this.id3Track=Fi("id3",1),this.timeOffset=0,null!=e&&e.byteLength){var o=Ce(e);if(o.video){var l=o.video,u=l.id,d=l.timescale,h=l.codec;n.id=u,n.timescale=s.timescale=d,n.codec=h;}if(o.audio){var c=o.audio,f=c.id,g=c.timescale,v=c.codec;a.id=f,a.timescale=g,a.codec=v;}s.id=Se.text,n.sampleDuration=0,n.duration=a.duration=i;}},t.resetContiguity=function(){this.remainderData=null;},e.probe=function(e){return function(e){for(var t=e.byteLength,r=0;r<t;){var i=Re(e,r);if(i>8&&109===e[r+4]&&111===e[r+5]&&111===e[r+6]&&102===e[r+7])return !0;r=i>1?r+i:t;}return !1}(e)},t.demux=function(e,t){this.timeOffset=t;var r=e,i=this.videoTrack,n=this.txtTrack;if(this.config.progressive){this.remainderData&&(r=Ne(this.remainderData,e));var a=function(e){var t={valid:null,remainder:null},r=we(e,["moof"]);if(r.length<2)return t.remainder=e,t;var i=r[r.length-1];return t.valid=me(e,0,i.byteOffset-8),t.remainder=me(e,i.byteOffset-8),t}(r);this.remainderData=a.remainder,i.samples=a.valid||new Uint8Array;}else i.samples=r;var s=this.extractID3Track(i,t);return n.samples=Ue(t,i),{videoTrack:i,audioTrack:this.audioTrack,id3Track:s,textTrack:this.txtTrack}},t.flush=function(){var e=this.timeOffset,t=this.videoTrack,r=this.txtTrack;t.samples=this.remainderData||new Uint8Array,this.remainderData=null;var i=this.extractID3Track(t,this.timeOffset);return r.samples=Ue(e,t),{videoTrack:t,audioTrack:Fi(),id3Track:i,textTrack:Fi()}},t.extractID3Track=function(e,t){var r=this.id3Track;if(e.samples.length){var i=we(e.samples,["emsg"]);i&&i.forEach((function(e){var i=function(e){var t=e[0],r="",i="",n=0,a=0,s=0,o=0,l=0,u=0;if(0===t){for(;"\0"!==Le(e.subarray(u,u+1));)r+=Le(e.subarray(u,u+1)),u+=1;for(r+=Le(e.subarray(u,u+1)),u+=1;"\0"!==Le(e.subarray(u,u+1));)i+=Le(e.subarray(u,u+1)),u+=1;i+=Le(e.subarray(u,u+1)),u+=1,n=Re(e,12),a=Re(e,16),o=Re(e,20),l=Re(e,24),u=28;}else if(1===t){n=Re(e,u+=4);var d=Re(e,u+=4),h=Re(e,u+=4);for(u+=4,s=Math.pow(2,32)*d+h,T(s)||(s=Number.MAX_SAFE_INTEGER,P.warn("Presentation time exceeds safe integer limit and wrapped to max safe integer in parsing emsg box")),o=Re(e,u),l=Re(e,u+=4),u+=4;"\0"!==Le(e.subarray(u,u+1));)r+=Le(e.subarray(u,u+1)),u+=1;for(r+=Le(e.subarray(u,u+1)),u+=1;"\0"!==Le(e.subarray(u,u+1));)i+=Le(e.subarray(u,u+1)),u+=1;i+=Le(e.subarray(u,u+1)),u+=1;}return {schemeIdUri:r,value:i,timeScale:n,presentationTime:s,presentationTimeDelta:a,eventDuration:o,id:l,payload:e.subarray(u,e.byteLength)}}(e);if(on.test(i.schemeIdUri)){var n=E(i.presentationTime)?i.presentationTime/i.timeScale:t+i.presentationTimeDelta/i.timeScale,a=4294967295===i.eventDuration?Number.POSITIVE_INFINITY:i.eventDuration/i.timeScale;a<=.001&&(a=Number.POSITIVE_INFINITY);var s=i.payload;r.samples.push({data:s,len:s.byteLength,dts:n,pts:n,type:Mt,duration:a});}}));}return r},t.demuxSampleAes=function(e,t,r){return Promise.reject(new Error("The MP4 demuxer does not support SAMPLE-AES decryption"))},t.destroy=function(){},e}(),un=function(e,t){var r=0,i=5;t+=i;for(var n=new Uint32Array(1),a=new Uint32Array(1),s=new Uint8Array(1);i>0;){s[0]=e[t];var o=Math.min(i,8),l=8-o;a[0]=4278190080>>>24+l<<l,n[0]=(s[0]&a[0])>>l,r=r?r<<o|n[0]:n[0],t+=1,i-=o;}return r},dn=function(e){function t(t){var r;return (r=e.call(this)||this).observer=void 0,r.observer=t,r}u(t,e);var r=t.prototype;return r.resetInitSegment=function(t,r,i,n){e.prototype.resetInitSegment.call(this,t,r,i,n),this._audioTrack={container:"audio/ac-3",type:"audio",id:2,pid:-1,sequenceNumber:0,segmentCodec:"ac3",samples:[],manifestCodec:r,duration:n,inputTimeScale:9e4,dropped:0};},r.canParse=function(e,t){return t+64<e.length},r.appendFrame=function(e,t,r){var i=hn(e,t,r,this.basePTS,this.frameIndex);if(-1!==i)return {sample:e.samples[e.samples.length-1],length:i,missing:0}},t.probe=function(e){if(!e)return !1;var t=Mi(e,0);if(!t)return !1;var r=t.length;return 11===e[r]&&119===e[r+1]&&void 0!==Ni(t)&&un(e,r)<16},t}(Bi);function hn(e,t,r,i,n){if(r+8>t.length)return -1;if(11!==t[r]||119!==t[r+1])return -1;var a=t[r+4]>>6;if(a>=3)return -1;var s=[48e3,44100,32e3][a],o=63&t[r+4],l=2*[64,69,96,64,70,96,80,87,120,80,88,120,96,104,144,96,105,144,112,121,168,112,122,168,128,139,192,128,140,192,160,174,240,160,175,240,192,208,288,192,209,288,224,243,336,224,244,336,256,278,384,256,279,384,320,348,480,320,349,480,384,417,576,384,418,576,448,487,672,448,488,672,512,557,768,512,558,768,640,696,960,640,697,960,768,835,1152,768,836,1152,896,975,1344,896,976,1344,1024,1114,1536,1024,1115,1536,1152,1253,1728,1152,1254,1728,1280,1393,1920,1280,1394,1920][3*o+a];if(r+l>t.length)return -1;var u=t[r+6]>>5,d=0;2===u?d+=2:(1&u&&1!==u&&(d+=2),4&u&&(d+=2));var h=(t[r+6]<<8|t[r+7])>>12-d&1,c=[2,1,2,3,3,4,4,5][u]+h,f=t[r+5]>>3,g=7&t[r+5],v=new Uint8Array([a<<6|f<<1|g>>2,(3&g)<<6|u<<3|h<<2|o>>4,o<<4&224]),m=i+n*(1536/s*9e4),p=t.subarray(r,r+l);return e.config=v,e.channelCount=c,e.samplerate=s,e.samples.push({unit:p,pts:m}),l}var cn=function(){function e(){this.VideoSample=null;}var t=e.prototype;return t.createVideoSample=function(e,t,r,i){return {key:e,frame:!1,pts:t,dts:r,units:[],debug:i,length:0}},t.getLastNalUnit=function(e){var t,r,i=this.VideoSample;if(i&&0!==i.units.length||(i=e[e.length-1]),null!=(t=i)&&t.units){var n=i.units;r=n[n.length-1];}return r},t.pushAccessUnit=function(e,t){if(e.units.length&&e.frame){if(void 0===e.pts){var r=t.samples,i=r.length;if(!i)return void t.dropped++;var n=r[i-1];e.pts=n.pts,e.dts=n.dts;}t.samples.push(e);}e.debug.length&&P.log(e.pts+"/"+e.dts+":"+e.debug);},t.parseNALu=function(e,t,r){var i,n,a=t.byteLength,s=e.naluState||0,o=s,l=[],u=0,d=-1,h=0;for(-1===s&&(d=0,h=this.getNALuType(t,0),s=0,u=1);u<a;)if(i=t[u++],s)if(1!==s)if(i)if(1===i){if(n=u-s-1,d>=0){var c={data:t.subarray(d,n),type:h};l.push(c);}else {var f=this.getLastNalUnit(e.samples);f&&(o&&u<=4-o&&f.state&&(f.data=f.data.subarray(0,f.data.byteLength-o)),n>0&&(f.data=Ne(f.data,t.subarray(0,n)),f.state=0));}u<a?(d=u,h=this.getNALuType(t,u),s=0):s=-1;}else s=0;else s=3;else s=i?0:2;else s=i?0:1;if(d>=0&&s>=0){var g={data:t.subarray(d,a),type:h,state:s};l.push(g);}if(0===l.length){var v=this.getLastNalUnit(e.samples);v&&(v.data=Ne(v.data,t));}return e.naluState=s,l},e}(),fn=function(){function e(e){this.data=void 0,this.bytesAvailable=void 0,this.word=void 0,this.bitsAvailable=void 0,this.data=e,this.bytesAvailable=e.byteLength,this.word=0,this.bitsAvailable=0;}var t=e.prototype;return t.loadWord=function(){var e=this.data,t=this.bytesAvailable,r=e.byteLength-t,i=new Uint8Array(4),n=Math.min(4,t);if(0===n)throw new Error("no bytes available");i.set(e.subarray(r,r+n)),this.word=new DataView(i.buffer).getUint32(0),this.bitsAvailable=8*n,this.bytesAvailable-=n;},t.skipBits=function(e){var t;e=Math.min(e,8*this.bytesAvailable+this.bitsAvailable),this.bitsAvailable>e?(this.word<<=e,this.bitsAvailable-=e):(e-=this.bitsAvailable,e-=(t=e>>3)<<3,this.bytesAvailable-=t,this.loadWord(),this.word<<=e,this.bitsAvailable-=e);},t.readBits=function(e){var t=Math.min(this.bitsAvailable,e),r=this.word>>>32-t;if(e>32&&P.error("Cannot read more than 32 bits at a time"),this.bitsAvailable-=t,this.bitsAvailable>0)this.word<<=t;else {if(!(this.bytesAvailable>0))throw new Error("no bits available");this.loadWord();}return (t=e-t)>0&&this.bitsAvailable?r<<t|this.readBits(t):r},t.skipLZ=function(){var e;for(e=0;e<this.bitsAvailable;++e)if(0!=(this.word&2147483648>>>e))return this.word<<=e,this.bitsAvailable-=e,e;return this.loadWord(),e+this.skipLZ()},t.skipUEG=function(){this.skipBits(1+this.skipLZ());},t.skipEG=function(){this.skipBits(1+this.skipLZ());},t.readUEG=function(){var e=this.skipLZ();return this.readBits(e+1)-1},t.readEG=function(){var e=this.readUEG();return 1&e?1+e>>>1:-1*(e>>>1)},t.readBoolean=function(){return 1===this.readBits(1)},t.readUByte=function(){return this.readBits(8)},t.readUShort=function(){return this.readBits(16)},t.readUInt=function(){return this.readBits(32)},e}(),gn=function(e){function t(){return e.apply(this,arguments)||this}u(t,e);var r=t.prototype;return r.parsePES=function(e,t,r,i,n){var a,s=this,o=this.parseNALu(e,r.data,i),l=this.VideoSample,u=!1;r.data=null,l&&o.length&&!e.audFound&&(this.pushAccessUnit(l,e),l=this.VideoSample=this.createVideoSample(!1,r.pts,r.dts,"")),o.forEach((function(i){var o;switch(i.type){case 1:var d=!1;a=!0;var h,c=i.data;if(u&&c.length>4){var f=s.readSliceType(c);2!==f&&4!==f&&7!==f&&9!==f||(d=!0);}d&&null!=(h=l)&&h.frame&&!l.key&&(s.pushAccessUnit(l,e),l=s.VideoSample=null),l||(l=s.VideoSample=s.createVideoSample(!0,r.pts,r.dts,"")),l.frame=!0,l.key=d;break;case 5:a=!0,null!=(o=l)&&o.frame&&!l.key&&(s.pushAccessUnit(l,e),l=s.VideoSample=null),l||(l=s.VideoSample=s.createVideoSample(!0,r.pts,r.dts,"")),l.key=!0,l.frame=!0;break;case 6:a=!0,Ge(i.data,1,r.pts,t.samples);break;case 7:var g,v;a=!0,u=!0;var m=i.data,p=s.readSPS(m);if(!e.sps||e.width!==p.width||e.height!==p.height||(null==(g=e.pixelRatio)?void 0:g[0])!==p.pixelRatio[0]||(null==(v=e.pixelRatio)?void 0:v[1])!==p.pixelRatio[1]){e.width=p.width,e.height=p.height,e.pixelRatio=p.pixelRatio,e.sps=[m],e.duration=n;for(var y=m.subarray(1,4),E="avc1.",T=0;T<3;T++){var S=y[T].toString(16);S.length<2&&(S="0"+S),E+=S;}e.codec=E;}break;case 8:a=!0,e.pps=[i.data];break;case 9:a=!0,e.audFound=!0,l&&s.pushAccessUnit(l,e),l=s.VideoSample=s.createVideoSample(!1,r.pts,r.dts,"");break;case 12:a=!0;break;default:a=!1,l&&(l.debug+="unknown NAL "+i.type+" ");}l&&a&&l.units.push(i);})),i&&l&&(this.pushAccessUnit(l,e),this.VideoSample=null);},r.getNALuType=function(e,t){return 31&e[t]},r.readSliceType=function(e){var t=new fn(e);return t.readUByte(),t.readUEG(),t.readUEG()},r.skipScalingList=function(e,t){for(var r=8,i=8,n=0;n<e;n++)0!==i&&(i=(r+t.readEG()+256)%256),r=0===i?r:i;},r.readSPS=function(e){var t,r,i,n=new fn(e),a=0,s=0,o=0,l=0,u=n.readUByte.bind(n),d=n.readBits.bind(n),h=n.readUEG.bind(n),c=n.readBoolean.bind(n),f=n.skipBits.bind(n),g=n.skipEG.bind(n),v=n.skipUEG.bind(n),m=this.skipScalingList.bind(this);u();var p=u();if(d(5),f(3),u(),v(),100===p||110===p||122===p||244===p||44===p||83===p||86===p||118===p||128===p){var y=h();if(3===y&&f(1),v(),v(),f(1),c())for(r=3!==y?8:12,i=0;i<r;i++)c()&&m(i<6?16:64,n);}v();var E=h();if(0===E)h();else if(1===E)for(f(1),g(),g(),t=h(),i=0;i<t;i++)g();v(),f(1);var T=h(),S=h(),L=d(1);0===L&&f(1),f(1),c()&&(a=h(),s=h(),o=h(),l=h());var A=[1,1];if(c()&&c())switch(u()){case 1:A=[1,1];break;case 2:A=[12,11];break;case 3:A=[10,11];break;case 4:A=[16,11];break;case 5:A=[40,33];break;case 6:A=[24,11];break;case 7:A=[20,11];break;case 8:A=[32,11];break;case 9:A=[80,33];break;case 10:A=[18,11];break;case 11:A=[15,11];break;case 12:A=[64,33];break;case 13:A=[160,99];break;case 14:A=[4,3];break;case 15:A=[3,2];break;case 16:A=[2,1];break;case 255:A=[u()<<8|u(),u()<<8|u()];}return {width:Math.ceil(16*(T+1)-2*a-2*s),height:(2-L)*(S+1)*16-(L?2:4)*(o+l),pixelRatio:A}},t}(cn),vn=function(e){function t(){for(var t,r=arguments.length,i=new Array(r),n=0;n<r;n++)i[n]=arguments[n];return (t=e.call.apply(e,[this].concat(i))||this).initVPS=null,t}u(t,e);var r=t.prototype;return r.parsePES=function(e,t,r,i,n){var a,s=this,o=this.parseNALu(e,r.data,i),l=this.VideoSample,u=!1;r.data=null,l&&o.length&&!e.audFound&&(this.pushAccessUnit(l,e),l=this.VideoSample=this.createVideoSample(!1,r.pts,r.dts,"")),o.forEach((function(i){var o;switch(i.type){case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:case 8:case 9:l||(l=s.VideoSample=s.createVideoSample(!1,r.pts,r.dts,"")),l.frame=!0,a=!0;break;case 16:case 17:case 18:case 21:var d;a=!0,u&&null!=(d=l)&&d.frame&&!l.key&&(s.pushAccessUnit(l,e),l=s.VideoSample=null),l||(l=s.VideoSample=s.createVideoSample(!0,r.pts,r.dts,"")),l.key=!0,l.frame=!0;break;case 19:case 20:a=!0,null!=(o=l)&&o.frame&&!l.key&&(s.pushAccessUnit(l,e),l=s.VideoSample=null),l||(l=s.VideoSample=s.createVideoSample(!0,r.pts,r.dts,"")),l.key=!0,l.frame=!0;break;case 39:a=!0,Ge(i.data,2,r.pts,t.samples);break;case 32:if(a=!0,!e.vps){var h=s.readVPS(i.data);e.params=c({},h),s.initVPS=i.data;}e.vps=[i.data];break;case 33:if(a=!0,u=!0,"object"==typeof e.params){if(void 0===e.vps||e.vps[0]===s.initVPS||void 0===e.sps||s.matchSPS(e.sps[0],i.data)||(s.initVPS=e.vps[0],e.sps=e.pps=void 0),!e.sps){var f=s.readSPS(i.data);for(var g in e.width=f.width,e.height=f.height,e.pixelRatio=f.pixelRatio,e.duration=n,e.codec=f.codecString,e.sps=[],f.params)e.params[g]=f.params[g];}void 0!==e.vps&&e.vps[0]===s.initVPS&&e.sps.push(i.data);}l||(l=s.VideoSample=s.createVideoSample(!0,r.pts,r.dts,"")),l.key=!0;break;case 34:if(a=!0,"object"==typeof e.params){if(!e.pps){e.pps=[];var v=s.readPPS(i.data);for(var m in v)e.params[m]=v[m];}null===s.initVPS&&0!==e.pps.length||e.pps.push(i.data);}break;case 35:a=!0,e.audFound=!0,l&&s.pushAccessUnit(l,e),l=s.VideoSample=s.createVideoSample(!1,r.pts,r.dts,"");break;default:a=!1,l&&(l.debug+="unknown or irrelevant NAL "+i.type+" ");}l&&a&&l.units.push(i);})),i&&l&&(this.pushAccessUnit(l,e),this.VideoSample=null);},r.getNALuType=function(e,t){return (126&e[t])>>>1},r.ebsp2rbsp=function(e){for(var t=new Uint8Array(e.byteLength),r=0,i=0;i<e.byteLength;i++)i>=2&&3===e[i]&&0===e[i-1]&&0===e[i-2]||(t[r]=e[i],r++);return new Uint8Array(t.buffer,0,r)},r.readVPS=function(e){var t=new fn(e);return t.readUByte(),t.readUByte(),t.readBits(4),t.skipBits(2),t.readBits(6),{numTemporalLayers:t.readBits(3)+1,temporalIdNested:t.readBoolean()}},r.readSPS=function(e){var t=new fn(this.ebsp2rbsp(e));t.readUByte(),t.readUByte(),t.readBits(4);var r=t.readBits(3);t.readBoolean();for(var i=t.readBits(2),n=t.readBoolean(),a=t.readBits(5),s=t.readUByte(),o=t.readUByte(),l=t.readUByte(),u=t.readUByte(),d=t.readUByte(),h=t.readUByte(),c=t.readUByte(),f=t.readUByte(),g=t.readUByte(),v=t.readUByte(),m=t.readUByte(),p=[],y=[],E=0;E<r;E++)p.push(t.readBoolean()),y.push(t.readBoolean());if(r>0)for(var T=r;T<8;T++)t.readBits(2);for(var S=0;S<r;S++)p[S]&&(t.readUByte(),t.readUByte(),t.readUByte(),t.readUByte(),t.readUByte(),t.readUByte(),t.readUByte(),t.readUByte(),t.readUByte(),t.readUByte(),t.readUByte()),y[S]&&t.readUByte();t.readUEG();var L=t.readUEG();3==L&&t.skipBits(1);var A=t.readUEG(),R=t.readUEG(),k=t.readBoolean(),b=0,D=0,w=0,I=0;k&&(b+=t.readUEG(),D+=t.readUEG(),w+=t.readUEG(),I+=t.readUEG());for(var C=t.readUEG(),_=t.readUEG(),P=t.readUEG(),x=t.readBoolean()?0:r;x<=r;x++)t.skipUEG(),t.skipUEG(),t.skipUEG();if(t.skipUEG(),t.skipUEG(),t.skipUEG(),t.skipUEG(),t.skipUEG(),t.skipUEG(),t.readBoolean()&&t.readBoolean())for(var F=0;F<4;F++)for(var M=0;M<(3===F?2:6);M++)if(t.readBoolean()){var O=Math.min(64,1<<4+(F<<1));F>1&&t.readEG();for(var N=0;N<O;N++)t.readEG();}else t.readUEG();t.readBoolean(),t.readBoolean(),t.readBoolean()&&(t.readUByte(),t.skipUEG(),t.skipUEG(),t.readBoolean());for(var U=t.readUEG(),B=0,G=0;G<U;G++){var K=!1;if(0!==G&&(K=t.readBoolean()),K){G===U&&t.readUEG(),t.readBoolean(),t.readUEG();for(var H=0,V=0;V<=B;V++){var Y=t.readBoolean(),W=!1;Y||(W=t.readBoolean()),(Y||W)&&H++;}B=H;}else {var j=t.readUEG(),q=t.readUEG();B=j+q;for(var X=0;X<j;X++)t.readUEG(),t.readBoolean();for(var z=0;z<q;z++)t.readUEG(),t.readBoolean();}}if(t.readBoolean())for(var Q=t.readUEG(),J=0;J<Q;J++){for(var $=0;$<P+4;$++)t.readBits(1);t.readBits(1);}var Z=0,ee=1,te=1,re=!0,ie=1,ne=0;t.readBoolean(),t.readBoolean();var ae=!1;if(t.readBoolean()){if(t.readBoolean()){var se=t.readUByte();se>0&&se<16?(ee=[1,12,10,16,40,24,20,32,80,18,15,64,160,4,3,2][se-1],te=[1,11,11,11,33,11,11,11,33,11,11,33,99,3,2,1][se-1]):255===se&&(ee=t.readBits(16),te=t.readBits(16));}if(t.readBoolean()&&t.readBoolean(),t.readBoolean()&&(t.readBits(3),t.readBoolean(),t.readBoolean()&&(t.readUByte(),t.readUByte(),t.readUByte())),t.readBoolean()&&(t.readUEG(),t.readUEG()),t.readBoolean(),t.readBoolean(),t.readBoolean(),(ae=t.readBoolean())&&(b+=t.readUEG(),D+=t.readUEG(),w+=t.readUEG(),I+=t.readUEG()),t.readBoolean()&&(ie=t.readBits(32),ne=t.readBits(32),t.readBoolean()&&t.readUEG(),t.readBoolean())){var oe=t.readBoolean(),le=t.readBoolean(),ue=!1;(oe||le)&&((ue=t.readBoolean())&&(t.readUByte(),t.readBits(5),t.readBoolean(),t.readBits(5)),t.readBits(4),t.readBits(4),ue&&t.readBits(4),t.readBits(5),t.readBits(5),t.readBits(5));for(var de=0;de<=r;de++){var he=!1;(re=t.readBoolean())||t.readBoolean()?t.readEG():he=t.readBoolean();var ce=he?1:t.readUEG()+1;if(oe)for(var fe=0;fe<ce;fe++)t.readUEG(),t.readUEG(),ue&&(t.readUEG(),t.readUEG()),t.skipBits(1);if(le)for(var ge=0;ge<ce;ge++)t.readUEG(),t.readUEG(),ue&&(t.readUEG(),t.readUEG()),t.skipBits(1);}}t.readBoolean()&&(t.readBoolean(),t.readBoolean(),t.readBoolean(),Z=t.readUEG());}var ve=A,me=R;if(k||ae){var pe=1,ye=1;1===L?pe=ye=2:2==L&&(pe=2),ve=A-pe*D-pe*b,me=R-ye*I-ye*w;}for(var Ee=i?["A","B","C"][i]:"",Te=s<<24|o<<16|l<<8|u,Se=0,Le=0;Le<32;Le++)Se=(Se|(Te>>Le&1)<<31-Le)>>>0;var Ae=Se.toString(16);return 1===a&&"2"===Ae&&(Ae="6"),{codecString:"hvc1."+Ee+a+"."+Ae+"."+(n?"H":"L")+m+".B0",params:{general_tier_flag:n,general_profile_idc:a,general_profile_space:i,general_profile_compatibility_flags:[s,o,l,u],general_constraint_indicator_flags:[d,h,c,f,g,v],general_level_idc:m,bit_depth:C+8,bit_depth_luma_minus8:C,bit_depth_chroma_minus8:_,min_spatial_segmentation_idc:Z,chroma_format_idc:L,frame_rate:{fixed:re,fps:ne/ie}},width:ve,height:me,pixelRatio:[ee,te]}},r.readPPS=function(e){var t=new fn(this.ebsp2rbsp(e));t.readUByte(),t.readUByte(),t.skipUEG(),t.skipUEG(),t.skipBits(2),t.skipBits(3),t.skipBits(2),t.skipUEG(),t.skipUEG(),t.skipEG(),t.skipBits(2),t.readBoolean()&&t.skipUEG(),t.skipEG(),t.skipEG(),t.skipBits(4);var r=t.readBoolean(),i=t.readBoolean(),n=1;return i&&r?n=0:i?n=3:r&&(n=2),{parallelismType:n}},r.matchSPS=function(e,t){return String.fromCharCode.apply(null,e).substr(3)===String.fromCharCode.apply(null,t).substr(3)},t}(cn),mn=function(){function e(e,t,r){this.keyData=void 0,this.decrypter=void 0,this.keyData=r,this.decrypter=new yi(t,{removePKCS7Padding:!1});}var t=e.prototype;return t.decryptBuffer=function(e){return this.decrypter.decrypt(e,this.keyData.key.buffer,this.keyData.iv.buffer,ee)},t.decryptAacSample=function(e,t,r){var i=this,n=e[t].unit;if(!(n.length<=16)){var a=n.subarray(16,n.length-n.length%16),s=a.buffer.slice(a.byteOffset,a.byteOffset+a.length);this.decryptBuffer(s).then((function(a){var s=new Uint8Array(a);n.set(s,16),i.decrypter.isSync()||i.decryptAacSamples(e,t+1,r);}));}},t.decryptAacSamples=function(e,t,r){for(;;t++){if(t>=e.length)return void r();if(!(e[t].unit.length<32||(this.decryptAacSample(e,t,r),this.decrypter.isSync())))return}},t.getAvcEncryptedData=function(e){for(var t=16*Math.floor((e.length-48)/160)+16,r=new Int8Array(t),i=0,n=32;n<e.length-16;n+=160,i+=16)r.set(e.subarray(n,n+16),i);return r},t.getAvcDecryptedUnit=function(e,t){for(var r=new Uint8Array(t),i=0,n=32;n<e.length-16;n+=160,i+=16)e.set(r.subarray(i,i+16),n);return e},t.decryptAvcSample=function(e,t,r,i,n){var a=this,s=Ke(n.data),o=this.getAvcEncryptedData(s);this.decryptBuffer(o.buffer).then((function(o){n.data=a.getAvcDecryptedUnit(s,o),a.decrypter.isSync()||a.decryptAvcSamples(e,t,r+1,i);}));},t.decryptAvcSamples=function(e,t,r,i){if(e instanceof Uint8Array)throw new Error("Cannot decrypt samples of type Uint8Array");for(;;t++,r=0){if(t>=e.length)return void i();for(var n=e[t].units;!(r>=n.length);r++){var a=n[r];if(!(a.data.length<=48||1!==a.type&&5!==a.type||(this.decryptAvcSample(e,t,r,i,a),this.decrypter.isSync())))return}}},e}(),pn=188,yn=function(){function e(e,t,r,i){this.logger=void 0,this.observer=void 0,this.config=void 0,this.typeSupported=void 0,this.sampleAes=null,this.pmtParsed=!1,this.audioCodec=void 0,this.videoCodec=void 0,this._duration=0,this._pmtId=-1,this._videoTrack=void 0,this._audioTrack=void 0,this._id3Track=void 0,this._txtTrack=void 0,this.aacOverFlow=null,this.remainderData=null,this.videoParser=void 0,this.observer=e,this.config=t,this.typeSupported=r,this.logger=i,this.videoParser=null;}e.probe=function(t,r){var i=e.syncOffset(t);return i>0&&r.warn("MPEG2-TS detected but first sync word found @ offset "+i),-1!==i},e.syncOffset=function(e){for(var t=e.length,r=Math.min(940,t-pn)+1,i=0;i<r;){for(var n=!1,a=-1,s=0,o=i;o<t;o+=pn){if(71!==e[o]||t-o!==pn&&71!==e[o+pn]){if(s)return -1;break}if(s++,-1===a&&0!==(a=o)&&(r=Math.min(a+18612,e.length-pn)+1),n||(n=0===En(e,o)),n&&s>1&&(0===a&&s>2||o+pn>r))return a}i++;}return -1},e.createTrack=function(e,t){return {container:"video"===e||"audio"===e?"video/mp2t":void 0,type:e,id:Se[e],pid:-1,inputTimeScale:9e4,sequenceNumber:0,samples:[],dropped:0,duration:"audio"===e?t:void 0}};var t=e.prototype;return t.resetInitSegment=function(t,r,i,n){this.pmtParsed=!1,this._pmtId=-1,this._videoTrack=e.createTrack("video"),this._audioTrack=e.createTrack("audio",n),this._id3Track=e.createTrack("id3"),this._txtTrack=e.createTrack("text"),this._audioTrack.segmentCodec="aac",this.aacOverFlow=null,this.remainderData=null,this.audioCodec=r,this.videoCodec=i,this._duration=n;},t.resetTimeStamp=function(){},t.resetContiguity=function(){var e=this._audioTrack,t=this._videoTrack,r=this._id3Track;e&&(e.pesData=null),t&&(t.pesData=null),r&&(r.pesData=null),this.aacOverFlow=null,this.remainderData=null;},t.demux=function(t,r,i,n){var a;void 0===i&&(i=!1),void 0===n&&(n=!1),i||(this.sampleAes=null);var s=this._videoTrack,o=this._audioTrack,l=this._id3Track,u=this._txtTrack,d=s.pid,h=s.pesData,c=o.pid,f=l.pid,g=o.pesData,v=l.pesData,m=null,p=this.pmtParsed,y=this._pmtId,E=t.length;if(this.remainderData&&(E=(t=Ne(this.remainderData,t)).length,this.remainderData=null),E<pn&&!n)return this.remainderData=t,{audioTrack:o,videoTrack:s,id3Track:l,textTrack:u};var T=Math.max(0,e.syncOffset(t));(E-=(E-T)%pn)<t.byteLength&&!n&&(this.remainderData=new Uint8Array(t.buffer,E,t.buffer.byteLength-E));for(var S=0,L=T;L<E;L+=pn)if(71===t[L]){var A=!!(64&t[L+1]),R=En(t,L),k=void 0;if((48&t[L+3])>>4>1){if((k=L+5+t[L+4])===L+pn)continue}else k=L+4;switch(R){case d:if(A){if(h&&(a=Rn(h,this.logger))){if(null===this.videoParser)switch(s.segmentCodec){case"avc":this.videoParser=new gn;break;case"hevc":this.videoParser=new vn;}null!==this.videoParser&&this.videoParser.parsePES(s,u,a,!1,this._duration);}h={data:[],size:0};}h&&(h.data.push(t.subarray(k,L+pn)),h.size+=L+pn-k);break;case c:if(A){if(g&&(a=Rn(g,this.logger)))switch(o.segmentCodec){case"aac":this.parseAACPES(o,a);break;case"mp3":this.parseMPEGPES(o,a);break;case"ac3":this.parseAC3PES(o,a);}g={data:[],size:0};}g&&(g.data.push(t.subarray(k,L+pn)),g.size+=L+pn-k);break;case f:A&&(v&&(a=Rn(v,this.logger))&&this.parseID3PES(l,a),v={data:[],size:0}),v&&(v.data.push(t.subarray(k,L+pn)),v.size+=L+pn-k);break;case 0:A&&(k+=t[k]+1),y=this._pmtId=Tn(t,k);break;case y:A&&(k+=t[k]+1);var b=Sn(t,k,this.typeSupported,i,this.observer,this.logger);(d=b.videoPid)>0&&(s.pid=d,s.segmentCodec=b.segmentVideoCodec),(c=b.audioPid)>0&&(o.pid=c,o.segmentCodec=b.segmentAudioCodec),(f=b.id3Pid)>0&&(l.pid=f),null===m||p||(this.logger.warn("MPEG-TS PMT found at "+L+" after unknown PID '"+m+"'. Backtracking to sync byte @"+T+" to parse all TS packets."),m=null,L=T-188),p=this.pmtParsed=!0;break;case 17:case 8191:break;default:m=R;}}else S++;S>0&&Ln(this.observer,new Error("Found "+S+" TS packet/s that do not start with 0x47"),void 0,this.logger),s.pesData=h,o.pesData=g,l.pesData=v;var D={audioTrack:o,videoTrack:s,id3Track:l,textTrack:u};return n&&this.extractRemainingSamples(D),D},t.flush=function(){var e,t=this.remainderData;return this.remainderData=null,e=t?this.demux(t,-1,!1,!0):{videoTrack:this._videoTrack,audioTrack:this._audioTrack,id3Track:this._id3Track,textTrack:this._txtTrack},this.extractRemainingSamples(e),this.sampleAes?this.decrypt(e,this.sampleAes):e},t.extractRemainingSamples=function(e){var t,r=e.audioTrack,i=e.videoTrack,n=e.id3Track,a=e.textTrack,s=i.pesData,o=r.pesData,l=n.pesData;if(s&&(t=Rn(s,this.logger))){if(null===this.videoParser)switch(i.segmentCodec){case"avc":this.videoParser=new gn;break;case"hevc":this.videoParser=new vn;}null!==this.videoParser&&(this.videoParser.parsePES(i,a,t,!0,this._duration),i.pesData=null);}else i.pesData=s;if(o&&(t=Rn(o,this.logger))){switch(r.segmentCodec){case"aac":this.parseAACPES(r,t);break;case"mp3":this.parseMPEGPES(r,t);break;case"ac3":this.parseAC3PES(r,t);}r.pesData=null;}else null!=o&&o.size&&this.logger.log("last AAC PES packet truncated,might overlap between fragments"),r.pesData=o;l&&(t=Rn(l,this.logger))?(this.parseID3PES(n,t),n.pesData=null):n.pesData=l;},t.demuxSampleAes=function(e,t,r){var i=this.demux(e,r,!0,!this.config.progressive),n=this.sampleAes=new mn(this.observer,this.config,t);return this.decrypt(i,n)},t.decrypt=function(e,t){return new Promise((function(r){var i=e.audioTrack,n=e.videoTrack;i.samples&&"aac"===i.segmentCodec?t.decryptAacSamples(i.samples,0,(function(){n.samples?t.decryptAvcSamples(n.samples,0,0,(function(){r(e);})):r(e);})):n.samples&&t.decryptAvcSamples(n.samples,0,0,(function(){r(e);}));}))},t.destroy=function(){this._duration=0;},t.parseAACPES=function(e,t){var r,i,n,a=0,s=this.aacOverFlow,o=t.data;if(s){this.aacOverFlow=null;var l=s.missing,u=s.sample.unit.byteLength;if(-1===l)o=Ne(s.sample.unit,o);else {var d=u-l;s.sample.unit.set(o.subarray(0,l),d),e.samples.push(s.sample),a=s.missing;}}for(r=a,i=o.length;r<i-1&&!Yi(o,r);r++);if(r!==a){var h,c=r<i-1;if(h=c?"AAC PES did not start with ADTS header,offset:"+r:"No ADTS header found in AAC PES",Ln(this.observer,new Error(h),c,this.logger),!c)return}if(ji(e,this.observer,o,r,this.audioCodec),void 0!==t.pts)n=t.pts;else {if(!s)return void this.logger.warn("[tsdemuxer]: AAC PES unknown PTS");var f=qi(e.samplerate);n=s.sample.pts+f;}for(var g,v=0;r<i;){if(r+=(g=Xi(e,o,r,n,v)).length,g.missing){this.aacOverFlow=g;break}for(v++;r<i-1&&!Yi(o,r);r++);}},t.parseMPEGPES=function(e,t){var r=t.data,i=r.length,n=0,a=0,s=t.pts;if(void 0!==s)for(;a<i;)if(nn(r,a)){var o=en(e,r,a,s,n);if(!o)break;a+=o.length,n++;}else a++;else this.logger.warn("[tsdemuxer]: MPEG PES unknown PTS");},t.parseAC3PES=function(e,t){var r=t.data,i=t.pts;if(void 0!==i)for(var n,a=r.length,s=0,o=0;o<a&&(n=hn(e,r,o,i,s++))>0;)o+=n;else this.logger.warn("[tsdemuxer]: AC3 PES unknown PTS");},t.parseID3PES=function(e,t){if(void 0!==t.pts){var r=o({},t,{type:this._videoTrack?Mt:xt,duration:Number.POSITIVE_INFINITY});e.samples.push(r);}else this.logger.warn("[tsdemuxer]: ID3 PES unknown PTS");},e}();function En(e,t){return ((31&e[t+1])<<8)+e[t+2]}function Tn(e,t){return (31&e[t+10])<<8|e[t+11]}function Sn(e,t,r,i,n,a){var s={audioPid:-1,videoPid:-1,id3Pid:-1,segmentVideoCodec:"avc",segmentAudioCodec:"aac"},o=t+3+((15&e[t+1])<<8|e[t+2])-4;for(t+=12+((15&e[t+10])<<8|e[t+11]);t<o;){var l=En(e,t),u=(15&e[t+3])<<8|e[t+4];switch(e[t]){case 207:if(!i){An("ADTS AAC",a);break}case 15:-1===s.audioPid&&(s.audioPid=l);break;case 21:-1===s.id3Pid&&(s.id3Pid=l);break;case 219:if(!i){An("H.264",a);break}case 27:-1===s.videoPid&&(s.videoPid=l,s.segmentVideoCodec="avc");break;case 3:case 4:r.mpeg||r.mp3?-1===s.audioPid&&(s.audioPid=l,s.segmentAudioCodec="mp3"):a.log("MPEG audio found, not supported in this browser");break;case 193:if(!i){An("AC-3",a);break}case 129:r.ac3?-1===s.audioPid&&(s.audioPid=l,s.segmentAudioCodec="ac3"):a.log("AC-3 audio found, not supported in this browser");break;case 6:if(-1===s.audioPid&&u>0)for(var d=t+5,h=u;h>2;){106===e[d]&&(!0!==r.ac3?a.log("AC-3 audio found, not supported in this browser for now"):(s.audioPid=l,s.segmentAudioCodec="ac3"));var c=e[d+1]+2;d+=c,h-=c;}break;case 194:case 135:return Ln(n,new Error("Unsupported EC-3 in M2TS found"),void 0,a),s;case 36:-1===s.videoPid&&(s.videoPid=l,s.segmentVideoCodec="hevc",a.log("HEVC in M2TS found"));}t+=u+5;}return s}function Ln(e,t,r,i){i.warn("parsing error: "+t.message),e.emit(L.ERROR,L.ERROR,{type:A.MEDIA_ERROR,details:R.FRAG_PARSING_ERROR,fatal:!1,levelRetry:r,error:t,reason:t.message});}function An(e,t){t.log(e+" with AES-128-CBC encryption found in unencrypted stream");}function Rn(e,t){var r,i,n,a,s,o=0,l=e.data;if(!e||0===e.size)return null;for(;l[0].length<19&&l.length>1;)l[0]=Ne(l[0],l[1]),l.splice(1,1);if(1===((r=l[0])[0]<<16)+(r[1]<<8)+r[2]){if((i=(r[4]<<8)+r[5])&&i>e.size-6)return null;var u=r[7];192&u&&(a=536870912*(14&r[9])+4194304*(255&r[10])+16384*(254&r[11])+128*(255&r[12])+(254&r[13])/2,64&u?a-(s=536870912*(14&r[14])+4194304*(255&r[15])+16384*(254&r[16])+128*(255&r[17])+(254&r[18])/2)>54e5&&(t.warn(Math.round((a-s)/9e4)+"s delta between PTS and DTS, align them"),a=s):s=a);var d=(n=r[8])+9;if(e.size<=d)return null;e.size-=d;for(var h=new Uint8Array(e.size),c=0,f=l.length;c<f;c++){var g=(r=l[c]).byteLength;if(d){if(d>g){d-=g;continue}r=r.subarray(d),g-=d,d=0;}h.set(r,o),o+=g;}return i&&(i-=n+3),{data:h,pts:a,dts:s,len:i}}return null}var kn=function(e){function t(){return e.apply(this,arguments)||this}u(t,e);var r=t.prototype;return r.resetInitSegment=function(t,r,i,n){e.prototype.resetInitSegment.call(this,t,r,i,n),this._audioTrack={container:"audio/mpeg",type:"audio",id:2,pid:-1,sequenceNumber:0,segmentCodec:"mp3",samples:[],manifestCodec:r,duration:n,inputTimeScale:9e4,dropped:0};},t.probe=function(e){if(!e)return !1;var t=Mi(e,0),r=(null==t?void 0:t.length)||0;if(t&&11===e[r]&&119===e[r+1]&&void 0!==Ni(t)&&un(e,r)<=16)return !1;for(var i=e.length;r<i;r++)if(an(e,r))return P.log("MPEG Audio sync word found !"),!0;return !1},r.canParse=function(e,t){return function(e,t){return rn(e,t)&&4<=e.length-t}(e,t)},r.appendFrame=function(e,t,r){if(null!==this.basePTS)return en(e,t,r,this.basePTS,this.frameIndex)},t}(Bi),bn=function(){function e(){}return e.getSilentFrame=function(e,t){if("mp4a.40.2"===e){if(1===t)return new Uint8Array([0,200,0,128,35,128]);if(2===t)return new Uint8Array([33,0,73,144,2,25,0,35,128]);if(3===t)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,142]);if(4===t)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,128,44,128,8,2,56]);if(5===t)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,130,48,4,153,0,33,144,2,56]);if(6===t)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,130,48,4,153,0,33,144,2,0,178,0,32,8,224])}else {if(1===t)return new Uint8Array([1,64,34,128,163,78,230,128,186,8,0,0,0,28,6,241,193,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94]);if(2===t)return new Uint8Array([1,64,34,128,163,94,230,128,186,8,0,0,0,0,149,0,6,241,161,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94]);if(3===t)return new Uint8Array([1,64,34,128,163,94,230,128,186,8,0,0,0,0,149,0,6,241,161,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94])}},e}(),Dn=Math.pow(2,32)-1,wn=function(){function e(){}return e.init=function(){var t;for(t in e.types={avc1:[],avcC:[],hvc1:[],hvcC:[],btrt:[],dinf:[],dref:[],esds:[],ftyp:[],hdlr:[],mdat:[],mdhd:[],mdia:[],mfhd:[],minf:[],moof:[],moov:[],mp4a:[],".mp3":[],dac3:[],"ac-3":[],mvex:[],mvhd:[],pasp:[],sdtp:[],stbl:[],stco:[],stsc:[],stsd:[],stsz:[],stts:[],tfdt:[],tfhd:[],traf:[],trak:[],trun:[],trex:[],tkhd:[],vmhd:[],smhd:[]},e.types)e.types.hasOwnProperty(t)&&(e.types[t]=[t.charCodeAt(0),t.charCodeAt(1),t.charCodeAt(2),t.charCodeAt(3)]);var r=new Uint8Array([0,0,0,0,0,0,0,0,118,105,100,101,0,0,0,0,0,0,0,0,0,0,0,0,86,105,100,101,111,72,97,110,100,108,101,114,0]),i=new Uint8Array([0,0,0,0,0,0,0,0,115,111,117,110,0,0,0,0,0,0,0,0,0,0,0,0,83,111,117,110,100,72,97,110,100,108,101,114,0]);e.HDLR_TYPES={video:r,audio:i};var n=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,12,117,114,108,32,0,0,0,1]),a=new Uint8Array([0,0,0,0,0,0,0,0]);e.STTS=e.STSC=e.STCO=a,e.STSZ=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0]),e.VMHD=new Uint8Array([0,0,0,1,0,0,0,0,0,0,0,0]),e.SMHD=new Uint8Array([0,0,0,0,0,0,0,0]),e.STSD=new Uint8Array([0,0,0,0,0,0,0,1]);var s=new Uint8Array([105,115,111,109]),o=new Uint8Array([97,118,99,49]),l=new Uint8Array([0,0,0,1]);e.FTYP=e.box(e.types.ftyp,s,l,s,o),e.DINF=e.box(e.types.dinf,e.box(e.types.dref,n));},e.box=function(e){for(var t=8,r=arguments.length,i=new Array(r>1?r-1:0),n=1;n<r;n++)i[n-1]=arguments[n];for(var a=i.length,s=a;a--;)t+=i[a].byteLength;var o=new Uint8Array(t);for(o[0]=t>>24&255,o[1]=t>>16&255,o[2]=t>>8&255,o[3]=255&t,o.set(e,4),a=0,t=8;a<s;a++)o.set(i[a],t),t+=i[a].byteLength;return o},e.hdlr=function(t){return e.box(e.types.hdlr,e.HDLR_TYPES[t])},e.mdat=function(t){return e.box(e.types.mdat,t)},e.mdhd=function(t,r){r*=t;var i=Math.floor(r/(Dn+1)),n=Math.floor(r%(Dn+1));return e.box(e.types.mdhd,new Uint8Array([1,0,0,0,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3,t>>24&255,t>>16&255,t>>8&255,255&t,i>>24,i>>16&255,i>>8&255,255&i,n>>24,n>>16&255,n>>8&255,255&n,85,196,0,0]))},e.mdia=function(t){return e.box(e.types.mdia,e.mdhd(t.timescale,t.duration),e.hdlr(t.type),e.minf(t))},e.mfhd=function(t){return e.box(e.types.mfhd,new Uint8Array([0,0,0,0,t>>24,t>>16&255,t>>8&255,255&t]))},e.minf=function(t){return "audio"===t.type?e.box(e.types.minf,e.box(e.types.smhd,e.SMHD),e.DINF,e.stbl(t)):e.box(e.types.minf,e.box(e.types.vmhd,e.VMHD),e.DINF,e.stbl(t))},e.moof=function(t,r,i){return e.box(e.types.moof,e.mfhd(t),e.traf(i,r))},e.moov=function(t){for(var r=t.length,i=[];r--;)i[r]=e.trak(t[r]);return e.box.apply(null,[e.types.moov,e.mvhd(t[0].timescale,t[0].duration)].concat(i).concat(e.mvex(t)))},e.mvex=function(t){for(var r=t.length,i=[];r--;)i[r]=e.trex(t[r]);return e.box.apply(null,[e.types.mvex].concat(i))},e.mvhd=function(t,r){r*=t;var i=Math.floor(r/(Dn+1)),n=Math.floor(r%(Dn+1)),a=new Uint8Array([1,0,0,0,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3,t>>24&255,t>>16&255,t>>8&255,255&t,i>>24,i>>16&255,i>>8&255,255&i,n>>24,n>>16&255,n>>8&255,255&n,0,1,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,255,255,255,255]);return e.box(e.types.mvhd,a)},e.sdtp=function(t){var r,i,n=t.samples||[],a=new Uint8Array(4+n.length);for(r=0;r<n.length;r++)i=n[r].flags,a[r+4]=i.dependsOn<<4|i.isDependedOn<<2|i.hasRedundancy;return e.box(e.types.sdtp,a)},e.stbl=function(t){return e.box(e.types.stbl,e.stsd(t),e.box(e.types.stts,e.STTS),e.box(e.types.stsc,e.STSC),e.box(e.types.stsz,e.STSZ),e.box(e.types.stco,e.STCO))},e.avc1=function(t){var r,i,n,a=[],s=[];for(r=0;r<t.sps.length;r++)n=(i=t.sps[r]).byteLength,a.push(n>>>8&255),a.push(255&n),a=a.concat(Array.prototype.slice.call(i));for(r=0;r<t.pps.length;r++)n=(i=t.pps[r]).byteLength,s.push(n>>>8&255),s.push(255&n),s=s.concat(Array.prototype.slice.call(i));var o=e.box(e.types.avcC,new Uint8Array([1,a[3],a[4],a[5],255,224|t.sps.length].concat(a).concat([t.pps.length]).concat(s))),l=t.width,u=t.height,d=t.pixelRatio[0],h=t.pixelRatio[1];return e.box(e.types.avc1,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,l>>8&255,255&l,u>>8&255,255&u,0,72,0,0,0,72,0,0,0,0,0,0,0,1,18,100,97,105,108,121,109,111,116,105,111,110,47,104,108,115,46,106,115,0,0,0,0,0,0,0,0,0,0,0,0,0,0,24,17,17]),o,e.box(e.types.btrt,new Uint8Array([0,28,156,128,0,45,198,192,0,45,198,192])),e.box(e.types.pasp,new Uint8Array([d>>24,d>>16&255,d>>8&255,255&d,h>>24,h>>16&255,h>>8&255,255&h])))},e.esds=function(e){var t=e.config.length;return new Uint8Array([0,0,0,0,3,23+t,0,1,0,4,15+t,64,21,0,0,0,0,0,0,0,0,0,0,0,5].concat([t]).concat(e.config).concat([6,1,2]))},e.audioStsd=function(e){var t=e.samplerate;return new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,e.channelCount,0,16,0,0,0,0,t>>8&255,255&t,0,0])},e.mp4a=function(t){return e.box(e.types.mp4a,e.audioStsd(t),e.box(e.types.esds,e.esds(t)))},e.mp3=function(t){return e.box(e.types[".mp3"],e.audioStsd(t))},e.ac3=function(t){return e.box(e.types["ac-3"],e.audioStsd(t),e.box(e.types.dac3,t.config))},e.stsd=function(t){return "audio"===t.type?"mp3"===t.segmentCodec&&"mp3"===t.codec?e.box(e.types.stsd,e.STSD,e.mp3(t)):"ac3"===t.segmentCodec?e.box(e.types.stsd,e.STSD,e.ac3(t)):e.box(e.types.stsd,e.STSD,e.mp4a(t)):"avc"===t.segmentCodec?e.box(e.types.stsd,e.STSD,e.avc1(t)):e.box(e.types.stsd,e.STSD,e.hvc1(t))},e.tkhd=function(t){var r=t.id,i=t.duration*t.timescale,n=t.width,a=t.height,s=Math.floor(i/(Dn+1)),o=Math.floor(i%(Dn+1));return e.box(e.types.tkhd,new Uint8Array([1,0,0,7,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3,r>>24&255,r>>16&255,r>>8&255,255&r,0,0,0,0,s>>24,s>>16&255,s>>8&255,255&s,o>>24,o>>16&255,o>>8&255,255&o,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,n>>8&255,255&n,0,0,a>>8&255,255&a,0,0]))},e.traf=function(t,r){var i=e.sdtp(t),n=t.id,a=Math.floor(r/(Dn+1)),s=Math.floor(r%(Dn+1));return e.box(e.types.traf,e.box(e.types.tfhd,new Uint8Array([0,0,0,0,n>>24,n>>16&255,n>>8&255,255&n])),e.box(e.types.tfdt,new Uint8Array([1,0,0,0,a>>24,a>>16&255,a>>8&255,255&a,s>>24,s>>16&255,s>>8&255,255&s])),e.trun(t,i.length+16+20+8+16+8+8),i)},e.trak=function(t){return t.duration=t.duration||4294967295,e.box(e.types.trak,e.tkhd(t),e.mdia(t))},e.trex=function(t){var r=t.id;return e.box(e.types.trex,new Uint8Array([0,0,0,0,r>>24,r>>16&255,r>>8&255,255&r,0,0,0,1,0,0,0,0,0,0,0,0,0,1,0,1]))},e.trun=function(t,r){var i,n,a,s,o,l,u=t.samples||[],d=u.length,h=12+16*d,c=new Uint8Array(h);for(r+=8+h,c.set(["video"===t.type?1:0,0,15,1,d>>>24&255,d>>>16&255,d>>>8&255,255&d,r>>>24&255,r>>>16&255,r>>>8&255,255&r],0),i=0;i<d;i++)a=(n=u[i]).duration,s=n.size,o=n.flags,l=n.cts,c.set([a>>>24&255,a>>>16&255,a>>>8&255,255&a,s>>>24&255,s>>>16&255,s>>>8&255,255&s,o.isLeading<<2|o.dependsOn,o.isDependedOn<<6|o.hasRedundancy<<4|o.paddingValue<<1|o.isNonSync,61440&o.degradPrio,15&o.degradPrio,l>>>24&255,l>>>16&255,l>>>8&255,255&l],12+16*i);return e.box(e.types.trun,c)},e.initSegment=function(t){e.types||e.init();var r=e.moov(t);return Ne(e.FTYP,r)},e.hvc1=function(t){for(var r=t.params,i=[t.vps,t.sps,t.pps],n=new Uint8Array([1,r.general_profile_space<<6|(r.general_tier_flag?32:0)|r.general_profile_idc,r.general_profile_compatibility_flags[0],r.general_profile_compatibility_flags[1],r.general_profile_compatibility_flags[2],r.general_profile_compatibility_flags[3],r.general_constraint_indicator_flags[0],r.general_constraint_indicator_flags[1],r.general_constraint_indicator_flags[2],r.general_constraint_indicator_flags[3],r.general_constraint_indicator_flags[4],r.general_constraint_indicator_flags[5],r.general_level_idc,240|r.min_spatial_segmentation_idc>>8,255&r.min_spatial_segmentation_idc,252|r.parallelismType,252|r.chroma_format_idc,248|r.bit_depth_luma_minus8,248|r.bit_depth_chroma_minus8,0,parseInt(r.frame_rate.fps),3|r.temporal_id_nested<<2|r.num_temporal_layers<<3|(r.frame_rate.fixed?64:0),i.length]),a=n.length,s=0;s<i.length;s+=1){a+=3;for(var o=0;o<i[s].length;o+=1)a+=2+i[s][o].length;}var l=new Uint8Array(a);l.set(n,0),a=n.length;for(var u=i.length-1,d=0;d<i.length;d+=1){l.set(new Uint8Array([32+d|(d===u?128:0),0,i[d].length]),a),a+=3;for(var h=0;h<i[d].length;h+=1)l.set(new Uint8Array([i[d][h].length>>8,255&i[d][h].length]),a),a+=2,l.set(i[d][h],a),a+=i[d][h].length;}var c=e.box(e.types.hvcC,l),f=t.width,g=t.height,v=t.pixelRatio[0],m=t.pixelRatio[1];return e.box(e.types.hvc1,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,f>>8&255,255&f,g>>8&255,255&g,0,72,0,0,0,72,0,0,0,0,0,0,0,1,18,100,97,105,108,121,109,111,116,105,111,110,47,104,108,115,46,106,115,0,0,0,0,0,0,0,0,0,0,0,0,0,0,24,17,17]),c,e.box(e.types.btrt,new Uint8Array([0,28,156,128,0,45,198,192,0,45,198,192])),e.box(e.types.pasp,new Uint8Array([v>>24,v>>16&255,v>>8&255,255&v,m>>24,m>>16&255,m>>8&255,255&m])))},e}();wn.types=void 0,wn.HDLR_TYPES=void 0,wn.STTS=void 0,wn.STSC=void 0,wn.STCO=void 0,wn.STSZ=void 0,wn.VMHD=void 0,wn.SMHD=void 0,wn.STSD=void 0,wn.FTYP=void 0,wn.DINF=void 0;var In=9e4;function Cn(e,t,r,i){void 0===r&&(r=1),void 0===i&&(i=!1);var n=e*t*r;return i?Math.round(n):n}function _n(e,t){return Cn(e,1e3,1/In,t)}var Pn=null,xn=null,Fn=function(){function e(e,t,r,i){if(this.logger=void 0,this.observer=void 0,this.config=void 0,this.typeSupported=void 0,this.ISGenerated=!1,this._initPTS=null,this._initDTS=null,this.nextAvcDts=null,this.nextAudioPts=null,this.videoSampleDuration=null,this.isAudioContiguous=!1,this.isVideoContiguous=!1,this.videoTrackConfig=void 0,this.observer=e,this.config=t,this.typeSupported=r,this.logger=i,this.ISGenerated=!1,null===Pn){var n=(navigator.userAgent||"").match(/Chrome\/(\d+)/i);Pn=n?parseInt(n[1]):0;}if(null===xn){var a=navigator.userAgent.match(/Safari\/(\d+)/i);xn=a?parseInt(a[1]):0;}}var t=e.prototype;return t.destroy=function(){this.config=this.videoTrackConfig=this._initPTS=this._initDTS=null;},t.resetTimeStamp=function(e){this.logger.log("[mp4-remuxer]: initPTS & initDTS reset"),this._initPTS=this._initDTS=e;},t.resetNextTimestamp=function(){this.logger.log("[mp4-remuxer]: reset next timestamp"),this.isVideoContiguous=!1,this.isAudioContiguous=!1;},t.resetInitSegment=function(){this.logger.log("[mp4-remuxer]: ISGenerated flag reset"),this.ISGenerated=!1,this.videoTrackConfig=void 0;},t.getVideoStartPts=function(e){var t=!1,r=e.reduce((function(e,r){var i=r.pts-e;return i<-4294967296?(t=!0,Mn(e,r.pts)):i>0?e:r.pts}),e[0].pts);return t&&this.logger.debug("PTS rollover detected"),r},t.remux=function(e,t,r,i,n,a,s,o){var l,u,d,h,c,f,g=n,v=n,m=e.pid>-1,p=t.pid>-1,y=t.samples.length,E=e.samples.length>0,T=s&&y>0||y>1;if((!m||E)&&(!p||T)||this.ISGenerated||s){if(this.ISGenerated){var S,L,A,R,k=this.videoTrackConfig;(k&&(t.width!==k.width||t.height!==k.height||(null==(S=t.pixelRatio)?void 0:S[0])!==(null==(L=k.pixelRatio)?void 0:L[0])||(null==(A=t.pixelRatio)?void 0:A[1])!==(null==(R=k.pixelRatio)?void 0:R[1]))||!k&&T||null===this.nextAudioPts&&E)&&this.resetInitSegment();}this.ISGenerated||(d=this.generateIS(e,t,n,a));var b,D=this.isVideoContiguous,w=-1;if(T&&(w=function(e){for(var t=0;t<e.length;t++)if(e[t].key)return t;return -1}(t.samples),!D&&this.config.forceKeyFrameOnDiscontinuity))if(f=!0,w>0){this.logger.warn("[mp4-remuxer]: Dropped "+w+" out of "+y+" video samples due to a missing keyframe");var I=this.getVideoStartPts(t.samples);t.samples=t.samples.slice(w),t.dropped+=w,b=v+=(t.samples[0].pts-I)/t.inputTimeScale;}else -1===w&&(this.logger.warn("[mp4-remuxer]: No keyframe found out of "+y+" video samples"),f=!1);if(this.ISGenerated){if(E&&T){var C=this.getVideoStartPts(t.samples),_=(Mn(e.samples[0].pts,C)-C)/t.inputTimeScale;g+=Math.max(0,_),v+=Math.max(0,-_);}if(E){if(e.samplerate||(this.logger.warn("[mp4-remuxer]: regenerate InitSegment as audio detected"),d=this.generateIS(e,t,n,a)),u=this.remuxAudio(e,g,this.isAudioContiguous,a,p||T||o===At?v:void 0),T){var P=u?u.endPTS-u.startPTS:0;t.inputTimeScale||(this.logger.warn("[mp4-remuxer]: regenerate InitSegment as video detected"),d=this.generateIS(e,t,n,a)),l=this.remuxVideo(t,v,D,P);}}else T&&(l=this.remuxVideo(t,v,D,0));l&&(l.firstKeyFrame=w,l.independent=-1!==w,l.firstKeyFramePTS=b);}}return this.ISGenerated&&this._initPTS&&this._initDTS&&(r.samples.length&&(c=On(r,n,this._initPTS,this._initDTS)),i.samples.length&&(h=Nn(i,n,this._initPTS))),{audio:u,video:l,initSegment:d,independent:f,text:h,id3:c}},t.generateIS=function(e,t,r,i){var n,a,s,o=e.samples,l=t.samples,u=this.typeSupported,d={},h=this._initPTS,c=!h||i,f="audio/mp4";if(c&&(n=a=1/0),e.config&&o.length){switch(e.timescale=e.samplerate,e.segmentCodec){case"mp3":u.mpeg?(f="audio/mpeg",e.codec=""):u.mp3&&(e.codec="mp3");break;case"ac3":e.codec="ac-3";}d.audio={id:"audio",container:f,codec:e.codec,initSegment:"mp3"===e.segmentCodec&&u.mpeg?new Uint8Array(0):wn.initSegment([e]),metadata:{channelCount:e.channelCount}},c&&(s=e.inputTimeScale,h&&s===h.timescale?c=!1:n=a=o[0].pts-Math.round(s*r));}if(t.sps&&t.pps&&l.length){if(t.timescale=t.inputTimeScale,d.video={id:"main",container:"video/mp4",codec:t.codec,initSegment:wn.initSegment([t]),metadata:{width:t.width,height:t.height}},c)if(s=t.inputTimeScale,h&&s===h.timescale)c=!1;else {var g=this.getVideoStartPts(l),v=Math.round(s*r);a=Math.min(a,Mn(l[0].dts,g)-v),n=Math.min(n,g-v);}this.videoTrackConfig={width:t.width,height:t.height,pixelRatio:t.pixelRatio};}if(Object.keys(d).length)return this.ISGenerated=!0,c?(this._initPTS={baseTime:n,timescale:s},this._initDTS={baseTime:a,timescale:s}):n=s=void 0,{tracks:d,initPTS:n,timescale:s}},t.remuxVideo=function(e,t,r,i){var n,a,s=e.inputTimeScale,l=e.samples,u=[],d=l.length,h=this._initPTS,c=this.nextAvcDts,f=8,g=this.videoSampleDuration,v=Number.POSITIVE_INFINITY,m=Number.NEGATIVE_INFINITY,p=!1;if(!r||null===c){var y=t*s,E=l[0].pts-Mn(l[0].dts,l[0].pts);Pn&&null!==c&&Math.abs(y-E-c)<15e3?r=!0:c=y-E;}for(var T=h.baseTime*s/h.timescale,S=0;S<d;S++){var k=l[S];k.pts=Mn(k.pts-T,c),k.dts=Mn(k.dts-T,c),k.dts<l[S>0?S-1:S].dts&&(p=!0);}p&&l.sort((function(e,t){var r=e.dts-t.dts,i=e.pts-t.pts;return r||i})),n=l[0].dts;var b=(a=l[l.length-1].dts)-n,D=b?Math.round(b/(d-1)):g||e.inputTimeScale/30;if(r){var w=n-c,I=w>D,C=w<-1;if((I||C)&&(I?this.logger.warn((e.segmentCodec||"").toUpperCase()+": "+_n(w,!0)+" ms ("+w+"dts) hole between fragments detected at "+t.toFixed(3)):this.logger.warn((e.segmentCodec||"").toUpperCase()+": "+_n(-w,!0)+" ms ("+w+"dts) overlapping between fragments detected at "+t.toFixed(3)),!C||c>=l[0].pts||Pn)){n=c;var _=l[0].pts-w;if(I)l[0].dts=n,l[0].pts=_;else for(var P=!0,x=0;x<l.length&&!(l[x].dts>_&&P);x++){var F=l[x].pts;if(l[x].dts-=w,l[x].pts-=w,x<l.length-1){var M=l[x+1].pts;P=M<=l[x].pts==M<=F;}}this.logger.log("Video: Initial PTS/DTS adjusted: "+_n(_,!0)+"/"+_n(n,!0)+", delta: "+_n(w,!0)+" ms");}}for(var O=0,N=0,U=n=Math.max(0,n),B=0;B<d;B++){for(var G=l[B],K=G.units,H=K.length,V=0,Y=0;Y<H;Y++)V+=K[Y].data.length;N+=V,O+=H,G.length=V,G.dts<U?(G.dts=U,U+=D/4|0||1):U=G.dts,v=Math.min(G.pts,v),m=Math.max(G.pts,m);}a=l[d-1].dts;var W,j=N+4*O+8;try{W=new Uint8Array(j);}catch(e){return void this.observer.emit(L.ERROR,L.ERROR,{type:A.MUX_ERROR,details:R.REMUX_ALLOC_ERROR,fatal:!1,error:e,bytes:j,reason:"fail allocating video mdat "+j})}var q=new DataView(W.buffer);q.setUint32(0,j),W.set(wn.types.mdat,4);for(var X=!1,z=Number.POSITIVE_INFINITY,Q=Number.POSITIVE_INFINITY,J=Number.NEGATIVE_INFINITY,$=Number.NEGATIVE_INFINITY,Z=0;Z<d;Z++){for(var ee=l[Z],te=ee.units,re=0,ie=0,ne=te.length;ie<ne;ie++){var ae=te[ie],se=ae.data,oe=ae.data.byteLength;q.setUint32(f,oe),f+=4,W.set(se,f),f+=oe,re+=4+oe;}var le=void 0;if(Z<d-1)g=l[Z+1].dts-ee.dts,le=l[Z+1].pts-ee.pts;else {var ue=this.config,de=Z>0?ee.dts-l[Z-1].dts:D;if(le=Z>0?ee.pts-l[Z-1].pts:D,ue.stretchShortVideoTrack&&null!==this.nextAudioPts){var he=Math.floor(ue.maxBufferHole*s),ce=(i?v+i*s:this.nextAudioPts)-ee.pts;ce>he?((g=ce-de)<0?g=de:X=!0,this.logger.log("[mp4-remuxer]: It is approximately "+ce/90+" ms to the next segment; using duration "+g/90+" ms for the last video frame.")):g=de;}else g=de;}var fe=Math.round(ee.pts-ee.dts);z=Math.min(z,g),J=Math.max(J,g),Q=Math.min(Q,le),$=Math.max($,le),u.push(new Bn(ee.key,g,re,fe));}if(u.length)if(Pn){if(Pn<70){var ge=u[0].flags;ge.dependsOn=2,ge.isNonSync=0;}}else if(xn&&$-Q<J-z&&D/J<.025&&0===u[0].cts){this.logger.warn("Found irregular gaps in sample duration. Using PTS instead of DTS to determine MP4 sample duration.");for(var ve=n,me=0,pe=u.length;me<pe;me++){var ye=ve+u[me].duration,Ee=ve+u[me].cts;if(me<pe-1){var Te=ye+u[me+1].cts;u[me].duration=Te-Ee;}else u[me].duration=me?u[me-1].duration:D;u[me].cts=0,ve=ye;}}g=X||!g?D:g,this.nextAvcDts=c=a+g,this.videoSampleDuration=g,this.isVideoContiguous=!0;var Se={data1:wn.moof(e.sequenceNumber++,n,o({},e,{samples:u})),data2:W,startPTS:v/s,endPTS:(m+g)/s,startDTS:n/s,endDTS:c/s,type:"video",hasAudio:!1,hasVideo:!0,nb:u.length,dropped:e.dropped};return e.samples=[],e.dropped=0,Se},t.getSamplesPerFrame=function(e){switch(e.segmentCodec){case"mp3":return 1152;case"ac3":return 1536;default:return 1024}},t.remuxAudio=function(e,t,r,i,n){var a=e.inputTimeScale,s=a/(e.samplerate?e.samplerate:a),l=this.getSamplesPerFrame(e),u=l*s,d=this._initPTS,h="mp3"===e.segmentCodec&&this.typeSupported.mpeg,c=[],f=void 0!==n,g=e.samples,v=h?0:8,m=this.nextAudioPts||-1,p=t*a,y=d.baseTime*a/d.timescale;if(this.isAudioContiguous=r=r||g.length&&m>0&&(i&&Math.abs(p-m)<9e3||Math.abs(Mn(g[0].pts-y,p)-m)<20*u),g.forEach((function(e){e.pts=Mn(e.pts-y,p);})),!r||m<0){if(g=g.filter((function(e){return e.pts>=0})),!g.length)return;m=0===n?0:i&&!f?Math.max(0,p):g[0].pts;}if("aac"===e.segmentCodec)for(var E=this.config.maxAudioFramesDrift,T=0,S=m;T<g.length;T++){var k=g[T],b=k.pts,D=b-S,w=Math.abs(1e3*D/a);if(D<=-E*u&&f)0===T&&(this.logger.warn("Audio frame @ "+(b/a).toFixed(3)+"s overlaps nextAudioPts by "+Math.round(1e3*D/a)+" ms."),this.nextAudioPts=m=S=b);else if(D>=E*u&&w<1e4&&f){var I=Math.round(D/u);(S=b-I*u)<0&&(I--,S+=u),0===T&&(this.nextAudioPts=m=S),this.logger.warn("[mp4-remuxer]: Injecting "+I+" audio frame @ "+(S/a).toFixed(3)+"s due to "+Math.round(1e3*D/a)+" ms gap.");for(var C=0;C<I;C++){var _=Math.max(S,0),P=bn.getSilentFrame(e.parsedCodec||e.manifestCodec||e.codec,e.channelCount);P||(this.logger.log("[mp4-remuxer]: Unable to get silent frame for given audio codec; duplicating last frame instead."),P=k.unit.subarray()),g.splice(T,0,{unit:P,pts:_}),S+=u,T++;}}k.pts=S,S+=u;}for(var x,F=null,M=null,O=0,N=g.length;N--;)O+=g[N].unit.byteLength;for(var U=0,B=g.length;U<B;U++){var G=g[U],K=G.unit,H=G.pts;if(null!==M)c[U-1].duration=Math.round((H-M)/s);else {if(r&&"aac"===e.segmentCodec&&(H=m),F=H,!(O>0))return;O+=v;try{x=new Uint8Array(O);}catch(e){return void this.observer.emit(L.ERROR,L.ERROR,{type:A.MUX_ERROR,details:R.REMUX_ALLOC_ERROR,fatal:!1,error:e,bytes:O,reason:"fail allocating audio mdat "+O})}h||(new DataView(x.buffer).setUint32(0,O),x.set(wn.types.mdat,4));}x.set(K,v);var V=K.byteLength;v+=V,c.push(new Bn(!0,l,V,0)),M=H;}var Y=c.length;if(Y){var W=c[c.length-1];this.nextAudioPts=m=M+s*W.duration;var j=h?new Uint8Array(0):wn.moof(e.sequenceNumber++,F/s,o({},e,{samples:c}));e.samples=[];var q=F/a,X=m/a,z={data1:j,data2:x,startPTS:q,endPTS:X,startDTS:q,endDTS:X,type:"audio",hasAudio:!0,hasVideo:!1,nb:Y};return this.isAudioContiguous=!0,z}},e}();function Mn(e,t){var r;if(null===t)return e;for(r=t<e?-8589934592:8589934592;Math.abs(e-t)>4294967296;)e+=r;return e}function On(e,t,r,i){var n=e.samples.length;if(n){for(var a=e.inputTimeScale,s=0;s<n;s++){var o=e.samples[s];o.pts=Mn(o.pts-r.baseTime*a/r.timescale,t*a)/a,o.dts=Mn(o.dts-i.baseTime*a/i.timescale,t*a)/a;}var l=e.samples;return e.samples=[],{samples:l}}}function Nn(e,t,r){var i=e.samples.length;if(i){for(var n=e.inputTimeScale,a=0;a<i;a++){var s=e.samples[a];s.pts=Mn(s.pts-r.baseTime*n/r.timescale,t*n)/n;}e.samples.sort((function(e,t){return e.pts-t.pts}));var o=e.samples;return e.samples=[],{samples:o}}}var Un,Bn=function(e,t,r,i){this.size=void 0,this.duration=void 0,this.cts=void 0,this.flags=void 0,this.duration=t,this.size=r,this.cts=i,this.flags={isLeading:0,isDependedOn:0,hasRedundancy:0,degradPrio:0,dependsOn:e?2:1,isNonSync:e?0:1};},Gn=function(){function e(e,t,r,i){this.logger=void 0,this.emitInitSegment=!1,this.audioCodec=void 0,this.videoCodec=void 0,this.initData=void 0,this.initPTS=null,this.initTracks=void 0,this.lastEndTime=null,this.logger=i;}var t=e.prototype;return t.destroy=function(){},t.resetTimeStamp=function(e){this.initPTS=e,this.lastEndTime=null;},t.resetNextTimestamp=function(){this.lastEndTime=null;},t.resetInitSegment=function(e,t,r,i){this.audioCodec=t,this.videoCodec=r,this.generateInitSegment(function(e,t){if(!e||!t)return e;var r=t.keyId;return r&&t.isCommonEncryption&&we(e,["moov","trak"]).forEach((function(e){var t=we(e,["mdia","minf","stbl","stsd"])[0].subarray(8),i=we(t,["enca"]),n=i.length>0;n||(i=we(t,["encv"])),i.forEach((function(e){we(n?e.subarray(28):e.subarray(78),["sinf"]).forEach((function(e){var t=Me(e);if(t){var i=t.subarray(8,24);i.some((function(e){return 0!==e}))||(P.log("[eme] Patching keyId in 'enc"+(n?"a":"v")+">sinf>>tenc' box: "+ye(i)+" -> "+ye(r)),t.set(r,8));}}));}));})),e}(e,i)),this.emitInitSegment=!0;},t.generateInitSegment=function(e){var t=this.audioCodec,r=this.videoCodec;if(null==e||!e.byteLength)return this.initTracks=void 0,void(this.initData=void 0);var i=this.initData=Ce(e);i.audio&&(t=Kn(i.audio,Y)),i.video&&(r=Kn(i.video,W));var n={};i.audio&&i.video?n.audiovideo={container:"video/mp4",codec:t+","+r,initSegment:e,id:"main"}:i.audio?n.audio={container:"audio/mp4",codec:t,initSegment:e,id:"audio"}:i.video?n.video={container:"video/mp4",codec:r,initSegment:e,id:"main"}:this.logger.warn("[passthrough-remuxer.ts]: initSegment does not contain moov or trak boxes."),this.initTracks=n;},t.remux=function(e,t,r,i,n,a){var s,o,l=this.initPTS,u=this.lastEndTime,d={audio:void 0,video:void 0,text:i,id3:r,initSegment:void 0};E(u)||(u=this.lastEndTime=n||0);var h=t.samples;if(null==h||!h.length)return d;var c={initPTS:void 0,timescale:1},f=this.initData;if(null!=(s=f)&&s.length||(this.generateInitSegment(h),f=this.initData),null==(o=f)||!o.length)return this.logger.warn("[passthrough-remuxer.ts]: Failed to generate initSegment."),d;this.emitInitSegment&&(c.tracks=this.initTracks,this.emitInitSegment=!1);var g=function(e,t){for(var r=0,i=0,n=0,a=we(e,["moof","traf"]),s=0;s<a.length;s++){var o=a[s],l=we(o,["tfhd"])[0],u=t[Re(l,4)];if(u){var d=u.default,h=Re(l,0)|(null==d?void 0:d.flags),c=null==d?void 0:d.duration;8&h&&(c=Re(l,2&h?12:8));for(var f=u.timescale||9e4,g=we(o,["trun"]),v=0;v<g.length;v++)!(r=Oe(g[v]))&&c&&(r=c*Re(g[v],4)),u.type===W?i+=r/f:u.type===Y&&(n+=r/f);}}if(0===i&&0===n){for(var m=1/0,p=0,y=0,T=we(e,["sidx"]),S=0;S<T.length;S++){var L=Ie(T[S]);if(null!=L&&L.references){m=Math.min(m,L.earliestPresentationTime/L.timescale);var A=L.references.reduce((function(e,t){return e+t.info.duration||0}),0);y=(p=Math.max(p,A+L.earliestPresentationTime/L.timescale))-m;}}if(y&&E(y))return y}return i||n}(h,f),v=function(e,t){return we(t,["moof","traf"]).reduce((function(t,r){var i=we(r,["tfdt"])[0],n=i[0],a=we(r,["tfhd"]).reduce((function(t,r){var a=Re(r,4),s=e[a];if(s){var o=Re(i,4);if(1===n){if(o===Ee)return P.warn("[mp4-demuxer]: Ignoring assumed invalid signed 64-bit track fragment decode time"),t;o*=Ee+1,o+=Re(i,8);}var l=o/(s.timescale||9e4);if(E(l)&&(null===t||l<t))return l}return t}),null);return null!==a&&E(a)&&(null===t||a<t)?a:t}),null)}(f,h),m=null===v?n:v;(function(e,t,r,i){if(null===e)return !0;var n=Math.max(i,1),a=t-e.baseTime/e.timescale;return Math.abs(a-r)>n}(l,m,n,g)||c.timescale!==l.timescale&&a)&&(c.initPTS=m-n,l&&1===l.timescale&&this.logger.warn("Adjusting initPTS @"+n+" from "+l.baseTime/l.timescale+" to "+c.initPTS),this.initPTS=l={baseTime:c.initPTS,timescale:1});var p=e?m-l.baseTime/l.timescale:u,y=p+g;!function(e,t,r){we(t,["moof","traf"]).forEach((function(t){we(t,["tfhd"]).forEach((function(i){var n=Re(i,4),a=e[n];if(a){var s=a.timescale||9e4;we(t,["tfdt"]).forEach((function(e){var t=e[0],i=r*s;if(i){var n=Re(e,4);if(0===t)n-=i,De(e,4,n=Math.max(n,0));else {n*=Math.pow(2,32),n+=Re(e,8),n-=i,n=Math.max(n,0);var a=Math.floor(n/(Ee+1)),o=Math.floor(n%(Ee+1));De(e,4,a),De(e,8,o);}}}));}}));}));}(f,h,l.baseTime/l.timescale),g>0?this.lastEndTime=y:(this.logger.warn("Duration parsed from mp4 should be greater than zero"),this.resetNextTimestamp());var T=!!f.audio,S=!!f.video,L="";T&&(L+="audio"),S&&(L+="video");var A={data1:h,startPTS:p,startDTS:p,endPTS:y,endDTS:y,type:L,hasAudio:T,hasVideo:S,nb:1,dropped:0};return d.audio="audio"===A.type?A:void 0,d.video="audio"!==A.type?A:void 0,d.initSegment=c,d.id3=On(r,n,l,l),i.samples.length&&(d.text=Nn(i,n,l)),d},e}();function Kn(e,t){var r=null==e?void 0:e.codec;if(r&&r.length>4)return r;if(t===Y){if("ec-3"===r||"ac-3"===r||"alac"===r)return r;if("fLaC"===r||"Opus"===r)return et(r,!1);var i="mp4a.40.5";return this.logger.info('Parsed audio codec "'+r+'" or audio object type not handled. Using "'+i+'"'),i}return this.logger.warn('Unhandled video codec "'+r+'"'),"hvc1"===r||"hev1"===r?"hvc1.1.6.L120.90":"av01"===r?"av01.0.04M.08":"avc1.42e01e"}try{Un=self.performance.now.bind(self.performance);}catch(e){Un=Date.now;}var Hn=[{demux:ln,remux:Gn},{demux:yn,remux:Fn},{demux:sn,remux:Fn},{demux:kn,remux:Fn}];Hn.splice(2,0,{demux:dn,remux:Fn});var Vn=function(){function e(e,t,r,i,n,a){this.asyncResult=!1,this.logger=void 0,this.observer=void 0,this.typeSupported=void 0,this.config=void 0,this.id=void 0,this.demuxer=void 0,this.remuxer=void 0,this.decrypter=void 0,this.probe=void 0,this.decryptionPromise=null,this.transmuxConfig=void 0,this.currentTransmuxState=void 0,this.observer=e,this.typeSupported=t,this.config=r,this.id=n,this.logger=a;}var t=e.prototype;return t.configure=function(e){this.transmuxConfig=e,this.decrypter&&this.decrypter.reset();},t.push=function(e,t,r,i){var n=this,a=r.transmuxing;a.executeStart=Un();var s=new Uint8Array(e),o=this.currentTransmuxState,l=this.transmuxConfig;i&&(this.currentTransmuxState=i);var u=i||o,d=u.contiguous,h=u.discontinuity,c=u.trackSwitch,f=u.accurateTimeOffset,g=u.timeOffset,v=u.initSegmentChange,m=l.audioCodec,p=l.videoCodec,y=l.defaultInitPts,E=l.duration,T=l.initSegmentData,S=function(e,t){var r=null;return e.byteLength>0&&null!=(null==t?void 0:t.key)&&null!==t.iv&&null!=t.method&&(r=t),r}(s,t);if(S&&re(S.method)){var k=this.getDecrypter(),b=ie(S.method);if(!k.isSync())return this.asyncResult=!0,this.decryptionPromise=k.webCryptoDecrypt(s,S.key.buffer,S.iv.buffer,b).then((function(e){var t=n.push(e,null,r);return n.decryptionPromise=null,t})),this.decryptionPromise;var D=k.softwareDecrypt(s,S.key.buffer,S.iv.buffer,b);if(r.part>-1&&(D=k.flush()),!D)return a.executeEnd=Un(),Yn(r);s=new Uint8Array(D);}var w=this.needsProbing(h,c);if(w){var I=this.configureTransmuxer(s);if(I)return this.logger.warn("[transmuxer] "+I.message),this.observer.emit(L.ERROR,L.ERROR,{type:A.MEDIA_ERROR,details:R.FRAG_PARSING_ERROR,fatal:!1,error:I,reason:I.message}),a.executeEnd=Un(),Yn(r)}(h||c||v||w)&&this.resetInitSegment(T,m,p,E,t),(h||v||w)&&this.resetInitialTimestamp(y),d||this.resetContiguity();var C=this.transmux(s,S,g,f,r);this.asyncResult=Wn(C);var _=this.currentTransmuxState;return _.contiguous=!0,_.discontinuity=!1,_.trackSwitch=!1,a.executeEnd=Un(),C},t.flush=function(e){var t=this,r=e.transmuxing;r.executeStart=Un();var i=this.decrypter,n=this.currentTransmuxState,a=this.decryptionPromise;if(a)return this.asyncResult=!0,a.then((function(){return t.flush(e)}));var s=[],o=n.timeOffset;if(i){var l=i.flush();l&&s.push(this.push(l,null,e));}var u=this.demuxer,d=this.remuxer;if(!u||!d){r.executeEnd=Un();var h=[Yn(e)];return this.asyncResult?Promise.resolve(h):h}var c=u.flush(o);return Wn(c)?(this.asyncResult=!0,c.then((function(r){return t.flushRemux(s,r,e),s}))):(this.flushRemux(s,c,e),this.asyncResult?Promise.resolve(s):s)},t.flushRemux=function(e,t,r){var i=t.audioTrack,n=t.videoTrack,a=t.id3Track,s=t.textTrack,o=this.currentTransmuxState,l=o.accurateTimeOffset,u=o.timeOffset;this.logger.log("[transmuxer.ts]: Flushed "+this.id+" sn: "+r.sn+(r.part>-1?" p: "+r.part:"")+" of "+(this.id===Lt?"level":"track")+" "+r.level);var d=this.remuxer.remux(i,n,a,s,u,l,!0,this.id);e.push({remuxResult:d,chunkMeta:r}),r.transmuxing.executeEnd=Un();},t.resetInitialTimestamp=function(e){var t=this.demuxer,r=this.remuxer;t&&r&&(t.resetTimeStamp(e),r.resetTimeStamp(e));},t.resetContiguity=function(){var e=this.demuxer,t=this.remuxer;e&&t&&(e.resetContiguity(),t.resetNextTimestamp());},t.resetInitSegment=function(e,t,r,i,n){var a=this.demuxer,s=this.remuxer;a&&s&&(a.resetInitSegment(e,t,r,i),s.resetInitSegment(e,t,r,n));},t.destroy=function(){this.demuxer&&(this.demuxer.destroy(),this.demuxer=void 0),this.remuxer&&(this.remuxer.destroy(),this.remuxer=void 0);},t.transmux=function(e,t,r,i,n){return t&&"SAMPLE-AES"===t.method?this.transmuxSampleAes(e,t,r,i,n):this.transmuxUnencrypted(e,r,i,n)},t.transmuxUnencrypted=function(e,t,r,i){var n=this.demuxer.demux(e,t,!1,!this.config.progressive),a=n.audioTrack,s=n.videoTrack,o=n.id3Track,l=n.textTrack;return {remuxResult:this.remuxer.remux(a,s,o,l,t,r,!1,this.id),chunkMeta:i}},t.transmuxSampleAes=function(e,t,r,i,n){var a=this;return this.demuxer.demuxSampleAes(e,t,r).then((function(e){return {remuxResult:a.remuxer.remux(e.audioTrack,e.videoTrack,e.id3Track,e.textTrack,r,i,!1,a.id),chunkMeta:n}}))},t.configureTransmuxer=function(e){for(var t,r=this.config,i=this.observer,n=this.typeSupported,a=0,s=Hn.length;a<s;a++){var o;if(null!=(o=Hn[a].demux)&&o.probe(e,this.logger)){t=Hn[a];break}}if(!t)return new Error("Failed to find demuxer by probing fragment data");var l=this.demuxer,u=this.remuxer,d=t.remux,h=t.demux;u&&u instanceof d||(this.remuxer=new d(i,r,n,this.logger)),l&&l instanceof h||(this.demuxer=new h(i,r,n,this.logger),this.probe=h.probe);},t.needsProbing=function(e,t){return !this.demuxer||!this.remuxer||e||t},t.getDecrypter=function(){var e=this.decrypter;return e||(e=this.decrypter=new yi(this.config)),e},e}(),Yn=function(e){return {remuxResult:{},chunkMeta:e}};function Wn(e){return "then"in e&&e.then instanceof Function}var jn=function(e,t,r,i,n){this.audioCodec=void 0,this.videoCodec=void 0,this.initSegmentData=void 0,this.duration=void 0,this.defaultInitPts=void 0,this.audioCodec=e,this.videoCodec=t,this.initSegmentData=r,this.duration=i,this.defaultInitPts=n||null;},qn=function(e,t,r,i,n,a){this.discontinuity=void 0,this.contiguous=void 0,this.accurateTimeOffset=void 0,this.trackSwitch=void 0,this.timeOffset=void 0,this.initSegmentChange=void 0,this.discontinuity=e,this.contiguous=t,this.accurateTimeOffset=r,this.trackSwitch=i,this.timeOffset=n,this.initSegmentChange=a;},Xn={exports:{}};!function(e){var t=Object.prototype.hasOwnProperty,r="~";function i(){}function n(e,t,r){this.fn=e,this.context=t,this.once=r||!1;}function a(e,t,i,a,s){if("function"!=typeof i)throw new TypeError("The listener must be a function");var o=new n(i,a||e,s),l=r?r+t:t;return e._events[l]?e._events[l].fn?e._events[l]=[e._events[l],o]:e._events[l].push(o):(e._events[l]=o,e._eventsCount++),e}function s(e,t){0==--e._eventsCount?e._events=new i:delete e._events[t];}function o(){this._events=new i,this._eventsCount=0;}Object.create&&(i.prototype=Object.create(null),(new i).__proto__||(r=!1)),o.prototype.eventNames=function(){var e,i,n=[];if(0===this._eventsCount)return n;for(i in e=this._events)t.call(e,i)&&n.push(r?i.slice(1):i);return Object.getOwnPropertySymbols?n.concat(Object.getOwnPropertySymbols(e)):n},o.prototype.listeners=function(e){var t=r?r+e:e,i=this._events[t];if(!i)return [];if(i.fn)return [i.fn];for(var n=0,a=i.length,s=new Array(a);n<a;n++)s[n]=i[n].fn;return s},o.prototype.listenerCount=function(e){var t=r?r+e:e,i=this._events[t];return i?i.fn?1:i.length:0},o.prototype.emit=function(e,t,i,n,a,s){var o=r?r+e:e;if(!this._events[o])return !1;var l,u,d=this._events[o],h=arguments.length;if(d.fn){switch(d.once&&this.removeListener(e,d.fn,void 0,!0),h){case 1:return d.fn.call(d.context),!0;case 2:return d.fn.call(d.context,t),!0;case 3:return d.fn.call(d.context,t,i),!0;case 4:return d.fn.call(d.context,t,i,n),!0;case 5:return d.fn.call(d.context,t,i,n,a),!0;case 6:return d.fn.call(d.context,t,i,n,a,s),!0}for(u=1,l=new Array(h-1);u<h;u++)l[u-1]=arguments[u];d.fn.apply(d.context,l);}else {var c,f=d.length;for(u=0;u<f;u++)switch(d[u].once&&this.removeListener(e,d[u].fn,void 0,!0),h){case 1:d[u].fn.call(d[u].context);break;case 2:d[u].fn.call(d[u].context,t);break;case 3:d[u].fn.call(d[u].context,t,i);break;case 4:d[u].fn.call(d[u].context,t,i,n);break;default:if(!l)for(c=1,l=new Array(h-1);c<h;c++)l[c-1]=arguments[c];d[u].fn.apply(d[u].context,l);}}return !0},o.prototype.on=function(e,t,r){return a(this,e,t,r,!1)},o.prototype.once=function(e,t,r){return a(this,e,t,r,!0)},o.prototype.removeListener=function(e,t,i,n){var a=r?r+e:e;if(!this._events[a])return this;if(!t)return s(this,a),this;var o=this._events[a];if(o.fn)o.fn!==t||n&&!o.once||i&&o.context!==i||s(this,a);else {for(var l=0,u=[],d=o.length;l<d;l++)(o[l].fn!==t||n&&!o[l].once||i&&o[l].context!==i)&&u.push(o[l]);u.length?this._events[a]=1===u.length?u[0]:u:s(this,a);}return this},o.prototype.removeAllListeners=function(e){var t;return e?(t=r?r+e:e,this._events[t]&&s(this,t)):(this._events=new i,this._eventsCount=0),this},o.prototype.off=o.prototype.removeListener,o.prototype.addListener=o.prototype.on,o.prefixed=r,o.EventEmitter=o,e.exports=o;}(Xn);var zn=m(Xn.exports),Qn=[];function Jn(e,t,r){if(!((i=t.remuxResult).audio||i.video||i.text||i.id3||i.initSegment))return !1;var i,n=[],a=t.remuxResult,s=a.audio,o=a.video;return s&&$n(n,s),o&&$n(n,o),e.postMessage({event:"transmuxComplete",data:t,instanceNo:r},n),!0}function $n(e,t){t.data1&&e.push(t.data1.buffer),t.data2&&e.push(t.data2.buffer);}function Zn(e,t,r,i){t.reduce((function(t,r){return Jn(e,r,i)||t}),!1)||e.postMessage({event:"transmuxComplete",data:t[0],instanceNo:i}),e.postMessage({event:"flush",data:r,instanceNo:i});}function ea(e,t,r){self.postMessage({event:e,data:t,instanceNo:r});}void 0!==t&&t&&self.addEventListener("message",(function(e){var t=e.data,r=t.instanceNo;if(void 0!==r){var i=Qn[r];if("reset"===t.cmd&&(delete Qn[t.resetNo],i&&i.destroy(),t.cmd="init"),"init"===t.cmd){var n=JSON.parse(t.config),a=new zn;a.on(L.FRAG_DECRYPTED,ea),a.on(L.ERROR,ea);var s=_(n.debug,t.id);return function(e,t){var r=function(r){var i=function(e){ea("workerLog",{logType:r,message:e},t);};e[r]=i;};for(var i in e)r(i);}(s,r),Qn[r]=new Vn(a,t.typeSupported,n,"",t.id,s),void ea("init",null,r)}if(i)switch(t.cmd){case"configure":i.configure(t.config);break;case"demux":var o=i.push(t.data,t.decryptdata,t.chunkMeta,t.state);Wn(o)?o.then((function(e){Jn(self,e,r);})).catch((function(e){ea(L.ERROR,{instanceNo:r,type:A.MEDIA_ERROR,details:R.FRAG_PARSING_ERROR,chunkMeta:t.chunkMeta,fatal:!1,error:e,err:e,reason:"transmuxer-worker push error"},r);})):Jn(self,o,r);break;case"flush":var l=t.chunkMeta,u=i.flush(l);Wn(u)?u.then((function(e){Zn(self,e,l,r);})).catch((function(e){ea(L.ERROR,{type:A.MEDIA_ERROR,details:R.FRAG_PARSING_ERROR,chunkMeta:t.chunkMeta,fatal:!1,error:e,err:e,reason:"transmuxer-worker flush error"},r);})):Zn(self,u,l,r);}}}));var ta=void 0,ra={},ia=0,na=function(){function t(t,r,i,n){var a=this;this.error=null,this.hls=void 0,this.id=void 0,this.instanceNo=ia++,this.observer=void 0,this.frag=null,this.part=null,this.useWorker=void 0,this.workerContext=null,this.transmuxer=null,this.onTransmuxComplete=void 0,this.onFlush=void 0,this.onWorkerMessage=function(e){var t=e.data,r=a.hls;if(r&&null!=t&&t.event&&t.instanceNo===a.instanceNo)switch(t.event){case"init":var i,n=null==(i=a.workerContext)?void 0:i.objectURL;n&&self.URL.revokeObjectURL(n);break;case"transmuxComplete":a.handleTransmuxComplete(t.data);break;case"flush":a.onFlush(t.data);break;case"workerLog":r.logger[t.data.logType]&&r.logger[t.data.logType](t.data.message);break;default:t.data=t.data||{},t.data.frag=a.frag,t.data.part=a.part,t.data.id=a.id,r.trigger(t.event,t.data);}},this.onWorkerError=function(e){if(a.hls){var t=new Error(e.message+"  ("+e.filename+":"+e.lineno+")");a.hls.config.enableWorker=!1,a.hls.logger.warn('Error in "'+a.id+'" Web Worker, fallback to inline'),a.hls.trigger(L.ERROR,{type:A.OTHER_ERROR,details:R.INTERNAL_EXCEPTION,fatal:!1,event:"demuxerWorker",error:t});}};var s=t.config;this.hls=t,this.id=r,this.useWorker=!!s.enableWorker,this.onTransmuxComplete=i,this.onFlush=n;var o=function(e,t){(t=t||{}).frag=a.frag||void 0,e===L.ERROR&&(t.parent=a.id,t.part=a.part,a.error=t.error),a.hls.trigger(e,t);};this.observer=new zn,this.observer.on(L.FRAG_DECRYPTED,o),this.observer.on(L.ERROR,o);var l=rt(s.preferManagedMediaSource);if(this.useWorker&&"undefined"!=typeof Worker){var u=this.hls.logger;s.workerPath;try{s.workerPath?(u.log("loading Web Worker "+s.workerPath+' for "'+r+'"'),this.workerContext=function(e){var t=ra[e];if(t)return t.clientCount++,t;var r=new self.URL(e,self.location.href).href,i={worker:new self.Worker(r),scriptURL:r,clientCount:1};return ra[e]=i,i}(s.workerPath)):(u.log('injecting Web Worker for "'+r+'"'),this.workerContext=function(){var t=ra[void 0];if(t)return t.clientCount++,t;var r=new self.Blob(["var exports={};var module={exports:exports};function define(f){f()};define.amd=true;("+e.toString()+")(true);"],{type:"text/javascript"}),i=self.URL.createObjectURL(r),n={worker:new self.Worker(i),objectURL:i,clientCount:1};return ra[void 0]=n,n}());var d=this.workerContext.worker;d.addEventListener("message",this.onWorkerMessage),d.addEventListener("error",this.onWorkerError),d.postMessage({instanceNo:this.instanceNo,cmd:"init",typeSupported:l,id:r,config:JSON.stringify(s)});}catch(e){u.warn('Error setting up "'+r+'" Web Worker, fallback to inline',e),this.terminateWorker(),this.error=null,this.transmuxer=new Vn(this.observer,l,s,"",r,t.logger);}}else this.transmuxer=new Vn(this.observer,l,s,"",r,t.logger);}var r=t.prototype;return r.reset=function(){if(this.frag=null,this.part=null,this.workerContext){var e=this.instanceNo;this.instanceNo=ia++;var t=this.hls.config,r=rt(t.preferManagedMediaSource);this.workerContext.worker.postMessage({instanceNo:this.instanceNo,cmd:"reset",resetNo:e,typeSupported:r,id:this.id,config:JSON.stringify(t)});}},r.terminateWorker=function(){if(this.workerContext){var e=this.workerContext.worker;this.workerContext=null,e.removeEventListener("message",this.onWorkerMessage),e.removeEventListener("error",this.onWorkerError),function(e){var t=ra[e||ta];if(t&&1==t.clientCount--){var r=t.worker,i=t.objectURL;delete ra[e||ta],i&&self.URL.revokeObjectURL(i),r.terminate();}}(this.hls.config.workerPath);}},r.destroy=function(){if(this.workerContext)this.terminateWorker(),this.onWorkerMessage=this.onWorkerError=null;else {var e=this.transmuxer;e&&(e.destroy(),this.transmuxer=null);}var t=this.observer;t&&t.removeAllListeners(),this.frag=null,this.part=null,this.observer=null,this.hls=null;},r.push=function(e,t,r,i,n,a,s,o,l,u){var d,h,c=this;l.transmuxing.start=self.performance.now();var f=this.instanceNo,g=this.transmuxer,v=a?a.start:n.start,m=n.decryptdata,p=this.frag,y=!(p&&n.cc===p.cc),E=!(p&&l.level===p.level),T=p?l.sn-p.sn:-1,S=this.part?l.part-this.part.index:-1,L=0===T&&l.id>1&&l.id===(null==p?void 0:p.stats.chunkCount),A=!E&&(1===T||0===T&&(1===S||L&&S<=0)),R=self.performance.now();(E||T||0===n.stats.parsing.start)&&(n.stats.parsing.start=R),!a||!S&&A||(a.stats.parsing.start=R);var k=!(p&&(null==(d=n.initSegment)?void 0:d.url)===(null==(h=p.initSegment)?void 0:h.url)),b=new qn(y,A,o,E,v,k);if(!A||y||k){this.hls.logger.log("[transmuxer-interface, "+n.type+"]: Starting new transmux session for sn: "+l.sn+" p: "+l.part+" level: "+l.level+" id: "+l.id+"\n        discontinuity: "+y+"\n        trackSwitch: "+E+"\n        contiguous: "+A+"\n        accurateTimeOffset: "+o+"\n        timeOffset: "+v+"\n        initSegmentChange: "+k);var D=new jn(r,i,t,s,u);this.configureTransmuxer(D);}if(this.frag=n,this.part=a,this.workerContext)this.workerContext.worker.postMessage({instanceNo:f,cmd:"demux",data:e,decryptdata:m,chunkMeta:l,state:b},e instanceof ArrayBuffer?[e]:[]);else if(g){var w=g.push(e,m,l,b);Wn(w)?w.then((function(e){c.handleTransmuxComplete(e);})).catch((function(e){c.transmuxerError(e,l,"transmuxer-interface push error");})):this.handleTransmuxComplete(w);}},r.flush=function(e){var t=this;e.transmuxing.start=self.performance.now();var r=this.instanceNo,i=this.transmuxer;if(this.workerContext)this.workerContext.worker.postMessage({instanceNo:r,cmd:"flush",chunkMeta:e});else if(i){var n=i.flush(e);Wn(n)?n.then((function(r){t.handleFlushResult(r,e);})).catch((function(r){t.transmuxerError(r,e,"transmuxer-interface flush error");})):this.handleFlushResult(n,e);}},r.transmuxerError=function(e,t,r){this.hls&&(this.error=e,this.hls.trigger(L.ERROR,{type:A.MEDIA_ERROR,details:R.FRAG_PARSING_ERROR,chunkMeta:t,frag:this.frag||void 0,part:this.part||void 0,fatal:!1,error:e,err:e,reason:r}));},r.handleFlushResult=function(e,t){var r=this;e.forEach((function(e){r.handleTransmuxComplete(e);})),this.onFlush(t);},r.configureTransmuxer=function(e){var t=this.instanceNo,r=this.transmuxer;this.workerContext?this.workerContext.worker.postMessage({instanceNo:t,cmd:"configure",config:e}):r&&r.configure(e);},r.handleTransmuxComplete=function(e){e.chunkMeta.transmuxing.end=self.performance.now(),this.onTransmuxComplete(e);},t}();function aa(e,t){if(e.length!==t.length)return !1;for(var r=0;r<e.length;r++)if(!sa(e[r].attrs,t[r].attrs))return !1;return !0}function sa(e,t,r){var i=e["STABLE-RENDITION-ID"];return i&&!r?i===t["STABLE-RENDITION-ID"]:!(r||["LANGUAGE","NAME","CHARACTERISTICS","AUTOSELECT","DEFAULT","FORCED","ASSOC-LANGUAGE"]).some((function(r){return e[r]!==t[r]}))}function oa(e,t){return t.label.toLowerCase()===e.name.toLowerCase()&&(!t.language||t.language.toLowerCase()===(e.lang||"").toLowerCase())}var la=function(e){function t(t,r,i){var n;return (n=e.call(this,t,r,i,"audio-stream-controller",At)||this).videoAnchor=null,n.mainFragLoading=null,n.bufferedTrack=null,n.switchingTrack=null,n.trackId=-1,n.waitingData=null,n.mainDetails=null,n.flushing=!1,n.bufferFlushed=!1,n.cachedTrackLoadedData=null,n.registerListeners(),n}u(t,e);var r=t.prototype;return r.onHandlerDestroying=function(){this.unregisterListeners(),e.prototype.onHandlerDestroying.call(this),this.mainDetails=null,this.bufferedTrack=null,this.switchingTrack=null;},r.registerListeners=function(){e.prototype.registerListeners.call(this);var t=this.hls;t.on(L.LEVEL_LOADED,this.onLevelLoaded,this),t.on(L.AUDIO_TRACKS_UPDATED,this.onAudioTracksUpdated,this),t.on(L.AUDIO_TRACK_SWITCHING,this.onAudioTrackSwitching,this),t.on(L.AUDIO_TRACK_LOADED,this.onAudioTrackLoaded,this),t.on(L.BUFFER_RESET,this.onBufferReset,this),t.on(L.BUFFER_CREATED,this.onBufferCreated,this),t.on(L.BUFFER_FLUSHING,this.onBufferFlushing,this),t.on(L.BUFFER_FLUSHED,this.onBufferFlushed,this),t.on(L.INIT_PTS_FOUND,this.onInitPtsFound,this),t.on(L.FRAG_LOADING,this.onFragLoading,this),t.on(L.FRAG_BUFFERED,this.onFragBuffered,this);},r.unregisterListeners=function(){var t=this.hls;t&&(e.prototype.unregisterListeners.call(this),t.off(L.LEVEL_LOADED,this.onLevelLoaded,this),t.off(L.AUDIO_TRACKS_UPDATED,this.onAudioTracksUpdated,this),t.off(L.AUDIO_TRACK_SWITCHING,this.onAudioTrackSwitching,this),t.off(L.AUDIO_TRACK_LOADED,this.onAudioTrackLoaded,this),t.off(L.BUFFER_RESET,this.onBufferReset,this),t.off(L.BUFFER_CREATED,this.onBufferCreated,this),t.off(L.BUFFER_FLUSHING,this.onBufferFlushing,this),t.off(L.BUFFER_FLUSHED,this.onBufferFlushed,this),t.off(L.INIT_PTS_FOUND,this.onInitPtsFound,this),t.on(L.FRAG_LOADING,this.onFragLoading,this),t.off(L.FRAG_BUFFERED,this.onFragBuffered,this));},r.onInitPtsFound=function(e,t){var r=t.frag,i=t.id,n=t.initPTS,a=t.timescale;if(i===Lt){var s=r.cc,o=this.fragCurrent;if(this.initPTS[s]={baseTime:n,timescale:a},this.log("InitPTS for cc: "+s+" found from main: "+n+"/"+a),this.videoAnchor=r,this.state===Ci){var l=this.waitingData;l&&l.frag.cc===s||(this.nextLoadPosition=this.findSyncFrag(r).start),this.tick();}else !this.loadedmetadata&&o&&o.cc!==s&&(this.startFragRequested=!1,this.nextLoadPosition=this.findSyncFrag(r).start,o.abortRequests(),this.resetLoadingState());}},r.findSyncFrag=function(e){var t=this.getLevelDetails(),r=e.cc;return function(e,t,r){if(e&&e.startCC<=t&&e.endCC>=t){var i=r.start,n=r.end;return Sr(e.fragments,(function(e){return e.cc<t||e.end<=i?1:e.cc>t||e.start>=n?-1:0}))}return null}(t,r,e)||t&&kr(t.fragments,r)||e},r.startLoad=function(e){if(!this.levels)return this.startPosition=e,void(this.state=Ti);var t=this.lastCurrentTime;this.stopLoad(),this.setInterval(100),t>0&&-1===e?(this.log("Override startPosition with lastCurrentTime @"+t.toFixed(3)),e=t,this.state=Si):(this.loadedmetadata=!1,this.state=ki),this.nextLoadPosition=this.startPosition=this.lastCurrentTime=e,this.tick();},r.doTick=function(){switch(this.state){case Si:this.doTickIdle();break;case ki:var t,r=this.levels,i=this.trackId,n=null==r||null==(t=r[i])?void 0:t.details;if(n){if(this.waitForCdnTuneIn(n))break;this.state=Ci;}break;case Ri:var a,s=performance.now(),o=this.retryDate;if(!o||s>=o||null!=(a=this.media)&&a.seeking){var l=this.levels,u=this.trackId;this.log("RetryDate reached, switch back to IDLE state"),this.resetStartWhenNotLoaded((null==l?void 0:l[u])||null),this.state=Si;}break;case Ci:var d=this.waitingData;if(d){var h=d.frag,c=d.part,f=d.cache,g=d.complete,v=this.videoAnchor;if(void 0!==this.initPTS[h.cc]){this.waitingData=null,this.state=Ai;var m={frag:h,part:c,payload:f.flush(),networkDetails:null};this._handleFragmentLoadProgress(m),g&&e.prototype._handleFragmentLoadComplete.call(this,m);}else v&&v.cc!==d.frag.cc&&(this.log("Waiting fragment cc ("+h.cc+") cancelled because video is at cc "+v.cc),this.nextLoadPosition=this.findSyncFrag(v).start,this.clearWaitingFragment());}else this.state!==Ti&&(this.state=Si);}this.onTickEnd();},r.clearWaitingFragment=function(){var e=this.waitingData;e&&(this.loadedmetadata||(this.startFragRequested=!1),this.fragmentTracker.removeFragment(e.frag),this.waitingData=null,this.state!==Ti&&(this.state=Si));},r.resetLoadingState=function(){this.clearWaitingFragment(),e.prototype.resetLoadingState.call(this);},r.onTickEnd=function(){var e=this.media;null!=e&&e.readyState&&(this.lastCurrentTime=e.currentTime);},r.doTickIdle=function(){var e,t=this.hls,r=this.levels,i=this.media,n=this.trackId,a=t.config;if(this.buffering&&(i||!this.startFragRequested&&a.startFragPrefetch)&&null!=r&&r[n]){var s=r[n],o=s.details;if(!o||o.live&&this.levelLastLoaded!==s||this.waitForCdnTuneIn(o))this.state=ki;else {var l=this.mediaBuffer?this.mediaBuffer:this.media;this.bufferFlushed&&l&&(this.bufferFlushed=!1,this.afterBufferFlushed(l,Y,At));var u=this.getFwdBufferInfo(l,At);if(null!==u){var d=this.bufferedTrack,h=this.switchingTrack;if(!h&&this._streamEnded(u,o))return t.trigger(L.BUFFER_EOS,{type:"audio"}),void(this.state=wi);var c=u.len,f=t.maxBufferLength,g=o.fragments,v=g[0].start,m=this.getLoadPosition(),p=this.flushing?m:u.end;if(h&&i){var y=m;d&&!sa(h.attrs,d.attrs)&&(p=y),o.PTSKnown&&y<v&&(u.end>v||u.nextStart)&&(this.log("Alt audio track ahead of main track, seek to start of alt audio track"),i.currentTime=v+.05);}if(!(c>=f&&!h&&p<g[g.length-1].start)){var E=this.getNextFragment(p,o);if(E&&this.isLoopLoading(E,p)&&(E=this.getNextFragmentLoopLoading(E,o,u,Lt,f)),E){var T=null==(e=this.mainFragLoading)?void 0:e.frag;if(this.startFragRequested&&T&&"initSegment"!==T.sn&&"initSegment"!==E.sn&&!E.endList&&(!o.live||!this.loadingParts&&p<this.hls.liveSyncPosition)){var S=T;if(E.start>S.end){var A=this.fragmentTracker.getFragAtPos(p,Lt);A&&A.end>T.end&&(S=A,this.mainFragLoading={frag:A,targetBufferTime:null});}if(E.start>S.end)return}this.loadFragment(E,s,p);}else this.bufferFlushed=!0;}}}}},r.onMediaDetaching=function(){this.bufferFlushed=this.flushing=!1,e.prototype.onMediaDetaching.call(this);},r.onAudioTracksUpdated=function(e,t){var r=t.audioTracks;this.resetTransmuxer(),this.levels=r.map((function(e){return new sr(e)}));},r.onAudioTrackSwitching=function(e,t){var r=!!t.url;this.trackId=t.id;var i=this.fragCurrent;i&&(i.abortRequests(),this.removeUnbufferedFrags(i.start)),this.resetLoadingState(),r?(this.switchingTrack=t,this.flushAudioIfNeeded(t),this.state!==Ti&&(this.setInterval(100),this.state=Si,this.tick())):(this.resetTransmuxer(),this.switchingTrack=null,this.bufferedTrack=t,this.clearInterval());},r.onManifestLoading=function(){e.prototype.onManifestLoading.call(this),this.bufferFlushed=this.flushing=!1,this.mainDetails=this.waitingData=this.videoAnchor=this.bufferedTrack=this.cachedTrackLoadedData=this.switchingTrack=null,this.trackId=-1;},r.onLevelLoaded=function(e,t){this.mainDetails=t.details,null!==this.cachedTrackLoadedData&&(this.hls.trigger(L.AUDIO_TRACK_LOADED,this.cachedTrackLoadedData),this.cachedTrackLoadedData=null);},r.onAudioTrackLoaded=function(e,t){var r;if(null!=this.mainDetails){var i=this.levels,n=t.details,a=t.id;if(i){this.log("Audio track "+a+" loaded ["+n.startSN+","+n.endSN+"]"+(n.lastPartSn?"[part-"+n.lastPartSn+"-"+n.lastPartIndex+"]":"")+",duration:"+n.totalduration);var s=i[a],o=0;if(n.live||null!=(r=s.details)&&r.live){this.checkLiveUpdate(n);var l,u=this.mainDetails;if(n.deltaUpdateFailed||!u)return;!s.details&&n.hasProgramDateTime&&u.hasProgramDateTime?(ui(n,u),o=n.fragments[0].start):o=this.alignPlaylists(n,s.details,null==(l=this.levelLastLoaded)?void 0:l.details);}s.details=n,this.levelLastLoaded=s,this.startFragRequested||!this.mainDetails&&n.live||this.setStartPosition(this.mainDetails||n,o),this.state!==ki||this.waitForCdnTuneIn(n)||(this.state=Si),this.tick();}else this.warn("Audio tracks were reset while loading level "+a);}else this.cachedTrackLoadedData=t;},r._handleFragmentLoadProgress=function(e){var t,r=e.frag,i=e.part,n=e.payload,a=this.config,s=this.trackId,o=this.levels;if(o){var l=o[s];if(l){var u=l.details;if(!u)return this.warn("Audio track details undefined on fragment load progress"),void this.removeUnbufferedFrags(r.start);var d=a.defaultAudioCodec||l.audioCodec||"mp4a.40.2",h=this.transmuxer;h||(h=this.transmuxer=new na(this.hls,At,this._handleTransmuxComplete.bind(this),this._handleTransmuxerFlush.bind(this)));var c=this.initPTS[r.cc],f=null==(t=r.initSegment)?void 0:t.data;if(void 0!==c){var g=i?i.index:-1,v=-1!==g,m=new ni(r.level,r.sn,r.stats.chunkCount,n.byteLength,g,v);h.push(n,f,d,"",r,i,u.totalduration,!1,m,c);}else this.log("Unknown video PTS for cc "+r.cc+", waiting for video PTS before demuxing audio frag "+r.sn+" of ["+u.startSN+" ,"+u.endSN+"],track "+s),(this.waitingData=this.waitingData||{frag:r,part:i,cache:new xi,complete:!1}).cache.push(new Uint8Array(n)),this.state=Ci;}else this.warn("Audio track is undefined on fragment load progress");}else this.warn("Audio tracks were reset while fragment load was in progress. Fragment "+r.sn+" of level "+r.level+" will not be buffered");},r._handleFragmentLoadComplete=function(t){this.waitingData?this.waitingData.complete=!0:e.prototype._handleFragmentLoadComplete.call(this,t);},r.onBufferReset=function(){this.mediaBuffer=null,this.loadedmetadata=!1;},r.onBufferCreated=function(e,t){var r=t.tracks.audio;r&&(this.mediaBuffer=r.buffer||null);},r.onFragLoading=function(e,t){t.frag.type===Lt&&"initSegment"!==t.frag.sn&&(this.mainFragLoading=t,this.state===Si&&this.tick());},r.onFragBuffered=function(e,t){var r=t.frag,i=t.part;if(r.type===At)if(this.fragContextChanged(r))this.warn("Fragment "+r.sn+(i?" p: "+i.index:"")+" of level "+r.level+" finished buffering, but was aborted. state: "+this.state+", audioSwitch: "+(this.switchingTrack?this.switchingTrack.name:"false"));else {if("initSegment"!==r.sn){this.fragPrevious=r;var n=this.switchingTrack;n&&(this.bufferedTrack=n,this.switchingTrack=null,this.hls.trigger(L.AUDIO_TRACK_SWITCHED,c({},n)));}this.fragBufferedComplete(r,i);}else if(!this.loadedmetadata&&r.type===Lt){var a=this.fragmentTracker.getState(r);a!==$r&&a!==Jr||(this.loadedmetadata=!0);}},r.onError=function(t,r){var i;if(r.fatal)this.state=Ii;else switch(r.details){case R.FRAG_GAP:case R.FRAG_PARSING_ERROR:case R.FRAG_DECRYPT_ERROR:case R.FRAG_LOAD_ERROR:case R.FRAG_LOAD_TIMEOUT:case R.KEY_LOAD_ERROR:case R.KEY_LOAD_TIMEOUT:this.onFragmentOrKeyLoadError(At,r);break;case R.AUDIO_TRACK_LOAD_ERROR:case R.AUDIO_TRACK_LOAD_TIMEOUT:case R.LEVEL_PARSING_ERROR:r.levelRetry||this.state!==ki||(null==(i=r.context)?void 0:i.type)!==Tt||(this.state=Si);break;case R.BUFFER_APPEND_ERROR:case R.BUFFER_FULL_ERROR:if(!r.parent||"audio"!==r.parent)return;if(r.details===R.BUFFER_APPEND_ERROR)return void this.resetLoadingState();this.reduceLengthAndFlushBuffer(r)&&(this.bufferedTrack=null,e.prototype.flushMainBuffer.call(this,0,Number.POSITIVE_INFINITY,"audio"));break;case R.INTERNAL_EXCEPTION:this.recoverWorkerError(r);}},r.onBufferFlushing=function(e,t){t.type!==W&&(this.flushing=!0);},r.onBufferFlushed=function(e,t){var r=t.type;if(r!==W){this.flushing=!1,this.bufferFlushed=!0,this.state===wi&&(this.state=Si);var i=this.mediaBuffer||this.media;i&&(this.afterBufferFlushed(i,r,At),this.tick());}},r._handleTransmuxComplete=function(e){var t,r="audio",i=this.hls,n=e.remuxResult,a=e.chunkMeta,s=this.getCurrentContext(a);if(s){var l=s.frag,u=s.part,d=s.level,h=d.details,c=n.audio,f=n.text,g=n.id3,v=n.initSegment;if(!this.fragContextChanged(l)&&h){if(this.state=bi,this.switchingTrack&&c&&this.completeAudioSwitch(this.switchingTrack),null!=v&&v.tracks){var m=l.initSegment||l;this._bufferInitSegment(d,v.tracks,m,a),i.trigger(L.FRAG_PARSING_INIT_SEGMENT,{frag:m,id:r,tracks:v.tracks});}if(c){var p=c.startPTS,y=c.endPTS,E=c.startDTS,T=c.endDTS;u&&(u.elementaryStreams[Y]={startPTS:p,endPTS:y,startDTS:E,endDTS:T}),l.setElementaryStreamInfo(Y,p,y,E,T),this.bufferFragmentData(c,l,u,a);}if(null!=g&&null!=(t=g.samples)&&t.length){var S=o({id:r,frag:l,details:h},g);i.trigger(L.FRAG_PARSING_METADATA,S);}if(f){var A=o({id:r,frag:l,details:h},f);i.trigger(L.FRAG_PARSING_USERDATA,A);}}else this.fragmentTracker.removeFragment(l);}else this.resetWhenMissingContext(a);},r._bufferInitSegment=function(e,t,r,i){if(this.state===bi&&(t.video&&delete t.video,t.audiovideo&&delete t.audiovideo,t.audio)){var n=t.audio;n.id="audio";var a=e.audioCodec;this.log("Init audio buffer, container:"+n.container+", codecs[level/parsed]=["+a+"/"+n.codec+"]"),a&&1===a.split(",").length&&(n.levelCodec=a),this.hls.trigger(L.BUFFER_CODECS,t);var s=n.initSegment;if(null!=s&&s.byteLength){var o={type:"audio",frag:r,part:null,chunkMeta:i,parent:r.type,data:s};this.hls.trigger(L.BUFFER_APPENDING,o);}this.tickImmediate();}},r.loadFragment=function(t,r,i){var n,a=this.fragmentTracker.getState(t);if(this.switchingTrack||a===zr||a===Jr)if("initSegment"===t.sn)this._loadInitSegment(t,r);else if(null!=(n=r.details)&&n.live&&!this.initPTS[t.cc]){this.log("Waiting for video PTS in continuity counter "+t.cc+" of live stream before loading audio fragment "+t.sn+" of level "+this.trackId),this.state=Ci;var s=this.mainDetails;s&&s.fragments[0].start!==r.details.fragments[0].start&&ui(r.details,s);}else e.prototype.loadFragment.call(this,t,r,i);else this.clearTrackerIfNeeded(t);},r.flushAudioIfNeeded=function(t){var r=this.media,i=this.bufferedTrack,n=null==i?void 0:i.attrs,a=t.attrs;r&&n&&(n.CHANNELS!==a.CHANNELS||i.name!==t.name||i.lang!==t.lang)&&(this.log("Switching audio track : flushing all audio"),e.prototype.flushMainBuffer.call(this,0,Number.POSITIVE_INFINITY,"audio"),this.bufferedTrack=null);},r.completeAudioSwitch=function(e){var t=this.hls;this.flushAudioIfNeeded(e),this.bufferedTrack=e,this.switchingTrack=null,t.trigger(L.AUDIO_TRACK_SWITCHED,c({},e));},t}(Pi),ua=function(e){function t(t){var r;return (r=e.call(this,t,"audio-track-controller")||this).tracks=[],r.groupIds=null,r.tracksInGroup=[],r.trackId=-1,r.currentTrack=null,r.selectDefaultTrack=!0,r.registerListeners(),r}u(t,e);var r=t.prototype;return r.registerListeners=function(){var e=this.hls;e.on(L.MANIFEST_LOADING,this.onManifestLoading,this),e.on(L.MANIFEST_PARSED,this.onManifestParsed,this),e.on(L.LEVEL_LOADING,this.onLevelLoading,this),e.on(L.LEVEL_SWITCHING,this.onLevelSwitching,this),e.on(L.AUDIO_TRACK_LOADED,this.onAudioTrackLoaded,this),e.on(L.ERROR,this.onError,this);},r.unregisterListeners=function(){var e=this.hls;e.off(L.MANIFEST_LOADING,this.onManifestLoading,this),e.off(L.MANIFEST_PARSED,this.onManifestParsed,this),e.off(L.LEVEL_LOADING,this.onLevelLoading,this),e.off(L.LEVEL_SWITCHING,this.onLevelSwitching,this),e.off(L.AUDIO_TRACK_LOADED,this.onAudioTrackLoaded,this),e.off(L.ERROR,this.onError,this);},r.destroy=function(){this.unregisterListeners(),this.tracks.length=0,this.tracksInGroup.length=0,this.currentTrack=null,e.prototype.destroy.call(this);},r.onManifestLoading=function(){this.tracks=[],this.tracksInGroup=[],this.groupIds=null,this.currentTrack=null,this.trackId=-1,this.selectDefaultTrack=!0;},r.onManifestParsed=function(e,t){this.tracks=t.audioTracks||[];},r.onAudioTrackLoaded=function(e,t){var r=t.id,i=t.groupId,n=t.details,a=this.tracksInGroup[r];if(a&&a.groupId===i){var s=a.details;a.details=t.details,this.log("Audio track "+r+' "'+a.name+'" lang:'+a.lang+" group:"+i+" loaded ["+n.startSN+"-"+n.endSN+"]"),r===this.trackId&&this.playlistLoaded(r,t,s);}else this.warn("Audio track with id:"+r+" and group:"+i+" not found in active group "+(null==a?void 0:a.groupId));},r.onLevelLoading=function(e,t){this.switchLevel(t.level);},r.onLevelSwitching=function(e,t){this.switchLevel(t.level);},r.switchLevel=function(e){var t=this.hls.levels[e];if(t){var r=t.audioGroups||null,i=this.groupIds,n=this.currentTrack;if(!r||(null==i?void 0:i.length)!==(null==r?void 0:r.length)||null!=r&&r.some((function(e){return -1===(null==i?void 0:i.indexOf(e))}))){this.groupIds=r,this.trackId=-1,this.currentTrack=null;var a=this.tracks.filter((function(e){return !r||-1!==r.indexOf(e.groupId)}));if(a.length)this.selectDefaultTrack&&!a.some((function(e){return e.default}))&&(this.selectDefaultTrack=!1),a.forEach((function(e,t){e.id=t;}));else if(!n&&!this.tracksInGroup.length)return;this.tracksInGroup=a;var s=this.hls.config.audioPreference;if(!n&&s){var o=Vr(s,a,Wr);if(o>-1)n=a[o];else {var l=Vr(s,this.tracks);n=this.tracks[l];}}var u=this.findTrackId(n);-1===u&&n&&(u=this.findTrackId(null));var d={audioTracks:a};this.log("Updating audio tracks, "+a.length+" track(s) found in group(s): "+(null==r?void 0:r.join(","))),this.hls.trigger(L.AUDIO_TRACKS_UPDATED,d);var h=this.trackId;if(-1!==u&&-1===h)this.setAudioTrack(u);else if(a.length&&-1===h){var c,f=new Error("No audio track selected for current audio group-ID(s): "+(null==(c=this.groupIds)?void 0:c.join(","))+" track count: "+a.length);this.warn(f.message),this.hls.trigger(L.ERROR,{type:A.MEDIA_ERROR,details:R.AUDIO_TRACK_LOAD_ERROR,fatal:!0,error:f});}}else this.shouldReloadPlaylist(n)&&this.setAudioTrack(this.trackId);}},r.onError=function(e,t){!t.fatal&&t.context&&(t.context.type!==Tt||t.context.id!==this.trackId||this.groupIds&&-1===this.groupIds.indexOf(t.context.groupId)||(this.requestScheduled=-1,this.checkRetry(t)));},r.setAudioOption=function(e){var t=this.hls;if(t.config.audioPreference=e,e){var r=this.allAudioTracks;if(this.selectDefaultTrack=!1,r.length){var i=this.currentTrack;if(i&&Yr(e,i,Wr))return i;var n=Vr(e,this.tracksInGroup,Wr);if(n>-1){var a=this.tracksInGroup[n];return this.setAudioTrack(n),a}if(i){var s=t.loadLevel;-1===s&&(s=t.firstAutoLevel);var o=function(e,t,r,i,n){var a=t[i],s=t.reduce((function(e,t,r){var i=t.uri;return (e[i]||(e[i]=[])).push(r),e}),{})[a.uri];s.length>1&&(i=Math.max.apply(Math,s));var o=a.videoRange,l=a.frameRate,u=a.codecSet.substring(0,4),d=jr(t,i,(function(t){if(t.videoRange!==o||t.frameRate!==l||t.codecSet.substring(0,4)!==u)return !1;var i=t.audioGroups,a=r.filter((function(e){return !i||-1!==i.indexOf(e.groupId)}));return Vr(e,a,n)>-1}));return d>-1?d:jr(t,i,(function(t){var i=t.audioGroups,a=r.filter((function(e){return !i||-1!==i.indexOf(e.groupId)}));return Vr(e,a,n)>-1}))}(e,t.levels,r,s,Wr);if(-1===o)return null;t.nextLoadLevel=o;}if(e.channels||e.audioCodec){var l=Vr(e,r);if(l>-1)return r[l]}}}return null},r.setAudioTrack=function(e){var t=this.tracksInGroup;if(e<0||e>=t.length)this.warn("Invalid audio track id: "+e);else {this.clearTimer(),this.selectDefaultTrack=!1;var r=this.currentTrack,i=t[e],n=i.details&&!i.details.live;if(!(e===this.trackId&&i===r&&n||(this.log("Switching to audio-track "+e+' "'+i.name+'" lang:'+i.lang+" group:"+i.groupId+" channels:"+i.channels),this.trackId=e,this.currentTrack=i,this.hls.trigger(L.AUDIO_TRACK_SWITCHING,c({},i)),n))){var a=this.switchParams(i.url,null==r?void 0:r.details,i.details);this.loadPlaylist(a);}}},r.findTrackId=function(e){for(var t=this.tracksInGroup,r=0;r<t.length;r++){var i=t[r];if((!this.selectDefaultTrack||i.default)&&(!e||Yr(e,i,Wr)))return r}if(e){for(var n=e.name,a=e.lang,s=e.assocLang,o=e.characteristics,l=e.audioCodec,u=e.channels,d=0;d<t.length;d++)if(Yr({name:n,lang:a,assocLang:s,characteristics:o,audioCodec:l,channels:u},t[d],Wr))return d;for(var h=0;h<t.length;h++){var c=t[h];if(sa(e.attrs,c.attrs,["LANGUAGE","ASSOC-LANGUAGE","CHARACTERISTICS"]))return h}for(var f=0;f<t.length;f++){var g=t[f];if(sa(e.attrs,g.attrs,["LANGUAGE"]))return f}}return -1},r.loadPlaylist=function(t){var r=this.currentTrack;if(this.shouldLoadPlaylist(r)&&r){e.prototype.loadPlaylist.call(this);var i=r.id,n=r.groupId,a=r.url;if(t)try{a=t.addDirectives(a);}catch(e){this.warn("Could not construct new URL with HLS Delivery Directives: "+e);}this.log("loading audio-track playlist "+i+' "'+r.name+'" lang:'+r.lang+" group:"+n),this.clearTimer(),this.hls.trigger(L.AUDIO_TRACK_LOADING,{url:a,id:i,groupId:n,deliveryDirectives:t||null});}},n(t,[{key:"allAudioTracks",get:function(){return this.tracks}},{key:"audioTracks",get:function(){return this.tracksInGroup}},{key:"audioTrack",get:function(){return this.trackId},set:function(e){this.selectDefaultTrack=!1,this.setAudioTrack(e);}}])}(Mr),da=function(e){function t(t,r,i){var n;return (n=e.call(this,t,r,i,"subtitle-stream-controller",Rt)||this).currentTrackId=-1,n.tracksBuffered=[],n.mainDetails=null,n.registerListeners(),n}u(t,e);var r=t.prototype;return r.onHandlerDestroying=function(){this.unregisterListeners(),e.prototype.onHandlerDestroying.call(this),this.mainDetails=null;},r.registerListeners=function(){e.prototype.registerListeners.call(this);var t=this.hls;t.on(L.LEVEL_LOADED,this.onLevelLoaded,this),t.on(L.SUBTITLE_TRACKS_UPDATED,this.onSubtitleTracksUpdated,this),t.on(L.SUBTITLE_TRACK_SWITCH,this.onSubtitleTrackSwitch,this),t.on(L.SUBTITLE_TRACK_LOADED,this.onSubtitleTrackLoaded,this),t.on(L.SUBTITLE_FRAG_PROCESSED,this.onSubtitleFragProcessed,this),t.on(L.BUFFER_FLUSHING,this.onBufferFlushing,this),t.on(L.FRAG_BUFFERED,this.onFragBuffered,this);},r.unregisterListeners=function(){e.prototype.unregisterListeners.call(this);var t=this.hls;t.off(L.LEVEL_LOADED,this.onLevelLoaded,this),t.off(L.SUBTITLE_TRACKS_UPDATED,this.onSubtitleTracksUpdated,this),t.off(L.SUBTITLE_TRACK_SWITCH,this.onSubtitleTrackSwitch,this),t.off(L.SUBTITLE_TRACK_LOADED,this.onSubtitleTrackLoaded,this),t.off(L.SUBTITLE_FRAG_PROCESSED,this.onSubtitleFragProcessed,this),t.off(L.BUFFER_FLUSHING,this.onBufferFlushing,this),t.off(L.FRAG_BUFFERED,this.onFragBuffered,this);},r.startLoad=function(e){this.stopLoad(),this.state=Si,this.setInterval(500),this.nextLoadPosition=this.startPosition=this.lastCurrentTime=e,this.tick();},r.onManifestLoading=function(){e.prototype.onManifestLoading.call(this),this.mainDetails=null;},r.onMediaDetaching=function(){this.tracksBuffered=[],e.prototype.onMediaDetaching.call(this);},r.onLevelLoaded=function(e,t){this.mainDetails=t.details;},r.onSubtitleFragProcessed=function(e,t){var r=t.frag,i=t.success;if("initSegment"!==r.sn&&(this.fragPrevious=r),this.state=Si,i){var n=this.tracksBuffered[this.currentTrackId];if(n){for(var a,s=r.start,o=0;o<n.length;o++)if(s>=n[o].start&&s<=n[o].end){a=n[o];break}var l=r.start+r.duration;a?a.end=l:(a={start:s,end:l},n.push(a)),this.fragmentTracker.fragBuffered(r),this.fragBufferedComplete(r,null);}}},r.onBufferFlushing=function(e,t){var r=t.startOffset,i=t.endOffset;if(0===r&&i!==Number.POSITIVE_INFINITY){var n=i-1;if(n<=0)return;t.endOffsetSubtitles=Math.max(0,n),this.tracksBuffered.forEach((function(e){for(var t=0;t<e.length;)if(e[t].end<=n)e.shift();else {if(!(e[t].start<n))break;e[t].start=n,t++;}})),this.fragmentTracker.removeFragmentsInRange(r,n,Rt);}},r.onFragBuffered=function(e,t){var r;this.loadedmetadata||t.frag.type!==Lt||null!=(r=this.media)&&r.buffered.length&&(this.loadedmetadata=!0);},r.onError=function(e,t){var r=t.frag;(null==r?void 0:r.type)===Rt&&(t.details===R.FRAG_GAP&&this.fragmentTracker.fragBuffered(r,!0),this.fragCurrent&&this.fragCurrent.abortRequests(),this.state!==Ti&&(this.state=Si));},r.onSubtitleTracksUpdated=function(e,t){var r=this,i=t.subtitleTracks;this.levels&&aa(this.levels,i)?this.levels=i.map((function(e){return new sr(e)})):(this.tracksBuffered=[],this.levels=i.map((function(e){var t=new sr(e);return r.tracksBuffered[t.id]=[],t})),this.fragmentTracker.removeFragmentsInRange(0,Number.POSITIVE_INFINITY,Rt),this.fragPrevious=null,this.mediaBuffer=null);},r.onSubtitleTrackSwitch=function(e,t){var r;if(this.currentTrackId=t.id,null!=(r=this.levels)&&r.length&&-1!==this.currentTrackId){var i=this.levels[this.currentTrackId];null!=i&&i.details?this.mediaBuffer=this.mediaBufferTimeRanges:this.mediaBuffer=null,i&&this.state!==Ti&&this.setInterval(500);}else this.clearInterval();},r.onSubtitleTrackLoaded=function(e,t){var r,i=this.currentTrackId,n=this.levels,a=t.details,s=t.id;if(n){var o=n[s];if(!(s>=n.length)&&o){this.log("Subtitle track "+s+" loaded ["+a.startSN+","+a.endSN+"]"+(a.lastPartSn?"[part-"+a.lastPartSn+"-"+a.lastPartIndex+"]":"")+",duration:"+a.totalduration),this.mediaBuffer=this.mediaBufferTimeRanges;var l=0;if(a.live||null!=(r=o.details)&&r.live){var u=this.mainDetails;if(a.deltaUpdateFailed||!u)return;var d,h=u.fragments[0];o.details?0===(l=this.alignPlaylists(a,o.details,null==(d=this.levelLastLoaded)?void 0:d.details))&&h&&cr(a,l=h.start):a.hasProgramDateTime&&u.hasProgramDateTime?(ui(a,u),l=a.fragments[0].start):h&&cr(a,l=h.start);}o.details=a,this.levelLastLoaded=o,s===i&&(this.startFragRequested||!this.mainDetails&&a.live||this.setStartPosition(this.mainDetails||a,l),this.tick(),a.live&&!this.fragCurrent&&this.media&&this.state===Si&&(Lr(null,a.fragments,this.media.currentTime,0)||(this.warn("Subtitle playlist not aligned with playback"),o.details=void 0)));}}else this.warn("Subtitle tracks were reset while loading level "+s);},r._handleFragmentLoadComplete=function(e){var t=this,r=e.frag,i=e.payload,n=r.decryptdata,a=this.hls;if(!this.fragContextChanged(r)&&i&&i.byteLength>0&&null!=n&&n.key&&n.iv&&re(n.method)){var s=performance.now();this.decrypter.decrypt(new Uint8Array(i),n.key.buffer,n.iv.buffer,ie(n.method)).catch((function(e){throw a.trigger(L.ERROR,{type:A.MEDIA_ERROR,details:R.FRAG_DECRYPT_ERROR,fatal:!1,error:e,reason:e.message,frag:r}),e})).then((function(e){var t=performance.now();a.trigger(L.FRAG_DECRYPTED,{frag:r,payload:e,stats:{tstart:s,tdecrypt:t}});})).catch((function(e){t.warn(e.name+": "+e.message),t.state=Si;}));}},r.doTick=function(){if(this.media){if(this.state===Si){var e=this.currentTrackId,t=this.levels,r=null==t?void 0:t[e];if(!r||!t.length||!r.details)return;var i=this.config,n=this.getLoadPosition(),a=ii.bufferedInfo(this.tracksBuffered[this.currentTrackId]||[],n,i.maxBufferHole),s=a.end,o=a.len,l=r.details;if(o>this.hls.maxBufferLength+l.levelTargetDuration)return;var u=l.fragments,d=u.length,h=l.edge,c=null,f=this.fragPrevious;if(s<h){var g=i.maxFragLookUpTolerance,v=s>h-g?0:g;!(c=Lr(f,u,Math.max(u[0].start,s),v))&&f&&f.start<u[0].start&&(c=u[0]);}else c=u[d-1];if(!c)return;if("initSegment"!==(c=this.mapToInitFragWhenRequired(c)).sn){var m=u[c.sn-l.startSN-1];m&&m.cc===c.cc&&this.fragmentTracker.getState(m)===zr&&(c=m);}this.fragmentTracker.getState(c)===zr&&this.loadFragment(c,r,s);}}else this.state=Si;},r.loadFragment=function(t,r,i){"initSegment"===t.sn?this._loadInitSegment(t,r):e.prototype.loadFragment.call(this,t,r,i);},n(t,[{key:"mediaBufferTimeRanges",get:function(){return new ha(this.tracksBuffered[this.currentTrackId]||[])}}])}(Pi),ha=function(e){this.buffered=void 0;var t=function(t,r,i){if((r>>>=0)>i-1)throw new DOMException("Failed to execute '"+t+"' on 'TimeRanges': The index provided ("+r+") is greater than the maximum bound ("+i+")");return e[r][t]};this.buffered={get length(){return e.length},end:function(r){return t("end",r,e.length)},start:function(r){return t("start",r,e.length)}};},ca=function(e){function t(t){var r;return (r=e.call(this,t,"subtitle-track-controller")||this).media=null,r.tracks=[],r.groupIds=null,r.tracksInGroup=[],r.trackId=-1,r.currentTrack=null,r.selectDefaultTrack=!0,r.queuedDefaultTrack=-1,r.useTextTrackPolling=!1,r.subtitlePollingInterval=-1,r._subtitleDisplay=!0,r.asyncPollTrackChange=function(){return r.pollTrackChange(0)},r.onTextTracksChanged=function(){if(r.useTextTrackPolling||self.clearInterval(r.subtitlePollingInterval),r.media&&r.hls.config.renderTextTracksNatively){for(var e=null,t=Pt(r.media.textTracks),i=0;i<t.length;i++)if("hidden"===t[i].mode)e=t[i];else if("showing"===t[i].mode){e=t[i];break}var n=r.findTrackForTextTrack(e);r.subtitleTrack!==n&&r.setSubtitleTrack(n);}},r.registerListeners(),r}u(t,e);var r=t.prototype;return r.destroy=function(){this.unregisterListeners(),this.tracks.length=0,this.tracksInGroup.length=0,this.currentTrack=null,this.onTextTracksChanged=this.asyncPollTrackChange=null,e.prototype.destroy.call(this);},r.registerListeners=function(){var e=this.hls;e.on(L.MEDIA_ATTACHED,this.onMediaAttached,this),e.on(L.MEDIA_DETACHING,this.onMediaDetaching,this),e.on(L.MANIFEST_LOADING,this.onManifestLoading,this),e.on(L.MANIFEST_PARSED,this.onManifestParsed,this),e.on(L.LEVEL_LOADING,this.onLevelLoading,this),e.on(L.LEVEL_SWITCHING,this.onLevelSwitching,this),e.on(L.SUBTITLE_TRACK_LOADED,this.onSubtitleTrackLoaded,this),e.on(L.ERROR,this.onError,this);},r.unregisterListeners=function(){var e=this.hls;e.off(L.MEDIA_ATTACHED,this.onMediaAttached,this),e.off(L.MEDIA_DETACHING,this.onMediaDetaching,this),e.off(L.MANIFEST_LOADING,this.onManifestLoading,this),e.off(L.MANIFEST_PARSED,this.onManifestParsed,this),e.off(L.LEVEL_LOADING,this.onLevelLoading,this),e.off(L.LEVEL_SWITCHING,this.onLevelSwitching,this),e.off(L.SUBTITLE_TRACK_LOADED,this.onSubtitleTrackLoaded,this),e.off(L.ERROR,this.onError,this);},r.onMediaAttached=function(e,t){this.media=t.media,this.media&&(this.queuedDefaultTrack>-1&&(this.subtitleTrack=this.queuedDefaultTrack,this.queuedDefaultTrack=-1),this.useTextTrackPolling=!(this.media.textTracks&&"onchange"in this.media.textTracks),this.useTextTrackPolling?this.pollTrackChange(500):this.media.textTracks.addEventListener("change",this.asyncPollTrackChange));},r.pollTrackChange=function(e){self.clearInterval(this.subtitlePollingInterval),this.subtitlePollingInterval=self.setInterval(this.onTextTracksChanged,e);},r.onMediaDetaching=function(){this.media&&(self.clearInterval(this.subtitlePollingInterval),this.useTextTrackPolling||this.media.textTracks.removeEventListener("change",this.asyncPollTrackChange),this.trackId>-1&&(this.queuedDefaultTrack=this.trackId),Pt(this.media.textTracks).forEach((function(e){Ct(e);})),this.subtitleTrack=-1,this.media=null);},r.onManifestLoading=function(){this.tracks=[],this.groupIds=null,this.tracksInGroup=[],this.trackId=-1,this.currentTrack=null,this.selectDefaultTrack=!0;},r.onManifestParsed=function(e,t){this.tracks=t.subtitleTracks;},r.onSubtitleTrackLoaded=function(e,t){var r=t.id,i=t.groupId,n=t.details,a=this.tracksInGroup[r];if(a&&a.groupId===i){var s=a.details;a.details=t.details,this.log("Subtitle track "+r+' "'+a.name+'" lang:'+a.lang+" group:"+i+" loaded ["+n.startSN+"-"+n.endSN+"]"),r===this.trackId&&this.playlistLoaded(r,t,s);}else this.warn("Subtitle track with id:"+r+" and group:"+i+" not found in active group "+(null==a?void 0:a.groupId));},r.onLevelLoading=function(e,t){this.switchLevel(t.level);},r.onLevelSwitching=function(e,t){this.switchLevel(t.level);},r.switchLevel=function(e){var t=this.hls.levels[e];if(t){var r=t.subtitleGroups||null,i=this.groupIds,n=this.currentTrack;if(!r||(null==i?void 0:i.length)!==(null==r?void 0:r.length)||null!=r&&r.some((function(e){return -1===(null==i?void 0:i.indexOf(e))}))){this.groupIds=r,this.trackId=-1,this.currentTrack=null;var a=this.tracks.filter((function(e){return !r||-1!==r.indexOf(e.groupId)}));if(a.length)this.selectDefaultTrack&&!a.some((function(e){return e.default}))&&(this.selectDefaultTrack=!1),a.forEach((function(e,t){e.id=t;}));else if(!n&&!this.tracksInGroup.length)return;this.tracksInGroup=a;var s=this.hls.config.subtitlePreference;if(!n&&s){this.selectDefaultTrack=!1;var o=Vr(s,a);if(o>-1)n=a[o];else {var l=Vr(s,this.tracks);n=this.tracks[l];}}var u=this.findTrackId(n);-1===u&&n&&(u=this.findTrackId(null));var d={subtitleTracks:a};this.log("Updating subtitle tracks, "+a.length+' track(s) found in "'+(null==r?void 0:r.join(","))+'" group-id'),this.hls.trigger(L.SUBTITLE_TRACKS_UPDATED,d),-1!==u&&-1===this.trackId&&this.setSubtitleTrack(u);}else this.shouldReloadPlaylist(n)&&this.setSubtitleTrack(this.trackId);}},r.findTrackId=function(e){for(var t=this.tracksInGroup,r=this.selectDefaultTrack,i=0;i<t.length;i++){var n=t[i];if((!r||n.default)&&(r||e)&&(!e||Yr(n,e)))return i}if(e){for(var a=0;a<t.length;a++){var s=t[a];if(sa(e.attrs,s.attrs,["LANGUAGE","ASSOC-LANGUAGE","CHARACTERISTICS"]))return a}for(var o=0;o<t.length;o++){var l=t[o];if(sa(e.attrs,l.attrs,["LANGUAGE"]))return o}}return -1},r.findTrackForTextTrack=function(e){if(e)for(var t=this.tracksInGroup,r=0;r<t.length;r++)if(oa(t[r],e))return r;return -1},r.onError=function(e,t){!t.fatal&&t.context&&(t.context.type!==St||t.context.id!==this.trackId||this.groupIds&&-1===this.groupIds.indexOf(t.context.groupId)||this.checkRetry(t));},r.setSubtitleOption=function(e){if(this.hls.config.subtitlePreference=e,e){var t=this.allSubtitleTracks;if(this.selectDefaultTrack=!1,t.length){var r=this.currentTrack;if(r&&Yr(e,r))return r;var i=Vr(e,this.tracksInGroup);if(i>-1){var n=this.tracksInGroup[i];return this.setSubtitleTrack(i),n}if(r)return null;var a=Vr(e,t);if(a>-1)return t[a]}}return null},r.loadPlaylist=function(t){e.prototype.loadPlaylist.call(this);var r=this.currentTrack;if(this.shouldLoadPlaylist(r)&&r){var i=r.id,n=r.groupId,a=r.url;if(t)try{a=t.addDirectives(a);}catch(e){this.warn("Could not construct new URL with HLS Delivery Directives: "+e);}this.log("Loading subtitle playlist for id "+i),this.hls.trigger(L.SUBTITLE_TRACK_LOADING,{url:a,id:i,groupId:n,deliveryDirectives:t||null});}},r.toggleTrackModes=function(){var e=this.media;if(e){var t,r=Pt(e.textTracks),i=this.currentTrack;if(i&&((t=r.filter((function(e){return oa(i,e)}))[0])||this.warn('Unable to find subtitle TextTrack with name "'+i.name+'" and language "'+i.lang+'"')),[].slice.call(r).forEach((function(e){"disabled"!==e.mode&&e!==t&&(e.mode="disabled");})),t){var n=this.subtitleDisplay?"showing":"hidden";t.mode!==n&&(t.mode=n);}}},r.setSubtitleTrack=function(e){var t=this.tracksInGroup;if(this.media)if(e<-1||e>=t.length||!E(e))this.warn("Invalid subtitle track id: "+e);else {this.clearTimer(),this.selectDefaultTrack=!1;var r=this.currentTrack,i=t[e]||null;if(this.trackId=e,this.currentTrack=i,this.toggleTrackModes(),i){var n=!!i.details&&!i.details.live;if(e!==this.trackId||i!==r||!n){this.log("Switching to subtitle-track "+e+(i?' "'+i.name+'" lang:'+i.lang+" group:"+i.groupId:""));var a=i.id,s=i.groupId,o=void 0===s?"":s,l=i.name,u=i.type,d=i.url;this.hls.trigger(L.SUBTITLE_TRACK_SWITCH,{id:a,groupId:o,name:l,type:u,url:d});var h=this.switchParams(i.url,null==r?void 0:r.details,i.details);this.loadPlaylist(h);}}else this.hls.trigger(L.SUBTITLE_TRACK_SWITCH,{id:e});}else this.queuedDefaultTrack=e;},n(t,[{key:"subtitleDisplay",get:function(){return this._subtitleDisplay},set:function(e){this._subtitleDisplay=e,this.trackId>-1&&this.toggleTrackModes();}},{key:"allSubtitleTracks",get:function(){return this.tracks}},{key:"subtitleTracks",get:function(){return this.tracksInGroup}},{key:"subtitleTrack",get:function(){return this.trackId},set:function(e){this.selectDefaultTrack=!1,this.setSubtitleTrack(e);}}])}(Mr),fa=function(){function e(e){this.buffers=void 0,this.queues={video:[],audio:[],audiovideo:[]},this.buffers=e;}var t=e.prototype;return t.append=function(e,t,r){var i=this.queues[t];i.push(e),1!==i.length||r||this.executeNext(t);},t.appendBlocker=function(e){var t=this;return new Promise((function(r){var i={execute:r,onStart:function(){},onComplete:function(){},onError:function(){}};t.append(i,e);}))},t.unblockAudio=function(e){this.queues.audio[0]===e&&this.shiftAndExecuteNext("audio");},t.executeNext=function(e){var t=this.queues[e];if(t.length){var r=t[0];try{r.execute();}catch(t){P.warn('[buffer-operation-queue]: Exception executing "'+e+'" SourceBuffer operation: '+t),r.onError(t);var i=this.buffers[e];null!=i&&i.updating||this.shiftAndExecuteNext(e);}}},t.shiftAndExecuteNext=function(e){this.queues[e].shift(),this.executeNext(e);},t.current=function(e){return this.queues[e][0]},e}(),ga=/(avc[1234]|hvc1|hev1|dvh[1e]|vp09|av01)(?:\.[^.,]+)+/,va=function(e){function t(t,r){var i,n;return (i=e.call(this,"buffer-controller",t.logger)||this).details=null,i._objectUrl=null,i.operationQueue=void 0,i.listeners=void 0,i.hls=void 0,i.fragmentTracker=void 0,i.bufferCodecEventsExpected=0,i._bufferCodecEventsTotal=0,i.media=null,i.mediaSource=null,i.lastMpegAudioChunk=null,i.blockedAudioAppend=null,i.lastVideoAppendEnd=0,i.appendSource=void 0,i.appendErrors={audio:0,video:0,audiovideo:0},i.tracks={},i.pendingTracks={},i.sourceBuffer=void 0,i._onEndStreaming=function(e){i.hls&&i.hls.pauseBuffering();},i._onStartStreaming=function(e){i.hls&&i.hls.resumeBuffering();},i._onMediaSourceOpen=function(){var e=i,t=e.media,r=e.mediaSource;if(i.log("Media source opened"),t){t.removeEventListener("emptied",i._onMediaEmptied);var n=i.getDurationAndRange();n&&i.updateMediaSource(n),i.hls.trigger(L.MEDIA_ATTACHED,{media:t,mediaSource:r});}r&&r.removeEventListener("sourceopen",i._onMediaSourceOpen),i.checkPendingTracks();},i._onMediaSourceClose=function(){i.log("Media source closed");},i._onMediaSourceEnded=function(){i.log("Media source ended");},i._onMediaEmptied=function(){var e=i,t=e.mediaSrc,r=e._objectUrl;t!==r&&i.error("Media element src was set while attaching MediaSource ("+r+" > "+t+")");},i.hls=t,i.fragmentTracker=r,i.appendSource=(n=We(t.config.preferManagedMediaSource),"undefined"!=typeof self&&n===self.ManagedMediaSource),i._initSourceBuffer(),i.registerListeners(),i}u(t,e);var r=t.prototype;return r.hasSourceTypes=function(){return this.getSourceBufferTypes().length>0||Object.keys(this.pendingTracks).length>0},r.destroy=function(){this.unregisterListeners(),this.details=null,this.lastMpegAudioChunk=null,this.hls=this.fragmentTracker=null,this._onMediaSourceOpen=this._onMediaSourceClose=null,this._onMediaSourceEnded=null,this._onStartStreaming=this._onEndStreaming=null;},r.registerListeners=function(){var e=this.hls;e.on(L.MEDIA_ATTACHING,this.onMediaAttaching,this),e.on(L.MEDIA_DETACHING,this.onMediaDetaching,this),e.on(L.MANIFEST_LOADING,this.onManifestLoading,this),e.on(L.MANIFEST_PARSED,this.onManifestParsed,this),e.on(L.BUFFER_RESET,this.onBufferReset,this),e.on(L.BUFFER_APPENDING,this.onBufferAppending,this),e.on(L.BUFFER_CODECS,this.onBufferCodecs,this),e.on(L.BUFFER_EOS,this.onBufferEos,this),e.on(L.BUFFER_FLUSHING,this.onBufferFlushing,this),e.on(L.LEVEL_UPDATED,this.onLevelUpdated,this),e.on(L.FRAG_PARSED,this.onFragParsed,this),e.on(L.FRAG_CHANGED,this.onFragChanged,this),e.on(L.ERROR,this.onError,this);},r.unregisterListeners=function(){var e=this.hls;e.off(L.MEDIA_ATTACHING,this.onMediaAttaching,this),e.off(L.MEDIA_DETACHING,this.onMediaDetaching,this),e.off(L.MANIFEST_LOADING,this.onManifestLoading,this),e.off(L.MANIFEST_PARSED,this.onManifestParsed,this),e.off(L.BUFFER_RESET,this.onBufferReset,this),e.off(L.BUFFER_APPENDING,this.onBufferAppending,this),e.off(L.BUFFER_CODECS,this.onBufferCodecs,this),e.off(L.BUFFER_EOS,this.onBufferEos,this),e.off(L.BUFFER_FLUSHING,this.onBufferFlushing,this),e.off(L.LEVEL_UPDATED,this.onLevelUpdated,this),e.off(L.FRAG_PARSED,this.onFragParsed,this),e.off(L.FRAG_CHANGED,this.onFragChanged,this),e.off(L.ERROR,this.onError,this);},r._initSourceBuffer=function(){this.sourceBuffer={},this.operationQueue=new fa(this.sourceBuffer),this.listeners={audio:[],video:[],audiovideo:[]},this.resetAppendErrors(),this.lastMpegAudioChunk=null,this.blockedAudioAppend=null,this.lastVideoAppendEnd=0;},r.onManifestLoading=function(){this.bufferCodecEventsExpected=this._bufferCodecEventsTotal=0,this.details=null;},r.onManifestParsed=function(e,t){var r=2;(t.audio&&!t.video||!t.altAudio)&&(r=1),this.bufferCodecEventsExpected=this._bufferCodecEventsTotal=r,this.log(this.bufferCodecEventsExpected+" bufferCodec event(s) expected");},r.onMediaAttaching=function(e,t){var r=this.media=t.media,i=We(this.appendSource);if(r&&i){var n,a=this.mediaSource=new i;this.log("created media source: "+(null==(n=a.constructor)?void 0:n.name)),a.addEventListener("sourceopen",this._onMediaSourceOpen),a.addEventListener("sourceended",this._onMediaSourceEnded),a.addEventListener("sourceclose",this._onMediaSourceClose),this.appendSource&&(a.addEventListener("startstreaming",this._onStartStreaming),a.addEventListener("endstreaming",this._onEndStreaming));var s=this._objectUrl=self.URL.createObjectURL(a);if(this.appendSource)try{r.removeAttribute("src");var o=self.ManagedMediaSource;r.disableRemotePlayback=r.disableRemotePlayback||o&&a instanceof o,ma(r),function(e,t){var r=self.document.createElement("source");r.type="video/mp4",r.src=t,e.appendChild(r);}(r,s),r.load();}catch(e){r.src=s;}else r.src=s;r.addEventListener("emptied",this._onMediaEmptied);}},r.onMediaDetaching=function(){var e=this.media,t=this.mediaSource,r=this._objectUrl;if(t){if(this.log("media source detaching"),"open"===t.readyState)try{t.endOfStream();}catch(e){this.warn("onMediaDetaching: "+e.message+" while calling endOfStream");}this.onBufferReset(),t.removeEventListener("sourceopen",this._onMediaSourceOpen),t.removeEventListener("sourceended",this._onMediaSourceEnded),t.removeEventListener("sourceclose",this._onMediaSourceClose),this.appendSource&&(t.removeEventListener("startstreaming",this._onStartStreaming),t.removeEventListener("endstreaming",this._onEndStreaming)),this.mediaSource=null,this._objectUrl=null;}e&&(e.removeEventListener("emptied",this._onMediaEmptied),r&&self.URL.revokeObjectURL(r),this.mediaSrc===r?(e.removeAttribute("src"),this.appendSource&&ma(e),e.load()):this.warn("media|source.src was changed by a third party - skip cleanup"),this.media=null),this.bufferCodecEventsExpected=this._bufferCodecEventsTotal,this.pendingTracks={},this.tracks={},this.hls.trigger(L.MEDIA_DETACHED,void 0);},r.onBufferReset=function(){var e=this;this.getSourceBufferTypes().forEach((function(t){e.resetBuffer(t);})),this._initSourceBuffer(),this.hls.resumeBuffering();},r.resetBuffer=function(e){var t=this.sourceBuffer[e];try{var r;t&&(this.removeBufferListeners(e),this.sourceBuffer[e]=void 0,null!=(r=this.mediaSource)&&r.sourceBuffers.length&&this.mediaSource.removeSourceBuffer(t));}catch(t){this.warn("onBufferReset "+e,t);}},r.onBufferCodecs=function(e,t){var r=this,i=this.getSourceBufferTypes().length,n=Object.keys(t);if(n.forEach((function(e){if(i){var n,a=r.tracks[e];if(a&&"function"==typeof(null==(n=a.buffer)?void 0:n.changeType)){var s,o=t[e],l=o.id,u=o.codec,d=o.levelCodec,h=o.container,c=o.metadata,f=tt(a.codec,a.levelCodec),g=null==f?void 0:f.replace(ga,"$1"),v=tt(u,d),m=null==(s=v)?void 0:s.replace(ga,"$1");if(v&&g!==m){"audio"===e.slice(0,5)&&(v=et(v,r.appendSource));var p=h+";codecs="+v;r.appendChangeType(e,p),r.log("switching codec "+f+" to "+v),r.tracks[e]={buffer:a.buffer,codec:u,container:h,levelCodec:d,metadata:c,id:l};}}}else r.pendingTracks[e]=t[e];})),!i){var a=Math.max(this.bufferCodecEventsExpected-1,0);this.bufferCodecEventsExpected!==a&&(this.log(a+" bufferCodec event(s) expected "+n.join(",")),this.bufferCodecEventsExpected=a),this.mediaSource&&"open"===this.mediaSource.readyState&&this.checkPendingTracks();}},r.appendChangeType=function(e,t){var r=this,i=this.operationQueue,n={execute:function(){var n=r.sourceBuffer[e];n&&(r.log("changing "+e+" sourceBuffer type to "+t),n.changeType(t)),i.shiftAndExecuteNext(e);},onStart:function(){},onComplete:function(){},onError:function(t){r.warn("Failed to change "+e+" SourceBuffer type",t);}};i.append(n,e,!!this.pendingTracks[e]);},r.blockAudio=function(e){var t,r=this,i=e.start,n=i+.05*e.duration;if(!0!==(null==(t=this.fragmentTracker.getAppendedFrag(i,Lt))?void 0:t.gap)){var a={execute:function(){var e;(r.lastVideoAppendEnd>n||r.sourceBuffer.video&&ii.isBuffered(r.sourceBuffer.video,n)||!0===(null==(e=r.fragmentTracker.getAppendedFrag(n,Lt))?void 0:e.gap))&&(r.blockedAudioAppend=null,r.operationQueue.shiftAndExecuteNext("audio"));},onStart:function(){},onComplete:function(){},onError:function(){}};this.blockedAudioAppend={op:a,frag:e},this.operationQueue.append(a,"audio",!0);}},r.unblockAudio=function(){var e=this.blockedAudioAppend;e&&(this.blockedAudioAppend=null,this.operationQueue.unblockAudio(e.op));},r.onBufferAppending=function(e,t){var r=this,i=this.operationQueue,n=this.tracks,a=t.data,s=t.type,o=t.parent,l=t.frag,u=t.part,d=t.chunkMeta,h=d.buffering[s],c=l.sn,f=self.performance.now();h.start=f;var g=l.stats.buffering,v=u?u.stats.buffering:null;0===g.start&&(g.start=f),v&&0===v.start&&(v.start=f);var m=n.audio,p=!1;"audio"===s&&"audio/mpeg"===(null==m?void 0:m.container)&&(p=!this.lastMpegAudioChunk||1===d.id||this.lastMpegAudioChunk.sn!==d.sn,this.lastMpegAudioChunk=d);var y=this.sourceBuffer.video;if(y&&"initSegment"!==c){var E=u||l,T=this.blockedAudioAppend;if("audio"!==s||"main"===o||this.blockedAudioAppend){if("video"===s){var S=E.end;if(T){var k=T.frag.start;(S>k||S<this.lastVideoAppendEnd||ii.isBuffered(y,k))&&this.unblockAudio();}this.lastVideoAppendEnd=S;}}else {var b=E.start+.05*E.duration,D=y.buffered,w=this.operationQueue.current("video");D.length||w?!w&&!ii.isBuffered(y,b)&&this.lastVideoAppendEnd<b&&this.blockAudio(E):this.blockAudio(E);}}var I=(u||l).start,C={execute:function(){if(h.executeStart=self.performance.now(),p){var e=r.sourceBuffer[s];if(e){var t=I-e.timestampOffset;Math.abs(t)>=.1&&(r.log("Updating audio SourceBuffer timestampOffset to "+I+" (delta: "+t+") sn: "+c+")"),e.timestampOffset=I);}}r.appendExecutor(a,s);},onStart:function(){},onComplete:function(){var e=self.performance.now();h.executeEnd=h.end=e,0===g.first&&(g.first=e),v&&0===v.first&&(v.first=e);var t=r.sourceBuffer,i={};for(var n in t)i[n]=ii.getBuffered(t[n]);r.appendErrors[s]=0,"audio"===s||"video"===s?r.appendErrors.audiovideo=0:(r.appendErrors.audio=0,r.appendErrors.video=0),r.hls.trigger(L.BUFFER_APPENDED,{type:s,frag:l,part:u,chunkMeta:d,parent:l.type,timeRanges:i});},onError:function(e){var t={type:A.MEDIA_ERROR,parent:l.type,details:R.BUFFER_APPEND_ERROR,sourceBufferName:s,frag:l,part:u,chunkMeta:d,error:e,err:e,fatal:!1};if(e.code===DOMException.QUOTA_EXCEEDED_ERR)t.details=R.BUFFER_FULL_ERROR;else {var i=++r.appendErrors[s];t.details=R.BUFFER_APPEND_ERROR,r.warn("Failed "+i+"/"+r.hls.config.appendErrorMaxRetry+' times to append segment in "'+s+'" sourceBuffer'),i>=r.hls.config.appendErrorMaxRetry&&(t.fatal=!0);}r.hls.trigger(L.ERROR,t);}};i.append(C,s,!!this.pendingTracks[s]);},r.getFlushOp=function(e,t,r){var i=this;return {execute:function(){i.removeExecutor(e,t,r);},onStart:function(){},onComplete:function(){i.hls.trigger(L.BUFFER_FLUSHED,{type:e});},onError:function(t){i.warn("Failed to remove from "+e+" SourceBuffer",t);}}},r.onBufferFlushing=function(e,t){var r=this,i=this.operationQueue,n=t.type,a=t.startOffset,s=t.endOffset;n?i.append(this.getFlushOp(n,a,s),n):this.getSourceBufferTypes().forEach((function(e){i.append(r.getFlushOp(e,a,s),e);}));},r.onFragParsed=function(e,t){var r=this,i=t.frag,n=t.part,a=[],s=n?n.elementaryStreams:i.elementaryStreams;s[j]?a.push("audiovideo"):(s[Y]&&a.push("audio"),s[W]&&a.push("video")),0===a.length&&this.warn("Fragments must have at least one ElementaryStreamType set. type: "+i.type+" level: "+i.level+" sn: "+i.sn),this.blockBuffers((function(){var e=self.performance.now();i.stats.buffering.end=e,n&&(n.stats.buffering.end=e);var t=n?n.stats:i.stats;r.hls.trigger(L.FRAG_BUFFERED,{frag:i,part:n,stats:t,id:i.type});}),a);},r.onFragChanged=function(e,t){this.trimBuffers();},r.onBufferEos=function(e,t){var r=this;"video"===t.type&&this.unblockAudio(),this.getSourceBufferTypes().reduce((function(e,i){var n=r.sourceBuffer[i];return !n||t.type&&t.type!==i||(n.ending=!0,n.ended||(n.ended=!0,r.log(i+" sourceBuffer now EOS"))),e&&!(n&&!n.ended)}),!0)&&(this.log("Queueing mediaSource.endOfStream()"),this.blockBuffers((function(){r.getSourceBufferTypes().forEach((function(e){var t=r.sourceBuffer[e];t&&(t.ending=!1);}));var e=r.mediaSource;e&&"open"===e.readyState?(r.log("Calling mediaSource.endOfStream()"),e.endOfStream()):e&&r.log("Could not call mediaSource.endOfStream(). mediaSource.readyState: "+e.readyState);})));},r.onLevelUpdated=function(e,t){var r=this,i=t.details;if(i.fragments.length){this.details=i;var n=this.getDurationAndRange();n&&(this.getSourceBufferTypes().length?this.blockBuffers((function(){return r.updateMediaSource(n)})):this.updateMediaSource(n));}},r.onError=function(e,t){if(t.details===R.BUFFER_APPEND_ERROR&&t.frag){var r,i=null==(r=t.errorAction)?void 0:r.nextAutoLevel;E(i)&&i!==t.frag.level&&this.resetAppendErrors();}},r.resetAppendErrors=function(){this.appendErrors={audio:0,video:0,audiovideo:0};},r.trimBuffers=function(){var e=this.hls,t=this.details,r=this.media;if(r&&null!==t&&this.getSourceBufferTypes().length){var i=e.config,n=r.currentTime,a=t.levelTargetDuration,s=t.live&&null!==i.liveBackBufferLength?i.liveBackBufferLength:i.backBufferLength;if(E(s)&&s>0){var o=Math.max(s,a),l=Math.floor(n/a)*a-o;this.flushBackBuffer(n,a,l);}if(E(i.frontBufferFlushThreshold)&&i.frontBufferFlushThreshold>0){var u=Math.max(i.maxBufferLength,i.frontBufferFlushThreshold),d=Math.max(u,a),h=Math.floor(n/a)*a+d;this.flushFrontBuffer(n,a,h);}}},r.flushBackBuffer=function(e,t,r){var i=this,n=this.details,a=this.sourceBuffer;this.getSourceBufferTypes().forEach((function(s){var o=a[s];if(o){var l=ii.getBuffered(o);if(l.length>0&&r>l.start(0)){if(i.hls.trigger(L.BACK_BUFFER_REACHED,{bufferEnd:r}),null!=n&&n.live)i.hls.trigger(L.LIVE_BACK_BUFFER_REACHED,{bufferEnd:r});else if(o.ended&&l.end(l.length-1)-e<2*t)return void i.log("Cannot flush "+s+" back buffer while SourceBuffer is in ended state");i.hls.trigger(L.BUFFER_FLUSHING,{startOffset:0,endOffset:r,type:s});}}}));},r.flushFrontBuffer=function(e,t,r){var i=this,n=this.sourceBuffer;this.getSourceBufferTypes().forEach((function(a){var s=n[a];if(s){var o=ii.getBuffered(s),l=o.length;if(l<2)return;var u=o.start(l-1),d=o.end(l-1);if(r>u||e>=u&&e<=d)return;if(s.ended&&e-d<2*t)return void i.log("Cannot flush "+a+" front buffer while SourceBuffer is in ended state");i.hls.trigger(L.BUFFER_FLUSHING,{startOffset:u,endOffset:1/0,type:a});}}));},r.getDurationAndRange=function(){if(!this.details||!this.media||!this.mediaSource||"open"!==this.mediaSource.readyState)return null;var e=this.details,t=this.hls,r=this.media,i=this.mediaSource,n=e.fragments[0].start+e.totalduration,a=r.duration,s=E(i.duration)?i.duration:0;if(e.live&&t.config.liveDurationInfinity){if(i.duration=1/0,e.fragments.length&&e.live&&i.setLiveSeekableRange){var o=Math.max(0,e.fragments[0].start);return {duration:1/0,start:o,end:Math.max(o,o+e.totalduration)}}return {duration:1/0}}return n>s&&n>a||!E(a)?{duration:n}:null},r.updateMediaSource=function(e){var t=e.duration,r=e.start,i=e.end;this.media&&this.mediaSource&&"open"===this.mediaSource.readyState&&(E(t)&&this.log("Updating Media Source duration to "+t.toFixed(3)),this.mediaSource.duration=t,void 0!==r&&void 0!==i&&(this.log("Media Source duration is set to "+this.mediaSource.duration+". Setting seekable range to "+r+"-"+i+"."),this.mediaSource.setLiveSeekableRange(r,i)));},r.checkPendingTracks=function(){var e=this.bufferCodecEventsExpected,t=this.operationQueue,r=this.pendingTracks,i=Object.keys(r).length;if(i&&(!e||2===i||"audiovideo"in r)){this.createSourceBuffers(r),this.pendingTracks={};var n=this.getSourceBufferTypes();if(n.length)this.hls.trigger(L.BUFFER_CREATED,{tracks:this.tracks}),n.forEach((function(e){t.executeNext(e);}));else {var a=new Error("could not create source buffer for media codec(s)");this.hls.trigger(L.ERROR,{type:A.MEDIA_ERROR,details:R.BUFFER_INCOMPATIBLE_CODECS_ERROR,fatal:!0,error:a,reason:a.message});}}},r.createSourceBuffers=function(e){var t=this,r=this.sourceBuffer,i=this.mediaSource;if(!i)throw Error("createSourceBuffers called when mediaSource was null");var n=function(n){if(!r[n]){var a,s=e[n];if(!s)throw Error("source buffer exists for track "+n+", however track does not");var o=-1===(null==(a=s.levelCodec)?void 0:a.indexOf(","))?s.levelCodec:s.codec;o&&"audio"===n.slice(0,5)&&(o=et(o,t.appendSource));var l=s.container+";codecs="+o;t.log("creating sourceBuffer("+l+")");try{var u=r[n]=i.addSourceBuffer(l),d=n;t.addBufferListener(d,"updatestart",t._onSBUpdateStart),t.addBufferListener(d,"updateend",t._onSBUpdateEnd),t.addBufferListener(d,"error",t._onSBUpdateError),t.appendSource&&t.addBufferListener(d,"bufferedchange",(function(e,r){var i=r.removedRanges;null!=i&&i.length&&t.hls.trigger(L.BUFFER_FLUSHED,{type:n});})),t.tracks[n]={buffer:u,codec:o,container:s.container,levelCodec:s.levelCodec,metadata:s.metadata,id:s.id};}catch(e){t.error("error while trying to add sourceBuffer: "+e.message),t.hls.trigger(L.ERROR,{type:A.MEDIA_ERROR,details:R.BUFFER_ADD_CODEC_ERROR,fatal:!1,error:e,sourceBufferName:n,mimeType:l});}}};for(var a in e)n(a);},r._onSBUpdateStart=function(e){this.operationQueue.current(e).onStart();},r._onSBUpdateEnd=function(e){var t;if("closed"!==(null==(t=this.mediaSource)?void 0:t.readyState)){var r=this.operationQueue;r.current(e).onComplete(),r.shiftAndExecuteNext(e);}else this.resetBuffer(e);},r._onSBUpdateError=function(e,t){var r,i=new Error(e+" SourceBuffer error. MediaSource readyState: "+(null==(r=this.mediaSource)?void 0:r.readyState));this.error(""+i,t),this.hls.trigger(L.ERROR,{type:A.MEDIA_ERROR,details:R.BUFFER_APPENDING_ERROR,sourceBufferName:e,error:i,fatal:!1});var n=this.operationQueue.current(e);n&&n.onError(i);},r.removeExecutor=function(e,t,r){var i=this.media,n=this.mediaSource,a=this.operationQueue,s=this.sourceBuffer[e];if(!i||!n||!s)return this.warn("Attempting to remove from the "+e+" SourceBuffer, but it does not exist"),void a.shiftAndExecuteNext(e);var o=E(i.duration)?i.duration:1/0,l=E(n.duration)?n.duration:1/0,u=Math.max(0,t),d=Math.min(r,o,l);d>u&&(!s.ending||s.ended)?(s.ended=!1,this.log("Removing ["+u+","+d+"] from the "+e+" SourceBuffer"),s.remove(u,d)):a.shiftAndExecuteNext(e);},r.appendExecutor=function(e,t){var r=this.sourceBuffer[t];if(r)r.ending=!1,r.ended=!1,r.appendBuffer(e);else if(!this.pendingTracks[t])throw new Error("Attempting to append to the "+t+" SourceBuffer, but it does not exist")},r.blockBuffers=function(e,t){var r=this;if(void 0===t&&(t=this.getSourceBufferTypes()),!t.length)return this.log("Blocking operation requested, but no SourceBuffers exist"),void Promise.resolve().then(e);var i=this.operationQueue,n=t.map((function(e){return i.appendBlocker(e)}));t.length>1&&!!this.blockedAudioAppend&&this.unblockAudio(),Promise.all(n).then((function(n){e(),t.forEach((function(e,t){var n=r.sourceBuffer[e];null!=n&&n.updating||i.shiftAndExecuteNext(e);}));}));},r.getSourceBufferTypes=function(){return Object.keys(this.sourceBuffer)},r.addBufferListener=function(e,t,r){var i=this.sourceBuffer[e];if(i){var n=r.bind(this,e);this.listeners[e].push({event:t,listener:n}),i.addEventListener(t,n);}},r.removeBufferListeners=function(e){var t=this.sourceBuffer[e];t&&this.listeners[e].forEach((function(e){t.removeEventListener(e.event,e.listener);}));},n(t,[{key:"mediaSrc",get:function(){var e,t=(null==(e=this.media)?void 0:e.firstChild)||this.media;return null==t?void 0:t.src}}])}(k);function ma(e){var t=e.querySelectorAll("source");[].slice.call(t).forEach((function(t){e.removeChild(t);}));}var pa={42:225,92:233,94:237,95:243,96:250,123:231,124:247,125:209,126:241,127:9608,128:174,129:176,130:189,131:191,132:8482,133:162,134:163,135:9834,136:224,137:32,138:232,139:226,140:234,141:238,142:244,143:251,144:193,145:201,146:211,147:218,148:220,149:252,150:8216,151:161,152:42,153:8217,154:9473,155:169,156:8480,157:8226,158:8220,159:8221,160:192,161:194,162:199,163:200,164:202,165:203,166:235,167:206,168:207,169:239,170:212,171:217,172:249,173:219,174:171,175:187,176:195,177:227,178:205,179:204,180:236,181:210,182:242,183:213,184:245,185:123,186:125,187:92,188:94,189:95,190:124,191:8764,192:196,193:228,194:214,195:246,196:223,197:165,198:164,199:9475,200:197,201:229,202:216,203:248,204:9487,205:9491,206:9495,207:9499},ya=function(e){return String.fromCharCode(pa[e]||e)},Ea=15,Ta=100,Sa={17:1,18:3,21:5,22:7,23:9,16:11,19:12,20:14},La={17:2,18:4,21:6,22:8,23:10,19:13,20:15},Aa={25:1,26:3,29:5,30:7,31:9,24:11,27:12,28:14},Ra={25:2,26:4,29:6,30:8,31:10,27:13,28:15},ka=["white","green","blue","cyan","red","yellow","magenta","black","transparent"],ba=function(){function e(){this.time=null,this.verboseLevel=0;}return e.prototype.log=function(e,t){if(this.verboseLevel>=e){var r="function"==typeof t?t():t;P.log(this.time+" ["+e+"] "+r);}},e}(),Da=function(e){for(var t=[],r=0;r<e.length;r++)t.push(e[r].toString(16));return t},wa=function(){function e(){this.foreground="white",this.underline=!1,this.italics=!1,this.background="black",this.flash=!1;}var t=e.prototype;return t.reset=function(){this.foreground="white",this.underline=!1,this.italics=!1,this.background="black",this.flash=!1;},t.setStyles=function(e){for(var t=["foreground","underline","italics","background","flash"],r=0;r<t.length;r++){var i=t[r];e.hasOwnProperty(i)&&(this[i]=e[i]);}},t.isDefault=function(){return "white"===this.foreground&&!this.underline&&!this.italics&&"black"===this.background&&!this.flash},t.equals=function(e){return this.foreground===e.foreground&&this.underline===e.underline&&this.italics===e.italics&&this.background===e.background&&this.flash===e.flash},t.copy=function(e){this.foreground=e.foreground,this.underline=e.underline,this.italics=e.italics,this.background=e.background,this.flash=e.flash;},t.toString=function(){return "color="+this.foreground+", underline="+this.underline+", italics="+this.italics+", background="+this.background+", flash="+this.flash},e}(),Ia=function(){function e(){this.uchar=" ",this.penState=new wa;}var t=e.prototype;return t.reset=function(){this.uchar=" ",this.penState.reset();},t.setChar=function(e,t){this.uchar=e,this.penState.copy(t);},t.setPenState=function(e){this.penState.copy(e);},t.equals=function(e){return this.uchar===e.uchar&&this.penState.equals(e.penState)},t.copy=function(e){this.uchar=e.uchar,this.penState.copy(e.penState);},t.isEmpty=function(){return " "===this.uchar&&this.penState.isDefault()},e}(),Ca=function(){function e(e){this.chars=[],this.pos=0,this.currPenState=new wa,this.cueStartTime=null,this.logger=void 0;for(var t=0;t<Ta;t++)this.chars.push(new Ia);this.logger=e;}var t=e.prototype;return t.equals=function(e){for(var t=0;t<Ta;t++)if(!this.chars[t].equals(e.chars[t]))return !1;return !0},t.copy=function(e){for(var t=0;t<Ta;t++)this.chars[t].copy(e.chars[t]);},t.isEmpty=function(){for(var e=!0,t=0;t<Ta;t++)if(!this.chars[t].isEmpty()){e=!1;break}return e},t.setCursor=function(e){this.pos!==e&&(this.pos=e),this.pos<0?(this.logger.log(3,"Negative cursor position "+this.pos),this.pos=0):this.pos>Ta&&(this.logger.log(3,"Too large cursor position "+this.pos),this.pos=Ta);},t.moveCursor=function(e){var t=this.pos+e;if(e>1)for(var r=this.pos+1;r<t+1;r++)this.chars[r].setPenState(this.currPenState);this.setCursor(t);},t.backSpace=function(){this.moveCursor(-1),this.chars[this.pos].setChar(" ",this.currPenState);},t.insertChar=function(e){var t=this;e>=144&&this.backSpace();var r=ya(e);this.pos>=Ta?this.logger.log(0,(function(){return "Cannot insert "+e.toString(16)+" ("+r+") at position "+t.pos+". Skipping it!"})):(this.chars[this.pos].setChar(r,this.currPenState),this.moveCursor(1));},t.clearFromPos=function(e){var t;for(t=e;t<Ta;t++)this.chars[t].reset();},t.clear=function(){this.clearFromPos(0),this.pos=0,this.currPenState.reset();},t.clearToEndOfRow=function(){this.clearFromPos(this.pos);},t.getTextString=function(){for(var e=[],t=!0,r=0;r<Ta;r++){var i=this.chars[r].uchar;" "!==i&&(t=!1),e.push(i);}return t?"":e.join("")},t.setPenStyles=function(e){this.currPenState.setStyles(e),this.chars[this.pos].setPenState(this.currPenState);},e}(),_a=function(){function e(e){this.rows=[],this.currRow=14,this.nrRollUpRows=null,this.lastOutputScreen=null,this.logger=void 0;for(var t=0;t<Ea;t++)this.rows.push(new Ca(e));this.logger=e;}var t=e.prototype;return t.reset=function(){for(var e=0;e<Ea;e++)this.rows[e].clear();this.currRow=14;},t.equals=function(e){for(var t=!0,r=0;r<Ea;r++)if(!this.rows[r].equals(e.rows[r])){t=!1;break}return t},t.copy=function(e){for(var t=0;t<Ea;t++)this.rows[t].copy(e.rows[t]);},t.isEmpty=function(){for(var e=!0,t=0;t<Ea;t++)if(!this.rows[t].isEmpty()){e=!1;break}return e},t.backSpace=function(){this.rows[this.currRow].backSpace();},t.clearToEndOfRow=function(){this.rows[this.currRow].clearToEndOfRow();},t.insertChar=function(e){this.rows[this.currRow].insertChar(e);},t.setPen=function(e){this.rows[this.currRow].setPenStyles(e);},t.moveCursor=function(e){this.rows[this.currRow].moveCursor(e);},t.setCursor=function(e){this.logger.log(2,"setCursor: "+e),this.rows[this.currRow].setCursor(e);},t.setPAC=function(e){this.logger.log(2,(function(){return "pacData = "+JSON.stringify(e)}));var t=e.row-1;if(this.nrRollUpRows&&t<this.nrRollUpRows-1&&(t=this.nrRollUpRows-1),this.nrRollUpRows&&this.currRow!==t){for(var r=0;r<Ea;r++)this.rows[r].clear();var i=this.currRow+1-this.nrRollUpRows,n=this.lastOutputScreen;if(n){var a=n.rows[i].cueStartTime,s=this.logger.time;if(null!==a&&null!==s&&a<s)for(var o=0;o<this.nrRollUpRows;o++)this.rows[t-this.nrRollUpRows+o+1].copy(n.rows[i+o]);}}this.currRow=t;var l=this.rows[this.currRow];if(null!==e.indent){var u=e.indent,d=Math.max(u-1,0);l.setCursor(e.indent),e.color=l.chars[d].penState.foreground;}var h={foreground:e.color,underline:e.underline,italics:e.italics,background:"black",flash:!1};this.setPen(h);},t.setBkgData=function(e){this.logger.log(2,(function(){return "bkgData = "+JSON.stringify(e)})),this.backSpace(),this.setPen(e),this.insertChar(32);},t.setRollUpRows=function(e){this.nrRollUpRows=e;},t.rollUp=function(){var e=this;if(null!==this.nrRollUpRows){this.logger.log(1,(function(){return e.getDisplayText()}));var t=this.currRow+1-this.nrRollUpRows,r=this.rows.splice(t,1)[0];r.clear(),this.rows.splice(this.currRow,0,r),this.logger.log(2,"Rolling up");}else this.logger.log(3,"roll_up but nrRollUpRows not set yet");},t.getDisplayText=function(e){e=e||!1;for(var t=[],r="",i=-1,n=0;n<Ea;n++){var a=this.rows[n].getTextString();a&&(i=n+1,e?t.push("Row "+i+": '"+a+"'"):t.push(a.trim()));}return t.length>0&&(r=e?"["+t.join(" | ")+"]":t.join("\n")),r},t.getTextAndFormat=function(){return this.rows},e}(),Pa=function(){function e(e,t,r){this.chNr=void 0,this.outputFilter=void 0,this.mode=void 0,this.verbose=void 0,this.displayedMemory=void 0,this.nonDisplayedMemory=void 0,this.lastOutputScreen=void 0,this.currRollUpRow=void 0,this.writeScreen=void 0,this.cueStartTime=void 0,this.logger=void 0,this.chNr=e,this.outputFilter=t,this.mode=null,this.verbose=0,this.displayedMemory=new _a(r),this.nonDisplayedMemory=new _a(r),this.lastOutputScreen=new _a(r),this.currRollUpRow=this.displayedMemory.rows[14],this.writeScreen=this.displayedMemory,this.mode=null,this.cueStartTime=null,this.logger=r;}var t=e.prototype;return t.reset=function(){this.mode=null,this.displayedMemory.reset(),this.nonDisplayedMemory.reset(),this.lastOutputScreen.reset(),this.outputFilter.reset(),this.currRollUpRow=this.displayedMemory.rows[14],this.writeScreen=this.displayedMemory,this.mode=null,this.cueStartTime=null;},t.getHandler=function(){return this.outputFilter},t.setHandler=function(e){this.outputFilter=e;},t.setPAC=function(e){this.writeScreen.setPAC(e);},t.setBkgData=function(e){this.writeScreen.setBkgData(e);},t.setMode=function(e){e!==this.mode&&(this.mode=e,this.logger.log(2,(function(){return "MODE="+e})),"MODE_POP-ON"===this.mode?this.writeScreen=this.nonDisplayedMemory:(this.writeScreen=this.displayedMemory,this.writeScreen.reset()),"MODE_ROLL-UP"!==this.mode&&(this.displayedMemory.nrRollUpRows=null,this.nonDisplayedMemory.nrRollUpRows=null),this.mode=e);},t.insertChars=function(e){for(var t=this,r=0;r<e.length;r++)this.writeScreen.insertChar(e[r]);var i=this.writeScreen===this.displayedMemory?"DISP":"NON_DISP";this.logger.log(2,(function(){return i+": "+t.writeScreen.getDisplayText(!0)})),"MODE_PAINT-ON"!==this.mode&&"MODE_ROLL-UP"!==this.mode||(this.logger.log(1,(function(){return "DISPLAYED: "+t.displayedMemory.getDisplayText(!0)})),this.outputDataUpdate());},t.ccRCL=function(){this.logger.log(2,"RCL - Resume Caption Loading"),this.setMode("MODE_POP-ON");},t.ccBS=function(){this.logger.log(2,"BS - BackSpace"),"MODE_TEXT"!==this.mode&&(this.writeScreen.backSpace(),this.writeScreen===this.displayedMemory&&this.outputDataUpdate());},t.ccAOF=function(){},t.ccAON=function(){},t.ccDER=function(){this.logger.log(2,"DER- Delete to End of Row"),this.writeScreen.clearToEndOfRow(),this.outputDataUpdate();},t.ccRU=function(e){this.logger.log(2,"RU("+e+") - Roll Up"),this.writeScreen=this.displayedMemory,this.setMode("MODE_ROLL-UP"),this.writeScreen.setRollUpRows(e);},t.ccFON=function(){this.logger.log(2,"FON - Flash On"),this.writeScreen.setPen({flash:!0});},t.ccRDC=function(){this.logger.log(2,"RDC - Resume Direct Captioning"),this.setMode("MODE_PAINT-ON");},t.ccTR=function(){this.logger.log(2,"TR"),this.setMode("MODE_TEXT");},t.ccRTD=function(){this.logger.log(2,"RTD"),this.setMode("MODE_TEXT");},t.ccEDM=function(){this.logger.log(2,"EDM - Erase Displayed Memory"),this.displayedMemory.reset(),this.outputDataUpdate(!0);},t.ccCR=function(){this.logger.log(2,"CR - Carriage Return"),this.writeScreen.rollUp(),this.outputDataUpdate(!0);},t.ccENM=function(){this.logger.log(2,"ENM - Erase Non-displayed Memory"),this.nonDisplayedMemory.reset();},t.ccEOC=function(){var e=this;if(this.logger.log(2,"EOC - End Of Caption"),"MODE_POP-ON"===this.mode){var t=this.displayedMemory;this.displayedMemory=this.nonDisplayedMemory,this.nonDisplayedMemory=t,this.writeScreen=this.nonDisplayedMemory,this.logger.log(1,(function(){return "DISP: "+e.displayedMemory.getDisplayText()}));}this.outputDataUpdate(!0);},t.ccTO=function(e){this.logger.log(2,"TO("+e+") - Tab Offset"),this.writeScreen.moveCursor(e);},t.ccMIDROW=function(e){var t={flash:!1};if(t.underline=e%2==1,t.italics=e>=46,t.italics)t.foreground="white";else {var r=Math.floor(e/2)-16;t.foreground=["white","green","blue","cyan","red","yellow","magenta"][r];}this.logger.log(2,"MIDROW: "+JSON.stringify(t)),this.writeScreen.setPen(t);},t.outputDataUpdate=function(e){void 0===e&&(e=!1);var t=this.logger.time;null!==t&&this.outputFilter&&(null!==this.cueStartTime||this.displayedMemory.isEmpty()?this.displayedMemory.equals(this.lastOutputScreen)||(this.outputFilter.newCue(this.cueStartTime,t,this.lastOutputScreen),e&&this.outputFilter.dispatchCue&&this.outputFilter.dispatchCue(),this.cueStartTime=this.displayedMemory.isEmpty()?null:t):this.cueStartTime=t,this.lastOutputScreen.copy(this.displayedMemory));},t.cueSplitAtTime=function(e){this.outputFilter&&(this.displayedMemory.isEmpty()||(this.outputFilter.newCue&&this.outputFilter.newCue(this.cueStartTime,e,this.displayedMemory),this.cueStartTime=e));},e}(),xa=function(){function e(e,t,r){this.channels=void 0,this.currentChannel=0,this.cmdHistory={a:null,b:null},this.logger=void 0;var i=this.logger=new ba;this.channels=[null,new Pa(e,t,i),new Pa(e+1,r,i)];}var t=e.prototype;return t.getHandler=function(e){return this.channels[e].getHandler()},t.setHandler=function(e,t){this.channels[e].setHandler(t);},t.addData=function(e,t){var r=this;this.logger.time=e;for(var i=function(e){var i=127&t[e],n=127&t[e+1],a=!1,s=null;if(0===i&&0===n)return 0;r.logger.log(3,(function(){return "["+Da([t[e],t[e+1]])+"] -> ("+Da([i,n])+")"}));var o=r.cmdHistory;if(i>=16&&i<=31){if(function(e,t,r){return r.a===e&&r.b===t}(i,n,o))return Fa(null,null,o),r.logger.log(3,(function(){return "Repeated command ("+Da([i,n])+") is dropped"})),0;Fa(i,n,r.cmdHistory),(a=r.parseCmd(i,n))||(a=r.parseMidrow(i,n)),a||(a=r.parsePAC(i,n)),a||(a=r.parseBackgroundAttributes(i,n));}else Fa(null,null,o);if(!a&&(s=r.parseChars(i,n))){var l=r.currentChannel;l&&l>0?r.channels[l].insertChars(s):r.logger.log(2,"No channel found yet. TEXT-MODE?");}a||s||r.logger.log(2,(function(){return "Couldn't parse cleaned data "+Da([i,n])+" orig: "+Da([t[e],t[e+1]])}));},n=0;n<t.length;n+=2)i(n);},t.parseCmd=function(e,t){if(!((20===e||28===e||21===e||29===e)&&t>=32&&t<=47||(23===e||31===e)&&t>=33&&t<=35))return !1;var r=20===e||21===e||23===e?1:2,i=this.channels[r];return 20===e||21===e||28===e||29===e?32===t?i.ccRCL():33===t?i.ccBS():34===t?i.ccAOF():35===t?i.ccAON():36===t?i.ccDER():37===t?i.ccRU(2):38===t?i.ccRU(3):39===t?i.ccRU(4):40===t?i.ccFON():41===t?i.ccRDC():42===t?i.ccTR():43===t?i.ccRTD():44===t?i.ccEDM():45===t?i.ccCR():46===t?i.ccENM():47===t&&i.ccEOC():i.ccTO(t-32),this.currentChannel=r,!0},t.parseMidrow=function(e,t){var r=0;if((17===e||25===e)&&t>=32&&t<=47){if((r=17===e?1:2)!==this.currentChannel)return this.logger.log(0,"Mismatch channel in midrow parsing"),!1;var i=this.channels[r];return !!i&&(i.ccMIDROW(t),this.logger.log(3,(function(){return "MIDROW ("+Da([e,t])+")"})),!0)}return !1},t.parsePAC=function(e,t){var r;if(!((e>=17&&e<=23||e>=25&&e<=31)&&t>=64&&t<=127||(16===e||24===e)&&t>=64&&t<=95))return !1;var i=e<=23?1:2;r=t>=64&&t<=95?1===i?Sa[e]:Aa[e]:1===i?La[e]:Ra[e];var n=this.channels[i];return !!n&&(n.setPAC(this.interpretPAC(r,t)),this.currentChannel=i,!0)},t.interpretPAC=function(e,t){var r,i={color:null,italics:!1,indent:null,underline:!1,row:e};return r=t>95?t-96:t-64,i.underline=1==(1&r),r<=13?i.color=["white","green","blue","cyan","red","yellow","magenta","white"][Math.floor(r/2)]:r<=15?(i.italics=!0,i.color="white"):i.indent=4*Math.floor((r-16)/2),i},t.parseChars=function(e,t){var r,i,n=null,a=null;return e>=25?(r=2,a=e-8):(r=1,a=e),a>=17&&a<=19?(i=17===a?t+80:18===a?t+112:t+144,this.logger.log(2,(function(){return "Special char '"+ya(i)+"' in channel "+r})),n=[i]):e>=32&&e<=127&&(n=0===t?[e]:[e,t]),n&&this.logger.log(3,(function(){return "Char codes =  "+Da(n).join(",")})),n},t.parseBackgroundAttributes=function(e,t){var r;if(!((16===e||24===e)&&t>=32&&t<=47||(23===e||31===e)&&t>=45&&t<=47))return !1;var i={};16===e||24===e?(r=Math.floor((t-32)/2),i.background=ka[r],t%2==1&&(i.background=i.background+"_semi")):45===t?i.background="transparent":(i.foreground="black",47===t&&(i.underline=!0));var n=e<=23?1:2;return this.channels[n].setBkgData(i),!0},t.reset=function(){for(var e=0;e<Object.keys(this.channels).length;e++){var t=this.channels[e];t&&t.reset();}Fa(null,null,this.cmdHistory);},t.cueSplitAtTime=function(e){for(var t=0;t<this.channels.length;t++){var r=this.channels[t];r&&r.cueSplitAtTime(e);}},e}();function Fa(e,t,r){r.a=e,r.b=t;}var Ma=function(){function e(e,t){this.timelineController=void 0,this.cueRanges=[],this.trackName=void 0,this.startTime=null,this.endTime=null,this.screen=null,this.timelineController=e,this.trackName=t;}var t=e.prototype;return t.dispatchCue=function(){null!==this.startTime&&(this.timelineController.addCues(this.trackName,this.startTime,this.endTime,this.screen,this.cueRanges),this.startTime=null);},t.newCue=function(e,t,r){(null===this.startTime||this.startTime>e)&&(this.startTime=e),this.endTime=t,this.screen=r,this.timelineController.createCaptionsTrack(this.trackName);},t.reset=function(){this.cueRanges=[],this.startTime=null;},e}(),Oa=function(){if(null!=ne&&ne.VTTCue)return self.VTTCue;var e=["","lr","rl"],t=["start","middle","end","left","right"];function r(e,t){if("string"!=typeof t)return !1;if(!Array.isArray(e))return !1;var r=t.toLowerCase();return !!~e.indexOf(r)&&r}function i(e){return r(t,e)}function n(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),i=1;i<t;i++)r[i-1]=arguments[i];for(var n=1;n<arguments.length;n++){var a=arguments[n];for(var s in a)e[s]=a[s];}return e}function a(t,a,s){var o=this,l={enumerable:!0};o.hasBeenReset=!1;var u="",d=!1,h=t,c=a,f=s,g=null,v="",m=!0,p="auto",y="start",E=50,T="middle",S=50,L="middle";Object.defineProperty(o,"id",n({},l,{get:function(){return u},set:function(e){u=""+e;}})),Object.defineProperty(o,"pauseOnExit",n({},l,{get:function(){return d},set:function(e){d=!!e;}})),Object.defineProperty(o,"startTime",n({},l,{get:function(){return h},set:function(e){if("number"!=typeof e)throw new TypeError("Start time must be set to a number.");h=e,this.hasBeenReset=!0;}})),Object.defineProperty(o,"endTime",n({},l,{get:function(){return c},set:function(e){if("number"!=typeof e)throw new TypeError("End time must be set to a number.");c=e,this.hasBeenReset=!0;}})),Object.defineProperty(o,"text",n({},l,{get:function(){return f},set:function(e){f=""+e,this.hasBeenReset=!0;}})),Object.defineProperty(o,"region",n({},l,{get:function(){return g},set:function(e){g=e,this.hasBeenReset=!0;}})),Object.defineProperty(o,"vertical",n({},l,{get:function(){return v},set:function(t){var i=function(t){return r(e,t)}(t);if(!1===i)throw new SyntaxError("An invalid or illegal string was specified.");v=i,this.hasBeenReset=!0;}})),Object.defineProperty(o,"snapToLines",n({},l,{get:function(){return m},set:function(e){m=!!e,this.hasBeenReset=!0;}})),Object.defineProperty(o,"line",n({},l,{get:function(){return p},set:function(e){if("number"!=typeof e&&"auto"!==e)throw new SyntaxError("An invalid number or illegal string was specified.");p=e,this.hasBeenReset=!0;}})),Object.defineProperty(o,"lineAlign",n({},l,{get:function(){return y},set:function(e){var t=i(e);if(!t)throw new SyntaxError("An invalid or illegal string was specified.");y=t,this.hasBeenReset=!0;}})),Object.defineProperty(o,"position",n({},l,{get:function(){return E},set:function(e){if(e<0||e>100)throw new Error("Position must be between 0 and 100.");E=e,this.hasBeenReset=!0;}})),Object.defineProperty(o,"positionAlign",n({},l,{get:function(){return T},set:function(e){var t=i(e);if(!t)throw new SyntaxError("An invalid or illegal string was specified.");T=t,this.hasBeenReset=!0;}})),Object.defineProperty(o,"size",n({},l,{get:function(){return S},set:function(e){if(e<0||e>100)throw new Error("Size must be between 0 and 100.");S=e,this.hasBeenReset=!0;}})),Object.defineProperty(o,"align",n({},l,{get:function(){return L},set:function(e){var t=i(e);if(!t)throw new SyntaxError("An invalid or illegal string was specified.");L=t,this.hasBeenReset=!0;}})),o.displayState=void 0;}return a.prototype.getCueAsHTML=function(){return self.WebVTT.convertCueToDOMTree(self,this.text)},a}(),Na=function(){function e(){}return e.prototype.decode=function(e,t){if(!e)return "";if("string"!=typeof e)throw new Error("Error - expected string data.");return decodeURIComponent(encodeURIComponent(e))},e}();function Ua(e){function t(e,t,r,i){return 3600*(0|e)+60*(0|t)+(0|r)+parseFloat(i||0)}var r=e.match(/^(?:(\d+):)?(\d{2}):(\d{2})(\.\d+)?/);return r?parseFloat(r[2])>59?t(r[2],r[3],0,r[4]):t(r[1],r[2],r[3],r[4]):null}var Ba=function(){function e(){this.values=Object.create(null);}var t=e.prototype;return t.set=function(e,t){this.get(e)||""===t||(this.values[e]=t);},t.get=function(e,t,r){return r?this.has(e)?this.values[e]:t[r]:this.has(e)?this.values[e]:t},t.has=function(e){return e in this.values},t.alt=function(e,t,r){for(var i=0;i<r.length;++i)if(t===r[i]){this.set(e,t);break}},t.integer=function(e,t){/^-?\d+$/.test(t)&&this.set(e,parseInt(t,10));},t.percent=function(e,t){if(/^([\d]{1,3})(\.[\d]*)?%$/.test(t)){var r=parseFloat(t);if(r>=0&&r<=100)return this.set(e,r),!0}return !1},e}();function Ga(e,t,r,i){var n=i?e.split(i):[e];for(var a in n)if("string"==typeof n[a]){var s=n[a].split(r);2===s.length&&t(s[0],s[1]);}}var Ka=new Oa(0,0,""),Ha="middle"===Ka.align?"middle":"center";function Va(e,t,r){var i=e;function n(){var t=Ua(e);if(null===t)throw new Error("Malformed timestamp: "+i);return e=e.replace(/^[^\sa-zA-Z-]+/,""),t}function a(){e=e.replace(/^\s+/,"");}if(a(),t.startTime=n(),a(),"--\x3e"!==e.slice(0,3))throw new Error("Malformed time stamp (time stamps must be separated by '--\x3e'): "+i);e=e.slice(3),a(),t.endTime=n(),a(),function(e,t){var i=new Ba;Ga(e,(function(e,t){var n;switch(e){case"region":for(var a=r.length-1;a>=0;a--)if(r[a].id===t){i.set(e,r[a].region);break}break;case"vertical":i.alt(e,t,["rl","lr"]);break;case"line":n=t.split(","),i.integer(e,n[0]),i.percent(e,n[0])&&i.set("snapToLines",!1),i.alt(e,n[0],["auto"]),2===n.length&&i.alt("lineAlign",n[1],["start",Ha,"end"]);break;case"position":n=t.split(","),i.percent(e,n[0]),2===n.length&&i.alt("positionAlign",n[1],["start",Ha,"end","line-left","line-right","auto"]);break;case"size":i.percent(e,t);break;case"align":i.alt(e,t,["start",Ha,"end","left","right"]);}}),/:/,/\s/),t.region=i.get("region",null),t.vertical=i.get("vertical","");var n=i.get("line","auto");"auto"===n&&-1===Ka.line&&(n=-1),t.line=n,t.lineAlign=i.get("lineAlign","start"),t.snapToLines=i.get("snapToLines",!0),t.size=i.get("size",100),t.align=i.get("align",Ha);var a=i.get("position","auto");"auto"===a&&50===Ka.position&&(a="start"===t.align||"left"===t.align?0:"end"===t.align||"right"===t.align?100:50),t.position=a;}(e,t);}function Ya(e){return e.replace(/<br(?: \/)?>/gi,"\n")}var Wa=function(){function e(){this.state="INITIAL",this.buffer="",this.decoder=new Na,this.regionList=[],this.cue=null,this.oncue=void 0,this.onparsingerror=void 0,this.onflush=void 0;}var t=e.prototype;return t.parse=function(e){var t=this;function r(){var e=t.buffer,r=0;for(e=Ya(e);r<e.length&&"\r"!==e[r]&&"\n"!==e[r];)++r;var i=e.slice(0,r);return "\r"===e[r]&&++r,"\n"===e[r]&&++r,t.buffer=e.slice(r),i}e&&(t.buffer+=t.decoder.decode(e,{stream:!0}));try{var i="";if("INITIAL"===t.state){if(!/\r\n|\n/.test(t.buffer))return this;var n=(i=r()).match(/^(ï»¿)?WEBVTT([ \t].*)?$/);if(null==n||!n[0])throw new Error("Malformed WebVTT signature.");t.state="HEADER";}for(var a=!1;t.buffer;){if(!/\r\n|\n/.test(t.buffer))return this;switch(a?a=!1:i=r(),t.state){case"HEADER":/:/.test(i)?Ga(i,(function(e,t){}),/:/):i||(t.state="ID");continue;case"NOTE":i||(t.state="ID");continue;case"ID":if(/^NOTE($|[ \t])/.test(i)){t.state="NOTE";break}if(!i)continue;if(t.cue=new Oa(0,0,""),t.state="CUE",-1===i.indexOf("--\x3e")){t.cue.id=i;continue}case"CUE":if(!t.cue){t.state="BADCUE";continue}try{Va(i,t.cue,t.regionList);}catch(e){t.cue=null,t.state="BADCUE";continue}t.state="CUETEXT";continue;case"CUETEXT":var s=-1!==i.indexOf("--\x3e");if(!i||s&&(a=!0)){t.oncue&&t.cue&&t.oncue(t.cue),t.cue=null,t.state="ID";continue}if(null===t.cue)continue;t.cue.text&&(t.cue.text+="\n"),t.cue.text+=i;continue;case"BADCUE":i||(t.state="ID");}}}catch(e){"CUETEXT"===t.state&&t.cue&&t.oncue&&t.oncue(t.cue),t.cue=null,t.state="INITIAL"===t.state?"BADWEBVTT":"BADCUE";}return this},t.flush=function(){var e=this;try{if((e.cue||"HEADER"===e.state)&&(e.buffer+="\n\n",e.parse()),"INITIAL"===e.state||"BADWEBVTT"===e.state)throw new Error("Malformed WebVTT signature.")}catch(t){e.onparsingerror&&e.onparsingerror(t);}return e.onflush&&e.onflush(),this},e}();function ja(e){for(var t=5381,r=e.length;r;)t=33*t^e.charCodeAt(--r);return (t>>>0).toString()}var qa=/\r\n|\n\r|\n|\r/g,Xa=function(e,t,r){return void 0===r&&(r=0),e.slice(r,r+t.length)===t};function za(e,t,r){return ja(e.toString())+ja(t.toString())+ja(r)}function Qa(e,t,r,i,n,a,s){var o,l,u,d=new Wa,h=pe(new Uint8Array(e)).trim().replace(qa,"\n").split("\n"),c=[],f=t?(o=t.baseTime,void 0===(l=t.timescale)&&(l=1),Cn(o,In,1/l)):0,g="00:00.000",v=0,m=0,p=!0;d.oncue=function(e){var a=r[i],s=r.ccOffset,o=(v-f)/9e4;if(null!=a&&a.new&&(void 0!==m?s=r.ccOffset=a.start:function(e,t,r){var i=e[t],n=e[i.prevCC];if(!n||!n.new&&i.new)return e.ccOffset=e.presentationOffset=i.start,void(i.new=!1);for(;null!=(a=n)&&a.new;){var a;e.ccOffset+=i.start-n.start,i.new=!1,n=e[(i=n).prevCC];}e.presentationOffset=r;}(r,i,o)),o){if(!t)return void(u=new Error("Missing initPTS for VTT MPEGTS"));s=o-r.presentationOffset;}var l=e.endTime-e.startTime,d=Mn(9e4*(e.startTime+s-m),9e4*n)/9e4;e.startTime=Math.max(d,0),e.endTime=Math.max(d+l,0);var h=e.text.trim();e.text=decodeURIComponent(encodeURIComponent(h)),e.id||(e.id=za(e.startTime,e.endTime,h)),e.endTime>0&&c.push(e);},d.onparsingerror=function(e){u=e;},d.onflush=function(){u?s(u):a(c);},h.forEach((function(e){if(p){if(Xa(e,"X-TIMESTAMP-MAP=")){p=!1,e.slice(16).split(",").forEach((function(e){Xa(e,"LOCAL:")?g=e.slice(6):Xa(e,"MPEGTS:")&&(v=parseInt(e.slice(7)));}));try{m=function(e){var t=parseInt(e.slice(-3)),r=parseInt(e.slice(-6,-4)),i=parseInt(e.slice(-9,-7)),n=e.length>9?parseInt(e.substring(0,e.indexOf(":"))):0;if(!(E(t)&&E(r)&&E(i)&&E(n)))throw Error("Malformed X-TIMESTAMP-MAP: Local:"+e);return t+=1e3*r,(t+=6e4*i)+36e5*n}(g)/1e3;}catch(e){u=e;}return}""===e&&(p=!1);}d.parse(e+"\n");})),d.flush();}var Ja="stpp.ttml.im1t",$a=/^(\d{2,}):(\d{2}):(\d{2}):(\d{2})\.?(\d+)?$/,Za=/^(\d*(?:\.\d*)?)(h|m|s|ms|f|t)$/,es={left:"start",center:"center",right:"end",start:"start",end:"end"};function ts(e,t,r,i){var n=we(new Uint8Array(e),["mdat"]);if(0!==n.length){var a,s,l,u,d=n.map((function(e){return pe(e)})),h=(a=t.baseTime,s=1,void 0===(l=t.timescale)&&(l=1),void 0===u&&(u=!1),Cn(a,s,1/l,u));try{d.forEach((function(e){return r(function(e,t){var r=(new DOMParser).parseFromString(e,"text/xml"),i=r.getElementsByTagName("tt")[0];if(!i)throw new Error("Invalid ttml");var n={frameRate:30,subFrameRate:1,frameRateMultiplier:0,tickRate:0},a=Object.keys(n).reduce((function(e,t){return e[t]=i.getAttribute("ttp:"+t)||n[t],e}),{}),s="preserve"!==i.getAttribute("xml:space"),l=is(rs(i,"styling","style")),u=is(rs(i,"layout","region")),d=rs(i,"body","[begin]");return [].map.call(d,(function(e){var r=ns(e,s);if(!r||!e.hasAttribute("begin"))return null;var i=os(e.getAttribute("begin"),a),n=os(e.getAttribute("dur"),a),d=os(e.getAttribute("end"),a);if(null===i)throw ss(e);if(null===d){if(null===n)throw ss(e);d=i+n;}var h=new Oa(i-t,d-t,r);h.id=za(h.startTime,h.endTime,h.text);var c=function(e,t,r){var i="http://www.w3.org/ns/ttml#styling",n=null,a=["displayAlign","textAlign","color","backgroundColor","fontSize","fontFamily"],s=null!=e&&e.hasAttribute("style")?e.getAttribute("style"):null;return s&&r.hasOwnProperty(s)&&(n=r[s]),a.reduce((function(r,a){var s=as(t,i,a)||as(e,i,a)||as(n,i,a);return s&&(r[a]=s),r}),{})}(u[e.getAttribute("region")],l[e.getAttribute("style")],l),f=c.textAlign;if(f){var g=es[f];g&&(h.lineAlign=g),h.align=f;}return o(h,c),h})).filter((function(e){return null!==e}))}(e,h))}));}catch(e){i(e);}}else i(new Error("Could not parse IMSC1 mdat"));}function rs(e,t,r){var i=e.getElementsByTagName(t)[0];return i?[].slice.call(i.querySelectorAll(r)):[]}function is(e){return e.reduce((function(e,t){var r=t.getAttribute("xml:id");return r&&(e[r]=t),e}),{})}function ns(e,t){return [].slice.call(e.childNodes).reduce((function(e,r,i){var n;return "br"===r.nodeName&&i?e+"\n":null!=(n=r.childNodes)&&n.length?ns(r,t):t?e+r.textContent.trim().replace(/\s+/g," "):e+r.textContent}),"")}function as(e,t,r){return e&&e.hasAttributeNS(t,r)?e.getAttributeNS(t,r):null}function ss(e){return new Error("Could not parse ttml timestamp "+e)}function os(e,t){if(!e)return null;var r=Ua(e);return null===r&&($a.test(e)?r=function(e,t){var r=$a.exec(e),i=(0|r[4])+(0|r[5])/t.subFrameRate;return 3600*(0|r[1])+60*(0|r[2])+(0|r[3])+i/t.frameRate}(e,t):Za.test(e)&&(r=function(e,t){var r=Za.exec(e),i=Number(r[1]);switch(r[2]){case"h":return 3600*i;case"m":return 60*i;case"ms":return 1e3*i;case"f":return i/t.frameRate;case"t":return i/t.tickRate}return i}(e,t))),r}var ls=function(){function e(e){this.hls=void 0,this.media=null,this.config=void 0,this.enabled=!0,this.Cues=void 0,this.textTracks=[],this.tracks=[],this.initPTS=[],this.unparsedVttFrags=[],this.captionsTracks={},this.nonNativeCaptionsTracks={},this.cea608Parser1=void 0,this.cea608Parser2=void 0,this.lastCc=-1,this.lastSn=-1,this.lastPartIndex=-1,this.prevCC=-1,this.vttCCs={ccOffset:0,presentationOffset:0,0:{start:0,prevCC:-1,new:!0}},this.captionsProperties=void 0,this.hls=e,this.config=e.config,this.Cues=e.config.cueHandler,this.captionsProperties={textTrack1:{label:this.config.captionsTextTrack1Label,languageCode:this.config.captionsTextTrack1LanguageCode},textTrack2:{label:this.config.captionsTextTrack2Label,languageCode:this.config.captionsTextTrack2LanguageCode},textTrack3:{label:this.config.captionsTextTrack3Label,languageCode:this.config.captionsTextTrack3LanguageCode},textTrack4:{label:this.config.captionsTextTrack4Label,languageCode:this.config.captionsTextTrack4LanguageCode}},e.on(L.MEDIA_ATTACHING,this.onMediaAttaching,this),e.on(L.MEDIA_DETACHING,this.onMediaDetaching,this),e.on(L.MANIFEST_LOADING,this.onManifestLoading,this),e.on(L.MANIFEST_LOADED,this.onManifestLoaded,this),e.on(L.SUBTITLE_TRACKS_UPDATED,this.onSubtitleTracksUpdated,this),e.on(L.FRAG_LOADING,this.onFragLoading,this),e.on(L.FRAG_LOADED,this.onFragLoaded,this),e.on(L.FRAG_PARSING_USERDATA,this.onFragParsingUserdata,this),e.on(L.FRAG_DECRYPTED,this.onFragDecrypted,this),e.on(L.INIT_PTS_FOUND,this.onInitPtsFound,this),e.on(L.SUBTITLE_TRACKS_CLEARED,this.onSubtitleTracksCleared,this),e.on(L.BUFFER_FLUSHING,this.onBufferFlushing,this);}var t=e.prototype;return t.destroy=function(){var e=this.hls;e.off(L.MEDIA_ATTACHING,this.onMediaAttaching,this),e.off(L.MEDIA_DETACHING,this.onMediaDetaching,this),e.off(L.MANIFEST_LOADING,this.onManifestLoading,this),e.off(L.MANIFEST_LOADED,this.onManifestLoaded,this),e.off(L.SUBTITLE_TRACKS_UPDATED,this.onSubtitleTracksUpdated,this),e.off(L.FRAG_LOADING,this.onFragLoading,this),e.off(L.FRAG_LOADED,this.onFragLoaded,this),e.off(L.FRAG_PARSING_USERDATA,this.onFragParsingUserdata,this),e.off(L.FRAG_DECRYPTED,this.onFragDecrypted,this),e.off(L.INIT_PTS_FOUND,this.onInitPtsFound,this),e.off(L.SUBTITLE_TRACKS_CLEARED,this.onSubtitleTracksCleared,this),e.off(L.BUFFER_FLUSHING,this.onBufferFlushing,this),this.hls=this.config=this.media=null,this.cea608Parser1=this.cea608Parser2=void 0;},t.initCea608Parsers=function(){var e=new Ma(this,"textTrack1"),t=new Ma(this,"textTrack2"),r=new Ma(this,"textTrack3"),i=new Ma(this,"textTrack4");this.cea608Parser1=new xa(1,e,t),this.cea608Parser2=new xa(3,r,i);},t.addCues=function(e,t,r,i,n){for(var a,s,o,l,u=!1,d=n.length;d--;){var h=n[d],c=(a=h[0],s=h[1],o=t,l=r,Math.min(s,l)-Math.max(a,o));if(c>=0&&(h[0]=Math.min(h[0],t),h[1]=Math.max(h[1],r),u=!0,c/(r-t)>.5))return}if(u||n.push([t,r]),this.config.renderTextTracksNatively){var f=this.captionsTracks[e];this.Cues.newCue(f,t,r,i);}else {var g=this.Cues.newCue(null,t,r,i);this.hls.trigger(L.CUES_PARSED,{type:"captions",cues:g,track:e});}},t.onInitPtsFound=function(e,t){var r=this,i=t.frag,n=t.id,a=t.initPTS,s=t.timescale,o=this.unparsedVttFrags;n===Lt&&(this.initPTS[i.cc]={baseTime:a,timescale:s}),o.length&&(this.unparsedVttFrags=[],o.forEach((function(e){r.onFragLoaded(L.FRAG_LOADED,e);})));},t.getExistingTrack=function(e,t){var r=this.media;if(r)for(var i=0;i<r.textTracks.length;i++){var n=r.textTracks[i];if(ds(n,{name:e,lang:t,characteristics:"transcribes-spoken-dialog,describes-music-and-sound",attrs:{}}))return n}return null},t.createCaptionsTrack=function(e){this.config.renderTextTracksNatively?this.createNativeTrack(e):this.createNonNativeTrack(e);},t.createNativeTrack=function(e){if(!this.captionsTracks[e]){var t=this.captionsProperties,r=this.captionsTracks,i=this.media,n=t[e],a=n.label,s=n.languageCode,o=this.getExistingTrack(a,s);if(o)r[e]=o,Ct(r[e]),wt(r[e],i);else {var l=this.createTextTrack("captions",a,s);l&&(l[e]=!0,r[e]=l);}}},t.createNonNativeTrack=function(e){if(!this.nonNativeCaptionsTracks[e]){var t=this.captionsProperties[e];if(t){var r={_id:e,label:t.label,kind:"captions",default:!!t.media&&!!t.media.default,closedCaptions:t.media};this.nonNativeCaptionsTracks[e]=r,this.hls.trigger(L.NON_NATIVE_TEXT_TRACKS_FOUND,{tracks:[r]});}}},t.createTextTrack=function(e,t,r){var i=this.media;if(i)return i.addTextTrack(e,t,r)},t.onMediaAttaching=function(e,t){this.media=t.media,this._cleanTracks();},t.onMediaDetaching=function(){var e=this.captionsTracks;Object.keys(e).forEach((function(t){Ct(e[t]),delete e[t];})),this.nonNativeCaptionsTracks={},this.media=null;},t.onManifestLoading=function(){this.lastCc=-1,this.lastSn=-1,this.lastPartIndex=-1,this.prevCC=-1,this.vttCCs={ccOffset:0,presentationOffset:0,0:{start:0,prevCC:-1,new:!0}},this._cleanTracks(),this.tracks=[],this.captionsTracks={},this.nonNativeCaptionsTracks={},this.textTracks=[],this.unparsedVttFrags=[],this.initPTS=[],this.cea608Parser1&&this.cea608Parser2&&(this.cea608Parser1.reset(),this.cea608Parser2.reset());},t._cleanTracks=function(){var e=this.media;if(e){var t=e.textTracks;if(t)for(var r=0;r<t.length;r++)Ct(t[r]);}},t.onSubtitleTracksUpdated=function(e,t){var r=this,i=t.subtitleTracks||[],n=i.some((function(e){return e.textCodec===Ja}));if(this.config.enableWebVTT||n&&this.config.enableIMSC1){if(aa(this.tracks,i))return void(this.tracks=i);if(this.textTracks=[],this.tracks=i,this.config.renderTextTracksNatively){var a=this.media,s=a?Pt(a.textTracks):null;if(this.tracks.forEach((function(e,t){var i;if(s){for(var n=null,a=0;a<s.length;a++)if(s[a]&&ds(s[a],e)){n=s[a],s[a]=null;break}n&&(i=n);}if(i)Ct(i);else {var o=us(e);(i=r.createTextTrack(o,e.name,e.lang))&&(i.mode="disabled");}i&&r.textTracks.push(i);})),null!=s&&s.length){var o=s.filter((function(e){return null!==e})).map((function(e){return e.label}));o.length&&this.hls.logger.warn("Media element contains unused subtitle tracks: "+o.join(", ")+". Replace media element for each source to clear TextTracks and captions menu.");}}else if(this.tracks.length){var l=this.tracks.map((function(e){return {label:e.name,kind:e.type.toLowerCase(),default:e.default,subtitleTrack:e}}));this.hls.trigger(L.NON_NATIVE_TEXT_TRACKS_FOUND,{tracks:l});}}},t.onManifestLoaded=function(e,t){var r=this;this.config.enableCEA708Captions&&t.captions&&t.captions.forEach((function(e){var t=/(?:CC|SERVICE)([1-4])/.exec(e.instreamId);if(t){var i="textTrack"+t[1],n=r.captionsProperties[i];n&&(n.label=e.name,e.lang&&(n.languageCode=e.lang),n.media=e);}}));},t.closedCaptionsForLevel=function(e){var t=this.hls.levels[e.level];return null==t?void 0:t.attrs["CLOSED-CAPTIONS"]},t.onFragLoading=function(e,t){if(this.enabled&&t.frag.type===Lt){var r,i,n=this.cea608Parser1,a=this.cea608Parser2,s=this.lastSn,o=t.frag,l=o.cc,u=o.sn,d=null!=(r=null==(i=t.part)?void 0:i.index)?r:-1;n&&a&&(u!==s+1||u===s&&d!==this.lastPartIndex+1||l!==this.lastCc)&&(n.reset(),a.reset()),this.lastCc=l,this.lastSn=u,this.lastPartIndex=d;}},t.onFragLoaded=function(e,t){var r=t.frag,i=t.payload;if(r.type===Rt)if(i.byteLength){var n=r.decryptdata,a="stats"in t;if(null==n||!n.encrypted||a){var s=this.tracks[r.level],o=this.vttCCs;o[r.cc]||(o[r.cc]={start:r.start,prevCC:this.prevCC,new:!0},this.prevCC=r.cc),s&&s.textCodec===Ja?this._parseIMSC1(r,i):this._parseVTTs(t);}}else this.hls.trigger(L.SUBTITLE_FRAG_PROCESSED,{success:!1,frag:r,error:new Error("Empty subtitle payload")});},t._parseIMSC1=function(e,t){var r=this,i=this.hls;ts(t,this.initPTS[e.cc],(function(t){r._appendCues(t,e.level),i.trigger(L.SUBTITLE_FRAG_PROCESSED,{success:!0,frag:e});}),(function(t){i.logger.log("Failed to parse IMSC1: "+t),i.trigger(L.SUBTITLE_FRAG_PROCESSED,{success:!1,frag:e,error:t});}));},t._parseVTTs=function(e){var t,r=this,i=e.frag,n=e.payload,a=this.initPTS,s=this.unparsedVttFrags,o=a.length-1;if(a[i.cc]||-1!==o){var l=this.hls;Qa(null!=(t=i.initSegment)&&t.data?Ne(i.initSegment.data,new Uint8Array(n)):n,this.initPTS[i.cc],this.vttCCs,i.cc,i.start,(function(e){r._appendCues(e,i.level),l.trigger(L.SUBTITLE_FRAG_PROCESSED,{success:!0,frag:i});}),(function(t){var a="Missing initPTS for VTT MPEGTS"===t.message;a?s.push(e):r._fallbackToIMSC1(i,n),l.logger.log("Failed to parse VTT cue: "+t),a&&o>i.cc||l.trigger(L.SUBTITLE_FRAG_PROCESSED,{success:!1,frag:i,error:t});}));}else s.push(e);},t._fallbackToIMSC1=function(e,t){var r=this,i=this.tracks[e.level];i.textCodec||ts(t,this.initPTS[e.cc],(function(){i.textCodec=Ja,r._parseIMSC1(e,t);}),(function(){i.textCodec="wvtt";}));},t._appendCues=function(e,t){var r=this.hls;if(this.config.renderTextTracksNatively){var i=this.textTracks[t];if(!i||"disabled"===i.mode)return;e.forEach((function(e){return It(i,e)}));}else {var n=this.tracks[t];if(!n)return;var a=n.default?"default":"subtitles"+t;r.trigger(L.CUES_PARSED,{type:"subtitles",cues:e,track:a});}},t.onFragDecrypted=function(e,t){t.frag.type===Rt&&this.onFragLoaded(L.FRAG_LOADED,t);},t.onSubtitleTracksCleared=function(){this.tracks=[],this.captionsTracks={};},t.onFragParsingUserdata=function(e,t){if(this.enabled&&this.config.enableCEA708Captions){var r=t.frag,i=t.samples;if(r.type!==Lt||"NONE"!==this.closedCaptionsForLevel(r))for(var n=0;n<i.length;n++){var a=i[n].bytes;if(a){this.cea608Parser1||this.initCea608Parsers();var s=this.extractCea608Data(a);this.cea608Parser1.addData(i[n].pts,s[0]),this.cea608Parser2.addData(i[n].pts,s[1]);}}}},t.onBufferFlushing=function(e,t){var r=t.startOffset,i=t.endOffset,n=t.endOffsetSubtitles,a=t.type,s=this.media;if(s&&!(s.currentTime<i)){if(!a||"video"===a){var o=this.captionsTracks;Object.keys(o).forEach((function(e){return _t(o[e],r,i)}));}if(this.config.renderTextTracksNatively&&0===r&&void 0!==n){var l=this.textTracks;Object.keys(l).forEach((function(e){return _t(l[e],r,n)}));}}},t.extractCea608Data=function(e){for(var t=[[],[]],r=31&e[0],i=2,n=0;n<r;n++){var a=e[i++],s=127&e[i++],o=127&e[i++];if((0!==s||0!==o)&&0!=(4&a)){var l=3&a;0!==l&&1!==l||(t[l].push(s),t[l].push(o));}}return t},e}();function us(e){return e.characteristics&&/transcribes-spoken-dialog/gi.test(e.characteristics)&&/describes-music-and-sound/gi.test(e.characteristics)?"captions":"subtitles"}function ds(e,t){return !!e&&e.kind===us(t)&&oa(t,e)}var hs=function(){function e(e){this.hls=void 0,this.autoLevelCapping=void 0,this.firstLevel=void 0,this.media=void 0,this.restrictedLevels=void 0,this.timer=void 0,this.clientRect=void 0,this.streamController=void 0,this.hls=e,this.autoLevelCapping=Number.POSITIVE_INFINITY,this.firstLevel=-1,this.media=null,this.restrictedLevels=[],this.timer=void 0,this.clientRect=null,this.registerListeners();}var t=e.prototype;return t.setStreamController=function(e){this.streamController=e;},t.destroy=function(){this.hls&&this.unregisterListener(),this.timer&&this.stopCapping(),this.media=null,this.clientRect=null,this.hls=this.streamController=null;},t.registerListeners=function(){var e=this.hls;e.on(L.FPS_DROP_LEVEL_CAPPING,this.onFpsDropLevelCapping,this),e.on(L.MEDIA_ATTACHING,this.onMediaAttaching,this),e.on(L.MANIFEST_PARSED,this.onManifestParsed,this),e.on(L.LEVELS_UPDATED,this.onLevelsUpdated,this),e.on(L.BUFFER_CODECS,this.onBufferCodecs,this),e.on(L.MEDIA_DETACHING,this.onMediaDetaching,this);},t.unregisterListener=function(){var e=this.hls;e.off(L.FPS_DROP_LEVEL_CAPPING,this.onFpsDropLevelCapping,this),e.off(L.MEDIA_ATTACHING,this.onMediaAttaching,this),e.off(L.MANIFEST_PARSED,this.onManifestParsed,this),e.off(L.LEVELS_UPDATED,this.onLevelsUpdated,this),e.off(L.BUFFER_CODECS,this.onBufferCodecs,this),e.off(L.MEDIA_DETACHING,this.onMediaDetaching,this);},t.onFpsDropLevelCapping=function(e,t){var r=this.hls.levels[t.droppedLevel];this.isLevelAllowed(r)&&this.restrictedLevels.push({bitrate:r.bitrate,height:r.height,width:r.width});},t.onMediaAttaching=function(e,t){this.media=t.media instanceof HTMLVideoElement?t.media:null,this.clientRect=null,this.timer&&this.hls.levels.length&&this.detectPlayerSize();},t.onManifestParsed=function(e,t){var r=this.hls;this.restrictedLevels=[],this.firstLevel=t.firstLevel,r.config.capLevelToPlayerSize&&t.video&&this.startCapping();},t.onLevelsUpdated=function(e,t){this.timer&&E(this.autoLevelCapping)&&this.detectPlayerSize();},t.onBufferCodecs=function(e,t){this.hls.config.capLevelToPlayerSize&&t.video&&this.startCapping();},t.onMediaDetaching=function(){this.stopCapping(),this.media=null;},t.detectPlayerSize=function(){if(this.media){if(this.mediaHeight<=0||this.mediaWidth<=0)return void(this.clientRect=null);var e=this.hls.levels;if(e.length){var t=this.hls,r=this.getMaxLevel(e.length-1);r!==this.autoLevelCapping&&t.logger.log("Setting autoLevelCapping to "+r+": "+e[r].height+"p@"+e[r].bitrate+" for media "+this.mediaWidth+"x"+this.mediaHeight),t.autoLevelCapping=r,t.autoLevelEnabled&&t.autoLevelCapping>this.autoLevelCapping&&this.streamController&&this.streamController.nextLevelSwitch(),this.autoLevelCapping=t.autoLevelCapping;}}},t.getMaxLevel=function(t){var r=this,i=this.hls.levels;if(!i.length)return -1;var n=i.filter((function(e,i){return r.isLevelAllowed(e)&&i<=t}));return this.clientRect=null,e.getMaxLevelByMediaSize(n,this.mediaWidth,this.mediaHeight)},t.startCapping=function(){this.timer||(this.autoLevelCapping=Number.POSITIVE_INFINITY,self.clearInterval(this.timer),this.timer=self.setInterval(this.detectPlayerSize.bind(this),1e3),this.detectPlayerSize());},t.stopCapping=function(){this.restrictedLevels=[],this.firstLevel=-1,this.autoLevelCapping=Number.POSITIVE_INFINITY,this.timer&&(self.clearInterval(this.timer),this.timer=void 0);},t.getDimensions=function(){if(this.clientRect)return this.clientRect;var e=this.media,t={width:0,height:0};if(e){var r=e.getBoundingClientRect();t.width=r.width,t.height=r.height,t.width||t.height||(t.width=r.right-r.left||e.width||0,t.height=r.bottom-r.top||e.height||0);}return this.clientRect=t,t},t.isLevelAllowed=function(e){return !this.restrictedLevels.some((function(t){return e.bitrate===t.bitrate&&e.width===t.width&&e.height===t.height}))},e.getMaxLevelByMediaSize=function(e,t,r){if(null==e||!e.length)return -1;for(var i,n,a=e.length-1,s=Math.max(t,r),o=0;o<e.length;o+=1){var l=e[o];if((l.width>=s||l.height>=s)&&(i=l,!(n=e[o+1])||i.width!==n.width||i.height!==n.height)){a=o;break}}return a},n(e,[{key:"mediaWidth",get:function(){return this.getDimensions().width*this.contentScaleFactor}},{key:"mediaHeight",get:function(){return this.getDimensions().height*this.contentScaleFactor}},{key:"contentScaleFactor",get:function(){var e=1;if(!this.hls.config.ignoreDevicePixelRatio)try{e=self.devicePixelRatio;}catch(e){}return e}}])}(),cs=function(){function e(e){this.hls=void 0,this.isVideoPlaybackQualityAvailable=!1,this.timer=void 0,this.media=null,this.lastTime=void 0,this.lastDroppedFrames=0,this.lastDecodedFrames=0,this.streamController=void 0,this.hls=e,this.registerListeners();}var t=e.prototype;return t.setStreamController=function(e){this.streamController=e;},t.registerListeners=function(){this.hls.on(L.MEDIA_ATTACHING,this.onMediaAttaching,this),this.hls.on(L.MEDIA_DETACHING,this.onMediaDetaching,this);},t.unregisterListeners=function(){this.hls.off(L.MEDIA_ATTACHING,this.onMediaAttaching,this),this.hls.off(L.MEDIA_DETACHING,this.onMediaDetaching,this);},t.destroy=function(){this.timer&&clearInterval(this.timer),this.unregisterListeners(),this.isVideoPlaybackQualityAvailable=!1,this.media=null;},t.onMediaAttaching=function(e,t){var r=this.hls.config;if(r.capLevelOnFPSDrop){var i=t.media instanceof self.HTMLVideoElement?t.media:null;this.media=i,i&&"function"==typeof i.getVideoPlaybackQuality&&(this.isVideoPlaybackQualityAvailable=!0),self.clearInterval(this.timer),this.timer=self.setInterval(this.checkFPSInterval.bind(this),r.fpsDroppedMonitoringPeriod);}},t.onMediaDetaching=function(){this.media=null;},t.checkFPS=function(e,t,r){var i=performance.now();if(t){if(this.lastTime){var n=i-this.lastTime,a=r-this.lastDroppedFrames,s=t-this.lastDecodedFrames,o=1e3*a/n,l=this.hls;if(l.trigger(L.FPS_DROP,{currentDropped:a,currentDecoded:s,totalDroppedFrames:r}),o>0&&a>l.config.fpsDroppedMonitoringThreshold*s){var u=l.currentLevel;l.logger.warn("drop FPS ratio greater than max allowed value for currentLevel: "+u),u>0&&(-1===l.autoLevelCapping||l.autoLevelCapping>=u)&&(u-=1,l.trigger(L.FPS_DROP_LEVEL_CAPPING,{level:u,droppedLevel:l.currentLevel}),l.autoLevelCapping=u,this.streamController.nextLevelSwitch());}}this.lastTime=i,this.lastDroppedFrames=r,this.lastDecodedFrames=t;}},t.checkFPSInterval=function(){var e=this.media;if(e)if(this.isVideoPlaybackQualityAvailable){var t=e.getVideoPlaybackQuality();this.checkFPS(e,t.totalVideoFrames,t.droppedVideoFrames);}else this.checkFPS(e,e.webkitDecodedFrameCount,e.webkitDroppedFrameCount);},e}(),fs=function(e){function t(r){var i;return (i=e.call(this,"eme",r.logger)||this).hls=void 0,i.config=void 0,i.media=null,i.keyFormatPromise=null,i.keySystemAccessPromises={},i._requestLicenseFailureCount=0,i.mediaKeySessions=[],i.keyIdToKeySessionPromise={},i.setMediaKeysQueue=t.CDMCleanupPromise?[t.CDMCleanupPromise]:[],i.onMediaEncrypted=function(e){var t=e.initDataType,r=e.initData;if(i.debug('"'+e.type+'" event: init data type: "'+t+'"'),null!==r){var n,a;if("sinf"===t&&i.config.drmSystems[ae.FAIRPLAY]){var s=Le(new Uint8Array(r));try{var o=J(JSON.parse(s).sinf),l=Me(new Uint8Array(o));if(!l)return;n=l.subarray(8,24),a=ae.FAIRPLAY;}catch(e){return void i.warn('Failed to parse sinf "encrypted" event message initData')}}else {var u=function(e){if(!(e instanceof ArrayBuffer)||e.byteLength<32)return null;var t={version:0,systemId:"",kids:null,data:null},r=new DataView(e),i=r.getUint32(0);if(e.byteLength!==i&&i>44)return null;if(1886614376!==r.getUint32(4))return null;if(t.version=r.getUint32(8)>>>24,t.version>1)return null;t.systemId=ye(new Uint8Array(e,12,16));var n=r.getUint32(28);if(0===t.version){if(i-32<n)return null;t.data=new Uint8Array(e,32,n);}else if(1===t.version){t.kids=[];for(var a=0;a<n;a++)t.kids.push(new Uint8Array(e,32+16*a,16));}return t}(r);if(null===u)return;0===u.version&&u.systemId===he&&u.data&&(n=u.data.subarray(8,24)),a=function(e){if(e===he)return ae.WIDEVINE}(u.systemId);}if(a&&n){for(var d,h=ye(n),c=i,f=c.keyIdToKeySessionPromise,g=c.mediaKeySessions,v=f[h],m=function(){var e=g[p],a=e.decryptdata;if(a.pssh||!a.keyId)return 0;var s=ye(a.keyId);return h===s||-1!==a.uri.replace(/-/g,"").indexOf(h)?(v=f[s],delete f[s],a.pssh=new Uint8Array(r),a.keyId=n,v=f[h]=v.then((function(){return i.generateRequestWithPreferredKeySession(e,t,r,"encrypted-event-key-match")})),1):void 0},p=0;p<g.length&&(0===(d=m())||1!==d);p++);v||(v=f[h]=i.getKeySystemSelectionPromise([a]).then((function(e){var a,s=e.keySystem,o=e.mediaKeys;i.throwIfDestroyed();var l=new Ye("ISO-23001-7",h,null!=(a=ce(s))?a:"");return l.pssh=new Uint8Array(r),l.keyId=n,i.attemptSetMediaKeys(s,o).then((function(){i.throwIfDestroyed();var e=i.createMediaKeySessionContext({decryptdata:l,keySystem:s,mediaKeys:o});return i.generateRequestWithPreferredKeySession(e,t,r,"encrypted-event-no-match")}))}))),v.catch((function(e){return i.handleError(e)}));}}},i.onWaitingForKey=function(e){i.log('"'+e.type+'" event');},i.hls=r,i.config=r.config,i.registerListeners(),i}u(t,e);var r=t.prototype;return r.destroy=function(){this.unregisterListeners(),this.onMediaDetached();var e=this.config;e.requestMediaKeySystemAccessFunc=null,e.licenseXhrSetup=e.licenseResponseCallback=void 0,e.drmSystems=e.drmSystemOptions={},this.hls=this.config=this.keyIdToKeySessionPromise=null,this.onMediaEncrypted=this.onWaitingForKey=null;},r.registerListeners=function(){this.hls.on(L.MEDIA_ATTACHED,this.onMediaAttached,this),this.hls.on(L.MEDIA_DETACHED,this.onMediaDetached,this),this.hls.on(L.MANIFEST_LOADING,this.onManifestLoading,this),this.hls.on(L.MANIFEST_LOADED,this.onManifestLoaded,this);},r.unregisterListeners=function(){this.hls.off(L.MEDIA_ATTACHED,this.onMediaAttached,this),this.hls.off(L.MEDIA_DETACHED,this.onMediaDetached,this),this.hls.off(L.MANIFEST_LOADING,this.onManifestLoading,this),this.hls.off(L.MANIFEST_LOADED,this.onManifestLoaded,this);},r.getLicenseServerUrl=function(e){var t=this.config,r=t.drmSystems,i=t.widevineLicenseUrl,n=r[e];if(n)return n.licenseUrl;if(e===ae.WIDEVINE&&i)return i;throw new Error('no license server URL configured for key-system "'+e+'"')},r.getServerCertificateUrl=function(e){var t=this.config.drmSystems[e];if(t)return t.serverCertificateUrl;this.log('No Server Certificate in config.drmSystems["'+e+'"]');},r.attemptKeySystemAccess=function(e){var t=this,r=this.hls.levels,i=function(e,t,r){return !!e&&r.indexOf(e)===t},n=r.map((function(e){return e.audioCodec})).filter(i),a=r.map((function(e){return e.videoCodec})).filter(i);return n.length+a.length===0&&a.push("avc1.42e01e"),new Promise((function(r,i){!function e(s){var o=s.shift();t.getMediaKeysPromise(o,n,a).then((function(e){return r({keySystem:o,mediaKeys:e})})).catch((function(t){s.length?e(s):i(t instanceof ys?t:new ys({type:A.KEY_SYSTEM_ERROR,details:R.KEY_SYSTEM_NO_ACCESS,error:t,fatal:!0},t.message));}));}(e);}))},r.requestMediaKeySystemAccess=function(e,t){var r=this.config.requestMediaKeySystemAccessFunc;if("function"!=typeof r){var i="Configured requestMediaKeySystemAccess is not a function "+r;return null===ve&&"http:"===self.location.protocol&&(i="navigator.requestMediaKeySystemAccess is not available over insecure protocol "+location.protocol),Promise.reject(new Error(i))}return r(e,t)},r.getMediaKeysPromise=function(e,t,r){var i=this,n=function(e,t,r,i){var n;switch(e){case ae.FAIRPLAY:n=["cenc","sinf"];break;case ae.WIDEVINE:case ae.PLAYREADY:n=["cenc"];break;case ae.CLEARKEY:n=["cenc","keyids"];break;default:throw new Error("Unknown key-system: "+e)}return function(e,t,r,i){return [{initDataTypes:e,persistentState:i.persistentState||"optional",distinctiveIdentifier:i.distinctiveIdentifier||"optional",sessionTypes:i.sessionTypes||[i.sessionType||"temporary"],audioCapabilities:t.map((function(e){return {contentType:'audio/mp4; codecs="'+e+'"',robustness:i.audioRobustness||"",encryptionScheme:i.audioEncryptionScheme||null}})),videoCapabilities:r.map((function(e){return {contentType:'video/mp4; codecs="'+e+'"',robustness:i.videoRobustness||"",encryptionScheme:i.videoEncryptionScheme||null}}))}]}(n,t,r,i)}(e,t,r,this.config.drmSystemOptions),a=this.keySystemAccessPromises[e],s=null==a?void 0:a.keySystemAccess;if(!s){this.log('Requesting encrypted media "'+e+'" key-system access with config: '+JSON.stringify(n)),s=this.requestMediaKeySystemAccess(e,n);var o=this.keySystemAccessPromises[e]={keySystemAccess:s};return s.catch((function(t){i.log('Failed to obtain access to key-system "'+e+'": '+t);})),s.then((function(t){i.log('Access for key-system "'+t.keySystem+'" obtained');var r=i.fetchServerCertificate(e);return i.log('Create media-keys for "'+e+'"'),o.mediaKeys=t.createMediaKeys().then((function(t){return i.log('Media-keys created for "'+e+'"'),r.then((function(r){return r?i.setMediaKeysServerCertificate(t,e,r):t}))})),o.mediaKeys.catch((function(t){i.error('Failed to create media-keys for "'+e+'"}: '+t);})),o.mediaKeys}))}return s.then((function(){return a.mediaKeys}))},r.createMediaKeySessionContext=function(e){var t=e.decryptdata,r=e.keySystem,i=e.mediaKeys;this.log('Creating key-system session "'+r+'" keyId: '+ye(t.keyId||[]));var n=i.createSession(),a={decryptdata:t,keySystem:r,mediaKeys:i,mediaKeysSession:n,keyStatus:"status-pending"};return this.mediaKeySessions.push(a),a},r.renewKeySession=function(e){var t=e.decryptdata;if(t.pssh){var r=this.createMediaKeySessionContext(e),i=this.getKeyIdString(t);this.keyIdToKeySessionPromise[i]=this.generateRequestWithPreferredKeySession(r,"cenc",t.pssh,"expired");}else this.warn("Could not renew expired session. Missing pssh initData.");this.removeSession(e);},r.getKeyIdString=function(e){if(!e)throw new Error("Could not read keyId of undefined decryptdata");if(null===e.keyId)throw new Error("keyId is null");return ye(e.keyId)},r.updateKeySession=function(e,t){var r,i=e.mediaKeysSession;return this.log('Updating key-session "'+i.sessionId+'" for keyID '+ye((null==(r=e.decryptdata)?void 0:r.keyId)||[])+"\n      } (data length: "+(t?t.byteLength:t)+")"),i.update(t)},r.selectKeySystemFormat=function(e){var t=Object.keys(e.levelkeys||{});return this.keyFormatPromise||(this.log("Selecting key-system from fragment (sn: "+e.sn+" "+e.type+": "+e.level+") key formats "+t.join(", ")),this.keyFormatPromise=this.getKeyFormatPromise(t)),this.keyFormatPromise},r.getKeyFormatPromise=function(e){var t=this;return new Promise((function(r,i){var n=fe(t.config),a=e.map(de).filter((function(e){return !!e&&-1!==n.indexOf(e)}));return t.getKeySystemSelectionPromise(a).then((function(e){var t=e.keySystem,n=ce(t);n?r(n):i(new Error('Unable to find format for key-system "'+t+'"'));})).catch(i)}))},r.loadKey=function(e){var t=this,r=e.keyInfo.decryptdata,i=this.getKeyIdString(r),n="(keyId: "+i+' format: "'+r.keyFormat+'" method: '+r.method+" uri: "+r.uri+")";this.log("Starting session for key "+n);var a=this.keyIdToKeySessionPromise[i];return a||(a=this.keyIdToKeySessionPromise[i]=this.getKeySystemForKeyPromise(r).then((function(i){var a=i.keySystem,s=i.mediaKeys;return t.throwIfDestroyed(),t.log("Handle encrypted media sn: "+e.frag.sn+" "+e.frag.type+": "+e.frag.level+" using key "+n),t.attemptSetMediaKeys(a,s).then((function(){t.throwIfDestroyed();var e=t.createMediaKeySessionContext({keySystem:a,mediaKeys:s,decryptdata:r});return t.generateRequestWithPreferredKeySession(e,"cenc",r.pssh,"playlist-key")}))}))).catch((function(e){return t.handleError(e)})),a},r.throwIfDestroyed=function(e){if(!this.hls)throw new Error("invalid state")},r.handleError=function(e){this.hls&&(this.error(e.message),e instanceof ys?this.hls.trigger(L.ERROR,e.data):this.hls.trigger(L.ERROR,{type:A.KEY_SYSTEM_ERROR,details:R.KEY_SYSTEM_NO_KEYS,error:e,fatal:!0}));},r.getKeySystemForKeyPromise=function(e){var t=this.getKeyIdString(e),r=this.keyIdToKeySessionPromise[t];if(!r){var i=de(e.keyFormat),n=i?[i]:fe(this.config);return this.attemptKeySystemAccess(n)}return r},r.getKeySystemSelectionPromise=function(e){if(e.length||(e=fe(this.config)),0===e.length)throw new ys({type:A.KEY_SYSTEM_ERROR,details:R.KEY_SYSTEM_NO_CONFIGURED_LICENSE,fatal:!0},"Missing key-system license configuration options "+JSON.stringify({drmSystems:this.config.drmSystems}));return this.attemptKeySystemAccess(e)},r.attemptSetMediaKeys=function(e,t){var r=this,i=this.setMediaKeysQueue.slice();this.log('Setting media-keys for "'+e+'"');var n=Promise.all(i).then((function(){if(!r.media)throw new Error("Attempted to set mediaKeys without media element attached");return r.media.setMediaKeys(t)}));return this.setMediaKeysQueue.push(n),n.then((function(){r.log('Media-keys set for "'+e+'"'),i.push(n),r.setMediaKeysQueue=r.setMediaKeysQueue.filter((function(e){return -1===i.indexOf(e)}));}))},r.generateRequestWithPreferredKeySession=function(e,t,r,i){var n,a,s=this,o=null==(n=this.config.drmSystems)||null==(a=n[e.keySystem])?void 0:a.generateRequest;if(o)try{var l=o.call(this.hls,t,r,e);if(!l)throw new Error("Invalid response from configured generateRequest filter");t=l.initDataType,r=e.decryptdata.pssh=l.initData?new Uint8Array(l.initData):null;}catch(e){var u;if(this.warn(e.message),null!=(u=this.hls)&&u.config.debug)throw e}if(null===r)return this.log('Skipping key-session request for "'+i+'" (no initData)'),Promise.resolve(e);var d=this.getKeyIdString(e.decryptdata);this.log('Generating key-session request for "'+i+'": '+d+" (init data type: "+t+" length: "+(r?r.byteLength:null)+")");var h=new zn,c=e._onmessage=function(t){var r=e.mediaKeysSession;if(r){var i=t.messageType,n=t.message;s.log('"'+i+'" message event for session "'+r.sessionId+'" message size: '+n.byteLength),"license-request"===i||"license-renewal"===i?s.renewLicense(e,n).catch((function(e){s.handleError(e),h.emit("error",e);})):"license-release"===i?e.keySystem===ae.FAIRPLAY&&(s.updateKeySession(e,$("acknowledged")),s.removeSession(e)):s.warn('unhandled media key message type "'+i+'"');}else h.emit("error",new Error("invalid state"));},f=e._onkeystatuseschange=function(t){if(e.mediaKeysSession){s.onKeyStatusChange(e);var r=e.keyStatus;h.emit("keyStatus",r),"expired"===r&&(s.warn(e.keySystem+" expired for key "+d),s.renewKeySession(e));}else h.emit("error",new Error("invalid state"));};e.mediaKeysSession.addEventListener("message",c),e.mediaKeysSession.addEventListener("keystatuseschange",f);var g=new Promise((function(e,t){h.on("error",t),h.on("keyStatus",(function(r){r.startsWith("usable")?e():"output-restricted"===r?t(new ys({type:A.KEY_SYSTEM_ERROR,details:R.KEY_SYSTEM_STATUS_OUTPUT_RESTRICTED,fatal:!1},"HDCP level output restricted")):"internal-error"===r?t(new ys({type:A.KEY_SYSTEM_ERROR,details:R.KEY_SYSTEM_STATUS_INTERNAL_ERROR,fatal:!0},'key status changed to "'+r+'"')):"expired"===r?t(new Error("key expired while generating request")):s.warn('unhandled key status change "'+r+'"');}));}));return e.mediaKeysSession.generateRequest(t,r).then((function(){var t;s.log('Request generated for key-session "'+(null==(t=e.mediaKeysSession)?void 0:t.sessionId)+'" keyId: '+d);})).catch((function(e){throw new ys({type:A.KEY_SYSTEM_ERROR,details:R.KEY_SYSTEM_NO_SESSION,error:e,fatal:!1},"Error generating key-session request: "+e)})).then((function(){return g})).catch((function(t){throw h.removeAllListeners(),s.removeSession(e),t})).then((function(){return h.removeAllListeners(),e}))},r.onKeyStatusChange=function(e){var t=this;e.mediaKeysSession.keyStatuses.forEach((function(r,i){t.log('key status change "'+r+'" for keyStatuses keyId: '+ye("buffer"in i?new Uint8Array(i.buffer,i.byteOffset,i.byteLength):new Uint8Array(i))+" session keyId: "+ye(new Uint8Array(e.decryptdata.keyId||[]))+" uri: "+e.decryptdata.uri),e.keyStatus=r;}));},r.fetchServerCertificate=function(e){var t=this.config,r=new(t.loader)(t),i=this.getServerCertificateUrl(e);return i?(this.log('Fetching server certificate for "'+e+'"'),new Promise((function(n,a){var s={responseType:"arraybuffer",url:i},o=t.certLoadPolicy.default,l={loadPolicy:o,timeout:o.maxLoadTimeMs,maxRetry:0,retryDelay:0,maxRetryDelay:0},u={onSuccess:function(e,t,r,i){n(e.data);},onError:function(t,r,n,o){a(new ys({type:A.KEY_SYSTEM_ERROR,details:R.KEY_SYSTEM_SERVER_CERTIFICATE_REQUEST_FAILED,fatal:!0,networkDetails:n,response:c({url:s.url,data:void 0},t)},'"'+e+'" certificate request failed ('+i+"). Status: "+t.code+" ("+t.text+")"));},onTimeout:function(t,r,n){a(new ys({type:A.KEY_SYSTEM_ERROR,details:R.KEY_SYSTEM_SERVER_CERTIFICATE_REQUEST_FAILED,fatal:!0,networkDetails:n,response:{url:s.url,data:void 0}},'"'+e+'" certificate request timed out ('+i+")"));},onAbort:function(e,t,r){a(new Error("aborted"));}};r.load(s,l,u);}))):Promise.resolve()},r.setMediaKeysServerCertificate=function(e,t,r){var i=this;return new Promise((function(n,a){e.setServerCertificate(r).then((function(a){i.log("setServerCertificate "+(a?"success":"not supported by CDM")+" ("+(null==r?void 0:r.byteLength)+') on "'+t+'"'),n(e);})).catch((function(e){a(new ys({type:A.KEY_SYSTEM_ERROR,details:R.KEY_SYSTEM_SERVER_CERTIFICATE_UPDATE_FAILED,error:e,fatal:!0},e.message));}));}))},r.renewLicense=function(e,t){var r=this;return this.requestLicense(e,new Uint8Array(t)).then((function(t){return r.updateKeySession(e,new Uint8Array(t)).catch((function(e){throw new ys({type:A.KEY_SYSTEM_ERROR,details:R.KEY_SYSTEM_SESSION_UPDATE_FAILED,error:e,fatal:!0},e.message)}))}))},r.unpackPlayReadyKeyMessage=function(e,t){var r=String.fromCharCode.apply(null,new Uint16Array(t.buffer));if(!r.includes("PlayReadyKeyMessage"))return e.setRequestHeader("Content-Type","text/xml; charset=utf-8"),t;var i=(new DOMParser).parseFromString(r,"application/xml"),n=i.querySelectorAll("HttpHeader");if(n.length>0)for(var a,s=0,o=n.length;s<o;s++){var l,u,d=null==(l=(a=n[s]).querySelector("name"))?void 0:l.textContent,h=null==(u=a.querySelector("value"))?void 0:u.textContent;d&&h&&e.setRequestHeader(d,h);}var c=i.querySelector("Challenge"),f=null==c?void 0:c.textContent;if(!f)throw new Error("Cannot find <Challenge> in key message");return $(atob(f))},r.setupLicenseXHR=function(e,t,r,i){var n=this,a=this.config.licenseXhrSetup;return a?Promise.resolve().then((function(){if(!r.decryptdata)throw new Error("Key removed");return a.call(n.hls,e,t,r,i)})).catch((function(s){if(!r.decryptdata)throw s;return e.open("POST",t,!0),a.call(n.hls,e,t,r,i)})).then((function(r){return e.readyState||e.open("POST",t,!0),{xhr:e,licenseChallenge:r||i}})):(e.open("POST",t,!0),Promise.resolve({xhr:e,licenseChallenge:i}))},r.requestLicense=function(e,t){var r=this,i=this.config.keyLoadPolicy.default;return new Promise((function(n,a){var s=r.getLicenseServerUrl(e.keySystem);r.log("Sending license request to URL: "+s);var o=new XMLHttpRequest;o.responseType="arraybuffer",o.onreadystatechange=function(){if(!r.hls||!e.mediaKeysSession)return a(new Error("invalid state"));if(4===o.readyState)if(200===o.status){r._requestLicenseFailureCount=0;var l=o.response;r.log("License received "+(l instanceof ArrayBuffer?l.byteLength:l));var u=r.config.licenseResponseCallback;if(u)try{l=u.call(r.hls,o,s,e);}catch(e){r.error(e);}n(l);}else {var d=i.errorRetry,h=d?d.maxNumRetry:0;if(r._requestLicenseFailureCount++,r._requestLicenseFailureCount>h||o.status>=400&&o.status<500)a(new ys({type:A.KEY_SYSTEM_ERROR,details:R.KEY_SYSTEM_LICENSE_REQUEST_FAILED,fatal:!0,networkDetails:o,response:{url:s,data:void 0,code:o.status,text:o.statusText}},"License Request XHR failed ("+s+"). Status: "+o.status+" ("+o.statusText+")"));else {var c=h-r._requestLicenseFailureCount+1;r.warn("Retrying license request, "+c+" attempts left"),r.requestLicense(e,t).then(n,a);}}},e.licenseXhr&&e.licenseXhr.readyState!==XMLHttpRequest.DONE&&e.licenseXhr.abort(),e.licenseXhr=o,r.setupLicenseXHR(o,s,e,t).then((function(t){var i=t.xhr,n=t.licenseChallenge;e.keySystem==ae.PLAYREADY&&(n=r.unpackPlayReadyKeyMessage(i,n)),i.send(n);}));}))},r.onMediaAttached=function(e,t){if(this.config.emeEnabled){var r=t.media;this.media=r,r.addEventListener("encrypted",this.onMediaEncrypted),r.addEventListener("waitingforkey",this.onWaitingForKey);}},r.onMediaDetached=function(){var e=this,r=this.media,i=this.mediaKeySessions;r&&(r.removeEventListener("encrypted",this.onMediaEncrypted),r.removeEventListener("waitingforkey",this.onWaitingForKey),this.media=null),this._requestLicenseFailureCount=0,this.setMediaKeysQueue=[],this.mediaKeySessions=[],this.keyIdToKeySessionPromise={},Ye.clearKeyUriToKeyIdMap();var n=i.length;t.CDMCleanupPromise=Promise.all(i.map((function(t){return e.removeSession(t)})).concat(null==r?void 0:r.setMediaKeys(null).catch((function(t){e.log("Could not clear media keys: "+t);})))).then((function(){n&&(e.log("finished closing key sessions and clearing media keys"),i.length=0);})).catch((function(t){e.log("Could not close sessions and clear media keys: "+t);}));},r.onManifestLoading=function(){this.keyFormatPromise=null;},r.onManifestLoaded=function(e,t){var r=t.sessionKeys;if(r&&this.config.emeEnabled&&!this.keyFormatPromise){var i=r.reduce((function(e,t){return -1===e.indexOf(t.keyFormat)&&e.push(t.keyFormat),e}),[]);this.log("Selecting key-system from session-keys "+i.join(", ")),this.keyFormatPromise=this.getKeyFormatPromise(i);}},r.removeSession=function(e){var t=this,r=e.mediaKeysSession,i=e.licenseXhr;if(r){this.log("Remove licenses and keys and close session "+r.sessionId),e._onmessage&&(r.removeEventListener("message",e._onmessage),e._onmessage=void 0),e._onkeystatuseschange&&(r.removeEventListener("keystatuseschange",e._onkeystatuseschange),e._onkeystatuseschange=void 0),i&&i.readyState!==XMLHttpRequest.DONE&&i.abort(),e.mediaKeysSession=e.decryptdata=e.licenseXhr=void 0;var n=this.mediaKeySessions.indexOf(e);return n>-1&&this.mediaKeySessions.splice(n,1),r.remove().catch((function(e){t.log("Could not remove session: "+e);})).then((function(){return r.close()})).catch((function(e){t.log("Could not close session: "+e);}))}},t}(k);fs.CDMCleanupPromise=void 0;var gs,vs,ms,ps,ys=function(e){function t(t,r){var i;return (i=e.call(this,r)||this).data=void 0,t.error||(t.error=new Error(r)),i.data=t,t.err=t.error,i}return u(t,e),t}(v(Error));!function(e){e.MANIFEST="m",e.AUDIO="a",e.VIDEO="v",e.MUXED="av",e.INIT="i",e.CAPTION="c",e.TIMED_TEXT="tt",e.KEY="k",e.OTHER="o";}(gs||(gs={})),function(e){e.DASH="d",e.HLS="h",e.SMOOTH="s",e.OTHER="o";}(vs||(vs={})),function(e){e.OBJECT="CMCD-Object",e.REQUEST="CMCD-Request",e.SESSION="CMCD-Session",e.STATUS="CMCD-Status";}(ms||(ms={}));var Es=((ps={})[ms.OBJECT]=["br","d","ot","tb"],ps[ms.REQUEST]=["bl","dl","mtp","nor","nrr","su"],ps[ms.SESSION]=["cid","pr","sf","sid","st","v"],ps[ms.STATUS]=["bs","rtp"],ps),Ts=function e(t,r){Array.isArray(t)&&(t=t.map((function(t){return t instanceof e?t:new e(t)}))),this.value=t,this.params=r;},Ss="Dict";function Ls(e,t,r,i){return new Error("failed to "+e+' "'+(n=t,(Array.isArray(n)?JSON.stringify(n):n instanceof Map?"Map{}":n instanceof Set?"Set{}":"object"==typeof n?JSON.stringify(n):String(n))+'" as ')+r,{cause:i});var n;}function As(e,t,r){return Ls("serialize",e,t,r)}var Rs=function(e){this.description=e;},ks="Bare Item",bs="Boolean",Ds="Byte Sequence";function ws(e){if(!1===ArrayBuffer.isView(e))throw As(e,Ds);return ":"+(t=e,btoa(String.fromCharCode.apply(String,t))+":");var t;}var Is="Integer";function Cs(e){if(function(e){return e<-999999999999999||999999999999999<e}(e))throw As(e,Is);return e.toString()}var _s="Decimal";function Ps(e){var t=Nt(e,3);if(Math.floor(Math.abs(t)).toString().length>12)throw As(e,_s);var r=t.toString();return r.includes(".")?r:r+".0"}var xs="String",Fs=/[\x00-\x1f\x7f]+/,Ms="Token";function Os(e){var t,r=(t=e).description||t.toString().slice(7,-1);if(!1===/^([a-zA-Z*])([!#$%&'*+\-.^_`|~\w:/]*)$/.test(r))throw As(r,Ms);return r}function Ns(e){switch(typeof e){case"number":if(!E(e))throw As(e,ks);return Number.isInteger(e)?Cs(e):Ps(e);case"string":return function(e){if(Fs.test(e))throw As(e,xs);return '"'+e.replace(/\\/g,"\\\\").replace(/"/g,'\\"')+'"'}(e);case"symbol":return Os(e);case"boolean":return function(e){if("boolean"!=typeof e)throw As(e,bs);return e?"?1":"?0"}(e);case"object":if(e instanceof Date)return function(e){return "@"+Cs(e.getTime()/1e3)}(e);if(e instanceof Uint8Array)return ws(e);if(e instanceof Rs)return Os(e);default:throw As(e,ks)}}var Us="Key";function Bs(e){if(!1===/^[a-z*][a-z0-9\-_.*]*$/.test(e))throw As(e,Us);return e}function Gs(e){return null==e?"":Object.entries(e).map((function(e){var t=e[0],r=e[1];return !0===r?";"+Bs(t):";"+Bs(t)+"="+Ns(r)})).join("")}function Ks(e){return e instanceof Ts?""+Ns(e.value)+Gs(e.params):Ns(e)}function Hs(e,t){if(void 0===t&&(t={whitespace:!0}),"object"!=typeof e)throw As(e,Ss);var r=e instanceof Map?e.entries():Object.entries(e),i=(null==t?void 0:t.whitespace)?" ":"";return Array.from(r).map((function(e){var t=e[0],r=e[1];r instanceof Ts==0&&(r=new Ts(r));var i,n=Bs(t);return !0===r.value?n+=Gs(r.params):(n+="=",Array.isArray(r.value)?n+="("+(i=r).value.map(Ks).join(" ")+")"+Gs(i.params):n+=Ks(r)),n})).join(","+i)}var Vs=function(e){return Math.round(e)},Ys=function(e){return 100*Vs(e/100)},Ws={br:Vs,d:Vs,bl:Ys,dl:Ys,mtp:Ys,nor:function(e,t){return (null==t?void 0:t.baseUrl)&&(e=function(e,t){var r=new URL(e),i=new URL(t);if(r.origin!==i.origin)return e;for(var n=r.pathname.split("/").slice(1),a=i.pathname.split("/").slice(1,-1);n[0]===a[0];)n.shift(),a.shift();for(;a.length;)a.shift(),n.unshift("..");return n.join("/")}(e,t.baseUrl)),encodeURIComponent(e)},rtp:Ys,tb:Vs};function js(e,t){var r={};if(null==e||"object"!=typeof e)return r;var i=Object.keys(e).sort(),n=o({},Ws,null==t?void 0:t.formatters),a=null==t?void 0:t.filter;return i.forEach((function(i){if(!(null==a?void 0:a(i))){var s=e[i],o=n[i];o&&(s=o(s,t)),"v"===i&&1===s||"pr"==i&&1===s||function(e){return "number"==typeof e?E(e):null!=e&&""!==e&&!1!==e}(s)&&(function(e){return "ot"===e||"sf"===e||"st"===e}(i)&&"string"==typeof s&&(s=new Rs(s)),r[i]=s);}})),r}function qs(e,t){return void 0===t&&(t={}),e?function(e,t){return Hs(e,t)}(js(e,t),o({whitespace:!1},t)):""}function Xs(e,t,r){return o(e,function(e,t){void 0===t&&(t={});var r={};if(!e)return r;var i=Object.entries(e),n=Object.entries(Es).concat(Object.entries((null==t?void 0:t.customHeaderMap)||{})),a=i.reduce((function(e,t){var r,i,a=t[0],s=t[1],o=(null===(r=n.find((function(e){return e[1].includes(a)})))||void 0===r?void 0:r[0])||ms.REQUEST;return null!==(i=e[o])&&void 0!==i||(e[o]={}),e[o][a]=s,e}),{});return Object.entries(a).reduce((function(e,r){var i=r[0],n=r[1];return e[i]=qs(n,t),e}),r)}(t,r))}var zs="CMCD",Qs=/CMCD=[^&#]+/;function Js(e,t,r){var i=function(e,t){if(void 0===t&&(t={}),!e)return "";var r=qs(e,t);return zs+"="+encodeURIComponent(r)}(t,r);if(!i)return e;if(Qs.test(e))return e.replace(Qs,i);var n=e.includes("?")?"&":"?";return ""+e+n+i}var $s=function(){function e(e){var t=this;this.hls=void 0,this.config=void 0,this.media=void 0,this.sid=void 0,this.cid=void 0,this.useHeaders=!1,this.includeKeys=void 0,this.initialized=!1,this.starved=!1,this.buffering=!0,this.audioBuffer=void 0,this.videoBuffer=void 0,this.onWaiting=function(){t.initialized&&(t.starved=!0),t.buffering=!0;},this.onPlaying=function(){t.initialized||(t.initialized=!0),t.buffering=!1;},this.applyPlaylistData=function(e){try{t.apply(e,{ot:gs.MANIFEST,su:!t.initialized});}catch(e){t.hls.logger.warn("Could not generate manifest CMCD data.",e);}},this.applyFragmentData=function(e){try{var r=e.frag,i=e.part,n=t.hls.levels[r.level],a=t.getObjectType(r),s={d:1e3*(i||r).duration,ot:a};a!==gs.VIDEO&&a!==gs.AUDIO&&a!=gs.MUXED||(s.br=n.bitrate/1e3,s.tb=t.getTopBandwidth(a)/1e3,s.bl=t.getBufferLength(a));var o=i?t.getNextPart(i):t.getNextFrag(r);null!=o&&o.url&&o.url!==r.url&&(s.nor=o.url),t.apply(e,s);}catch(e){t.hls.logger.warn("Could not generate segment CMCD data.",e);}},this.hls=e;var r=this.config=e.config,i=r.cmcd;null!=i&&(r.pLoader=this.createPlaylistLoader(),r.fLoader=this.createFragmentLoader(),this.sid=i.sessionId||function(){try{return crypto.randomUUID()}catch(i){try{var e=URL.createObjectURL(new Blob),t=e.toString();return URL.revokeObjectURL(e),t.slice(t.lastIndexOf("/")+1)}catch(e){var r=(new Date).getTime();return "xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(e){var t=(r+16*Math.random())%16|0;return r=Math.floor(r/16),("x"==e?t:3&t|8).toString(16)}))}}}(),this.cid=i.contentId,this.useHeaders=!0===i.useHeaders,this.includeKeys=i.includeKeys,this.registerListeners());}var t=e.prototype;return t.registerListeners=function(){var e=this.hls;e.on(L.MEDIA_ATTACHED,this.onMediaAttached,this),e.on(L.MEDIA_DETACHED,this.onMediaDetached,this),e.on(L.BUFFER_CREATED,this.onBufferCreated,this);},t.unregisterListeners=function(){var e=this.hls;e.off(L.MEDIA_ATTACHED,this.onMediaAttached,this),e.off(L.MEDIA_DETACHED,this.onMediaDetached,this),e.off(L.BUFFER_CREATED,this.onBufferCreated,this);},t.destroy=function(){this.unregisterListeners(),this.onMediaDetached(),this.hls=this.config=this.audioBuffer=this.videoBuffer=null,this.onWaiting=this.onPlaying=this.media=null;},t.onMediaAttached=function(e,t){this.media=t.media,this.media.addEventListener("waiting",this.onWaiting),this.media.addEventListener("playing",this.onPlaying);},t.onMediaDetached=function(){this.media&&(this.media.removeEventListener("waiting",this.onWaiting),this.media.removeEventListener("playing",this.onPlaying),this.media=null);},t.onBufferCreated=function(e,t){var r,i;this.audioBuffer=null==(r=t.tracks.audio)?void 0:r.buffer,this.videoBuffer=null==(i=t.tracks.video)?void 0:i.buffer;},t.createData=function(){var e;return {v:1,sf:vs.HLS,sid:this.sid,cid:this.cid,pr:null==(e=this.media)?void 0:e.playbackRate,mtp:this.hls.bandwidthEstimate/1e3}},t.apply=function(e,t){void 0===t&&(t={}),o(t,this.createData());var r=t.ot===gs.INIT||t.ot===gs.VIDEO||t.ot===gs.MUXED;this.starved&&r&&(t.bs=!0,t.su=!0,this.starved=!1),null==t.su&&(t.su=this.buffering);var i=this.includeKeys;i&&(t=Object.keys(t).reduce((function(e,r){return i.includes(r)&&(e[r]=t[r]),e}),{}));var n={baseUrl:e.url};this.useHeaders?(e.headers||(e.headers={}),Xs(e.headers,t,n)):e.url=Js(e.url,t,n);},t.getNextFrag=function(e){var t,r=null==(t=this.hls.levels[e.level])?void 0:t.details;if(r){var i=e.sn-r.startSN;return r.fragments[i+1]}},t.getNextPart=function(e){var t,r,i=e.index,n=e.fragment,a=null==(t=this.hls.levels[n.level])||null==(r=t.details)?void 0:r.partList;if(a)for(var s=n.sn,o=a.length-1;o>=0;o--){var l=a[o];if(l.index===i&&l.fragment.sn===s)return a[o+1]}},t.getObjectType=function(e){var t=e.type;return "subtitle"===t?gs.TIMED_TEXT:"initSegment"===e.sn?gs.INIT:"audio"===t?gs.AUDIO:"main"===t?this.hls.audioTracks.length?gs.VIDEO:gs.MUXED:void 0},t.getTopBandwidth=function(e){var t,r=0,i=this.hls;if(e===gs.AUDIO)t=i.audioTracks;else {var n=i.maxAutoLevel,s=n>-1?n+1:i.levels.length;t=i.levels.slice(0,s);}for(var o,l=a(t);!(o=l()).done;){var u=o.value;u.bitrate>r&&(r=u.bitrate);}return r>0?r:NaN},t.getBufferLength=function(e){var t=this.media,r=e===gs.AUDIO?this.audioBuffer:this.videoBuffer;return r&&t?1e3*ii.bufferInfo(r,t.currentTime,this.config.maxBufferHole).len:NaN},t.createPlaylistLoader=function(){var e=this.config.pLoader,t=this.applyPlaylistData,r=e||this.config.loader;return function(){function e(e){this.loader=void 0,this.loader=new r(e);}var i=e.prototype;return i.destroy=function(){this.loader.destroy();},i.abort=function(){this.loader.abort();},i.load=function(e,r,i){t(e),this.loader.load(e,r,i);},n(e,[{key:"stats",get:function(){return this.loader.stats}},{key:"context",get:function(){return this.loader.context}}])}()},t.createFragmentLoader=function(){var e=this.config.fLoader,t=this.applyFragmentData,r=e||this.config.loader;return function(){function e(e){this.loader=void 0,this.loader=new r(e);}var i=e.prototype;return i.destroy=function(){this.loader.destroy();},i.abort=function(){this.loader.abort();},i.load=function(e,r,i){t(e),this.loader.load(e,r,i);},n(e,[{key:"stats",get:function(){return this.loader.stats}},{key:"context",get:function(){return this.loader.context}}])}()},e}(),Zs=function(e){function t(t){var r;return (r=e.call(this,"content-steering",t.logger)||this).hls=void 0,r.loader=null,r.uri=null,r.pathwayId=".",r._pathwayPriority=null,r.timeToLoad=300,r.reloadTimer=-1,r.updated=0,r.started=!1,r.enabled=!0,r.levels=null,r.audioTracks=null,r.subtitleTracks=null,r.penalizedPathways={},r.hls=t,r.registerListeners(),r}u(t,e);var r=t.prototype;return r.registerListeners=function(){var e=this.hls;e.on(L.MANIFEST_LOADING,this.onManifestLoading,this),e.on(L.MANIFEST_LOADED,this.onManifestLoaded,this),e.on(L.MANIFEST_PARSED,this.onManifestParsed,this),e.on(L.ERROR,this.onError,this);},r.unregisterListeners=function(){var e=this.hls;e&&(e.off(L.MANIFEST_LOADING,this.onManifestLoading,this),e.off(L.MANIFEST_LOADED,this.onManifestLoaded,this),e.off(L.MANIFEST_PARSED,this.onManifestParsed,this),e.off(L.ERROR,this.onError,this));},r.pathways=function(){return (this.levels||[]).reduce((function(e,t){return -1===e.indexOf(t.pathwayId)&&e.push(t.pathwayId),e}),[])},r.startLoad=function(){if(this.started=!0,this.clearTimeout(),this.enabled&&this.uri){if(this.updated){var e=1e3*this.timeToLoad-(performance.now()-this.updated);if(e>0)return void this.scheduleRefresh(this.uri,e)}this.loadSteeringManifest(this.uri);}},r.stopLoad=function(){this.started=!1,this.loader&&(this.loader.destroy(),this.loader=null),this.clearTimeout();},r.clearTimeout=function(){-1!==this.reloadTimer&&(self.clearTimeout(this.reloadTimer),this.reloadTimer=-1);},r.destroy=function(){this.unregisterListeners(),this.stopLoad(),this.hls=null,this.levels=this.audioTracks=this.subtitleTracks=null;},r.removeLevel=function(e){var t=this.levels;t&&(this.levels=t.filter((function(t){return t!==e})));},r.onManifestLoading=function(){this.stopLoad(),this.enabled=!0,this.timeToLoad=300,this.updated=0,this.uri=null,this.pathwayId=".",this.levels=this.audioTracks=this.subtitleTracks=null;},r.onManifestLoaded=function(e,t){var r=t.contentSteering;null!==r&&(this.pathwayId=r.pathwayId,this.uri=r.uri,this.started&&this.startLoad());},r.onManifestParsed=function(e,t){this.audioTracks=t.audioTracks,this.subtitleTracks=t.subtitleTracks;},r.onError=function(e,t){var r=t.errorAction;if((null==r?void 0:r.action)===Dr&&r.flags===_r){var i=this.levels,n=this._pathwayPriority,a=this.pathwayId;if(t.context){var s=t.context,o=s.groupId,l=s.pathwayId,u=s.type;o&&i?a=this.getPathwayForGroupId(o,u,a):l&&(a=l);}a in this.penalizedPathways||(this.penalizedPathways[a]=performance.now()),!n&&i&&(n=this.pathways()),n&&n.length>1&&(this.updatePathwayPriority(n),r.resolved=this.pathwayId!==a),r.resolved||this.warn("Could not resolve "+t.details+' ("'+t.error.message+'") with content-steering for Pathway: '+a+" levels: "+(i?i.length:i)+" priorities: "+JSON.stringify(n)+" penalized: "+JSON.stringify(this.penalizedPathways));}},r.filterParsedLevels=function(e){this.levels=e;var t=this.getLevelsForPathway(this.pathwayId);if(0===t.length){var r=e[0].pathwayId;this.log("No levels found in Pathway "+this.pathwayId+'. Setting initial Pathway to "'+r+'"'),t=this.getLevelsForPathway(r),this.pathwayId=r;}return t.length!==e.length?(this.log("Found "+t.length+"/"+e.length+' levels in Pathway "'+this.pathwayId+'"'),t):e},r.getLevelsForPathway=function(e){return null===this.levels?[]:this.levels.filter((function(t){return e===t.pathwayId}))},r.updatePathwayPriority=function(e){var t;this._pathwayPriority=e;var r=this.penalizedPathways,i=performance.now();Object.keys(r).forEach((function(e){i-r[e]>3e5&&delete r[e];}));for(var n=0;n<e.length;n++){var a=e[n];if(!(a in r)){if(a===this.pathwayId)return;var s=this.hls.nextLoadLevel,o=this.hls.levels[s];if((t=this.getLevelsForPathway(a)).length>0){this.log('Setting Pathway to "'+a+'"'),this.pathwayId=a,vr(t),this.hls.trigger(L.LEVELS_UPDATED,{levels:t});var l=this.hls.levels[s];o&&l&&this.levels&&(l.attrs["STABLE-VARIANT-ID"]!==o.attrs["STABLE-VARIANT-ID"]&&l.bitrate!==o.bitrate&&this.log("Unstable Pathways change from bitrate "+o.bitrate+" to "+l.bitrate),this.hls.nextLoadLevel=s);break}}}},r.getPathwayForGroupId=function(e,t,r){for(var i=this.getLevelsForPathway(r).concat(this.levels||[]),n=0;n<i.length;n++)if(t===Tt&&i[n].hasAudioGroup(e)||t===St&&i[n].hasSubtitleGroup(e))return i[n].pathwayId;return r},r.clonePathways=function(e){var t=this,r=this.levels;if(r){var i={},n={};e.forEach((function(e){var a=e.ID,s=e["BASE-ID"],o=e["URI-REPLACEMENT"];if(!r.some((function(e){return e.pathwayId===a}))){var l=t.getLevelsForPathway(s).map((function(e){var t=new G(e.attrs);t["PATHWAY-ID"]=a;var r=t.AUDIO&&t.AUDIO+"_clone_"+a,s=t.SUBTITLES&&t.SUBTITLES+"_clone_"+a;r&&(i[t.AUDIO]=r,t.AUDIO=r),s&&(n[t.SUBTITLES]=s,t.SUBTITLES=s);var l=to(e.uri,t["STABLE-VARIANT-ID"],"PER-VARIANT-URIS",o),u=new sr({attrs:t,audioCodec:e.audioCodec,bitrate:e.bitrate,height:e.height,name:e.name,url:l,videoCodec:e.videoCodec,width:e.width});if(e.audioGroups)for(var d=1;d<e.audioGroups.length;d++)u.addGroupId("audio",e.audioGroups[d]+"_clone_"+a);if(e.subtitleGroups)for(var h=1;h<e.subtitleGroups.length;h++)u.addGroupId("text",e.subtitleGroups[h]+"_clone_"+a);return u}));r.push.apply(r,l),eo(t.audioTracks,i,o,a),eo(t.subtitleTracks,n,o,a);}}));}},r.loadSteeringManifest=function(e){var t,r=this,i=this.hls.config,n=i.loader;this.loader&&this.loader.destroy(),this.loader=new n(i);try{t=new self.URL(e);}catch(t){return this.enabled=!1,void this.log("Failed to parse Steering Manifest URI: "+e)}if("data:"!==t.protocol){var a=0|(this.hls.bandwidthEstimate||i.abrEwmaDefaultEstimate);t.searchParams.set("_HLS_pathway",this.pathwayId),t.searchParams.set("_HLS_throughput",""+a);}var s={responseType:"json",url:t.href},o=i.steeringManifestLoadPolicy.default,l=o.errorRetry||o.timeoutRetry||{},u={loadPolicy:o,timeout:o.maxLoadTimeMs,maxRetry:l.maxNumRetry||0,retryDelay:l.retryDelayMs||0,maxRetryDelay:l.maxRetryDelayMs||0},d={onSuccess:function(e,i,n,a){r.log('Loaded steering manifest: "'+t+'"');var s=e.data;if(1===(null==s?void 0:s.VERSION)){r.updated=performance.now(),r.timeToLoad=s.TTL;var o=s["RELOAD-URI"],l=s["PATHWAY-CLONES"],u=s["PATHWAY-PRIORITY"];if(o)try{r.uri=new self.URL(o,t).href;}catch(e){return r.enabled=!1,void r.log("Failed to parse Steering Manifest RELOAD-URI: "+o)}r.scheduleRefresh(r.uri||n.url),l&&r.clonePathways(l);var d={steeringManifest:s,url:t.toString()};r.hls.trigger(L.STEERING_MANIFEST_LOADED,d),u&&r.updatePathwayPriority(u);}else r.log("Steering VERSION "+s.VERSION+" not supported!");},onError:function(e,t,i,n){if(r.log("Error loading steering manifest: "+e.code+" "+e.text+" ("+t.url+")"),r.stopLoad(),410===e.code)return r.enabled=!1,void r.log("Steering manifest "+t.url+" no longer available");var a=1e3*r.timeToLoad;if(429!==e.code)r.scheduleRefresh(r.uri||t.url,a);else {var s=r.loader;if("function"==typeof(null==s?void 0:s.getResponseHeader)){var o=s.getResponseHeader("Retry-After");o&&(a=1e3*parseFloat(o));}r.log("Steering manifest "+t.url+" rate limited");}},onTimeout:function(e,t,i){r.log("Timeout loading steering manifest ("+t.url+")"),r.scheduleRefresh(r.uri||t.url);}};this.log("Requesting steering manifest: "+t),this.loader.load(s,u,d);},r.scheduleRefresh=function(e,t){var r=this;void 0===t&&(t=1e3*this.timeToLoad),this.clearTimeout(),this.reloadTimer=self.setTimeout((function(){var t,i=null==(t=r.hls)?void 0:t.media;!i||i.ended?r.scheduleRefresh(e,1e3*r.timeToLoad):r.loadSteeringManifest(e);}),t);},n(t,[{key:"pathwayPriority",get:function(){return this._pathwayPriority},set:function(e){this.updatePathwayPriority(e);}}])}(k);function eo(e,t,r,i){e&&Object.keys(t).forEach((function(n){var a=e.filter((function(e){return e.groupId===n})).map((function(e){var a=o({},e);return a.details=void 0,a.attrs=new G(a.attrs),a.url=a.attrs.URI=to(e.url,e.attrs["STABLE-RENDITION-ID"],"PER-RENDITION-URIS",r),a.groupId=a.attrs["GROUP-ID"]=t[n],a.attrs["PATHWAY-ID"]=i,a}));e.push.apply(e,a);}));}function to(e,t,r,i){var n,a=i.HOST,s=i.PARAMS,o=i[r];t&&(n=null==o?void 0:o[t])&&(e=n);var l=new self.URL(e);return a&&!n&&(l.host=a),s&&Object.keys(s).sort().forEach((function(e){e&&l.searchParams.set(e,s[e]);})),l.href}var ro=/^age:\s*[\d.]+\s*$/im,io=function(){function e(e){this.xhrSetup=void 0,this.requestTimeout=void 0,this.retryTimeout=void 0,this.retryDelay=void 0,this.config=null,this.callbacks=null,this.context=null,this.loader=null,this.stats=void 0,this.xhrSetup=e&&e.xhrSetup||null,this.stats=new V,this.retryDelay=0;}var t=e.prototype;return t.destroy=function(){this.callbacks=null,this.abortInternal(),this.loader=null,this.config=null,this.context=null,this.xhrSetup=null;},t.abortInternal=function(){var e=this.loader;self.clearTimeout(this.requestTimeout),self.clearTimeout(this.retryTimeout),e&&(e.onreadystatechange=null,e.onprogress=null,4!==e.readyState&&(this.stats.aborted=!0,e.abort()));},t.abort=function(){var e;this.abortInternal(),null!=(e=this.callbacks)&&e.onAbort&&this.callbacks.onAbort(this.stats,this.context,this.loader);},t.load=function(e,t,r){if(this.stats.loading.start)throw new Error("Loader can only be used once.");this.stats.loading.start=self.performance.now(),this.context=e,this.config=t,this.callbacks=r,this.loadInternal();},t.loadInternal=function(){var e=this,t=this.config,r=this.context;if(t&&r){var i=this.loader=new self.XMLHttpRequest,n=this.stats;n.loading.first=0,n.loaded=0,n.aborted=!1;var a=this.xhrSetup;a?Promise.resolve().then((function(){if(e.loader===i&&!e.stats.aborted)return a(i,r.url)})).catch((function(t){if(e.loader===i&&!e.stats.aborted)return i.open("GET",r.url,!0),a(i,r.url)})).then((function(){e.loader!==i||e.stats.aborted||e.openAndSendXhr(i,r,t);})).catch((function(t){e.callbacks.onError({code:i.status,text:t.message},r,i,n);})):this.openAndSendXhr(i,r,t);}},t.openAndSendXhr=function(e,t,r){e.readyState||e.open("GET",t.url,!0);var i=t.headers,n=r.loadPolicy,a=n.maxTimeToFirstByteMs,s=n.maxLoadTimeMs;if(i)for(var o in i)e.setRequestHeader(o,i[o]);t.rangeEnd&&e.setRequestHeader("Range","bytes="+t.rangeStart+"-"+(t.rangeEnd-1)),e.onreadystatechange=this.readystatechange.bind(this),e.onprogress=this.loadprogress.bind(this),e.responseType=t.responseType,self.clearTimeout(this.requestTimeout),r.timeout=a&&E(a)?a:s,this.requestTimeout=self.setTimeout(this.loadtimeout.bind(this),r.timeout),e.send();},t.readystatechange=function(){var e=this.context,t=this.loader,r=this.stats;if(e&&t){var i=t.readyState,n=this.config;if(!r.aborted&&i>=2&&(0===r.loading.first&&(r.loading.first=Math.max(self.performance.now(),r.loading.start),n.timeout!==n.loadPolicy.maxLoadTimeMs&&(self.clearTimeout(this.requestTimeout),n.timeout=n.loadPolicy.maxLoadTimeMs,this.requestTimeout=self.setTimeout(this.loadtimeout.bind(this),n.loadPolicy.maxLoadTimeMs-(r.loading.first-r.loading.start)))),4===i)){self.clearTimeout(this.requestTimeout),t.onreadystatechange=null,t.onprogress=null;var a=t.status,s="text"!==t.responseType;if(a>=200&&a<300&&(s&&t.response||null!==t.responseText)){r.loading.end=Math.max(self.performance.now(),r.loading.first);var o=s?t.response:t.responseText,l="arraybuffer"===t.responseType?o.byteLength:o.length;if(r.loaded=r.total=l,r.bwEstimate=8e3*r.total/(r.loading.end-r.loading.first),!this.callbacks)return;var u=this.callbacks.onProgress;if(u&&u(r,e,o,t),!this.callbacks)return;var d={url:t.responseURL,data:o,code:a};this.callbacks.onSuccess(d,r,e,t);}else {var h=n.loadPolicy.errorRetry;Tr(h,r.retry,!1,{url:e.url,data:void 0,code:a})?this.retry(h):(P.error(a+" while loading "+e.url),this.callbacks.onError({code:a,text:t.statusText},e,t,r));}}}},t.loadtimeout=function(){if(this.config){var e=this.config.loadPolicy.timeoutRetry;if(Tr(e,this.stats.retry,!0))this.retry(e);else {var t;P.warn("timeout while loading "+(null==(t=this.context)?void 0:t.url));var r=this.callbacks;r&&(this.abortInternal(),r.onTimeout(this.stats,this.context,this.loader));}}},t.retry=function(e){var t=this.context,r=this.stats;this.retryDelay=yr(e,r.retry),r.retry++,P.warn((status?"HTTP Status "+status:"Timeout")+" while loading "+(null==t?void 0:t.url)+", retrying "+r.retry+"/"+e.maxNumRetry+" in "+this.retryDelay+"ms"),this.abortInternal(),this.loader=null,self.clearTimeout(this.retryTimeout),this.retryTimeout=self.setTimeout(this.loadInternal.bind(this),this.retryDelay);},t.loadprogress=function(e){var t=this.stats;t.loaded=e.loaded,e.lengthComputable&&(t.total=e.total);},t.getCacheAge=function(){var e=null;if(this.loader&&ro.test(this.loader.getAllResponseHeaders())){var t=this.loader.getResponseHeader("age");e=t?parseFloat(t):null;}return e},t.getResponseHeader=function(e){return this.loader&&new RegExp("^"+e+":\\s*[\\d.]+\\s*$","im").test(this.loader.getAllResponseHeaders())?this.loader.getResponseHeader(e):null},e}(),no=/(\d+)-(\d+)\/(\d+)/,ao=function(){function e(e){this.fetchSetup=void 0,this.requestTimeout=void 0,this.request=null,this.response=null,this.controller=void 0,this.context=null,this.config=null,this.callbacks=null,this.stats=void 0,this.loader=null,this.fetchSetup=e.fetchSetup||so,this.controller=new self.AbortController,this.stats=new V;}var t=e.prototype;return t.destroy=function(){this.loader=this.callbacks=this.context=this.config=this.request=null,this.abortInternal(),this.response=null,this.fetchSetup=this.controller=this.stats=null;},t.abortInternal=function(){this.controller&&!this.stats.loading.end&&(this.stats.aborted=!0,this.controller.abort());},t.abort=function(){var e;this.abortInternal(),null!=(e=this.callbacks)&&e.onAbort&&this.callbacks.onAbort(this.stats,this.context,this.response);},t.load=function(e,t,r){var i=this,n=this.stats;if(n.loading.start)throw new Error("Loader can only be used once.");n.loading.start=self.performance.now();var a=function(e,t){var r={method:"GET",mode:"cors",credentials:"same-origin",signal:t,headers:new self.Headers(o({},e.headers))};return e.rangeEnd&&r.headers.set("Range","bytes="+e.rangeStart+"-"+String(e.rangeEnd-1)),r}(e,this.controller.signal),s=r.onProgress,l="arraybuffer"===e.responseType,u=l?"byteLength":"length",d=t.loadPolicy,h=d.maxTimeToFirstByteMs,c=d.maxLoadTimeMs;this.context=e,this.config=t,this.callbacks=r,this.request=this.fetchSetup(e,a),self.clearTimeout(this.requestTimeout),t.timeout=h&&E(h)?h:c,this.requestTimeout=self.setTimeout((function(){i.abortInternal(),r.onTimeout(n,e,i.response);}),t.timeout),self.fetch(this.request).then((function(a){i.response=i.loader=a;var o=Math.max(self.performance.now(),n.loading.start);if(self.clearTimeout(i.requestTimeout),t.timeout=c,i.requestTimeout=self.setTimeout((function(){i.abortInternal(),r.onTimeout(n,e,i.response);}),c-(o-n.loading.start)),!a.ok){var u=a.status,d=a.statusText;throw new oo(d||"fetch, bad network response",u,a)}return n.loading.first=o,n.total=function(e){var t=e.get("Content-Range");if(t){var r=function(e){var t=no.exec(e);if(t)return parseInt(t[2])-parseInt(t[1])+1}(t);if(E(r))return r}var i=e.get("Content-Length");if(i)return parseInt(i)}(a.headers)||n.total,s&&E(t.highWaterMark)?i.loadProgressively(a,n,e,t.highWaterMark,s):l?a.arrayBuffer():"json"===e.responseType?a.json():a.text()})).then((function(a){var o=i.response;if(!o)throw new Error("loader destroyed");self.clearTimeout(i.requestTimeout),n.loading.end=Math.max(self.performance.now(),n.loading.first);var l=a[u];l&&(n.loaded=n.total=l);var d={url:o.url,data:a,code:o.status};s&&!E(t.highWaterMark)&&s(n,e,a,o),r.onSuccess(d,n,e,o);})).catch((function(t){if(self.clearTimeout(i.requestTimeout),!n.aborted){var a=t&&t.code||0,s=t?t.message:null;r.onError({code:a,text:s},e,t?t.details:null,n);}}));},t.getCacheAge=function(){var e=null;if(this.response){var t=this.response.headers.get("age");e=t?parseFloat(t):null;}return e},t.getResponseHeader=function(e){return this.response?this.response.headers.get(e):null},t.loadProgressively=function(e,t,r,i,n){void 0===i&&(i=0);var a=new xi,s=e.body.getReader();return function o(){return s.read().then((function(s){if(s.done)return a.dataLength&&n(t,r,a.flush(),e),Promise.resolve(new ArrayBuffer(0));var l=s.value,u=l.length;return t.loaded+=u,u<i||a.dataLength?(a.push(l),a.dataLength>=i&&n(t,r,a.flush(),e)):n(t,r,l,e),o()})).catch((function(){return Promise.reject()}))}()},e}();function so(e,t){return new self.Request(e.url,t)}var oo=function(e){function t(t,r,i){var n;return (n=e.call(this,t)||this).code=void 0,n.details=void 0,n.code=r,n.details=i,n}return u(t,e),t}(v(Error)),lo=/\s/,uo=c(c({autoStartLoad:!0,startPosition:-1,defaultAudioCodec:void 0,debug:!1,capLevelOnFPSDrop:!1,capLevelToPlayerSize:!1,ignoreDevicePixelRatio:!1,preferManagedMediaSource:!0,initialLiveManifestSize:1,maxBufferLength:30,backBufferLength:1/0,frontBufferFlushThreshold:1/0,maxBufferSize:6e7,maxBufferHole:.1,highBufferWatchdogPeriod:2,nudgeOffset:.1,nudgeMaxRetry:3,maxFragLookUpTolerance:.25,liveSyncDurationCount:3,liveSyncOnStallIncrease:1,liveMaxLatencyDurationCount:1/0,liveSyncDuration:void 0,liveMaxLatencyDuration:void 0,maxLiveSyncPlaybackRate:1,liveDurationInfinity:!1,liveBackBufferLength:null,maxMaxBufferLength:600,enableWorker:!0,workerPath:null,enableSoftwareAES:!0,startLevel:void 0,startFragPrefetch:!1,fpsDroppedMonitoringPeriod:5e3,fpsDroppedMonitoringThreshold:.2,appendErrorMaxRetry:3,loader:io,fLoader:void 0,pLoader:void 0,xhrSetup:void 0,licenseXhrSetup:void 0,licenseResponseCallback:void 0,abrController:qr,bufferController:va,capLevelController:hs,errorController:xr,fpsController:cs,stretchShortVideoTrack:!1,maxAudioFramesDrift:1,forceKeyFrameOnDiscontinuity:!0,abrEwmaFastLive:3,abrEwmaSlowLive:9,abrEwmaFastVoD:3,abrEwmaSlowVoD:9,abrEwmaDefaultEstimate:5e5,abrEwmaDefaultEstimateMax:5e6,abrBandWidthFactor:.95,abrBandWidthUpFactor:.7,abrMaxWithRealBitrate:!1,maxStarvationDelay:4,maxLoadingDelay:4,minAutoBitrate:0,emeEnabled:!1,widevineLicenseUrl:void 0,drmSystems:{},drmSystemOptions:{},requestMediaKeySystemAccessFunc:ve,testBandwidth:!0,progressive:!1,lowLatencyMode:!0,cmcd:void 0,enableDateRangeMetadataCues:!0,enableEmsgMetadataCues:!0,enableID3MetadataCues:!0,useMediaCapabilities:!0,certLoadPolicy:{default:{maxTimeToFirstByteMs:8e3,maxLoadTimeMs:2e4,timeoutRetry:null,errorRetry:null}},keyLoadPolicy:{default:{maxTimeToFirstByteMs:8e3,maxLoadTimeMs:2e4,timeoutRetry:{maxNumRetry:1,retryDelayMs:1e3,maxRetryDelayMs:2e4,backoff:"linear"},errorRetry:{maxNumRetry:8,retryDelayMs:1e3,maxRetryDelayMs:2e4,backoff:"linear"}}},manifestLoadPolicy:{default:{maxTimeToFirstByteMs:1/0,maxLoadTimeMs:2e4,timeoutRetry:{maxNumRetry:2,retryDelayMs:0,maxRetryDelayMs:0},errorRetry:{maxNumRetry:1,retryDelayMs:1e3,maxRetryDelayMs:8e3}}},playlistLoadPolicy:{default:{maxTimeToFirstByteMs:1e4,maxLoadTimeMs:2e4,timeoutRetry:{maxNumRetry:2,retryDelayMs:0,maxRetryDelayMs:0},errorRetry:{maxNumRetry:2,retryDelayMs:1e3,maxRetryDelayMs:8e3}}},fragLoadPolicy:{default:{maxTimeToFirstByteMs:1e4,maxLoadTimeMs:12e4,timeoutRetry:{maxNumRetry:4,retryDelayMs:0,maxRetryDelayMs:0},errorRetry:{maxNumRetry:6,retryDelayMs:1e3,maxRetryDelayMs:8e3}}},steeringManifestLoadPolicy:{default:{maxTimeToFirstByteMs:1e4,maxLoadTimeMs:2e4,timeoutRetry:{maxNumRetry:2,retryDelayMs:0,maxRetryDelayMs:0},errorRetry:{maxNumRetry:1,retryDelayMs:1e3,maxRetryDelayMs:8e3}}},manifestLoadingTimeOut:1e4,manifestLoadingMaxRetry:1,manifestLoadingRetryDelay:1e3,manifestLoadingMaxRetryTimeout:64e3,levelLoadingTimeOut:1e4,levelLoadingMaxRetry:4,levelLoadingRetryDelay:1e3,levelLoadingMaxRetryTimeout:64e3,fragLoadingTimeOut:2e4,fragLoadingMaxRetry:6,fragLoadingRetryDelay:1e3,fragLoadingMaxRetryTimeout:64e3},{cueHandler:{newCue:function(e,t,r,i){for(var n,a,s,o,l,u=[],d=self.VTTCue||self.TextTrackCue,h=0;h<i.rows.length;h++)if(s=!0,o=0,l="",!(n=i.rows[h]).isEmpty()){for(var c,f=0;f<n.chars.length;f++)lo.test(n.chars[f].uchar)&&s?o++:(l+=n.chars[f].uchar,s=!1);n.cueStartTime=t,t===r&&(r+=1e-4),o>=16?o--:o++;var g=Ya(l.trim()),v=za(t,r,g);null!=e&&null!=(c=e.cues)&&c.getCueById(v)||((a=new d(t,r,g)).id=v,a.line=h+1,a.align="left",a.position=10+Math.min(80,10*Math.floor(8*o/32)),u.push(a));}return e&&u.length&&(u.sort((function(e,t){return "auto"===e.line||"auto"===t.line?0:e.line>8&&t.line>8?t.line-e.line:e.line-t.line})),u.forEach((function(t){return It(e,t)}))),u}},enableWebVTT:!0,enableIMSC1:!0,enableCEA708Captions:!0,captionsTextTrack1Label:"English",captionsTextTrack1LanguageCode:"en",captionsTextTrack2Label:"Spanish",captionsTextTrack2LanguageCode:"es",captionsTextTrack3Label:"Unknown CC",captionsTextTrack3LanguageCode:"",captionsTextTrack4Label:"Unknown CC",captionsTextTrack4LanguageCode:"",renderTextTracksNatively:!0}),{},{subtitleStreamController:da,subtitleTrackController:ca,timelineController:ls,audioStreamController:la,audioTrackController:ua,emeController:fs,cmcdController:$s,contentSteeringController:Zs});function ho(e){return e&&"object"==typeof e?Array.isArray(e)?e.map(ho):Object.keys(e).reduce((function(t,r){return t[r]=ho(e[r]),t}),{}):e}function co(e,t){var r=e.loader;r!==ao&&r!==io?(t.log("[config]: Custom loader detected, cannot enable progressive streaming"),e.progressive=!1):function(){if(self.fetch&&self.AbortController&&self.ReadableStream&&self.Request)try{return new self.ReadableStream({}),!0}catch(e){}return !1}()&&(e.loader=ao,e.progressive=!0,e.enableSoftwareAES=!0,t.log("[config]: Progressive streaming enabled, using FetchLoader"));}var fo=function(e){function t(t,r){var i;return (i=e.call(this,t,"level-controller")||this)._levels=[],i._firstLevel=-1,i._maxAutoLevel=-1,i._startLevel=void 0,i.currentLevel=null,i.currentLevelIndex=-1,i.manualLevelIndex=-1,i.steering=void 0,i.onParsedComplete=void 0,i.steering=r,i._registerListeners(),i}u(t,e);var r=t.prototype;return r._registerListeners=function(){var e=this.hls;e.on(L.MANIFEST_LOADING,this.onManifestLoading,this),e.on(L.MANIFEST_LOADED,this.onManifestLoaded,this),e.on(L.LEVEL_LOADED,this.onLevelLoaded,this),e.on(L.LEVELS_UPDATED,this.onLevelsUpdated,this),e.on(L.FRAG_BUFFERED,this.onFragBuffered,this),e.on(L.ERROR,this.onError,this);},r._unregisterListeners=function(){var e=this.hls;e.off(L.MANIFEST_LOADING,this.onManifestLoading,this),e.off(L.MANIFEST_LOADED,this.onManifestLoaded,this),e.off(L.LEVEL_LOADED,this.onLevelLoaded,this),e.off(L.LEVELS_UPDATED,this.onLevelsUpdated,this),e.off(L.FRAG_BUFFERED,this.onFragBuffered,this),e.off(L.ERROR,this.onError,this);},r.destroy=function(){this._unregisterListeners(),this.steering=null,this.resetLevels(),e.prototype.destroy.call(this);},r.stopLoad=function(){this._levels.forEach((function(e){e.loadError=0,e.fragmentError=0;})),e.prototype.stopLoad.call(this);},r.resetLevels=function(){this._startLevel=void 0,this.manualLevelIndex=-1,this.currentLevelIndex=-1,this.currentLevel=null,this._levels=[],this._maxAutoLevel=-1;},r.onManifestLoading=function(e,t){this.resetLevels();},r.onManifestLoaded=function(e,t){var r=this.hls.config.preferManagedMediaSource,i=[],n={},a={},s=!1,o=!1,l=!1;t.levels.forEach((function(e){var t,u=e.attrs,d=e.audioCodec,h=e.videoCodec;d&&(e.audioCodec=d=et(d,r)||void 0),0===(null==(t=h)?void 0:t.indexOf("avc1"))&&(h=e.videoCodec=function(e){for(var t=e.split(","),r=0;r<t.length;r++){var i=t[r].split(".");if(i.length>2){var n=i.shift()+".";n+=parseInt(i.shift()).toString(16),n+=("000"+parseInt(i.shift()).toString(16)).slice(-4),t[r]=n;}}return t.join(",")}(h));var c=e.width,f=e.height,g=e.unknownCodecs;if(s||(s=!(!c||!f)),o||(o=!!h),l||(l=!!d),!(null!=g&&g.length||d&&!qe(d,"audio",r)||h&&!qe(h,"video",r))){var v=u.CODECS,m=u["FRAME-RATE"],p=u["HDCP-LEVEL"],y=u["PATHWAY-ID"],E=u.RESOLUTION,T=u["VIDEO-RANGE"],S=(y||".")+"-"+e.bitrate+"-"+E+"-"+m+"-"+v+"-"+T+"-"+p;if(n[S])if(n[S].uri===e.url||e.attrs["PATHWAY-ID"])n[S].addGroupId("audio",u.AUDIO),n[S].addGroupId("text",u.SUBTITLES);else {var L=a[S]+=1;e.attrs["PATHWAY-ID"]=new Array(L+1).join(".");var A=new sr(e);n[S]=A,i.push(A);}else {var R=new sr(e);n[S]=R,a[S]=1,i.push(R);}}})),this.filterAndSortMediaOptions(i,t,s,o,l);},r.filterAndSortMediaOptions=function(e,t,r,i,n){var a=this,s=[],o=[],l=e;if((r||i)&&n&&(l=l.filter((function(e){var t,r=e.videoCodec,i=e.videoRange,n=e.width,a=e.height;return (!!r||!(!n||!a))&&!!(t=i)&&er.indexOf(t)>-1}))),0!==l.length){if(t.audioTracks){var u=this.hls.config.preferManagedMediaSource;go(s=t.audioTracks.filter((function(e){return !e.audioCodec||qe(e.audioCodec,"audio",u)})));}t.subtitles&&go(o=t.subtitles);var d=l.slice(0);l.sort((function(e,t){if(e.attrs["HDCP-LEVEL"]!==t.attrs["HDCP-LEVEL"])return (e.attrs["HDCP-LEVEL"]||"")>(t.attrs["HDCP-LEVEL"]||"")?1:-1;if(r&&e.height!==t.height)return e.height-t.height;if(e.frameRate!==t.frameRate)return e.frameRate-t.frameRate;if(e.videoRange!==t.videoRange)return er.indexOf(e.videoRange)-er.indexOf(t.videoRange);if(e.videoCodec!==t.videoCodec){var i=Qe(e.videoCodec),n=Qe(t.videoCodec);if(i!==n)return n-i}if(e.uri===t.uri&&e.codecSet!==t.codecSet){var a=Je(e.codecSet),s=Je(t.codecSet);if(a!==s)return s-a}return e.averageBitrate!==t.averageBitrate?e.averageBitrate-t.averageBitrate:0}));var h=d[0];if(this.steering&&(l=this.steering.filterParsedLevels(l)).length!==d.length)for(var c=0;c<d.length;c++)if(d[c].pathwayId===l[0].pathwayId){h=d[c];break}this._levels=l;for(var f=0;f<l.length;f++)if(l[f]===h){var g;this._firstLevel=f;var v=h.bitrate,m=this.hls.bandwidthEstimate;if(this.log("manifest loaded, "+l.length+" level(s) found, first bitrate: "+v),void 0===(null==(g=this.hls.userConfig)?void 0:g.abrEwmaDefaultEstimate)){var p=Math.min(v,this.hls.config.abrEwmaDefaultEstimateMax);p>m&&m===uo.abrEwmaDefaultEstimate&&(this.hls.bandwidthEstimate=p);}break}var y=n&&!i,E={levels:l,audioTracks:s,subtitleTracks:o,sessionData:t.sessionData,sessionKeys:t.sessionKeys,firstLevel:this._firstLevel,stats:t.stats,audio:n,video:i,altAudio:!y&&s.some((function(e){return !!e.url}))};this.hls.trigger(L.MANIFEST_PARSED,E),(this.hls.config.autoStartLoad||this.hls.forceStartLoad)&&this.hls.startLoad(this.hls.config.startPosition);}else Promise.resolve().then((function(){if(a.hls){t.levels.length&&a.warn("One or more CODECS in variant not supported: "+JSON.stringify(t.levels[0].attrs));var e=new Error("no level with compatible codecs found in manifest");a.hls.trigger(L.ERROR,{type:A.MEDIA_ERROR,details:R.MANIFEST_INCOMPATIBLE_CODECS_ERROR,fatal:!0,url:t.url,error:e,reason:e.message});}}));},r.onError=function(e,t){!t.fatal&&t.context&&t.context.type===Et&&t.context.level===this.level&&this.checkRetry(t);},r.onFragBuffered=function(e,t){var r=t.frag;if(void 0!==r&&r.type===Lt){var i=r.elementaryStreams;if(!Object.keys(i).some((function(e){return !!i[e]})))return;var n=this._levels[r.level];null!=n&&n.loadError&&(this.log("Resetting level error count of "+n.loadError+" on frag buffered"),n.loadError=0);}},r.onLevelLoaded=function(e,t){var r,i,n=t.level,a=t.details,s=this._levels[n];if(!s)return this.warn("Invalid level index "+n),void(null!=(i=t.deliveryDirectives)&&i.skip&&(a.deltaUpdateFailed=!0));if(n===this.currentLevelIndex){0===s.fragmentError&&(s.loadError=0);var o=s.details;o===t.details&&o.advanced&&(o=void 0),this.playlistLoaded(n,t,o);}else null!=(r=t.deliveryDirectives)&&r.skip&&(a.deltaUpdateFailed=!0);},r.loadPlaylist=function(t){e.prototype.loadPlaylist.call(this);var r=this.currentLevelIndex,i=this.currentLevel;if(i&&this.shouldLoadPlaylist(i)){var n=i.uri;if(t)try{n=t.addDirectives(n);}catch(e){this.warn("Could not construct new URL with HLS Delivery Directives: "+e);}var a=i.attrs["PATHWAY-ID"];this.log("Loading level index "+r+(void 0!==(null==t?void 0:t.msn)?" at sn "+t.msn+" part "+t.part:"")+" with"+(a?" Pathway "+a:"")+" "+n),this.clearTimer(),this.hls.trigger(L.LEVEL_LOADING,{url:n,level:r,pathwayId:i.attrs["PATHWAY-ID"],id:0,deliveryDirectives:t||null});}},r.removeLevel=function(e){var t,r=this,i=this._levels.filter((function(t,i){return i!==e||(r.steering&&r.steering.removeLevel(t),t===r.currentLevel&&(r.currentLevel=null,r.currentLevelIndex=-1,t.details&&t.details.fragments.forEach((function(e){return e.level=-1}))),!1)}));vr(i),this._levels=i,this.currentLevelIndex>-1&&null!=(t=this.currentLevel)&&t.details&&(this.currentLevelIndex=this.currentLevel.details.fragments[0].level),this.hls.trigger(L.LEVELS_UPDATED,{levels:i});},r.onLevelsUpdated=function(e,t){var r=t.levels;this._levels=r;},r.checkMaxAutoUpdated=function(){var e=this.hls,t=e.autoLevelCapping,r=e.maxAutoLevel,i=e.maxHdcpLevel;this._maxAutoLevel!==r&&(this._maxAutoLevel=r,this.hls.trigger(L.MAX_AUTO_LEVEL_UPDATED,{autoLevelCapping:t,levels:this.levels,maxAutoLevel:r,minAutoLevel:this.hls.minAutoLevel,maxHdcpLevel:i}));},n(t,[{key:"levels",get:function(){return 0===this._levels.length?null:this._levels}},{key:"level",get:function(){return this.currentLevelIndex},set:function(e){var t=this._levels;if(0!==t.length){if(e<0||e>=t.length){var r=new Error("invalid level idx"),i=e<0;if(this.hls.trigger(L.ERROR,{type:A.OTHER_ERROR,details:R.LEVEL_SWITCH_ERROR,level:e,fatal:i,error:r,reason:r.message}),i)return;e=Math.min(e,t.length-1);}var n=this.currentLevelIndex,a=this.currentLevel,s=a?a.attrs["PATHWAY-ID"]:void 0,o=t[e],l=o.attrs["PATHWAY-ID"];if(this.currentLevelIndex=e,this.currentLevel=o,n!==e||!o.details||!a||s!==l){this.log("Switching to level "+e+" ("+(o.height?o.height+"p ":"")+(o.videoRange?o.videoRange+" ":"")+(o.codecSet?o.codecSet+" ":"")+"@"+o.bitrate+")"+(l?" with Pathway "+l:"")+" from level "+n+(s?" with Pathway "+s:""));var u={level:e,attrs:o.attrs,details:o.details,bitrate:o.bitrate,averageBitrate:o.averageBitrate,maxBitrate:o.maxBitrate,realBitrate:o.realBitrate,width:o.width,height:o.height,codecSet:o.codecSet,audioCodec:o.audioCodec,videoCodec:o.videoCodec,audioGroups:o.audioGroups,subtitleGroups:o.subtitleGroups,loaded:o.loaded,loadError:o.loadError,fragmentError:o.fragmentError,name:o.name,id:o.id,uri:o.uri,url:o.url,urlId:0,audioGroupIds:o.audioGroupIds,textGroupIds:o.textGroupIds};this.hls.trigger(L.LEVEL_SWITCHING,u);var d=o.details;if(!d||d.live){var h=this.switchParams(o.uri,null==a?void 0:a.details,d);this.loadPlaylist(h);}}}}},{key:"manualLevel",get:function(){return this.manualLevelIndex},set:function(e){this.manualLevelIndex=e,void 0===this._startLevel&&(this._startLevel=e),-1!==e&&(this.level=e);}},{key:"firstLevel",get:function(){return this._firstLevel},set:function(e){this._firstLevel=e;}},{key:"startLevel",get:function(){if(void 0===this._startLevel){var e=this.hls.config.startLevel;return void 0!==e?e:this.hls.firstAutoLevel}return this._startLevel},set:function(e){this._startLevel=e;}},{key:"pathwayPriority",get:function(){return this.steering?this.steering.pathwayPriority:null},set:function(e){if(this.steering){var t=this.steering.pathways(),r=e.filter((function(e){return -1!==t.indexOf(e)}));if(e.length<1)return void this.warn("pathwayPriority "+e+" should contain at least one pathway from list: "+t);this.steering.pathwayPriority=r;}}},{key:"nextLoadLevel",get:function(){return -1!==this.manualLevelIndex?this.manualLevelIndex:this.hls.nextAutoLevel},set:function(e){this.level=e,-1===this.manualLevelIndex&&(this.hls.nextAutoLevel=e);}}])}(Mr);function go(e){var t={};e.forEach((function(e){var r=e.groupId||"";e.id=t[r]=t[r]||0,t[r]++;}));}var vo=function(){function e(e){this.config=void 0,this.keyUriToKeyInfo={},this.emeController=null,this.config=e;}var t=e.prototype;return t.abort=function(e){for(var t in this.keyUriToKeyInfo){var r=this.keyUriToKeyInfo[t].loader;if(r){var i;if(e&&e!==(null==(i=r.context)?void 0:i.frag.type))return;r.abort();}}},t.detach=function(){for(var e in this.keyUriToKeyInfo){var t=this.keyUriToKeyInfo[e];(t.mediaKeySessionContext||t.decryptdata.isCommonEncryption)&&delete this.keyUriToKeyInfo[e];}},t.destroy=function(){for(var e in this.detach(),this.keyUriToKeyInfo){var t=this.keyUriToKeyInfo[e].loader;t&&t.destroy();}this.keyUriToKeyInfo={};},t.createKeyLoadError=function(e,t,r,i,n){return void 0===t&&(t=R.KEY_LOAD_ERROR),new gi({type:A.NETWORK_ERROR,details:t,fatal:!1,frag:e,response:n,error:r,networkDetails:i})},t.loadClear=function(e,t){var r=this;if(this.emeController&&this.config.emeEnabled)for(var i=e.sn,n=e.cc,a=function(){var e=t[s];if(n<=e.cc&&("initSegment"===i||"initSegment"===e.sn||i<e.sn))return r.emeController.selectKeySystemFormat(e).then((function(t){e.setKeyFormat(t);})),1},s=0;s<t.length&&!a();s++);},t.load=function(e){var t=this;return !e.decryptdata&&e.encrypted&&this.emeController?this.emeController.selectKeySystemFormat(e).then((function(r){return t.loadInternal(e,r)})):this.loadInternal(e)},t.loadInternal=function(e,t){var r,i;t&&e.setKeyFormat(t);var n=e.decryptdata;if(!n){var a=new Error(t?"Expected frag.decryptdata to be defined after setting format "+t:"Missing decryption data on fragment in onKeyLoading");return Promise.reject(this.createKeyLoadError(e,R.KEY_LOAD_ERROR,a))}var s=n.uri;if(!s)return Promise.reject(this.createKeyLoadError(e,R.KEY_LOAD_ERROR,new Error('Invalid key URI: "'+s+'"')));var o,l=this.keyUriToKeyInfo[s];if(null!=(r=l)&&r.decryptdata.key)return n.key=l.decryptdata.key,Promise.resolve({frag:e,keyInfo:l});if(null!=(i=l)&&i.keyLoadPromise)switch(null==(o=l.mediaKeySessionContext)?void 0:o.keyStatus){case void 0:case"status-pending":case"usable":case"usable-in-future":return l.keyLoadPromise.then((function(t){return n.key=t.keyInfo.decryptdata.key,{frag:e,keyInfo:l}}))}switch(l=this.keyUriToKeyInfo[s]={decryptdata:n,keyLoadPromise:null,loader:null,mediaKeySessionContext:null},n.method){case"ISO-23001-7":case"SAMPLE-AES":case"SAMPLE-AES-CENC":case"SAMPLE-AES-CTR":return "identity"===n.keyFormat?this.loadKeyHTTP(l,e):this.loadKeyEME(l,e);case"AES-128":case"AES-256":case"AES-256-CTR":return this.loadKeyHTTP(l,e);default:return Promise.reject(this.createKeyLoadError(e,R.KEY_LOAD_ERROR,new Error('Key supplied with unsupported METHOD: "'+n.method+'"')))}},t.loadKeyEME=function(e,t){var r={frag:t,keyInfo:e};if(this.emeController&&this.config.emeEnabled){var i=this.emeController.loadKey(r);if(i)return (e.keyLoadPromise=i.then((function(t){return e.mediaKeySessionContext=t,r}))).catch((function(t){throw e.keyLoadPromise=null,t}))}return Promise.resolve(r)},t.loadKeyHTTP=function(e,t){var r=this,i=this.config,n=new(i.loader)(i);return t.keyLoader=e.loader=n,e.keyLoadPromise=new Promise((function(a,s){var o={keyInfo:e,frag:t,responseType:"arraybuffer",url:e.decryptdata.uri},l=i.keyLoadPolicy.default,u={loadPolicy:l,timeout:l.maxLoadTimeMs,maxRetry:0,retryDelay:0,maxRetryDelay:0},d={onSuccess:function(e,t,i,n){var o=i.frag,l=i.keyInfo,u=i.url;if(!o.decryptdata||l!==r.keyUriToKeyInfo[u])return s(r.createKeyLoadError(o,R.KEY_LOAD_ERROR,new Error("after key load, decryptdata unset or changed"),n));l.decryptdata.key=o.decryptdata.key=new Uint8Array(e.data),o.keyLoader=null,l.loader=null,a({frag:o,keyInfo:l});},onError:function(e,i,n,a){r.resetLoader(i),s(r.createKeyLoadError(t,R.KEY_LOAD_ERROR,new Error("HTTP Error "+e.code+" loading key "+e.text),n,c({url:o.url,data:void 0},e)));},onTimeout:function(e,i,n){r.resetLoader(i),s(r.createKeyLoadError(t,R.KEY_LOAD_TIMEOUT,new Error("key loading timed out"),n));},onAbort:function(e,i,n){r.resetLoader(i),s(r.createKeyLoadError(t,R.INTERNAL_ABORTED,new Error("key loading aborted"),n));}};n.load(o,u,d);}))},t.resetLoader=function(e){var t=e.frag,r=e.keyInfo,i=e.url,n=r.loader;t.keyLoader===n&&(t.keyLoader=null,r.loader=null),delete this.keyUriToKeyInfo[i],n&&n.destroy();},e}();function mo(){return self.SourceBuffer||self.WebKitSourceBuffer}function po(){if(!We())return !1;var e=mo();return !e||e.prototype&&"function"==typeof e.prototype.appendBuffer&&"function"==typeof e.prototype.remove}var yo=function(e){function t(t,r,i,n){var a;return (a=e.call(this,"gap-controller",n.logger)||this).config=void 0,a.media=null,a.fragmentTracker=void 0,a.hls=void 0,a.nudgeRetry=0,a.stallReported=!1,a.stalled=null,a.moved=!1,a.seeking=!1,a.ended=0,a.config=t,a.media=r,a.fragmentTracker=i,a.hls=n,a}u(t,e);var r=t.prototype;return r.destroy=function(){this.media=null,this.hls=this.fragmentTracker=null;},r.poll=function(e,t,r,i){var n=this.config,a=this.media,s=this.stalled;if(null!==a){var o=a.currentTime,l=a.seeking,u=this.seeking&&!l,d=!this.seeking&&l;if(this.seeking=l,o===e)if(d||u)this.stalled=null;else if(a.paused&&!l||a.ended||0===a.playbackRate||!ii.getBuffered(a).length)this.nudgeRetry=0;else {var h=ii.bufferInfo(a,o,0),c=h.nextStart||0;if(l){var f=h.len>2,g=!c||t&&t.start<=o||c-o>2&&!this.fragmentTracker.getPartialFragment(o);if(f||g)return;this.moved=!1;}if(!this.moved&&null!==this.stalled){if(!(h.len>0||c))return;var v=Math.max(c,h.start||0)-o,m=null!=r&&r.live?2*r.targetduration:2,p=this.fragmentTracker.getPartialFragment(o);if(v>0&&(v<=m||p))return void(a.paused||this._trySkipBufferHole(p))}var y=self.performance.now();if(null!==s){var E=y-s;if(!l&&E>=250){if(i===wi&&(null==r||!r.live)&&Math.abs(o-((null==r?void 0:r.edge)||0))<1){if(E<1e3||this.ended)return;return this.ended=o,void this.hls.trigger(L.MEDIA_ENDED,{stalled:!0})}if(this._reportStall(h),!this.media)return}var T=ii.bufferInfo(a,o,n.maxBufferHole);this._tryFixBufferStall(T,E);}else this.stalled=y;}else if(this.ended=0,this.moved=!0,l||(this.nudgeRetry=0),null!==s){if(this.stallReported){var S=self.performance.now()-s;this.warn("playback not stuck anymore @"+o+", after "+Math.round(S)+"ms"),this.stallReported=!1;}this.stalled=null;}}},r._tryFixBufferStall=function(e,t){var r=this.config,i=this.fragmentTracker,n=this.media;if(null!==n){var a=n.currentTime,s=i.getPartialFragment(a);if(s&&(this._trySkipBufferHole(s)||!this.media))return;(e.len>r.maxBufferHole||e.nextStart&&e.nextStart-a<r.maxBufferHole)&&t>1e3*r.highBufferWatchdogPeriod&&(this.warn("Trying to nudge playhead over buffer-hole"),this.stalled=null,this._tryNudgeBuffer());}},r._reportStall=function(e){var t=this.hls,r=this.media;if(!this.stallReported&&r){this.stallReported=!0;var i=new Error("Playback stalling at @"+r.currentTime+" due to low buffer ("+JSON.stringify(e)+")");this.warn(i.message),t.trigger(L.ERROR,{type:A.MEDIA_ERROR,details:R.BUFFER_STALLED_ERROR,fatal:!1,error:i,buffer:e.len});}},r._trySkipBufferHole=function(e){var t=this.config,r=this.hls,i=this.media;if(null===i)return 0;var n=i.currentTime,a=ii.bufferInfo(i,n,0),s=n<a.start?a.start:a.nextStart;if(s){var o=a.len<=t.maxBufferHole,l=a.len>0&&a.len<1&&i.readyState<3,u=s-n;if(u>0&&(o||l)){if(u>t.maxBufferHole){var d=this.fragmentTracker,h=!1;if(0===n){var c=d.getAppendedFrag(0,Lt);c&&s<c.end&&(h=!0);}if(!h){var f=e||d.getAppendedFrag(n,Lt);if(f){for(var g=!1,v=f.end;v<s;){var m=d.getPartialFragment(v);if(!m){g=!0;break}v+=m.duration;}if(g)return 0}}}var p=Math.max(s+.05,n+.1);if(this.warn("skipping hole, adjusting currentTime from "+n+" to "+p),this.moved=!0,this.stalled=null,i.currentTime=p,e&&!e.gap){var y=new Error("fragment loaded with buffer holes, seeking from "+n+" to "+p);r.trigger(L.ERROR,{type:A.MEDIA_ERROR,details:R.BUFFER_SEEK_OVER_HOLE,fatal:!1,error:y,reason:y.message,frag:e});}return p}}return 0},r._tryNudgeBuffer=function(){var e=this.config,t=this.hls,r=this.media,i=this.nudgeRetry;if(null!==r){var n=r.currentTime;if(this.nudgeRetry++,i<e.nudgeMaxRetry){var a=n+(i+1)*e.nudgeOffset,s=new Error("Nudging 'currentTime' from "+n+" to "+a);this.warn(s.message),r.currentTime=a,t.trigger(L.ERROR,{type:A.MEDIA_ERROR,details:R.BUFFER_NUDGE_ON_STALL,error:s,fatal:!1});}else {var o=new Error("Playhead still not moving while enough data buffered @"+n+" after "+e.nudgeMaxRetry+" nudges");this.error(o.message),t.trigger(L.ERROR,{type:A.MEDIA_ERROR,details:R.BUFFER_STALLED_ERROR,error:o,fatal:!0});}}},t}(k),Eo=function(e){function t(t,r,i){var n;return (n=e.call(this,t,r,i,"stream-controller",Lt)||this).audioCodecSwap=!1,n.gapController=null,n.level=-1,n._forceStartLoad=!1,n.altAudio=!1,n.audioOnly=!1,n.fragPlaying=null,n.fragLastKbps=0,n.couldBacktrack=!1,n.backtrackFragment=null,n.audioCodecSwitch=!1,n.videoBuffer=null,n.onMediaPlaying=function(){n.tick();},n.onMediaSeeked=function(){var e=n.media,t=e?e.currentTime:null;E(t)&&n.log("Media seeked to "+t.toFixed(3));var r=n.getMainFwdBufferInfo();null!==r&&0!==r.len?n.tick():n.warn('Main forward buffer length on "seeked" event '+(r?r.len:"empty")+")");},n.registerListeners(),n}u(t,e);var r=t.prototype;return r.registerListeners=function(){e.prototype.registerListeners.call(this);var t=this.hls;t.on(L.MANIFEST_PARSED,this.onManifestParsed,this),t.on(L.LEVEL_LOADING,this.onLevelLoading,this),t.on(L.LEVEL_LOADED,this.onLevelLoaded,this),t.on(L.FRAG_LOAD_EMERGENCY_ABORTED,this.onFragLoadEmergencyAborted,this),t.on(L.AUDIO_TRACK_SWITCHING,this.onAudioTrackSwitching,this),t.on(L.AUDIO_TRACK_SWITCHED,this.onAudioTrackSwitched,this),t.on(L.BUFFER_CREATED,this.onBufferCreated,this),t.on(L.BUFFER_FLUSHED,this.onBufferFlushed,this),t.on(L.LEVELS_UPDATED,this.onLevelsUpdated,this),t.on(L.FRAG_BUFFERED,this.onFragBuffered,this);},r.unregisterListeners=function(){e.prototype.unregisterListeners.call(this);var t=this.hls;t.off(L.MANIFEST_PARSED,this.onManifestParsed,this),t.off(L.LEVEL_LOADED,this.onLevelLoaded,this),t.off(L.FRAG_LOAD_EMERGENCY_ABORTED,this.onFragLoadEmergencyAborted,this),t.off(L.AUDIO_TRACK_SWITCHING,this.onAudioTrackSwitching,this),t.off(L.AUDIO_TRACK_SWITCHED,this.onAudioTrackSwitched,this),t.off(L.BUFFER_CREATED,this.onBufferCreated,this),t.off(L.BUFFER_FLUSHED,this.onBufferFlushed,this),t.off(L.LEVELS_UPDATED,this.onLevelsUpdated,this),t.off(L.FRAG_BUFFERED,this.onFragBuffered,this);},r.onHandlerDestroying=function(){this.onMediaPlaying=this.onMediaSeeked=null,this.unregisterListeners(),e.prototype.onHandlerDestroying.call(this);},r.startLoad=function(e){if(this.levels){var t=this.lastCurrentTime,r=this.hls;if(this.stopLoad(),this.setInterval(100),this.level=-1,!this.startFragRequested){var i=r.startLevel;-1===i&&(r.config.testBandwidth&&this.levels.length>1?(i=0,this.bitrateTest=!0):i=r.firstAutoLevel),r.nextLoadLevel=i,this.level=r.loadLevel,this.loadedmetadata=!1;}t>0&&-1===e&&(this.log("Override startPosition with lastCurrentTime @"+t.toFixed(3)),e=t),this.state=Si,this.nextLoadPosition=this.startPosition=this.lastCurrentTime=e,this.tick();}else this._forceStartLoad=!0,this.state=Ti;},r.stopLoad=function(){this._forceStartLoad=!1,e.prototype.stopLoad.call(this);},r.doTick=function(){switch(this.state){case _i:var e=this.levels,t=this.level,r=null==e?void 0:e[t],i=null==r?void 0:r.details;if(i&&(!i.live||this.levelLastLoaded===r)){if(this.waitForCdnTuneIn(i))break;this.state=Si;break}if(this.hls.nextLoadLevel!==this.level){this.state=Si;break}break;case Ri:var n,a=self.performance.now(),s=this.retryDate;if(!s||a>=s||null!=(n=this.media)&&n.seeking){var o=this.levels,l=this.level,u=null==o?void 0:o[l];this.resetStartWhenNotLoaded(u||null),this.state=Si;}}this.state===Si&&this.doTickIdle(),this.onTickEnd();},r.onTickEnd=function(){e.prototype.onTickEnd.call(this),this.checkBuffer(),this.checkFragmentChanged();},r.doTickIdle=function(){if(this.buffering){var e=this.hls,t=this.levelLastLoaded,r=this.levels,i=this.media;if(null!==t&&(i||!this.startFragRequested&&e.config.startFragPrefetch)&&(!this.altAudio||!this.audioOnly)){var n=e.nextLoadLevel;if(null!=r&&r[n]){var a=r[n],s=this.getMainFwdBufferInfo();if(null!==s){var o=this.getLevelDetails();if(o&&this._streamEnded(s,o)){var l={};return this.altAudio&&(l.type="video"),this.hls.trigger(L.BUFFER_EOS,l),void(this.state=wi)}e.loadLevel!==n&&-1===e.manualLevel&&this.log("Adapting to level "+n+" from level "+this.level),this.level=e.nextLoadLevel=n;var u=a.details;if(!u||this.state===_i||u.live&&this.levelLastLoaded!==a)return this.level=n,void(this.state=_i);var d=s.len,h=this.getMaxBufferLength(a.maxBitrate);if(!(d>=h)){this.backtrackFragment&&this.backtrackFragment.start>s.end&&(this.backtrackFragment=null);var c=this.backtrackFragment?this.backtrackFragment.start:s.end,f=this.getNextFragment(c,u);if(this.couldBacktrack&&!this.fragPrevious&&f&&"initSegment"!==f.sn&&this.fragmentTracker.getState(f)!==$r){var g,v=(null!=(g=this.backtrackFragment)?g:f).sn-u.startSN,m=u.fragments[v-1];m&&f.cc===m.cc&&(f=m,this.fragmentTracker.removeFragment(m));}else this.backtrackFragment&&s.len&&(this.backtrackFragment=null);if(f&&this.isLoopLoading(f,c)){if(!f.gap){var p=this.audioOnly&&!this.altAudio?Y:W,y=(p===W?this.videoBuffer:this.mediaBuffer)||this.media;y&&this.afterBufferFlushed(y,p,Lt);}f=this.getNextFragmentLoopLoading(f,u,s,Lt,h);}f&&(!f.initSegment||f.initSegment.data||this.bitrateTest||(f=f.initSegment),this.loadFragment(f,a,c));}}}}}},r.loadFragment=function(t,r,i){var n=this.fragmentTracker.getState(t);n===zr||n===Jr?"initSegment"===t.sn?this._loadInitSegment(t,r):this.bitrateTest?(this.log("Fragment "+t.sn+" of level "+t.level+" is being downloaded to test bitrate and will not be buffered"),this._loadBitrateTestFrag(t,r)):e.prototype.loadFragment.call(this,t,r,i):this.clearTrackerIfNeeded(t);},r.getBufferedFrag=function(e){return this.fragmentTracker.getBufferedFrag(e,Lt)},r.followingBufferedFrag=function(e){return e?this.getBufferedFrag(e.end+.5):null},r.immediateLevelSwitch=function(){this.abortCurrentFrag(),this.flushMainBuffer(0,Number.POSITIVE_INFINITY);},r.nextLevelSwitch=function(){var e=this.levels,t=this.media;if(null!=t&&t.readyState){var r,i=this.getAppendedFrag(t.currentTime);i&&i.start>1&&this.flushMainBuffer(0,i.start-1);var n=this.getLevelDetails();if(null!=n&&n.live){var a=this.getMainFwdBufferInfo();if(!a||a.len<2*n.targetduration)return}if(!t.paused&&e){var s=e[this.hls.nextLoadLevel],o=this.fragLastKbps;r=o&&this.fragCurrent?this.fragCurrent.duration*s.maxBitrate/(1e3*o)+1:0;}else r=0;var l=this.getBufferedFrag(t.currentTime+r);if(l){var u=this.followingBufferedFrag(l);if(u){this.abortCurrentFrag();var d=u.maxStartPTS?u.maxStartPTS:u.start,h=u.duration,c=Math.max(l.end,d+Math.min(Math.max(h-this.config.maxFragLookUpTolerance,h*(this.couldBacktrack?.5:.125)),h*(this.couldBacktrack?.75:.25)));this.flushMainBuffer(c,Number.POSITIVE_INFINITY);}}}},r.abortCurrentFrag=function(){var e=this.fragCurrent;switch(this.fragCurrent=null,this.backtrackFragment=null,e&&(e.abortRequests(),this.fragmentTracker.removeFragment(e)),this.state){case Li:case Ai:case Ri:case bi:case Di:this.state=Si;}this.nextLoadPosition=this.getLoadPosition();},r.flushMainBuffer=function(t,r){e.prototype.flushMainBuffer.call(this,t,r,this.altAudio?"video":null);},r.onMediaAttached=function(t,r){e.prototype.onMediaAttached.call(this,t,r);var i=r.media;i.addEventListener("playing",this.onMediaPlaying),i.addEventListener("seeked",this.onMediaSeeked),this.gapController=new yo(this.config,i,this.fragmentTracker,this.hls);},r.onMediaDetaching=function(){var t=this.media;t&&(t.removeEventListener("playing",this.onMediaPlaying),t.removeEventListener("seeked",this.onMediaSeeked)),this.videoBuffer=null,this.fragPlaying=null,this.gapController&&(this.gapController.destroy(),this.gapController=null),e.prototype.onMediaDetaching.call(this);},r.onManifestLoading=function(){e.prototype.onManifestLoading.call(this),this.log("Trigger BUFFER_RESET"),this.hls.trigger(L.BUFFER_RESET,void 0),this.couldBacktrack=!1,this.fragLastKbps=0,this.fragPlaying=this.backtrackFragment=null,this.altAudio=this.audioOnly=!1;},r.onManifestParsed=function(e,t){var r,i,n=!1,a=!1;t.levels.forEach((function(e){var t=e.audioCodec;t&&(n=n||-1!==t.indexOf("mp4a.40.2"),a=a||-1!==t.indexOf("mp4a.40.5"));})),this.audioCodecSwitch=n&&a&&!("function"==typeof(null==(i=mo())||null==(r=i.prototype)?void 0:r.changeType)),this.audioCodecSwitch&&this.log("Both AAC/HE-AAC audio found in levels; declaring level codec as HE-AAC"),this.levels=t.levels,this.startFragRequested=!1;},r.onLevelLoading=function(e,t){var r=this.levels;if(r&&this.state===Si){var i=r[t.level];(!i.details||i.details.live&&this.levelLastLoaded!==i||this.waitForCdnTuneIn(i.details))&&(this.state=_i);}},r.onLevelLoaded=function(e,t){var r,i=this.levels,n=t.level,a=t.details,s=a.totalduration;if(i){this.log("Level "+n+" loaded ["+a.startSN+","+a.endSN+"]"+(a.lastPartSn?"[part-"+a.lastPartSn+"-"+a.lastPartIndex+"]":"")+", cc ["+a.startCC+", "+a.endCC+"] duration:"+s);var o=i[n],l=this.fragCurrent;!l||this.state!==Ai&&this.state!==Ri||l.level!==t.level&&l.loader&&this.abortCurrentFrag();var u=0;if(a.live||null!=(r=o.details)&&r.live){var d;if(this.checkLiveUpdate(a),a.deltaUpdateFailed)return;u=this.alignPlaylists(a,o.details,null==(d=this.levelLastLoaded)?void 0:d.details);}if(o.details=a,this.levelLastLoaded=o,this.hls.trigger(L.LEVEL_UPDATED,{details:a,level:n}),this.state===_i){if(this.waitForCdnTuneIn(a))return;this.state=Si;}this.startFragRequested?a.live&&this.synchronizeToLiveEdge(a):this.setStartPosition(a,u),this.tick();}else this.warn("Levels were reset while loading level "+n);},r._handleFragmentLoadProgress=function(e){var t,r=e.frag,i=e.part,n=e.payload,a=this.levels;if(a){var s=a[r.level],o=s.details;if(!o)return this.warn("Dropping fragment "+r.sn+" of level "+r.level+" after level details were reset"),void this.fragmentTracker.removeFragment(r);var l=s.videoCodec,u=o.PTSKnown||!o.live,d=null==(t=r.initSegment)?void 0:t.data,h=this._getAudioCodec(s),c=this.transmuxer=this.transmuxer||new na(this.hls,Lt,this._handleTransmuxComplete.bind(this),this._handleTransmuxerFlush.bind(this)),f=i?i.index:-1,g=-1!==f,v=new ni(r.level,r.sn,r.stats.chunkCount,n.byteLength,f,g),m=this.initPTS[r.cc];c.push(n,d,h,l,r,i,o.totalduration,u,v,m);}else this.warn("Levels were reset while fragment load was in progress. Fragment "+r.sn+" of level "+r.level+" will not be buffered");},r.onAudioTrackSwitching=function(e,t){var r=this.altAudio;if(!t.url){if(this.mediaBuffer!==this.media){this.log("Switching on main audio, use media.buffered to schedule main fragment loading"),this.mediaBuffer=this.media;var i=this.fragCurrent;i&&(this.log("Switching to main audio track, cancel main fragment load"),i.abortRequests(),this.fragmentTracker.removeFragment(i)),this.resetTransmuxer(),this.resetLoadingState();}else this.audioOnly&&this.resetTransmuxer();var n=this.hls;r&&(n.trigger(L.BUFFER_FLUSHING,{startOffset:0,endOffset:Number.POSITIVE_INFINITY,type:null}),this.fragmentTracker.removeAllFragments()),n.trigger(L.AUDIO_TRACK_SWITCHED,t);}},r.onAudioTrackSwitched=function(e,t){var r=t.id,i=!!this.hls.audioTracks[r].url;if(i){var n=this.videoBuffer;n&&this.mediaBuffer!==n&&(this.log("Switching on alternate audio, use video.buffered to schedule main fragment loading"),this.mediaBuffer=n);}this.altAudio=i,this.tick();},r.onBufferCreated=function(e,t){var r,i,n=t.tracks,a=!1;for(var s in n){var o=n[s];if("main"===o.id){if(i=s,r=o,"video"===s){var l=n[s];l&&(this.videoBuffer=l.buffer);}}else a=!0;}a&&r?(this.log("Alternate track found, use "+i+".buffered to schedule main fragment loading"),this.mediaBuffer=r.buffer):this.mediaBuffer=this.media;},r.onFragBuffered=function(e,t){var r=t.frag,i=t.part;if(!r||r.type===Lt){if(this.fragContextChanged(r))return this.warn("Fragment "+r.sn+(i?" p: "+i.index:"")+" of level "+r.level+" finished buffering, but was aborted. state: "+this.state),void(this.state===Di&&(this.state=Si));var n=i?i.stats:r.stats;this.fragLastKbps=Math.round(8*n.total/(n.buffering.end-n.loading.first)),"initSegment"!==r.sn&&(this.fragPrevious=r),this.fragBufferedComplete(r,i);}},r.onError=function(e,t){var r;if(t.fatal)this.state=Ii;else switch(t.details){case R.FRAG_GAP:case R.FRAG_PARSING_ERROR:case R.FRAG_DECRYPT_ERROR:case R.FRAG_LOAD_ERROR:case R.FRAG_LOAD_TIMEOUT:case R.KEY_LOAD_ERROR:case R.KEY_LOAD_TIMEOUT:this.onFragmentOrKeyLoadError(Lt,t);break;case R.LEVEL_LOAD_ERROR:case R.LEVEL_LOAD_TIMEOUT:case R.LEVEL_PARSING_ERROR:t.levelRetry||this.state!==_i||(null==(r=t.context)?void 0:r.type)!==Et||(this.state=Si);break;case R.BUFFER_APPEND_ERROR:case R.BUFFER_FULL_ERROR:if(!t.parent||"main"!==t.parent)return;if(t.details===R.BUFFER_APPEND_ERROR)return void this.resetLoadingState();this.reduceLengthAndFlushBuffer(t)&&this.flushMainBuffer(0,Number.POSITIVE_INFINITY);break;case R.INTERNAL_EXCEPTION:this.recoverWorkerError(t);}},r.checkBuffer=function(){var e=this.media,t=this.gapController;if(e&&t&&e.readyState){if(this.loadedmetadata||!ii.getBuffered(e).length){var r=this.state,i=r!==Si?this.fragCurrent:null,n=this.getLevelDetails();t.poll(this.lastCurrentTime,i,n,r);}this.lastCurrentTime=e.currentTime;}},r.onFragLoadEmergencyAborted=function(){this.state=Si,this.loadedmetadata||(this.startFragRequested=!1,this.nextLoadPosition=this.lastCurrentTime),this.tickImmediate();},r.onBufferFlushed=function(e,t){var r=t.type;if(r!==Y||this.audioOnly&&!this.altAudio){var i=(r===W?this.videoBuffer:this.mediaBuffer)||this.media;this.afterBufferFlushed(i,r,Lt),this.tick();}},r.onLevelsUpdated=function(e,t){this.level>-1&&this.fragCurrent&&(this.level=this.fragCurrent.level),this.levels=t.levels;},r.swapAudioCodec=function(){this.audioCodecSwap=!this.audioCodecSwap;},r.seekToStartPos=function(){var e=this.media;if(e){var t=e.currentTime,r=this.startPosition;if(r>=0&&t<r){if(e.seeking)return void this.log("could not seek to "+r+", already seeking at "+t);var i=ii.getBuffered(e),n=(i.length?i.start(0):0)-r;n>0&&(n<this.config.maxBufferHole||n<this.config.maxFragLookUpTolerance)&&(this.log("adjusting start position by "+n+" to match buffer start"),r+=n,this.startPosition=r),this.log("seek to target start position "+r+" from current time "+t),e.currentTime=r;}}},r._getAudioCodec=function(e){var t=this.config.defaultAudioCodec||e.audioCodec;return this.audioCodecSwap&&t&&(this.log("Swapping audio codec"),t=-1!==t.indexOf("mp4a.40.5")?"mp4a.40.2":"mp4a.40.5"),t},r._loadBitrateTestFrag=function(e,t){var r=this;e.bitrateTest=!0,this._doFragLoad(e,t).then((function(i){var n=r.hls;if(i&&!r.fragContextChanged(e)){t.fragmentError=0,r.state=Si,r.startFragRequested=!1,r.bitrateTest=!1;var a=e.stats;a.parsing.start=a.parsing.end=a.buffering.start=a.buffering.end=self.performance.now(),n.trigger(L.FRAG_LOADED,i),e.bitrateTest=!1;}}));},r._handleTransmuxComplete=function(e){var t,r=this.playlistType,i=this.hls,n=e.remuxResult,a=e.chunkMeta,s=this.getCurrentContext(a);if(s){var o=s.frag,l=s.part,u=s.level,d=n.video,h=n.text,c=n.id3,f=n.initSegment,g=u.details,v=this.altAudio?void 0:n.audio;if(this.fragContextChanged(o))this.fragmentTracker.removeFragment(o);else {if(this.state=bi,f){if(null!=f&&f.tracks){var m=o.initSegment||o;this._bufferInitSegment(u,f.tracks,m,a),i.trigger(L.FRAG_PARSING_INIT_SEGMENT,{frag:m,id:r,tracks:f.tracks});}var p=f.initPTS,y=f.timescale;E(p)&&(this.initPTS[o.cc]={baseTime:p,timescale:y},i.trigger(L.INIT_PTS_FOUND,{frag:o,id:r,initPTS:p,timescale:y}));}if(d&&g){var T=g.fragments[o.sn-1-g.startSN],S=o.sn===g.startSN,A=!T||o.cc>T.cc;if(!1!==n.independent){var R=d.startPTS,k=d.endPTS,b=d.startDTS,D=d.endDTS;if(l)l.elementaryStreams[d.type]={startPTS:R,endPTS:k,startDTS:b,endDTS:D};else if(d.firstKeyFrame&&d.independent&&1===a.id&&!A&&(this.couldBacktrack=!0),d.dropped&&d.independent){var w=this.getMainFwdBufferInfo(),I=(w?w.end:this.getLoadPosition())+this.config.maxBufferHole,C=d.firstKeyFramePTS?d.firstKeyFramePTS:R;if(!S&&I<C-this.config.maxBufferHole&&!A)return void this.backtrack(o);A&&(o.gap=!0),o.setElementaryStreamInfo(d.type,o.start,k,o.start,D,!0);}else S&&R>2&&(o.gap=!0);o.setElementaryStreamInfo(d.type,R,k,b,D),this.backtrackFragment&&(this.backtrackFragment=o),this.bufferFragmentData(d,o,l,a,S||A);}else {if(!S&&!A)return void this.backtrack(o);o.gap=!0;}}if(v){var _=v.startPTS,P=v.endPTS,x=v.startDTS,F=v.endDTS;l&&(l.elementaryStreams[Y]={startPTS:_,endPTS:P,startDTS:x,endDTS:F}),o.setElementaryStreamInfo(Y,_,P,x,F),this.bufferFragmentData(v,o,l,a);}if(g&&null!=c&&null!=(t=c.samples)&&t.length){var M={id:r,frag:o,details:g,samples:c.samples};i.trigger(L.FRAG_PARSING_METADATA,M);}if(g&&h){var O={id:r,frag:o,details:g,samples:h.samples};i.trigger(L.FRAG_PARSING_USERDATA,O);}}}else this.resetWhenMissingContext(a);},r._bufferInitSegment=function(e,t,r,i){var n=this;if(this.state===bi){this.audioOnly=!!t.audio&&!t.video,this.altAudio&&!this.audioOnly&&delete t.audio;var a=t.audio,s=t.video,o=t.audiovideo;if(a){var l=e.audioCodec,u=navigator.userAgent.toLowerCase();if(this.audioCodecSwitch){l&&(l=-1!==l.indexOf("mp4a.40.5")?"mp4a.40.2":"mp4a.40.5");var d=a.metadata;d&&"channelCount"in d&&1!==(d.channelCount||1)&&-1===u.indexOf("firefox")&&(l="mp4a.40.5");}l&&-1!==l.indexOf("mp4a.40.5")&&-1!==u.indexOf("android")&&"audio/mpeg"!==a.container&&(l="mp4a.40.2",this.log("Android: force audio codec to "+l)),e.audioCodec&&e.audioCodec!==l&&this.log('Swapping manifest audio codec "'+e.audioCodec+'" for "'+l+'"'),a.levelCodec=l,a.id="main",this.log("Init audio buffer, container:"+a.container+", codecs[selected/level/parsed]=["+(l||"")+"/"+(e.audioCodec||"")+"/"+a.codec+"]"),delete t.audiovideo;}s&&(s.levelCodec=e.videoCodec,s.id="main",this.log("Init video buffer, container:"+s.container+", codecs[level/parsed]=["+(e.videoCodec||"")+"/"+s.codec+"]"),delete t.audiovideo),o&&(this.log("Init audiovideo buffer, container:"+o.container+", codecs[level/parsed]=["+e.codecs+"/"+o.codec+"]"),delete t.video,delete t.audio);var h=Object.keys(t);h.length&&(this.hls.trigger(L.BUFFER_CODECS,t),h.forEach((function(e){var a=t[e].initSegment;null!=a&&a.byteLength&&n.hls.trigger(L.BUFFER_APPENDING,{type:e,data:a,frag:r,part:null,chunkMeta:i,parent:r.type});}))),this.tickImmediate();}},r.getMainFwdBufferInfo=function(){return this.getFwdBufferInfo(this.mediaBuffer?this.mediaBuffer:this.media,Lt)},r.backtrack=function(e){this.couldBacktrack=!0,this.backtrackFragment=e,this.resetTransmuxer(),this.flushBufferGap(e),this.fragmentTracker.removeFragment(e),this.fragPrevious=null,this.nextLoadPosition=e.start,this.state=Si;},r.checkFragmentChanged=function(){var e=this.media,t=null;if(e&&e.readyState>1&&!1===e.seeking){var r=e.currentTime;if(ii.isBuffered(e,r)?t=this.getAppendedFrag(r):ii.isBuffered(e,r+.1)&&(t=this.getAppendedFrag(r+.1)),t){this.backtrackFragment=null;var i=this.fragPlaying,n=t.level;i&&t.sn===i.sn&&i.level===n||(this.fragPlaying=t,this.hls.trigger(L.FRAG_CHANGED,{frag:t}),i&&i.level===n||this.hls.trigger(L.LEVEL_SWITCHED,{level:n}));}}},n(t,[{key:"maxBufferLength",get:function(){var e=this.levels,t=this.level,r=null==e?void 0:e[t];return r?this.getMaxBufferLength(r.maxBitrate):this.config.maxBufferLength}},{key:"nextLevel",get:function(){var e=this.nextBufferedFrag;return e?e.level:-1}},{key:"currentFrag",get:function(){var e;if(this.fragPlaying)return this.fragPlaying;var t=(null==(e=this.media)?void 0:e.currentTime)||this.lastCurrentTime;return E(t)?this.getAppendedFrag(t):null}},{key:"currentProgramDateTime",get:function(){var e,t=(null==(e=this.media)?void 0:e.currentTime)||this.lastCurrentTime;if(E(t)){var r=this.getLevelDetails(),i=this.currentFrag||(r?Lr(null,r.fragments,t):null);if(i){var n=i.programDateTime;if(null!==n){var a=n+1e3*(t-i.start);return new Date(a)}}}return null}},{key:"currentLevel",get:function(){var e=this.currentFrag;return e?e.level:-1}},{key:"nextBufferedFrag",get:function(){var e=this.currentFrag;return e?this.followingBufferedFrag(e):null}},{key:"forceStartLoad",get:function(){return this._forceStartLoad}}])}(Pi),To=function(){function e(t){void 0===t&&(t={}),this.config=void 0,this.userConfig=void 0,this.logger=void 0,this.coreComponents=void 0,this.networkControllers=void 0,this._emitter=new zn,this._autoLevelCapping=-1,this._maxHdcpLevel=null,this.abrController=void 0,this.bufferController=void 0,this.capLevelController=void 0,this.latencyController=void 0,this.levelController=void 0,this.streamController=void 0,this.audioTrackController=void 0,this.subtitleTrackController=void 0,this.emeController=void 0,this.cmcdController=void 0,this._media=null,this._url=null,this.triggeringException=void 0;var r=this.logger=_(t.debug||!1,"Hls instance"),i=this.config=function(e,t,r){if((t.liveSyncDurationCount||t.liveMaxLatencyDurationCount)&&(t.liveSyncDuration||t.liveMaxLatencyDuration))throw new Error("Illegal hls.js config: don't mix up liveSyncDurationCount/liveMaxLatencyDurationCount and liveSyncDuration/liveMaxLatencyDuration");if(void 0!==t.liveMaxLatencyDurationCount&&(void 0===t.liveSyncDurationCount||t.liveMaxLatencyDurationCount<=t.liveSyncDurationCount))throw new Error('Illegal hls.js config: "liveMaxLatencyDurationCount" must be greater than "liveSyncDurationCount"');if(void 0!==t.liveMaxLatencyDuration&&(void 0===t.liveSyncDuration||t.liveMaxLatencyDuration<=t.liveSyncDuration))throw new Error('Illegal hls.js config: "liveMaxLatencyDuration" must be greater than "liveSyncDuration"');var i=ho(e),n=["TimeOut","MaxRetry","RetryDelay","MaxRetryTimeout"];return ["manifest","level","frag"].forEach((function(e){var a=("level"===e?"playlist":e)+"LoadPolicy",s=void 0===t[a],o=[];n.forEach((function(r){var n=e+"Loading"+r,l=t[n];if(void 0!==l&&s){o.push(n);var u=i[a].default;switch(t[a]={default:u},r){case"TimeOut":u.maxLoadTimeMs=l,u.maxTimeToFirstByteMs=l;break;case"MaxRetry":u.errorRetry.maxNumRetry=l,u.timeoutRetry.maxNumRetry=l;break;case"RetryDelay":u.errorRetry.retryDelayMs=l,u.timeoutRetry.retryDelayMs=l;break;case"MaxRetryTimeout":u.errorRetry.maxRetryDelayMs=l,u.timeoutRetry.maxRetryDelayMs=l;}}})),o.length&&r.warn('hls.js config: "'+o.join('", "')+'" setting(s) are deprecated, use "'+a+'": '+JSON.stringify(t[a]));})),c(c({},i),t)}(e.DefaultConfig,t,r);this.userConfig=t,i.progressive&&co(i,r);var n=i.abrController,a=i.bufferController,s=i.capLevelController,o=i.errorController,l=i.fpsController,u=new o(this),d=this.abrController=new n(this),h=new Zr(this),f=this.bufferController=new a(this,h),g=this.capLevelController=new s(this),v=new l(this),m=new Dt(this),p=new Jt(this),y=i.contentSteeringController,E=y?new y(this):null,T=this.levelController=new fo(this,E),S=new vo(this.config),A=this.streamController=new Eo(this,h,S);g.setStreamController(A),v.setStreamController(A);var R=[m,T,A];E&&R.splice(1,0,E),this.networkControllers=R;var k=[d,f,g,v,p,h];this.audioTrackController=this.createController(i.audioTrackController,R);var b=i.audioStreamController;b&&R.push(new b(this,h,S)),this.subtitleTrackController=this.createController(i.subtitleTrackController,R);var D=i.subtitleStreamController;D&&R.push(new D(this,h,S)),this.createController(i.timelineController,k),S.emeController=this.emeController=this.createController(i.emeController,k),this.cmcdController=this.createController(i.cmcdController,k),this.latencyController=this.createController($t,k),this.coreComponents=k,R.push(u);var w=u.onErrorOut;"function"==typeof w&&this.on(L.ERROR,w,u);}e.isMSESupported=function(){return po()},e.isSupported=function(){return function(){if(!po())return !1;var e=We();return "function"==typeof(null==e?void 0:e.isTypeSupported)&&(["avc1.42E01E,mp4a.40.2","av01.0.01M.08","vp09.00.50.08"].some((function(t){return e.isTypeSupported(ze(t,"video"))}))||["mp4a.40.2","fLaC"].some((function(t){return e.isTypeSupported(ze(t,"audio"))})))}()},e.getMediaSource=function(){return We()};var t=e.prototype;return t.createController=function(e,t){if(e){var r=new e(this);return t&&t.push(r),r}return null},t.on=function(e,t,r){void 0===r&&(r=this),this._emitter.on(e,t,r);},t.once=function(e,t,r){void 0===r&&(r=this),this._emitter.once(e,t,r);},t.removeAllListeners=function(e){this._emitter.removeAllListeners(e);},t.off=function(e,t,r,i){void 0===r&&(r=this),this._emitter.off(e,t,r,i);},t.listeners=function(e){return this._emitter.listeners(e)},t.emit=function(e,t,r){return this._emitter.emit(e,t,r)},t.trigger=function(e,t){if(this.config.debug)return this.emit(e,e,t);try{return this.emit(e,e,t)}catch(t){if(this.logger.error("An internal error happened while handling event "+e+'. Error message: "'+t.message+'". Here is a stacktrace:',t),!this.triggeringException){this.triggeringException=!0;var r=e===L.ERROR;this.trigger(L.ERROR,{type:A.OTHER_ERROR,details:R.INTERNAL_EXCEPTION,fatal:r,event:e,error:t}),this.triggeringException=!1;}}return !1},t.listenerCount=function(e){return this._emitter.listenerCount(e)},t.destroy=function(){this.logger.log("destroy"),this.trigger(L.DESTROYING,void 0),this.detachMedia(),this.removeAllListeners(),this._autoLevelCapping=-1,this._url=null,this.networkControllers.forEach((function(e){return e.destroy()})),this.networkControllers.length=0,this.coreComponents.forEach((function(e){return e.destroy()})),this.coreComponents.length=0;var e=this.config;e.xhrSetup=e.fetchSetup=void 0,this.userConfig=null;},t.attachMedia=function(e){if(e)this.logger.log("attachMedia"),this._media=e,this.trigger(L.MEDIA_ATTACHING,{media:e});else {var t=new Error("attachMedia failed: media argument is "+e);this.trigger(L.ERROR,{type:A.OTHER_ERROR,details:R.ATTACH_MEDIA_ERROR,fatal:!0,error:t});}},t.detachMedia=function(){this.logger.log("detachMedia"),this.trigger(L.MEDIA_DETACHING,void 0),this._media=null;},t.loadSource=function(e){this.stopLoad();var t=this.media,r=this._url,i=this._url=y.buildAbsoluteURL(self.location.href,e,{alwaysNormalize:!0});this._autoLevelCapping=-1,this._maxHdcpLevel=null,this.logger.log("loadSource:"+i),t&&r&&(r!==i||this.bufferController.hasSourceTypes())&&(this.detachMedia(),this.attachMedia(t)),this.trigger(L.MANIFEST_LOADING,{url:e});},t.startLoad=function(e){void 0===e&&(e=-1),this.logger.log("startLoad("+e+")"),this.networkControllers.forEach((function(t){t.startLoad(e);}));},t.stopLoad=function(){this.logger.log("stopLoad"),this.networkControllers.forEach((function(e){e.stopLoad();}));},t.resumeBuffering=function(){this.networkControllers.forEach((function(e){e.resumeBuffering&&e.resumeBuffering();}));},t.pauseBuffering=function(){this.networkControllers.forEach((function(e){e.pauseBuffering&&e.pauseBuffering();}));},t.swapAudioCodec=function(){this.logger.log("swapAudioCodec"),this.streamController.swapAudioCodec();},t.recoverMediaError=function(){this.logger.log("recoverMediaError");var e=this._media;this.detachMedia(),e&&this.attachMedia(e);},t.removeLevel=function(e){this.levelController.removeLevel(e);},t.setAudioOption=function(e){var t;return (null==(t=this.audioTrackController)?void 0:t.setAudioOption(e))||null},t.setSubtitleOption=function(e){var t;return (null==(t=this.subtitleTrackController)?void 0:t.setSubtitleOption(e))||null},n(e,[{key:"url",get:function(){return this._url}},{key:"levels",get:function(){var e=this.levelController.levels;return e||[]}},{key:"currentLevel",get:function(){return this.streamController.currentLevel},set:function(e){this.logger.log("set currentLevel:"+e),this.levelController.manualLevel=e,this.streamController.immediateLevelSwitch();}},{key:"nextLevel",get:function(){return this.streamController.nextLevel},set:function(e){this.logger.log("set nextLevel:"+e),this.levelController.manualLevel=e,this.streamController.nextLevelSwitch();}},{key:"loadLevel",get:function(){return this.levelController.level},set:function(e){this.logger.log("set loadLevel:"+e),this.levelController.manualLevel=e;}},{key:"nextLoadLevel",get:function(){return this.levelController.nextLoadLevel},set:function(e){this.levelController.nextLoadLevel=e;}},{key:"firstLevel",get:function(){return Math.max(this.levelController.firstLevel,this.minAutoLevel)},set:function(e){this.logger.log("set firstLevel:"+e),this.levelController.firstLevel=e;}},{key:"startLevel",get:function(){var e=this.levelController.startLevel;return -1===e&&this.abrController.forcedAutoLevel>-1?this.abrController.forcedAutoLevel:e},set:function(e){this.logger.log("set startLevel:"+e),-1!==e&&(e=Math.max(e,this.minAutoLevel)),this.levelController.startLevel=e;}},{key:"capLevelToPlayerSize",get:function(){return this.config.capLevelToPlayerSize},set:function(e){var t=!!e;t!==this.config.capLevelToPlayerSize&&(t?this.capLevelController.startCapping():(this.capLevelController.stopCapping(),this.autoLevelCapping=-1,this.streamController.nextLevelSwitch()),this.config.capLevelToPlayerSize=t);}},{key:"autoLevelCapping",get:function(){return this._autoLevelCapping},set:function(e){this._autoLevelCapping!==e&&(this.logger.log("set autoLevelCapping:"+e),this._autoLevelCapping=e,this.levelController.checkMaxAutoUpdated());}},{key:"bandwidthEstimate",get:function(){var e=this.abrController.bwEstimator;return e?e.getEstimate():NaN},set:function(e){this.abrController.resetEstimator(e);}},{key:"ttfbEstimate",get:function(){var e=this.abrController.bwEstimator;return e?e.getEstimateTTFB():NaN}},{key:"maxHdcpLevel",get:function(){return this._maxHdcpLevel},set:function(e){(function(e){return Zt.indexOf(e)>-1})(e)&&this._maxHdcpLevel!==e&&(this._maxHdcpLevel=e,this.levelController.checkMaxAutoUpdated());}},{key:"autoLevelEnabled",get:function(){return -1===this.levelController.manualLevel}},{key:"manualLevel",get:function(){return this.levelController.manualLevel}},{key:"minAutoLevel",get:function(){var e=this.levels,t=this.config.minAutoBitrate;if(!e)return 0;for(var r=e.length,i=0;i<r;i++)if(e[i].maxBitrate>=t)return i;return 0}},{key:"maxAutoLevel",get:function(){var e,t=this.levels,r=this.autoLevelCapping,i=this.maxHdcpLevel;if(e=-1===r&&null!=t&&t.length?t.length-1:r,i)for(var n=e;n--;){var a=t[n].attrs["HDCP-LEVEL"];if(a&&a<=i)return n}return e}},{key:"firstAutoLevel",get:function(){return this.abrController.firstAutoLevel}},{key:"nextAutoLevel",get:function(){return this.abrController.nextAutoLevel},set:function(e){this.abrController.nextAutoLevel=e;}},{key:"playingDate",get:function(){return this.streamController.currentProgramDateTime}},{key:"mainForwardBufferInfo",get:function(){return this.streamController.getMainFwdBufferInfo()}},{key:"maxBufferLength",get:function(){return this.streamController.maxBufferLength}},{key:"allAudioTracks",get:function(){var e=this.audioTrackController;return e?e.allAudioTracks:[]}},{key:"audioTracks",get:function(){var e=this.audioTrackController;return e?e.audioTracks:[]}},{key:"audioTrack",get:function(){var e=this.audioTrackController;return e?e.audioTrack:-1},set:function(e){var t=this.audioTrackController;t&&(t.audioTrack=e);}},{key:"allSubtitleTracks",get:function(){var e=this.subtitleTrackController;return e?e.allSubtitleTracks:[]}},{key:"subtitleTracks",get:function(){var e=this.subtitleTrackController;return e?e.subtitleTracks:[]}},{key:"subtitleTrack",get:function(){var e=this.subtitleTrackController;return e?e.subtitleTrack:-1},set:function(e){var t=this.subtitleTrackController;t&&(t.subtitleTrack=e);}},{key:"media",get:function(){return this._media}},{key:"subtitleDisplay",get:function(){var e=this.subtitleTrackController;return !!e&&e.subtitleDisplay},set:function(e){var t=this.subtitleTrackController;t&&(t.subtitleDisplay=e);}},{key:"lowLatencyMode",get:function(){return this.config.lowLatencyMode},set:function(e){this.config.lowLatencyMode=e;}},{key:"liveSyncPosition",get:function(){return this.latencyController.liveSyncPosition}},{key:"latency",get:function(){return this.latencyController.latency}},{key:"maxLatency",get:function(){return this.latencyController.maxLatency}},{key:"targetLatency",get:function(){return this.latencyController.targetLatency},set:function(e){this.latencyController.targetLatency=e;}},{key:"drift",get:function(){return this.latencyController.drift}},{key:"forceStartLoad",get:function(){return this.streamController.forceStartLoad}},{key:"pathwayPriority",get:function(){return this.levelController.pathwayPriority},set:function(e){this.levelController.pathwayPriority=e;}}],[{key:"version",get:function(){return ta}},{key:"Events",get:function(){return L}},{key:"ErrorTypes",get:function(){return A}},{key:"ErrorDetails",get:function(){return R}},{key:"DefaultConfig",get:function(){return e.defaultConfig?e.defaultConfig:uo},set:function(t){e.defaultConfig=t;}}])}();return To.defaultConfig=void 0,To},"object"==typeof exports&&"undefined"!=typeof module?module.exports=i():"function"==typeof define&&define.amd?define(i):(r="undefined"!=typeof globalThis$1?globalThis$1:r||self).Hls=i();}(!1);
!function(e,t){e.bs=e.bs||{},e.bs.player=e.bs.player||{},e.bs.player.plugin=e.bs.player.plugin||{},e.bs.player.plugin.video=e.bs.player.plugin.video||{},e.bs.player.plugin.video.videoPlayer=e.bs.player.plugin.video.videoPlayer||{},Math.__name__="Math";var i=require("haxe.Reflect");class s{static string(e){return I.__string_rec(e,"")}static parseInt(e){let t=parseInt(e);return isNaN(t)?null:t}}s.__name__="Std";class a{static getInstanceFields(e){let t=[];for(;null!=e;){let i=0,s=Object.getOwnPropertyNames(e.prototype);for(;i<s.length;){let e=s[i];switch(++i,e){case"__class__":case"__properties__":case"constructor":break;default:-1==t.indexOf(e)&&t.push(e);}}e=e.__super__;}return t}}a.__name__="Type";var n=require("bs.player.core.events.AdEvent"),r=require("bs.player.core.events.ControlEvent"),l=require("bs.player.core.events.DataProviderEvent"),o=require("bs.player.core.events.VideoEvent"),h=require("bs.player.core.manager.I18NHelper"),d=require("bs.player.core.model.Media"),u=require("bs.player.core.model.Live"),c=require("bs.player.core.model.LiveStream"),m=require("bs.player.core.model.SubtitlesSet"),p=require("bs.player.core.model.AudioSet"),g=require("bs.player.core.model.VideoQualityEventData");class v{}v.__name__="bs.player.core.model.DrmCustomLicenseServerHandler",v.__isInterface__=!0,Object.assign(v.prototype,{__class__:v,initContext:null,customWidevineLicenseRequestHandler:null,customPlayReadyLicenseRequestHandler:null,getLastError:null,clearCertCache:null});class y{constructor(){this.pluginName="";let e=I.getClass(this);this.pluginName=e.__name__.split(".").pop();let t=this.pluginName,s=exports.configuration;this.pluginConfig=null!=s&&Object.prototype.hasOwnProperty.call(s,t)?i.field(s,t):Object.create(null);}create(){}destroy(){}activate(){}postActivate(){}deactivate(){}eventFilter(e){return !0}registerPlugin(e){}getPluginVersion(){return "v2.14.417"}getPluginName(){return this.pluginName}get_player(){return this.player}set_player(e){return this.player=e}get_variables(){return this.variables}set_variables(e){return this.variables=e}get_eventHub(){return this.eventHub}set_eventHub(e){return this.eventHub=e}get_parentDisplay(){return this.parentDisplay}set_parentDisplay(e){return this.parentDisplay=e}get_display(){return this.display}}y.__name__="bs.player.core.plugin.PluginBase",Object.assign(y.prototype,{__class__:y,uid:null,context:null,className:null,pluginConfig:null,variables:null,eventHub:null,parentDisplay:null,display:null,player:null,pluginName:null});var S=require("bs.player.core.plugin.VideoPlayerUtil");class f{constructor(e){this.saveBandwidthModeStore=null,this.hideVideoTag=!1,this.playbackRate=1,this.initialAsAdvertisement=!1,this.isInStreamAdvertisement=!1,this.isAdvertisement=!1,this.isQuickFallbackPathForLiveEnabled=!0,this.minAudioTracksForInfo=2,null==f.instances.h[(e?"ad_":"")+this.context]&&(this.pluginConfig=S.readPluginConfig(this),this.isAdvertisement=e,this.initialAsAdvertisement=e,this.initialBandwidthSafetyFactor=null,this.isInStreamAdvertisement=!1,this.playbackRateMetter=new k(b.isSmartTV()?3:2),this.seekingOverVideoGapMeter=new w(4),this.playerWrapper=null,this.startTimeStatus=0,this.hasDashJsInitializedSource=!1,this.hasDashJsInitializedManifest=!1,this.hasAudioInitialized=!1,this.hasSubtitlesInitialized=!1,this.hasCodecInfoInitialized=!1,this.hasQualityInfoInitialized=!1,this.isQualitySelectionEnabled=!0,this.hasSeekingStartTriggeded=!1,this.hasProtectionData=!1,this.isBuffering=!1,this.shouldBePlaying=!1,this.isPlaybackNotAllowed=!1,this.hasPlaybackSuccStarted=!1,this.drmLicenseCheckStatus=0,this.liveStreamNowOffset=null,this.liveStreamNowOffsetLastUpdate=0,this.videoRestartsOnError=0,this.prePlaybackSeekRelativePosition=null,this.seekingStartDate=null,this.seekDebouncerTimer=null,this.seekingTargetPos=null,this.seekingTargetTs=null,this.lastDvrWindowStart=null,this.lastDvrWindowEnd=null,this.currentTime=null,this.playbackRateMetter.reset(),this.audioSetWaitingForSelection=null,this.subtitlesSetWaitingForSelection=null,this.seekingAvgTime=6,this.scte35PendingEvents=[],this.saveBandwidthModeStore=null);}create(){r.add(this.context,"selectSubtitles",A(this,this.onSelectSubtitles)),r.add(this.context,"selectAudio",A(this,this.onSelectAudio)),r.add(this.context,"requestVideoQualityChange",A(this,this.onVideoQualityChange)),n.add(this.context,"adInStreamPlaying",A(this,this.onAdInStreamPlaying)),n.add(this.context,"adInStreamPlayingSilent",A(this,this.onAdInStreamPlaying)),n.add(this.context,"adInStreamEnd",A(this,this.onAdInStreamEnd)),n.add(this.context,"adInStreamEndSilent",A(this,this.onAdInStreamEnd)),n.add(this.context,"adInStreamClipPlaying",A(this,this.onAdClipInStreamPlaying)),n.add(this.context,"adInStreamClipPlayingSilent",A(this,this.onAdClipInStreamPlaying)),n.add(this.context,"adInStreamClipEnd",A(this,this.onAdClipInStreamEnd)),n.add(this.context,"adInStreamClipEndSilent",A(this,this.onAdClipInStreamEnd)),n.add(this.context,"adInStreamAdsBreaksInfo",A(this,this.onAdInStreamBreaksInfo));}destroy(){r.remove(this.context,"selectSubtitles",A(this,this.onSelectSubtitles)),r.remove(this.context,"selectAudio",A(this,this.onSelectAudio)),r.remove(this.context,"requestVideoQualityChange",A(this,this.onVideoQualityChange)),n.remove(this.context,"adInStreamPlaying",A(this,this.onAdInStreamPlaying)),n.remove(this.context,"adInStreamPlayingSilent",A(this,this.onAdInStreamPlaying)),n.remove(this.context,"adInStreamEnd",A(this,this.onAdInStreamEnd)),n.remove(this.context,"adInStreamEndSilent",A(this,this.onAdInStreamEnd)),n.remove(this.context,"adInStreamClipPlaying",A(this,this.onAdClipInStreamPlaying)),n.remove(this.context,"adInStreamClipPlayingSilent",A(this,this.onAdClipInStreamPlaying)),n.remove(this.context,"adInStreamClipEnd",A(this,this.onAdClipInStreamEnd)),n.remove(this.context,"adInStreamClipEndSilent",A(this,this.onAdClipInStreamEnd)),n.remove(this.context,"adInStreamAdsBreaksInfo",A(this,this.onAdInStreamBreaksInfo)),this.cleanVideoAndPlayer(),this.media=null,this.startTimeStatus=0,this.hasDashJsInitializedSource=null,this.hasDashJsInitializedManifest=null,this.hasAudioInitialized=null,this.hasSubtitlesInitialized=null,this.hasCodecInfoInitialized=null,this.hasQualityInfoInitialized=null,this.liveStreamNowOffset=null,this.liveStreamNowOffsetLastUpdate=0,this.videoRestartsOnError=0,this.hasSeekingStartTriggeded=!1,this.hasProtectionData=!1,this.isBuffering=!1,this.stopLiveStreamRestartTimeoutTimer(),this.stopLiveStreamRestartDelayTimer(),this.stopDrmLiceseCheckCleanupTimer(),this.stopLiveEdgeUpdateTimer(),this.stopStreamCompleteWatchdogTimer(),this.stopStreamBufferingWatchdogTimer(),this.stopAdsRestoreQualitySettingTimer(),this.shouldBePlaying=!1,this.isPlaybackNotAllowed=!1,this.hasPlaybackSuccStarted=!1,this.drmLicenseCheckStatus=0,this.audioSetWaitingForSelection=null,this.subtitlesSetWaitingForSelection=null,this.seekingStartDate=null,this.stopSeekDebouncerTimer(),this.lastDvrWindowStart=null,this.lastDvrWindowEnd=null,this.currentTime=null,this.playbackRateMetter.reset(),this.adBreaksInfo=null;}cleanVideoAndPlayer(){if(this.hasProtectionData=!1,this.stopDrmLiceseCheckCleanupTimer(),null!=this.player)try{this.hasDashJsInitializedSource&&this.player.pause(),this.player.reset();}catch(e){}null!=this.video&&(this.video.setAttribute("src",""),this.video.load(),this.hideVideoTag=!1,null!=this.video&&(this.video.style.display="block",this.video.style.opacity="1",this.video.style.visibility="visible"),this.video.muted=this.initialVideoIsMuted),this.cleanPlayer(),this.player=null,this.video=null,this.playerWrapper=null,this.source=null,this.audioSetWaitingForSelection=null,this.subtitlesSetWaitingForSelection=null,this.hasPlaybackSuccStarted=!1,this.saveBandwidthModeStore=null;}showHideVideoTag(e){null==e&&(e=!0),null!=this.video&&(this.video.style.display=e?"block":"none",this.video.style.opacity=e?"1":"0",this.video.style.visibility=e?"visible":"hidden");}stopSeekDebouncerTimer(){null!=this.seekDebouncerTimer&&(this.seekDebouncerTimer.stop(),this.seekDebouncerTimer=null);}onAdInStreamPlaying(e){this.isAdvertisement=!0,this.isInStreamAdvertisement=!0,null!=this.media&&null!=this.media.mediaPlaybackInfo&&(this.media.mediaPlaybackInfo.isInStreamAdvertisementPlaying=!0);let t=this.getAdsInStreamMaxQualityScalingRatio();if(null!=t){let e=this.player.getSettings();null!=e&&null!=e.streaming&&null!=e.streaming.abr&&null!=e.streaming.abr.bandwidthSafetyFactor&&(this.initialBandwidthSafetyFactor=e.streaming.abr.bandwidthSafetyFactor),null==this.initialBandwidthSafetyFactor&&(this.initialBandwidthSafetyFactor=.9),e.streaming.abr.bandwidthSafetyFactor=this.initialBandwidthSafetyFactor*t,this.player.updateSettings(e);}}getAdsInStreamMaxQualityScalingRatio(){let e=null;return Object.prototype.hasOwnProperty.call(this.pluginConfig,"daiAdsMaxQualityScalingRatio")&&null!=i.field(this.pluginConfig,"daiAdsMaxQualityScalingRatio")&&(e=i.field(this.pluginConfig,"daiAdsMaxQualityScalingRatio")),e}onAdInStreamEnd(e){this.isAdvertisement=this.initialAsAdvertisement,this.isInStreamAdvertisement=!1,null!=this.media&&null!=this.media.mediaPlaybackInfo&&(this.media.mediaPlaybackInfo.isInStreamAdvertisementPlaying=!1),this.stopAdsRestoreQualitySettingTimer(),this.adsRestoreQualitySettingTimer=E.delay(A(this,this.adsRestoreQualitySetting),8e3);}adsRestoreQualitySetting(){if(this.stopAdsRestoreQualitySettingTimer(),null!=this.getAdsInStreamMaxQualityScalingRatio()&&null!=this.initialBandwidthSafetyFactor){let e=this.player.getSettings();e.streaming.abr.bandwidthSafetyFactor=this.initialBandwidthSafetyFactor,this.player.updateSettings(e);}}stopAdsRestoreQualitySettingTimer(){null!=this.adsRestoreQualitySettingTimer&&(this.adsRestoreQualitySettingTimer.stop(),this.adsRestoreQualitySettingTimer=null);}onAdClipInStreamPlaying(e){null!=this.video&&null!=this.media&&(this.inStreamAdvertStartPos=this.video.currentTime,null!=e.data&&e.data.adStartTime>=0&&(this.inStreamAdvertStartPos=e.data.adStartTime),this.inStreamAdvertMedia=null,null!=e&&null!=e.data&&(this.inStreamAdvertMedia=e.data.media));}onAdClipInStreamEnd(e){this.inStreamAdvertStartPos=null,this.inStreamAdvertMedia=null;}onAdInStreamBreaksInfo(e){null!=e&&null!=e.data&&(this.adBreaksInfo=e.data);}updateMediaPlaybackInfo(){if(null!=this.media&&this.hasAudioInitialized){let e=this.media instanceof u;if(this.media.mediaPlaybackInfo.currentTime=this.currentTime,e&&(this.video.currentTime>86400&&null==this.seekingTargetTs?this.media.mediaPlaybackInfo.currentTime=this.video.currentTime:this.seekingTargetTs>0?this.media.mediaPlaybackInfo.currentTime=this.seekingTargetTs:this.media.mediaPlaybackInfo.currentTime=this.dvrWindowRelativeTimeToTs(this.currentTime)),this.media.mediaPlaybackInfo.isPlaying=!this.video.paused,this.media.mediaPlaybackInfo.currentTotalBitrateKpbs=this.getCurrentTotalBitrateKbps(),this.media.mediaPlaybackInfo.playbackRate=this.getPlaybackRate(),this.playbackRateMetter.setCurrentTime(this.media.mediaPlaybackInfo.currentTime,null,this.video.paused),e){let e=this.media,t=this.getDVRWindowRange();t.end<t.start&&(t=this.getSeekableRange(),this.media.mediaPlaybackInfo.currentTime=this.video.currentTime),e.dvrWindowLength=t.end-t.start,e.dvrWindowLiveEdge=t.end;}}}dispatchEvent(e,t){let i=0,s=null,a=this.currentTime;null!=this.video&&(i=this.video.duration,s=this.video.currentSrc,!isNaN(i)&&null!=i||null==this.media||(i=this.media.duration),this.updateMediaPlaybackInfo(),null!=this.media&&this.hasAudioInitialized&&this.media instanceof u&&(i=this.media.dvrWindowLength,null!=this.dvrWindowStartTimeTs&&null!=this.dvrWindowEndTimeTs&&(i=this.dvrWindowEndTimeTs-this.dvrWindowStartTimeTs))),this.isInStreamAdvertisement&&this.inStreamAdvertStartPos>=0&&(a=this.video.currentTime-this.inStreamAdvertStartPos,null!=this.inStreamAdvertMedia&&(i=this.inStreamAdvertMedia.duration),a>i&&(a=i),0==this.video.currentTime&&a<0&&(a=i,null!=this.media&&null!=this.media.mediaPlaybackInfo&&(this.media.mediaPlaybackInfo.currentTime=this.inStreamAdvertStartPos+i)),a<0&&this.currentTime-this.inStreamAdvertStartPos>=0&&(a=this.currentTime-this.inStreamAdvertStartPos)),null!=this.media&&null!=this.media.mediaPlaybackInfo&&this.scte35PendingEvents.length>0&&this.processPendingScte35Events(),e.data={duration:i,currentTime:a,source:s,media:this.media,additionalData:t},this.isPlaybackNotAllowed&&(null==e.data.additionalData&&(e.data.additionalData={}),e.data.additionalData.isPlaybackNotAllowed=!0);let n=this.getThroughput();null!=n&&(null==e.data.additionalData&&(e.data.additionalData={}),e.data.additionalData.throughput=n),e.dispatch(this.context);}attachSubtitlesRenderer(e){this.subtitlesRenderer=e;}attachVideo(e){if(this.video==e&&!this.hasProtectionData)return;null==this.playerWrapper&&(this.playerWrapper=new T),this.cleanPlayer(),Object.prototype.hasOwnProperty.call(this.variables,"qualitySelectionEnabled")&&(this.isQualitySelectionEnabled=i.field(this.variables,"qualitySelectionEnabled")),this.video=e,null!=this.video&&1==this.video.muted&&1!=this.initialVideoIsMuted&&(this.initialVideoIsMuted=!0);let t={streaming:{fastSwitchEnabled:!b.isSmartTV(),lowLatencyEnabled:!1,lastMediaSettingsCachingInfo:{enabled:!1}}};Object.prototype.hasOwnProperty.call(this.variables,"saveBandwidthMode")&&I.__cast(this.variables.saveBandwidthMode,B)&&(t.streaming.abr={limitBitrateByPortal:!0,usePixelRatioInLimitBitrateByPortal:!0});let s=this.getQualityInitialBandwidthKbs();null!=s&&!isNaN(s)&&isFinite(s)&&(t.streaming.abr={initialBitrate:{video:s}}),this.player=this.playerWrapper.getMediaPlayer(),Object.prototype.hasOwnProperty.call(this.variables,"system73")&&0==this.videoRestartsOnError&&window.BigInt&&window.S73DashjsWrapper&&!this.isAdvertisement&&(this.s73Wrapper=S73DashjsWrapper(i.field(this.variables,"system73"),{dashjs:window.bradmax.dashjs}),this.s73Wrapper.wrapPlayer(this.player));let a=this;if(this.player.extend("RequestModifier",(function(){return {modifyRequestURL:function(e){return e},modifyRequestHeader:function(e){return e instanceof XMLHttpRequest&&i.isFunction(e.addEventListener)&&e.addEventListener("progress",(function(e){a.emitNetworkActivity(e);})),e}}}),!1),this.player.initialize(e),this.initSubtitlesPlaceholder(),this.player.updateSettings(t),Object.prototype.hasOwnProperty.call(this.pluginConfig,"dashSettings")&&null!=i.field(this.pluginConfig,"dashSettings")){let e=i.field(this.pluginConfig,"dashSettings");try{if(null!=i.field(e,"lowEndDevicesSettings")){let t=i.field(e,"lowEndDevicesSettings");if(i.deleteField(e,"lowEndDevicesSettings"),t.enableForJsHeapSizeLowerThan>0){window.performance.memory.jsHeapSizeLimit<t.enableForJsHeapSizeLowerThan&&null!=t.settings&&(e=t.settings);}}}catch(e){let t=_.caught(e).unwrap();console.error(t);}this.player.updateSettings(e);}this.updateAutoSwitchQuality(!0),this.player.setProtectionData(null),this.player.on("metricAdded",A(this,this.onDashJsMetricAdded)),this.player.on("qualityChangeRequested",A(this,this.onDashJsQualityChangeRequested)),this.player.on("public_keySessionCreated",A(this,this.onDashJsKeySessionCreated)),this.player.on("error",A(this,this.onDashJsError)),this.player.on("playbackStarted",A(this,this.onDashJsPlaybackStarted)),this.player.on("playbackNotAllowed",A(this,this.onDashJsPlaybackNotAllowed)),this.player.on("public_licenseRequestComplete",A(this,this.onDashJsLicenseRequestComplete)),this.player.on("inbandEvents",A(this,this.onScte35InbandEvents)),this.player.on("urn:scte:scte35:2013:xml+bin",A(this,this.onScte35MpdEvent)),this.player.on("urn:scte:scte35:2014:xml+bin",A(this,this.onScte35MpdEvent)),this.player.on("gapCausedInternalSeek",A(this,this.onSeekingOverVideoGap)),this.player.on("gapCausedSeekToPeriodEnd",A(this,this.onSeekingOverVideoGap)),this.video.addEventListener("pause",A(this,this.onDashJsPause)),this.video.addEventListener("play",A(this,this.onDashJsPlay)),this.video.addEventListener("playing",A(this,this.onDashJsPlaying)),this.video.addEventListener("timeupdate",A(this,this.onDashJsTimeupdate)),this.video.addEventListener("durationchange",A(this,this.onDashJsDurationchange)),this.video.addEventListener("waiting",A(this,this.onDashJsWaiting)),this.video.addEventListener("ended",A(this,this.onDashJsEnded)),this.video.addEventListener("seeked",A(this,this.onDashJsSeeked)),null!=this.video.textTracks&&this.video.textTracks.addEventListener("addtrack",A(this,this.onAddTrack)),this.video.addEventListener("ratechange",A(this,this.onVideoRateChange)),this.checkPlaybackRate(),this.triggerVideoPlaybackRateEvent();}setPlaybackRate(e){this.isAdvertisement||(this.playbackRate=e,this.checkPlaybackRate());}getPlaybackRate(){return null==this.player?1:this.player.getPlaybackRate()}onVideoRateChange(e){this.triggerVideoPlaybackRateEvent();}triggerVideoPlaybackRateEvent(){if(this.isAdvertisement)return;let e=new o("playbackRate");e.data=this.getPlaybackRate(),e.dispatch(this.context);}checkPlaybackRate(){let e;if(this.isAdvertisement)e=!0;else {let t=this.playbackRate;e=isNaN(t);}e||this.getPlaybackRate()==this.playbackRate||this.player.setPlaybackRate(this.playbackRate);}emitNetworkActivity(e){let t=new o("networkActivityUrl");t.data={url:i.field(e.target,"responseURL"),loaded:e.loaded},t.dispatch(this.context);}cleanPlayer(){if(null!=this.s73Wrapper){try{this.s73Wrapper.destroy();}catch(e){}this.s73Wrapper=null;}null!=this.video&&(this.video.removeEventListener("pause",A(this,this.onDashJsPause)),this.video.removeEventListener("play",A(this,this.onDashJsPlay)),this.video.removeEventListener("playing",A(this,this.onDashJsPlaying)),this.video.removeEventListener("timeupdate",A(this,this.onDashJsTimeupdate)),this.video.removeEventListener("durationchange",A(this,this.onDashJsDurationchange)),this.video.removeEventListener("waiting",A(this,this.onDashJsWaiting)),this.video.removeEventListener("ended",A(this,this.onDashJsEnded)),this.video.removeEventListener("seeked",A(this,this.onDashJsSeeked)),null!=this.video.textTracks&&this.video.textTracks.removeEventListener("addtrack",A(this,this.onAddTrack)),this.video.removeEventListener("ratechange",A(this,this.onVideoRateChange))),null!=this.player&&(this.player.off("metricAdded",A(this,this.onDashJsMetricAdded)),this.player.off("qualityChangeRequested",A(this,this.onDashJsQualityChangeRequested)),this.player.off("public_keySessionCreated",A(this,this.onDashJsKeySessionCreated)),this.player.off("error",A(this,this.onDashJsError)),this.player.off("playbackStarted",A(this,this.onDashJsPlaybackStarted)),this.player.off("playbackNotAllowed",A(this,this.onDashJsPlaybackNotAllowed)),this.player.off("public_licenseRequestComplete",A(this,this.onDashJsLicenseRequestComplete)),this.player.off("inbandEvents",A(this,this.onScte35InbandEvents)),this.player.off("urn:scte:scte35:2013:xml+bin",A(this,this.onScte35MpdEvent)),this.player.off("urn:scte:scte35:2014:xml+bin",A(this,this.onScte35MpdEvent)),this.player.off("gapCausedInternalSeek",A(this,this.onSeekingOverVideoGap)),this.player.off("gapCausedSeekToPeriodEnd",A(this,this.onSeekingOverVideoGap)),this.reset(),this.player=null,this.video=null);}isPaused(){return null==this.video||this.video.paused}onDashJsPause(e){return null==this.seekDebouncerTimer&&this.dispatchEvent(this.isAdvertisement?new n("adPaused"):new o("paused")),this.media instanceof u||null==this.video||this.video.currentTime>0&&Math.abs(this.video.currentTime-this.video.duration)<.5&&(this.streamCompleteWatchdogTimer=E.delay(A(this,this.onStreamCompleteWatchdogTimeout),1e3)),null}onDashJsPlay(e){return this.isBrowserStillDecodingAfterBuffering()||this.hasSeekingStartTriggeded||this.isBuffering||(this.checkPlaybackRate(),this.dispatchEvent(this.isAdvertisement?new n("adPlaying"):new o("playing"))),null}isBrowserStillDecodingAfterBuffering(){return null!=this.video&&0==this.video.playbackRate}onDashJsPlaying(e){this.hasSeekingStartTriggeded&&this.onDashJsSeeked({dashFakeEventFix:!0});let t=b.isSmartTV()&&!this.playbackRateMetter.isPlayingNormal(!0);return this.isBrowserStillDecodingAfterBuffering()||t?("Firefox"==b.browserName&&(this.firefoxDrmDecodeLagTimerTs=this.getNowTs()),!this.isBuffering&&this.shouldBufferingBeVisible()&&(this.dispatchEvent(new o("bufferingStart")),this.isBuffering=!0)):(null!=this.firefoxDrmDecodeLagTimerTs&&(this.firefoxDrmDecodeLag=this.getNowTs()-this.firefoxDrmDecodeLagTimerTs,this.firefoxDrmDecodeLagTimerTs=null),this.isBuffering||this.dispatchEvent(this.isAdvertisement?new n("adPlaying"):new o("playing"))),this.initializePlaybackStartTimeIfNeeded(),this.stopLiveStreamRestartTimeoutTimer(),this.stopLiveStreamRestartDelayTimer(),this.stopStreamBufferingWatchdogTimer(),!this.isBrowserStillDecodingAfterBuffering()&&this.isBuffering&&!t&&null!=this.video&&(this.video.playbackRate>0||null==this.video.playbackRate)&&(this.dispatchEvent(new o("bufferingEnd")),this.isBuffering=!1,this.shouldBePlaying&&this.dispatchEvent(this.isAdvertisement?new n("adPlaying"):new o("playing"))),null}initializePlaybackStartTimeIfNeeded(){if(0==this.startTimeStatus&&null!=this.video){let e=this.media instanceof u?4:1;if(b.isSmartTV()&&!b.isSamsungSmartTVTizen&&(e=4),this.video.readyState>=e){this.startTimeStatus=1,this.onDashJsDurationchange({});let e=this.getPlaybackStartTime(this.media),t=e;e>0&&this.hasDashJsInitializedSource?(this.media instanceof u&&(e=this.normalizeDvrTime(e),t=this.dvrTimestampToRelativeTime(e),t<=this.getLiveMinimalInitialOffsetForOldestPart()&&(t="Firefox"==b.browserName&&null!=this.firefoxDrmDecodeLag?1.25*this.firefoxDrmDecodeLag+this.getLiveMinimalInitialOffsetForOldestPart():this.getLiveMinimalInitialOffsetForOldestPart(),e=this.dvrWindowRelativeTimeToTs(t))),t<this.video.duration?(this.currentTime=t,this.updateMediaPlaybackInfo(),this.performPlayerSeek(e,!1)):(this.startTimeStatus=2,this.onStartTimeInitFinalized(),console.warn("Warning: Start time is ignored. Start time for video got invalid value (startTime: "+e+", duration:"+this.video.duration+")."))):(this.startTimeStatus=2,this.onStartTimeInitFinalized());}}if(null!=this.prePlaybackSeekRelativePosition&&this.video.readyState>=1){let e=this.prePlaybackSeekRelativePosition;this.prePlaybackSeekRelativePosition=null,this.video.duration>0&&Math.abs(this.video.duration-this.media.duration)>2&&(this.seek(e*this.video.duration),this.pause());}}onStartTimeInitFinalized(){this.media instanceof u&&null!=this.video&&!this.video.paused&&!this.shouldBePlaying&&this.player.pause();}onDashJsTimeupdate(e){let t=this.media instanceof u,i=null!=this.dvrWindowStartTimeTs||null!=this.dvrWindowEndTimeTs,s=this.getNowTs();if(this.playbackRateMetter.isPlayingNormal()&&this.lastRestartTs>0&&s-this.lastRestartTs>30&&(this.videoRestartsOnError=0),this.stopDrmLiceseCheckCleanupTimer(),this.stopStreamBufferingWatchdogTimer(),b.isSamsungSmartTVTizen&&this.initializePlaybackStartTimeIfNeeded(),!this.hasPlaybackSuccStarted&&null!=this.video&&this.video.readyState>=4&&this.currentTime>0&&(this.hasPlaybackSuccStarted=!0,this.selectAudioAndSubtitlesAfterInitialization()),t&&!i&&null==this.liveStreamNowOffset){let e=this.getDVRWindowRange();null==e||e.end<=0||(this.liveStreamNowOffset=s-e.end,null==this.dvrWindowStartTimeTs&&null==this.dvrWindowEndTimeTs&&0<this.liveStreamNowOffset&&this.liveStreamNowOffset<.025*(e.end-e.start)&&(this.liveStreamNowOffset=0),this.liveStreamNowOffsetLastUpdate=s);}if(t&&i&&s-this.liveStreamNowOffsetLastUpdate>1){let e=this.getDVRWindowRange();null==e||e.end<=0||(this.liveStreamNowOffset=s-e.end,null==this.dvrWindowStartTimeTs&&null==this.dvrWindowEndTimeTs&&0<this.liveStreamNowOffset&&this.liveStreamNowOffset<.025*(e.end-e.start)&&(this.liveStreamNowOffset=0),this.liveStreamNowOffsetLastUpdate=s);}if(t&&null==this.liveEdgeUpdateTimer&&(this.liveEdgeUpdateTimer=new E(1e3),this.liveEdgeUpdateTimer.run=A(this,this.onLiveEdgeUpdate),this.seekableInitialRange=this.getSeekableRange()),!this.isPlaybackNotAllowed||this.isBuffering||null==this.video||this.video.paused||this.video.seeking||(this.isPlaybackNotAllowed=!1),2==this.startTimeStatus&&this.video.playbackRate>0&&1==this.hideVideoTag){this.hideVideoTag=!1,null!=this.video&&(this.video.style.display="block",this.video.style.opacity="1",this.video.style.visibility="visible");let e=!1,t=this.video.paused;try{this.video.muted=this.initialVideoIsMuted;let i=!this.initialVideoIsMuted&&this.video.muted!=this.initialVideoIsMuted,s=!t&&this.video.paused;e=i||s;}catch(t){e=!0;}e&&this.onDashJsPlaybackNotAllowed({});}if(this.video.currentTime<=.1||null==this.video.currentTime){if(this.lastGapEnd>0&&Math.abs(this.currentTime-this.lastGapEnd)<3)return null;let e=!1;try{let t=0,i=this.video.buffered.length;for(;t<i;){let i=t++;this.video.buffered.start(i)<=0&&0<=this.video.buffered.end(i)&&(e=!0);}}catch(e){}if(!e)return null}if(null==this.seekDebouncerTimer){let e=this.video.currentTime;if(t&&(e=this.dvrWindowRelativeTimeFromTs(e)),null!=this.seekingTargetPos&&this.video.currentTime<this.seekingTargetPos&&this.seekingTargetPos-10<this.video.currentTime)return null;if(null!=this.currentTime&&null!=e&&e<this.currentTime&&e<=.1)return null;this.seekingTargetPos=null,this.currentTime=e,this.updateMediaPlaybackInfo();}return 2==this.startTimeStatus&&this.dispatchEvent(this.isAdvertisement?new n("adCurrentTimeChange"):new o("currentTimeChange")),this.isBuffering&&null!=this.video&&!this.video.paused&&!this.video.seeking&&this.video.readyState>=4&&this.playbackRateMetter.isPlayingNormal()&&(this.video.playbackRate>0||null==this.video.playbackRate)&&(this.dispatchEvent(new o("bufferingEnd")),this.isBuffering=!1,this.shouldBePlaying&&this.dispatchEvent(this.isAdvertisement?new n("adPlaying"):new o("playing"))),t&&null!=this.dvrWindowEndTimeTs&&2==this.startTimeStatus&&this.media.mediaPlaybackInfo.currentTime>this.dvrWindowEndTimeTs&&(new r("skinPause").dispatch(this.context),this.stopStreamCompleteWatchdogTimer(),this.dispatchEvent(this.isAdvertisement?new n("adComplete"):new o("complete"))),null}processPendingScte35Events(){let e=0,t=0,i=this.scte35PendingEvents;for(;t<i.length;){let s=i[t];if(++t,s.calculatedPresentationTime<=this.media.mediaPlaybackInfo.currentTime){let t=new l("scte35Tag");t.data=s,t.dispatch(this.context),++e;}}if(e>0){let e=[],t=0,i=this.scte35PendingEvents;for(;t<i.length;){let s=i[t];++t,s.calculatedPresentationTime>this.media.mediaPlaybackInfo.currentTime&&e.push(s);}this.scte35PendingEvents=e;}}updateLastStreamNowOffsetParam(e){let t=this.getDVRWindowRange();null==t||t.end<=0||(this.liveStreamNowOffset=e-t.end,null==this.dvrWindowStartTimeTs&&null==this.dvrWindowEndTimeTs&&0<this.liveStreamNowOffset&&this.liveStreamNowOffset<.025*(t.end-t.start)&&(this.liveStreamNowOffset=0),this.liveStreamNowOffsetLastUpdate=e);}onDashJsDurationchange(e){if(this.initializePlaybackStartTimeIfNeeded(),this.media instanceof d&&!(this.media instanceof u)&&this.video.duration==1/0){let e=new u,t=a.getInstanceFields(d),s=0;for(;s<t.length;){let a=t[s];++s,e[a]=i.field(this.media,a);}this.media=e;let n=new l("mediaAfterPlaybackStartMetadata");n.data=e,n.dispatch(this.context);}if(this.media instanceof u&&this.video.duration!=1/0&&this.video.duration>0){let e=new d,t=a.getInstanceFields(d),s=0;for(;s<t.length;){let a=t[s];++s,e[a]=i.field(this.media,a);}this.media=e;let n=new l("mediaAfterPlaybackStartMetadata");n.data=this.media,n.dispatch(this.context);}return this.media.duration=this.video.duration,this.dispatchEvent(this.isAdvertisement?new n("adDurationChange"):new o("durationChange")),null}onDashJsWaiting(e){return this.androidVideoBufferFix(),!this.isBuffering&&this.shouldBufferingBeVisible()&&(this.dispatchEvent(new o("bufferingStart")),this.isBuffering=!0),this.stopStreamBufferingWatchdogTimer(),this.streamBufferingWatchdogTimer=E.delay(A(this,this.onStreamBufferingWatchdogTimeout),22e3),null}androidVideoBufferFix(){b.isAndroid&&"Chrome"==b.browserName&&null!=this.video&&(this.video.style.transform="rotate(0.1deg)");}shouldBufferingBeVisible(){let e=null!=this.getAdsInStreamMaxQualityScalingRatio(),t=!1;try{if(e&&null!=this.player&&null!=this.player.getActiveStream()&&null!=this.video){let e=this.player.getActiveStream().getProcessors(),i=0;for(;i<e.length;){let s=e[i++].getBuffer().getBuffer().buffered;if(null==s)continue;let a=0,n=s.length;for(;a<n;)Math.abs(this.video.currentTime-s.end(a++))<.5&&(t=!0);}null!=this.lastGapEnd&&Math.abs(this.video.currentTime-this.lastGapEnd)<.5&&(t=!0);}}catch(e){}return !this.isInStreamAdvertisement&&!t||!e}onAddTrack(e){let t=this.isAdvertisement?new n("addTrack"):new o("addTrack");t.data={track:e},t.dispatch(this.context);}onScte35InbandEvents(e){if(null!=e&&null!=e.events&&e.events.length>0){let t=e.events,i=0;for(;i<t.length;){let e=t[i];++i,e.calculatedPresentationTime>0&&this.scte35PendingEvents.push(e);}}}onScte35MpdEvent(e){if(null!=e&&null!=e.event){let t=new l("scte35Tag");t.data=e.event,t.dispatch(this.context);}}onSeekingOverVideoGap(e){if(null!=e&&e.seekTime>0&&(this.lastGapEnd=e.seekTime),this.isInStreamAdvertisement&&(this.currentTime=e.seekTime,this.dispatchEvent(this.isAdvertisement?new n("adCurrentTimeChange"):new o("currentTimeChange"))),this.isBuffering||(new o("bufferingStart").dispatch(this.context),this.isBuffering=!0),this.seekingOverVideoGapMeter.add(),this.seekingOverVideoGapMeter.getLoad()>4){let e=this.currentTime+3;this.media.duration>0&&!(this.media instanceof u)||(this.player.pause(),this.handleVideoRestart()),this.seek(e);}if(null!=e&&e.duration>10){let e=this.currentTime+1;this.player.pause(),this.media.mediaUserSettings.resumePostion=e,this.handleVideoRestart();}}onDashJsEnded(e){return this.stopStreamCompleteWatchdogTimer(),this.dispatchEvent(this.isAdvertisement?new n("adComplete"):new o("complete")),null}onDashJsSeeked(e){this.androidVideoBufferFix();let t=this.hasSeekingStartTriggeded;this.hasSeekingStartTriggeded=!1,1==this.startTimeStatus&&(this.startTimeStatus=2,this.onStartTimeInitFinalized(),this.shouldBePlaying&&this.play());let i=0;if(null!=this.seekingStartDate&&(i=((new Date).getTime()-this.seekingStartDate.getTime())/1e3,this.seekingAvgTime<i?this.seekingAvgTime=i:this.seekingAvgTime=.5*this.seekingAvgTime+.5*i),this.media instanceof u){let e=this.getDVRWindowRange(),t=this.getSeekableRange();if(null!=this.seekableInitialRange&&Math.abs(this.seekableInitialRange.start-t.start)>1&&!this.isDVRRecordedForStartOver(t)&&this.video.currentTime<e.start)return this.seek(3*this.getLiveMinimalInitialOffsetForOldestPart()),null}return t&&this.dispatchEvent(this.isAdvertisement?new n("seekingEnd"):new o("seekingEnd"),Object.prototype.hasOwnProperty.call(e,"dashFakeEventFix")?{dashFakeEventFix:!0}:null),this.stopStreamBufferingWatchdogTimer(),this.seekingTargetTs=null,!this.shouldBePlaying&&this.isBuffering&&(this.dispatchEvent(new o("bufferingEnd")),this.isBuffering=!1,this.dispatchEvent(this.isAdvertisement?new n("adPaused"):new o("paused"))),null}getLiveMinimalInitialOffsetForOldestPart(){return null!=this.dvrWindowStartTimeTs?0:1.5*this.seekingAvgTime}onDashJsPlaybackStarted(e){return this.shouldBePlaying||this.pause(),null}onDashJsPlaybackNotAllowed(e){return this.log("BRADMAX PLAYER NOTICE:\nBrowser doesn't allow for autoplaying video without user interaction.\nPlayer is waiting for user 'play' click. You can autoplay muted video (mute=true).\n\nMode details about browser autoplay policy: https://developers.google.com/web/updates/2017/09/autoplay-policy-changes","warn"),this.isPlaybackNotAllowed=!0,null!=this.player&&this.player.pause(),this.dispatchEvent(this.isAdvertisement?new n("adCurrentTimeChange"):new o("currentTimeChange")),this.dispatchEvent(this.isAdvertisement?new n("adPaused"):new o("paused")),this.shouldBePlaying=!1,null}onDashJsError(e){if(this.isAdvertisement&&!this.isInStreamAdvertisement)return this.dispatchEvent(new n("adMediaError"),this.prepareErrorMessage(e)),null;if(!(null==e||null!=e.data||null!=this.video.getAttribute("src")&&""!=this.video.getAttribute("src")||this.hasProtectionData||this.isNetworkConnectionProblem(e)))return null;if(null!=this.video&&(this.hideVideoTag=!1,null!=this.video&&(this.video.style.display="block",this.video.style.opacity="1",this.video.style.visibility="visible"),this.video.muted=this.initialVideoIsMuted),null!=e&&null!=e.error&&null!=e.error.message){let t="bradmax.player.error: "+s.string(e.error.message);console.error(t),console.error(e);}let t=!0,i=this.media instanceof u,a=b.isAndroid&&"Chrome"==b.browserName&&null!=e&&null!=e.error&&(112==e.error.code||113==e.error.code)&&"MediaKeys"in window||"WebKitMediaKeys"in window||"MSMediaKeys"in window&&null!=this.media&&null!=this.media.drmCustomLicenseServerHandler,r=null!=e&&null!=e.error&&null!=e.error.message&&-1!=e.error.message.indexOf("DRM err"),l=this.isQuickFallbackPathForLiveEnabled&&i&&this.media.hasFallbackSources(),h=!a&&(!r||b.isSamsungSmartTVTizen)&&!l&&(i||Object.prototype.hasOwnProperty.call(this.media.customParams.h,"maxRestartsNumOnPlaybackError")),d=this;if(h&&this.videoRestartsOnError<this.getLimitOfRestarts()){t=!1;let s=i?5e3:0;this.stopLiveStreamRestartTimeoutTimer(),this.stopLiveStreamRestartDelayTimer(),this.stopDrmLiceseCheckCleanupTimer(),this.stopStreamCompleteWatchdogTimer(),this.stopStreamBufferingWatchdogTimer(),this.liveStreamRestartDelayTimer=E.delay((function(){i||null==d.media||null==d.media.mediaUserSettings||(d.media.mediaUserSettings.resumePostion=d.currentTime),d.handleVideoRestart();let t={dashError:e.data,currTry:d.videoRestartsOnError};d.dispatchEvent(d.isAdvertisement?new n("adMediaErrorFallbackTry"):new o("mediaErrorFallbackTry"),t);}),s);}if(t)if(this.stopLiveStreamRestartTimeoutTimer(),this.stopLiveStreamRestartDelayTimer(),this.stopDrmLiceseCheckCleanupTimer(),this.stopStreamCompleteWatchdogTimer(),this.stopStreamBufferingWatchdogTimer(),a)this.dispatchEvent(new o("drmModuleCrush"),this.prepareErrorMessage(e)),this.reset();else if(null!=this.media&&null!=this.media.drmCustomLicenseServerHandler&&null!=this.media.drmCustomLicenseServerHandler.getLastError())this.dispatchEvent(new o("drmAuthenticationError"),this.prepareErrorMessage(this.media.drmCustomLicenseServerHandler.getLastError())),this.reset();else if(r)if(l){let t=this.prepareErrorMessage(e);t.isTemporaryNetworkIssue=!0,this.dispatchEvent(this.isAdvertisement?new n("adMediaError"):new o("loadError"),t),this.reset();}else this.dispatchEvent(new o("drmAuthenticationError"),this.prepareErrorMessage(e)),this.reset();else if(this.isNetworkConnectionProblem(e))if(this.hasPlaybackSuccStarted){this.dispatchEvent(this.isAdvertisement?new n("adConnectionError"):new o("connectionError"),this.prepareErrorMessage(e));try{null!=this.player&&this.player.pause();}catch(e){}}else {let t=this.prepareErrorMessage(e);t.isTemporaryNetworkIssue=!1,this.dispatchEvent(this.isAdvertisement?new n("adMediaError"):new o("loadError"),t),this.reset();}else this.dispatchEvent(this.isAdvertisement?new n("adMediaError"):new o("mediaError"),this.prepareErrorMessage(e)),this.reset();return null}prepareErrorMessage(e){let t=this.isNetworkConnectionProblem(e)&&(this.media instanceof c||this.video.currentTime>0||null!=e&&null!=e.error&&null!=e.error.data&&null!=e.error.data.response&&e.error.data.response.status>=500||null!=this.media.mediaUserSettings&&this.media.mediaUserSettings.resumePostion>0),i="";return null!=e&&null!=e.error&&null!=e.error.message&&(i=""+s.string(e.error.message)),{errObj:e,isTemporaryNetworkIssue:t,message:i}}isNetworkConnectionProblem(e){return null!=e&&null!=e.error&&25<=e.error.code&&e.error.code<=29}handleVideoRestart(){this.videoRestartsOnError++,this.lastRestartTs=this.getNowTs(),null!=this.media&&null!=this.media.drmCustomLicenseServerHandler&&this.media.drmCustomLicenseServerHandler.clearCertCache(),this.stopLiveStreamRestartTimeoutTimer(),this.stopLiveStreamRestartDelayTimer(),this.stopStreamBufferingWatchdogTimer(),this.playbackRateMetter.reset(),this.startTimeStatus=0;let e=this.video;this.cleanVideoAndPlayer(),this.attachVideo(e),null!=this.subtitlesSelected&&(this.subtitlesSetWaitingForSelection=this.subtitlesSelected),this.play(),this.media instanceof u&&(this.liveStreamRestartTimeoutTimer=E.delay(A(this,this.onDashJsLivestreamRestartTimeout),5e3*(1+(this.videoRestartsOnError-1)/4)|0));}onDashJsLivestreamRestartTimeout(){this.videoRestartsOnError<this.getLimitOfRestarts()?this.handleVideoRestart():this.dispatchEvent(this.isAdvertisement?new n("adConnectionError"):new o("connectionError"),{message:"Livestream restart all tries failed.",isTemporaryNetworkIssue:!0});}getLimitOfRestarts(){return null!=this.media&&null!=this.media.drmCustomLicenseServerHandler&&null!=this.media.drmCustomLicenseServerHandler.getLastError()?1:null!=this.media&&null!=this.media.customParams&&Object.prototype.hasOwnProperty.call(this.media.customParams.h,"maxRestartsNumOnPlaybackError")&&this.media.customParams.h.maxRestartsNumOnPlaybackError>0?this.media.customParams.h.maxRestartsNumOnPlaybackError:5}onDashJsMetricAdded(e){if(null!=e&&null!=e.metric){if("ManifestUpdate"==e.metric&&(this.hasDashJsInitializedManifest=!0),!this.hasAudioInitialized&&this.hasDashJsInitializedManifest&&"SchedulingInfo"==e.metric){let e=this.player.getTracksFor("video"),t=this.player.getTracksFor("audio");null!=e&&e.length>0&&null!=t&&t.length>0&&(this.hasAudioInitialized=!0,this.updateAudioSets());}if(!this.hasSubtitlesInitialized&&null!=this.video.textTracks&&this.video.textTracks.length>0&&(this.hasSubtitlesInitialized=!0,this.updateSubtitlesSets()),!this.hasCodecInfoInitialized&&"RepSwitchList"==e.metric){let e=this.player.getCurrentTrackFor("video"),t=this.player.getCurrentTrackFor("audio");if(null!=e&&Object.prototype.hasOwnProperty.call(e,"codec")&&null!=t&&Object.prototype.hasOwnProperty.call(t,"codec")){let i=new l("codecData"),s=function(e){let t=e.split(";"),i=0;for(;i<t.length;){let e=t[i];if(++i,0==e.indexOf("codecs")){let t=e.split("=");if(t.length>0)return t[1].split('"').join("")}}return ""};i.data={videoCodec:s(e.codec),audioCodec:s(t.codec)},i.dispatch(this.context),this.hasCodecInfoInitialized=!0;}}if(this.isQualitySelectionEnabled&&!this.hasQualityInfoInitialized&&"RepSwitchList"==e.metric){let e=this.player.getBitrateInfoListFor("video");if(null!=e&&e.length>1){this.hasQualityInfoInitialized=!0;let e=new l("videoQualityData");e.data=this.getQualityLevels(),e.dispatch(this.context);let t=this.player.getQualityFor("video");if(null!=t){let e=new l("videoQualityPlaybackLevelChange");e.data=t,e.dispatch(this.context);}let i=new r("videoQualityHasChanged"),s=this.getQualityInitialBandwidthKbs();null!=s&&!isNaN(s)&&isFinite(s)?i.data=t:i.data="-1",i.dispatch(this.context);}}}return null}onDashJsQualityChangeRequested(e){if(this.hasQualityInfoInitialized&&null!=e&&"video"==e.mediaType&&null!=e.newQuality){let t=new l("videoQualityPlaybackLevelChange");t.data=e.newQuality,t.dispatch(this.context);}return null}onDashJsLicenseRequestComplete(e){this.stopDrmLiceseCheckCleanupTimer(),this.drmLicenseCheckStatus=1,this.shouldBePlaying&&this.startDrmLiceseCheckCleanupTimer();}startDrmLiceseCheckCleanupTimer(){this.stopDrmLiceseCheckCleanupTimer();let e=2e4;Object.prototype.hasOwnProperty.call(this.pluginConfig,"DRM_LICENSE_CHECK_MECHANISM_TIMEOUT")&&null!=i.field(this.pluginConfig,"DRM_LICENSE_CHECK_MECHANISM_TIMEOUT")&&(e=i.field(this.pluginConfig,"DRM_LICENSE_CHECK_MECHANISM_TIMEOUT")),this.drmLicenseCheckMechanismTimeoutTimer=E.delay(A(this,this.onDashJsLicenseKeyCheckTimeout),e);}stopDrmLiceseCheckCleanupTimer(){1==this.drmLicenseCheckStatus&&this.hasPlaybackSuccStarted&&(this.drmLicenseCheckStatus=2),null!=this.drmLicenseCheckMechanismTimeoutTimer&&(this.drmLicenseCheckMechanismTimeoutTimer.stop(),this.drmLicenseCheckMechanismTimeoutTimer=null);}stopLiveStreamRestartTimeoutTimer(){null!=this.liveStreamRestartTimeoutTimer&&(this.liveStreamRestartTimeoutTimer.stop(),this.liveStreamRestartTimeoutTimer=null);}stopStreamCompleteWatchdogTimer(){null!=this.streamCompleteWatchdogTimer&&(this.streamCompleteWatchdogTimer.stop(),this.streamCompleteWatchdogTimer=null);}onStreamCompleteWatchdogTimeout(){this.stopStreamCompleteWatchdogTimer(),this.dispatchEvent(this.isAdvertisement?new n("adComplete"):new o("complete"));}stopStreamBufferingWatchdogTimer(){null!=this.streamBufferingWatchdogTimer&&(this.streamBufferingWatchdogTimer.stop(),this.streamBufferingWatchdogTimer=null);}onStreamBufferingWatchdogTimeout(){this.stopStreamBufferingWatchdogTimer(),null!=this.media&&null!=this.media.mediaUserSettings&&null!=this.media.mediaPlaybackInfo&&(this.media.mediaUserSettings.resumePostion=this.media.mediaPlaybackInfo.currentTime+.1),this.handleVideoRestart();}stopLiveStreamRestartDelayTimer(){null!=this.liveStreamRestartDelayTimer&&(this.liveStreamRestartDelayTimer.stop(),this.liveStreamRestartDelayTimer=null);}stopLiveEdgeUpdateTimer(){null!=this.liveEdgeUpdateTimer&&(this.liveEdgeUpdateTimer.stop(),this.liveEdgeUpdateTimer=null);}onLiveEdgeUpdate(){null!=this.player&&this.hasDashJsInitializedSource&&!this.shouldBePlaying&&this.onDashJsTimeupdate({});}onDashJsLicenseKeyCheckTimeout(){this.stopDrmLiceseCheckCleanupTimer(),this.onDashJsError({data:{message:"DRM error. Cannot decode video with provided license key. License key is invalid."},error:{message:"DRM error. Cannot decode video with provided license key. License key is invalid."}});}getQualityLevels(){let e="resolution";Object.prototype.hasOwnProperty.call(this.variables,"qualityLabelType")&&(e=i.field(this.variables,"qualityLabelType"),e=e.toLowerCase());let t=this.player.getBitrateInfoListFor("video");if(null==t&&(t=[]),"resolution"==e){let i=0;for(;i<t.length;){let s=t[i];if(++i,0==s.width||0==s.height){e="bitrate";break}}}let a=[];a.push(new g("Auto","-1"));let n=0,r=t.length;for(;n<r;){let i=n++,r=new g("resolution"==e?s.string(t[i].height)+"p":this.mapBitrateToLabel(t[i].bitrate),null==i?"null":""+i);r.height=t[i].height,r.width=t[i].width,r.bitrateKbps=t[i].bitrate>0?t[i].bitrate/1e3:null,a.push(r);}return a.reverse(),a}mapBitrateToLabel(e){return Math.floor(e/1e3)+"k"}getCurrentTotalBitrateKbps(){if(null==this.player)return null;try{let e=this.player.getQualityFor("video"),t=this.player.getBitrateInfoListFor("video"),i=this.player.getQualityFor("audio"),s=this.player.getBitrateInfoListFor("audio");if(null==t||null==s||null==e||null==i||e<0||t.length<=e||i<0||s.length<=i)return null;let a=t[e].bitrate+s[i].bitrate;return a=Math.round(a/1e3),a}catch(e){return null}}getQualityInitialBandwidthKbs(){if(Object.prototype.hasOwnProperty.call(this.variables,"qualityInitialBandwidthKbs")){let e=i.field(this.variables,"qualityInitialBandwidthKbs");if(null!=e)return s.parseInt(e)}return null}isAutoSwitchQualityEnabled(){if(null==this.player.getSettings()||null==this.player.getSettings().streaming)return !1;let e=this.player.getSettings().streaming.abr;return null!=e&&null!=e.autoSwitchBitrate&&null!=e.autoSwitchBitrate.video&&1==e.autoSwitchBitrate.video}updateAutoSwitchQuality(e){let t=this.player.getSettings();t.streaming.abr.autoSwitchBitrate={video:e,audio:e},this.player.updateSettings(t);}onVideoQualityChange(e){if(null==e||null==e.data||"string"!=typeof e.data||null==this.player)return;let t=e.data,i="-1";if(this.isAutoSwitchQualityEnabled()||(i=s.string(this.player.getQualityFor("video"))),t==i)return;let a="-1"==t;if(a)this.updateAutoSwitchQuality(!0);else {let e=s.parseInt(t);this.updateAutoSwitchQuality(!1),this.player.setQualityFor("video",e);let i=this.player.getBitrateInfoListFor("video"),a=this.player.getBitrateInfoListFor("audio");null!=i&&null!=a&&a.length>1&&i.length>0&&this.player.setQualityFor("audio",Math.floor(a.length*e/i.length));}if(Object.prototype.hasOwnProperty.call(this.variables,"saveBandwidthMode")&&I.__cast(this.variables.saveBandwidthMode,B)){let e=this.player.getSettings();e.streaming.abr.limitBitrateByPortal=a,e.streaming.abr.usePixelRatioInLimitBitrateByPortal=a,this.player.updateSettings(e);}let n=new r("videoQualityHasChanged");n.data=t,n.dispatch(this.context);}onDashJsKeySessionCreated(e){return new o("drmAuthenticationComplete").dispatch(this.context),null}updateSubtitlesSets(){if(null!=this.video.textTracks&&this.video.textTracks.length>0){let e=[],t=0,i=this.video.textTracks;for(;t<i.length;){let s=i[t];if(++t,null==s.language||""==s.language)continue;let a=new m;a.id=null==e.length?"null":""+e.length,a.name=h.normalizeLanguageNameFormat(h.getLanguageNativeNameByCode(s.language)),null!=a.name&&""!=a.name||(a.name=s.language),a.languageCode=s.language,e.push(a);}if(null!=this.variables.subtitles&&e.length>0&&h.preselectSubtitlesSet(this.variables.subtitles,e),e.length>0){let t=new l("subtitleData");t.data=e,t.dispatch(this.context);}}}onSelectSubtitles(e){null!=e&&null!=this.video&&(this.hasPlaybackSuccStarted?this.performSubtitlesSelection(e.data):this.subtitlesSetWaitingForSelection=e.data);}performSubtitlesSelection(e){if(this.subtitlesSelected=null,null!=e){this.player.enableText(!0);let t=0,i=this.video.textTracks.length;for(;t<i;){let i=t++;(null==i?"null":""+i)==e.id&&(this.subtitlesSelected=e,this.player.setTextTrack(i));}}else this.player.enableText(!1);}initSubtitlesPlaceholder(){let e=this.video.parentElement.getElementsByClassName("htmlSubtitlesPlaceholder"),t=null;if(0==e.length){t=window.document.createElement("div"),t.setAttribute("class","htmlSubtitlesPlaceholder"),t.setAttribute("style","height: 100%;left: 0px;position: absolute;top: 0px;width: 100%;");let e=this.video.parentElement.childNodes,i=e.length-1,s=0,a=e.length;for(;s<a;){let t=s++;if(e.item(t)==this.video){i=t;break}}i<e.length-1?this.video.parentElement.insertBefore(t,e[i+1]):this.video.parentElement.appendChild(t);}else t=e.item(0),t.innerHTML="";this.player.getTTMLRenderingDiv()!=t&&this.player.attachTTMLRenderingDiv(t);}updateAudioSets(){let e=this.player.getTracksFor("audio"),t=!0;if(Object.prototype.hasOwnProperty.call(this.variables,"languageCodeDuplicationRemoval")&&(t=i.field(this.variables,"languageCodeDuplicationRemoval")),null!=e&&e.length>=this.minAudioTracksForInfo){let i=this.player.getCurrentTrackFor("audio"),s=[];if(null!=i){let t=0,a=e.length;for(;t<a;){let i=t++;s.push({track:e[i],tId:i});}s.sort((function(e,t){return (t.track.id==i.id?1:0)-(e.track.id==i.id?1:0)}));}let a=[],n=Object.create(null),r=0;for(;r<s.length;){let e=s[r];++r;let i=e.track,l=e.tId;if(!i.lang)continue;if(t&&Object.prototype.hasOwnProperty.call(n,i.lang))continue;let o=new p;o.id=null==l?"null":""+l,o.name=h.normalizeLanguageNameFormat(h.getLanguageNativeNameByCode(i.lang)),null!=o.name&&""!=o.name||(o.name=i.lang),o.languageCode=i.lang,a.push(o),n[i.lang]=!0;}if(a.length>=this.minAudioTracksForInfo){let e=new l("audioData");e.data=a,e.dispatch(this.context);}}}onSelectAudio(e){null!=e&&null!=this.player&&(this.hasPlaybackSuccStarted?this.performAudioSelection(e.data):this.audioSetWaitingForSelection=e.data);}performAudioSelection(e){if(null!=e&&null!=e.id&&""!=e.id){let t=this.player.getTracksFor("audio");this.player.setCurrentTrack(t[s.parseInt(e.id)]);}}selectAudioAndSubtitlesAfterInitialization(){null!=this.audioSetWaitingForSelection&&(this.performAudioSelection(this.audioSetWaitingForSelection),this.audioSetWaitingForSelection=null),null!=this.subtitlesSetWaitingForSelection&&(this.performSubtitlesSelection(this.subtitlesSetWaitingForSelection),this.subtitlesSetWaitingForSelection=null);}reset(){if(null!=this.player){this.hasProtectionData=!1,this.stopDrmLiceseCheckCleanupTimer(),this.stopLiveEdgeUpdateTimer();try{this.player.reset();}catch(e){}this.hasPlaybackSuccStarted=!1;}}pause(){null==this.player||!this.hasDashJsInitializedSource||this.media instanceof u&&2!=this.startTimeStatus||this.player.pause(),this.stopDrmLiceseCheckCleanupTimer(),this.shouldBePlaying=!1;}initSource(){if(null==this.media||null==this.media.source||0==this.media.source.length)return void this.dispatchEvent(this.isAdvertisement?new n("adMediaError"):new o("mediaError"),{message:"No video could be played. All video with fallback sources has failed."});let e=this;if(this.source!=this.media.source[0].url){null!=this.source&&this.reset();let t=this.media.source[0];if(null!=t.drm&&"playready"==t.drm.selectedDrmSystem)this.setPlayReadyDrmSupportPlayback();else if(null!=t.drm&&"widevine"==t.drm.selectedDrmSystem)this.setWidevineDrmSupportPlayback();else switch(b.browserName){case"Chrome":case"EdgeChromium":case"Firefox":case"Opera":this.setWidevineDrmSupportPlayback();break;case"Edge":case"Microsoft Internet Explorer":this.setPlayReadyDrmSupportPlayback();break;default:this.setDefaultPlayback();}this.source=this.media.source[0].url,E.delay((function(){e.isBuffering||(new o("bufferingStart").dispatch(e.context),e.isBuffering=!0);}),0);}}play(){if(2!=this.startTimeStatus&&null!=this.video&&(this.hideVideoTag=!0,null!=this.video&&(this.video.style.display="none",this.video.style.opacity="0",this.video.style.visibility="hidden"),this.video.muted=!0),this.initSource(),null!=this.player){if(1==this.drmLicenseCheckStatus&&this.startDrmLiceseCheckCleanupTimer(),this.media instanceof u){let e=this.getDVRWindowRange();this.video.currentTime<e.start?this.seek(0):this.video.currentTime>e.end&&this.seek(e.end-e.start);}try{this.hasDashJsInitializedSource&&this.player.play(),this.shouldBePlaying=!0;}catch(e){let t=_.caught(e).unwrap();this.onDashJsError({data:t,error:{message:s.string(t)}});}}}getMediaSource(e,t){let i=t;null==t&&(i=[".mpd"]);let s=0;for(;s<e.length;){let t=e[s];++s;let a=0;for(;a<i.length;)if(-1!=t.url.toLowerCase().indexOf(i[a++]))return t}null==t&&(i=[".ism/manifest",".isml/manifest"]);let a=0;for(;a<e.length;){let t=e[a];++a;let s=0;for(;s<i.length;)if(-1!=t.url.toLowerCase().indexOf(i[s++]))return t}return null}playPause(){this.isPaused()?this.play():this.pause();}setDefaultPlayback(){this.attachPlayerSourceUrl(this.media.source[0].url);}attachPlayerSourceUrl(e){if(null!=this.media&&this.media instanceof u&&1==this.media.lowLatencyMode){let e=this.player.getSettings();e.streaming.lowLatencyEnabled=!0,this.player.updateSettings(e);}this.player.attachSource(e),this.player.isReady()||this.player.attachView(this.video),this.hasDashJsInitializedSource=!0;}getPlaybackStartTime(e){let t=null;return null!=this.dvrWindowStartTimeTs&&null!=this.dvrWindowEndTimeTs&&this.dvrWindowEndTimeTs<this.getNowTs()&&(t=this.dvrWindowStartTimeTs),null!=e&&null!=e.mediaUserSettings&&null!=e.mediaUserSettings.resumePostion&&(t=e.mediaUserSettings.resumePostion),null!=this.prePlaybackSeekRelativePosition&&null!=e&&e.duration>0&&(t=this.prePlaybackSeekRelativePosition*e.duration),null!=t&&null!=this.dvrWindowStartTimeTs&&t<this.dvrWindowStartTimeTs&&(t=this.dvrWindowStartTimeTs),null!=t&&null!=this.dvrWindowEndTimeTs&&this.dvrWindowEndTimeTs<t&&(t=this.dvrWindowEndTimeTs),t}setWidevineDrmSupportPlayback(){let e=this.getMediaSource(this.media.source),t=null,i=null,s=null,a=null;if(null!=e){try{a=e.drm.provider;}catch(e){}try{t=e.customParams.h.laUrl,i=e.customParams.h.laCertHex;}catch(e){console.log("plugins/VideoDashJs/src/bs/player/plugin/video/videoPlayer/VideoDashJs.hx:2439:",_.caught(e).unwrap());}try{null==t&&(t=e.drm.widevine.laUrl);}catch(e){}try{null!=e.drm&&null!=e.drm.widevine&&null!=e.drm.widevine.customData&&(s=e.drm.widevine.customData);}catch(e){console.log("plugins/VideoDashJs/src/bs/player/plugin/video/videoPlayer/VideoDashJs.hx:2452:",_.caught(e).unwrap());}if(null!=this.media.drmCustomLicenseServerHandler)this.media.drmCustomLicenseServerHandler.initContext(this.media,e,this.variables),this.hasProtectionData=!0,this.player.setProtectionData({"com.widevine.alpha":{customData:"B2C99B73-CA41-4003-84A3AA16CE92B304",customLicenseRequestHandler:(R=this.media.drmCustomLicenseServerHandler,A(R,R.customWidevineLicenseRequestHandler)),audioRobustness:null!=e.drm&&null!=e.drm.widevine&&null!=e.drm.widevine.audioRobustness?e.drm.widevine.audioRobustness:"SW_SECURE_CRYPTO",videoRobustness:null!=e.drm&&null!=e.drm.widevine&&null!=e.drm.widevine.videoRobustness?e.drm.widevine.videoRobustness:"SW_SECURE_CRYPTO"}}),this.attachPlayerSourceUrl(e.url);else if(null!=t){let n={laURL:t,customData:"B2C99B73-CA41-4003-84A3AA16CE92B304",canGeneratePsshBox:!0,audioRobustness:null!=e.drm&&null!=e.drm.widevine&&null!=e.drm.widevine.audioRobustness?e.drm.widevine.audioRobustness:"SW_SECURE_CRYPTO",videoRobustness:null!=e.drm&&null!=e.drm.widevine&&null!=e.drm.widevine.videoRobustness?e.drm.widevine.videoRobustness:"SW_SECURE_CRYPTO"};null!=s&&"keyos"==a.toLowerCase()&&(n.httpRequestHeaders={"x-keyos-authorization":s}),null!=i&&(n.laCertHex=i),this.hasProtectionData=!0,this.player.setProtectionData({"com.widevine.alpha":n}),this.attachPlayerSourceUrl(e.url);}else this.attachPlayerSourceUrl(e.url);}else this.onDashJsError({data:{message:"Cannot play defined media. Invalid media source."}});}setPlayReadyDrmSupportPlayback(){let e=this.getMediaSource(this.media.source),t=null,i=null;try{t=e.drm.provider;}catch(e){}let a=null;try{a=e.customParams.h.laUrl,a=this.variables.xmmapi.playReadyLicenseServerURL+("?"+s.string(e.customParams.h.drmParams)+"&userId="+this.variables.xmmapi.userId+"&device=web&platform=web");}catch(e){}try{null==a&&(a=e.drm.playready.laUrl);}catch(e){}try{i=e.drm.playready.customData;}catch(e){}if(null!=this.media.drmCustomLicenseServerHandler)this.media.drmCustomLicenseServerHandler.initContext(this.media,e,this.variables),this.hasProtectionData=!0,this.player.setProtectionData({"com.microsoft.playready":{customLicenseRequestHandler:(R=this.media.drmCustomLicenseServerHandler,A(R,R.customPlayReadyLicenseRequestHandler)),audioRobustness:null!=e.drm&&null!=e.drm.playready&&null!=e.drm.playready.audioRobustness?e.drm.playready.audioRobustness:"SW_SECURE_CRYPTO",videoRobustness:null!=e.drm&&null!=e.drm.playready&&null!=e.drm.playready.videoRobustness?e.drm.playready.videoRobustness:"SW_SECURE_CRYPTO"}}),this.attachPlayerSourceUrl(e.url);else if(null!=a){let e={laURL:a,canGeneratePsshBox:!0};null!=i&&"keyos"==t.toLowerCase()&&(e.httpRequestHeaders={"x-keyos-authorization":i}),this.player.setProtectionData({"com.microsoft.playready":e}),this.attachPlayerSourceUrl(this.media.source[0].url);}else this.attachPlayerSourceUrl(this.media.source[0].url);}seek(e){let t=this.isPaused()&&null==this.source;this.androidVideoBufferFix(),this.seekingTargetTs=null;let i=this.media instanceof u;if(i){if(e=this.dvrWindowRelativeTimeToTs(e),e=this.normalizeDvrTime(e),this.media.mediaPlaybackInfo.currentTime=e,e>0&&(this.seekingTargetTs=e),(e=this.dvrWindowRelativeTimeFromTs(e))<this.getLiveMinimalInitialOffsetForOldestPart()&&(e=this.getLiveMinimalInitialOffsetForOldestPart()),2!=this.startTimeStatus&&!t)return;t&&this.initSource();}else e<0?e=0:null!=this.video&&e>this.video.duration&&(e=this.video.duration),e>this.video.duration-1&&(e=this.video.duration-1),t&&(this.media.duration>0&&(this.prePlaybackSeekRelativePosition=e/this.media.duration),this.initSource());let s=this;this.isPaused()&&!t&&E.delay((function(){s.isBuffering||(new o("bufferingStart").dispatch(s.context),s.isBuffering=!0);}),0),this.currentTime=e,b.isSmartTV()&&(this.seekingTargetPos=i?this.dvrWindowRelativeTimeToTs(e):e),this.player.pause(),this.hasSeekingStartTriggeded=!0,this.dispatchEvent(this.isAdvertisement?new n("seekingStart"):new o("seekingStart")),this.seekingStartDate=new Date,this.dispatchEvent(this.isAdvertisement?new n("adCurrentTimeChange"):new o("currentTimeChange")),null!=this.seekDebouncerTimer&&this.seekDebouncerTimer.stop(),this.seekDebouncerTimer=E.delay(A(this,this.onSeekingDebouncerTimout),this.getSeekingDebouncerTimeout());}onSeekingDebouncerTimout(){if(null!=this.seekingTargetTs)this.performPlayerSeek(this.seekingTargetTs),this.seekingTargetTs=null;else {let e=this.currentTime;this.media instanceof u&&(e=this.dvrWindowRelativeTimeToTs(e),e=this.normalizeDvrTime(e)),this.performPlayerSeek(e);}this.stopSeekDebouncerTimer();}getSeekingDebouncerTimeout(){let e=500;return b.isSmartTV()&&(e=1e3),e}performPlayerSeek(e,t){if(null==t&&(t=!0),!this.hasDashJsInitializedSource||null==this.video)return;this.androidVideoBufferFix();let i=this;0==this.video.readyState&&this.videoRestartsOnError<this.getLimitOfRestarts()&&E.delay((function(){i.performPlayerSeek(e,t);}),100);let s=this.getSeekableRange(),a=this.media instanceof u,n=e;if(a&&(n=this.normalizeDvrTime(n),n=this.dvrWindowRelativeTimeFromTs(n),n<this.getLiveMinimalInitialOffsetForOldestPart()&&(n=this.getLiveMinimalInitialOffsetForOldestPart())),a){let e=this.player.getSettings().streaming.liveDelay;null==e&&(e=0),n>s.end-1.2*e&&(n=s.end-1.2*e);}if(this.shouldBePlaying&&t&&this.player.play(),0==this.currentTime&&0==n&&(n=.1,null!=this.adBreaksInfo))return null!=this.media&&null!=this.media.mediaUserSettings&&this.media.mediaUserSettings.resumePostion>0&&(this.media.mediaUserSettings.resumePostion=0),void this.handleVideoRestart();this.player.seek(n);}dvrWindowRelativeTimeFromTs(e){let t=this.player.getDashMetrics().getCurrentDVRInfo(),i=0;return null!=t&&null!=t.range&&null!=t.time&&(i=e-t.range.start),i<0&&(i=0),i}dvrWindowRelativeTimeToTs(e){let t=this.player.getDashMetrics().getCurrentDVRInfo(),i=0;return null!=t&&null!=t.range&&null!=t.time&&(i=t.range.start+e),i}normalizeDvrTime(e){let t=this.getDVRWindowRange();return e>t.end?e=t.end:e<t.start&&(e=t.start),e}dvrTimestampToRelativeTime(e){return e-this.getDVRWindowRange().start}getDvrWindowEndTimeOffset(){let e=0;if(null!=this.dvrWindowEndTimeTs){let t=this.getDVRWindowRange();this.dvrWindowEndTimeTs<t.end&&(e=t.end-this.dvrWindowEndTimeTs);}return e}getDVRWindowRange(){let e=this.getSeekableRange();return null!=this.dvrWindowStartTimeTs&&e.start<this.dvrWindowStartTimeTs&&!this.isDVRRecordedForStartOver(e)&&(e.start=this.dvrWindowStartTimeTs),null!=this.dvrWindowEndTimeTs&&this.dvrWindowEndTimeTs<e.end&&(e.end=this.dvrWindowEndTimeTs),e}isDVRRecordedForStartOver(e){return 0==e.start&&e.end-e.start<86400}getDashStreamPeriodsNum(){let e=0;if(null!=this.player&&this.player.getActiveStream()&&this.player.getActiveStream().getProcessors()&&this.player.getActiveStream().getProcessors()[0]&&this.player.getActiveStream().getProcessors()[0].getRepresentationController()&&this.player.getActiveStream().getProcessors()[0].getRepresentationController().getCurrentRepresentation()){let t=this.player.getActiveStream().getProcessors()[0].getRepresentationController().getCurrentRepresentation();t&&t.adaptation&&t.adaptation.period&&t.adaptation.period.mpd&&t.adaptation.period.mpd.manifest&&t.adaptation.period.mpd.manifest.Period_asArray&&(e=t.adaptation.period.mpd.manifest.Period_asArray.length);}return e}getSeekableRange(){if(null!=this.player){let e=this.player.getDashMetrics().getCurrentDVRInfo();if(null!=e&&null!=e.range){let t={start:e.range.start,end:e.range.end};if(this.media instanceof u){let i=this.player.getDVRSeekOffset(864e5);i>0&&i>e.range.start&&(t.end=i),this.getDashStreamPeriodsNum()>1&&this.liveStreamNowOffset>0&&(t.end=this.getNowTs()-this.liveStreamNowOffset),t.end<this.media.mediaPlaybackInfo.currentTime&&(t.end=this.media.mediaPlaybackInfo.currentTime);}return this.lastDvrWindowStart=t.start,this.lastDvrWindowEnd=t.end,t}if(null!=this.lastDvrWindowEnd&&null!=this.lastDvrWindowStart)return {start:this.lastDvrWindowStart,end:this.lastDvrWindowEnd}}return null!=this.video&&null==this.video.seekable&&0==this.video.seekable.length?{start:this.video.seekable.start(0),end:this.video.seekable.end(0)}:{start:0,end:0}}getDVRWindowSize(){let e=this.getDVRWindowRange();return e.end-e.start}getNowTs(){return (new Date).getTime()/1e3}selectAudio(e){}selectSubtitles(e){}volume(e){this.initialVideoIsMuted=e<=0,null!=this.player&&this.hasDashJsInitializedSource?this.player.setVolume(e):this.video.volume=e;}setData(e){this.media=e,this.startTimeStatus=0,this.hasDashJsInitializedSource=!1,this.hasDashJsInitializedManifest=!1,this.hasAudioInitialized=!1,this.hasSubtitlesInitialized=!1,this.hasCodecInfoInitialized=!1,this.hasQualityInfoInitialized=!1,this.hasSeekingStartTriggeded=!1,this.hasProtectionData=!1,this.isBuffering=!1,this.shouldBePlaying=!1,this.isPlaybackNotAllowed=!1,this.initialVideoIsMuted=!1,null!=this.video&&(this.initialVideoIsMuted=this.video.muted),this.hasPlaybackSuccStarted=!1,this.drmLicenseCheckStatus=0,this.liveStreamNowOffset=null,this.liveStreamNowOffsetLastUpdate=0,this.videoRestartsOnError=0,this.seekingStartDate=null,this.seekingTargetPos=null,this.seekingTargetTs=null,this.stopSeekDebouncerTimer(),this.lastDvrWindowStart=null,this.lastDvrWindowEnd=null,this.currentTime=null,this.playbackRateMetter.reset(),this.adBreaksInfo=null,Object.prototype.hasOwnProperty.call(this.variables,"dvrWindowStartTime")?(this.dvrWindowStartTimeTs=i.field(this.variables,"dvrWindowStartTime"),this.getNowTs()<this.dvrWindowStartTimeTs&&(this.dvrWindowStartTimeTs=null),i.deleteField(this.variables,"dvrWindowStartTime")):this.dvrWindowStartTimeTs=null,Object.prototype.hasOwnProperty.call(this.variables,"dvrWindowEndTime")?(this.dvrWindowEndTimeTs=i.field(this.variables,"dvrWindowEndTime"),i.deleteField(this.variables,"dvrWindowEndTime")):this.dvrWindowEndTimeTs=null,1==this.variables.autoplay&&this.play();}log(e,t){null==t&&(t="log"),console&&("error"==t?console.error(e):"warn"==t?console.warn(e):console.log(e));}playerResize(e){}videoReady(){}onDurationChange(e){}saveBandwidthModeVisibilityChange(e){if(null!=this.player)if(e){let e=this.player.getSettings();this.saveBandwidthModeStore={level:this.player.getQualityFor("video"),trackSwitchMode:e.streaming.abr.trackSwitchMode,maxRepresentationRatio:e.streaming.abr.maxRepresentationRatio,autoSwitchBitrate:e.streaming.abr.autoSwitchBitrate},e.streaming.abr.trackSwitchMode={video:"alwaysReplace"},e.streaming.abr.maxRepresentationRatio={video:0},e.streaming.abr.autoSwitchBitrate={video:!1},this.player.updateSettings(e),this.player.setQualityFor("video",0);}else if(null!=this.saveBandwidthModeStore){let e=this.player.getSettings();e.streaming.abr.trackSwitchMode=this.saveBandwidthModeStore.trackSwitchMode,e.streaming.abr.maxRepresentationRatio=this.saveBandwidthModeStore.maxRepresentationRatio,e.streaming.abr.autoSwitchBitrate=this.saveBandwidthModeStore.autoSwitchBitrate,this.player.updateSettings(e),this.player.setQualityFor("video",this.saveBandwidthModeStore.level),this.saveBandwidthModeStore=null;}}getThroughput(){if(null!=this.player){return 1e3*(this.player.getAverageThroughput("video")+this.player.getAverageThroughput("audio"))}return null}static canPlay(e){return !("Microsoft Internet Explorer"==b.browserName&&b.majorVersion<11)&&(0!=b.isMediaSourceExtensionSupported()&&(e.url.toLowerCase().indexOf(".ism/manifest")>1||e.url.toLowerCase().indexOf(".isml/manifest")>1||e.url.toLowerCase().indexOf(".mpd")>1))}static getInstance(e,t){let i=t?"ad_":"";if(Object.prototype.hasOwnProperty.call(f.instances.h,i+e))return f.instances.h[i+e];{let s=new f(t);return f.instances.h[i+e]=s,s.context=e,s.create(),s}}}e.bs.player.plugin.video.videoPlayer.VideoDashJs=f,f.__name__="bs.player.plugin.video.videoPlayer.VideoDashJs",Object.assign(f.prototype,{__class__:f,minAudioTracksForInfo:null,isQuickFallbackPathForLiveEnabled:null,context:null,variables:null,isAdvertisement:null,isInStreamAdvertisement:null,inStreamAdvertStartPos:null,initialAsAdvertisement:null,initialBandwidthSafetyFactor:null,inStreamAdvertMedia:null,adBreaksInfo:null,adsRestoreQualitySettingTimer:null,video:null,pluginConfig:null,playerWrapper:null,player:null,s73Wrapper:null,media:null,source:null,currentTime:null,playbackRateMetter:null,subtitlesRenderer:null,startTimeStatus:null,hasPlaybackSuccStarted:null,firefoxDrmDecodeLagTimerTs:null,firefoxDrmDecodeLag:null,initialVideoIsMuted:null,hasDashJsInitializedSource:null,hasDashJsInitializedManifest:null,hasAudioInitialized:null,hasSubtitlesInitialized:null,hasQualityInfoInitialized:null,isQualitySelectionEnabled:null,hasCodecInfoInitialized:null,hasSeekingStartTriggeded:null,hasProtectionData:null,isBuffering:null,drmLicenseCheckMechanismTimeoutTimer:null,drmLicenseCheckStatus:null,shouldBePlaying:null,isPlaybackNotAllowed:null,liveStreamNowOffset:null,liveStreamNowOffsetLastUpdate:null,videoRestartsOnError:null,lastRestartTs:null,liveStreamRestartTimeoutTimer:null,liveStreamRestartDelayTimer:null,streamCompleteWatchdogTimer:null,streamBufferingWatchdogTimer:null,prePlaybackSeekRelativePosition:null,seekingStartDate:null,seekingTargetPos:null,seekingTargetTs:null,seekingAvgTime:null,seekDebouncerTimer:null,seekableInitialRange:null,lastDvrWindowStart:null,lastDvrWindowEnd:null,liveEdgeUpdateTimer:null,dvrWindowStartTimeTs:null,dvrWindowEndTimeTs:null,audioSetWaitingForSelection:null,subtitlesSetWaitingForSelection:null,subtitlesSelected:null,scte35PendingEvents:null,lastGapEnd:null,seekingOverVideoGapMeter:null,playbackRate:null,hideVideoTag:null,saveBandwidthModeStore:null});class T{constructor(){}getMediaPlayer(){return exports.dashjs.MediaPlayer().create()}}T.__name__="bs.player.plugin.video.wrapper.DashJsWrapper",Object.assign(T.prototype,{__class__:T});var b=require("bs.util.BrowserTools");class w{constructor(e,t){this.reset(t),this.avgPeriod=e;}add(e){e=this.initNowTs(e),this.load=this.getLoadForTime(e)+1,this.lastEventTs=e;}getLoadForTime(e){return this.load*Math.exp(-(e-this.lastEventTs)/this.avgPeriod)}initNowTs(e){return null==e&&(e=(new Date).getTime()/1e3),e}getLoad(e){return this.getLoadForTime(this.initNowTs(e))}reset(e){this.lastEventTs=this.initNowTs(e),this.load=0;}}w.__name__="bs.util.EventLoadMeter",Object.assign(w.prototype,{__class__:w,load:null,lastEventTs:null,avgPeriod:null});class k{constructor(e,t){null==t&&(t=2),null==e&&(e=2),this.expectedSamplesPerSec=t,this.playbackPosition=[],this.sampleTime=[];let i=0;for(;i<e;)++i,this.playbackPosition.push(null),this.sampleTime.push(null);this.lastSamplePos=0;}setCurrentTime(e,t,i){null==i&&(i=!1),null==t&&(t=(new Date).getTime()/1e3),t-this.sampleTime[this.lastSamplePos]<.05||i||(this.lastSamplePos=(this.lastSamplePos+1)%this.playbackPosition.length,this.playbackPosition[this.lastSamplePos]=e,this.sampleTime[this.lastSamplePos]=t);}reset(){let e=0,t=this.playbackPosition.length;for(;e<t;){let t=e++;this.playbackPosition[t]=null,this.sampleTime[t]=null;}this.lastSamplePos=0;}getPlaybackRate(e){null==e&&(e=!1);let t=this.lastSamplePos,i=(t+1)%this.playbackPosition.length,s=this.sampleTime[t],a=this.sampleTime[i],n=s-a;return null==n||0==n||null==s||null==a?null:n>1.5*(this.playbackPosition.length-1)/this.expectedSamplesPerSec&&!e?1:(this.playbackPosition[t]-this.playbackPosition[i])/n}isPlayingNormal(e){null==e&&(e=!1);let t=this.getPlaybackRate(e);return .5<t&&t<1.5}}k.__name__="bs.util.PlaybackRateMetter",Object.assign(k.prototype,{__class__:k,playbackPosition:null,sampleTime:null,lastSamplePos:null,expectedSamplesPerSec:null});class _ extends Error{constructor(e,t,i){super(e),this.message=e,this.__previousException=t,this.__nativeException=null!=i?i:this;}unwrap(){return this.__nativeException}get_native(){return this.__nativeException}static caught(e){return e instanceof _?e:e instanceof Error?new _(e.message,null,e):new D(e,null,e)}static thrown(e){if(e instanceof _)return e.get_native();if(e instanceof Error)return e;return new D(e)}}_.__name__="haxe.Exception",_.__super__=Error,Object.assign(_.prototype,{__class__:_,__skipStack:null,__nativeException:null,__previousException:null});var E=require("haxe.Timer");class D extends _{constructor(e,t,i){super(String(e),t,i),this.value=e;}unwrap(){return this.value}}D.__name__="haxe.ValueException",D.__super__=_,Object.assign(D.prototype,{__class__:D,value:null});var R,C=require("haxe.ds.StringMap");class I{static getClass(e){if(null==e)return null;if(e instanceof Array)return Array;{let t=e.__class__;if(null!=t)return t;let i=I.__nativeClassName(e);return null!=i?I.__resolveNativeClass(i):null}}static __string_rec(e,t){if(null==e)return "null";if(t.length>=5)return "<...>";let i=typeof e;switch("function"==i&&(e.__name__||e.__ename__)&&(i="object"),i){case"function":return "<function>";case"object":if(e instanceof Array){let i="[";t+="\t";let s=0,a=e.length;for(;s<a;){let a=s++;i+=(a>0?",":"")+I.__string_rec(e[a],t);}return i+="]",i}let i;try{i=e.toString;}catch(e){return "???"}if(null!=i&&i!=Object.toString&&"function"==typeof i){let t=e.toString();if("[object Object]"!=t)return t}let s="{\n";t+="\t";let a=null!=e.hasOwnProperty,n=null;for(n in e)a&&!e.hasOwnProperty(n)||"prototype"!=n&&"__class__"!=n&&"__super__"!=n&&"__interfaces__"!=n&&"__properties__"!=n&&(2!=s.length&&(s+=", \n"),s+=t+n+" : "+I.__string_rec(e[n],t));return s+="\n"+(t=t.substring(1))+"}",s;case"string":return e;default:return String(e)}}static __interfLoop(e,t){for(;;){if(null==e)return !1;if(e==t)return !0;let i=e.__interfaces__;if(null!=i&&(null==e.__super__||e.__super__.__interfaces__!=i)){let e=0,s=i.length;for(;e<s;){let s=i[e++];if(s==t||I.__interfLoop(s,t))return !0}}e=e.__super__;}}static __instanceof(e,t){if(null==t)return !1;switch(t){case Array:return e instanceof Array;case B:return "boolean"==typeof e;case M:return null!=e;case W:return "number"==typeof e;case L:return "number"==typeof e&&(0|e)===e;case String:return "string"==typeof e;default:if(null==e)return !1;if("function"==typeof t){if(I.__downcastCheck(e,t))return !0}else if("object"==typeof t&&I.__isNativeObj(t)&&e instanceof t)return !0;return t==x&&null!=e.__name__||t==O&&null!=e.__ename__}}static __downcastCheck(e,t){return e instanceof t||!!t.__isInterface__&&I.__interfLoop(I.getClass(e),t)}static __cast(e,t){if(null==e||I.__instanceof(e,t))return e;throw _.thrown("Cannot cast "+s.string(e)+" to "+s.string(t))}static __nativeClassName(e){let t=I.__toStr.call(e).slice(8,-1);return "Object"==t||"Function"==t||"Math"==t||"JSON"==t?null:t}static __isNativeObj(e){return null!=I.__nativeClassName(e)}static __resolveNativeClass(e){return t[e]}}function A(e,i){return null==i?null:(null==i.__id__&&(i.__id__=t.$haxeUID++),null==e.hx__closures__?e.hx__closures__={}:s=e.hx__closures__[i.__id__],null==s&&(s=i.bind(e),e.hx__closures__[i.__id__]=s),s);var s;}I.__name__="js.Boot",t.$haxeUID|=0,Object.defineProperty(String.prototype,"__class__",{value:String,enumerable:!1,writable:!0}),String.__name__="String",Array.__name__="Array",Date.prototype.__class__=Date,Date.__name__="Date";var L={},M={},W=Number,B=Boolean,x={},O={};I.__toStr={}.toString,f.instances=new C,f.__plugfaces__="ICanPlay,INoPlayerPlugin,IVideoPlayer";}(exports,window);
(function(window) {
var orgdash = window.dashjs;
var dashjs = { skipAutoCreate: true };
window.dashjs = dashjs;

/*! v3.1.2-0054d7eb, 2020-07-24T09:05:25Z */
!function a(o,s,u){function l(t,e){if(!s[t]){if(!o[t]){var n="function"==typeof require&&require;if(!e&&n)return n(t,!0);if(d)return d(t,!0);var r=new Error("Cannot find module '"+t+"'");throw r.code="MODULE_NOT_FOUND",r}var i=s[t]={exports:{}};o[t][0].call(i.exports,function(e){return l(o[t][1][e]||e)},i,i.exports,a,o,s,u);}return s[t].exports}for(var d="function"==typeof require&&require,e=0;e<u.length;e++)l(u[e]);return l}({1:[function(e,t,n){var o,u,r,i={encode:function(e){for(var t=[],n=0;n<e.length;++n){var r=e.charCodeAt(n);r<128?t.push(r):(r<2048?t.push(192|r>>6):(r<65536?t.push(224|r>>12):(t.push(240|r>>18),t.push(128|63&r>>12)),t.push(128|63&r>>6)),t.push(128|63&r));}return t},decode:function(e){for(var t=[],n=0;n<e.length;){var r=e[n++];r<128||(r<224?r=(31&r)<<6:(r<240?r=(15&r)<<12:(r=(7&r)<<18,r|=(63&e[n++])<<12),r|=(63&e[n++])<<6),r|=63&e[n++]),t.push(String.fromCharCode(r));}return t.join("")}},l={};function d(e){for(var t=0,n=[],r=0|e.length/3;0<r--;){var i=(e[t]<<16)+(e[t+1]<<8)+e[t+2];t+=3,n.push(o.charAt(63&i>>18)),n.push(o.charAt(63&i>>12)),n.push(o.charAt(63&i>>6)),n.push(o.charAt(63&i));}return 2==e.length-t?(i=(e[t]<<16)+(e[t+1]<<8),n.push(o.charAt(63&i>>18)),n.push(o.charAt(63&i>>12)),n.push(o.charAt(63&i>>6)),n.push("=")):1==e.length-t&&(i=e[t]<<16,n.push(o.charAt(63&i>>18)),n.push(o.charAt(63&i>>12)),n.push("==")),n.join("")}function f(e){for(var t=0,n=[],r=0|e.length/4;0<r--;){var i=(u[e.charCodeAt(t)]<<18)+(u[e.charCodeAt(t+1)]<<12)+(u[e.charCodeAt(t+2)]<<6)+u[e.charCodeAt(t+3)];n.push(255&i>>16),n.push(255&i>>8),n.push(255&i),t+=4;}return n&&("="==e.charAt(t-2)?(n.pop(),n.pop()):"="==e.charAt(t-1)&&n.pop()),n}o="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",u=function(){for(var e=[],t=0;t<o.length;++t)e[o.charCodeAt(t)]=t;return e["=".charCodeAt(0)]=0,e}(),r={encode:function(e){for(var t=[],n=0;n<e.length;++n)t.push(e.charCodeAt(n));return t},decode:function(e){for(var t=0;t<s.length;++t)a[t]=String.fromCharCode(a[t]);return a.join("")}},l.decodeArray=function(e){var t=f(e);return new Uint8Array(t)},l.encodeASCII=function(e){var t=r.encode(e);return d(t)},l.decodeASCII=function(e){var t=f(e);return r.decode(t)},l.encode=function(e){var t=i.encode(e);return d(t)},l.decode=function(e){var t=f(e);return i.decode(t)},void 0!==n&&(n.decode=l.decode,n.decodeArray=l.decodeArray,n.encode=l.encode,n.encodeASCII=l.encodeASCII);},{}],2:[function(e,t,n){!function(e){function s(e){var t=e;return n.hasOwnProperty(e)&&(t=n[e]),String.fromCharCode(t)}function u(e){for(var t=[],n=0;n<e.length;n++)t.push(e[n].toString(16));return t}function o(e,t,n,r,i){this.foreground=e||"white",this.underline=t||!1,this.italics=n||!1,this.background=r||"black",this.flash=i||!1;}var n={42:225,92:233,94:237,95:243,96:250,123:231,124:247,125:209,126:241,127:9608,128:174,129:176,130:189,131:191,132:8482,133:162,134:163,135:9834,136:224,137:32,138:232,139:226,140:234,141:238,142:244,143:251,144:193,145:201,146:211,147:218,148:220,149:252,150:8216,151:161,152:42,153:8217,154:9473,155:169,156:8480,157:8226,158:8220,159:8221,160:192,161:194,162:199,163:200,164:202,165:203,166:235,167:206,168:207,169:239,170:212,171:217,172:249,173:219,174:171,175:187,176:195,177:227,178:205,179:204,180:236,181:210,182:242,183:213,184:245,185:123,186:125,187:92,188:94,189:95,190:124,191:8764,192:196,193:228,194:214,195:246,196:223,197:165,198:164,199:9475,200:197,201:229,202:216,203:248,204:9487,205:9491,206:9495,207:9499},a={17:1,18:3,21:5,22:7,23:9,16:11,19:12,20:14},l={17:2,18:4,21:6,22:8,23:10,19:13,20:15},d={25:1,26:3,29:5,30:7,31:9,24:11,27:12,28:14},f={25:2,26:4,29:6,30:8,31:10,27:13,28:15},c=["white","green","blue","cyan","red","yellow","magenta","black","transparent"],h={verboseFilter:{DATA:3,DEBUG:3,INFO:2,WARNING:2,TEXT:1,ERROR:0},time:null,verboseLevel:0,setTime:function(e){this.time=e;},log:function(e,t){var n=this.verboseFilter[e];this.verboseLevel>=n&&console.log(this.time+" ["+e+"] "+t);}};o.prototype={reset:function(){this.foreground="white",this.underline=!1,this.italics=!1,this.background="black",this.flash=!1;},setStyles:function(e){for(var t=["foreground","underline","italics","background","flash"],n=0;n<t.length;n++){var r=t[n];e.hasOwnProperty(r)&&(this[r]=e[r]);}},isDefault:function(){return "white"===this.foreground&&!this.underline&&!this.italics&&"black"===this.background&&!this.flash},equals:function(e){return this.foreground===e.foreground&&this.underline===e.underline&&this.italics===e.italics&&this.background===e.background&&this.flash===e.flash},copy:function(e){this.foreground=e.foreground,this.underline=e.underline,this.italics=e.italics,this.background=e.background,this.flash=e.flash;},toString:function(){return "color="+this.foreground+", underline="+this.underline+", italics="+this.italics+", background="+this.background+", flash="+this.flash}};function t(e,t,n,r,i,a){this.uchar=e||" ",this.penState=new o(t,n,r,i,a);}t.prototype={reset:function(){this.uchar=" ",this.penState.reset();},setChar:function(e,t){this.uchar=e,this.penState.copy(t);},setPenState:function(e){this.penState.copy(e);},equals:function(e){return this.uchar===e.uchar&&this.penState.equals(e.penState)},copy:function(e){this.uchar=e.uchar,this.penState.copy(e.penState);},isEmpty:function(){return " "===this.uchar&&this.penState.isDefault()}};function r(){this.chars=[];for(var e=0;e<32;e++)this.chars.push(new t);this.pos=0,this.currPenState=new o;}r.prototype={equals:function(e){for(var t=!0,n=0;n<32;n++)if(!this.chars[n].equals(e.chars[n])){t=!1;break}return t},copy:function(e){for(var t=0;t<32;t++)this.chars[t].copy(e.chars[t]);},isEmpty:function(){for(var e=!0,t=0;t<32;t++)if(!this.chars[t].isEmpty()){e=!1;break}return e},setCursor:function(e){this.pos!==e&&(this.pos=e),this.pos<0?(h.log("ERROR","Negative cursor position "+this.pos),this.pos=0):32<this.pos&&(h.log("ERROR","Too large cursor position "+this.pos),this.pos=32);},moveCursor:function(e){var t=this.pos+e;if(1<e)for(var n=this.pos+1;n<t+1;n++)this.chars[n].setPenState(this.currPenState);this.setCursor(t);},backSpace:function(){this.moveCursor(-1),this.chars[this.pos].setChar(" ",this.currPenState);},insertChar:function(e){144<=e&&this.backSpace();var t=s(e);32<=this.pos?h.log("ERROR","Cannot insert "+e.toString(16)+" ("+t+") at position "+this.pos+". Skipping it!"):(this.chars[this.pos].setChar(t,this.currPenState),this.moveCursor(1));},clearFromPos:function(e){for(var t=e;t<32;t++)this.chars[t].reset();},clear:function(){this.clearFromPos(0),this.pos=0,this.currPenState.reset();},clearToEndOfRow:function(){this.clearFromPos(this.pos);},getTextString:function(){for(var e=[],t=!0,n=0;n<32;n++){var r=this.chars[n].uchar;" "!==r&&(t=!1),e.push(r);}return t?"":e.join("")},setPenStyles:function(e){this.currPenState.setStyles(e),this.chars[this.pos].setPenState(this.currPenState);}};function i(){this.rows=[];for(var e=0;e<15;e++)this.rows.push(new r);this.currRow=14,this.nrRollUpRows=null,this.reset();}i.prototype={reset:function(){for(var e=0;e<15;e++)this.rows[e].clear();this.currRow=14;},equals:function(e){for(var t=!0,n=0;n<15;n++)if(!this.rows[n].equals(e.rows[n])){t=!1;break}return t},copy:function(e){for(var t=0;t<15;t++)this.rows[t].copy(e.rows[t]);},isEmpty:function(){for(var e=!0,t=0;t<15;t++)if(!this.rows[t].isEmpty()){e=!1;break}return e},backSpace:function(){this.rows[this.currRow].backSpace();},clearToEndOfRow:function(){this.rows[this.currRow].clearToEndOfRow();},insertChar:function(e){this.rows[this.currRow].insertChar(e);},setPen:function(e){this.rows[this.currRow].setPenStyles(e);},moveCursor:function(e){this.rows[this.currRow].moveCursor(e);},setCursor:function(e){h.log("INFO","setCursor: "+e),this.rows[this.currRow].setCursor(e);},setPAC:function(e){h.log("INFO","pacData = "+JSON.stringify(e));var t=e.row-1;this.nrRollUpRows&&t<this.nrRollUpRows-1&&(t=this.nrRollUpRows-1),this.currRow=t;var n,r,i=this.rows[this.currRow];null!==e.indent&&(n=e.indent,r=Math.max(n-1,0),i.setCursor(e.indent),e.color=i.chars[r].penState.foreground);var a={foreground:e.color,underline:e.underline,italics:e.italics,background:"black",flash:!1};this.setPen(a);},setBkgData:function(e){h.log("INFO","bkgData = "+JSON.stringify(e)),this.backSpace(),this.setPen(e),this.insertChar(32);},setRollUpRows:function(e){this.nrRollUpRows=e;},rollUp:function(){var e,t;null!==this.nrRollUpRows?(h.log("TEXT",this.getDisplayText()),e=this.currRow+1-this.nrRollUpRows,(t=this.rows.splice(e,1)[0]).clear(),this.rows.splice(this.currRow,0,t),h.log("INFO","Rolling up")):h.log("DEBUG","roll_up but nrRollUpRows not set yet");},getDisplayText:function(e){e=e||!1;for(var t=[],n="",r=-1,i=0;i<15;i++){var a=this.rows[i].getTextString();a&&(r=i+1,e?t.push("Row "+r+': "'+a+'"'):t.push(a.trim()));}return 0<t.length&&(n=e?"["+t.join(" | ")+"]":t.join("\n")),n},getTextAndFormat:function(){return this.rows}};function p(e,t){this.chNr=e,this.outputFilter=t,this.mode=null,this.verbose=0,this.displayedMemory=new i,this.nonDisplayedMemory=new i,this.lastOutputScreen=new i,this.currRollUpRow=this.displayedMemory.rows[14],this.writeScreen=this.displayedMemory,this.mode=null,this.cueStartTime=null;}p.prototype={modes:["MODE_ROLL-UP","MODE_POP-ON","MODE_PAINT-ON","MODE_TEXT"],reset:function(){this.mode=null,this.displayedMemory.reset(),this.nonDisplayedMemory.reset(),this.lastOutputScreen.reset(),this.currRollUpRow=this.displayedMemory.rows[14],this.writeScreen=this.displayedMemory,this.mode=null,this.cueStartTime=null,this.lastCueEndTime=null;},getHandler:function(){return this.outputFilter},setHandler:function(e){this.outputFilter=e;},setPAC:function(e){this.writeScreen.setPAC(e);},setBkgData:function(e){this.writeScreen.setBkgData(e);},setMode:function(e){e!==this.mode&&(this.mode=e,h.log("INFO","MODE="+e),"MODE_POP-ON"==this.mode?this.writeScreen=this.nonDisplayedMemory:(this.writeScreen=this.displayedMemory,this.writeScreen.reset()),"MODE_ROLL-UP"!==this.mode&&(this.displayedMemory.nrRollUpRows=null,this.nonDisplayedMemory.nrRollUpRows=null),this.mode=e);},insertChars:function(e){for(var t=0;t<e.length;t++)this.writeScreen.insertChar(e[t]);var n=this.writeScreen===this.displayedMemory?"DISP":"NON_DISP";h.log("INFO",n+": "+this.writeScreen.getDisplayText(!0)),"MODE_PAINT-ON"!==this.mode&&"MODE_ROLL-UP"!==this.mode||(h.log("TEXT","DISPLAYED: "+this.displayedMemory.getDisplayText(!0)),this.outputDataUpdate());},cc_RCL:function(){h.log("INFO","RCL - Resume Caption Loading"),this.setMode("MODE_POP-ON");},cc_BS:function(){h.log("INFO","BS - BackSpace"),"MODE_TEXT"!==this.mode&&(this.writeScreen.backSpace(),this.writeScreen===this.displayedMemory&&this.outputDataUpdate());},cc_AOF:function(){},cc_AON:function(){},cc_DER:function(){h.log("INFO","DER- Delete to End of Row"),this.writeScreen.clearToEndOfRow(),this.outputDataUpdate();},cc_RU:function(e){h.log("INFO","RU("+e+") - Roll Up"),this.writeScreen=this.displayedMemory,this.setMode("MODE_ROLL-UP"),this.writeScreen.setRollUpRows(e);},cc_FON:function(){h.log("INFO","FON - Flash On"),this.writeScreen.setPen({flash:!0});},cc_RDC:function(){h.log("INFO","RDC - Resume Direct Captioning"),this.setMode("MODE_PAINT-ON");},cc_TR:function(){h.log("INFO","TR"),this.setMode("MODE_TEXT");},cc_RTD:function(){h.log("INFO","RTD"),this.setMode("MODE_TEXT");},cc_EDM:function(){h.log("INFO","EDM - Erase Displayed Memory"),this.displayedMemory.reset(),this.outputDataUpdate();},cc_CR:function(){h.log("CR - Carriage Return"),this.writeScreen.rollUp(),this.outputDataUpdate();},cc_ENM:function(){h.log("INFO","ENM - Erase Non-displayed Memory"),this.nonDisplayedMemory.reset();},cc_EOC:function(){var e;h.log("INFO","EOC - End Of Caption"),"MODE_POP-ON"===this.mode&&(e=this.displayedMemory,this.displayedMemory=this.nonDisplayedMemory,this.nonDisplayedMemory=e,this.writeScreen=this.nonDisplayedMemory,h.log("TEXT","DISP: "+this.displayedMemory.getDisplayText())),this.outputDataUpdate();},cc_TO:function(e){h.log("INFO","TO("+e+") - Tab Offset"),this.writeScreen.moveCursor(e);},cc_MIDROW:function(e){var t,n={flash:!1};n.underline=e%2==1,n.italics=46<=e,n.italics?n.foreground="white":(t=Math.floor(e/2)-16,n.foreground=["white","green","blue","cyan","red","yellow","magenta"][t]),h.log("INFO","MIDROW: "+JSON.stringify(n)),this.writeScreen.setPen(n);},outputDataUpdate:function(){var e=h.time;null!==e&&this.outputFilter&&(this.outputFilter.updateData&&this.outputFilter.updateData(e,this.displayedMemory),null!==this.cueStartTime||this.displayedMemory.isEmpty()?this.displayedMemory.equals(this.lastOutputScreen)||(this.outputFilter.newCue&&this.outputFilter.newCue(this.cueStartTime,e,this.lastOutputScreen),this.cueStartTime=this.displayedMemory.isEmpty()?null:e):this.cueStartTime=e,this.lastOutputScreen.copy(this.displayedMemory));},cueSplitAtTime:function(e){this.outputFilter&&(this.displayedMemory.isEmpty()||(this.outputFilter.newCue&&this.outputFilter.newCue(this.cueStartTime,e,this.displayedMemory),this.cueStartTime=e));}};function g(e,t,n){this.field=e||1,this.outputs=[t,n],this.channels=[new p(1,t),new p(2,n)],this.currChNr=-1,this.lastCmdA=null,this.lastCmdB=null,this.bufferedData=[],this.startTime=null,this.lastTime=null,this.dataCounters={padding:0,char:0,cmd:0,other:0};}g.prototype={getHandler:function(e){return this.channels[e].getHandler()},setHandler:function(e,t){this.channels[e].setHandler(t);},addData:function(e,t){var n,r=!1;this.lastTime=e,h.setTime(e);for(var i=0;i<t.length;i+=2){var a=127&t[i],o=127&t[i+1];16<=a&&a<=31&&a===this.lastCmdA&&o===this.lastCmdB?(this.lastCmdA=null,this.lastCmdB=null,h.log("DEBUG","Repeated command ("+u([a,o])+") is dropped")):0!=a||0!=o?(h.log("DATA","["+u([t[i],t[i+1]])+"] -> ("+u([a,o])+")"),(n=(n=(n=(n=this.parseCmd(a,o))||this.parseMidrow(a,o))||this.parsePAC(a,o))||this.parseBackgroundAttributes(a,o))||(r=this.parseChars(a,o))&&(this.currChNr&&0<=this.currChNr?this.channels[this.currChNr-1].insertChars(r):h.log("WARNING","No channel found yet. TEXT-MODE?")),n?this.dataCounters.cmd+=2:r?this.dataCounters.char+=2:(this.dataCounters.other+=2,h.log("WARNING","Couldn't parse cleaned data "+u([a,o])+" orig: "+u([t[i],t[i+1]])))):this.dataCounters.padding+=2;}},parseCmd:function(e,t){var n=null;if(!((20===e||21===e||28===e||29===e)&&32<=t&&t<=47)&&!((23===e||31===e)&&33<=t&&t<=35))return !1;n=20===e||21===e||23===e?1:2;var r=this.channels[n-1];return 20===e||21===e||28===e||29===e?32===t?r.cc_RCL():33===t?r.cc_BS():34===t?r.cc_AOF():35===t?r.cc_AON():36===t?r.cc_DER():37===t?r.cc_RU(2):38===t?r.cc_RU(3):39===t?r.cc_RU(4):40===t?r.cc_FON():41===t?r.cc_RDC():42===t?r.cc_TR():43===t?r.cc_RTD():44===t?r.cc_EDM():45===t?r.cc_CR():46===t?r.cc_ENM():47===t&&r.cc_EOC():r.cc_TO(t-32),this.lastCmdA=e,this.lastCmdB=t,this.currChNr=n,!0},parseMidrow:function(e,t){var n=null;if((17===e||25===e)&&32<=t&&t<=47){if((n=17===e?1:2)!==this.currChNr)return h.log("ERROR","Mismatch channel in midrow parsing"),!1;var r=this.channels[n-1];return r.insertChars([32]),r.cc_MIDROW(t),h.log("DEBUG","MIDROW ("+u([e,t])+")"),this.lastCmdA=e,this.lastCmdB=t,!0}return !1},parsePAC:function(e,t){var n,r=null;if(!((17<=e&&e<=23||25<=e&&e<=31)&&64<=t&&t<=127)&&!((16===e||24===e)&&64<=t&&t<=95))return !1;n=e<=23?1:2,r=64<=t&&t<=95?1==n?a[e]:d[e]:1==n?l[e]:f[e];var i=this.interpretPAC(r,t);return this.channels[n-1].setPAC(i),this.lastCmdA=e,this.lastCmdB=t,this.currChNr=n,!0},interpretPAC:function(e,t){var n=t,r={color:null,italics:!1,indent:null,underline:!1,row:e},n=95<t?t-96:t-64;return r.underline=1==(1&n),n<=13?r.color=["white","green","blue","cyan","red","yellow","magenta","white"][Math.floor(n/2)]:n<=15?(r.italics=!0,r.color="white"):r.indent=4*Math.floor((n-16)/2),r},parseChars:function(e,t){var n,r,i=null,a=null,o=null;return 17<=(o=25<=e?(i=2,e-8):(i=1,e))&&o<=19?(n=t,n=17===o?t+80:18===o?t+112:t+144,h.log("INFO","Special char '"+s(n)+"' in channel "+i),a=[n],this.lastCmdA=e,this.lastCmdB=t):32<=e&&e<=127&&(a=0===t?[e]:[e,t],this.lastCmdA=null,this.lastCmdB=null),a&&(r=u(a),h.log("DEBUG","Char codes =  "+r.join(","))),a},parseBackgroundAttributes:function(e,t){var n,r,i;return ((16===e||24===e)&&32<=t&&t<=47||(23===e||31===e)&&45<=t&&t<=47)&&(n={},16===e||24===e?(r=Math.floor((t-32)/2),n.background=c[r],t%2==1&&(n.background=n.background+"_semi")):45===t?n.background="transparent":(n.foreground="black",47===t&&(n.underline=!0)),i=e<24?1:2,this.channels[i-1].setBkgData(n),this.lastCmdA=e,this.lastCmdB=t,!0)},reset:function(){for(var e=0;e<this.channels.length;e++)this.channels[e]&&this.channels[e].reset();this.lastCmdA=null,this.lastCmdB=null;},cueSplitAtTime:function(e){for(var t=0;t<this.channels.length;t++)this.channels[t]&&this.channels[t].cueSplitAtTime(e);}};e.logger=h,e.PenState=o,e.CaptionScreen=i,e.Cea608Parser=g,e.findCea608Nalus=function(e,t,n){for(var r=0,i=t,a=[];i<t+n;){if(r=e.getUint32(i),6===(31&e.getUint8(i+4)))for(var o=i+5,s=-1;o<i+4+r-1;){s=0;for(var u=255;255===u;)s+=u=e.getUint8(o),o++;for(var l=0,u=255;255===u;)l+=u=e.getUint8(o),o++;!function(e,t,n,r){if(4!==e||t<8)return null;var i=n.getUint8(r),a=n.getUint16(r+1),o=n.getUint32(r+3),s=n.getUint8(r+7);return 181==i&&49==a&&1195456820==o&&3==s}(s,l,e,o)||a.push([o,l]),o+=l;}i+=r+4;}return a},e.extractCea608DataFromRange=function(e,t){var n=t[0],r=[[],[]];n+=8;var i=31&e.getUint8(n);n+=2;for(var a=0;a<i;a++){var o=e.getUint8(n),s=4&o,u=3&o;n++;var l=e.getUint8(n);n++;var d=e.getUint8(n);n++,s&&(127&l)+(127&d)!=0&&(0==u?(r[0].push(l),r[0].push(d)):1==u&&(r[1].push(l),r[1].push(d)));}return r};}(void 0===n?(void 0).cea608parser={}:n);},{}],3:[function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(A){A=A||{},function(){void 0===A.escapeMode&&(A.escapeMode=!0);void 0===A.attributePrefix&&(A.attributePrefix="_");A.arrayAccessForm=A.arrayAccessForm||"none",A.emptyNodeForm=A.emptyNodeForm||"text",void 0===A.enableToStringFunc&&(A.enableToStringFunc=!0);A.arrayAccessFormPaths=A.arrayAccessFormPaths||[],void 0===A.skipEmptyTextNodesForObj&&(A.skipEmptyTextNodesForObj=!0);void 0===A.stripWhitespaces&&(A.stripWhitespaces=!0);A.datetimeAccessFormPaths=A.datetimeAccessFormPaths||[],void 0===A.useDoubleQuotes&&(A.useDoubleQuotes=!1);A.xmlElementsFilter=A.xmlElementsFilter||[],A.jsonPropertiesFilter=A.jsonPropertiesFilter||[],void 0===A.keepCData&&(A.keepCData=!1);void 0===A.ignoreRoot&&(A.ignoreRoot=!1);}();var I={ELEMENT_NODE:1,TEXT_NODE:3,CDATA_SECTION_NODE:4,COMMENT_NODE:8,DOCUMENT_NODE:9};function R(e){var t=e.localName;return null==t&&(t=e.baseName),null!=t&&""!=t||(t=e.nodeName),t}function u(e){return "string"==typeof e?e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&apos;"):e}function b(e,t,n,r){for(var i=0;i<e.length;i++){var a=e[i];if("string"==typeof a){if(a==r)break}else if(a instanceof RegExp){if(a.test(r))break}else if("function"==typeof a&&a(t,n,r))break}return i!=e.length}function D(e,t,n){switch(A.arrayAccessForm){case"property":e[t]instanceof Array?e[t+"_asArray"]=e[t]:e[t+"_asArray"]=[e[t]];}!(e[t]instanceof Array)&&0<A.arrayAccessFormPaths.length&&b(A.arrayAccessFormPaths,e,t,n)&&(e[t]=[e[t]]);}function M(e){var t,n=e.split(/[-T:+Z]/g),r=new Date(n[0],n[1]-1,n[2]),i=n[5].split(".");return r.setHours(n[3],n[4],i[0]),1<i.length&&r.setMilliseconds(i[1]),n[6]&&n[7]?(t=60*n[6]+Number(n[7]),t=0+("-"==(/\d\d-\d\d:\d\d$/.test(e)?"-":"+")?-1*t:t),r.setMinutes(r.getMinutes()-t-r.getTimezoneOffset())):-1!==e.indexOf("Z",e.length-1)&&(r=new Date(Date.UTC(r.getFullYear(),r.getMonth(),r.getDate(),r.getHours(),r.getMinutes(),r.getSeconds(),r.getMilliseconds()))),r}function N(e,t){if(e.nodeType==I.DOCUMENT_NODE){for(var n=new Object,r=e.childNodes,i=0;i<r.length;i++){(o=r[i]).nodeType==I.ELEMENT_NODE&&(A.ignoreRoot?n=N(o):(n={})[d=R(o)]=N(o));}return n}if(e.nodeType==I.ELEMENT_NODE){(n=new Object).__cnt=0;for(var a=[],r=e.childNodes,i=0;i<r.length;i++){var o,s,u,l,d=R(o=r[i]);o.nodeType!=I.COMMENT_NODE&&(s=t+"."+d,v=n,y=o.nodeType,T=d,S=s,y==I.ELEMENT_NODE&&0<A.xmlElementsFilter.length&&!b(A.xmlElementsFilter,v,T,S)||(n.__cnt++,null==n[d]?(u=N(o,s),"#text"==d&&!/[^\s]/.test(u)||((l={})[d]=u,a.push(l)),n[d]=u,D(n,d,s)):(null!=n[d]&&(n[d]instanceof Array||(n[d]=[n[d]],D(n,d,s))),u=N(o,s),"#text"==d&&!/[^\s]/.test(u)||((l={})[d]=u,a.push(l)),n[d][n[d].length]=u)));}n.__children=a;for(var f=R(e),c=0;c<e.attributes.length;c++){var h=e.attributes[c];n.__cnt++;for(var p=h.value,g=0,_=A.matchers.length;g<_;g++){var E=A.matchers[g];E.test(h,f)&&(p=E.converter(h.value));}n[A.attributePrefix+h.name]=p;}var m=e.prefix;return null!=m&&""!=m&&(n.__cnt++,n.__prefix=m),null!=n["#text"]&&(n.__text=n["#text"],n.__text instanceof Array&&(n.__text=n.__text.join("\n")),A.stripWhitespaces&&(n.__text=n.__text.trim()),delete n["#text"],"property"==A.arrayAccessForm&&delete n["#text_asArray"],n.__text=function(e,t,n){if(0<A.datetimeAccessFormPaths.length){var r=n.split(".#")[0];return b(A.datetimeAccessFormPaths,e,t,r)?M(e):e}return e}(n.__text,d,t+"."+d)),null!=n["#cdata-section"]&&(n.__cdata=n["#cdata-section"],delete n["#cdata-section"],"property"==A.arrayAccessForm&&delete n["#cdata-section_asArray"]),0==n.__cnt&&"text"==A.emptyNodeForm?n="":1==n.__cnt&&null!=n.__text?n=n.__text:1!=n.__cnt||null==n.__cdata||A.keepCData?1<n.__cnt&&null!=n.__text&&A.skipEmptyTextNodesForObj&&(A.stripWhitespaces&&""==n.__text||""==n.__text.trim())&&delete n.__text:n=n.__cdata,delete n.__cnt,!A.enableToStringFunc||null==n.__text&&null==n.__cdata||(n.toString=function(){return (null!=this.__text?this.__text:"")+(null!=this.__cdata?this.__cdata:"")}),n}if(e.nodeType==I.TEXT_NODE||e.nodeType==I.CDATA_SECTION_NODE)return e.nodeValue;var v,y,T,S;}function l(e,t,n,r){var i="<"+(null!=e&&null!=e.__prefix?e.__prefix+":":"")+t;if(null!=n)for(var a=0;a<n.length;a++){var o=n[a],s=e[o];A.escapeMode&&(s=u(s)),i+=" "+o.substr(A.attributePrefix.length)+"=",A.useDoubleQuotes?i+='"'+s+'"':i+="'"+s+"'";}return i+=r?"/>":">"}function d(e,t){return "</"+(null!=e.__prefix?e.__prefix+":":"")+t+">"}function f(e,t){return "property"==A.arrayAccessForm&&(n=t.toString(),r="_asArray",-1!==n.indexOf(r,n.length-r.length))||0==t.toString().indexOf(A.attributePrefix)||0==t.toString().indexOf("__")||e[t]instanceof Function;var n,r;}function c(e){var t=0;if(e instanceof Object)for(var n in e)f(e,n)||t++;return t}function h(e){var t=[];if(e instanceof Object)for(var n in e)-1==n.toString().indexOf("__")&&0==n.toString().indexOf(A.attributePrefix)&&t.push(n);return t}function p(e){var t,n,r="";return e instanceof Object?r+=(n="",null!=(t=e).__cdata&&(n+="<![CDATA["+t.__cdata+"]]>"),null!=t.__text&&(A.escapeMode?n+=u(t.__text):n+=t.__text),n):null!=e&&(A.escapeMode?r+=u(e):r+=e),r}function g(e,t){return ""===e?t:e+"."+t}function _(e,t){var n,r,i,a,o,s="";if(0<c(e))for(var u in e){f(e,u)||""!=t&&(i=e,o=g(t,a=u),0!=A.jsonPropertiesFilter.length&&""!=o&&!b(A.jsonPropertiesFilter,i,a,o))||(r=h(n=e[u]),null==n||null==n?s+=l(n,u,r,!0):n instanceof Object?n instanceof Array?s+=function(e,t,n,r){var i="";if(0==e.length)i+=l(e,t,n,!0);else for(var a=0;a<e.length;a++)i+=l(e[a],t,h(e[a]),!1),i+=_(e[a],g(r,t)),i+=d(e[a],t);return i}(n,u,r,t):n instanceof Date?(s+=l(n,u,r,!1),s+=n.toISOString(),s+=d(n,u)):0<c(n)||null!=n.__text||null!=n.__cdata?(s+=l(n,u,r,!1),s+=_(n,g(t,u)),s+=d(n,u)):s+=l(n,u,r,!0):(s+=l(n,u,r,!1),s+=p(n),s+=d(n,u)));}return s+=p(e)}this.parseXmlString=function(e){var t;window.ActiveXObject||window;if(void 0===e)return null;if(window.DOMParser){var n=new window.DOMParser;try{0<(t=n.parseFromString(e,"text/xml")).getElementsByTagNameNS("*","parsererror").length&&(t=null);}catch(e){t=null;}}else 0==e.indexOf("<?")&&(e=e.substr(e.indexOf("?>")+2)),(t=new ActiveXObject("Microsoft.XMLDOM")).async="false",t.loadXML(e);return t},this.asArray=function(e){return void 0===e||null==e?[]:e instanceof Array?e:[e]},this.toXmlDateTime=function(e){return e instanceof Date?e.toISOString():"number"==typeof e?new Date(e).toISOString():null},this.asDateTime=function(e){return "string"==typeof e?M(e):e},this.xml2json=function(e){return N(e)},this.xml_str2json=function(e){var t=this.parseXmlString(e);return null!=t?this.xml2json(t):null},this.json2xml_str=function(e){return _(e,"")},this.json2xml=function(e){var t=this.json2xml_str(e);return this.parseXmlString(t)},this.getVersion=function(){return "1.2.0"};},t.exports=n.default;},{}],4:[function(e,t,n){function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(n,"__esModule",{value:!0});var i=e(5),a=r(e(124)),o=r(e(161)),s=r(e(102)),u=r(e(45));dashjs.Protection=o.default,dashjs.MetricsReporting=a.default,dashjs.MediaPlayerFactory=s.default,dashjs.Debug=u.default,n.default=dashjs,n.MediaPlayer=i.MediaPlayer,n.Protection=o.default,n.MetricsReporting=a.default,n.MediaPlayerFactory=s.default,n.Debug=u.default;},{102:102,124:124,161:161,45:45,5:5}],5:[function(u,e,l){(function(e){function t(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(l,"__esModule",{value:!0});var n=t(u(100)),r=t(u(47)),i=t(u(45)),a=u(50),o="undefined"!=typeof window&&window||e,s=o.dashjs;(s=s||(o.dashjs={})).MediaPlayer=n.default,s.FactoryMaker=r.default,s.Debug=i.default,s.Version=(0, a.getVersionString)(),l.default=s,l.MediaPlayer=n.default,l.FactoryMaker=r.default,l.Debug=i.default;}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{});},{100:100,45:45,47:47,50:50}],6:[function(e,t,n){n.byteLength=function(e){var t=f(e),n=t[0],r=t[1];return 3*(n+r)/4-r},n.toByteArray=function(e){for(var t,n=f(e),r=n[0],i=n[1],a=new d(function(e,t){return 3*(e+t)/4-t}(r,i)),o=0,s=0<i?r-4:r,u=0;u<s;u+=4)t=l[e.charCodeAt(u)]<<18|l[e.charCodeAt(u+1)]<<12|l[e.charCodeAt(u+2)]<<6|l[e.charCodeAt(u+3)],a[o++]=t>>16&255,a[o++]=t>>8&255,a[o++]=255&t;2===i&&(t=l[e.charCodeAt(u)]<<2|l[e.charCodeAt(u+1)]>>4,a[o++]=255&t);1===i&&(t=l[e.charCodeAt(u)]<<10|l[e.charCodeAt(u+1)]<<4|l[e.charCodeAt(u+2)]>>2,a[o++]=t>>8&255,a[o++]=255&t);return a},n.fromByteArray=function(e){for(var t,n=e.length,r=n%3,i=[],a=0,o=n-r;a<o;a+=16383)i.push(function(e,t,n){for(var r,i=[],a=t;a<n;a+=3)r=(e[a]<<16&16711680)+(e[a+1]<<8&65280)+(255&e[a+2]),i.push(function(e){return s[e>>18&63]+s[e>>12&63]+s[e>>6&63]+s[63&e]}(r));return i.join("")}(e,a,o<a+16383?o:a+16383));1==r?(t=e[n-1],i.push(s[t>>2]+s[t<<4&63]+"==")):2==r&&(t=(e[n-2]<<8)+e[n-1],i.push(s[t>>10]+s[t>>4&63]+s[t<<2&63]+"="));return i.join("")};for(var s=[],l=[],d="undefined"!=typeof Uint8Array?Uint8Array:Array,r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",i=0,a=r.length;i<a;++i)s[i]=r[i],l[r.charCodeAt(i)]=i;function f(e){var t=e.length;if(0<t%4)throw new Error("Invalid string. Length must be a multiple of 4");var n=e.indexOf("=");return -1===n&&(n=t),[n,n===t?0:4-n%4]}l["-".charCodeAt(0)]=62,l["_".charCodeAt(0)]=63;},{}],7:[function(e,t,n){},{}],8:[function(e,t,n){var s=e(6),a=e(13);n.Buffer=f,n.SlowBuffer=function(e){+e!=e&&(e=0);return f.alloc(+e)},n.INSPECT_MAX_BYTES=50;var r=2147483647;function o(e){if(r<e)throw new RangeError('The value "'+e+'" is invalid for option "size"');var t=new Uint8Array(e);return t.__proto__=f.prototype,t}function f(e,t,n){if("number"!=typeof e)return i(e,t,n);if("string"==typeof t)throw new TypeError('The "string" argument must be of type string. Received type number');return l(e)}function i(e,t,n){if("string"==typeof e)return function(e,t){"string"==typeof t&&""!==t||(t="utf8");if(!f.isEncoding(t))throw new TypeError("Unknown encoding: "+t);var n=0|h(e,t),r=o(n),i=r.write(e,t);i!==n&&(r=r.slice(0,i));return r}(e,t);if(ArrayBuffer.isView(e))return d(e);if(null==e)throw TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof e);if(O(e,ArrayBuffer)||e&&O(e.buffer,ArrayBuffer))return function(e,t,n){if(t<0||e.byteLength<t)throw new RangeError('"offset" is outside of buffer bounds');if(e.byteLength<t+(n||0))throw new RangeError('"length" is outside of buffer bounds');var r;r=void 0===t&&void 0===n?new Uint8Array(e):void 0===n?new Uint8Array(e,t):new Uint8Array(e,t,n);return r.__proto__=f.prototype,r}(e,t,n);if("number"==typeof e)throw new TypeError('The "value" argument must not be of type number. Received type number');var r=e.valueOf&&e.valueOf();if(null!=r&&r!==e)return f.from(r,t,n);var i=function(e){if(f.isBuffer(e)){var t=0|c(e.length),n=o(t);return 0===n.length?n:(e.copy(n,0,0,t),n)}if(void 0!==e.length)return "number"!=typeof e.length||w(e.length)?o(0):d(e);if("Buffer"===e.type&&Array.isArray(e.data))return d(e.data)}(e);if(i)return i;if("undefined"!=typeof Symbol&&null!=Symbol.toPrimitive&&"function"==typeof e[Symbol.toPrimitive])return f.from(e[Symbol.toPrimitive]("string"),t,n);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof e)}function u(e){if("number"!=typeof e)throw new TypeError('"size" argument must be of type number');if(e<0)throw new RangeError('The value "'+e+'" is invalid for option "size"')}function l(e){return u(e),o(e<0?0:0|c(e))}function d(e){for(var t=e.length<0?0:0|c(e.length),n=o(t),r=0;r<t;r+=1)n[r]=255&e[r];return n}function c(e){if(r<=e)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+r.toString(16)+" bytes");return 0|e}function h(e,t){if(f.isBuffer(e))return e.length;if(ArrayBuffer.isView(e)||O(e,ArrayBuffer))return e.byteLength;if("string"!=typeof e)throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof e);var n=e.length,r=2<arguments.length&&!0===arguments[2];if(!r&&0===n)return 0;for(var i=!1;;)switch(t){case"ascii":case"latin1":case"binary":return n;case"utf8":case"utf-8":return M(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*n;case"hex":return n>>>1;case"base64":return N(e).length;default:if(i)return r?-1:M(e).length;t=(""+t).toLowerCase(),i=!0;}}function p(e,t,n){var r,i,a,o=!1;if((void 0===t||t<0)&&(t=0),t>this.length)return "";if((void 0===n||n>this.length)&&(n=this.length),n<=0)return "";if((n>>>=0)<=(t>>>=0))return "";for(e=e||"utf8";;)switch(e){case"hex":return function(e,t,n){var r=e.length;(!t||t<0)&&(t=0);(!n||n<0||r<n)&&(n=r);for(var i="",a=t;a<n;++a)i+=function(e){return e<16?"0"+e.toString(16):e.toString(16)}(e[a]);return i}(this,t,n);case"utf8":case"utf-8":return y(this,t,n);case"ascii":return function(e,t,n){var r="";n=Math.min(e.length,n);for(var i=t;i<n;++i)r+=String.fromCharCode(127&e[i]);return r}(this,t,n);case"latin1":case"binary":return function(e,t,n){var r="";n=Math.min(e.length,n);for(var i=t;i<n;++i)r+=String.fromCharCode(e[i]);return r}(this,t,n);case"base64":return r=this,a=n,0===(i=t)&&a===r.length?s.fromByteArray(r):s.fromByteArray(r.slice(i,a));case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return function(e,t,n){for(var r=e.slice(t,n),i="",a=0;a<r.length;a+=2)i+=String.fromCharCode(r[a]+256*r[a+1]);return i}(this,t,n);default:if(o)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),o=!0;}}function g(e,t,n){var r=e[t];e[t]=e[n],e[n]=r;}function _(e,t,n,r,i){if(0===e.length)return -1;if("string"==typeof n?(r=n,n=0):2147483647<n?n=2147483647:n<-2147483648&&(n=-2147483648),w(n=+n)&&(n=i?0:e.length-1),n<0&&(n=e.length+n),n>=e.length){if(i)return -1;n=e.length-1;}else if(n<0){if(!i)return -1;n=0;}if("string"==typeof t&&(t=f.from(t,r)),f.isBuffer(t))return 0===t.length?-1:E(e,t,n,r,i);if("number"==typeof t)return t&=255,"function"==typeof Uint8Array.prototype.indexOf?i?Uint8Array.prototype.indexOf.call(e,t,n):Uint8Array.prototype.lastIndexOf.call(e,t,n):E(e,[t],n,r,i);throw new TypeError("val must be string, number or Buffer")}function E(e,t,n,r,i){var a=1,o=e.length,s=t.length;if(void 0!==r&&("ucs2"===(r=String(r).toLowerCase())||"ucs-2"===r||"utf16le"===r||"utf-16le"===r)){if(e.length<2||t.length<2)return -1;o/=a=2,s/=2,n/=2;}function u(e,t){return 1===a?e[t]:e.readUInt16BE(t*a)}if(i)for(var l=-1,d=n;d<o;d++)if(u(e,d)===u(t,-1===l?0:d-l)){if(-1===l&&(l=d),d-l+1===s)return l*a}else -1!==l&&(d-=d-l),l=-1;else for(o<n+s&&(n=o-s),d=n;0<=d;d--){for(var f=!0,c=0;c<s;c++)if(u(e,d+c)!==u(t,c)){f=!1;break}if(f)return d}return -1}function m(e,t,n,r){return C(function(e){for(var t=[],n=0;n<e.length;++n)t.push(255&e.charCodeAt(n));return t}(t),e,n,r)}function v(e,t,n,r){return C(function(e,t){for(var n,r,i,a=[],o=0;o<e.length&&!((t-=2)<0);++o)n=e.charCodeAt(o),r=n>>8,i=n%256,a.push(i),a.push(r);return a}(t,e.length-n),e,n,r)}function y(e,t,n){n=Math.min(e.length,n);for(var r=[],i=t;i<n;){var a,o,s,u,l=e[i],d=null,f=239<l?4:223<l?3:191<l?2:1;if(i+f<=n)switch(f){case 1:l<128&&(d=l);break;case 2:128==(192&(a=e[i+1]))&&127<(u=(31&l)<<6|63&a)&&(d=u);break;case 3:a=e[i+1],o=e[i+2],128==(192&a)&&128==(192&o)&&2047<(u=(15&l)<<12|(63&a)<<6|63&o)&&(u<55296||57343<u)&&(d=u);break;case 4:a=e[i+1],o=e[i+2],s=e[i+3],128==(192&a)&&128==(192&o)&&128==(192&s)&&65535<(u=(15&l)<<18|(63&a)<<12|(63&o)<<6|63&s)&&u<1114112&&(d=u);}null===d?(d=65533,f=1):65535<d&&(d-=65536,r.push(d>>>10&1023|55296),d=56320|1023&d),r.push(d),i+=f;}return function(e){var t=e.length;if(t<=T)return String.fromCharCode.apply(String,e);var n="",r=0;for(;r<t;)n+=String.fromCharCode.apply(String,e.slice(r,r+=T));return n}(r)}n.kMaxLength=r,(f.TYPED_ARRAY_SUPPORT=function(){try{var e=new Uint8Array(1);return e.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===e.foo()}catch(e){return !1}}())||"undefined"==typeof console||"function"!=typeof console.error||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(f.prototype,"parent",{enumerable:!0,get:function(){if(f.isBuffer(this))return this.buffer}}),Object.defineProperty(f.prototype,"offset",{enumerable:!0,get:function(){if(f.isBuffer(this))return this.byteOffset}}),"undefined"!=typeof Symbol&&null!=Symbol.species&&f[Symbol.species]===f&&Object.defineProperty(f,Symbol.species,{value:null,configurable:!0,enumerable:!1,writable:!1}),f.poolSize=8192,f.from=i,f.prototype.__proto__=Uint8Array.prototype,f.__proto__=Uint8Array,f.alloc=function(e,t,n){return i=t,a=n,u(r=e),r<=0||void 0===i?o(r):"string"==typeof a?o(r).fill(i,a):o(r).fill(i);var r,i,a;},f.allocUnsafe=l,f.allocUnsafeSlow=l,f.isBuffer=function(e){return null!=e&&!0===e._isBuffer&&e!==f.prototype},f.compare=function(e,t){if(O(e,Uint8Array)&&(e=f.from(e,e.offset,e.byteLength)),O(t,Uint8Array)&&(t=f.from(t,t.offset,t.byteLength)),!f.isBuffer(e)||!f.isBuffer(t))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(e===t)return 0;for(var n=e.length,r=t.length,i=0,a=Math.min(n,r);i<a;++i)if(e[i]!==t[i]){n=e[i],r=t[i];break}return n<r?-1:r<n?1:0},f.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return !0;default:return !1}},f.concat=function(e,t){if(!Array.isArray(e))throw new TypeError('"list" argument must be an Array of Buffers');if(0===e.length)return f.alloc(0);if(void 0===t)for(i=t=0;i<e.length;++i)t+=e[i].length;for(var n=f.allocUnsafe(t),r=0,i=0;i<e.length;++i){var a=e[i];if(O(a,Uint8Array)&&(a=f.from(a)),!f.isBuffer(a))throw new TypeError('"list" argument must be an Array of Buffers');a.copy(n,r),r+=a.length;}return n},f.byteLength=h,f.prototype._isBuffer=!0,f.prototype.swap16=function(){var e=this.length;if(e%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var t=0;t<e;t+=2)g(this,t,t+1);return this},f.prototype.swap32=function(){var e=this.length;if(e%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var t=0;t<e;t+=4)g(this,t,t+3),g(this,t+1,t+2);return this},f.prototype.swap64=function(){var e=this.length;if(e%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var t=0;t<e;t+=8)g(this,t,t+7),g(this,t+1,t+6),g(this,t+2,t+5),g(this,t+3,t+4);return this},f.prototype.toLocaleString=f.prototype.toString=function(){var e=this.length;return 0===e?"":0===arguments.length?y(this,0,e):p.apply(this,arguments)},f.prototype.equals=function(e){if(!f.isBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e||0===f.compare(this,e)},f.prototype.inspect=function(){var e="",t=n.INSPECT_MAX_BYTES,e=this.toString("hex",0,t).replace(/(.{2})/g,"$1 ").trim();return this.length>t&&(e+=" ... "),"<Buffer "+e+">"},f.prototype.compare=function(e,t,n,r,i){if(O(e,Uint8Array)&&(e=f.from(e,e.offset,e.byteLength)),!f.isBuffer(e))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof e);if(void 0===t&&(t=0),void 0===n&&(n=e?e.length:0),void 0===r&&(r=0),void 0===i&&(i=this.length),t<0||n>e.length||r<0||i>this.length)throw new RangeError("out of range index");if(i<=r&&n<=t)return 0;if(i<=r)return -1;if(n<=t)return 1;if(this===e)return 0;for(var a=(i>>>=0)-(r>>>=0),o=(n>>>=0)-(t>>>=0),s=Math.min(a,o),u=this.slice(r,i),l=e.slice(t,n),d=0;d<s;++d)if(u[d]!==l[d]){a=u[d],o=l[d];break}return a<o?-1:o<a?1:0},f.prototype.includes=function(e,t,n){return -1!==this.indexOf(e,t,n)},f.prototype.indexOf=function(e,t,n){return _(this,e,t,n,!0)},f.prototype.lastIndexOf=function(e,t,n){return _(this,e,t,n,!1)},f.prototype.write=function(e,t,n,r){if(void 0===t)r="utf8",n=this.length,t=0;else if(void 0===n&&"string"==typeof t)r=t,n=this.length,t=0;else {if(!isFinite(t))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");t>>>=0,isFinite(n)?(n>>>=0,void 0===r&&(r="utf8")):(r=n,n=void 0);}var i=this.length-t;if((void 0===n||i<n)&&(n=i),0<e.length&&(n<0||t<0)||t>this.length)throw new RangeError("Attempt to write outside buffer bounds");r=r||"utf8";for(var a,o,s,u,l,d,f=!1;;)switch(r){case"hex":return function(e,t,n,r){n=Number(n)||0;var i=e.length-n;(!r||i<(r=Number(r)))&&(r=i);var a=t.length;a/2<r&&(r=a/2);for(var o=0;o<r;++o){var s=parseInt(t.substr(2*o,2),16);if(w(s))return o;e[n+o]=s;}return o}(this,e,t,n);case"utf8":case"utf-8":return l=t,d=n,C(M(e,(u=this).length-l),u,l,d);case"ascii":return m(this,e,t,n);case"latin1":case"binary":return m(this,e,t,n);case"base64":return a=this,o=t,s=n,C(N(e),a,o,s);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return v(this,e,t,n);default:if(f)throw new TypeError("Unknown encoding: "+r);r=(""+r).toLowerCase(),f=!0;}},f.prototype.toJSON=function(){return {type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var T=4096;function S(e,t,n){if(e%1!=0||e<0)throw new RangeError("offset is not uint");if(n<e+t)throw new RangeError("Trying to access beyond buffer length")}function A(e,t,n,r,i,a){if(!f.isBuffer(e))throw new TypeError('"buffer" argument must be a Buffer instance');if(i<t||t<a)throw new RangeError('"value" argument is out of bounds');if(n+r>e.length)throw new RangeError("Index out of range")}function I(e,t,n,r){if(n+r>e.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("Index out of range")}function R(e,t,n,r,i){return t=+t,n>>>=0,i||I(e,0,n,4),a.write(e,t,n,r,23,4),n+4}function b(e,t,n,r,i){return t=+t,n>>>=0,i||I(e,0,n,8),a.write(e,t,n,r,52,8),n+8}f.prototype.slice=function(e,t){var n=this.length;(e=~~e)<0?(e+=n)<0&&(e=0):n<e&&(e=n),(t=void 0===t?n:~~t)<0?(t+=n)<0&&(t=0):n<t&&(t=n),t<e&&(t=e);var r=this.subarray(e,t);return r.__proto__=f.prototype,r},f.prototype.readUIntLE=function(e,t,n){e>>>=0,t>>>=0,n||S(e,t,this.length);for(var r=this[e],i=1,a=0;++a<t&&(i*=256);)r+=this[e+a]*i;return r},f.prototype.readUIntBE=function(e,t,n){e>>>=0,t>>>=0,n||S(e,t,this.length);for(var r=this[e+--t],i=1;0<t&&(i*=256);)r+=this[e+--t]*i;return r},f.prototype.readUInt8=function(e,t){return e>>>=0,t||S(e,1,this.length),this[e]},f.prototype.readUInt16LE=function(e,t){return e>>>=0,t||S(e,2,this.length),this[e]|this[e+1]<<8},f.prototype.readUInt16BE=function(e,t){return e>>>=0,t||S(e,2,this.length),this[e]<<8|this[e+1]},f.prototype.readUInt32LE=function(e,t){return e>>>=0,t||S(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},f.prototype.readUInt32BE=function(e,t){return e>>>=0,t||S(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},f.prototype.readIntLE=function(e,t,n){e>>>=0,t>>>=0,n||S(e,t,this.length);for(var r=this[e],i=1,a=0;++a<t&&(i*=256);)r+=this[e+a]*i;return (i*=128)<=r&&(r-=Math.pow(2,8*t)),r},f.prototype.readIntBE=function(e,t,n){e>>>=0,t>>>=0,n||S(e,t,this.length);for(var r=t,i=1,a=this[e+--r];0<r&&(i*=256);)a+=this[e+--r]*i;return (i*=128)<=a&&(a-=Math.pow(2,8*t)),a},f.prototype.readInt8=function(e,t){return e>>>=0,t||S(e,1,this.length),128&this[e]?-1*(255-this[e]+1):this[e]},f.prototype.readInt16LE=function(e,t){e>>>=0,t||S(e,2,this.length);var n=this[e]|this[e+1]<<8;return 32768&n?4294901760|n:n},f.prototype.readInt16BE=function(e,t){e>>>=0,t||S(e,2,this.length);var n=this[e+1]|this[e]<<8;return 32768&n?4294901760|n:n},f.prototype.readInt32LE=function(e,t){return e>>>=0,t||S(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},f.prototype.readInt32BE=function(e,t){return e>>>=0,t||S(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},f.prototype.readFloatLE=function(e,t){return e>>>=0,t||S(e,4,this.length),a.read(this,e,!0,23,4)},f.prototype.readFloatBE=function(e,t){return e>>>=0,t||S(e,4,this.length),a.read(this,e,!1,23,4)},f.prototype.readDoubleLE=function(e,t){return e>>>=0,t||S(e,8,this.length),a.read(this,e,!0,52,8)},f.prototype.readDoubleBE=function(e,t){return e>>>=0,t||S(e,8,this.length),a.read(this,e,!1,52,8)},f.prototype.writeUIntLE=function(e,t,n,r){e=+e,t>>>=0,n>>>=0,r||A(this,e,t,n,Math.pow(2,8*n)-1,0);var i=1,a=0;for(this[t]=255&e;++a<n&&(i*=256);)this[t+a]=e/i&255;return t+n},f.prototype.writeUIntBE=function(e,t,n,r){e=+e,t>>>=0,n>>>=0,r||A(this,e,t,n,Math.pow(2,8*n)-1,0);var i=n-1,a=1;for(this[t+i]=255&e;0<=--i&&(a*=256);)this[t+i]=e/a&255;return t+n},f.prototype.writeUInt8=function(e,t,n){return e=+e,t>>>=0,n||A(this,e,t,1,255,0),this[t]=255&e,t+1},f.prototype.writeUInt16LE=function(e,t,n){return e=+e,t>>>=0,n||A(this,e,t,2,65535,0),this[t]=255&e,this[t+1]=e>>>8,t+2},f.prototype.writeUInt16BE=function(e,t,n){return e=+e,t>>>=0,n||A(this,e,t,2,65535,0),this[t]=e>>>8,this[t+1]=255&e,t+2},f.prototype.writeUInt32LE=function(e,t,n){return e=+e,t>>>=0,n||A(this,e,t,4,4294967295,0),this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=255&e,t+4},f.prototype.writeUInt32BE=function(e,t,n){return e=+e,t>>>=0,n||A(this,e,t,4,4294967295,0),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e,t+4},f.prototype.writeIntLE=function(e,t,n,r){var i;e=+e,t>>>=0,r||A(this,e,t,n,(i=Math.pow(2,8*n-1))-1,-i);var a=0,o=1,s=0;for(this[t]=255&e;++a<n&&(o*=256);)e<0&&0===s&&0!==this[t+a-1]&&(s=1),this[t+a]=(e/o>>0)-s&255;return t+n},f.prototype.writeIntBE=function(e,t,n,r){var i;e=+e,t>>>=0,r||A(this,e,t,n,(i=Math.pow(2,8*n-1))-1,-i);var a=n-1,o=1,s=0;for(this[t+a]=255&e;0<=--a&&(o*=256);)e<0&&0===s&&0!==this[t+a+1]&&(s=1),this[t+a]=(e/o>>0)-s&255;return t+n},f.prototype.writeInt8=function(e,t,n){return e=+e,t>>>=0,n||A(this,e,t,1,127,-128),e<0&&(e=255+e+1),this[t]=255&e,t+1},f.prototype.writeInt16LE=function(e,t,n){return e=+e,t>>>=0,n||A(this,e,t,2,32767,-32768),this[t]=255&e,this[t+1]=e>>>8,t+2},f.prototype.writeInt16BE=function(e,t,n){return e=+e,t>>>=0,n||A(this,e,t,2,32767,-32768),this[t]=e>>>8,this[t+1]=255&e,t+2},f.prototype.writeInt32LE=function(e,t,n){return e=+e,t>>>=0,n||A(this,e,t,4,2147483647,-2147483648),this[t]=255&e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24,t+4},f.prototype.writeInt32BE=function(e,t,n){return e=+e,t>>>=0,n||A(this,e,t,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e,t+4},f.prototype.writeFloatLE=function(e,t,n){return R(this,e,t,!0,n)},f.prototype.writeFloatBE=function(e,t,n){return R(this,e,t,!1,n)},f.prototype.writeDoubleLE=function(e,t,n){return b(this,e,t,!0,n)},f.prototype.writeDoubleBE=function(e,t,n){return b(this,e,t,!1,n)},f.prototype.copy=function(e,t,n,r){if(!f.isBuffer(e))throw new TypeError("argument should be a Buffer");if(n=n||0,r||0===r||(r=this.length),t>=e.length&&(t=e.length),t=t||0,0<r&&r<n&&(r=n),r===n)return 0;if(0===e.length||0===this.length)return 0;if(t<0)throw new RangeError("targetStart out of bounds");if(n<0||n>=this.length)throw new RangeError("Index out of range");if(r<0)throw new RangeError("sourceEnd out of bounds");r>this.length&&(r=this.length),e.length-t<r-n&&(r=e.length-t+n);var i=r-n;if(this===e&&"function"==typeof Uint8Array.prototype.copyWithin)this.copyWithin(t,n,r);else if(this===e&&n<t&&t<r)for(var a=i-1;0<=a;--a)e[a+t]=this[a+n];else Uint8Array.prototype.set.call(e,this.subarray(n,r),t);return i},f.prototype.fill=function(e,t,n,r){if("string"==typeof e){if("string"==typeof t?(r=t,t=0,n=this.length):"string"==typeof n&&(r=n,n=this.length),void 0!==r&&"string"!=typeof r)throw new TypeError("encoding must be a string");if("string"==typeof r&&!f.isEncoding(r))throw new TypeError("Unknown encoding: "+r);var i;1===e.length&&(i=e.charCodeAt(0),("utf8"===r&&i<128||"latin1"===r)&&(e=i));}else "number"==typeof e&&(e&=255);if(t<0||this.length<t||this.length<n)throw new RangeError("Out of range index");if(n<=t)return this;var a;if(t>>>=0,n=void 0===n?this.length:n>>>0,"number"==typeof(e=e||0))for(a=t;a<n;++a)this[a]=e;else {var o=f.isBuffer(e)?e:f.from(e,r),s=o.length;if(0===s)throw new TypeError('The value "'+e+'" is invalid for argument "value"');for(a=0;a<n-t;++a)this[a+t]=o[a%s];}return this};var D=/[^+/0-9A-Za-z-_]/g;function M(e,t){var n;t=t||1/0;for(var r=e.length,i=null,a=[],o=0;o<r;++o){if(55295<(n=e.charCodeAt(o))&&n<57344){if(!i){if(56319<n){-1<(t-=3)&&a.push(239,191,189);continue}if(o+1===r){-1<(t-=3)&&a.push(239,191,189);continue}i=n;continue}if(n<56320){-1<(t-=3)&&a.push(239,191,189),i=n;continue}n=65536+(i-55296<<10|n-56320);}else i&&-1<(t-=3)&&a.push(239,191,189);if(i=null,n<128){if(--t<0)break;a.push(n);}else if(n<2048){if((t-=2)<0)break;a.push(n>>6|192,63&n|128);}else if(n<65536){if((t-=3)<0)break;a.push(n>>12|224,n>>6&63|128,63&n|128);}else {if(!(n<1114112))throw new Error("Invalid code point");if((t-=4)<0)break;a.push(n>>18|240,n>>12&63|128,n>>6&63|128,63&n|128);}}return a}function N(e){return s.toByteArray(function(e){if((e=(e=e.split("=")[0]).trim().replace(D,"")).length<2)return "";for(;e.length%4!=0;)e+="=";return e}(e))}function C(e,t,n,r){for(var i=0;i<r&&!(i+n>=t.length||i>=e.length);++i)t[i+n]=e[i];return i}function O(e,t){return e instanceof t||null!=e&&null!=e.constructor&&null!=e.constructor.name&&e.constructor.name===t.name}function w(e){return e!=e}},{13:13,6:6}],9:[function(e,t,n){var i={parseBuffer:function(e){return new a(e).parse()},addBoxProcessor:function(e,t){"string"==typeof e&&"function"==typeof t&&(o.prototype._boxProcessors[e]=t);},createFile:function(){return new a},createBox:function(e,t,n){var r=o.create(e);return t&&t.append(r,n),r},createFullBox:function(e,t,n){var r=i.createBox(e,t,n);return r.version=0,r.flags=0,r},Utils:{}};i.Utils.dataViewToString=function(e,t){var n=t||"utf-8";if("undefined"!=typeof TextDecoder)return new TextDecoder(n).decode(e);var r=[],i=0;if("utf-8"===n)for(;i<e.byteLength;){var a=e.getUint8(i++);a<128||(a<224?a=(31&a)<<6:(a<240?a=(15&a)<<12:(a=(7&a)<<18,a|=(63&e.getUint8(i++))<<12),a|=(63&e.getUint8(i++))<<6),a|=63&e.getUint8(i++)),r.push(String.fromCharCode(a));}else for(;i<e.byteLength;)r.push(String.fromCharCode(e.getUint8(i++)));return r.join("")},i.Utils.utf8ToByteArray=function(e){var t,n;if("undefined"!=typeof TextEncoder)t=(new TextEncoder).encode(e);else for(t=[],n=0;n<e.length;++n){var r=e.charCodeAt(n);r<128?t.push(r):(r<2048?t.push(192|r>>6):(r<65536?t.push(224|r>>12):(t.push(240|r>>18),t.push(128|63&r>>12)),t.push(128|63&r>>6)),t.push(128|63&r));}return t},i.Utils.appendBox=function(e,t,n){if(t._offset=e._cursor.offset,t._root=e._root?e._root:e,t._raw=e._raw,t._parent=e,-1!==n)if(null!=n){var r,i=-1;if("number"==typeof n)i=n;else {if("string"==typeof n)r=n;else {if("object"!=typeof n||!n.type)return void e.boxes.push(t);r=n.type;}for(var a=0;a<e.boxes.length;a++)if(r===e.boxes[a].type){i=a+1;break}}e.boxes.splice(i,0,t);}else e.boxes.push(t);},void 0!==n&&(n.parseBuffer=i.parseBuffer,n.addBoxProcessor=i.addBoxProcessor,n.createFile=i.createFile,n.createBox=i.createBox,n.createFullBox=i.createFullBox,n.Utils=i.Utils),i.Cursor=function(e){this.offset=void 0===e?0:e;};var a=function(e){this._cursor=new i.Cursor,this.boxes=[],e&&(this._raw=new DataView(e));};a.prototype.fetch=function(e){var t=this.fetchAll(e,!0);return t.length?t[0]:null},a.prototype.fetchAll=function(e,t){var n=[];return a._sweep.call(this,e,n,t),n},a.prototype.parse=function(){for(this._cursor.offset=0,this.boxes=[];this._cursor.offset<this._raw.byteLength;){var e=o.parse(this);if(void 0===e.type)break;this.boxes.push(e);}return this},a._sweep=function(e,t,n){for(var r in this.type&&this.type==e&&t.push(this),this.boxes){if(t.length&&n)return;a._sweep.call(this.boxes[r],e,t,n);}},a.prototype.write=function(){for(var e=0,t=0;t<this.boxes.length;t++)e+=this.boxes[t].getLength(!1);var n=new Uint8Array(e);for(this._rawo=new DataView(n.buffer),this.bytes=n,t=this._cursor.offset=0;t<this.boxes.length;t++)this.boxes[t].write();return n.buffer},a.prototype.append=function(e,t){i.Utils.appendBox(this,e,t);};var o=function(){this._cursor=new i.Cursor;};o.parse=function(e){var t=new o;return t._offset=e._cursor.offset,t._root=e._root?e._root:e,t._raw=e._raw,t._parent=e,t._parseBox(),e._cursor.offset=t._raw.byteOffset+t._raw.byteLength,t},o.create=function(e){var t=new o;return t.type=e,t.boxes=[],t},o.prototype._boxContainers=["dinf","edts","mdia","meco","mfra","minf","moof","moov","mvex","stbl","strk","traf","trak","tref","udta","vttc","sinf","schi","encv","enca"],o.prototype._boxProcessors={},o.prototype._procField=function(e,t,n){this._parsing?this[e]=this._readField(t,n):this._writeField(t,n,this[e]);},o.prototype._procFieldArray=function(e,t,n,r){var i;if(this._parsing)for(this[e]=[],i=0;i<t;i++)this[e][i]=this._readField(n,r);else for(i=0;i<this[e].length;i++)this._writeField(n,r,this[e][i]);},o.prototype._procFullBox=function(){this._procField("version","uint",8),this._procField("flags","uint",24);},o.prototype._procEntries=function(e,t,n){var r;if(this._parsing)for(this[e]=[],r=0;r<t;r++)this[e].push({}),n.call(this,this[e][r]);else for(r=0;r<t;r++)n.call(this,this[e][r]);},o.prototype._procSubEntries=function(e,t,n,r){var i;if(this._parsing)for(e[t]=[],i=0;i<n;i++)e[t].push({}),r.call(this,e[t][i]);else for(i=0;i<n;i++)r.call(this,e[t][i]);},o.prototype._procEntryField=function(e,t,n,r){this._parsing?e[t]=this._readField(n,r):this._writeField(n,r,e[t]);},o.prototype._procSubBoxes=function(e,t){var n;if(this._parsing)for(this[e]=[],n=0;n<t;n++)this[e].push(o.parse(this));else for(n=0;n<t;n++)this._rawo?this[e][n].write():this.size+=this[e][n].getLength();},o.prototype._readField=function(e,t){switch(e){case"uint":return this._readUint(t);case"int":return this._readInt(t);case"template":return this._readTemplate(t);case"string":return -1===t?this._readTerminatedString():this._readString(t);case"data":return this._readData(t);case"utf8":return this._readUTF8String();default:return -1}},o.prototype._readInt=function(e){var t=null,n=this._cursor.offset-this._raw.byteOffset;switch(e){case 8:t=this._raw.getInt8(n);break;case 16:t=this._raw.getInt16(n);break;case 32:t=this._raw.getInt32(n);break;case 64:var r=this._raw.getInt32(n),i=this._raw.getInt32(4+n),t=r*Math.pow(2,32)+i;}return this._cursor.offset+=e>>3,t},o.prototype._readUint=function(e){var t,n,r=null,i=this._cursor.offset-this._raw.byteOffset;switch(e){case 8:r=this._raw.getUint8(i);break;case 16:r=this._raw.getUint16(i);break;case 24:r=((t=this._raw.getUint16(i))<<8)+(n=this._raw.getUint8(2+i));break;case 32:r=this._raw.getUint32(i);break;case 64:t=this._raw.getUint32(i),n=this._raw.getUint32(4+i),r=t*Math.pow(2,32)+n;}return this._cursor.offset+=e>>3,r},o.prototype._readString=function(e){for(var t="",n=0;n<e;n++){var r=this._readUint(8);t+=String.fromCharCode(r);}return t},o.prototype._readTemplate=function(e){return this._readUint(e/2)+this._readUint(e/2)/Math.pow(2,e/2)},o.prototype._readTerminatedString=function(){for(var e="";this._cursor.offset-this._offset<this._raw.byteLength;){var t=this._readUint(8);if(0===t)break;e+=String.fromCharCode(t);}return e},o.prototype._readData=function(e){var t=0<e?e:this._raw.byteLength-(this._cursor.offset-this._offset);if(0<t){var n=new Uint8Array(this._raw.buffer,this._cursor.offset,t);return this._cursor.offset+=t,n}return null},o.prototype._readUTF8String=function(){var e=this._raw.byteLength-(this._cursor.offset-this._offset),t=null;return 0<e&&(t=new DataView(this._raw.buffer,this._cursor.offset,e),this._cursor.offset+=e),t?i.Utils.dataViewToString(t):t},o.prototype._parseBox=function(){if(this._parsing=!0,this._cursor.offset=this._offset,this._offset+8>this._raw.buffer.byteLength)this._root._incomplete=!0;else {switch(this._procField("size","uint",32),this._procField("type","string",4),1===this.size&&this._procField("largesize","uint",64),"uuid"===this.type&&this._procFieldArray("usertype",16,"uint",8),this.size){case 0:this._raw=new DataView(this._raw.buffer,this._offset,this._raw.byteLength-this._cursor.offset+8);break;case 1:this._offset+this.size>this._raw.buffer.byteLength?(this._incomplete=!0,this._root._incomplete=!0):this._raw=new DataView(this._raw.buffer,this._offset,this.largesize);break;default:this._offset+this.size>this._raw.buffer.byteLength?(this._incomplete=!0,this._root._incomplete=!0):this._raw=new DataView(this._raw.buffer,this._offset,this.size);}this._incomplete||(this._boxProcessors[this.type]&&this._boxProcessors[this.type].call(this),-1!==this._boxContainers.indexOf(this.type)?this._parseContainerBox():this._data=this._readData());}},o.prototype._parseFullBox=function(){this.version=this._readUint(8),this.flags=this._readUint(24);},o.prototype._parseContainerBox=function(){for(this.boxes=[];this._cursor.offset-this._raw.byteOffset<this._raw.byteLength;)this.boxes.push(o.parse(this));},o.prototype.append=function(e,t){i.Utils.appendBox(this,e,t);},o.prototype.getLength=function(){if(this._parsing=!1,this._rawo=null,this.size=0,this._procField("size","uint",32),this._procField("type","string",4),1===this.size&&this._procField("largesize","uint",64),"uuid"===this.type&&this._procFieldArray("usertype",16,"uint",8),this._boxProcessors[this.type]&&this._boxProcessors[this.type].call(this),-1!==this._boxContainers.indexOf(this.type))for(var e=0;e<this.boxes.length;e++)this.size+=this.boxes[e].getLength();return this._data&&this._writeData(this._data),this.size},o.prototype.write=function(){switch(this._parsing=!1,this._cursor.offset=this._parent._cursor.offset,this.size){case 0:this._rawo=new DataView(this._parent._rawo.buffer,this._cursor.offset,this.parent._rawo.byteLength-this._cursor.offset);break;case 1:this._rawo=new DataView(this._parent._rawo.buffer,this._cursor.offset,this.largesize);break;default:this._rawo=new DataView(this._parent._rawo.buffer,this._cursor.offset,this.size);}if(this._procField("size","uint",32),this._procField("type","string",4),1===this.size&&this._procField("largesize","uint",64),"uuid"===this.type&&this._procFieldArray("usertype",16,"uint",8),this._boxProcessors[this.type]&&this._boxProcessors[this.type].call(this),-1!==this._boxContainers.indexOf(this.type))for(var e=0;e<this.boxes.length;e++)this.boxes[e].write();return this._data&&this._writeData(this._data),this._parent._cursor.offset+=this.size,this.size},o.prototype._writeInt=function(e,t){if(this._rawo){var n=this._cursor.offset-this._rawo.byteOffset;switch(e){case 8:this._rawo.setInt8(n,t);break;case 16:this._rawo.setInt16(n,t);break;case 32:this._rawo.setInt32(n,t);break;case 64:var r=Math.floor(t/Math.pow(2,32)),i=t-r*Math.pow(2,32);this._rawo.setUint32(n,r),this._rawo.setUint32(4+n,i);}this._cursor.offset+=e>>3;}else this.size+=e>>3;},o.prototype._writeUint=function(e,t){if(this._rawo){var n,r,i=this._cursor.offset-this._rawo.byteOffset;switch(e){case 8:this._rawo.setUint8(i,t);break;case 16:this._rawo.setUint16(i,t);break;case 24:n=(16776960&t)>>8,r=255&t,this._rawo.setUint16(i,n),this._rawo.setUint8(2+i,r);break;case 32:this._rawo.setUint32(i,t);break;case 64:r=t-(n=Math.floor(t/Math.pow(2,32)))*Math.pow(2,32),this._rawo.setUint32(i,n),this._rawo.setUint32(4+i,r);}this._cursor.offset+=e>>3;}else this.size+=e>>3;},o.prototype._writeString=function(e,t){for(var n=0;n<e;n++)this._writeUint(8,t.charCodeAt(n));},o.prototype._writeTerminatedString=function(e){if(0!==e.length){for(var t=0;t<e.length;t++)this._writeUint(8,e.charCodeAt(t));this._writeUint(8,0);}},o.prototype._writeTemplate=function(e,t){var n=Math.floor(t),r=(t-n)*Math.pow(2,e/2);this._writeUint(e/2,n),this._writeUint(e/2,r);},o.prototype._writeData=function(e){if(e)if(this._rawo){if(e instanceof Array){for(var t=this._cursor.offset-this._rawo.byteOffset,n=0;n<e.length;n++)this._rawo.setInt8(t+n,e[n]);this._cursor.offset+=e.length;}e instanceof Uint8Array&&(this._root.bytes.set(e,this._cursor.offset),this._cursor.offset+=e.length);}else this.size+=e.length;},o.prototype._writeUTF8String=function(e){var t=i.Utils.utf8ToByteArray(e);if(this._rawo)for(var n=new DataView(this._rawo.buffer,this._cursor.offset,t.length),r=0;r<t.length;r++)n.setUint8(r,t[r]);else this.size+=t.length;},o.prototype._writeField=function(e,t,n){switch(e){case"uint":this._writeUint(t,n);break;case"int":this._writeInt(t,n);break;case"template":this._writeTemplate(t,n);break;case"string":-1==t?this._writeTerminatedString(n):this._writeString(t,n);break;case"data":this._writeData(n);break;case"utf8":this._writeUTF8String(n);}},o.prototype._boxProcessors.avc1=o.prototype._boxProcessors.encv=function(){this._procFieldArray("reserved1",6,"uint",8),this._procField("data_reference_index","uint",16),this._procField("pre_defined1","uint",16),this._procField("reserved2","uint",16),this._procFieldArray("pre_defined2",3,"uint",32),this._procField("width","uint",16),this._procField("height","uint",16),this._procField("horizresolution","template",32),this._procField("vertresolution","template",32),this._procField("reserved3","uint",32),this._procField("frame_count","uint",16),this._procFieldArray("compressorname",32,"uint",8),this._procField("depth","uint",16),this._procField("pre_defined3","int",16),this._procField("config","data",-1);},o.prototype._boxProcessors.dref=function(){this._procFullBox(),this._procField("entry_count","uint",32),this._procSubBoxes("entries",this.entry_count);},o.prototype._boxProcessors.elst=function(){this._procFullBox(),this._procField("entry_count","uint",32),this._procEntries("entries",this.entry_count,function(e){this._procEntryField(e,"segment_duration","uint",1===this.version?64:32),this._procEntryField(e,"media_time","int",1===this.version?64:32),this._procEntryField(e,"media_rate_integer","int",16),this._procEntryField(e,"media_rate_fraction","int",16);});},o.prototype._boxProcessors.emsg=function(){this._procFullBox(),1==this.version?(this._procField("timescale","uint",32),this._procField("presentation_time","uint",64),this._procField("event_duration","uint",32),this._procField("id","uint",32),this._procField("scheme_id_uri","string",-1),this._procField("value","string",-1)):(this._procField("scheme_id_uri","string",-1),this._procField("value","string",-1),this._procField("timescale","uint",32),this._procField("presentation_time_delta","uint",32),this._procField("event_duration","uint",32),this._procField("id","uint",32)),this._procField("message_data","data",-1);},o.prototype._boxProcessors.free=o.prototype._boxProcessors.skip=function(){this._procField("data","data",-1);},o.prototype._boxProcessors.frma=function(){this._procField("data_format","uint",32);},o.prototype._boxProcessors.ftyp=o.prototype._boxProcessors.styp=function(){this._procField("major_brand","string",4),this._procField("minor_version","uint",32);var e=-1;this._parsing&&(e=(this._raw.byteLength-(this._cursor.offset-this._raw.byteOffset))/4),this._procFieldArray("compatible_brands",e,"string",4);},o.prototype._boxProcessors.hdlr=function(){this._procFullBox(),this._procField("pre_defined","uint",32),this._procField("handler_type","string",4),this._procFieldArray("reserved",3,"uint",32),this._procField("name","string",-1);},o.prototype._boxProcessors.mdat=function(){this._procField("data","data",-1);},o.prototype._boxProcessors.mdhd=function(){this._procFullBox(),this._procField("creation_time","uint",1==this.version?64:32),this._procField("modification_time","uint",1==this.version?64:32),this._procField("timescale","uint",32),this._procField("duration","uint",1==this.version?64:32),this._parsing||"string"!=typeof this.language||(this.language=this.language.charCodeAt(0)-96<<10|this.language.charCodeAt(1)-96<<5|this.language.charCodeAt(2)-96),this._procField("language","uint",16),this._parsing&&(this.language=String.fromCharCode(96+(this.language>>10&31),96+(this.language>>5&31),96+(31&this.language))),this._procField("pre_defined","uint",16);},o.prototype._boxProcessors.mehd=function(){this._procFullBox(),this._procField("fragment_duration","uint",1==this.version?64:32);},o.prototype._boxProcessors.mfhd=function(){this._procFullBox(),this._procField("sequence_number","uint",32);},o.prototype._boxProcessors.mfro=function(){this._procFullBox(),this._procField("mfra_size","uint",32);},o.prototype._boxProcessors.mp4a=o.prototype._boxProcessors.enca=function(){this._procFieldArray("reserved1",6,"uint",8),this._procField("data_reference_index","uint",16),this._procFieldArray("reserved2",2,"uint",32),this._procField("channelcount","uint",16),this._procField("samplesize","uint",16),this._procField("pre_defined","uint",16),this._procField("reserved3","uint",16),this._procField("samplerate","template",32),this._procField("esds","data",-1);},o.prototype._boxProcessors.mvhd=function(){this._procFullBox(),this._procField("creation_time","uint",1==this.version?64:32),this._procField("modification_time","uint",1==this.version?64:32),this._procField("timescale","uint",32),this._procField("duration","uint",1==this.version?64:32),this._procField("rate","template",32),this._procField("volume","template",16),this._procField("reserved1","uint",16),this._procFieldArray("reserved2",2,"uint",32),this._procFieldArray("matrix",9,"template",32),this._procFieldArray("pre_defined",6,"uint",32),this._procField("next_track_ID","uint",32);},o.prototype._boxProcessors.payl=function(){this._procField("cue_text","utf8");},o.prototype._boxProcessors.pssh=function(){this._procFullBox(),this._procFieldArray("SystemID",16,"uint",8),this._procField("DataSize","uint",32),this._procFieldArray("Data",this.DataSize,"uint",8);},o.prototype._boxProcessors.schm=function(){this._procFullBox(),this._procField("scheme_type","uint",32),this._procField("scheme_version","uint",32),1&this.flags&&this._procField("scheme_uri","string",-1);},o.prototype._boxProcessors.sdtp=function(){this._procFullBox();var e=-1;this._parsing&&(e=this._raw.byteLength-(this._cursor.offset-this._raw.byteOffset)),this._procFieldArray("sample_dependency_table",e,"uint",8);},o.prototype._boxProcessors.sidx=function(){this._procFullBox(),this._procField("reference_ID","uint",32),this._procField("timescale","uint",32),this._procField("earliest_presentation_time","uint",1==this.version?64:32),this._procField("first_offset","uint",1==this.version?64:32),this._procField("reserved","uint",16),this._procField("reference_count","uint",16),this._procEntries("references",this.reference_count,function(e){this._parsing||(e.reference=(1&e.reference_type)<<31,e.reference|=2147483647&e.referenced_size,e.sap=(1&e.starts_with_SAP)<<31,e.sap|=(3&e.SAP_type)<<28,e.sap|=268435455&e.SAP_delta_time),this._procEntryField(e,"reference","uint",32),this._procEntryField(e,"subsegment_duration","uint",32),this._procEntryField(e,"sap","uint",32),this._parsing&&(e.reference_type=e.reference>>31&1,e.referenced_size=2147483647&e.reference,e.starts_with_SAP=e.sap>>31&1,e.SAP_type=e.sap>>28&7,e.SAP_delta_time=268435455&e.sap);});},o.prototype._boxProcessors.smhd=function(){this._procFullBox(),this._procField("balance","uint",16),this._procField("reserved","uint",16);},o.prototype._boxProcessors.ssix=function(){this._procFullBox(),this._procField("subsegment_count","uint",32),this._procEntries("subsegments",this.subsegment_count,function(e){this._procEntryField(e,"ranges_count","uint",32),this._procSubEntries(e,"ranges",e.ranges_count,function(e){this._procEntryField(e,"level","uint",8),this._procEntryField(e,"range_size","uint",24);});});},o.prototype._boxProcessors.stsd=function(){this._procFullBox(),this._procField("entry_count","uint",32),this._procSubBoxes("entries",this.entry_count);},o.prototype._boxProcessors.subs=function(){this._procFullBox(),this._procField("entry_count","uint",32),this._procEntries("entries",this.entry_count,function(e){this._procEntryField(e,"sample_delta","uint",32),this._procEntryField(e,"subsample_count","uint",16),this._procSubEntries(e,"subsamples",e.subsample_count,function(e){this._procEntryField(e,"subsample_size","uint",1===this.version?32:16),this._procEntryField(e,"subsample_priority","uint",8),this._procEntryField(e,"discardable","uint",8),this._procEntryField(e,"codec_specific_parameters","uint",32);});});},o.prototype._boxProcessors.tenc=function(){this._procFullBox(),this._procField("default_IsEncrypted","uint",24),this._procField("default_IV_size","uint",8),this._procFieldArray("default_KID",16,"uint",8);},o.prototype._boxProcessors.tfdt=function(){this._procFullBox(),this._procField("baseMediaDecodeTime","uint",1==this.version?64:32);},o.prototype._boxProcessors.tfhd=function(){this._procFullBox(),this._procField("track_ID","uint",32),1&this.flags&&this._procField("base_data_offset","uint",64),2&this.flags&&this._procField("sample_description_offset","uint",32),8&this.flags&&this._procField("default_sample_duration","uint",32),16&this.flags&&this._procField("default_sample_size","uint",32),32&this.flags&&this._procField("default_sample_flags","uint",32);},o.prototype._boxProcessors.tfra=function(){this._procFullBox(),this._procField("track_ID","uint",32),this._parsing||(this.reserved=0,this.reserved|=(48&this.length_size_of_traf_num)<<4,this.reserved|=(12&this.length_size_of_trun_num)<<2,this.reserved|=3&this.length_size_of_sample_num),this._procField("reserved","uint",32),this._parsing&&(this.length_size_of_traf_num=(48&this.reserved)>>4,this.length_size_of_trun_num=(12&this.reserved)>>2,this.length_size_of_sample_num=3&this.reserved),this._procField("number_of_entry","uint",32),this._procEntries("entries",this.number_of_entry,function(e){this._procEntryField(e,"time","uint",1===this.version?64:32),this._procEntryField(e,"moof_offset","uint",1===this.version?64:32),this._procEntryField(e,"traf_number","uint",8*(this.length_size_of_traf_num+1)),this._procEntryField(e,"trun_number","uint",8*(this.length_size_of_trun_num+1)),this._procEntryField(e,"sample_number","uint",8*(this.length_size_of_sample_num+1));});},o.prototype._boxProcessors.tkhd=function(){this._procFullBox(),this._procField("creation_time","uint",1==this.version?64:32),this._procField("modification_time","uint",1==this.version?64:32),this._procField("track_ID","uint",32),this._procField("reserved1","uint",32),this._procField("duration","uint",1==this.version?64:32),this._procFieldArray("reserved2",2,"uint",32),this._procField("layer","uint",16),this._procField("alternate_group","uint",16),this._procField("volume","template",16),this._procField("reserved3","uint",16),this._procFieldArray("matrix",9,"template",32),this._procField("width","template",32),this._procField("height","template",32);},o.prototype._boxProcessors.trex=function(){this._procFullBox(),this._procField("track_ID","uint",32),this._procField("default_sample_description_index","uint",32),this._procField("default_sample_duration","uint",32),this._procField("default_sample_size","uint",32),this._procField("default_sample_flags","uint",32);},o.prototype._boxProcessors.trun=function(){this._procFullBox(),this._procField("sample_count","uint",32),1&this.flags&&this._procField("data_offset","int",32),4&this.flags&&this._procField("first_sample_flags","uint",32),this._procEntries("samples",this.sample_count,function(e){256&this.flags&&this._procEntryField(e,"sample_duration","uint",32),512&this.flags&&this._procEntryField(e,"sample_size","uint",32),1024&this.flags&&this._procEntryField(e,"sample_flags","uint",32),2048&this.flags&&this._procEntryField(e,"sample_composition_time_offset",1===this.version?"int":"uint",32);});},o.prototype._boxProcessors["url "]=o.prototype._boxProcessors["urn "]=function(){this._procFullBox(),"urn "===this.type&&this._procField("name","string",-1),this._procField("location","string",-1);},o.prototype._boxProcessors.vlab=function(){this._procField("source_label","utf8");},o.prototype._boxProcessors.vmhd=function(){this._procFullBox(),this._procField("graphicsmode","uint",16),this._procFieldArray("opcolor",3,"uint",16);},o.prototype._boxProcessors.vttC=function(){this._procField("config","utf8");},o.prototype._boxProcessors.vtte=function(){};},{}],10:[function(e,t,n){(function(e){function t(e){return Object.prototype.toString.call(e)}n.isArray=function(e){return Array.isArray?Array.isArray(e):"[object Array]"===t(e)},n.isBoolean=function(e){return "boolean"==typeof e},n.isNull=function(e){return null===e},n.isNullOrUndefined=function(e){return null==e},n.isNumber=function(e){return "number"==typeof e},n.isString=function(e){return "string"==typeof e},n.isSymbol=function(e){return "symbol"==typeof e},n.isUndefined=function(e){return void 0===e},n.isRegExp=function(e){return "[object RegExp]"===t(e)},n.isObject=function(e){return "object"==typeof e&&null!==e},n.isDate=function(e){return "[object Date]"===t(e)},n.isError=function(e){return "[object Error]"===t(e)||e instanceof Error},n.isFunction=function(e){return "function"==typeof e},n.isPrimitive=function(e){return null===e||"boolean"==typeof e||"number"==typeof e||"string"==typeof e||"symbol"==typeof e||void 0===e},n.isBuffer=e.isBuffer;}).call(this,{isBuffer:e(22)});},{22:22}],11:[function(e,t,n){var u=Object.create||function(e){function t(){}return t.prototype=e,new t},o=Object.keys||function(e){var t=[];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.push(n);return n},a=Function.prototype.bind||function(e){var t=this;return function(){return t.apply(e,arguments)}};function r(){this._events&&Object.prototype.hasOwnProperty.call(this,"_events")||(this._events=u(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0;}((t.exports=r).EventEmitter=r).prototype._events=void 0,r.prototype._maxListeners=void 0;var i,s=10;try{var l={};Object.defineProperty&&Object.defineProperty(l,"x",{value:0}),i=0===l.x;}catch(e){i=!1;}function d(e){return void 0===e._maxListeners?r.defaultMaxListeners:e._maxListeners}function f(e,t,n,r){var i,a,o,s;if("function"!=typeof n)throw new TypeError('"listener" argument must be a function');return (i=e._events)?(i.newListener&&(e.emit("newListener",t,n.listener?n.listener:n),i=e._events),a=i[t]):(i=e._events=u(null),e._eventsCount=0),a?("function"==typeof a?a=i[t]=r?[n,a]:[a,n]:r?a.unshift(n):a.push(n),a.warned||(s=d(e))&&0<s&&a.length>s&&(a.warned=!0,(o=new Error("Possible EventEmitter memory leak detected. "+a.length+' "'+String(t)+'" listeners added. Use emitter.setMaxListeners() to increase limit.')).name="MaxListenersExceededWarning",o.emitter=e,o.type=t,o.count=a.length,"object"==typeof console&&console.warn&&console.warn("%s: %s",o.name,o.message))):(a=i[t]=n,++e._eventsCount),e}function c(){if(!this.fired)switch(this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length){case 0:return this.listener.call(this.target);case 1:return this.listener.call(this.target,arguments[0]);case 2:return this.listener.call(this.target,arguments[0],arguments[1]);case 3:return this.listener.call(this.target,arguments[0],arguments[1],arguments[2]);default:for(var e=new Array(arguments.length),t=0;t<e.length;++t)e[t]=arguments[t];this.listener.apply(this.target,e);}}function h(e,t,n){var r={fired:!1,wrapFn:void 0,target:e,type:t,listener:n},i=a.call(c,r);return i.listener=n,r.wrapFn=i}function p(e,t,n){var r=e._events;if(!r)return [];var i=r[t];return i?"function"==typeof i?n?[i.listener||i]:[i]:n?function(e){for(var t=new Array(e.length),n=0;n<t.length;++n)t[n]=e[n].listener||e[n];return t}(i):_(i,i.length):[]}function g(e){var t=this._events;if(t){var n=t[e];if("function"==typeof n)return 1;if(n)return n.length}return 0}function _(e,t){for(var n=new Array(t),r=0;r<t;++r)n[r]=e[r];return n}i?Object.defineProperty(r,"defaultMaxListeners",{enumerable:!0,get:function(){return s},set:function(e){if("number"!=typeof e||e<0||e!=e)throw new TypeError('"defaultMaxListeners" must be a positive number');s=e;}}):r.defaultMaxListeners=s,r.prototype.setMaxListeners=function(e){if("number"!=typeof e||e<0||isNaN(e))throw new TypeError('"n" argument must be a positive number');return this._maxListeners=e,this},r.prototype.getMaxListeners=function(){return d(this)},r.prototype.emit=function(e,t,n,r){var i,a,o,s,u="error"===e,l=this._events;if(l)u=u&&null==l.error;else if(!u)return !1;if(u){if(1<arguments.length&&(i=t),i instanceof Error)throw i;var d=new Error('Unhandled "error" event. ('+i+")");throw d.context=i,d}if(!(a=l[e]))return !1;var f,c="function"==typeof a;switch(f=arguments.length){case 1:!function(e,t,n){if(t)e.call(n);else for(var r=e.length,i=_(e,r),a=0;a<r;++a)i[a].call(n);}(a,c,this);break;case 2:!function(e,t,n,r){if(t)e.call(n,r);else for(var i=e.length,a=_(e,i),o=0;o<i;++o)a[o].call(n,r);}(a,c,this,t);break;case 3:!function(e,t,n,r,i){if(t)e.call(n,r,i);else for(var a=e.length,o=_(e,a),s=0;s<a;++s)o[s].call(n,r,i);}(a,c,this,t,n);break;case 4:!function(e,t,n,r,i,a){if(t)e.call(n,r,i,a);else for(var o=e.length,s=_(e,o),u=0;u<o;++u)s[u].call(n,r,i,a);}(a,c,this,t,n,r);break;default:for(o=new Array(f-1),s=1;s<f;s++)o[s-1]=arguments[s];!function(e,t,n,r){if(t)e.apply(n,r);else for(var i=e.length,a=_(e,i),o=0;o<i;++o)a[o].apply(n,r);}(a,c,this,o);}return !0},r.prototype.on=r.prototype.addListener=function(e,t){return f(this,e,t,!1)},r.prototype.prependListener=function(e,t){return f(this,e,t,!0)},r.prototype.once=function(e,t){if("function"!=typeof t)throw new TypeError('"listener" argument must be a function');return this.on(e,h(this,e,t)),this},r.prototype.prependOnceListener=function(e,t){if("function"!=typeof t)throw new TypeError('"listener" argument must be a function');return this.prependListener(e,h(this,e,t)),this},r.prototype.removeListener=function(e,t){var n,r,i,a,o;if("function"!=typeof t)throw new TypeError('"listener" argument must be a function');if(!(r=this._events))return this;if(!(n=r[e]))return this;if(n===t||n.listener===t)0==--this._eventsCount?this._events=u(null):(delete r[e],r.removeListener&&this.emit("removeListener",e,n.listener||t));else if("function"!=typeof n){for(i=-1,a=n.length-1;0<=a;a--)if(n[a]===t||n[a].listener===t){o=n[a].listener,i=a;break}if(i<0)return this;0===i?n.shift():function(e,t){for(var n=t,r=n+1,i=e.length;r<i;n+=1,r+=1)e[n]=e[r];e.pop();}(n,i),1===n.length&&(r[e]=n[0]),r.removeListener&&this.emit("removeListener",e,o||t);}return this},r.prototype.removeAllListeners=function(e){var t,n=this._events;if(!n)return this;if(!n.removeListener)return 0===arguments.length?(this._events=u(null),this._eventsCount=0):n[e]&&(0==--this._eventsCount?this._events=u(null):delete n[e]),this;if(0===arguments.length){for(var r,i=o(n),a=0;a<i.length;++a)"removeListener"!==(r=i[a])&&this.removeAllListeners(r);return this.removeAllListeners("removeListener"),this._events=u(null),this._eventsCount=0,this}if("function"==typeof(t=n[e]))this.removeListener(e,t);else if(t)for(a=t.length-1;0<=a;a--)this.removeListener(e,t[a]);return this},r.prototype.listeners=function(e){return p(this,e,!0)},r.prototype.rawListeners=function(e){return p(this,e,!1)},r.listenerCount=function(e,t){return "function"==typeof e.listenerCount?e.listenerCount(t):g.call(e,t)},r.prototype.listenerCount=g,r.prototype.eventNames=function(){return 0<this._eventsCount?Reflect.ownKeys(this._events):[]};},{}],12:[function(e,t,n){var h=Array.isArray,p=Object.keys,g=Object.prototype.hasOwnProperty;t.exports=function e(t,n){if(t===n)return !0;if(t&&n&&"object"==typeof t&&"object"==typeof n){var r,i,a=h(t),o=h(n);if(a&&o){if((f=t.length)!=n.length)return !1;for(r=f;0!=r--;)if(!e(t[r],n[r]))return !1;return !0}if(a!=o)return !1;var s=t instanceof Date,u=n instanceof Date;if(s!=u)return !1;if(s&&u)return t.getTime()==n.getTime();var l=t instanceof RegExp,d=n instanceof RegExp;if(l!=d)return !1;if(l&&d)return t.toString()==n.toString();var f,c=p(t);if((f=c.length)!==p(n).length)return !1;for(r=f;0!=r--;)if(!g.call(n,c[r]))return !1;for(r=f;0!=r--;)if(!e(t[i=c[r]],n[i]))return !1;return !0}return t!=t&&n!=n};},{}],13:[function(e,t,n){n.read=function(e,t,n,r,i){var a,o,s=8*i-r-1,u=(1<<s)-1,l=u>>1,d=-7,f=n?i-1:0,c=n?-1:1,h=e[t+f];for(f+=c,a=h&(1<<-d)-1,h>>=-d,d+=s;0<d;a=256*a+e[t+f],f+=c,d-=8);for(o=a&(1<<-d)-1,a>>=-d,d+=r;0<d;o=256*o+e[t+f],f+=c,d-=8);if(0===a)a=1-l;else {if(a===u)return o?NaN:1/0*(h?-1:1);o+=Math.pow(2,r),a-=l;}return (h?-1:1)*o*Math.pow(2,a-r)},n.write=function(e,t,n,r,i,a){var o,s,u,l=8*a-i-1,d=(1<<l)-1,f=d>>1,c=23===i?Math.pow(2,-24)-Math.pow(2,-77):0,h=r?0:a-1,p=r?1:-1,g=t<0||0===t&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(s=isNaN(t)?1:0,o=d):(o=Math.floor(Math.log(t)/Math.LN2),t*(u=Math.pow(2,-o))<1&&(o--,u*=2),2<=(t+=1<=o+f?c/u:c*Math.pow(2,1-f))*u&&(o++,u/=2),d<=o+f?(s=0,o=d):1<=o+f?(s=(t*u-1)*Math.pow(2,i),o+=f):(s=t*Math.pow(2,f-1)*Math.pow(2,i),o=0));8<=i;e[n+h]=255&s,h+=p,s/=256,i-=8);for(o=o<<i|s,l+=i;0<l;e[n+h]=255&o,h+=p,o/=256,l-=8);e[n+h-p]|=128*g;};},{}],14:[function(e,t,n){function d(e,t,n,r){var i=r&&"seq"===r.timeContainer,a=0;r&&(a=i&&n?n.end:r.begin),t.begin=t.explicit_begin?t.explicit_begin+a:a;var o=t.begin,s=null;for(var u in t.sets)d(e,t.sets[u],s,t),o="seq"===t.timeContainer?t.sets[u].end:Math.max(o,t.sets[u].end),s=t.sets[u];if("contents"in t)for(var l in t.contents)d(e,t.contents[l],s,t),o="seq"===t.timeContainer?t.contents[l].end:Math.max(o,t.contents[l].end),s=t.contents[l];else o=i?t.begin:Number.POSITIVE_INFINITY;null!==t.explicit_end&&null!==t.explicit_dur?t.end=Math.min(t.begin+t.explicit_dur,a+t.explicit_end):null===t.explicit_end&&null!==t.explicit_dur?t.end=t.begin+t.explicit_dur:null!==t.explicit_end&&null===t.explicit_dur?t.end=a+t.explicit_end:t.end=o,delete t.explicit_begin,delete t.explicit_dur,delete t.explicit_end,e._registerEvent(t);}function y(e){this.node=e;}function T(){this.events=[],this.head=null,this.body=null;}function S(){this.styling=null,this.layout=null;}function A(){this.styles={};}function I(){this.id=null,this.styleAttrs=null,this.styleRefs=null;}function R(){this.regions={};}function r(e){this.kind=e;}function i(e){this.id=e;}function a(e){this.regionID=e;}function o(e){this.styleAttrs=e;}function s(e){this.sets=e;}function u(e){this.contents=e;}function l(e,t,n){this.explicit_begin=e,this.explicit_end=t,this.explicit_dur=n;}function b(){r.call(this,"body");}function D(){r.call(this,"div");}function M(){r.call(this,"p");}function N(){r.call(this,"span");}function f(){r.call(this,"span");}function C(){r.call(this,"br");}function O(){}function w(){}function c(e){return e&&"xml:id"in e.attributes&&e.attributes["xml:id"].value||null}function h(e){return e&&"style"in e.attributes?e.attributes.style.value.split(" "):[]}function p(e,t){var n={};if(null!==e)for(var r in e.attributes){var i,a=e.attributes[r].uri+" "+e.attributes[r].local,o=B.byQName[a];void 0!==o&&(null!==(i=o.parse(e.attributes[r].value))?(n[a]=i,o===B.byName.zIndex&&m(t,"zIndex attribute present but not used by IMSC1 since regions do not overlap")):L(t,"Cannot parse styling attribute "+a+" --\x3e "+e.attributes[r].value));}return n}function g(e,t,n){for(var r in e.attributes)if(e.attributes[r].uri===t&&e.attributes[r].local===n)return e.attributes[r].value;return null}function _(e,t,n){var r,i=null;return null!==(r=/^(\d+(?:\.\d+)?)f$/.exec(n))?null!==t&&(i=parseFloat(r[1])/t):null!==(r=/^(\d+(?:\.\d+)?)t$/.exec(n))?null!==e&&(i=parseFloat(r[1])/e):null!==(r=/^(\d+(?:\.\d+)?)ms$/.exec(n))?i=parseFloat(r[1])/1e3:null!==(r=/^(\d+(?:\.\d+)?)s$/.exec(n))?i=parseFloat(r[1]):null!==(r=/^(\d+(?:\.\d+)?)h$/.exec(n))?i=3600*parseFloat(r[1]):null!==(r=/^(\d+(?:\.\d+)?)m$/.exec(n))?i=60*parseFloat(r[1]):null!==(r=/^(\d{2,}):(\d\d):(\d\d(?:\.\d+)?)$/.exec(n))?i=3600*parseInt(r[1])+60*parseInt(r[2])+parseFloat(r[3]):null!==(r=/^(\d{2,}):(\d\d):(\d\d)\:(\d{2,})$/.exec(n))&&null!==t&&(i=3600*parseInt(r[1])+60*parseInt(r[2])+parseInt(r[3])+(null===r[4]?0:parseInt(r[4])/t)),i}function E(e,t,n,r){for(var i=t.length-1;0<=i;i--){var a=t[i];a in e.styles?P(e.styles[a].styleAttrs,n):L(r,"Non-existant style id referenced");}}function P(e,t){for(var n in e)n in t||(t[n]=e[n]);}function m(e,t){if(e&&e.warn&&e.warn(t))throw t}function L(e,t){if(e&&e.error&&e.error(t))throw t}function x(e,t){throw e&&e.fatal&&e.fatal(t),t}function v(e,t){for(var n,r=0,i=e.length-1;r<=i;){var a=e[n=Math.floor((r+i)/2)];if(a<t)r=n+1;else {if(!(t<a))return {found:!0,index:n};i=n-1;}}return {found:!1,index:r}}var F,U,k,B,G;F=void 0===n?this.imscDoc={}:n,U="undefined"==typeof sax?e(40):sax,k="undefined"==typeof imscNames?e(18):imscNames,B="undefined"==typeof imscStyles?e(19):imscStyles,G="undefined"==typeof imscUtils?e(20):imscUtils,F.fromXML=function(e,h,p){var t=U.parser(!0,{xmlns:!0}),g=[],_=[],E=[],m=0,v=null;t.onclosetag=function(e){if(g[0]instanceof A)for(var t in g[0].styles)!function e(t,n,r){for(;0<n.styleRefs.length;){var i=n.styleRefs.pop();i in t.styles?(e(t,t.styles[i],r),P(t.styles[i].styleAttrs,n.styleAttrs)):L(r,"Non-existant style id referenced");}}(g[0],g[0].styles[t],h);else if(g[0]instanceof M||g[0]instanceof N){if(1<g[0].contents.length){for(var n=[g[0].contents[0]],r=1;r<g[0].contents.length;r++)g[0].contents[r]instanceof f&&n[n.length-1]instanceof f?n[n.length-1].text+=g[0].contents[r].text:n.push(g[0].contents[r]);g[0].contents=n;}g[0]instanceof N&&1===g[0].contents.length&&g[0].contents[0]instanceof f&&(g[0].text=g[0].contents[0].text,delete g[0].contents);}else g[0]instanceof y&&(g[0].node.uri===k.ns_tt&&"metadata"===g[0].node.local?m--:0<m&&p&&"onCloseTag"in p&&p.onCloseTag());E.shift(),_.shift(),g.shift();},t.ontext=function(e){var t;void 0===g[0]||(g[0]instanceof N||g[0]instanceof M?((t=new f).initFromText(v,g[0],e,E[0],h),g[0].contents.push(t)):g[0]instanceof y&&0<m&&p&&"onText"in p&&p.onText(e));},t.onopentag=function(e){var t=e.attributes["xml:space"];t?E.unshift(t.value):0===E.length?E.unshift("default"):E.unshift(E[0]);var n,r,i,a,o,s,u,l,d=e.attributes["xml:lang"];if(d?_.unshift(d.value):0===_.length?_.unshift(""):_.unshift(_[0]),e.uri===k.ns_tt?"tt"===e.local?(null!==v&&x(h,"Two <tt> elements at ("+this.line+","+this.column+")"),(v=new T).initFromNode(e,h),g.unshift(v)):"head"===e.local?(g[0]instanceof T||x(h,"Parent of <head> element is not <tt> at ("+this.line+","+this.column+")"),null!==v.head&&x("Second <head> element at ("+this.line+","+this.column+")"),v.head=new S,g.unshift(v.head)):"styling"===e.local?(g[0]instanceof S||x(h,"Parent of <styling> element is not <head> at ("+this.line+","+this.column+")"),null!==v.head.styling&&x("Second <styling> element at ("+this.line+","+this.column+")"),v.head.styling=new A,g.unshift(v.head.styling)):"style"===e.local?g[0]instanceof A?((n=new I).initFromNode(e,h),n.id?v.head.styling.styles[n.id]=n:L(h,"<style> element missing @id attribute"),g.unshift(n)):g[0]instanceof O?((n=new I).initFromNode(e,h),P(n.styleAttrs,g[0].styleAttrs),g.unshift(n)):x(h,"Parent of <style> element is not <styling> or <region> at ("+this.line+","+this.column+")"):"layout"===e.local?(g[0]instanceof S||x(h,"Parent of <layout> element is not <head> at "+this.line+","+this.column+")"),null!==v.head.layout&&x(h,"Second <layout> element at "+this.line+","+this.column+")"),v.head.layout=new R,g.unshift(v.head.layout)):"region"===e.local?(g[0]instanceof R||x(h,"Parent of <region> element is not <layout> at "+this.line+","+this.column+")"),(r=new O).initFromNode(v,e,h),!r.id||r.id in v.head.layout.regions?L(h,"Ignoring <region> with duplicate or missing @id at "+this.line+","+this.column+")"):v.head.layout.regions[r.id]=r,g.unshift(r)):"body"===e.local?(g[0]instanceof T||x(h,"Parent of <body> element is not <tt> at "+this.line+","+this.column+")"),null!==v.body&&x(h,"Second <body> element at "+this.line+","+this.column+")"),(i=new b).initFromNode(v,e,h),v.body=i,g.unshift(i)):"div"===e.local?(g[0]instanceof D||g[0]instanceof b||x(h,"Parent of <div> element is not <body> or <div> at "+this.line+","+this.column+")"),(a=new D).initFromNode(v,g[0],e,h),g[0].contents.push(a),g.unshift(a)):"p"===e.local?(g[0]instanceof D||x(h,"Parent of <p> element is not <div> at "+this.line+","+this.column+")"),(o=new M).initFromNode(v,g[0],e,h),g[0].contents.push(o),g.unshift(o)):"span"===e.local?(g[0]instanceof N||g[0]instanceof M||x(h,"Parent of <span> element is not <span> or <p> at "+this.line+","+this.column+")"),(s=new N).initFromNode(v,g[0],e,E[0],h),g[0].contents.push(s),g.unshift(s)):"br"===e.local?(g[0]instanceof N||g[0]instanceof M||x(h,"Parent of <br> element is not <span> or <p> at "+this.line+","+this.column+")"),(u=new C).initFromNode(v,g[0],e,h),g[0].contents.push(u),g.unshift(u)):"set"===e.local?(g[0]instanceof N||g[0]instanceof M||g[0]instanceof D||g[0]instanceof b||g[0]instanceof O||g[0]instanceof C||x(h,"Parent of <set> element is not a content element or a region at "+this.line+","+this.column+")"),(l=new w).initFromNode(v,g[0],e,h),g[0].sets.push(l),g.unshift(l)):g.unshift(new y(e)):g.unshift(new y(e)),g[0]instanceof y)if(e.uri===k.ns_tt&&"metadata"===e.local)m++;else if(0<m&&p&&"onOpenTag"in p){var f=[];for(var c in e.attributes)f[e.attributes[c].uri+" "+e.attributes[c].local]={uri:e.attributes[c].uri,local:e.attributes[c].local,value:e.attributes[c].value};p.onOpenTag(e.uri,e.local,f);}},t.write(e).close(),null!==v.head?delete v.head.styling:v.head=new S,null===v.head.layout&&(v.head.layout=new R);var n,r=!1;for(var i in v.head.layout.regions){r=!0;break}for(var a in r||(n=O.prototype.createDefaultRegion(),v.head.layout.regions[n.id]=n),v.head.layout.regions)d(v,v.head.layout.regions[a],null,null);return v.body&&d(v,v.body,null,null),v},T.prototype.initFromNode=function(e,t){this.cellResolution=function(e,t){var n=g(e,k.ns_ttp,"cellResolution"),r=15,i=32;{var a;null!==n&&(null!==(a=/(\d+) (\d+)/.exec(n))?(i=parseInt(a[1]),r=parseInt(a[2])):m(t,"Malformed cellResolution value (using initial value instead)"));}return {w:i,h:r}}(e,t);var n=function(e,t){var n,r=g(e,k.ns_ttp,"frameRate"),i=30;{null!==r&&(null!==(n=/(\d+)/.exec(r))?i=parseInt(n[1]):m(t,"Malformed frame rate attribute (using initial value instead)"));}var a=g(e,k.ns_ttp,"frameRateMultiplier"),o=1;{null!==a&&(null!==(n=/(\d+) (\d+)/.exec(a))?o=parseInt(n[1])/parseInt(n[2]):m(t,"Malformed frame rate multiplier attribute (using initial value instead)"));}var s=o*i,u=1,l=g(e,k.ns_ttp,"tickRate");{null===l?null!==r&&(u=s):null!==(n=/(\d+)/.exec(l))?u=parseInt(n[1]):m(t,"Malformed tick rate attribute (using initial value instead)");}return {effectiveFrameRate:s,tickRate:u}}(e,t);this.effectiveFrameRate=n.effectiveFrameRate,this.tickRate=n.tickRate,this.aspectRatio=function(e,t){var n=g(e,k.ns_ittp,"aspectRatio"),r=null;{var i,a,o;null!==n&&(null!==(i=/(\d+) (\d+)/.exec(n))?(a=parseInt(i[1]),o=parseInt(i[2]),0!==a&&0!==o?r=a/o:L(t,"Illegal aspectRatio values (ignoring)")):L(t,"Malformed aspectRatio attribute (ignoring)"));}return r}(e,t);var r=g(e,k.ns_ttp,"timeBase");null!==r&&"media"!==r&&x(t,"Unsupported time base");var i=function(e,t){var n=g(e,k.ns_tts,"extent");if(null===n)return null;var r=n.split(" ");if(2!==r.length)return m(t,"Malformed extent (ignoring)"),null;var i=G.parseLength(r[0]),a=G.parseLength(r[1]);return a&&i?{h:a,w:i}:(m(t,"Malformed extent values (ignoring)"),null)}(e,t);null===i?this.pxDimensions={h:480,w:640}:("px"===i.h.unit&&"px"===i.w.unit||x(t,"Extent on TT must be in px or absent"),this.pxDimensions={h:i.h.value,w:i.w.value});},T.prototype._registerEvent=function(e){var t,n;e.end<=e.begin||((t=v(this.events,e.begin)).found||this.events.splice(t.index,0,e.begin),e.end!==Number.POSITIVE_INFINITY&&((n=v(this.events,e.end)).found||this.events.splice(n.index,0,e.end)));},T.prototype.getMediaTimeRange=function(){return [this.events[0],this.events[this.events.length-1]]},T.prototype.getMediaTimeEvents=function(){return this.events},I.prototype.initFromNode=function(e,t){this.id=c(e),this.styleAttrs=p(e,t),this.styleRefs=h(e);},i.prototype.initFromNode=function(e,t,n,r){this.id=c(n);},a.prototype.initFromNode=function(e,t,n,r){var i;this.regionID=(i=n)&&"region"in i.attributes?i.attributes.region.value:"";},o.prototype.initFromNode=function(e,t,n,r){this.styleAttrs=p(n,r),null!==e.head&&null!==e.head.styling&&E(e.head.styling,h(n),this.styleAttrs,r);},s.prototype.initFromNode=function(e,t,n,r){this.sets=[];},u.prototype.initFromNode=function(e,t,n,r){this.contents=[];},l.prototype.initFromNode=function(e,t,n,r){var i,a,o,s=function(e,t,n){var r=null;t&&"begin"in t.attributes&&null===(r=_(e.tickRate,e.effectiveFrameRate,t.attributes.begin.value))&&m(n,"Malformed begin value "+t.attributes.begin.value+" (using 0)");var i=null;t&&"dur"in t.attributes&&null===(i=_(e.tickRate,e.effectiveFrameRate,t.attributes.dur.value))&&m(n,"Malformed dur value "+t.attributes.dur.value+" (ignoring)");var a=null;t&&"end"in t.attributes&&null===(a=_(e.tickRate,e.effectiveFrameRate,t.attributes.end.value))&&m(n,"Malformed end value (ignoring)");return {explicit_begin:r,explicit_end:a,explicit_dur:i}}(e,n,r);this.explicit_begin=s.explicit_begin,this.explicit_end=s.explicit_end,this.explicit_dur=s.explicit_dur,this.timeContainer=(a=r,(o=(i=n)&&"timeContainer"in i.attributes?i.attributes.timeContainer.value:null)&&"par"!==o?"seq"===o?"seq":(L(a,"Illegal value of timeContainer (assuming 'par')"),"par"):"par");},b.prototype.initFromNode=function(e,t,n){o.prototype.initFromNode.call(this,e,null,t,n),l.prototype.initFromNode.call(this,e,null,t,n),s.prototype.initFromNode.call(this,e,null,t,n),a.prototype.initFromNode.call(this,e,null,t,n),u.prototype.initFromNode.call(this,e,null,t,n);},D.prototype.initFromNode=function(e,t,n,r){o.prototype.initFromNode.call(this,e,t,n,r),l.prototype.initFromNode.call(this,e,t,n,r),s.prototype.initFromNode.call(this,e,t,n,r),a.prototype.initFromNode.call(this,e,t,n,r),u.prototype.initFromNode.call(this,e,t,n,r);},M.prototype.initFromNode=function(e,t,n,r){o.prototype.initFromNode.call(this,e,t,n,r),l.prototype.initFromNode.call(this,e,t,n,r),s.prototype.initFromNode.call(this,e,t,n,r),a.prototype.initFromNode.call(this,e,t,n,r),u.prototype.initFromNode.call(this,e,t,n,r);},N.prototype.initFromNode=function(e,t,n,r,i){o.prototype.initFromNode.call(this,e,t,n,i),l.prototype.initFromNode.call(this,e,t,n,i),s.prototype.initFromNode.call(this,e,t,n,i),a.prototype.initFromNode.call(this,e,t,n,i),u.prototype.initFromNode.call(this,e,t,n,i),this.space=r;},f.prototype.initFromText=function(e,t,n,r,i){l.prototype.initFromNode.call(this,e,t,null,i),this.text=n,this.space=r;},C.prototype.initFromNode=function(e,t,n,r){a.prototype.initFromNode.call(this,e,t,n,r),l.prototype.initFromNode.call(this,e,t,n,r);},O.prototype.createDefaultRegion=function(){var e=new O;return i.call(e,""),o.call(e,{}),s.call(e,[]),l.call(e,0,Number.POSITIVE_INFINITY,null),e},O.prototype.initFromNode=function(e,t,n){i.prototype.initFromNode.call(this,e,null,t,n),o.prototype.initFromNode.call(this,e,null,t,n),l.prototype.initFromNode.call(this,e,null,t,n),s.prototype.initFromNode.call(this,e,null,t,n),null!==e.head&&null!==e.head.styling&&E(e.head.styling,h(t),this.styleAttrs,n);},w.prototype.initFromNode=function(e,t,n,r){l.prototype.initFromNode.call(this,e,t,n,r);var i=p(n,r);for(var a in this.qname=null,this.value=null,i){if(this.qname){L(r,"More than one style specified on set");break}this.qname=a,this.value=i[a];}};},{18:18,19:19,20:20,40:40}],15:[function(e,t,n){!function(e,R){function b(e,t,n){for(var r in e){var i=e[r].elements.length,a=e[r].elements[e[r].start_elem],o=e[r].elements[e[r].end_elem],s=Math.ceil(t)+"px",u="-"+Math.ceil(t)+"px";0!==i&&("lr"===n.ipd?(a.node.style.borderLeftColor=a.bgcolor||"#00000000",a.node.style.borderLeftStyle="solid",a.node.style.borderLeftWidth=s,a.node.style.marginLeft=u):"rl"===n.ipd?(a.node.style.borderRightColor=a.bgcolor||"#00000000",a.node.style.borderRightStyle="solid",a.node.style.borderRightWidth=s,a.node.style.marginRight=u):"tb"===n.ipd&&(a.node.style.borderTopColor=a.bgcolor||"#00000000",a.node.style.borderTopStyle="solid",a.node.style.borderTopWidth=s,a.node.style.marginTop=u),"lr"===n.ipd?(o.node.style.borderRightColor=o.bgcolor||"#00000000",o.node.style.borderRightStyle="solid",o.node.style.borderRightWidth=s,o.node.style.marginRight=u):"rl"===n.ipd?(o.node.style.borderLeftColor=o.bgcolor||"#00000000",o.node.style.borderLeftStyle="solid",o.node.style.borderLeftWidth=s,o.node.style.marginLeft=u):"tb"===n.ipd&&(o.node.style.borderBottomColor=o.bgcolor||"#00000000",o.node.style.borderBottomStyle="solid",o.node.style.borderBottomWidth=s,o.node.style.marginBottom=u));}}function D(e){for(var t=0;t<e.length-1;t++){var n,r,i=e[t].elements.length;0!==i&&!1===e[t].br&&(n=document.createElement("br"),(r=e[t].elements[i-1].node).parentElement.insertBefore(n,r.nextSibling));}}function M(e,t,n,r){for(var i=Math.sign(n-t),a=0;a<=e.length;a++){var o,s,u=0===a?t:a===e.length?n:(e[a].before+e[a-1].after)/2;if(0<a)for(var l=0;l<e[a-1].elements.length;l++)null!==e[a-1].elements[l].bgcolor&&i*((s=e[a-1].elements[l]).after-u)<0&&(o=Math.ceil(Math.abs(u-s.after))+"px",s.node.style.backgroundColor=s.bgcolor,"lr"===r.bpd?s.node.style.paddingRight=o:"rl"===r.bpd?s.node.style.paddingLeft=o:"tb"===r.bpd&&(s.node.style.paddingBottom=o));if(a<e.length)for(var d=0;d<e[a].elements.length;d++)null!==(s=e[a].elements[d]).bgcolor&&0<i*(s.before-u)&&(o=Math.ceil(Math.abs(s.before-u))+"px",s.node.style.backgroundColor=s.bgcolor,"lr"===r.bpd?s.node.style.paddingLeft=o:"rl"===r.bpd?s.node.style.paddingRight=o:"tb"===r.bpd&&(s.node.style.paddingTop=o));}}function N(e,t){this.id=e,this.plist=t;}function C(e,t){var n={before:null,after:null,start:null,end:null};return "tb"===t.bpd?(n.before=e.top,n.after=e.bottom,"lr"===t.ipd?(n.start=e.left,n.end=e.right):(n.start=e.right,n.end=e.left)):"lr"===t.bpd?(n.before=e.left,n.after=e.right,n.start=e.top,n.end=e.bottom):"rl"===t.bpd&&(n.before=e.right,n.after=e.left,n.start=e.top,n.end=e.bottom),n}function O(e,t,n,r){var i,a,o,s,u=t.style.backgroundColor||r;if(0===t.childElementCount)if("span"===t.localName){var l=t.getBoundingClientRect();if(0===l.height||0===l.width)return;var d,f,c=C(l,e);0!==n.length&&(i=c.before,a=c.after,o=n[n.length-1].before,s=n[n.length-1].after,a<s&&o<i||s<=a&&i<=o)?(d=Math.sign(c.after-c.before),f=Math.sign(c.end-c.start),d*(c.before-n[n.length-1].before)<0&&(n[n.length-1].before=c.before),0<d*(c.after-n[n.length-1].after)&&(n[n.length-1].after=c.after),f*(c.start-n[n.length-1].start)<0&&(n[n.length-1].start=c.start,n[n.length-1].start_elem=n[n.length-1].elements.length),0<f*(c.end-n[n.length-1].end)&&(n[n.length-1].end=c.end,n[n.length-1].end_elem=n[n.length-1].elements.length)):n.push({before:c.before,after:c.after,start:c.start,end:c.end,start_elem:0,end_elem:0,elements:[],text:"",br:!1}),n[n.length-1].text+=t.textContent,n[n.length-1].elements.push({node:t,bgcolor:u,before:c.before,after:c.after});}else "br"===t.localName&&0!==n.length&&(n[n.length-1].br=!0);else for(var h=t.firstChild;h;)h.nodeType===Node.ELEMENT_NODE&&O(e,h,n,u),h=h.nextSibling;}function t(e,t){this.qname=e,this.map=t;}e.render=function(e,t,n,r,i,a,o,s,u){var l,d=r||t.clientHeight,f=i||t.clientWidth;null!==e.aspectRatio&&(f<(l=d*e.aspectRatio)?d=Math.round(f/e.aspectRatio):f=l);var c=document.createElement("div");c.style.position="relative",c.style.width=f+"px",c.style.height=d+"px",c.style.margin="auto",c.style.top=0,c.style.bottom=0,c.style.left=0,c.style.right=0,c.style.zIndex=0;var h={h:d,w:f,regionH:null,regionW:null,imgResolver:n,displayForcedOnlyMode:a||!1,isd:e,errorHandler:o,previousISDState:s,enableRollUp:u||!1,currentISDState:{},flg:null,lp:null,mra:null,ipd:null,bpd:null};for(var p in t.appendChild(c),e.contents)!function e(t,n,r){var i;"region"===r.kind?(i=document.createElement("div")).style.position="absolute":"body"===r.kind||"div"===r.kind?i=document.createElement("div"):"p"===r.kind?i=document.createElement("p"):"span"===r.kind?i=document.createElement("span"):"br"===r.kind&&(i=document.createElement("br"));if(!i)return void P(t.errorHandler,"Error processing ISD element kind: "+r.kind);i.style.margin="0";for(var a in w){var o=w[a],s=r.styleAttrs[o.qname];void 0!==s&&null!==o.map&&o.map(t,i,r,s);}var u=i;{var l;"region"===r.kind&&("lrtb"===(l=r.styleAttrs[R.byName.writingMode.qname])||"lr"===l?(t.ipd="lr",t.bpd="tb"):"rltb"===l||"rl"===l?(t.ipd="rl",t.bpd="tb"):"tblr"===l?(t.ipd="tb",t.bpd="lr"):"tbrl"!==l&&"tb"!==l||(t.ipd="tb",t.bpd="rl"));}var d=r.styleAttrs[R.byName.linePadding.qname];{var f;d&&0<d&&(f=Math.ceil(d*t.h)+"px","tb"===t.bpd?(u.style.paddingLeft=f,u.style.paddingRight=f):(u.style.paddingTop=f,u.style.paddingBottom=f),t.lp=d);}var c=r.styleAttrs[R.byName.multiRowAlign.qname];{var h;c&&"auto"!==c&&((h=document.createElement("span")).style.display="inline-block",h.style.textAlign=c,i.appendChild(h),u=h,t.mra=c);}r.styleAttrs[R.byName.fillLineGap.qname]&&(t.flg=!0);if("span"===r.kind&&r.text)if(t.lp||t.mra||t.flg)for(var p="",g=0;g<r.text.length;g++){p+=r.text.charAt(g);var _,E=r.text.charCodeAt(g);(E<55296||56319<E||g===r.text.length)&&((_=document.createElement("span")).textContent=p,i.appendChild(_),p="");}else i.textContent=r.text;n.appendChild(i);for(var m in r.contents)e(t,u,r.contents[m]);var v=[];{var y;(t.lp||t.mra||t.flg)&&"p"===r.kind&&(O(t,u,v,null),t.mra&&(D(v),t.mra=null),t.lp&&(b(v,t.lp*t.h,t),t.lp=null),t.flg&&(y=C(u.getBoundingClientRect(),t),M(v,y.before,y.after,t),t.flg=null));}{var T,S,A,I;"region"===r.kind&&(O(t,u,v),"tb"===t.bpd&&t.enableRollUp&&0<r.contents.length&&"after"===r.styleAttrs[R.byName.displayAlign.qname]&&(T=""===r.id?"_":r.id,S=new N(T,v),t.currentISDState[S.id]=S,t.previousISDState&&S.id in t.previousISDState&&0<t.previousISDState[S.id].plist.length&&1<S.plist.length&&S.plist[S.plist.length-2].text===t.previousISDState[S.id].plist[t.previousISDState[S.id].plist.length-1].text&&(A=i.firstElementChild,I=S.plist[S.plist.length-1].after-S.plist[S.plist.length-1].before,A.style.bottom="-"+I+"px",A.style.transition="transform 0.4s",A.style.position="relative",A.style.transform="translateY(-"+I+"px)")));}}(h,c,e.contents[p]);return h.currentISDState};var w=[new t("http://www.w3.org/ns/ttml#styling backgroundColor",function(e,t,n,r){0!==r[3]&&(t.style.backgroundColor="rgba("+r[0].toString()+","+r[1].toString()+","+r[2].toString()+","+(r[3]/255).toString()+")");}),new t("http://www.w3.org/ns/ttml#styling color",function(e,t,n,r){t.style.color="rgba("+r[0].toString()+","+r[1].toString()+","+r[2].toString()+","+(r[3]/255).toString()+")";}),new t("http://www.w3.org/ns/ttml#styling direction",function(e,t,n,r){t.style.direction=r;}),new t("http://www.w3.org/ns/ttml#styling display",function(e,t,n,r){}),new t("http://www.w3.org/ns/ttml#styling displayAlign",function(e,t,n,r){t.style.display="flex",t.style.flexDirection="column","before"===r?t.style.justifyContent="flex-start":"center"===r?t.style.justifyContent="center":"after"===r&&(t.style.justifyContent="flex-end");}),new t("http://www.w3.org/ns/ttml#styling extent",function(e,t,n,r){e.regionH=r.h*e.h,e.regionW=r.w*e.w;var i=0,a=0,o=n.styleAttrs["http://www.w3.org/ns/ttml#styling padding"];o&&(i=(o[0]+o[2])*e.h,a=(o[1]+o[3])*e.w),t.style.height=e.regionH-i+"px",t.style.width=e.regionW-a+"px";}),new t("http://www.w3.org/ns/ttml#styling fontFamily",function(e,t,n,r){var i=[];for(var a in r)"monospaceSerif"===r[a]?(i.push("Courier New"),i.push('"Liberation Mono"'),i.push("Courier"),i.push("monospace")):"proportionalSansSerif"===r[a]?(i.push("Arial"),i.push("Helvetica"),i.push('"Liberation Sans"'),i.push("sans-serif")):"monospace"===r[a]?i.push("monospace"):"sansSerif"===r[a]?i.push("sans-serif"):"serif"===r[a]?i.push("serif"):"monospaceSansSerif"===r[a]?(i.push("Consolas"),i.push("monospace")):"proportionalSerif"===r[a]?i.push("serif"):i.push(r[a]);t.style.fontFamily=i.join(",");}),new t("http://www.w3.org/ns/ttml#styling fontSize",function(e,t,n,r){t.style.fontSize=r*e.h+"px";}),new t("http://www.w3.org/ns/ttml#styling fontStyle",function(e,t,n,r){t.style.fontStyle=r;}),new t("http://www.w3.org/ns/ttml#styling fontWeight",function(e,t,n,r){t.style.fontWeight=r;}),new t("http://www.w3.org/ns/ttml#styling lineHeight",function(e,t,n,r){t.style.lineHeight="normal"===r?"normal":r*e.h+"px";}),new t("http://www.w3.org/ns/ttml#styling opacity",function(e,t,n,r){t.style.opacity=r;}),new t("http://www.w3.org/ns/ttml#styling origin",function(e,t,n,r){t.style.top=r.h*e.h+"px",t.style.left=r.w*e.w+"px";}),new t("http://www.w3.org/ns/ttml#styling overflow",function(e,t,n,r){t.style.overflow=r;}),new t("http://www.w3.org/ns/ttml#styling padding",function(e,t,n,r){var i=[];i[0]=r[0]*e.h+"px",i[1]=r[3]*e.w+"px",i[2]=r[2]*e.h+"px",i[3]=r[1]*e.w+"px",t.style.padding=i.join(" ");}),new t("http://www.w3.org/ns/ttml#styling showBackground",null),new t("http://www.w3.org/ns/ttml#styling textAlign",function(e,t,n,r){var i=n.styleAttrs[R.byName.direction.qname],a="start"===r?"rtl"===i?"right":"left":"end"===r?"rtl"===i?"left":"right":r;t.style.textAlign=a;}),new t("http://www.w3.org/ns/ttml#styling textDecoration",function(e,t,n,r){t.style.textDecoration=r.join(" ").replace("lineThrough","line-through");}),new t("http://www.w3.org/ns/ttml#styling textOutline",function(e,t,n,r){t.style.textShadow="none"===r?"":"rgba("+r.color[0].toString()+","+r.color[1].toString()+","+r.color[2].toString()+","+(r.color[3]/255).toString()+") 0px 0px "+r.thickness*e.h+"px";}),new t("http://www.w3.org/ns/ttml#styling unicodeBidi",function(e,t,n,r){var i="bidiOverride"===r?"bidi-override":r;t.style.unicodeBidi=i;}),new t("http://www.w3.org/ns/ttml#styling visibility",function(e,t,n,r){t.style.visibility=r;}),new t("http://www.w3.org/ns/ttml#styling wrapOption",function(e,t,n,r){"wrap"===r?"preserve"===n.space?t.style.whiteSpace="pre-wrap":t.style.whiteSpace="normal":"preserve"===n.space?t.style.whiteSpace="pre":t.style.whiteSpace="noWrap";}),new t("http://www.w3.org/ns/ttml#styling writingMode",function(e,t,n,r){"lrtb"===r||"lr"===r||"rltb"===r||"rl"===r?t.style.writingMode="horizontal-tb":"tblr"===r?t.style.writingMode="vertical-lr":"tbrl"!==r&&"tb"!==r||(t.style.writingMode="vertical-rl");}),new t("http://www.w3.org/ns/ttml#styling zIndex",function(e,t,n,r){t.style.zIndex=r;}),new t("http://www.smpte-ra.org/schemas/2052-1/2010/smpte-tt backgroundImage",function(e,t,n,r){var i,a;null!==e.imgResolver&&null!==r&&(i=document.createElement("img"),(a=e.imgResolver(r,i))&&(i.src=a),i.height=e.regionH,i.width=e.regionW,t.appendChild(i));}),new t("http://www.w3.org/ns/ttml/profile/imsc1#styling forcedDisplay",function(e,t,n,r){e.displayForcedOnlyMode&&!1===r&&(t.style.visibility="hidden");})],n={};for(var r in w)n[w[r].qname]=w[r];function P(e,t){if(e&&e.error&&e.error(t))throw t}}(void 0===n?this.imscHTML={}:n,("undefined"==typeof imscNames&&e(18),"undefined"==typeof imscStyles?e(19):imscStyles));},{18:18,19:19}],16:[function(e,t,n){function F(e,t){if("contents"in e)for(var n in e.contents)F(e.contents[n],t);else t.push(e);}function U(e){if("br"!==e.kind){if("text"in e)return 0===e.text.length;if("contents"in e){for(var t=e.contents.length;t--;)U(e.contents[t])&&e.contents.splice(t,1);return 0===e.contents.length}}}function s(e){this.contents=[],this.aspectRatio=e.aspectRatio;}function k(e){for(var t in this.kind=e.kind||"region",e.id&&(this.id=e.id),this.styleAttrs={},e.styleAttrs)this.styleAttrs[t]=e.styleAttrs[t];"text"in e?this.text=e.text:"br"!==e.kind&&(this.contents=[]),"space"in e&&(this.space=e.space);}function B(e,t){if(e&&e.error&&e.error(t))throw t}var r,G;r=void 0===n?this.imscISD={}:n,"undefined"==typeof imscNames&&e(18),G="undefined"==typeof imscStyles?e(19):imscStyles,r.generateISD=function(e,t,n){var r=new s(e),i={};for(var a in e.head.layout.regions){var o=function e(t,n,r,i,a,o,s,u,l){if(n<s.begin||n>=s.end)return null;var d="regionID"in s&&""!==s.regionID?s.regionID:o;if(null!==a&&d!==r.id&&(!("contents"in s)||"contents"in s&&0===s.contents.length||""!==d))return null;var f=new k(s);for(var c in s.sets)n<s.sets[c].begin||n>=s.sets[c].end||(f.styleAttrs[s.sets[c].qname]=s.sets[c].value);var h={};for(var p in f.styleAttrs){var g;h[p]=!0,p!==G.byName.writingMode.qname||G.byName.direction.qname in f.styleAttrs||("lrtb"===(g=f.styleAttrs[p])||"lr"===g?f.styleAttrs[G.byName.direction.qname]="ltr":"rltb"!==g&&"rl"!==g||(f.styleAttrs[G.byName.direction.qname]="rtl"));}if(null!==a)for(var _ in G.all){var E,m,v,y=G.all[_];y.qname===G.byName.textDecoration.qname?(E=a.styleAttrs[y.qname],m=f.styleAttrs[y.qname],v=[],void 0===m?v=E:-1===m.indexOf("none")?((-1===m.indexOf("noUnderline")&&-1!==E.indexOf("underline")||-1!==m.indexOf("underline"))&&v.push("underline"),(-1===m.indexOf("noLineThrough")&&-1!==E.indexOf("lineThrough")||-1!==m.indexOf("lineThrough"))&&v.push("lineThrough"),(-1===m.indexOf("noOverline")&&-1!==E.indexOf("overline")||-1!==m.indexOf("overline"))&&v.push("overline")):v.push("none"),f.styleAttrs[y.qname]=v):y.inherit&&y.qname in a.styleAttrs&&!(y.qname in f.styleAttrs)&&(f.styleAttrs[y.qname]=a.styleAttrs[y.qname]);}for(var T in G.all){var S=G.all[T];S.qname in f.styleAttrs||("region"===f.kind||!1===S.inherit&&null!==S.initial)&&(f.styleAttrs[S.qname]=S.parse(S.initial),h[S.qname]=!0);}for(var A in G.all){var I,R=G.all[A];R.qname in h&&null!==R.compute&&(null!==(I=R.compute(t,a,f,f.styleAttrs[R.qname],l))?f.styleAttrs[R.qname]=I:B(u,"Style '"+R.qname+"' on element '"+f.kind+"' cannot be computed"));}if("none"===f.styleAttrs[G.byName.display.qname])return null;var b;null===a?b=null===i?[]:[i]:"contents"in s&&(b=s.contents);for(var D in b){var M=e(t,n,r,i,f,d,b[D],u,l);null!==M&&f.contents.push(M.element);}for(var N in f.styleAttrs){var C=G.byQName[N];-1===C.applies.indexOf(f.kind)&&delete f.styleAttrs[N];}{var O;"span"===f.kind&&f.text&&"default"===f.space&&(O=f.text.replace(/\s+/g," "),f.text=O);}if("p"===f.kind){var w=[];F(f,w);for(var P=0,L="after_br",x=0;;)if("after_br"===L)P>=w.length||"br"===w[P].kind?(L="before_br",x=P,P--):("preserve"!==w[P].space&&(w[P].text=w[P].text.replace(/^\s+/g,"")),0<w[P].text.length?(L="looking_br",P++):w.splice(P,1));else if("before_br"===L)if(P<0||"br"===w[P].kind){if(L="after_br",(P=x+1)>=w.length)break}else if("preserve"!==w[P].space&&(w[P].text=w[P].text.replace(/\s+$/g,"")),0<w[P].text.length){if(L="after_br",(P=x+1)>=w.length)break}else w.splice(P,1),P--;else P>=w.length||"br"===w[P].kind?(L="before_br",x=P,P--):P++;U(f);}if("div"===f.kind&&G.byName.backgroundImage.qname in f.styleAttrs||"br"===f.kind||"contents"in f&&0<f.contents.length||"span"===f.kind&&null!==f.text||"region"===f.kind&&"always"===f.styleAttrs[G.byName.showBackground.qname])return {region_id:d,element:f};return null}(e,t,e.head.layout.regions[a],e.body,null,"",e.head.layout.regions[a],n,i);null!==o&&r.contents.push(o.element);}return r};},{18:18,19:19}],17:[function(e,t,n){n.generateISD=e(16).generateISD,n.fromXML=e(14).fromXML,n.renderHTML=e(15).render;},{14:14,15:15,16:16}],18:[function(e,t,n){var r;(r=void 0===n?this.imscNames={}:n).ns_tt="http://www.w3.org/ns/ttml",r.ns_tts="http://www.w3.org/ns/ttml#styling",r.ns_ttp="http://www.w3.org/ns/ttml#parameter",r.ns_xml="http://www.w3.org/XML/1998/namespace",r.ns_itts="http://www.w3.org/ns/ttml/profile/imsc1#styling",r.ns_ittp="http://www.w3.org/ns/ttml/profile/imsc1#parameter",r.ns_smpte="http://www.smpte-ra.org/schemas/2052-1/2010/smpte-tt",r.ns_ebutts="urn:ebu:tt:style";},{}],19:[function(e,t,n){!function(l,e,a){function t(e,t,n,r,i,a,o,s){this.name=t,this.ns=e,this.qname=e+" "+t,this.inherit=i,this.animatable=a,this.initial=n,this.applies=r,this.parse=o,this.compute=s;}for(var n in l.all=[new t(e.ns_tts,"backgroundColor","transparent",["body","div","p","region","span"],!1,!0,a.parseColor,null),new t(e.ns_tts,"color","white",["span"],!0,!0,a.parseColor,null),new t(e.ns_tts,"direction","ltr",["p","span"],!0,!0,function(e){return e},null),new t(e.ns_tts,"display","auto",["body","div","p","region","span"],!1,!0,function(e){return e},null),new t(e.ns_tts,"displayAlign","before",["region"],!1,!0,function(e){return e},null),new t(e.ns_tts,"extent","auto",["tt","region"],!1,!0,function(e){if("auto"===e)return e;var t=e.split(" ");if(2!==t.length)return null;var n=a.parseLength(t[0]),r=a.parseLength(t[1]);return r&&n?{h:r,w:n}:null},function(e,t,n,r,i){var a,o;if("auto"===r)a=1;else if("%"===r.h.unit)a=r.h.value/100;else {if("px"!==r.h.unit)return null;a=r.h.value/e.pxDimensions.h;}if("auto"===r)o=1;else if("%"===r.w.unit)o=r.w.value/100;else {if("px"!==r.w.unit)return null;o=r.w.value/e.pxDimensions.w;}return {h:a,w:o}}),new t(e.ns_tts,"fontFamily","default",["span"],!0,!0,function(e){var t=e.split(","),n=[];for(var r in t)"'"!==t[r].charAt(0)&&'"'!==t[r].charAt(0)&&"default"===t[r]?n.push("monospaceSerif"):n.push(t[r]);return n},null),new t(e.ns_tts,"fontSize","1c",["span"],!0,!0,a.parseLength,function(e,t,n,r,i){var a;if("%"===r.unit)a=null!==t?t.styleAttrs[l.byName.fontSize.qname]*r.value/100:r.value/100/e.cellResolution.h;else if("em"===r.unit)a=null!==t?t.styleAttrs[l.byName.fontSize.qname]*r.value:r.value/e.cellResolution.h;else if("c"===r.unit)a=r.value/e.cellResolution.h;else {if("px"!==r.unit)return null;a=r.value/e.pxDimensions.h;}return a}),new t(e.ns_tts,"fontStyle","normal",["span"],!0,!0,function(e){return e},null),new t(e.ns_tts,"fontWeight","normal",["span"],!0,!0,function(e){return e},null),new t(e.ns_tts,"lineHeight","normal",["p"],!0,!0,function(e){return "normal"===e?e:a.parseLength(e)},function(e,t,n,r,i){var a;if("normal"===r)a=r;else if("%"===r.unit)a=n.styleAttrs[l.byName.fontSize.qname]*r.value/100;else if("em"===r.unit)a=n.styleAttrs[l.byName.fontSize.qname]*r.value;else if("c"===r.unit)a=r.value/e.cellResolution.h;else {if("px"!==r.unit)return null;a=r.value/e.pxDimensions.h;}return a}),new t(e.ns_tts,"opacity",1,["region"],!1,!0,parseFloat,null),new t(e.ns_tts,"origin","auto",["region"],!1,!0,function(e){if("auto"===e)return e;var t=e.split(" ");if(2!==t.length)return null;var n=a.parseLength(t[0]),r=a.parseLength(t[1]);return r&&n?{h:r,w:n}:null},function(e,t,n,r,i){var a,o;if("auto"===r)a=0;else if("%"===r.h.unit)a=r.h.value/100;else {if("px"!==r.h.unit)return null;a=r.h.value/e.pxDimensions.h;}if("auto"===r)o=0;else if("%"===r.w.unit)o=r.w.value/100;else {if("px"!==r.w.unit)return null;o=r.w.value/e.pxDimensions.w;}return {h:a,w:o}}),new t(e.ns_tts,"overflow","hidden",["region"],!1,!0,function(e){return e},null),new t(e.ns_tts,"padding","0px",["region"],!1,!0,function(e){var t=e.split(" ");if(4<t.length)return null;var n=[];for(var r in t){var i=a.parseLength(t[r]);if(!i)return null;n.push(i);}return n},function(e,t,n,r,i){var a;if(1===r.length)a=[r[0],r[0],r[0],r[0]];else if(2===r.length)a=[r[0],r[1],r[0],r[1]];else if(3===r.length)a=[r[0],r[1],r[2],r[1]];else {if(4!==r.length)return null;a=[r[0],r[1],r[2],r[3]];}var o=n.styleAttrs[l.byName.writingMode.qname];if("lrtb"===o||"lr"===o)a=[a[0],a[3],a[2],a[1]];else if("rltb"===o||"rl"===o)a=[a[0],a[1],a[2],a[3]];else if("tblr"===o)a=[a[3],a[0],a[1],a[2]];else {if("tbrl"!==o&&"tb"!==o)return null;a=[a[3],a[2],a[1],a[0]];}var s=[];for(var u in a)if(0===a[u].value)s[u]=0;else if("%"===a[u].unit)s[u]="0"===u||"2"===u?n.styleAttrs[l.byName.extent.qname].h*a[u].value/100:n.styleAttrs[l.byName.extent.qname].w*a[u].value/100;else if("em"===a[u].unit)s[u]=n.styleAttrs[l.byName.fontSize.qname]*a[u].value;else if("c"===a[u].unit)s[u]=a[u].value/e.cellResolution.h;else {if("px"!==a[u].unit)return null;s[u]="0"===u||"2"===u?a[u].value/e.pxDimensions.h:a[u].value/e.pxDimensions.w;}return s}),new t(e.ns_tts,"showBackground","always",["region"],!1,!0,function(e){return e},null),new t(e.ns_tts,"textAlign","start",["p"],!0,!0,function(e){return e},function(e,t,n,r,i){return "left"===r?"start":"right"===r?"end":r}),new t(e.ns_tts,"textDecoration","none",["span"],!0,!0,function(e){return e.split(" ")},null),new t(e.ns_tts,"textOutline","none",["span"],!0,!0,function(e){if("none"===e)return e;var t={},n=e.split(" ");if(0===n.length||2<n.length)return null;var r=a.parseColor(n[0]);if(null!==(t.color=r)&&n.shift(),1!==n.length)return null;var i=a.parseLength(n[0]);return i?(t.thickness=i,t):null},function(e,t,n,r,i){if("none"===r)return r;var a={};if(null===r.color?a.color=n.styleAttrs[l.byName.color.qname]:a.color=r.color,"%"===r.thickness.unit)a.thickness=n.styleAttrs[l.byName.fontSize.qname]*r.thickness.value/100;else if("em"===r.thickness.unit)a.thickness=n.styleAttrs[l.byName.fontSize.qname]*r.thickness.value;else if("c"===r.thickness.unit)a.thickness=r.thickness.value/e.cellResolution.h;else {if("px"!==r.thickness.unit)return null;a.thickness=r.thickness.value/e.pxDimensions.h;}return a}),new t(e.ns_tts,"unicodeBidi","normal",["span","p"],!1,!0,function(e){return e},null),new t(e.ns_tts,"visibility","visible",["body","div","p","region","span"],!0,!0,function(e){return e},null),new t(e.ns_tts,"wrapOption","wrap",["span"],!0,!0,function(e){return e},null),new t(e.ns_tts,"writingMode","lrtb",["region"],!1,!0,function(e){return e},null),new t(e.ns_tts,"zIndex","auto",["region"],!1,!0,function(e){var t;return "auto"===e?t=e:(t=parseInt(e),isNaN(t)&&(t=null)),t},null),new t(e.ns_ebutts,"linePadding","0c",["p"],!0,!1,a.parseLength,function(e,t,n,r,i){return "c"===r.unit?r.value/e.cellResolution.h:null}),new t(e.ns_ebutts,"multiRowAlign","auto",["p"],!0,!1,function(e){return e},null),new t(e.ns_smpte,"backgroundImage",null,["div"],!1,!1,function(e){return e},null),new t(e.ns_itts,"forcedDisplay","false",["body","div","p","region","span"],!0,!0,function(e){return "true"===e},null),new t(e.ns_itts,"fillLineGap","false",["p"],!0,!0,function(e){return "true"===e},null)],l.byQName={},l.all)l.byQName[l.all[n].qname]=l.all[n];for(var r in l.byName={},l.all)l.byName[l.all[r].name]=l.all[r];}(void 0===n?this.imscStyles={}:n,"undefined"==typeof imscNames?e(18):imscNames,"undefined"==typeof imscUtils?e(20):imscUtils);},{18:18,20:20}],20:[function(e,t,n){!function(e){var i=/#([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})?/,a=/rgb\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/,o=/rgba\(\s*(\d+),\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/,s={transparent:[0,0,0,0],black:[0,0,0,255],silver:[192,192,192,255],gray:[128,128,128,255],white:[255,255,255,255],maroon:[128,0,0,255],red:[255,0,0,255],purple:[128,0,128,255],fuchsia:[255,0,255,255],magenta:[255,0,255,255],green:[0,128,0,255],lime:[0,255,0,255],olive:[128,128,0,255],yellow:[255,255,0,255],navy:[0,0,128,255],blue:[0,0,255,255],teal:[0,128,128,255],aqua:[0,255,255,255],cyan:[0,255,255,255]};e.parseColor=function(e){var t,n=null,r=s[e.toLowerCase()];return void 0!==r?n=r:null!==(t=i.exec(e))?n=[parseInt(t[1],16),parseInt(t[2],16),parseInt(t[3],16),void 0!==t[4]?parseInt(t[4],16):255]:null!==(t=a.exec(e))?n=[parseInt(t[1]),parseInt(t[2]),parseInt(t[3]),255]:null!==(t=o.exec(e))&&(n=[parseInt(t[1]),parseInt(t[2]),parseInt(t[3]),parseInt(t[4])]),n};var r=/^((?:\+|\-)?\d*(?:\.\d+)?)(px|em|c|%)$/;e.parseLength=function(e){var t,n=null;return null!==(t=r.exec(e))&&(n={value:parseFloat(t[1]),unit:t[2]}),n};}(void 0===n?this.imscUtils={}:n);},{}],21:[function(e,t,n){"function"==typeof Object.create?t.exports=function(e,t){e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}});}:t.exports=function(e,t){e.super_=t;function n(){}n.prototype=t.prototype,e.prototype=new n,e.prototype.constructor=e;};},{}],22:[function(e,t,n){function r(e){return !!e.constructor&&"function"==typeof e.constructor.isBuffer&&e.constructor.isBuffer(e)}t.exports=function(e){return null!=e&&(r(e)||"function"==typeof(t=e).readFloatLE&&"function"==typeof t.slice&&r(t.slice(0,0))||!!e._isBuffer);var t;};},{}],23:[function(e,t,n){var r={}.toString;t.exports=Array.isArray||function(e){return "[object Array]"==r.call(e)};},{}],24:[function(e,t,n){(function(s){!s.version||0===s.version.indexOf("v0.")||0===s.version.indexOf("v1.")&&0!==s.version.indexOf("v1.8.")?t.exports={nextTick:function(e,t,n,r){if("function"!=typeof e)throw new TypeError('"callback" argument must be a function');var i,a,o=arguments.length;switch(o){case 0:case 1:return s.nextTick(e);case 2:return s.nextTick(function(){e.call(null,t);});case 3:return s.nextTick(function(){e.call(null,t,n);});case 4:return s.nextTick(function(){e.call(null,t,n,r);});default:for(i=new Array(o-1),a=0;a<i.length;)i[a++]=arguments[a];return s.nextTick(function(){e.apply(null,i);})}}}:t.exports=s;}).call(this,e(25));},{25:25}],25:[function(e,t,n){var r,i,a=t.exports={};function o(){throw new Error("setTimeout has not been defined")}function s(){throw new Error("clearTimeout has not been defined")}function u(t){if(r===setTimeout)return setTimeout(t,0);if((r===o||!r)&&setTimeout)return r=setTimeout,setTimeout(t,0);try{return r(t,0)}catch(e){try{return r.call(null,t,0)}catch(e){return r.call(this,t,0)}}}!function(){try{r="function"==typeof setTimeout?setTimeout:o;}catch(e){r=o;}try{i="function"==typeof clearTimeout?clearTimeout:s;}catch(e){i=s;}}();var l,d=[],f=!1,c=-1;function h(){f&&l&&(f=!1,l.length?d=l.concat(d):c=-1,d.length&&p());}function p(){if(!f){var e=u(h);f=!0;for(var t=d.length;t;){for(l=d,d=[];++c<t;)l&&l[c].run();c=-1,t=d.length;}l=null,f=!1,function(t){if(i===clearTimeout)return clearTimeout(t);if((i===s||!i)&&clearTimeout)return i=clearTimeout,clearTimeout(t);try{i(t);}catch(e){try{return i.call(null,t)}catch(e){return i.call(this,t)}}}(e);}}function g(e,t){this.fun=e,this.array=t;}function _(){}a.nextTick=function(e){var t=new Array(arguments.length-1);if(1<arguments.length)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];d.push(new g(e,t)),1!==d.length||f||u(p);},g.prototype.run=function(){this.fun.apply(null,this.array);},a.title="browser",a.browser=!0,a.env={},a.argv=[],a.version="",a.versions={},a.on=_,a.addListener=_,a.once=_,a.off=_,a.removeListener=_,a.removeAllListeners=_,a.emit=_,a.prependListener=_,a.prependOnceListener=_,a.listeners=function(e){return []},a.binding=function(e){throw new Error("process.binding is not supported")},a.cwd=function(){return "/"},a.chdir=function(e){throw new Error("process.chdir is not supported")},a.umask=function(){return 0};},{}],26:[function(e,t,n){t.exports=e(27);},{27:27}],27:[function(e,t,n){var r=e(24),i=Object.keys||function(e){var t=[];for(var n in e)t.push(n);return t};t.exports=f;var a=e(10);a.inherits=e(21);var o=e(29),s=e(31);a.inherits(f,o);for(var u=i(s.prototype),l=0;l<u.length;l++){var d=u[l];f.prototype[d]||(f.prototype[d]=s.prototype[d]);}function f(e){if(!(this instanceof f))return new f(e);o.call(this,e),s.call(this,e),e&&!1===e.readable&&(this.readable=!1),e&&!1===e.writable&&(this.writable=!1),this.allowHalfOpen=!0,e&&!1===e.allowHalfOpen&&(this.allowHalfOpen=!1),this.once("end",c);}function c(){this.allowHalfOpen||this._writableState.ended||r.nextTick(h,this);}function h(e){e.end();}Object.defineProperty(f.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Object.defineProperty(f.prototype,"destroyed",{get:function(){return void 0!==this._readableState&&void 0!==this._writableState&&(this._readableState.destroyed&&this._writableState.destroyed)},set:function(e){void 0!==this._readableState&&void 0!==this._writableState&&(this._readableState.destroyed=e,this._writableState.destroyed=e);}}),f.prototype._destroy=function(e,t){this.push(null),this.end(),r.nextTick(t,e);};},{10:10,21:21,24:24,29:29,31:31}],28:[function(e,t,n){t.exports=a;var r=e(30),i=e(10);function a(e){if(!(this instanceof a))return new a(e);r.call(this,e);}i.inherits=e(21),i.inherits(a,r),a.prototype._transform=function(e,t,n){n(null,e);};},{10:10,21:21,30:30}],29:[function(P,L,e){(function(_,e){var E=P(24);L.exports=c;var o,m=P(23);c.ReadableState=a;function v(e,t){return e.listeners(t).length}P(11).EventEmitter;var i=P(34),l=P(39).Buffer,d=e.Uint8Array||function(){};var t=P(10);t.inherits=P(21);var s,n=P(7),y=void 0,y=n&&n.debuglog?n.debuglog("stream"):function(){},u=P(32),r=P(33);t.inherits(c,i);var f=["error","close","destroy","pause","resume"];function a(e,t){e=e||{};var n=t instanceof(o=o||P(27));this.objectMode=!!e.objectMode,n&&(this.objectMode=this.objectMode||!!e.readableObjectMode);var r=e.highWaterMark,i=e.readableHighWaterMark,a=this.objectMode?16:16384;this.highWaterMark=r||0===r?r:n&&(i||0===i)?i:a,this.highWaterMark=Math.floor(this.highWaterMark),this.buffer=new u,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.destroyed=!1,this.defaultEncoding=e.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,e.encoding&&(s=s||P(42).StringDecoder,this.decoder=new s(e.encoding),this.encoding=e.encoding);}function c(e){if(o=o||P(27),!(this instanceof c))return new c(e);this._readableState=new a(e,this),this.readable=!0,e&&("function"==typeof e.read&&(this._read=e.read),"function"==typeof e.destroy&&(this._destroy=e.destroy)),i.call(this);}function h(e,t,n,r,i){var a,o,s,u=e._readableState;return null===t?(u.reading=!1,function(e,t){if(t.ended)return;{var n;!t.decoder||(n=t.decoder.end())&&n.length&&(t.buffer.push(n),t.length+=t.objectMode?1:n.length);}t.ended=!0,S(e);}(e,u)):(i||(a=function(e,t){var n;(function(e){return l.isBuffer(e)||e instanceof d})(t)||"string"==typeof t||void 0===t||e.objectMode||(n=new TypeError("Invalid non-string/buffer chunk"));return n}(u,t)),a?e.emit("error",a):u.objectMode||t&&0<t.length?("string"==typeof t||u.objectMode||Object.getPrototypeOf(t)===l.prototype||(o=t,t=l.from(o)),r?u.endEmitted?e.emit("error",new Error("stream.unshift() after end event")):p(e,u,t,!0):u.ended?e.emit("error",new Error("stream.push() after EOF")):(u.reading=!1,u.decoder&&!n?(t=u.decoder.write(t),u.objectMode||0!==t.length?p(e,u,t,!1):I(e,u)):p(e,u,t,!1))):r||(u.reading=!1)),!(s=u).ended&&(s.needReadable||s.length<s.highWaterMark||0===s.length)}function p(e,t,n,r){t.flowing&&0===t.length&&!t.sync?(e.emit("data",n),e.read(0)):(t.length+=t.objectMode?1:n.length,r?t.buffer.unshift(n):t.buffer.push(n),t.needReadable&&S(e)),I(e,t);}Object.defineProperty(c.prototype,"destroyed",{get:function(){return void 0!==this._readableState&&this._readableState.destroyed},set:function(e){this._readableState&&(this._readableState.destroyed=e);}}),c.prototype.destroy=r.destroy,c.prototype._undestroy=r.undestroy,c.prototype._destroy=function(e,t){this.push(null),t(e);},c.prototype.push=function(e,t){var n,r=this._readableState;return r.objectMode?n=!0:"string"==typeof e&&((t=t||r.defaultEncoding)!==r.encoding&&(e=l.from(e,t),t=""),n=!0),h(this,e,t,!1,n)},c.prototype.unshift=function(e){return h(this,e,null,!0,!1)},c.prototype.isPaused=function(){return !1===this._readableState.flowing},c.prototype.setEncoding=function(e){return s=s||P(42).StringDecoder,this._readableState.decoder=new s(e),this._readableState.encoding=e,this};var g=8388608;function T(e,t){return e<=0||0===t.length&&t.ended?0:t.objectMode?1:e!=e?t.flowing&&t.length?t.buffer.head.data.length:t.length:(e>t.highWaterMark&&(t.highWaterMark=(g<=(n=e)?n=g:(n--,n|=n>>>1,n|=n>>>2,n|=n>>>4,n|=n>>>8,n|=n>>>16,n++),n)),e<=t.length?e:t.ended?t.length:(t.needReadable=!0,0));var n;}function S(e){var t=e._readableState;t.needReadable=!1,t.emittedReadable||(y("emitReadable",t.flowing),t.emittedReadable=!0,t.sync?E.nextTick(A,e):A(e));}function A(e){y("emit readable"),e.emit("readable"),M(e);}function I(e,t){t.readingMore||(t.readingMore=!0,E.nextTick(R,e,t));}function R(e,t){for(var n=t.length;!t.reading&&!t.flowing&&!t.ended&&t.length<t.highWaterMark&&(y("maybeReadMore read 0"),e.read(0),n!==t.length);)n=t.length;t.readingMore=!1;}function b(e){y("readable nexttick read 0"),e.read(0);}function D(e,t){t.reading||(y("resume read 0"),e.read(0)),t.resumeScheduled=!1,t.awaitDrain=0,e.emit("resume"),M(e),t.flowing&&!t.reading&&e.read(0);}function M(e){var t=e._readableState;for(y("flow",t.flowing);t.flowing&&null!==e.read(););}function N(e,t){return 0===t.length?null:(t.objectMode?n=t.buffer.shift():!e||e>=t.length?(n=t.decoder?t.buffer.join(""):1===t.buffer.length?t.buffer.head.data:t.buffer.concat(t.length),t.buffer.clear()):n=function(e,t,n){var r;e<t.head.data.length?(r=t.head.data.slice(0,e),t.head.data=t.head.data.slice(e)):r=e===t.head.data.length?t.shift():(n?function(e,t){var n=t.head,r=1,i=n.data;e-=i.length;for(;n=n.next;){var a=n.data,o=e>a.length?a.length:e;if(o===a.length?i+=a:i+=a.slice(0,e),0===(e-=o)){o===a.length?(++r,n.next?t.head=n.next:t.head=t.tail=null):(t.head=n).data=a.slice(o);break}++r;}return t.length-=r,i}:function(e,t){var n=l.allocUnsafe(e),r=t.head,i=1;r.data.copy(n),e-=r.data.length;for(;r=r.next;){var a=r.data,o=e>a.length?a.length:e;if(a.copy(n,n.length-e,0,o),0===(e-=o)){o===a.length?(++i,r.next?t.head=r.next:t.head=t.tail=null):(t.head=r).data=a.slice(o);break}++i;}return t.length-=i,n})(e,t);return r}(e,t.buffer,t.decoder),n);var n;}function C(e){var t=e._readableState;if(0<t.length)throw new Error('"endReadable()" called on non-empty stream');t.endEmitted||(t.ended=!0,E.nextTick(O,t,e));}function O(e,t){e.endEmitted||0!==e.length||(e.endEmitted=!0,t.readable=!1,t.emit("end"));}function w(e,t){for(var n=0,r=e.length;n<r;n++)if(e[n]===t)return n;return -1}c.prototype.read=function(e){y("read",e),e=parseInt(e,10);var t=this._readableState,n=e;if(0!==e&&(t.emittedReadable=!1),0===e&&t.needReadable&&(t.length>=t.highWaterMark||t.ended))return y("read: emitReadable",t.length,t.ended),(0===t.length&&t.ended?C:S)(this),null;if(0===(e=T(e,t))&&t.ended)return 0===t.length&&C(this),null;var r,i=t.needReadable;return y("need readable",i),(0===t.length||t.length-e<t.highWaterMark)&&y("length less than watermark",i=!0),t.ended||t.reading?y("reading or ended",i=!1):i&&(y("do read"),t.reading=!0,t.sync=!0,0===t.length&&(t.needReadable=!0),this._read(t.highWaterMark),t.sync=!1,t.reading||(e=T(n,t))),null===(r=0<e?N(e,t):null)?(t.needReadable=!0,e=0):t.length-=e,0===t.length&&(t.ended||(t.needReadable=!0),n!==e&&t.ended&&C(this)),null!==r&&this.emit("data",r),r},c.prototype._read=function(e){this.emit("error",new Error("_read() is not implemented"));},c.prototype.pipe=function(n,e){var r=this,i=this._readableState;switch(i.pipesCount){case 0:i.pipes=n;break;case 1:i.pipes=[i.pipes,n];break;default:i.pipes.push(n);}i.pipesCount+=1,y("pipe count=%d opts=%j",i.pipesCount,e);var t=(!e||!1!==e.end)&&n!==_.stdout&&n!==_.stderr?o:g;function a(e,t){y("onunpipe"),e===r&&t&&!1===t.hasUnpiped&&(t.hasUnpiped=!0,y("cleanup"),n.removeListener("close",h),n.removeListener("finish",p),n.removeListener("drain",u),n.removeListener("error",c),n.removeListener("unpipe",a),r.removeListener("end",o),r.removeListener("end",g),r.removeListener("data",f),l=!0,!i.awaitDrain||n._writableState&&!n._writableState.needDrain||u());}function o(){y("onend"),n.end();}i.endEmitted?E.nextTick(t):r.once("end",t),n.on("unpipe",a);var s,u=(s=r,function(){var e=s._readableState;y("pipeOnDrain",e.awaitDrain),e.awaitDrain&&e.awaitDrain--,0===e.awaitDrain&&v(s,"data")&&(e.flowing=!0,M(s));});n.on("drain",u);var l=!1;var d=!1;function f(e){y("ondata"),(d=!1)!==n.write(e)||d||((1===i.pipesCount&&i.pipes===n||1<i.pipesCount&&-1!==w(i.pipes,n))&&!l&&(y("false write response, pause",r._readableState.awaitDrain),r._readableState.awaitDrain++,d=!0),r.pause());}function c(e){y("onerror",e),g(),n.removeListener("error",c),0===v(n,"error")&&n.emit("error",e);}function h(){n.removeListener("finish",p),g();}function p(){y("onfinish"),n.removeListener("close",h),g();}function g(){y("unpipe"),r.unpipe(n);}return r.on("data",f),function(e,t,n){if("function"==typeof e.prependListener)return e.prependListener(t,n);e._events&&e._events[t]?m(e._events[t])?e._events[t].unshift(n):e._events[t]=[n,e._events[t]]:e.on(t,n);}(n,"error",c),n.once("close",h),n.once("finish",p),n.emit("pipe",r),i.flowing||(y("pipe resume"),r.resume()),n},c.prototype.unpipe=function(e){var t=this._readableState,n={hasUnpiped:!1};if(0===t.pipesCount)return this;if(1===t.pipesCount)return e&&e!==t.pipes||(e=e||t.pipes,t.pipes=null,t.pipesCount=0,t.flowing=!1,e&&e.emit("unpipe",this,n)),this;if(!e){var r=t.pipes,i=t.pipesCount;t.pipes=null,t.pipesCount=0,t.flowing=!1;for(var a=0;a<i;a++)r[a].emit("unpipe",this,n);return this}var o=w(t.pipes,e);return -1===o||(t.pipes.splice(o,1),--t.pipesCount,1===t.pipesCount&&(t.pipes=t.pipes[0]),e.emit("unpipe",this,n)),this},c.prototype.addListener=c.prototype.on=function(e,t){var n,r=i.prototype.on.call(this,e,t);return "data"===e?!1!==this._readableState.flowing&&this.resume():"readable"===e&&((n=this._readableState).endEmitted||n.readableListening||(n.readableListening=n.needReadable=!0,n.emittedReadable=!1,n.reading?n.length&&S(this):E.nextTick(b,this))),r},c.prototype.resume=function(){var e,t,n=this._readableState;return n.flowing||(y("resume"),n.flowing=!0,e=this,(t=n).resumeScheduled||(t.resumeScheduled=!0,E.nextTick(D,e,t))),this},c.prototype.pause=function(){return y("call pause flowing=%j",this._readableState.flowing),!1!==this._readableState.flowing&&(y("pause"),this._readableState.flowing=!1,this.emit("pause")),this},c.prototype.wrap=function(t){var n=this,r=this._readableState,i=!1;for(var e in t.on("end",function(){var e;y("wrapped end"),!r.decoder||r.ended||(e=r.decoder.end())&&e.length&&n.push(e),n.push(null);}),t.on("data",function(e){y("wrapped data"),r.decoder&&(e=r.decoder.write(e)),r.objectMode&&null==e||(r.objectMode||e&&e.length)&&(n.push(e)||(i=!0,t.pause()));}),t)void 0===this[e]&&"function"==typeof t[e]&&(this[e]=function(e){return function(){return t[e].apply(t,arguments)}}(e));for(var a=0;a<f.length;a++)t.on(f[a],this.emit.bind(this,f[a]));return this._read=function(e){y("wrapped _read",e),i&&(i=!1,t.resume());},this},Object.defineProperty(c.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),c._fromList=N;}).call(this,P(25),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{});},{10:10,11:11,21:21,23:23,24:24,25:25,27:27,32:32,33:33,34:34,39:39,42:42,7:7}],30:[function(e,t,n){t.exports=a;var r=e(27),i=e(10);function a(e){if(!(this instanceof a))return new a(e);r.call(this,e),this._transformState={afterTransform:function(e,t){var n=this._transformState;n.transforming=!1;var r=n.writecb;if(!r)return this.emit("error",new Error("write callback called multiple times"));n.writechunk=null,(n.writecb=null)!=t&&this.push(t),r(e);var i=this._readableState;i.reading=!1,(i.needReadable||i.length<i.highWaterMark)&&this._read(i.highWaterMark);}.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,e&&("function"==typeof e.transform&&(this._transform=e.transform),"function"==typeof e.flush&&(this._flush=e.flush)),this.on("prefinish",o);}function o(){var n=this;"function"==typeof this._flush?this._flush(function(e,t){s(n,e,t);}):s(this,null,null);}function s(e,t,n){if(t)return e.emit("error",t);if(null!=n&&e.push(n),e._writableState.length)throw new Error("Calling transform done when ws.length != 0");if(e._transformState.transforming)throw new Error("Calling transform done when still transforming");return e.push(null)}i.inherits=e(21),i.inherits(a,r),a.prototype.push=function(e,t){return this._transformState.needTransform=!1,r.prototype.push.call(this,e,t)},a.prototype._transform=function(e,t,n){throw new Error("_transform() is not implemented")},a.prototype._write=function(e,t,n){var r,i=this._transformState;i.writecb=n,i.writechunk=e,i.writeencoding=t,i.transforming||(r=this._readableState,(i.needTransform||r.needReadable||r.length<r.highWaterMark)&&this._read(r.highWaterMark));},a.prototype._read=function(e){var t=this._transformState;null!==t.writechunk&&t.writecb&&!t.transforming?(t.transforming=!0,this._transform(t.writechunk,t.writeencoding,t.afterTransform)):t.needTransform=!0;},a.prototype._destroy=function(e,t){var n=this;r.prototype._destroy.call(this,e,function(e){t(e),n.emit("close");});};},{10:10,21:21,27:27}],31:[function(A,I,e){(function(e,t,n){var E=A(24);function f(e){var t=this;this.next=null,this.entry=null,this.finish=function(){!function(e,t,n){var r=e.entry;e.entry=null;for(;r;){var i=r.callback;t.pendingcb--,i(n),r=r.next;}t.corkedRequestsFree?t.corkedRequestsFree.next=e:t.corkedRequestsFree=e;}(t,e);};}I.exports=c;var s,u=!e.browser&&-1<["v0.10","v0.9."].indexOf(e.version.slice(0,5))?n:E.nextTick;c.WritableState=d;var r=A(10);r.inherits=A(21);var i={deprecate:A(44)},a=A(34),m=A(39).Buffer,v=t.Uint8Array||function(){};var o,l=A(33);function y(){}function d(e,t){s=s||A(27),e=e||{};var n=t instanceof s;this.objectMode=!!e.objectMode,n&&(this.objectMode=this.objectMode||!!e.writableObjectMode);var r=e.highWaterMark,i=e.writableHighWaterMark,a=this.objectMode?16:16384;this.highWaterMark=r||0===r?r:n&&(i||0===i)?i:a,this.highWaterMark=Math.floor(this.highWaterMark),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1;var o=(this.destroyed=!1)===e.decodeStrings;this.decodeStrings=!o,this.defaultEncoding=e.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(e){!function(e,t){var n=e._writableState,r=n.sync,i=n.writecb;{var a;(((function(e){e.writing=!1,e.writecb=null,e.length-=e.writelen,e.writelen=0;})))(n),t?function(e,t,n,r,i){--t.pendingcb,n?(E.nextTick(i,r),E.nextTick(S,e,t),e._writableState.errorEmitted=!0,e.emit("error",r)):(i(r),e._writableState.errorEmitted=!0,e.emit("error",r),S(e,t));}(e,n,r,t,i):((a=g(n))||n.corked||n.bufferProcessing||!n.bufferedRequest||p(e,n),r?u(h,e,n,a,i):h(e,n,a,i));}}(t,e);},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.bufferedRequestCount=0,this.corkedRequestsFree=new f(this);}function c(e){if(s=s||A(27),!(o.call(c,this)||this instanceof s))return new c(e);this._writableState=new d(e,this),this.writable=!0,e&&("function"==typeof e.write&&(this._write=e.write),"function"==typeof e.writev&&(this._writev=e.writev),"function"==typeof e.destroy&&(this._destroy=e.destroy),"function"==typeof e.final&&(this._final=e.final)),a.call(this);}function T(e,t,n,r,i,a,o){t.writelen=r,t.writecb=o,t.writing=!0,t.sync=!0,n?e._writev(i,t.onwrite):e._write(i,a,t.onwrite),t.sync=!1;}function h(e,t,n,r){var i,a;n||(i=e,0===(a=t).length&&a.needDrain&&(a.needDrain=!1,i.emit("drain"))),t.pendingcb--,r(),S(e,t);}function p(e,t){t.bufferProcessing=!0;var n=t.bufferedRequest;if(e._writev&&n&&n.next){var r=t.bufferedRequestCount,i=new Array(r),a=t.corkedRequestsFree;a.entry=n;for(var o=0,s=!0;n;)(i[o]=n).isBuf||(s=!1),n=n.next,o+=1;i.allBuffers=s,T(e,t,!0,t.length,i,"",a.finish),t.pendingcb++,t.lastBufferedRequest=null,a.next?(t.corkedRequestsFree=a.next,a.next=null):t.corkedRequestsFree=new f(t),t.bufferedRequestCount=0;}else {for(;n;){var u=n.chunk,l=n.encoding,d=n.callback;if(T(e,t,!1,t.objectMode?1:u.length,u,l,d),n=n.next,t.bufferedRequestCount--,t.writing)break}null===n&&(t.lastBufferedRequest=null);}t.bufferedRequest=n,t.bufferProcessing=!1;}function g(e){return e.ending&&0===e.length&&null===e.bufferedRequest&&!e.finished&&!e.writing}function _(t,n){t._final(function(e){n.pendingcb--,e&&t.emit("error",e),n.prefinished=!0,t.emit("prefinish"),S(t,n);});}function S(e,t){var n,r,i=g(t);return i&&(n=e,(r=t).prefinished||r.finalCalled||("function"==typeof n._final?(r.pendingcb++,r.finalCalled=!0,E.nextTick(_,n,r)):(r.prefinished=!0,n.emit("prefinish"))),0===t.pendingcb&&(t.finished=!0,e.emit("finish"))),i}r.inherits(c,a),d.prototype.getBuffer=function(){for(var e=this.bufferedRequest,t=[];e;)t.push(e),e=e.next;return t},function(){try{Object.defineProperty(d.prototype,"buffer",{get:i.deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")});}catch(e){}}(),"function"==typeof Symbol&&Symbol.hasInstance&&"function"==typeof Function.prototype[Symbol.hasInstance]?(o=Function.prototype[Symbol.hasInstance],Object.defineProperty(c,Symbol.hasInstance,{value:function(e){return !!o.call(this,e)||this===c&&(e&&e._writableState instanceof d)}})):o=function(e){return e instanceof this},c.prototype.pipe=function(){this.emit("error",new Error("Cannot pipe, not readable"));},c.prototype.write=function(e,t,n){var r,i,a,o,s,u,l,d,f,c,h,p=this._writableState,g=!1,_=!p.objectMode&&(r=e,m.isBuffer(r)||r instanceof v);return _&&!m.isBuffer(e)&&(i=e,e=m.from(i)),"function"==typeof t&&(n=t,t=null),t=_?"buffer":t||p.defaultEncoding,"function"!=typeof n&&(n=y),p.ended?(f=this,c=n,h=new Error("write after end"),f.emit("error",h),E.nextTick(c,h)):(_||(a=this,o=p,u=n,d=!(l=!0),null===(s=e)?d=new TypeError("May not write null values to stream"):"string"==typeof s||void 0===s||o.objectMode||(d=new TypeError("Invalid non-string/buffer chunk")),d&&(a.emit("error",d),E.nextTick(u,d),l=!1),l))&&(p.pendingcb++,g=function(e,t,n,r,i,a){{var o;n||(o=function(e,t,n){e.objectMode||!1===e.decodeStrings||"string"!=typeof t||(t=m.from(t,n));return t}(t,r,i),r!==o&&(n=!0,i="buffer",r=o));}var s=t.objectMode?1:r.length;t.length+=s;var u=t.length<t.highWaterMark;u||(t.needDrain=!0);{var l;t.writing||t.corked?(l=t.lastBufferedRequest,t.lastBufferedRequest={chunk:r,encoding:i,isBuf:n,callback:a,next:null},l?l.next=t.lastBufferedRequest:t.bufferedRequest=t.lastBufferedRequest,t.bufferedRequestCount+=1):T(e,t,!1,s,r,i,a);}return u}(this,p,_,e,t,n)),g},c.prototype.cork=function(){this._writableState.corked++;},c.prototype.uncork=function(){var e=this._writableState;e.corked&&(e.corked--,e.writing||e.corked||e.finished||e.bufferProcessing||!e.bufferedRequest||p(this,e));},c.prototype.setDefaultEncoding=function(e){if("string"==typeof e&&(e=e.toLowerCase()),!(-1<["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((e+"").toLowerCase())))throw new TypeError("Unknown encoding: "+e);return this._writableState.defaultEncoding=e,this},Object.defineProperty(c.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),c.prototype._write=function(e,t,n){n(new Error("_write() is not implemented"));},c.prototype._writev=null,c.prototype.end=function(e,t,n){var r=this._writableState;"function"==typeof e?(n=e,t=e=null):"function"==typeof t&&(n=t,t=null),null!=e&&this.write(e,t),r.corked&&(r.corked=1,this.uncork()),r.ending||r.finished||function(e,t,n){t.ending=!0,S(e,t),n&&(t.finished?E.nextTick(n):e.once("finish",n));t.ended=!0,e.writable=!1;}(this,r,n);},Object.defineProperty(c.prototype,"destroyed",{get:function(){return void 0!==this._writableState&&this._writableState.destroyed},set:function(e){this._writableState&&(this._writableState.destroyed=e);}}),c.prototype.destroy=l.destroy,c.prototype._undestroy=l.undestroy,c.prototype._destroy=function(e,t){this.end(),t(e);};}).call(this,A(25),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},A(43).setImmediate);},{10:10,21:21,24:24,25:25,27:27,33:33,34:34,39:39,43:43,44:44}],32:[function(e,t,n){var s=e(39).Buffer,r=e(7);function i(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),this.head=null,this.tail=null,this.length=0;}t.exports=(i.prototype.push=function(e){var t={data:e,next:null};0<this.length?this.tail.next=t:this.head=t,this.tail=t,++this.length;},i.prototype.unshift=function(e){var t={data:e,next:this.head};0===this.length&&(this.tail=t),this.head=t,++this.length;},i.prototype.shift=function(){if(0!==this.length){var e=this.head.data;return 1===this.length?this.head=this.tail=null:this.head=this.head.next,--this.length,e}},i.prototype.clear=function(){this.head=this.tail=null,this.length=0;},i.prototype.join=function(e){if(0===this.length)return "";for(var t=this.head,n=""+t.data;t=t.next;)n+=e+t.data;return n},i.prototype.concat=function(e){if(0===this.length)return s.alloc(0);if(1===this.length)return this.head.data;for(var t,n,r,i=s.allocUnsafe(e>>>0),a=this.head,o=0;a;)t=a.data,n=i,r=o,t.copy(n,r),o+=a.data.length,a=a.next;return i},i),r&&r.inspect&&r.inspect.custom&&(t.exports.prototype[r.inspect.custom]=function(){var e=r.inspect({length:this.length});return this.constructor.name+" "+e});},{39:39,7:7}],33:[function(e,t,n){var a=e(24);function o(e,t){e.emit("error",t);}t.exports={destroy:function(e,t){var n=this,r=this._readableState&&this._readableState.destroyed,i=this._writableState&&this._writableState.destroyed;return r||i?t?t(e):!e||this._writableState&&this._writableState.errorEmitted||a.nextTick(o,this,e):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(e||null,function(e){!t&&e?(a.nextTick(o,n,e),n._writableState&&(n._writableState.errorEmitted=!0)):t&&t(e);})),this},undestroy:function(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1);}};},{24:24}],34:[function(e,t,n){t.exports=e(11).EventEmitter;},{11:11}],35:[function(e,t,n){t.exports=e(36).PassThrough;},{36:36}],36:[function(e,t,n){(((n=t.exports=e(29)).Stream=n).Readable=n).Writable=e(31),n.Duplex=e(27),n.Transform=e(30),n.PassThrough=e(28);},{27:27,28:28,29:29,30:30,31:31}],37:[function(e,t,n){t.exports=e(36).Transform;},{36:36}],38:[function(e,t,n){t.exports=e(31);},{31:31}],39:[function(e,t,n){var r=e(8),i=r.Buffer;function a(e,t){for(var n in e)t[n]=e[n];}function o(e,t,n){return i(e,t,n)}i.from&&i.alloc&&i.allocUnsafe&&i.allocUnsafeSlow?t.exports=r:(a(r,n),n.Buffer=o),a(i,o),o.from=function(e,t,n){if("number"==typeof e)throw new TypeError("Argument must not be a number");return i(e,t,n)},o.alloc=function(e,t,n){if("number"!=typeof e)throw new TypeError("Argument must be a number");var r=i(e);return void 0!==t?"string"==typeof n?r.fill(t,n):r.fill(t):r.fill(0),r},o.allocUnsafe=function(e){if("number"!=typeof e)throw new TypeError("Argument must be a number");return i(e)},o.allocUnsafeSlow=function(e){if("number"!=typeof e)throw new TypeError("Argument must be a number");return r.SlowBuffer(e)};},{8:8}],40:[function(Y,e,t){(function(j){!function(u){u.parser=function(e,t){return new i(e,t)},u.SAXParser=i,u.SAXStream=o,u.createStream=function(e,t){return new o(e,t)},u.MAX_BUFFER_LENGTH=65536;var r,l=["comment","sgmlDecl","textNode","tagName","doctype","procInstName","procInstBody","entity","attribName","attribValue","cdata","script"];function i(e,t){if(!(this instanceof i))return new i(e,t);var n=this;!function(e){for(var t=0,n=l.length;t<n;t++)e[l[t]]="";}(n),n.q=n.c="",n.bufferCheckPosition=u.MAX_BUFFER_LENGTH,n.opt=t||{},n.opt.lowercase=n.opt.lowercase||n.opt.lowercasetags,n.looseCase=n.opt.lowercase?"toLowerCase":"toUpperCase",n.tags=[],n.closed=n.closedRoot=n.sawRoot=!1,n.tag=n.error=null,n.strict=!!e,n.noscript=!(!e&&!n.opt.noscript),n.state=R.BEGIN,n.strictEntities=n.opt.strictEntities,n.ENTITIES=n.strictEntities?Object.create(u.XML_ENTITIES):Object.create(u.ENTITIES),n.attribList=[],n.opt.xmlns&&(n.ns=Object.create(g)),n.trackPosition=!1!==n.opt.position,n.trackPosition&&(n.position=n.line=n.column=0),D(n,"onready");}u.EVENTS=["text","processinginstruction","sgmldeclaration","doctype","comment","opentagstart","attribute","opentag","closetag","opencdata","cdata","closecdata","error","end","ready","script","opennamespace","closenamespace"],Object.create||(Object.create=function(e){function t(){}return t.prototype=e,new t}),Object.keys||(Object.keys=function(e){var t=[];for(var n in e)e.hasOwnProperty(n)&&t.push(n);return t}),i.prototype={end:function(){w(this);},write:function(e){var t=this;if(this.error)throw this.error;if(t.closed)return O(t,"Cannot write after close. Assign an onready handler.");if(null===e)return w(t);"object"==typeof e&&(e=e.toString());var n,r,i=0,a="";for(;a=B(e,i++),t.c=a;)switch(t.trackPosition&&(t.position++,"\n"===a?(t.line++,t.column=0):t.column++),t.state){case R.BEGIN:if(t.state=R.BEGIN_WHITESPACE,"\ufeff"===a)continue;k(t,a);continue;case R.BEGIN_WHITESPACE:k(t,a);continue;case R.TEXT:if(t.sawRoot&&!t.closedRoot){for(var o=i-1;a&&"<"!==a&&"&"!==a;)(a=B(e,i++))&&t.trackPosition&&(t.position++,"\n"===a?(t.line++,t.column=0):t.column++);t.textNode+=e.substring(o,i-1);}"<"!==a||t.sawRoot&&t.closedRoot&&!t.strict?(!S(_,a)||t.sawRoot&&!t.closedRoot||P(t,"Text data outside of root node."),"&"===a?t.state=R.TEXT_ENTITY:t.textNode+=a):(t.state=R.OPEN_WAKA,t.startTagPosition=t.position);continue;case R.SCRIPT:"<"===a?t.state=R.SCRIPT_ENDING:t.script+=a;continue;case R.SCRIPT_ENDING:"/"===a?t.state=R.CLOSE_TAG:(t.script+="<"+a,t.state=R.SCRIPT);continue;case R.OPEN_WAKA:var s;"!"===a?(t.state=R.SGML_DECL,t.sgmlDecl=""):T(_,a)||(T(E,a)?(t.state=R.OPEN_TAG,t.tagName=a):"/"===a?(t.state=R.CLOSE_TAG,t.tagName=""):"?"===a?(t.state=R.PROC_INST,t.procInstName=t.procInstBody=""):(P(t,"Unencoded <"),t.startTagPosition+1<t.position&&(s=t.position-t.startTagPosition,a=new Array(s).join(" ")+a),t.textNode+="<"+a,t.state=R.TEXT));continue;case R.SGML_DECL:(t.sgmlDecl+a).toUpperCase()===c?(M(t,"onopencdata"),t.state=R.CDATA,t.sgmlDecl="",t.cdata=""):t.sgmlDecl+a==="--"?(t.state=R.COMMENT,t.comment="",t.sgmlDecl=""):(t.sgmlDecl+a).toUpperCase()===h?(t.state=R.DOCTYPE,(t.doctype||t.sawRoot)&&P(t,"Inappropriately located doctype declaration"),t.doctype="",t.sgmlDecl=""):">"===a?(M(t,"onsgmldeclaration",t.sgmlDecl),t.sgmlDecl="",t.state=R.TEXT):(T(d,a)&&(t.state=R.SGML_DECL_QUOTED),t.sgmlDecl+=a);continue;case R.SGML_DECL_QUOTED:a===t.q&&(t.state=R.SGML_DECL,t.q=""),t.sgmlDecl+=a;continue;case R.DOCTYPE:">"===a?(t.state=R.TEXT,M(t,"ondoctype",t.doctype),t.doctype=!0):(t.doctype+=a,"["===a?t.state=R.DOCTYPE_DTD:T(d,a)&&(t.state=R.DOCTYPE_QUOTED,t.q=a));continue;case R.DOCTYPE_QUOTED:t.doctype+=a,a===t.q&&(t.q="",t.state=R.DOCTYPE);continue;case R.DOCTYPE_DTD:t.doctype+=a,"]"===a?t.state=R.DOCTYPE:T(d,a)&&(t.state=R.DOCTYPE_DTD_QUOTED,t.q=a);continue;case R.DOCTYPE_DTD_QUOTED:t.doctype+=a,a===t.q&&(t.state=R.DOCTYPE_DTD,t.q="");continue;case R.COMMENT:"-"===a?t.state=R.COMMENT_ENDING:t.comment+=a;continue;case R.COMMENT_ENDING:"-"===a?(t.state=R.COMMENT_ENDED,t.comment=C(t.opt,t.comment),t.comment&&M(t,"oncomment",t.comment),t.comment=""):(t.comment+="-"+a,t.state=R.COMMENT);continue;case R.COMMENT_ENDED:">"!==a?(P(t,"Malformed comment"),t.comment+="--"+a,t.state=R.COMMENT):t.state=R.TEXT;continue;case R.CDATA:"]"===a?t.state=R.CDATA_ENDING:t.cdata+=a;continue;case R.CDATA_ENDING:"]"===a?t.state=R.CDATA_ENDING_2:(t.cdata+="]"+a,t.state=R.CDATA);continue;case R.CDATA_ENDING_2:">"===a?(t.cdata&&M(t,"oncdata",t.cdata),M(t,"onclosecdata"),t.cdata="",t.state=R.TEXT):"]"===a?t.cdata+="]":(t.cdata+="]]"+a,t.state=R.CDATA);continue;case R.PROC_INST:"?"===a?t.state=R.PROC_INST_ENDING:T(_,a)?t.state=R.PROC_INST_BODY:t.procInstName+=a;continue;case R.PROC_INST_BODY:if(!t.procInstBody&&T(_,a))continue;"?"===a?t.state=R.PROC_INST_ENDING:t.procInstBody+=a;continue;case R.PROC_INST_ENDING:">"===a?(M(t,"onprocessinginstruction",{name:t.procInstName,body:t.procInstBody}),t.procInstName=t.procInstBody="",t.state=R.TEXT):(t.procInstBody+="?"+a,t.state=R.PROC_INST_BODY);continue;case R.OPEN_TAG:T(m,a)?t.tagName+=a:(function(e){e.strict||(e.tagName=e.tagName[e.looseCase]());var t=e.tags[e.tags.length-1]||e,n=e.tag={name:e.tagName,attributes:{}};e.opt.xmlns&&(n.ns=t.ns);e.attribList.length=0,M(e,"onopentagstart",n);}(t),">"===a?F(t):"/"===a?t.state=R.OPEN_TAG_SLASH:(S(_,a)&&P(t,"Invalid character in tag name"),t.state=R.ATTRIB));continue;case R.OPEN_TAG_SLASH:">"===a?(F(t,!0),U(t)):(P(t,"Forward-slash in opening tag not followed by >"),t.state=R.ATTRIB);continue;case R.ATTRIB:if(T(_,a))continue;">"===a?F(t):"/"===a?t.state=R.OPEN_TAG_SLASH:T(E,a)?(t.attribName=a,t.attribValue="",t.state=R.ATTRIB_NAME):P(t,"Invalid attribute name");continue;case R.ATTRIB_NAME:"="===a?t.state=R.ATTRIB_VALUE:">"===a?(P(t,"Attribute without value"),t.attribValue=t.attribName,x(t),F(t)):T(_,a)?t.state=R.ATTRIB_NAME_SAW_WHITE:T(m,a)?t.attribName+=a:P(t,"Invalid attribute name");continue;case R.ATTRIB_NAME_SAW_WHITE:if("="===a)t.state=R.ATTRIB_VALUE;else {if(T(_,a))continue;P(t,"Attribute without value"),t.tag.attributes[t.attribName]="",t.attribValue="",M(t,"onattribute",{name:t.attribName,value:""}),t.attribName="",">"===a?F(t):T(E,a)?(t.attribName=a,t.state=R.ATTRIB_NAME):(P(t,"Invalid attribute name"),t.state=R.ATTRIB);}continue;case R.ATTRIB_VALUE:if(T(_,a))continue;T(d,a)?(t.q=a,t.state=R.ATTRIB_VALUE_QUOTED):(P(t,"Unquoted attribute value"),t.state=R.ATTRIB_VALUE_UNQUOTED,t.attribValue=a);continue;case R.ATTRIB_VALUE_QUOTED:if(a!==t.q){"&"===a?t.state=R.ATTRIB_VALUE_ENTITY_Q:t.attribValue+=a;continue}x(t),t.q="",t.state=R.ATTRIB_VALUE_CLOSED;continue;case R.ATTRIB_VALUE_CLOSED:T(_,a)?t.state=R.ATTRIB:">"===a?F(t):"/"===a?t.state=R.OPEN_TAG_SLASH:T(E,a)?(P(t,"No whitespace between attributes"),t.attribName=a,t.attribValue="",t.state=R.ATTRIB_NAME):P(t,"Invalid attribute name");continue;case R.ATTRIB_VALUE_UNQUOTED:if(S(f,a)){"&"===a?t.state=R.ATTRIB_VALUE_ENTITY_U:t.attribValue+=a;continue}x(t),">"===a?F(t):t.state=R.ATTRIB;continue;case R.CLOSE_TAG:if(t.tagName)">"===a?U(t):T(m,a)?t.tagName+=a:t.script?(t.script+="</"+t.tagName,t.tagName="",t.state=R.SCRIPT):(S(_,a)&&P(t,"Invalid tagname in closing tag"),t.state=R.CLOSE_TAG_SAW_WHITE);else {if(T(_,a))continue;S(E,a)?t.script?(t.script+="</"+a,t.state=R.SCRIPT):P(t,"Invalid tagname in closing tag."):t.tagName=a;}continue;case R.CLOSE_TAG_SAW_WHITE:if(T(_,a))continue;">"===a?U(t):P(t,"Invalid characters in closing tag");continue;case R.TEXT_ENTITY:case R.ATTRIB_VALUE_ENTITY_Q:case R.ATTRIB_VALUE_ENTITY_U:switch(t.state){case R.TEXT_ENTITY:n=R.TEXT,r="textNode";break;case R.ATTRIB_VALUE_ENTITY_Q:n=R.ATTRIB_VALUE_QUOTED,r="attribValue";break;case R.ATTRIB_VALUE_ENTITY_U:n=R.ATTRIB_VALUE_UNQUOTED,r="attribValue";}";"===a?(t[r]+=function(e){var t,n=e.entity,r=n.toLowerCase(),i="";if(e.ENTITIES[n])return e.ENTITIES[n];if(e.ENTITIES[r])return e.ENTITIES[r];"#"===(n=r).charAt(0)&&(i="x"===n.charAt(1)?(n=n.slice(2),(t=parseInt(n,16)).toString(16)):(n=n.slice(1),(t=parseInt(n,10)).toString(10)));return n=n.replace(/^0+/,""),i.toLowerCase()===n?String.fromCodePoint(t):(P(e,"Invalid character entity"),"&"+e.entity+";")}(t),t.entity="",t.state=n):T(t.entity.length?y:v,a)?t.entity+=a:(P(t,"Invalid character in entity name"),t[r]+="&"+t.entity+a,t.entity="",t.state=n);continue;default:throw new Error(t,"Unknown state: "+t.state)}t.position>=t.bufferCheckPosition&&function(e){for(var t=Math.max(u.MAX_BUFFER_LENGTH,10),n=0,r=0,i=l.length;r<i;r++){var a=e[l[r]].length;if(t<a)switch(l[r]){case"textNode":N(e);break;case"cdata":M(e,"oncdata",e.cdata),e.cdata="";break;case"script":M(e,"onscript",e.script),e.script="";break;default:O(e,"Max buffer length exceeded: "+l[r]);}n=Math.max(n,a);}var o=u.MAX_BUFFER_LENGTH-n;e.bufferCheckPosition=o+e.position;}(t);return t},resume:function(){return this.error=null,this},close:function(){return this.write(null)},flush:function(){var e;N(e=this),""!==e.cdata&&(M(e,"oncdata",e.cdata),e.cdata=""),""!==e.script&&(M(e,"onscript",e.script),e.script="");}};try{r=Y(41).Stream;}catch(e){r=function(){};}var a=u.EVENTS.filter(function(e){return "error"!==e&&"end"!==e});function o(e,t){if(!(this instanceof o))return new o(e,t);r.apply(this),this._parser=new i(e,t),this.writable=!0,this.readable=!0;var n=this;this._parser.onend=function(){n.emit("end");},this._parser.onerror=function(e){n.emit("error",e),n._parser.error=null;},this._decoder=null,a.forEach(function(t){Object.defineProperty(n,"on"+t,{get:function(){return n._parser["on"+t]},set:function(e){if(!e)return n.removeAllListeners(t),n._parser["on"+t]=e;n.on(t,e);},enumerable:!0,configurable:!1});});}(o.prototype=Object.create(r.prototype,{constructor:{value:o}})).write=function(e){var t;return "function"==typeof j&&"function"==typeof j.isBuffer&&j.isBuffer(e)&&(this._decoder||(t=Y(42).StringDecoder,this._decoder=new t("utf8")),e=this._decoder.write(e)),this._parser.write(e.toString()),this.emit("data",e),!0},o.prototype.end=function(e){return e&&e.length&&this.write(e),this._parser.end(),!0},o.prototype.on=function(t,e){var n=this;return n._parser["on"+t]||-1===a.indexOf(t)||(n._parser["on"+t]=function(){var e=1===arguments.length?[arguments[0]]:Array.apply(null,arguments);e.splice(0,0,t),n.emit.apply(n,e);}),r.prototype.on.call(n,t,e)};var e="0124356789",t="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ",d="'\"",f=(_="\r\n\t ")+">",c="[CDATA[",h="DOCTYPE",s="http://www.w3.org/XML/1998/namespace",p="http://www.w3.org/2000/xmlns/",g={xml:s,xmlns:p},_=n(_),e=n(e),t=n(t),E=/[:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/,m=/[:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\u00B7\u0300-\u036F\u203F-\u2040\.\d-]/,v=/[#:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/,y=/[#:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\u00B7\u0300-\u036F\u203F-\u2040\.\d-]/;function n(e){return e.split("").reduce(function(e,t){return e[t]=!0,e},{})}function T(e,t){return n=e,"[object RegExp]"===Object.prototype.toString.call(n)?t.match(e):e[t];var n;}function S(e,t){return !T(e,t)}d=n(d),f=n(f);var A,I,R=0;for(var b in u.STATE={BEGIN:R++,BEGIN_WHITESPACE:R++,TEXT:R++,TEXT_ENTITY:R++,OPEN_WAKA:R++,SGML_DECL:R++,SGML_DECL_QUOTED:R++,DOCTYPE:R++,DOCTYPE_QUOTED:R++,DOCTYPE_DTD:R++,DOCTYPE_DTD_QUOTED:R++,COMMENT_STARTING:R++,COMMENT:R++,COMMENT_ENDING:R++,COMMENT_ENDED:R++,CDATA:R++,CDATA_ENDING:R++,CDATA_ENDING_2:R++,PROC_INST:R++,PROC_INST_BODY:R++,PROC_INST_ENDING:R++,OPEN_TAG:R++,OPEN_TAG_SLASH:R++,ATTRIB:R++,ATTRIB_NAME:R++,ATTRIB_NAME_SAW_WHITE:R++,ATTRIB_VALUE:R++,ATTRIB_VALUE_QUOTED:R++,ATTRIB_VALUE_CLOSED:R++,ATTRIB_VALUE_UNQUOTED:R++,ATTRIB_VALUE_ENTITY_Q:R++,ATTRIB_VALUE_ENTITY_U:R++,CLOSE_TAG:R++,CLOSE_TAG_SAW_WHITE:R++,SCRIPT:R++,SCRIPT_ENDING:R++},u.XML_ENTITIES={amp:"&",gt:">",lt:"<",quot:'"',apos:"'"},u.ENTITIES={amp:"&",gt:">",lt:"<",quot:'"',apos:"'",AElig:198,Aacute:193,Acirc:194,Agrave:192,Aring:197,Atilde:195,Auml:196,Ccedil:199,ETH:208,Eacute:201,Ecirc:202,Egrave:200,Euml:203,Iacute:205,Icirc:206,Igrave:204,Iuml:207,Ntilde:209,Oacute:211,Ocirc:212,Ograve:210,Oslash:216,Otilde:213,Ouml:214,THORN:222,Uacute:218,Ucirc:219,Ugrave:217,Uuml:220,Yacute:221,aacute:225,acirc:226,aelig:230,agrave:224,aring:229,atilde:227,auml:228,ccedil:231,eacute:233,ecirc:234,egrave:232,eth:240,euml:235,iacute:237,icirc:238,igrave:236,iuml:239,ntilde:241,oacute:243,ocirc:244,ograve:242,oslash:248,otilde:245,ouml:246,szlig:223,thorn:254,uacute:250,ucirc:251,ugrave:249,uuml:252,yacute:253,yuml:255,copy:169,reg:174,nbsp:160,iexcl:161,cent:162,pound:163,curren:164,yen:165,brvbar:166,sect:167,uml:168,ordf:170,laquo:171,not:172,shy:173,macr:175,deg:176,plusmn:177,sup1:185,sup2:178,sup3:179,acute:180,micro:181,para:182,middot:183,cedil:184,ordm:186,raquo:187,frac14:188,frac12:189,frac34:190,iquest:191,times:215,divide:247,OElig:338,oelig:339,Scaron:352,scaron:353,Yuml:376,fnof:402,circ:710,tilde:732,Alpha:913,Beta:914,Gamma:915,Delta:916,Epsilon:917,Zeta:918,Eta:919,Theta:920,Iota:921,Kappa:922,Lambda:923,Mu:924,Nu:925,Xi:926,Omicron:927,Pi:928,Rho:929,Sigma:931,Tau:932,Upsilon:933,Phi:934,Chi:935,Psi:936,Omega:937,alpha:945,beta:946,gamma:947,delta:948,epsilon:949,zeta:950,eta:951,theta:952,iota:953,kappa:954,lambda:955,mu:956,nu:957,xi:958,omicron:959,pi:960,rho:961,sigmaf:962,sigma:963,tau:964,upsilon:965,phi:966,chi:967,psi:968,omega:969,thetasym:977,upsih:978,piv:982,ensp:8194,emsp:8195,thinsp:8201,zwnj:8204,zwj:8205,lrm:8206,rlm:8207,ndash:8211,mdash:8212,lsquo:8216,rsquo:8217,sbquo:8218,ldquo:8220,rdquo:8221,bdquo:8222,dagger:8224,Dagger:8225,bull:8226,hellip:8230,permil:8240,prime:8242,Prime:8243,lsaquo:8249,rsaquo:8250,oline:8254,frasl:8260,euro:8364,image:8465,weierp:8472,real:8476,trade:8482,alefsym:8501,larr:8592,uarr:8593,rarr:8594,darr:8595,harr:8596,crarr:8629,lArr:8656,uArr:8657,rArr:8658,dArr:8659,hArr:8660,forall:8704,part:8706,exist:8707,empty:8709,nabla:8711,isin:8712,notin:8713,ni:8715,prod:8719,sum:8721,minus:8722,lowast:8727,radic:8730,prop:8733,infin:8734,ang:8736,and:8743,or:8744,cap:8745,cup:8746,int:8747,there4:8756,sim:8764,cong:8773,asymp:8776,ne:8800,equiv:8801,le:8804,ge:8805,sub:8834,sup:8835,nsub:8836,sube:8838,supe:8839,oplus:8853,otimes:8855,perp:8869,sdot:8901,lceil:8968,rceil:8969,lfloor:8970,rfloor:8971,lang:9001,rang:9002,loz:9674,spades:9824,clubs:9827,hearts:9829,diams:9830},Object.keys(u.ENTITIES).forEach(function(e){var t=u.ENTITIES[e],n="number"==typeof t?String.fromCharCode(t):t;u.ENTITIES[e]=n;}),u.STATE)u.STATE[u.STATE[b]]=b;function D(e,t,n){e[t]&&e[t](n);}function M(e,t,n){e.textNode&&N(e),D(e,t,n);}function N(e){e.textNode=C(e.opt,e.textNode),e.textNode&&D(e,"ontext",e.textNode),e.textNode="";}function C(e,t){return e.trim&&(t=t.trim()),e.normalize&&(t=t.replace(/\s+/g," ")),t}function O(e,t){return N(e),e.trackPosition&&(t+="\nLine: "+e.line+"\nColumn: "+e.column+"\nChar: "+e.c),t=new Error(t),e.error=t,D(e,"onerror",t),e}function w(e){return e.sawRoot&&!e.closedRoot&&P(e,"Unclosed root tag"),e.state!==R.BEGIN&&e.state!==R.BEGIN_WHITESPACE&&e.state!==R.TEXT&&O(e,"Unexpected end"),N(e),e.c="",e.closed=!0,D(e,"onend"),i.call(e,e.strict,e.opt),e}function P(e,t){if("object"!=typeof e||!(e instanceof i))throw new Error("bad call to strictFail");e.strict&&O(e,t);}function L(e,t){var n=e.indexOf(":")<0?["",e]:e.split(":"),r=n[0],i=n[1];return t&&"xmlns"===e&&(r="xmlns",i=""),{prefix:r,local:i}}function x(e){var t,n,r,i,a;e.strict||(e.attribName=e.attribName[e.looseCase]()),-1!==e.attribList.indexOf(e.attribName)||e.tag.attributes.hasOwnProperty(e.attribName)||(e.opt.xmlns?(n=(t=L(e.attribName,!0)).prefix,r=t.local,"xmlns"===n&&("xml"===r&&e.attribValue!==s?P(e,"xml: prefix must be bound to "+s+"\nActual: "+e.attribValue):"xmlns"===r&&e.attribValue!==p?P(e,"xmlns: prefix must be bound to "+p+"\nActual: "+e.attribValue):(i=e.tag,a=e.tags[e.tags.length-1]||e,i.ns===a.ns&&(i.ns=Object.create(a.ns)),i.ns[r]=e.attribValue)),e.attribList.push([e.attribName,e.attribValue])):(e.tag.attributes[e.attribName]=e.attribValue,M(e,"onattribute",{name:e.attribName,value:e.attribValue}))),e.attribName=e.attribValue="";}function F(t,e){if(t.opt.xmlns){var n=t.tag,r=L(t.tagName);n.prefix=r.prefix,n.local=r.local,n.uri=n.ns[r.prefix]||"",n.prefix&&!n.uri&&(P(t,"Unbound namespace prefix: "+JSON.stringify(t.tagName)),n.uri=r.prefix);var i=t.tags[t.tags.length-1]||t;n.ns&&i.ns!==n.ns&&Object.keys(n.ns).forEach(function(e){M(t,"onopennamespace",{prefix:e,uri:n.ns[e]});});for(var a=0,o=t.attribList.length;a<o;a++){var s=t.attribList[a],u=s[0],l=s[1],d=L(u,!0),f=d.prefix,c=d.local,h=""!==f&&n.ns[f]||"",p={name:u,value:l,prefix:f,local:c,uri:h};f&&"xmlns"!==f&&!h&&(P(t,"Unbound namespace prefix: "+JSON.stringify(f)),p.uri=f),t.tag.attributes[u]=p,M(t,"onattribute",p);}t.attribList.length=0;}t.tag.isSelfClosing=!!e,t.sawRoot=!0,t.tags.push(t.tag),M(t,"onopentag",t.tag),e||(t.noscript||"script"!==t.tagName.toLowerCase()?t.state=R.TEXT:t.state=R.SCRIPT,t.tag=null,t.tagName=""),t.attribName=t.attribValue="",t.attribList.length=0;}function U(n){if(!n.tagName)return P(n,"Weird empty close tag."),n.textNode+="</>",void(n.state=R.TEXT);if(n.script){if("script"!==n.tagName)return n.script+="</"+n.tagName+">",n.tagName="",void(n.state=R.SCRIPT);M(n,"onscript",n.script),n.script="";}var e=n.tags.length,t=n.tagName;n.strict||(t=t[n.looseCase]());for(var r=t;e--;){if(n.tags[e].name===r)break;P(n,"Unexpected close tag");}if(e<0)return P(n,"Unmatched closing tag: "+n.tagName),n.textNode+="</"+n.tagName+">",void(n.state=R.TEXT);n.tagName=t;for(var i=n.tags.length;i-- >e;){var a=n.tag=n.tags.pop();n.tagName=n.tag.name,M(n,"onclosetag",n.tagName);var o={};for(var s in a.ns)o[s]=a.ns[s];var u=n.tags[n.tags.length-1]||n;n.opt.xmlns&&a.ns!==u.ns&&Object.keys(a.ns).forEach(function(e){var t=a.ns[e];M(n,"onclosenamespace",{prefix:e,uri:t});});}0===e&&(n.closedRoot=!0),n.tagName=n.attribValue=n.attribName="",n.attribList.length=0,n.state=R.TEXT;}function k(e,t){"<"===t?(e.state=R.OPEN_WAKA,e.startTagPosition=e.position):S(_,t)&&(P(e,"Non-whitespace before first tag."),e.textNode=t,e.state=R.TEXT);}function B(e,t){var n="";return t<e.length&&(n=e.charAt(t)),n}function G(){var e,t,n=[],r=-1,i=arguments.length;if(!i)return "";for(var a="";++r<i;){var o=Number(arguments[r]);if(!isFinite(o)||o<0||1114111<o||I(o)!==o)throw RangeError("Invalid code point: "+o);o<=65535?n.push(o):(e=55296+((o-=65536)>>10),t=o%1024+56320,n.push(e,t)),(r+1===i||16384<n.length)&&(a+=A.apply(null,n),n.length=0);}return a}R=u.STATE,String.fromCodePoint||(A=String.fromCharCode,I=Math.floor,Object.defineProperty?Object.defineProperty(String,"fromCodePoint",{value:G,configurable:!0,writable:!0}):String.fromCodePoint=G);}(void 0===t?this.sax={}:t);}).call(this,Y(8).Buffer);},{41:41,42:42,8:8}],41:[function(e,t,n){t.exports=r;var d=e(11).EventEmitter;function r(){d.call(this);}e(21)(r,d),r.Readable=e(36),r.Writable=e(38),r.Duplex=e(26),r.Transform=e(37),r.PassThrough=e(35),(r.Stream=r).prototype.pipe=function(t,e){var n=this;function r(e){t.writable&&!1===t.write(e)&&n.pause&&n.pause();}function i(){n.readable&&n.resume&&n.resume();}n.on("data",r),t.on("drain",i),t._isStdio||e&&!1===e.end||(n.on("end",o),n.on("close",s));var a=!1;function o(){a||(a=!0,t.end());}function s(){a||(a=!0,"function"==typeof t.destroy&&t.destroy());}function u(e){if(l(),0===d.listenerCount(this,"error"))throw e}function l(){n.removeListener("data",r),t.removeListener("drain",i),n.removeListener("end",o),n.removeListener("close",s),n.removeListener("error",u),t.removeListener("error",u),n.removeListener("end",l),n.removeListener("close",l),t.removeListener("close",l);}return n.on("error",u),t.on("error",u),n.on("end",l),n.on("close",l),t.on("close",l),t.emit("pipe",n),t};},{11:11,21:21,26:26,35:35,36:36,37:37,38:38}],42:[function(e,t,n){var r=e(39).Buffer,i=r.isEncoding||function(e){switch((e=""+e)&&e.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return !0;default:return !1}};function a(e){var t=function(e){if(!e)return "utf8";for(var t;;)switch(e){case"utf8":case"utf-8":return "utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return "utf16le";case"latin1":case"binary":return "latin1";case"base64":case"ascii":case"hex":return e;default:if(t)return;e=(""+e).toLowerCase(),t=!0;}}(e);if("string"!=typeof t&&(r.isEncoding===i||!i(e)))throw new Error("Unknown encoding: "+e);return t||e}function o(e){var t;switch(this.encoding=a(e),this.encoding){case"utf16le":this.text=l,this.end=d,t=4;break;case"utf8":this.fillLast=u,t=4;break;case"base64":this.text=f,this.end=c,t=3;break;default:return this.write=h,void(this.end=p)}this.lastNeed=0,this.lastTotal=0,this.lastChar=r.allocUnsafe(t);}function s(e){return e<=127?0:e>>5==6?2:e>>4==14?3:e>>3==30?4:e>>6==2?-1:-2}function u(e){var t=this.lastTotal-this.lastNeed,n=function(e,t){if(128!=(192&t[0]))return e.lastNeed=0,"ï¿½";if(1<e.lastNeed&&1<t.length){if(128!=(192&t[1]))return e.lastNeed=1,"ï¿½";if(2<e.lastNeed&&2<t.length&&128!=(192&t[2]))return e.lastNeed=2,"ï¿½"}}(this,e);return void 0!==n?n:this.lastNeed<=e.length?(e.copy(this.lastChar,t,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal)):(e.copy(this.lastChar,t,0,e.length),void(this.lastNeed-=e.length))}function l(e,t){if((e.length-t)%2!=0)return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=e[e.length-1],e.toString("utf16le",t,e.length-1);var n=e.toString("utf16le",t);if(n){var r=n.charCodeAt(n.length-1);if(55296<=r&&r<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=e[e.length-2],this.lastChar[1]=e[e.length-1],n.slice(0,-1)}return n}function d(e){var t=e&&e.length?this.write(e):"";if(this.lastNeed){var n=this.lastTotal-this.lastNeed;return t+this.lastChar.toString("utf16le",0,n)}return t}function f(e,t){var n=(e.length-t)%3;return 0==n?e.toString("base64",t):(this.lastNeed=3-n,this.lastTotal=3,1==n?this.lastChar[0]=e[e.length-1]:(this.lastChar[0]=e[e.length-2],this.lastChar[1]=e[e.length-1]),e.toString("base64",t,e.length-n))}function c(e){var t=e&&e.length?this.write(e):"";return this.lastNeed?t+this.lastChar.toString("base64",0,3-this.lastNeed):t}function h(e){return e.toString(this.encoding)}function p(e){return e&&e.length?this.write(e):""}(n.StringDecoder=o).prototype.write=function(e){if(0===e.length)return "";var t,n;if(this.lastNeed){if(void 0===(t=this.fillLast(e)))return "";n=this.lastNeed,this.lastNeed=0;}else n=0;return n<e.length?t?t+this.text(e,n):this.text(e,n):t||""},o.prototype.end=function(e){var t=e&&e.length?this.write(e):"";return this.lastNeed?t+"ï¿½":t},o.prototype.text=function(e,t){var n=function(e,t,n){var r=t.length-1;if(r<n)return 0;var i=s(t[r]);if(0<=i)return 0<i&&(e.lastNeed=i-1),i;if(--r<n||-2===i)return 0;if(0<=(i=s(t[r])))return 0<i&&(e.lastNeed=i-2),i;if(--r<n||-2===i)return 0;if(0<=(i=s(t[r])))return 0<i&&(2===i?i=0:e.lastNeed=i-3),i;return 0}(this,e,t);if(!this.lastNeed)return e.toString("utf8",t);this.lastTotal=n;var r=e.length-(n-this.lastNeed);return e.copy(this.lastChar,0,r),e.toString("utf8",t,r)},o.prototype.fillLast=function(e){if(this.lastNeed<=e.length)return e.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);e.copy(this.lastChar,this.lastTotal-this.lastNeed,0,e.length),this.lastNeed-=e.length;};},{39:39}],43:[function(u,e,l){(function(e,t){var r=u(25).nextTick,n=Function.prototype.apply,i=Array.prototype.slice,a={},o=0;function s(e,t){this._id=e,this._clearFn=t;}l.setTimeout=function(){return new s(n.call(setTimeout,window,arguments),clearTimeout)},l.setInterval=function(){return new s(n.call(setInterval,window,arguments),clearInterval)},l.clearTimeout=l.clearInterval=function(e){e.close();},s.prototype.unref=s.prototype.ref=function(){},s.prototype.close=function(){this._clearFn.call(window,this._id);},l.enroll=function(e,t){clearTimeout(e._idleTimeoutId),e._idleTimeout=t;},l.unenroll=function(e){clearTimeout(e._idleTimeoutId),e._idleTimeout=-1;},l._unrefActive=l.active=function(e){clearTimeout(e._idleTimeoutId);var t=e._idleTimeout;0<=t&&(e._idleTimeoutId=setTimeout(function(){e._onTimeout&&e._onTimeout();},t));},l.setImmediate="function"==typeof e?e:function(e){var t=o++,n=!(arguments.length<2)&&i.call(arguments,1);return a[t]=!0,r(function(){a[t]&&(n?e.apply(null,n):e.call(null),l.clearImmediate(t));}),t},l.clearImmediate="function"==typeof t?t:function(e){delete a[e];};}).call(this,u(43).setImmediate,u(43).clearImmediate);},{25:25,43:43}],44:[function(e,t,n){(function(n){function r(e){try{if(!n.localStorage)return}catch(e){return}var t=n.localStorage[e];return null!=t&&"true"===String(t).toLowerCase()}t.exports=function(e,t){if(r("noDeprecation"))return e;var n=!1;return function(){if(!n){if(r("throwDeprecation"))throw new Error(t);r("traceDeprecation")?console.trace(t):console.warn(t),n=!0;}return e.apply(this,arguments)}};}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{});},{}],45:[function(e,t,n){function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(n,"__esModule",{value:!0});var a=r(e(46)),h=r(e(54)),i=r(e(47)),o=1,p=2,g=3,_=4,E=5;function s(e){e=e||{};var t,n=this.context,s=(0, a.default)(n).getInstance(),u=e.settings,l=[],d=void 0,f=void 0,c=void 0;function r(e){return e&&e.bind?e.bind(window.console):window.console.log.bind(window.console)}function i(e,t){var n="",r=null;d&&(r=(new Date).getTime(),n+="["+(r-c)+"]"),f&&t&&t.getClassName&&(n+="["+t.getClassName()+"]",t.getType&&(n+="["+t.getType()+"]")),0<n.length&&(n+=" ");for(var i=arguments.length,a=Array(2<i?i-2:0),o=2;o<i;o++)a[o-2]=arguments[o];Array.apply(null,a).forEach(function(e){n+=e+" ";}),l[e]&&u.get().debug.logLevel>=e&&l[e](n),s.trigger(h.default.LOG,{message:n,level:e});}return t={getLogger:function(e){return {fatal:function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];i.apply(void 0,[o,this].concat(t));}.bind(e),error:function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];i.apply(void 0,[p,this].concat(t));}.bind(e),warn:function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];i.apply(void 0,[g,this].concat(t));}.bind(e),info:function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];i.apply(void 0,[_,this].concat(t));}.bind(e),debug:function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];i.apply(void 0,[E,this].concat(t));}.bind(e)}},setLogTimestampVisible:function(e){d=e;},setCalleeNameVisible:function(e){f=e;}},f=d=!0,c=(new Date).getTime(),"undefined"!=typeof window&&window.console&&(l[o]=r(window.console.error),l[p]=r(window.console.error),l[g]=r(window.console.warn),l[_]=r(window.console.info),l[E]=r(window.console.debug)),t}s.__dashjs_factory_name="Debug";var u=i.default.getSingletonFactory(s);u.LOG_LEVEL_NONE=0,u.LOG_LEVEL_FATAL=o,u.LOG_LEVEL_ERROR=p,u.LOG_LEVEL_WARNING=g,u.LOG_LEVEL_INFO=_,u.LOG_LEVEL_DEBUG=E,i.default.updateSingletonFactory(s.__dashjs_factory_name,u),n.default=u,t.exports=n.default;},{46:46,47:47,54:54}],46:[function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0});var r,i=e(47),a=(r=i)&&r.__esModule?r:{default:r};function o(){var a={};function o(e,n,r){var i=-1;return a[e]&&a[e].some(function(e,t){if(e&&e.callback===n&&(!r||r===e.scope))return i=t,!0}),i}return {on:function(n,e,t){var r,i=arguments.length<=3||void 0===arguments[3]?0:arguments[3];if(!n)throw new Error("event type cannot be null or undefined");if(!e||"function"!=typeof e)throw new Error("listener must be a function: "+e);0<=o(n,e,t)||(a[n]=a[n]||[],r={callback:e,scope:t,priority:i},a[n].some(function(e,t){if(e&&i>e.priority)return a[n].splice(t,0,r),!0})||a[n].push(r));},off:function(e,t,n){var r;e&&t&&a[e]&&((r=o(e,t,n))<0||(a[e][r]=null));},trigger:function(e,t){if(e&&a[e]){if((t=t||{}).hasOwnProperty("type"))throw new Error("'type' is a reserved word for event dispatching");t.type=e,a[e]=a[e].filter(function(e){return e}),a[e].forEach(function(e){return e&&e.callback.call(e.scope,t)});}},reset:function(){a={};}}}o.__dashjs_factory_name="EventBus";var s=a.default.getSingletonFactory(o);s.EVENT_PRIORITY_LOW=0,s.EVENT_PRIORITY_HIGH=5e3,a.default.updateSingletonFactory(o.__dashjs_factory_name,s),n.default=s,t.exports=n.default;},{47:47}],47:[function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0});var u,a,r,i,o=(u=void 0,a=[],r={},i={},u={extend:function(e,t,n,r){!r[e]&&t&&(r[e]={instance:t,override:n});},getSingletonInstance:s,setSingletonInstance:function(e,t,n){for(var r in a){var i=a[r];if(i.context===e&&i.name===t)return void(a[r].instance=n)}a.push({name:t,context:e,instance:n});},getSingletonFactory:function(n){var e=l(n.__dashjs_factory_name,r);return e||(e=function(e){var t=void 0;return void 0===e&&(e={}),{getInstance:function(){return (t=t||s(e,n.__dashjs_factory_name))||(t=f(n,e,arguments),a.push({name:n.__dashjs_factory_name,context:e,instance:t})),t}}},r[n.__dashjs_factory_name]=e),e},getSingletonFactoryByName:function(e){return l(e,r)},updateSingletonFactory:function(e,t){d(e,t,r);},getClassFactory:function(t){var e=l(t.__dashjs_factory_name,i);return e||(e=function(e){return void 0===e&&(e={}),{create:function(){return f(t,e,arguments)}}},i[t.__dashjs_factory_name]=e),e},getClassFactoryByName:function(e){return l(e,i)},updateClassFactory:function(e,t){d(e,t,i);}});function s(e,t){for(var n in a){var r=a[n];if(r.context===e&&r.name===t)return r.instance}return null}function l(e,t){return t[e]}function d(e,t,n){e in n&&(n[e]=t);}function f(e,t,n){var r=void 0,i=e.__dashjs_factory_name,a=t[i];if(a){var o=a.instance;if(!a.override)return o.apply({context:t,factory:u},n);for(var s in r=e.apply({context:t},n),o=o.apply({context:t,factory:u,parent:r},n))r.hasOwnProperty(s)&&(r[s]=o[s]);}else r=e.apply({context:t},n);return r.getClassName=function(){return i},r}n.default=o,t.exports=n.default;},{}],48:[function(e,t,n){function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}Object.defineProperty(n,"__esModule",{value:!0});var a=r(e(47)),o=r(e(49)),s=r(e(45)),u=r(e(108)),l=e(241);function d(){var e,t,n={debug:{logLevel:s.default.LOG_LEVEL_WARNING},streaming:{metricsMaxListDepth:1e3,abandonLoadTimeout:1e4,liveDelayFragmentCount:NaN,liveDelay:null,scheduleWhilePaused:!0,fastSwitchEnabled:!1,bufferPruningInterval:10,bufferToKeep:20,bufferAheadToKeep:80,jumpGaps:!0,smallGapLimit:1.5,stableBufferTime:12,bufferTimeAtTopQuality:30,bufferTimeAtTopQualityLongForm:60,longFormContentDurationThreshold:600,wallclockTimeUpdateInterval:50,lowLatencyEnabled:!1,keepProtectionMediaKeys:!1,useManifestDateHeaderTimeSource:!0,useSuggestedPresentationDelay:!0,useAppendWindowEnd:!0,manifestUpdateRetryInterval:100,liveCatchUpMinDrift:.02,liveCatchUpMaxDrift:0,liveCatchUpPlaybackRate:.5,liveCatchupLatencyThreshold:NaN,lastBitrateCachingInfo:{enabled:!0,ttl:36e4},lastMediaSettingsCachingInfo:{enabled:!0,ttl:36e4},cacheLoadThresholds:{video:50,audio:5},retryIntervals:(i(e={},l.HTTPRequest.MPD_TYPE,500),i(e,l.HTTPRequest.XLINK_EXPANSION_TYPE,500),i(e,l.HTTPRequest.MEDIA_SEGMENT_TYPE,1e3),i(e,l.HTTPRequest.INIT_SEGMENT_TYPE,1e3),i(e,l.HTTPRequest.BITSTREAM_SWITCHING_SEGMENT_TYPE,1e3),i(e,l.HTTPRequest.INDEX_SEGMENT_TYPE,1e3),i(e,l.HTTPRequest.OTHER_TYPE,1e3),i(e,"lowLatencyReductionFactor",10),e),retryAttempts:(i(t={},l.HTTPRequest.MPD_TYPE,3),i(t,l.HTTPRequest.XLINK_EXPANSION_TYPE,1),i(t,l.HTTPRequest.MEDIA_SEGMENT_TYPE,3),i(t,l.HTTPRequest.INIT_SEGMENT_TYPE,3),i(t,l.HTTPRequest.BITSTREAM_SWITCHING_SEGMENT_TYPE,3),i(t,l.HTTPRequest.INDEX_SEGMENT_TYPE,3),i(t,l.HTTPRequest.OTHER_TYPE,3),i(t,"lowLatencyMultiplyFactor",5),t),abr:{movingAverageMethod:u.default.MOVING_AVERAGE_SLIDING_WINDOW,ABRStrategy:u.default.ABR_STRATEGY_DYNAMIC,bandwidthSafetyFactor:.9,useDefaultABRRules:!0,useBufferOccupancyABR:!1,useDeadTimeLatency:!0,limitBitrateByPortal:!1,usePixelRatioInLimitBitrateByPortal:!1,maxBitrate:{audio:-1,video:-1},minBitrate:{audio:-1,video:-1},maxRepresentationRatio:{audio:1,video:1},initialBitrate:{audio:-1,video:-1},initialRepresentationRatio:{audio:-1,video:-1},autoSwitchBitrate:{audio:!0,video:!0}},cmcd:{enabled:!1,sid:null,cid:null,did:null}}},r=o.default.clone(n);return {get:function(){return r},update:function(e){"object"==typeof e&&!function e(t,n,r){for(var i in t)t.hasOwnProperty(i)&&n.hasOwnProperty(i)&&("object"==typeof t[i]&&null!==t[i]?e(t[i],n[i],r.slice()+i+"."):n[i]=o.default.clone(t[i]));}(e,r,"");},reset:function(){r=o.default.clone(n);}}}d.__dashjs_factory_name="Settings";var f=a.default.getSingletonFactory(d);n.default=f,t.exports=n.default;},{108:108,241:241,45:45,47:47,49:49}],49:[function(e,t,n){function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r);}}Object.defineProperty(n,"__esModule",{value:!0});var i=(function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}(o,null,[{key:"mixin",value:function(e,t,n){var r=void 0,i={};if(e)for(var a in t)t.hasOwnProperty(a)&&(r=t[a],a in e&&(e[a]===r||a in i&&i[a]===r)||("object"==typeof e[a]&&null!==e[a]?e[a]=o.mixin(e[a],r,n):e[a]=n(r)));return e}},{key:"clone",value:function(e){if(!e||"object"!=typeof e)return e;var t=void 0;if(e instanceof Array){t=[];for(var n=0,r=e.length;n<r;++n)n in e&&t.push(o.clone(e[n]));}else t={};return o.mixin(t,e,o.clone)}},{key:"addAditionalQueryParameterToUrl",value:function(n,e){try{var t=function(){if(!e||0===e.length)return {v:n};var t=new URL(n);return e.forEach(function(e){e.key&&e.value&&t.searchParams.set(e.key,e.value);}),{v:t.href}}();if("object"==typeof t)return t.v}catch(e){return n}}},{key:"generateUuid",value:function(){var n=(new Date).getTime();return "xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){var t=(n+16*Math.random())%16|0;return n=Math.floor(n/16),("x"==e?t:3&t|8).toString(16)})}},{key:"generateHashCode",value:function(e){var t=0;if(0===e.length)return t;for(var n=0;n<e.length;n++)t=(t<<5)-t+e.charCodeAt(n),t|=0;return t}}]),o);function o(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o);}n.default=i,t.exports=n.default;},{}],50:[function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.getVersionString=function(){return r};var r="3.1.2";},{}],51:[function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0});var r=function(e,t,n){for(var r=!0;r;){var i=e,a=t,o=n,r=!1;null===i&&(i=Function.prototype);var s=Object.getOwnPropertyDescriptor(i,a);if(void 0!==s){if("value"in s)return s.value;var u=s.get;if(void 0===u)return;return u.call(o)}var l=Object.getPrototypeOf(i);if(null===l)return;e=l,t=a,n=o,r=!0,s=l=void 0;}};var i,a=e(52);function o(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),r(Object.getPrototypeOf(o.prototype),"constructor",this).call(this),this.MANIFEST_LOADER_PARSING_FAILURE_ERROR_CODE=10,this.MANIFEST_LOADER_LOADING_FAILURE_ERROR_CODE=11,this.XLINK_LOADER_LOADING_FAILURE_ERROR_CODE=12,this.SEGMENTS_UPDATE_FAILED_ERROR_CODE=13,this.SEGMENTS_UNAVAILABLE_ERROR_CODE=14,this.SEGMENT_BASE_LOADER_ERROR_CODE=15,this.TIME_SYNC_FAILED_ERROR_CODE=16,this.FRAGMENT_LOADER_LOADING_FAILURE_ERROR_CODE=17,this.FRAGMENT_LOADER_NULL_REQUEST_ERROR_CODE=18,this.URL_RESOLUTION_FAILED_GENERIC_ERROR_CODE=19,this.APPEND_ERROR_CODE=20,this.REMOVE_ERROR_CODE=21,this.DATA_UPDATE_FAILED_ERROR_CODE=22,this.CAPABILITY_MEDIASOURCE_ERROR_CODE=23,this.CAPABILITY_MEDIAKEYS_ERROR_CODE=24,this.DOWNLOAD_ERROR_ID_MANIFEST_CODE=25,this.DOWNLOAD_ERROR_ID_SIDX_CODE=26,this.DOWNLOAD_ERROR_ID_CONTENT_CODE=27,this.DOWNLOAD_ERROR_ID_INITIALIZATION_CODE=28,this.DOWNLOAD_ERROR_ID_XLINK_CODE=29,this.MANIFEST_ERROR_ID_CODEC_CODE=30,this.MANIFEST_ERROR_ID_PARSE_CODE=31,this.MANIFEST_ERROR_ID_NOSTREAMS_CODE=32,this.TIMED_TEXT_ERROR_ID_PARSE_CODE=33,this.MANIFEST_ERROR_ID_MULTIPLEXED_CODE=34,this.MEDIASOURCE_TYPE_UNSUPPORTED_CODE=35,this.MANIFEST_LOADER_PARSING_FAILURE_ERROR_MESSAGE="parsing failed for ",this.MANIFEST_LOADER_LOADING_FAILURE_ERROR_MESSAGE="Failed loading manifest: ",this.XLINK_LOADER_LOADING_FAILURE_ERROR_MESSAGE="Failed loading Xlink element: ",this.SEGMENTS_UPDATE_FAILED_ERROR_MESSAGE="Segments update failed",this.SEGMENTS_UNAVAILABLE_ERROR_MESSAGE="no segments are available yet",this.SEGMENT_BASE_LOADER_ERROR_MESSAGE="error loading segments",this.TIME_SYNC_FAILED_ERROR_MESSAGE="Failed to synchronize time",this.FRAGMENT_LOADER_NULL_REQUEST_ERROR_MESSAGE="request is null",this.URL_RESOLUTION_FAILED_GENERIC_ERROR_MESSAGE="Failed to resolve a valid URL",this.APPEND_ERROR_MESSAGE="chunk is not defined",this.REMOVE_ERROR_MESSAGE="buffer is not defined",this.DATA_UPDATE_FAILED_ERROR_MESSAGE="Data update failed",this.CAPABILITY_MEDIASOURCE_ERROR_MESSAGE="mediasource is not supported",this.CAPABILITY_MEDIAKEYS_ERROR_MESSAGE="mediakeys is not supported",this.TIMED_TEXT_ERROR_MESSAGE_PARSE="parsing error :",this.MEDIASOURCE_TYPE_UNSUPPORTED_MESSAGE="Error creating source buffer of type : ";}var s=new(function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t);}(o,((i=a)&&i.__esModule?i:{default:i}).default),o);n.default=s,t.exports=n.default;},{52:52}],52:[function(e,t,n){function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r);}}Object.defineProperty(n,"__esModule",{value:!0});var i=(function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}(a,[{key:"extend",value:function(e,t){if(e){var n=!!t&&t.override,r=!!t&&t.publicOnly;for(var i in e)!e.hasOwnProperty(i)||this[i]&&!n||r&&-1===e[i].indexOf("public_")||(this[i]=e[i]);}}}]),a);function a(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a);}n.default=i,t.exports=n.default;},{}],53:[function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0});var r=function(e,t,n){for(var r=!0;r;){var i=e,a=t,o=n,r=!1;null===i&&(i=Function.prototype);var s=Object.getOwnPropertyDescriptor(i,a);if(void 0!==s){if("value"in s)return s.value;var u=s.get;if(void 0===u)return;return u.call(o)}var l=Object.getPrototypeOf(i);if(null===l)return;e=l,t=a,n=o,r=!0,s=l=void 0;}};var i,a=e(55),o=(function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t);}(s,((i=a)&&i.__esModule?i:{default:i}).default),s);function s(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,s),r(Object.getPrototypeOf(s.prototype),"constructor",this).call(this),this.BUFFERING_COMPLETED="bufferingCompleted",this.BUFFER_CLEARED="bufferCleared",this.BUFFER_LEVEL_UPDATED="bufferLevelUpdated",this.BYTES_APPENDED="bytesAppended",this.BYTES_APPENDED_END_FRAGMENT="bytesAppendedEndFragment",this.CHECK_FOR_EXISTENCE_COMPLETED="checkForExistenceCompleted",this.CURRENT_TRACK_CHANGED="currentTrackChanged",this.DATA_UPDATE_COMPLETED="dataUpdateCompleted",this.DATA_UPDATE_STARTED="dataUpdateStarted",this.INBAND_EVENTS="inbandEvents",this.INITIALIZATION_LOADED="initializationLoaded",this.INIT_FRAGMENT_LOADED="initFragmentLoaded",this.INIT_FRAGMENT_NEEDED="initFragmentNeeded",this.INTERNAL_MANIFEST_LOADED="internalManifestLoaded",this.ORIGINAL_MANIFEST_LOADED="originalManifestLoaded",this.LIVE_EDGE_SEARCH_COMPLETED="liveEdgeSearchCompleted",this.LOADING_COMPLETED="loadingCompleted",this.LOADING_PROGRESS="loadingProgress",this.LOADING_DATA_PROGRESS="loadingDataProgress",this.LOADING_ABANDONED="loadingAborted",this.MANIFEST_UPDATED="manifestUpdated",this.MEDIA_FRAGMENT_LOADED="mediaFragmentLoaded",this.MEDIA_FRAGMENT_NEEDED="mediaFragmentNeeded",this.QUOTA_EXCEEDED="quotaExceeded",this.REPRESENTATION_UPDATE_STARTED="representationUpdateStarted",this.REPRESENTATION_UPDATE_COMPLETED="representationUpdateCompleted",this.SEGMENTS_LOADED="segmentsLoaded",this.SERVICE_LOCATION_BLACKLIST_ADD="serviceLocationBlacklistAdd",this.SERVICE_LOCATION_BLACKLIST_CHANGED="serviceLocationBlacklistChanged",this.SOURCEBUFFER_REMOVE_COMPLETED="sourceBufferRemoveCompleted",this.STREAMS_COMPOSED="streamsComposed",this.STREAM_BUFFERING_COMPLETED="streamBufferingCompleted",this.STREAM_COMPLETED="streamCompleted",this.TEXT_TRACKS_QUEUE_INITIALIZED="textTracksQueueInitialized",this.TIME_SYNCHRONIZATION_COMPLETED="timeSynchronizationComplete",this.URL_RESOLUTION_FAILED="urlResolutionFailed",this.VIDEO_CHUNK_RECEIVED="videoChunkReceived",this.WALLCLOCK_TIME_UPDATED="wallclockTimeUpdated",this.XLINK_ELEMENT_LOADED="xlinkElementLoaded",this.XLINK_READY="xlinkReady",this.SEGMENTBASE_INIT_REQUEST_NEEDED="segmentBaseInitRequestNeeded",this.SEGMENTBASE_SEGMENTSLIST_REQUEST_NEEDED="segmentBaseSegmentsListRequestNeeded",this.SEEK_TARGET="seekTarget",this.DYNAMIC_STREAM_COMPLETED="dynamicStreamCompleted";}n.default=o,t.exports=n.default;},{55:55}],54:[function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0});var r=function(e,t,n){for(var r=!0;r;){var i=e,a=t,o=n,r=!1;null===i&&(i=Function.prototype);var s=Object.getOwnPropertyDescriptor(i,a);if(void 0!==s){if("value"in s)return s.value;var u=s.get;if(void 0===u)return;return u.call(o)}var l=Object.getPrototypeOf(i);if(null===l)return;e=l,t=a,n=o,r=!0,s=l=void 0;}};var i,a=e(53);function o(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),r(Object.getPrototypeOf(o.prototype),"constructor",this).apply(this,arguments);}var s=new(function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t);}(o,((i=a)&&i.__esModule?i:{default:i}).default),o);n.default=s,t.exports=n.default;},{53:53}],55:[function(e,t,n){function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r);}}Object.defineProperty(n,"__esModule",{value:!0});var i=(function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}(a,[{key:"extend",value:function(e,t){if(e){var n=!!t&&t.override,r=!!t&&t.publicOnly;for(var i in e)!e.hasOwnProperty(i)||this[i]&&!n||r&&-1===e[i].indexOf("public_")||(this[i]=e[i]);}}}]),a);function a(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a);}n.default=i,t.exports=n.default;},{}],56:[function(e,t,n){function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(n,"__esModule",{value:!0});var h=r(e(61)),p=r(e(93)),g=r(e(89)),_=r(e(95)),E=r(e(88)),D=r(e(86)),i=r(e(47)),M=r(e(65));function a(){var e,m=void 0,v=void 0,y=void 0,u=void 0,T=void 0,i=void 0,t=this.context;function o(e,t,n){var r,i=m.getAdaptationsForType(v[0].mpd.manifest,e,t);if(!i||0===i.length)return null;if(1<i.length&&n){var a=l(n,t);if(u[n.id]&&u[n.id][t])for(var o=0,s=i.length;o<s;o++)if(u[n.id][t].isMediaInfoEqual(a[o]))return i[o];for(o=0,s=i.length;o<s;o++)if(r=i[o],m.getRolesForAdaptation(r).filter(function(e){return e.value===h.default.MAIN})[0])return i[o]}return i[0]}function l(e,t,n){var r,i=v,a=n,o=[],s=void 0,u=void 0,l=void 0,d=void 0,f=void 0,c=void 0;if(a)b(),i=S(a);else {if(!(0<v.length))return o;a=v[0].mpd.manifest;}var h=A(e,i);h&&(c=h.id);var p=m.getAdaptationsForType(a,e?e.index:null,t!==T.EMBEDDED_TEXT?t:T.VIDEO);if(!p||0===p.length)return o;for(y[c]=y[c]||m.getAdaptationsForPeriod(h),d=0,r=p.length;d<r;d++)if(s=p[d],l=m.getIndexForAdaptation(s,a,e.index),u=I(y[c][l]),t===T.EMBEDDED_TEXT){for(var g=u.accessibility.length,f=0;f<g;f++)if(u){var _=u.accessibility[f];if(0===_.indexOf("cea-608:")){var E=_.substring(8).split(";");if("CC"===E[0].substring(0,2))for(f=0;f<E.length;f++)R(u=u||I.call(this,y[c][l]),E[f].substring(0,3),E[f].substring(4)),o.push(u),u=null;else for(f=0;f<E.length;f++)R(u=u||I.call(this,y[c][l]),"CC"+(f+1),E[f]),o.push(u),u=null;}else 0===_.indexOf("cea-608")&&(R(u,T.CC1,"eng"),o.push(u),u=null);}}else t===T.IMAGE?(u.type=T.IMAGE,o.push(u),u=null):u&&o.push(u);return o}function S(e){var t=n(e);return m.getRegularPeriods(t)}function n(e){var t=a(e);return m.getMpd(t)}function r(){v=[],y={},u={};}function a(e){return e||(0<v.length?v[0].mpd.manifest:null)}function s(e){return e&&e.streamInfo&&void 0!==e.streamInfo.id&&y[e.streamInfo.id]?y[e.streamInfo.id][e.index]:null}function A(e,t){for(var n=t.length,r=0;r<n;r++){var i=t[r];if(e&&e.id===i.id)return i}return null}function I(e){if(!e)return null;var t,r=new g.default,n=e.period.mpd.manifest.Period_asArray[e.period.index].AdaptationSet_asArray[e.index];return r.id=e.id,r.index=e.index,r.type=e.type,r.streamInfo=d(e.period),r.representationCount=m.getRepresentationCount(n),r.labels=m.getLabelsForAdaptation(n),r.lang=m.getLanguageForAdaptation(n),t=m.getViewpointForAdaptation(n),r.viewpoint=t?t.value:void 0,r.accessibility=m.getAccessibilityForAdaptation(n).map(function(e){var t=e.value,n=t;return e.schemeIdUri&&0<=e.schemeIdUri.search("cea-608")&&void 0!==i&&(n=t?"cea-608:"+t:"cea-608",r.embeddedCaptions=!0),n}),r.audioChannelConfiguration=m.getAudioChannelConfigurationForAdaptation(n).map(function(e){return e.value}),0===r.audioChannelConfiguration.length&&Array.isArray(n.Representation_asArray)&&0<n.Representation_asArray.length&&(r.audioChannelConfiguration=m.getAudioChannelConfigurationForRepresentation(n.Representation_asArray[0]).map(function(e){return e.value})),r.roles=m.getRolesForAdaptation(n).map(function(e){return e.value}),r.codec=m.getCodec(n),r.mimeType=m.getMimeType(n),r.contentProtection=m.getContentProtectionData(n),r.bitrateList=m.getBitrateListForAdaptation(n),r.contentProtection&&r.contentProtection.forEach(function(e){e.KID=m.getKID(e);}),r.isText=m.getIsTextTrack(r.mimeType),r.supplementalProperties=m.getSupplementalPropperties(n),r}function R(e,t,n){e.id=t,e.index=100+parseInt(t.substring(2,3)),e.type=T.EMBEDDED_TEXT,e.codec="cea-608-in-SEI",e.isText=!0,e.isEmbedded=!0,e.lang=n,e.roles=["caption"];}function d(e){var t,n,r=new _.default;return r.id=e.id,r.index=e.index,r.start=e.start,r.duration=e.duration,r.manifestInfo=(t=e.mpd,(n=new E.default).DVRWindowSize=t.timeShiftBufferDepth,n.loadedTime=t.manifest.loadedTime,n.availableFrom=t.availabilityStartTime,n.minBufferTime=t.manifest.minBufferTime,n.maxFragmentDuration=t.maxSegmentDuration,n.duration=m.getDuration(t.manifest),n.isDynamic=m.getIsDynamic(t.manifest),n.serviceDescriptions=m.getServiceDescriptions(t.manifest),n.protocol=t.manifest.protocol,n),r.isLast=1===e.mpd.manifest.Period_asArray.length||Math.abs(r.start+r.duration-r.manifestInfo.duration)<1,r}function b(){if(!T)throw new Error("setConfig function has to be called previously")}function f(e){return 0<v.length?v[0].mpd.manifest.Period_asArray[e]:null}function c(e,t,n){var r=void 0,i=void 0,a=void 0,o=void 0,s=void 0;if(e)for(r=e.AdaptationSet_asArray,o=0;o<r.length;o+=1)for(a=r[o].Representation_asArray,s=0;s<a.length;s+=1)if(t===(i=a[s]).id)return n?s:i;return null}return e={getBandwidthForRepresentation:function(e,t){var n;return (n=c(f(t),e))?n.bandwidth:null},getIndexForRepresentation:function(e,t){var n,r=f(t);return null!==(n=c(r,e,!0))?n:-1},getMaxIndexForBufferType:function(e,t){return function(e,t){var n,r=void 0,i=void 0,a=void 0;if(!e||!t)return -1;for(n=e.AdaptationSet_asArray,a=0;a<n.length;a+=1)if(r=n[a],i=r.Representation_asArray,m.getIsTypeOf(r,t))return i.length;return -1}(f(t),e)},convertDataToRepresentationInfo:function(e){if(e){var t=new p.default,n=e.adaptation.period.mpd.manifest.Period_asArray[e.adaptation.period.index].AdaptationSet_asArray[e.adaptation.index],r=m.getRepresentationFor(e.index,n);return t.id=e.id,t.quality=e.index,t.bandwidth=m.getBandwidth(r),t.DVRWindow=e.segmentAvailabilityRange,t.fragmentDuration=e.segmentDuration||(e.segments&&0<e.segments.length?e.segments[0].duration:NaN),t.MSETimeOffset=e.MSETimeOffset,t.useCalculatedLiveEdgeTime=e.useCalculatedLiveEdgeTime,t.mediaInfo=I(e.adaptation),t}return null},getDataForMedia:s,getStreamsInfo:function(e,t){var n=[],r=v;if(e&&(b(),r=S(e)),0<r.length){(!t||t>r.length)&&(t=r.length);for(var i=0;i<t;i++)n.push(d(r[i]));}return n},getMediaInfoForType:function(e,t){if(0===v.length||!e)return null;var n=A(e,v);if(!n)return null;var r=n.id;y[r]=y[r]||m.getAdaptationsForPeriod(n);var i=o(e.index,t,e);if(!i)return null;var a=m.getIndexForAdaptation(i,v[0].mpd.manifest,e.index);return I(y[r][a])},getAllMediaInfoForType:l,getAdaptationForType:o,getRealAdaptation:function(e,t){var n=void 0,r=A(e,v),i=t?t.id:null;return 0<v.length&&r&&(n=i?m.getAdaptationForId(i,v[0].mpd.manifest,r.index):m.getAdaptationForIndex(t?t.index:null,v[0].mpd.manifest,r.index)),n},getVoRepresentations:function(e){var t=s(e);return m.getRepresentationsForAdaptation(t)},getEventsFor:function(e,t){var n,r=[];return 0<v.length&&(n=v[0].mpd.manifest,e instanceof _.default?r=m.getEventsForPeriod(A(e,v)):e instanceof g.default?r=m.getEventStreamForAdaptationSet(n,s(e)):e instanceof p.default&&(r=m.getEventStreamForRepresentation(n,t))),r},getEvent:function(e,t,n){if(!e||!t)return null;var r=new D.default,i=e.scheme_id_uri,a=e.value,o=e.timescale,s=e.presentation_time_delta,u=e.event_duration,l=e.id,d=e.message_data,f=n*o+s;return t[i+"/"+a]?(r.eventStream=t[i+"/"+a],r.eventStream.value=a,r.eventStream.timescale=o,r.duration=u,r.id=l,r.calculatedPresentationTime=f,r.messageData=d,r.presentationTimeDelta=s,r):null},setConfig:function(e){e&&(e.constants&&(T=e.constants),e.cea608parser&&(i=e.cea608parser),e.errHandler&&m.setConfig({errHandler:e.errHandler}),e.BASE64&&m.setConfig({BASE64:e.BASE64}));},updatePeriods:function(e){if(!e)return null;b(),v=S(e),y={};},getUseCalculatedLiveEdgeTimeForMediaInfo:function(e){var t=s(e);return m.getUseCalculatedLiveEdgeTimeForAdaptation(t)},getIsTextTrack:function(e){return m.getIsTextTrack(e)},getUTCTimingSources:function(){var e=a();return m.getUTCTimingSources(e)},getSuggestedPresentationDelay:function(){var e=0<v.length?v[0].mpd:null;return m.getSuggestedPresentationDelay(e)},getAvailabilityStartTime:function(e){var t=n(e);return m.getAvailabilityStartTime(t)},getIsDynamic:function(e){var t=a(e);return m.getIsDynamic(t)},getDuration:function(e){var t=a(e);return m.getDuration(t)},getRegularPeriods:S,getLocation:function(e){return m.getLocation(e)},getManifestUpdatePeriod:function(e){var t=arguments.length<=1||void 0===arguments[1]?0:arguments[1];return m.getManifestUpdatePeriod(e,t)},getIsDVB:function(e){return m.hasProfile(e,"urn:dvb:dash:profile:dvb-dash:2014")},getBaseURLsFromElement:function(e){return m.getBaseURLsFromElement(e)},getRepresentationSortFunction:function(){return m.getRepresentationSortFunction()},getCodec:function(e,t,n){return m.getCodec(e,t,n)},getVoAdaptations:function(){return y},getVoPeriods:function(){return v},setCurrentMediaInfo:function(e,t,n){u[e]=u[e]||{},u[e][t]=u[e][t]||{},u[e][t]=n;},reset:r},m=(0, M.default)(t).getInstance(),r(),e}a.__dashjs_factory_name="DashAdapter",n.default=i.default.getSingletonFactory(a),t.exports=n.default;},{47:47,61:61,65:65,86:86,88:88,89:89,93:93,95:95}],57:[function(e,t,n){function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(n,"__esModule",{value:!0});var w=r(e(227)),P=e(241),i=r(e(47)),L=e(80),x=r(e(64));function a(e){e=e||{};var t=this.context,f=e.eventBus,c=e.events,n=e.debug,l=e.dashConstants,o=e.urlUtils,h=e.type,r=e.streamInfo,p=e.timelineConverter,g=e.dashMetrics,s=e.baseURLController,i=void 0,d=void 0,_=void 0,E=void 0,m=void 0,a=void 0,v=void 0,u=void 0,y=void 0,T=void 0;function S(){return h}function A(){_=-1,E=null;}function I(){A(),a=0,y=T=m=null;}function R(e,t,n){var r=s.resolve(n.path),i=void 0,a=void 0;return r&&t!==r.url&&o.isRelative(t)?(i=r.url,a=r.serviceLocation,t&&(i=o.resolve(t,i))):i=t,!o.isRelative(i)&&(e.url=i,e.serviceLocation=a,1)}function b(e){var t,n,r;e.sender.getType()===h&&(t=e.representation,n=t.hasInitialization(),r=t.hasSegments(),n&&r?f.trigger(c.REPRESENTATION_UPDATE_COMPLETED,{sender:i,representation:t}):T.update(t,h,y,n,r));}function D(e,t){if(null==t)return null;var n=new w.default,r=t.representation,i=r.adaptation.period.mpd.manifest.Period_asArray[r.adaptation.period.index].AdaptationSet_asArray[r.adaptation.index].Representation_asArray[r.index].bandwidth,a=t.media,a=(0, L.replaceTokenForTemplate)(a,"Number",t.replacementNumber);return a=(0, L.replaceTokenForTemplate)(a,"Time",t.replacementTime),a=(0, L.replaceTokenForTemplate)(a,"Bandwidth",i),a=(0, L.replaceIDForTemplate)(a,r.id),a=(0, L.unescapeDollarsInTemplate)(a),n.mediaType=h,n.type=P.HTTPRequest.MEDIA_SEGMENT_TYPE,n.range=t.mediaRange,n.startTime=t.presentationStartTime,n.duration=t.duration,n.timescale=r.timescale,n.availabilityStartTime=t.availabilityStartTime,n.availabilityEndTime=t.availabilityEndTime,n.wallStartTime=t.wallStartTime,n.quality=r.index,n.index=t.availabilityIdx,n.mediaInfo=e,n.adaptationIndex=r.adaptation.index,n.representationId=r.id,R(n,a,r)?n:void 0}function M(e){var t,n,r=!1;return e&&(v?u?r=!0:E&&(t=parseFloat((E.presentationStartTime-e.adaptation.period.start).toFixed(5)),n=0<E.duration?t+1.5*E.duration:t,r=e.adaptation.period.duration<=n):_>=e.availableSegmentsNumber&&(r=!0)),r}function N(e){var t=e.representation;t.segments&&f.trigger(c.REPRESENTATION_UPDATE_COMPLETED,{sender:this,representation:t});}function C(e){if(!e.error&&h===e.mediaType){for(var t,n,r=e.segments,i=e.representation,a=[],o=0,s=void 0,u=void 0,l=void 0,s=0,d=r?r.length:0;s<d;s++)u=r[s],(l=(0, L.getTimeBasedSegment)(p,v,i,u.startTime,u.duration,u.timescale,u.media,u.mediaRange,o))&&(a.push(l),l=null,o++);0<a.length&&(i.segmentAvailabilityRange={start:a[0].presentationStartTime,end:a[a.length-1].presentationStartTime},i.availableSegmentsNumber=a.length,i.segments=a,v&&(t=a[a.length-1].presentationStartTime-8,n=t,p.setExpectedLiveEdge(n),g.updateManifestUpdateInfo({presentationStartTime:n}))),i.hasInitialization()&&f.trigger(c.REPRESENTATION_UPDATE_COMPLETED,{sender:this,representation:i});}}function O(){d.debug("Dynamic stream complete"),u=!0;}return i={initialize:function(e){v=e,u=!1,T.initialize(e);},getType:S,getStreamInfo:function(){return r},getInitRequest:function(e,t){return t?function(e,t,n){var r=new w.default,i=t.adaptation.period,a=i.start;if(r.mediaType=n,r.type=P.HTTPRequest.INIT_SEGMENT_TYPE,r.range=t.range,r.availabilityStartTime=p.calcAvailabilityStartTimeFromPresentationTime(a,i.mpd,v),r.availabilityEndTime=p.calcAvailabilityEndTimeFromPresentationTime(a+i.duration,i.mpd,v),r.quality=t.index,r.mediaInfo=e,r.representationId=t.id,R(r,t.initialization,t))return r.url=(0, L.replaceTokenForTemplate)(r.url,"Bandwidth",t.bandwidth),r}(e,t,h):null},getRequestForSegment:D,getSegmentRequestForTime:function(e,t,n,r){var i=null;if(!t||!t.segmentInfoType)return i;var a=_,o=!!r&&r.keepIdx,s=!(!r||!r.ignoreIsFinished);m!==n&&(m=n,d.debug("Getting the request for time : "+n));var u=T.getSegmentByTime(t,n);return u?(_=u.availabilityIdx,E=u,d.debug("Index for time "+n+" is "+_),i=D(e,u)):!s&&M(t)&&((i=new w.default).action=w.default.ACTION_COMPLETE,i.index=_-1,i.mediaType=h,i.mediaInfo=e,d.debug("Signal complete in getSegmentRequestForTime")),o&&0<=a&&(_=t.segmentInfoType===l.SEGMENT_TIMELINE&&v?_:a),i},getNextSegmentRequest:function(e,t){var n=null;if(!t||!t.segmentInfoType)return null;m=null;var r=_+1;d.debug("Getting the next request at index: "+r);var i=T.getSegmentByIndex(t,r,E?E.mediaStartTime:-1);return i||isFinite(t.adaptation.period.duration)||u?(_=i?(n=D(e,i),i.availabilityIdx):v?r-1:r,i?E=i:M(t)&&((n=new w.default).action=w.default.ACTION_COMPLETE,n.index=_-1,n.mediaType=h,n.mediaInfo=e,d.debug("Signal complete")),n):(d.debug("No segment found at index: "+r+". Wait for next loop"),null)},setCurrentTime:function(e){a=e;},getCurrentTime:function(){return a},setCurrentIndex:function(e){_=e;},getCurrentIndex:function(){return _},isMediaFinished:M,reset:function(){I(),f.off(c.INITIALIZATION_LOADED,N,i),f.off(c.SEGMENTS_LOADED,C,i),f.off(c.REPRESENTATION_UPDATE_STARTED,b,i),f.off(c.DYNAMIC_STREAM_COMPLETED,O,i);},resetIndex:A,setMimeType:function(e){y=e;}},d=n.getLogger(i),I(),T=(0, x.default)(t).create(e),f.on(c.INITIALIZATION_LOADED,N,i),f.on(c.SEGMENTS_LOADED,C,i),f.on(c.REPRESENTATION_UPDATE_STARTED,b,i),f.on(c.DYNAMIC_STREAM_COMPLETED,O,i),i}a.__dashjs_factory_name="DashHandler",n.default=i.default.getClassFactory(a),t.exports=n.default;},{227:227,241:241,47:47,64:64,80:80}],58:[function(e,t,n){function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(n,"__esModule",{value:!0});var f=r(e(108)),c=e(241),i=r(e(47)),h=r(e(109)),p=r(e(78)),g=r(e(152)),_=e(243);function a(e){e=e||{};var t,n=this.context,i=void 0,a=void 0,o=void 0,s=e.metricsModel;function u(e){var t=s.getMetricsFor(e,!0);if(!t)return null;var n=t.HttpList,r=null,i=void 0;if(!n||n.length<=0)return null;for(i=n.length-1;0<=i;){if(n[i].responsecode){r=n[i];break}i--;}return r}function l(e){var t=s.getMetricsFor(e,!0);return t&&t.HttpList?t.HttpList:[]}function r(e,t){if(!e)return null;var n=e[t];return n&&0!==n.length?n[n.length-1]:null}function d(e){var t={};if(!e)return t;for(var n=e.trim().split("\r\n"),r=0,i=n.length;r<i;r++){var a=n[r],o=a.indexOf(": ");0<o&&(t[a.substring(0,o)]=a.substring(o+2));}return t}return t={getCurrentRepresentationSwitch:function(e){return r(s.getMetricsFor(e,!0),h.default.TRACK_SWITCH)},getCurrentBufferState:function(e){return r(s.getMetricsFor(e,!0),h.default.BUFFER_STATE)},getCurrentBufferLevel:function(e){var t=r(s.getMetricsFor(e,!0),h.default.BUFFER_LEVEL);return t?p.default.round10(t.level/1e3,-3):0},getCurrentHttpRequest:u,getHttpRequests:l,getCurrentDroppedFrames:function(){return r(s.getMetricsFor(f.default.VIDEO,!0),h.default.DROPPED_FRAMES)},getCurrentSchedulingInfo:function(e){return r(s.getMetricsFor(e,!0),h.default.SCHEDULING_INFO)},getCurrentDVRInfo:function(e){return r(e?s.getMetricsFor(e,!0):s.getMetricsFor(f.default.VIDEO,!0)||s.getMetricsFor(f.default.AUDIO,!0),h.default.DVR_INFO)},getCurrentManifestUpdate:function(){return r(s.getMetricsFor(f.default.STREAM),h.default.MANIFEST_UPDATE)},getLatestFragmentRequestHeaderValueByID:function(e,t){var n={},r=u(e);return r&&(n=d(r._responseHeaders)),void 0===n[t]?null:n[t]},getLatestMPDRequestHeaderValueByID:function(e){for(var t,n={},r=void 0,i=void 0,i=(t=l(f.default.STREAM)).length-1;0<=i;i--)if((r=t[i]).type===c.HTTPRequest.MPD_TYPE){n=d(r._responseHeaders);break}return void 0===n[e]?null:n[e]},addRepresentationSwitch:function(e,t,n,r,i){s.addRepresentationSwitch(e,t,n,r,i);},addDVRInfo:function(e,t,n,r){s.addDVRInfo(e,t,n,r);},updateManifestUpdateInfo:function(e){var t=this.getCurrentManifestUpdate();s.updateManifestUpdateInfo(t,e);},addManifestUpdateStreamInfo:function(e){var t;e&&(t=this.getCurrentManifestUpdate(),s.addManifestUpdateStreamInfo(t,e.id,e.index,e.start,e.duration));},addManifestUpdateRepresentationInfo:function(e,t){var n;e&&(n=this.getCurrentManifestUpdate(),s.addManifestUpdateRepresentationInfo(n,e.id,e.index,e.streamIndex,t,e.presentationTimeOffset,e.startNumber,e.fragmentInfoType));},addManifestUpdate:function(e){s.addManifestUpdate(f.default.STREAM,e.type,e.requestStartDate,e.requestEndDate);},addHttpRequest:function(e,t,n,r,i){s.addHttpRequest(e.mediaType,null,e.type,e.url,e.quality,t,e.serviceLocation||null,e.range||null,e.requestStartDate,e.firstByteDate,e.requestEndDate,n,e.duration,r,i);},addSchedulingInfo:function(e,t){s.addSchedulingInfo(e.mediaType,new Date,e.type,e.startTime,e.availabilityStartTime,e.duration,e.quality,e.range,t);},addRequestsQueue:function(e,t,n){s.addRequestsQueue(e,t,n);},addBufferLevel:function(e,t,n){s.addBufferLevel(e,t,n);},addBufferState:function(e,t,n){s.addBufferState(e,t,n);},addDroppedFrames:function(e){s.addDroppedFrames(f.default.VIDEO,e);},addPlayList:function(){o&&(s.addPlayList(o),o=null);},addDVBErrors:function(e){s.addDVBErrors(e);},createPlaylistMetrics:function(e,t){(o=new _.PlayList).start=new Date,o.mstart=e,o.starttype=t;},createPlaylistTraceMetrics:function(e,t,n){!0===i&&(i=!1,(a=new _.PlayListTrace).representationid=e,a.start=new Date,a.mstart=t,a.playbackspeed=null!==n?n.toString():null);},updatePlayListTraceMetrics:function(e){if(a)for(var t in a)a[t]=e[t];},pushPlayListTraceMetrics:function(e,t){var n,r;!1===i&&o&&a&&a.start&&(n=a.start,r=e.getTime()-n.getTime(),a.duration=r,a.stopreason=t,o.trace.push(a),i=!0);},clearAllCurrentMetrics:function(){s.clearAllCurrentMetrics();}},s=s||(0, g.default)(n).getInstance({settings:e.settings}),i=!0,o=a=null,t}a.__dashjs_factory_name="DashMetrics",n.default=i.default.getSingletonFactory(a),t.exports=n.default;},{108:108,109:109,152:152,241:241,243:243,47:47,78:78}],59:[function(e,t,n){function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(n,"__esModule",{value:!0});var y=r(e(94)),T=r(e(225)),i=r(e(47)),S=r(e(227)),A=r(e(158));function a(){var e=this.context,t=void 0,g=void 0,n=void 0,s=void 0,r=void 0,i=void 0,a=void 0,o=void 0,u=void 0,l=void 0,d=void 0,f=void 0,c=void 0,h=void 0,p=void 0,_=void 0;function E(){if(!_||!_.hasOwnProperty("resolve"))throw new Error("setConfig function has to be called previously")}function m(e){if(e.url){var t=new S.default;return t.setInfo(e),t}}function v(e,t,n){e?d.trigger(l.SEGMENTS_LOADED,{segments:e,representation:t,mediaType:n}):d.trigger(l.SEGMENTS_LOADED,{segments:null,representation:t,mediaType:n,error:new T.default(f.SEGMENT_BASE_LOADER_ERROR_CODE,f.SEGMENT_BASE_LOADER_ERROR_MESSAGE)});}return t={setConfig:function(e){e.baseURLController&&(_=e.baseURLController),e.dashMetrics&&(i=e.dashMetrics),e.mediaPlayerModel&&(o=e.mediaPlayerModel),e.errHandler&&(n=e.errHandler),e.settings&&(a=e.settings),e.boxParser&&(s=e.boxParser),e.events&&(l=e.events),e.eventBus&&(d=e.eventBus),e.debug&&(g=e.debug.getLogger(t)),e.requestModifier&&(r=e.requestModifier),e.errors&&(f=e.errors),e.urlUtils&&(p=e.urlUtils),e.constants&&(c=e.constants),e.dashConstants&&(h=e.dashConstants);},initialize:function(){u=(0, A.default)(e).create({errHandler:n,dashMetrics:i,mediaPlayerModel:o,requestModifier:r,useFetch:a?a.get().streaming.lowLatencyEnabled:null,boxParser:s,errors:f,urlUtils:p,constants:c,dashConstants:h});},loadInitialization:function t(n,e){E();var r=null,i=n?_.resolve(n.path):null,a=e||{init:!0,url:i?i.url:void 0,range:{start:0,end:1500},searching:!1,bytesLoaded:0,bytesToLoad:1500,mediaType:n&&n.adaptation?n.adaptation.type:null};g.debug("Start searching for initialization.");var o=m(a);u.load({request:o,success:function(e){a.bytesLoaded=a.range.end,(r=s.findInitRange(e))?(n.range=r,d.trigger(l.INITIALIZATION_LOADED,{representation:n})):(a.range.end=a.bytesLoaded+a.bytesToLoad,t(n,a));},error:function(){d.trigger(l.INITIALIZATION_LOADED,{representation:n});}}),g.debug("Perform init search: "+a.url);},loadSegments:function l(d,f,e,c,t){var n;E(),!e||void 0!==e.start&&void 0!==e.end||(e=(n=e?e.toString().split("-"):null)?{start:parseFloat(n[0]),end:parseFloat(n[1])}:null),c=c||v;var o=null,h=null,r=!!e,i=d?_.resolve(d.path):null,p={init:!1,url:i?i.url:void 0,range:r?e:{start:0,end:1500},searching:!r,bytesLoaded:t?t.bytesLoaded:0,bytesToLoad:1500,mediaType:d&&d.adaptation?d.adaptation.type:null},a=m(p);u.load({request:a,success:function(e){var t=p.bytesToLoad,n=e.byteLength;if(p.bytesLoaded=p.range.end-p.range.start,o=s.parse(e),(h=o.getBox("sidx"))&&h.isComplete){var u=h.references,r=void 0,i=void 0;null!=u&&0<u.length&&(r=1===u[0].reference_type),r?function(){g.debug("Initiate multiple SIDX load."),p.range.end=p.range.start+h.size;for(var e=void 0,t=void 0,n=void 0,r=void 0,i=[],a=0,o=(h.offset||p.range.start)+h.size,s=function(e){e?(i=i.concat(e),t<=++a&&(i.sort(function(e,t){return e.startTime-t.startTime<0?-1:0}),c(i,d,f))):c(null,d,f);},e=0,t=u.length;e<t;e++)r=(n=o)+u[e].referenced_size-1,o+=u[e].referenced_size,l(d,null,{start:n,end:r},s,p);}():(g.debug("Parsing segments from SIDX. representation "+d.adaptation.type+" - id: "+d.id+" for range : "+p.range.start+" - "+p.range.end),i=function(e,t){for(var n=e.references,r=n.length,i=e.timescale,a=e.earliest_presentation_time,o=t.range.start+e.offset+e.first_offset+e.size,s=[],u=void 0,l=void 0,d=void 0,f=void 0,c=0;c<r;c++)d=n[c].subsegment_duration,f=n[c].referenced_size,(u=new y.default).duration=d,u.startTime=a,u.timescale=i,l=o+f-1,u.mediaRange=o+"-"+l,s.push(u),a+=d,o+=f;return s}(h,p),c(i,d,f));}else {if(h)p.range.start=h.offset||p.range.start,p.range.end=p.range.start+(h.size||t);else {if(n<p.bytesLoaded)return void c(null,d,f);var a=o.getLastBox();a&&a.size?(p.range.start=a.offset+a.size,p.range.end=p.range.start+t):p.range.end+=t;}l(d,f,p.range,c,p);}},error:function(){c(null,d,f);}}),g.debug("Perform SIDX load: "+p.url+" with range : "+p.range.start+" - "+p.range.end);},reset:function(){u.abort(),r=s=n=u=null;}}}a.__dashjs_factory_name="SegmentBaseLoader",n.default=i.default.getSingletonFactory(a),t.exports=n.default;},{158:158,225:225,227:227,47:47,94:94}],60:[function(e,t,n){function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(n,"__esModule",{value:!0});var y=r(e(211)),h=r(e(108)),i=r(e(47)),T=r(e(94)),S=r(e(227)),A=r(e(158)),I=r(e(225));function a(){var p=this.context,t=void 0,g=void 0,_=void 0,n=void 0,r=void 0,i=void 0,a=void 0,E=void 0,o=void 0,s=void 0,u=void 0,l=void 0,d=void 0;function m(e,t,n,r){for(var i,a=void 0,o=void 0,s=void 0,u=void 0,l=void 0,d=void 0,o=[],u=0,f=(i=function(e){var t=[],n=(0, y.default)(p).create({data:e}),r=void 0,i=void 0;for(n.consumeTagAndSize(_.Segment.Cues);n.moreData()&&n.consumeTagAndSize(_.Segment.Cues.CuePoint,!0);){for((r={}).CueTime=n.parseTag(_.Segment.Cues.CuePoint.CueTime),r.CueTracks=[];n.moreData()&&n.consumeTag(_.Segment.Cues.CuePoint.CueTrackPositions,!0);){var a=n.getMatroskaCodedNum(),o=n.getPos();if((i={}).Track=n.parseTag(_.Segment.Cues.CuePoint.CueTrackPositions.CueTrack),0===i.Track)throw new Error("Cue track cannot be 0");i.ClusterPosition=n.parseTag(_.Segment.Cues.CuePoint.CueTrackPositions.CueClusterPosition),r.CueTracks.push(i),n.setPos(o+a);}if(0===r.CueTracks.length)throw new Error("Mandatory cuetrack not found");t.push(r);}if(0===t.length)throw new Error("mandatory cuepoint not found");return t}(e)).length;u<f;u+=1)s=new T.default,a=0,a=u<i.length-1?i[u+1].CueTime-i[u].CueTime:r-i[u].CueTime,s.duration=a,s.startTime=i[u].CueTime,s.timescale=1e3,l=i[u].CueTracks[0].ClusterPosition+t,d=u<i.length-1?i[u+1].CueTracks[0].ClusterPosition+t-1:n-1,s.mediaRange=l+"-"+d,o.push(s);return g.debug("Parsed cues: "+o.length+" cues."),o}function f(){if(!d||!d.hasOwnProperty("resolve"))throw new Error("setConfig function has to be called previously")}function c(e,t,n){e?s.trigger(u.SEGMENTS_LOADED,{segments:e,representation:t,mediaType:n}):s.trigger(u.SEGMENTS_LOADED,{segments:null,representation:t,mediaType:n,error:new I.default(l.SEGMENT_BASE_LOADER_ERROR_CODE,l.SEGMENT_BASE_LOADER_ERROR_MESSAGE)});}function v(e){var t=new S.default;return t.setInfo(e),t}return t={setConfig:function(e){if(!(e.baseURLController&&e.dashMetrics&&e.mediaPlayerModel&&e.errHandler))throw new Error(h.default.MISSING_CONFIG_ERROR);d=e.baseURLController,i=e.dashMetrics,a=e.mediaPlayerModel,n=e.errHandler,o=e.settings,u=e.events,s=e.eventBus,l=e.errors,g=e.debug.getLogger(t),r=e.requestModifier;},initialize:function(){E=(0, A.default)(p).create({errHandler:n,dashMetrics:i,mediaPlayerModel:a,requestModifier:r,useFetch:o?o.get().streaming.lowLatencyEnabled:null,errors:l});},loadInitialization:function(e,t){f();var n=null,r=e?d.resolve(e.path):null,i=e?e.range.split("-"):null,a=t||{range:{start:i?parseFloat(i[0]):null,end:i?parseFloat(i[1]):null},request:n,url:r?r.url:void 0,init:!0,mediaType:e&&e.adaptation?e.adaptation.type:null};g.info("Start loading initialization."),n=v(a),E.load({request:n,success:function(){s.trigger(u.INITIALIZATION_LOADED,{representation:e});},error:function(){s.trigger(u.INITIALIZATION_LOADED,{representation:e});}}),g.debug("Perform init load: "+a.url);},loadSegments:function(t,n,r,i){f();var e=null,a=t?d.resolve(t.path):null,o=a?a.url:void 0,s={bytesLoaded:0,bytesToLoad:8192,range:{start:0,end:8192},request:e,url:o,init:!1,mediaType:t&&t.adaptation?t.adaptation.type:null};i=i||c,e=v(s),g.debug("Parsing ebml header"),E.load({request:e,success:function(e){!function(e,t,n,r){if(e&&0!==e.byteLength){var i,a,o=(0, y.default)(p).create({data:e}),s=void 0,u=void 0,l=n?n.split("-"):null,d=null,f={url:t,range:{start:l?parseFloat(l[0]):null,end:l?parseFloat(l[1]):null},request:d};for(g.debug("Parse EBML header: "+f.url),o.skipOverElement(_.EBML),o.consumeTag(_.Segment),i=o.getMatroskaCodedNum(),i+=o.getPos(),a=o.getPos();o.moreData()&&!o.consumeTagAndSize(_.Segment.Info,!0);)if(!(o.skipOverElement(_.Segment.SeekHead,!0)||o.skipOverElement(_.Segment.Tracks,!0)||o.skipOverElement(_.Segment.Cues,!0)||o.skipOverElement(_.Void,!0)))throw new Error("no valid top level element found");for(;void 0===s;){var c=o.getMatroskaCodedNum(!0),h=o.getMatroskaCodedNum();switch(c){case _.Segment.Info.Duration.tag:s=o[_.Segment.Info.Duration.parse](h);break;default:o.setPos(o.getPos()+h);}}d=v(f);E.load({request:d,success:function(e){u=m(e,a,i,s),r(u);},error:function(){g.error("Download Error: Cues "+f.url),r(null);}}),g.debug("Perform cues load: "+f.url+" bytes="+f.range.start+"-"+f.range.end);}else r(null);}(e,o,r,function(e){i(e,t,n);});},error:function(){i(null,t,n);}});},reset:function(){r=n=null;}},_={EBML:{tag:440786851,required:!0},Segment:{tag:408125543,required:!0,SeekHead:{tag:290298740,required:!0},Info:{tag:357149030,required:!0,TimecodeScale:{tag:2807729,required:!0,parse:"getMatroskaUint"},Duration:{tag:17545,required:!0,parse:"getMatroskaFloat"}},Tracks:{tag:374648427,required:!0},Cues:{tag:475249515,required:!0,CuePoint:{tag:187,required:!0,CueTime:{tag:179,required:!0,parse:"getMatroskaUint"},CueTrackPositions:{tag:183,required:!0,CueTrack:{tag:247,required:!0,parse:"getMatroskaUint"},CueClusterPosition:{tag:241,required:!0,parse:"getMatroskaUint"}}}}},Void:{tag:236,required:!0}},t}a.__dashjs_factory_name="WebmSegmentBaseLoader",n.default=i.default.getSingletonFactory(a),t.exports=n.default;},{108:108,158:158,211:211,225:225,227:227,47:47,94:94}],61:[function(e,t,n){function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r);}}function i(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),this.init();}Object.defineProperty(n,"__esModule",{value:!0});var a=new(function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}(i,[{key:"init",value:function(){this.BASE_URL="BaseURL",this.SEGMENT_BASE="SegmentBase",this.SEGMENT_TEMPLATE="SegmentTemplate",this.SEGMENT_LIST="SegmentList",this.SEGMENT_URL="SegmentURL",this.SEGMENT_TIMELINE="SegmentTimeline",this.SEGMENT_PROFILES="segmentProfiles",this.ADAPTATION_SET="AdaptationSet",this.REPRESENTATION="Representation",this.REPRESENTATION_INDEX="RepresentationIndex",this.SUB_REPRESENTATION="SubRepresentation",this.INITIALIZATION="Initialization",this.INITIALIZATION_MINUS="initialization",this.MPD="MPD",this.PERIOD="Period",this.ASSET_IDENTIFIER="AssetIdentifier",this.EVENT_STREAM="EventStream",this.ID="id",this.PROFILES="profiles",this.SERVICE_LOCATION="serviceLocation",this.RANGE="range",this.INDEX="index",this.MEDIA="media",this.BYTE_RANGE="byteRange",this.INDEX_RANGE="indexRange",this.MEDIA_RANGE="mediaRange",this.VALUE="value",this.CONTENT_TYPE="contentType",this.MIME_TYPE="mimeType",this.BITSTREAM_SWITCHING="BitstreamSwitching",this.BITSTREAM_SWITCHING_MINUS="bitstreamSwitching",this.CODECS="codecs",this.DEPENDENCY_ID="dependencyId",this.MEDIA_STREAM_STRUCTURE_ID="mediaStreamStructureId",this.METRICS="Metrics",this.METRICS_MINUS="metrics",this.REPORTING="Reporting",this.WIDTH="width",this.HEIGHT="height",this.SAR="sar",this.FRAMERATE="frameRate",this.AUDIO_SAMPLING_RATE="audioSamplingRate",this.MAXIMUM_SAP_PERIOD="maximumSAPPeriod",this.START_WITH_SAP="startWithSAP",this.MAX_PLAYOUT_RATE="maxPlayoutRate",this.CODING_DEPENDENCY="codingDependency",this.SCAN_TYPE="scanType",this.FRAME_PACKING="FramePacking",this.AUDIO_CHANNEL_CONFIGURATION="AudioChannelConfiguration",this.CONTENT_PROTECTION="ContentProtection",this.ESSENTIAL_PROPERTY="EssentialProperty",this.SUPPLEMENTAL_PROPERTY="SupplementalProperty",this.INBAND_EVENT_STREAM="InbandEventStream",this.ACCESSIBILITY="Accessibility",this.ROLE="Role",this.RATING="Rating",this.CONTENT_COMPONENT="ContentComponent",this.SUBSET="Subset",this.LANG="lang",this.VIEWPOINT="Viewpoint",this.ROLE_ASARRAY="Role_asArray",this.ACCESSIBILITY_ASARRAY="Accessibility_asArray",this.AUDIOCHANNELCONFIGURATION_ASARRAY="AudioChannelConfiguration_asArray",this.CONTENTPROTECTION_ASARRAY="ContentProtection_asArray",this.MAIN="main",this.DYNAMIC="dynamic",this.STATIC="static",this.MEDIA_PRESENTATION_DURATION="mediaPresentationDuration",this.MINIMUM_UPDATE_PERIOD="minimumUpdatePeriod",this.CODEC_PRIVATE_DATA="codecPrivateData",this.BANDWITH="bandwidth",this.SOURCE_URL="sourceURL",this.TIMESCALE="timescale",this.DURATION="duration",this.START_NUMBER="startNumber",this.PRESENTATION_TIME_OFFSET="presentationTimeOffset",this.AVAILABILITY_START_TIME="availabilityStartTime",this.AVAILABILITY_END_TIME="availabilityEndTime",this.TIMESHIFT_BUFFER_DEPTH="timeShiftBufferDepth",this.MAX_SEGMENT_DURATION="maxSegmentDuration",this.PRESENTATION_TIME="presentationTime",this.MIN_BUFFER_TIME="minBufferTime",this.MAX_SUBSEGMENT_DURATION="maxSubsegmentDuration",this.START="start",this.AVAILABILITY_TIME_OFFSET="availabilityTimeOffset",this.AVAILABILITY_TIME_COMPLETE="availabilityTimeComplete",this.CENC_DEFAULT_KID="cenc:default_KID",this.DVB_PRIORITY="dvb:priority",this.DVB_WEIGHT="dvb:weight",this.SUGGESTED_PRESENTATION_DELAY="suggestedPresentationDelay",this.SERVICE_DESCRIPTION="ServiceDescription",this.SERVICE_DESCRIPTION_SCOPE="Scope",this.SERVICE_DESCRIPTION_LATENCY="Latency",this.SERVICE_DESCRIPTION_PLAYBACK_RATE="PlaybackRate";}}]),i);n.default=a,t.exports=n.default;},{}],62:[function(e,t,n){function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(n,"__esModule",{value:!0});var w=r(e(108)),P=r(e(225)),i=r(e(47));function a(e){var i=(e=e||{}).eventBus,a=e.events,l=e.errors,d=e.abrController,f=e.dashMetrics,c=e.playbackController,r=e.timelineConverter,h=e.type,p=e.streamId,g=e.dashConstants,o=void 0,s=void 0,_=void 0,E=void 0,m=void 0;function u(){if(!(d&&f&&c&&r))throw new Error(w.default.MISSING_CONFIG_ERROR)}function t(){return _}function n(){return m}function v(){_=!(s=null),E=[];}function y(){return h}function T(){u();var e=new Date,t=m,n=1e3*c.getTime();t&&f.addRepresentationSwitch(t.adaptation.type,e,n,t.id);}function S(e){return null==e||e>=E.length?null:E[e]}function A(e,t){var n;e.segmentAvailabilityRange=r.calcSegmentAvailabilityRange(e,t),e.segmentAvailabilityRange.end<e.segmentAvailabilityRange.start&&!e.useCalculatedLiveEdgeTime?b(new P.default(l.SEGMENTS_UNAVAILABLE_ERROR_CODE,l.SEGMENTS_UNAVAILABLE_ERROR_MESSAGE,{availabilityDelay:e.segmentAvailabilityRange.start-e.segmentAvailabilityRange.end})):t&&(n=e.segmentAvailabilityRange.end,r.setExpectedLiveEdge(n),f.updateManifestUpdateInfo({presentationStartTime:n}));}function I(e,t){u();for(var n=0,r=E.length;n<r;n++)A(E[n],e),t&&i.trigger(a.REPRESENTATION_UPDATE_STARTED,{sender:o,representation:E[n]});}function R(){_=!0,i.trigger(a.DATA_UPDATE_STARTED,{sender:o});}function b(e){_=!1;var t={sender:o,data:s,currentRepresentation:m};e&&(t.error=e),i.trigger(a.DATA_UPDATE_COMPLETED,t);}function D(e){var t=e;i.trigger(a.AST_IN_FUTURE,{delay:t}),setTimeout(function(){_||(R(),E.forEach(function(e){e.segmentAvailabilityRange=null;}),I(c.getIsDynamic(),!0));},t);}function M(e){if(e.sender.getType()===h&&e.sender.getStreamInfo().id===p&&_)if(e.error)b(e.error);else {var t,n=e.sender.getStreamInfo(),r=e.representation,i=f.getCurrentManifestUpdate(),a=!1,o=0,s=void 0;if(r.adaptation.period.mpd.manifest.type!==g.DYNAMIC||r.adaptation.period.mpd.manifest.ignorePostponeTimePeriod||(o=function(e,t){try{var n=c.getStreamController().getActiveStreamInfo(),r=e.segmentAvailabilityRange.start;n&&n.id&&n.id!==t.id&&(r=Math.min(c.getTime(),r));var i=e.segmentAvailabilityRange.end-r;return 1e3*(c.getLiveDelay()-i)}catch(e){return 0}}(r,n)),0<o)return D(o),void b(new P.default(l.SEGMENTS_UPDATE_FAILED_ERROR_CODE,l.SEGMENTS_UPDATE_FAILED_ERROR_MESSAGE));if(i){for(var u=0;u<i.representationInfo.length;u++)if((s=i.representationInfo[u]).index===r.index&&s.mediaType===h){a=!0;break}a||f.addManifestUpdateRepresentationInfo(r,h);}!function(){for(var e=0,t=E.length;e<t;e++){var n=E[e].segmentInfoType;if(null===E[e].segmentAvailabilityRange||!E[e].hasInitialization()||(n===g.SEGMENT_BASE||n===g.BASE_URL)&&!E[e].segments)return}return 1}()||(d.setPlaybackQuality(h,n,(t=m,E.indexOf(t))),f.updateManifestUpdateInfo({latency:m.segmentAvailabilityRange.end-c.getTime()}),f.getCurrentRepresentationSwitch(m.adaptation.type)||T(),b());}}function N(e){e.isDynamic&&I(e.isDynamic);}function C(e){e.mediaType===h&&p===e.streamInfo.id&&(m=S(e.newQuality),T());}function O(e){e.newDuration&&m&&m.adaptation.period&&(m.adaptation.period.duration=e.newDuration);}return o={getData:function(){return s},isUpdating:t,updateData:function(e,t,n,r){u(),R(),E=t,m=S(r),s=e,n===w.default.VIDEO||n===w.default.AUDIO||n===w.default.FRAGMENTED_TEXT?I(c.getIsDynamic(),!0):b();},updateRepresentation:A,getCurrentRepresentation:n,getRepresentationForQuality:S,getType:y,getStreamId:function(){return p},reset:function(){i.off(a.QUALITY_CHANGE_REQUESTED,C,o),i.off(a.REPRESENTATION_UPDATE_COMPLETED,M,o),i.off(a.WALLCLOCK_TIME_UPDATED,N,o),i.off(a.MANIFEST_VALIDITY_CHANGED,O,o),v();}},v(),i.on(a.QUALITY_CHANGE_REQUESTED,C,o),i.on(a.REPRESENTATION_UPDATE_COMPLETED,M,o),i.on(a.WALLCLOCK_TIME_UPDATED,N,o),i.on(a.MANIFEST_VALIDITY_CHANGED,O,o),o}a.__dashjs_factory_name="RepresentationController",n.default=i.default.getClassFactory(a),t.exports=n.default;},{108:108,225:225,47:47}],63:[function(e,t,n){function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(n,"__esModule",{value:!0});var i=r(e(47)),m=r(e(59)),v=r(e(60));function a(e){e=e||{};var t=this.context,n=e.eventBus,r=e.events,i=e.dashMetrics,a=e.mediaPlayerModel,o=e.errHandler,s=e.baseURLController,u=e.debug,l=e.boxParser,d=e.requestModifier,f=e.errors,c=void 0,h=void 0,p=void 0;function g(e){return "webm"===(e?e.split("/")[1]:"").toLowerCase()}function _(e){g(e.mimeType)?p.loadInitialization(e.representation):h.loadInitialization(e.representation);}function E(e){g(e.mimeType)?p.loadSegments(e.representation,e.mediaType,e.representation?e.representation.indexRange:null,e.callback):h.loadSegments(e.representation,e.mediaType,e.representation?e.representation.indexRange:null,e.callback);}return c={initialize:function(){n.on(r.SEGMENTBASE_INIT_REQUEST_NEEDED,_,c),n.on(r.SEGMENTBASE_SEGMENTSLIST_REQUEST_NEEDED,E,c),h.initialize(),p.initialize();},reset:function(){n.off(r.SEGMENTBASE_INIT_REQUEST_NEEDED,_,c),n.off(r.SEGMENTBASE_SEGMENTSLIST_REQUEST_NEEDED,E,c);}},h=(0, m.default)(t).getInstance(),p=(0, v.default)(t).getInstance(),h.setConfig({baseURLController:s,dashMetrics:i,mediaPlayerModel:a,errHandler:o,eventBus:n,events:r,errors:f,debug:u,boxParser:l,requestModifier:d}),p.setConfig({baseURLController:s,dashMetrics:i,mediaPlayerModel:a,errHandler:o,eventBus:n,events:r,errors:f,debug:u,requestModifier:d}),c}a.__dashjs_factory_name="SegmentBaseController";var o=i.default.getSingletonFactory(a);n.default=o,t.exports=n.default;},{47:47,59:59,60:60}],64:[function(e,t,n){function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(n,"__esModule",{value:!0});var i=r(e(47)),u=r(e(83)),l=r(e(81)),d=r(e(77)),f=r(e(79));function a(t){t=t||{};var e,n=this.context,a=t.events,o=t.eventBus,r=t.dashConstants,i=void 0;function s(e){return e?e.segments?i[r.SEGMENT_BASE]:i[e.segmentInfoType]:null}return e={initialize:function(e){i[r.SEGMENT_TIMELINE]=(0, u.default)(n).create(t,e),i[r.SEGMENT_TEMPLATE]=(0, l.default)(n).create(t,e),i[r.SEGMENT_LIST]=(0, d.default)(n).create(t,e),i[r.SEGMENT_BASE]=(0, f.default)(n).create(t,e);},update:function(e,t,n,r,i){r||o.trigger(a.SEGMENTBASE_INIT_REQUEST_NEEDED,{mimeType:n,representation:e}),i||o.trigger(a.SEGMENTBASE_SEGMENTSLIST_REQUEST_NEEDED,{mimeType:n,mediaType:t,representation:e});},getSegmentByIndex:function(e,t,n){var r=s(e);return r?r.getSegmentByIndex(e,t,n):null},getSegmentByTime:function(e,t){var n=s(e);return n?n.getSegmentByTime(e,t):null}},i={},e}a.__dashjs_factory_name="SegmentsController";var o=i.default.getClassFactory(a);n.default=o,t.exports=n.default;},{47:47,77:77,79:79,81:81,83:83}],65:[function(e,t,n){function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(n,"__esModule",{value:!0});var g=r(e(108)),S=r(e(61)),A=r(e(92)),I=r(e(84)),R=r(e(91)),i=r(e(90)),b=r(e(96)),D=r(e(86)),M=r(e(85)),N=r(e(87)),C=r(e(216)),O=r(e(220)),a=r(e(47)),w=r(e(45)),P=r(e(225)),L=r(e(51)),x=e(204);function o(){var e=void 0,l=void 0,d=void 0,f=void 0,a=this.context,o=(0, O.default)(a).getInstance(),_=Number.isInteger||function(e){return "number"==typeof e&&isFinite(e)&&Math.floor(e)===e};function s(e,t){var n=void 0,r=void 0,i=void 0,a=void 0,o=void 0,s=void 0,u=!1,l=!1;if(!e)throw new Error("adaptation is not defined");if(!t)throw new Error("type is not defined");if(e.hasOwnProperty("ContentComponent_asArray")&&(a=e.ContentComponent_asArray),o=t!==g.default.TEXT?new RegExp(t):new RegExp("(vtt|ttml)"),e.Representation_asArray&&e.Representation_asArray.length&&0<e.Representation_asArray.length){var d=m(e.Representation_asArray[0]);if(d&&0<d.length&&0<=x.THUMBNAILS_SCHEME_ID_URIS.indexOf(d[0].schemeIdUri))return t===g.default.IMAGE;if(e.Representation_asArray[0].hasOwnProperty(S.default.CODECS)&&(0===(s=e.Representation_asArray[0].codecs).search(g.default.STPP)||0===s.search(g.default.WVTT)))return t===g.default.FRAGMENTED_TEXT}if(a){if(1<a.length)return t===g.default.MUXED;a[0]&&a[0].contentType===t&&(l=u=!0);}if(e.hasOwnProperty(S.default.MIME_TYPE)&&(u=o.test(e.mimeType),l=!0),!l)for(n=0,r=e.Representation_asArray&&e.Representation_asArray.length?e.Representation_asArray.length:0;!l&&n<r;)(i=e.Representation_asArray[n]).hasOwnProperty(S.default.MIME_TYPE)&&(u=o.test(i.mimeType),l=!0),n++;return u}function E(e){return "text/vtt"===e||"application/ttml+xml"===e}function t(){return function(e,t){return e.bandwidth-t.bandwidth}}function u(e){return e&&Array.isArray(e.Representation_asArray)&&e.Representation_asArray.sort(t()),e}function c(e,t){return e&&e.Period_asArray&&_(t)&&e.Period_asArray[t]?e.Period_asArray[t].AdaptationSet_asArray:[]}function h(e){var t=!1;return e&&e.hasOwnProperty("type")&&(t=e.type===S.default.DYNAMIC),t}function m(e){return e&&e.EssentialProperty_asArray&&e.EssentialProperty_asArray.length?e.EssentialProperty_asArray.map(function(e){return {schemeIdUri:e.schemeIdUri,value:e.value}}):null}function v(e){if(e&&e.period&&_(e.period.index)){var t=e.period.mpd.manifest.Period_asArray[e.period.index];if(t&&t.AdaptationSet_asArray&&_(e.index))return u(t.AdaptationSet_asArray[e.index])}}function y(e){var t=e.S_asArray[e.S_asArray.length-1];return !t.hasOwnProperty("r")||0<=t.r}function p(e,t){var n=[],r=void 0;if(!e)return n;for(r=0;r<e.length;r++){var i=new N.default;if(i.timescale=1,i.representation=t,!e[r].hasOwnProperty(g.default.SCHEME_ID_URI))throw new Error("Invalid EventStream. SchemeIdUri has to be set");i.schemeIdUri=e[r].schemeIdUri,e[r].hasOwnProperty(S.default.TIMESCALE)&&(i.timescale=e[r].timescale),e[r].hasOwnProperty(S.default.VALUE)&&(i.value=e[r].value),n.push(i);}return n}function T(r){var i=[],e=r.BaseURL_asArray||[r.baseUri],a=!1;return e.some(function(e){if(e){var t=new M.default,n=e.__text||e;return o.isRelative(n)&&(a=!0,r.baseUri&&(n=o.resolve(n,r.baseUri))),t.url=n,e.hasOwnProperty(S.default.SERVICE_LOCATION)&&e.serviceLocation.length?t.serviceLocation=e.serviceLocation:t.serviceLocation=n,e.hasOwnProperty(S.default.DVB_PRIORITY)&&(t.dvb_priority=e[S.default.DVB_PRIORITY]),e.hasOwnProperty(S.default.DVB_WEIGHT)&&(t.dvb_weight=e[S.default.DVB_WEIGHT]),e.hasOwnProperty(S.default.AVAILABILITY_TIME_OFFSET)&&(t.availabilityTimeOffset=e[S.default.AVAILABILITY_TIME_OFFSET]),e.hasOwnProperty(S.default.AVAILABILITY_TIME_COMPLETE)&&(t.availabilityTimeComplete="false"!==e[S.default.AVAILABILITY_TIME_COMPLETE]),i.push(t),a}}),i}return e={getIsTypeOf:s,getIsTextTrack:E,getLanguageForAdaptation:function(e){var t="";return e&&e.hasOwnProperty(S.default.LANG)&&(t=e.lang.replace(/[^A-Za-z0-9-]/g,"")),t},getViewpointForAdaptation:function(e){return e&&e.hasOwnProperty(S.default.VIEWPOINT)?e.Viewpoint:null},getRolesForAdaptation:function(e){return e&&e.hasOwnProperty(S.default.ROLE_ASARRAY)?e.Role_asArray:[]},getAccessibilityForAdaptation:function(e){return e&&e.hasOwnProperty(S.default.ACCESSIBILITY_ASARRAY)?e.Accessibility_asArray:[]},getAudioChannelConfigurationForAdaptation:function(e){return e&&e.hasOwnProperty(S.default.AUDIOCHANNELCONFIGURATION_ASARRAY)?e.AudioChannelConfiguration_asArray:[]},getAudioChannelConfigurationForRepresentation:function(e){return e&&e.hasOwnProperty(S.default.AUDIOCHANNELCONFIGURATION_ASARRAY)?e.AudioChannelConfiguration_asArray:[]},getAdaptationForIndex:function(e,t,n){var r=c(t,n);return 0<r.length&&_(e)?r[e]:null},getIndexForAdaptation:function(e,t,n){if(!e)return -1;for(var r=c(t,n),i=0;i<r.length;i++){if((0, C.default)(a).getInstance().areEqual(r[i],e))return i}return -1},getAdaptationForId:function(e,t,n){for(var r=c(t,n),i=void 0,i=0,a=r.length;i<a;i++)if(r[i].hasOwnProperty(S.default.ID)&&r[i].id===e)return r[i];return null},getAdaptationsForType:function(e,t,n){for(var r=c(e,t),i=void 0,a=[],i=0,o=r.length;i<o;i++)s(r[i],n)&&a.push(u(r[i]));return a},getCodec:function(e,t,n){var r,i=null;return e&&e.Representation_asArray&&0<e.Representation_asArray.length&&((r=_(t)&&0<=t&&t<e.Representation_asArray.length?e.Representation_asArray[t]:e.Representation_asArray[0])&&(i=r.mimeType+';codecs="'+r.codecs+'"',n&&void 0!==r.width&&(i+=';width="'+r.width+'";height="'+r.height+'"'))),i=i&&i.replace(/\sprofiles=[^;]*/g,"")},getMimeType:function(e){return e&&e.Representation_asArray&&0<e.Representation_asArray.length?e.Representation_asArray[0].mimeType:null},getKID:function(e){return e&&e.hasOwnProperty(S.default.CENC_DEFAULT_KID)?e[S.default.CENC_DEFAULT_KID]:null},getLabelsForAdaptation:function(e){if(!e||!Array.isArray(e.Label_asArray))return [];for(var t=[],n=0;n<e.Label_asArray.length;n++)t.push({lang:e.Label_asArray[n].lang,text:e.Label_asArray[n].__text||e.Label_asArray[n]});return t},getContentProtectionData:function(e){return e&&e.hasOwnProperty(S.default.CONTENTPROTECTION_ASARRAY)&&0!==e.ContentProtection_asArray.length?e.ContentProtection_asArray:null},getIsDynamic:h,hasProfile:function(e,t){var n=!1;return e&&e.profiles&&0<e.profiles.length&&(n=-1!==e.profiles.indexOf(t)),n},getDuration:function(e){return e&&e.hasOwnProperty(S.default.MEDIA_PRESENTATION_DURATION)?e.mediaPresentationDuration:e&&"dynamic"==e.type?Number.POSITIVE_INFINITY:Number.MAX_SAFE_INTEGER||Number.MAX_VALUE},getBandwidth:function(e){return e&&e.bandwidth?e.bandwidth:NaN},getManifestUpdatePeriod:function(e){var t=arguments.length<=1||void 0===arguments[1]?0:arguments[1],n=NaN;return e&&e.hasOwnProperty(S.default.MINIMUM_UPDATE_PERIOD)&&(n=e.minimumUpdatePeriod),isNaN(n)?n:Math.max(n-t,1)},getRepresentationCount:function(e){return e&&Array.isArray(e.Representation_asArray)?e.Representation_asArray.length:0},getBitrateListForAdaptation:function(e){var t=u(e);return (t&&Array.isArray(t.Representation_asArray)?t.Representation_asArray:[]).map(function(e){return {bandwidth:e.bandwidth,width:e.width||0,height:e.height||0,scanType:e.scanType||null,id:e.id||null}})},getRepresentationFor:function(e,t){return t&&t.Representation_asArray&&0<t.Representation_asArray.length&&_(e)?t.Representation_asArray[e]:null},getRepresentationsForAdaptation:function(e){var t,n,r,i,a,o,s=[],u=v(e),l=void 0,d=void 0;if(u&&u.Representation_asArray){e&&e.period&&_(e.period.index)&&((t=T(e.period.mpd.manifest))&&(d=t[0]));for(var f=0,c=u.Representation_asArray.length;f<c;++f){var h,p=u.Representation_asArray[f],g=new A.default;g.index=f,g.adaptation=e,p.hasOwnProperty(S.default.ID)&&(g.id=p.id),p.hasOwnProperty(S.default.CODECS)&&(g.codecs=p.codecs),p.hasOwnProperty(S.default.CODEC_PRIVATE_DATA)&&(g.codecPrivateData=p.codecPrivateData),p.hasOwnProperty(S.default.BANDWITH)&&(g.bandwidth=p.bandwidth),p.hasOwnProperty(S.default.WIDTH)&&(g.width=p.width),p.hasOwnProperty(S.default.HEIGHT)&&(g.height=p.height),p.hasOwnProperty(S.default.SCAN_TYPE)&&(g.scanType=p.scanType),p.hasOwnProperty(S.default.MAX_PLAYOUT_RATE)&&(g.maxPlayoutRate=p.maxPlayoutRate),p.hasOwnProperty(S.default.SEGMENT_BASE)?(l=p.SegmentBase,g.segmentInfoType=S.default.SEGMENT_BASE):p.hasOwnProperty(S.default.SEGMENT_LIST)?(l=p.SegmentList).hasOwnProperty(S.default.SEGMENT_TIMELINE)?(g.segmentInfoType=S.default.SEGMENT_TIMELINE,g.useCalculatedLiveEdgeTime=y(l.SegmentTimeline)):(g.segmentInfoType=S.default.SEGMENT_LIST,g.useCalculatedLiveEdgeTime=!0):p.hasOwnProperty(S.default.SEGMENT_TEMPLATE)?((l=p.SegmentTemplate).hasOwnProperty(S.default.SEGMENT_TIMELINE)?(g.segmentInfoType=S.default.SEGMENT_TIMELINE,g.useCalculatedLiveEdgeTime=y(l.SegmentTimeline)):g.segmentInfoType=S.default.SEGMENT_TEMPLATE,l.hasOwnProperty(S.default.INITIALIZATION_MINUS)&&(g.initialization=l.initialization.split("$Bandwidth$").join(p.bandwidth).split("$RepresentationID$").join(p.id))):g.segmentInfoType=S.default.BASE_URL,g.essentialProperties=m(p),l&&(l.hasOwnProperty(S.default.INITIALIZATION)?((h=l.Initialization).hasOwnProperty(S.default.SOURCE_URL)&&(g.initialization=h.sourceURL),h.hasOwnProperty(S.default.RANGE)&&(g.range=h.range)):p.hasOwnProperty(S.default.MIME_TYPE)&&E(p.mimeType)&&(g.range=0),l.hasOwnProperty(S.default.TIMESCALE)&&(g.timescale=l.timescale),l.hasOwnProperty(S.default.DURATION)?g.segmentDuration=l.duration/g.timescale:p.hasOwnProperty(S.default.SEGMENT_TEMPLATE)&&(l=p.SegmentTemplate).hasOwnProperty(S.default.SEGMENT_TIMELINE)&&(g.segmentDuration=(i=l.SegmentTimeline,a=void 0,a=i.S_asArray[0],o=i.S_asArray[1],(a.hasOwnProperty("d")?a.d:o.t-a.t)/g.timescale)),l.hasOwnProperty(S.default.MEDIA)&&(g.media=l.media),l.hasOwnProperty(S.default.START_NUMBER)&&(g.startNumber=l.startNumber),l.hasOwnProperty(S.default.INDEX_RANGE)&&(g.indexRange=l.indexRange),l.hasOwnProperty(S.default.PRESENTATION_TIME_OFFSET)&&(g.presentationTimeOffset=l.presentationTimeOffset/g.timescale),l.hasOwnProperty(S.default.AVAILABILITY_TIME_OFFSET)?g.availabilityTimeOffset=l.availabilityTimeOffset:d&&void 0!==d.availabilityTimeOffset&&(g.availabilityTimeOffset=d.availabilityTimeOffset),l.hasOwnProperty(S.default.AVAILABILITY_TIME_COMPLETE)?g.availabilityTimeComplete="false"!==l.availabilityTimeComplete:d&&void 0!==d.availabilityTimeComplete&&(g.availabilityTimeComplete=d.availabilityTimeComplete)),g.MSETimeOffset=(r=(n=g).presentationTimeOffset,n.adaptation.period.start-r),g.path=[e.period.index,e.index,f],s.push(g);}}return s},getAdaptationsForPeriod:function(e){var t=e&&_(e.index)?e.mpd.manifest.Period_asArray[e.index]:null,n=[],r=void 0,i=void 0,a=void 0;if(t&&t.AdaptationSet_asArray)for(a=0;a<t.AdaptationSet_asArray.length;a++)i=t.AdaptationSet_asArray[a],r=new I.default,i.hasOwnProperty(S.default.ID)&&(r.id=i.id),r.index=a,r.period=e,s(i,g.default.MUXED)?r.type=g.default.MUXED:s(i,g.default.AUDIO)?r.type=g.default.AUDIO:s(i,g.default.VIDEO)?r.type=g.default.VIDEO:s(i,g.default.FRAGMENTED_TEXT)?r.type=g.default.FRAGMENTED_TEXT:s(i,g.default.IMAGE)?r.type=g.default.IMAGE:r.type=g.default.TEXT,n.push(r);return n},getRegularPeriods:function(e){for(var t=!!e&&h(e.manifest),n=[],r=null,i=null,a=null,o=null,s=void 0,s=0,u=e&&e.manifest&&e.manifest.Period_asArray?e.manifest.Period_asArray.length:0;s<u;s++)(i=e.manifest.Period_asArray[s]).hasOwnProperty(S.default.START)?(o=new R.default).start=i.start:null!==r&&r.hasOwnProperty(S.default.DURATION)&&null!==a?(o=new R.default).start=parseFloat((a.start+a.duration).toFixed(5)):0!==s||t||((o=new R.default).start=0),null!==a&&isNaN(a.duration)&&(null!==o?a.duration=parseFloat((o.start-a.start).toFixed(5)):l.warn("First period duration could not be calculated because lack of start and duration period properties. This will cause timing issues during playback")),null!==o&&(o.id=function(e,t){if(!e)throw new Error("Period cannot be null or undefined");var n=R.default.DEFAULT_ID+"_"+t;e.hasOwnProperty(S.default.ID)&&0<e.id.length&&"__proto__"!==e.id&&(n=e.id);return n}(i,s),o.index=s,o.mpd=e,i.hasOwnProperty(S.default.DURATION)&&(o.duration=i.duration),n.push(o),r=i,a=o),o=i=null;return 0===n.length||null!==a&&isNaN(a.duration)&&(a.duration=parseFloat((function(e){!function(){if(!d||!d.hasOwnProperty("error"))throw new Error(g.default.MISSING_CONFIG_ERROR)}();var t=h(e.mpd.manifest),n=void 0;e.mpd.manifest.mediaPresentationDuration?n=e.mpd.manifest.mediaPresentationDuration:e.duration?n=e.duration:t?n=Number.POSITIVE_INFINITY:d.error(new P.default(L.default.MANIFEST_ERROR_ID_PARSE_CODE,"Must have @mediaPresentationDuration on MPD or an explicit @duration on the last period.",e));return n}(a)-a.start).toFixed(5))),n},getMpd:function(e){var t=new i.default;return e&&((t.manifest=e).hasOwnProperty(S.default.AVAILABILITY_START_TIME)?t.availabilityStartTime=new Date(e.availabilityStartTime.getTime()):e.loadedTime&&(t.availabilityStartTime=new Date(e.loadedTime.getTime())),e.hasOwnProperty(S.default.AVAILABILITY_END_TIME)&&(t.availabilityEndTime=new Date(e.availabilityEndTime.getTime())),e.hasOwnProperty(S.default.MINIMUM_UPDATE_PERIOD)&&(t.minimumUpdatePeriod=e.minimumUpdatePeriod),e.hasOwnProperty(S.default.MEDIA_PRESENTATION_DURATION)&&(t.mediaPresentationDuration=e.mediaPresentationDuration),e.hasOwnProperty(S.default.SUGGESTED_PRESENTATION_DELAY)&&(t.suggestedPresentationDelay=e.suggestedPresentationDelay),e.hasOwnProperty(S.default.TIMESHIFT_BUFFER_DEPTH)&&(t.timeShiftBufferDepth=e.timeShiftBufferDepth),e.hasOwnProperty(S.default.MAX_SEGMENT_DURATION)&&(t.maxSegmentDuration=e.maxSegmentDuration)),t},getEventsForPeriod:function(e){var t=e&&e.mpd&&e.mpd.manifest?e.mpd.manifest:null,n=t?t.Period_asArray:null,r=n&&e&&_(e.index)?n[e.index].EventStream_asArray:null,i=[],a=void 0,o=void 0;if(r)for(a=0;a<r.length;a++){var s=new N.default;if(s.period=e,s.timescale=1,!r[a].hasOwnProperty(g.default.SCHEME_ID_URI))throw new Error("Invalid EventStream. SchemeIdUri has to be set");for(s.schemeIdUri=r[a].schemeIdUri,r[a].hasOwnProperty(S.default.TIMESCALE)&&(s.timescale=r[a].timescale),r[a].hasOwnProperty(S.default.VALUE)&&(s.value=r[a].value),o=0;r[a].Event_asArray&&o<r[a].Event_asArray.length;o++){var u,l=new D.default;l.presentationTime=0,l.eventStream=s,r[a].Event_asArray[o].hasOwnProperty(S.default.PRESENTATION_TIME)&&(l.presentationTime=r[a].Event_asArray[o].presentationTime,u=s.presentationTimeOffset?s.presentationTimeOffset*s.timescale:0,l.calculatedPresentationTime=l.presentationTime+e.start*s.timescale+u),r[a].Event_asArray[o].hasOwnProperty(S.default.DURATION)&&(l.duration=r[a].Event_asArray[o].duration),r[a].Event_asArray[o].hasOwnProperty(S.default.ID)&&(l.id=r[a].Event_asArray[o].id),r[a].Event_asArray[o].Signal&&r[a].Event_asArray[o].Signal.Binary?l.messageData=f.decodeArray(r[a].Event_asArray[o].Signal.Binary.toString()):l.messageData=r[a].Event_asArray[o].messageData||r[a].Event_asArray[o].__text,i.push(l);}}return i},getEventStreamForAdaptationSet:function(e,t){var n=void 0,r=void 0,i=void 0;return e&&e.Period_asArray&&t&&t.period&&_(t.period.index)&&(r=e.Period_asArray[t.period.index])&&r.AdaptationSet_asArray&&_(t.index)&&(i=r.AdaptationSet_asArray[t.index])&&(n=i.InbandEventStream_asArray),p(n,null)},getEventStreamForRepresentation:function(e,t){var n=void 0,r=void 0,i=void 0,a=void 0;return e&&e.Period_asArray&&t&&t.adaptation&&t.adaptation.period&&_(t.adaptation.period.index)&&(r=e.Period_asArray[t.adaptation.period.index])&&r.AdaptationSet_asArray&&_(t.adaptation.index)&&(i=r.AdaptationSet_asArray[t.adaptation.index])&&i.Representation_asArray&&_(t.index)&&(a=i.Representation_asArray[t.index])&&(n=a.InbandEventStream_asArray),p(n,t)},getUTCTimingSources:function(e){var t=h(e),n=!!e&&e.hasOwnProperty(S.default.AVAILABILITY_START_TIME),r=e?e.UTCTiming_asArray:null,i=[];return (t||n)&&r&&r.forEach(function(e){var t=new b.default;e.hasOwnProperty(g.default.SCHEME_ID_URI)&&(t.schemeIdUri=e.schemeIdUri,e.hasOwnProperty(S.default.VALUE)&&(t.value=e.value.toString(),i.push(t)));}),i},getBaseURLsFromElement:T,getRepresentationSortFunction:t,getLocation:function(e){if(e&&e.hasOwnProperty(g.default.LOCATION))return e.Location=e.Location_asArray[0],e.Location},getUseCalculatedLiveEdgeTimeForAdaptation:function(e){var t=v(e),n=t&&Array.isArray(t.Representation_asArray)?t.Representation_asArray[0]:null,r=void 0;if(n){if(n.hasOwnProperty(S.default.SEGMENT_LIST))return !(r=n.SegmentList).hasOwnProperty(S.default.SEGMENT_TIMELINE)||y(r.SegmentTimeline);if(n.hasOwnProperty(S.default.SEGMENT_TEMPLATE)&&(r=n.SegmentTemplate).hasOwnProperty(S.default.SEGMENT_TIMELINE))return y(r.SegmentTimeline)}return !1},getSuggestedPresentationDelay:function(e){return e&&e.hasOwnProperty(S.default.SUGGESTED_PRESENTATION_DELAY)?e.suggestedPresentationDelay:null},getAvailabilityStartTime:function(e){return e&&e.hasOwnProperty(S.default.AVAILABILITY_START_TIME)&&null!==e.availabilityStartTime?e.availabilityStartTime.getTime():null},getServiceDescriptions:function(e){var t=[];if(e&&e.hasOwnProperty(S.default.SERVICE_DESCRIPTION)){var n=!0,r=!1,i=void 0;try{for(var a,o=e.ServiceDescription_asArray[Symbol.iterator]();!(n=(a=o.next()).done);n=!0){var s=a.value,u=void 0,l=void 0,d=void 0,f=void 0;for(var c in s)s.hasOwnProperty(c)&&(c===S.default.ID?u=s[c]:c===S.default.SERVICE_DESCRIPTION_SCOPE?l=s[c].schemeIdUri:c===S.default.SERVICE_DESCRIPTION_LATENCY?d={target:s[c].target,max:s[c].max,min:s[c].min}:c===S.default.SERVICE_DESCRIPTION_PLAYBACK_RATE&&(f={max:s[c].max,min:s[c].min}));l===g.default.SERVICE_DESCRIPTION_LL_SCHEME&&(d||f)&&t.push({id:u,schemeIdUri:l,latency:d,playbackRate:f});}}catch(e){r=!0,i=e;}finally{try{!n&&o.return&&o.return();}finally{if(r)throw i}}}return t},getSupplementalPropperties:function(e){var t={};if(e&&e.hasOwnProperty(S.default.SUPPLEMENTAL_PROPERTY)){var n=!0,r=!1,i=void 0;try{for(var a,o=e.SupplementalProperty_asArray[Symbol.iterator]();!(n=(a=o.next()).done);n=!0){var s=a.value;s.hasOwnProperty(g.default.SCHEME_ID_URI)&&s.hasOwnProperty(S.default.VALUE)&&(t[s[g.default.SCHEME_ID_URI]]=s[S.default.VALUE]);}}catch(e){r=!0,i=e;}finally{try{!n&&o.return&&o.return();}finally{if(r)throw i}}}return t},setConfig:function(e){e&&(e.errHandler&&(d=e.errHandler),e.BASE64&&(f=e.BASE64));}},l=(0, w.default)(a).getInstance().getLogger(e),e}o.__dashjs_factory_name="DashManifestModel",n.default=a.default.getSingletonFactory(o),t.exports=n.default;},{108:108,204:204,216:216,220:220,225:225,45:45,47:47,51:51,61:61,84:84,85:85,86:86,87:87,90:90,91:91,92:92,96:96}],66:[function(e,t,n){function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(n,"__esModule",{value:!0});var i=r(e(47)),u=r(e(76)),l=r(e(3)),d=r(e(75)),f=r(e(73)),c=r(e(72)),h=r(e(74)),p=r(e(69)),g=r(e(70));function a(e){e=e||{};var t=this.context,n=e.debug,r=void 0,a=void 0,i=void 0,o=void 0,s=void 0;return r={parse:function(e){var t=void 0,n=window.performance.now();if(!(t=o.xml_str2json(e)))throw new Error("parsing the manifest failed");var r=window.performance.now();s.run(t);var i=window.performance.now();return a.info("Parsing complete: ( xml2json: "+(r-n).toPrecision(3)+"ms, objectiron: "+(i-r).toPrecision(3)+"ms, total: "+((i-n)/1e3).toPrecision(3)+"s)"),t.protocol="DASH",t},getMatchers:function(){return i},getIron:function(){return s}},a=n.getLogger(r),i=[new f.default,new c.default,new h.default,new d.default],o=new l.default({escapeMode:!1,attributePrefix:"",arrayAccessForm:"property",emptyNodeForm:"object",stripWhitespaces:!1,enableToStringFunc:!0,ignoreRoot:!0,matchers:i}),s=(0, u.default)(t).create({adaptationset:new p.default,period:new g.default}),r}a.__dashjs_factory_name="DashParser",n.default=i.default.getClassFactory(a),t.exports=n.default;},{3:3,47:47,69:69,70:70,72:72,73:73,74:74,75:75,76:76}],67:[function(e,t,n){function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r);}}Object.defineProperty(n,"__esModule",{value:!0});var i=(function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}(a,[{key:"name",get:function(){return this._name}},{key:"merge",get:function(){return this._merge}}]),a);function a(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a);var t;this._name=e,this._merge=(t=e)&&t.length&&t.charAt(0)===t.charAt(0).toUpperCase();}n.default=i,t.exports=n.default;},{}],68:[function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0});var r=function(e,t,n){return t&&i(e.prototype,t),n&&i(e,n),e};function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r);}}var a,o=e(67),s=(a=o)&&a.__esModule?a:{default:a},u=(r(l,[{key:"name",get:function(){return this._name}},{key:"children",get:function(){return this._children}},{key:"properties",get:function(){return this._properties}}]),l);function l(e,t,n){var r=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,l),this._name=e||"",this._properties=[],this._children=n||[],Array.isArray(t)&&t.forEach(function(e){r._properties.push(new s.default(e));});}n.default=u,t.exports=n.default;},{67:67}],69:[function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0});var r=function(e,t,n){for(var r=!0;r;){var i=e,a=t,o=n,r=!1;null===i&&(i=Function.prototype);var s=Object.getOwnPropertyDescriptor(i,a);if(void 0!==s){if("value"in s)return s.value;var u=s.get;if(void 0===u)return;return u.call(o)}var l=Object.getPrototypeOf(i);if(null===l)return;e=l,t=a,n=o,r=!0,s=l=void 0;}};function i(e){return e&&e.__esModule?e:{default:e}}var a=i(e(68)),o=i(e(61)),s=(function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t);}(u,a.default),u);function u(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,u);var e=[o.default.PROFILES,o.default.WIDTH,o.default.HEIGHT,o.default.SAR,o.default.FRAMERATE,o.default.AUDIO_SAMPLING_RATE,o.default.MIME_TYPE,o.default.SEGMENT_PROFILES,o.default.CODECS,o.default.MAXIMUM_SAP_PERIOD,o.default.START_WITH_SAP,o.default.MAX_PLAYOUT_RATE,o.default.CODING_DEPENDENCY,o.default.SCAN_TYPE,o.default.FRAME_PACKING,o.default.AUDIO_CHANNEL_CONFIGURATION,o.default.CONTENT_PROTECTION,o.default.ESSENTIAL_PROPERTY,o.default.SUPPLEMENTAL_PROPERTY,o.default.INBAND_EVENT_STREAM];r(Object.getPrototypeOf(u.prototype),"constructor",this).call(this,o.default.ADAPTATION_SET,e,[new a.default(o.default.REPRESENTATION,e,[new a.default(o.default.SUB_REPRESENTATION,e)])]);}n.default=s,t.exports=n.default;},{61:61,68:68}],70:[function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0});var r=function(e,t,n){for(var r=!0;r;){var i=e,a=t,o=n,r=!1;null===i&&(i=Function.prototype);var s=Object.getOwnPropertyDescriptor(i,a);if(void 0!==s){if("value"in s)return s.value;var u=s.get;if(void 0===u)return;return u.call(o)}var l=Object.getPrototypeOf(i);if(null===l)return;e=l,t=a,n=o,r=!0,s=l=void 0;}};function i(e){return e&&e.__esModule?e:{default:e}}var a=i(e(68)),o=i(e(61)),s=(function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t);}(u,a.default),u);function u(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,u);var e=[o.default.SEGMENT_BASE,o.default.SEGMENT_TEMPLATE,o.default.SEGMENT_LIST];r(Object.getPrototypeOf(u.prototype),"constructor",this).call(this,o.default.PERIOD,e,[new a.default(o.default.ADAPTATION_SET,e,[new a.default(o.default.REPRESENTATION,e)])]);}n.default=s,t.exports=n.default;},{61:61,68:68}],71:[function(e,t,n){function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r);}}Object.defineProperty(n,"__esModule",{value:!0});var i=(function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}(a,[{key:"test",get:function(){return this._test}},{key:"converter",get:function(){return this._converter}}]),a);function a(e,t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),this._test=e,this._converter=t;}n.default=i,t.exports=n.default;},{}],72:[function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0});var r=function(e,t,n){for(var r=!0;r;){var i=e,a=t,o=n,r=!1;null===i&&(i=Function.prototype);var s=Object.getOwnPropertyDescriptor(i,a);if(void 0!==s){if("value"in s)return s.value;var u=s.get;if(void 0===u)return;return u.call(o)}var l=Object.getPrototypeOf(i);if(null===l)return;e=l,t=a,n=o,r=!0,s=l=void 0;}};var i,a=e(71),o=(i=a)&&i.__esModule?i:{default:i},s=60,u=60,l=1e3,d=/^([0-9]{4})-([0-9]{2})-([0-9]{2})T([0-9]{2}):([0-9]{2})(?::([0-9]*)(\.[0-9]*)?)?(?:([+-])([0-9]{2})(?::?)([0-9]{2}))?/,f=(function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t);}(c,o.default),c);function c(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,c),r(Object.getPrototypeOf(c.prototype),"constructor",this).call(this,function(e){return d.test(e.value)},function(e){var t,n=d.exec(e),r=void 0,r=Date.UTC(parseInt(n[1],10),parseInt(n[2],10)-1,parseInt(n[3],10),parseInt(n[4],10),parseInt(n[5],10),n[6]&&parseInt(n[6],10)||0,n[7]&&parseFloat(n[7])*l||0);return n[9]&&n[10]&&(t=parseInt(n[9],10)*u+parseInt(n[10],10),r+=("+"===n[8]?-1:1)*t*s*l),new Date(r)});}n.default=f,t.exports=n.default;},{71:71}],73:[function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0});var r=function(e,t,n){for(var r=!0;r;){var i=e,a=t,o=n,r=!1;null===i&&(i=Function.prototype);var s=Object.getOwnPropertyDescriptor(i,a);if(void 0!==s){if("value"in s)return s.value;var u=s.get;if(void 0===u)return;return u.call(o)}var l=Object.getPrototypeOf(i);if(null===l)return;e=l,t=a,n=o,r=!0,s=l=void 0;}};function i(e){return e&&e.__esModule?e:{default:e}}var a=i(e(71)),o=i(e(108)),s=i(e(61)),u=/^([-])?P(([\d.]*)Y)?(([\d.]*)M)?(([\d.]*)D)?T?(([\d.]*)H)?(([\d.]*)M)?(([\d.]*)S)?/,l=31536e3,d=2592e3,f=86400,c=3600,h=60,p=(function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t);}(g,a.default),g);function g(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,g),r(Object.getPrototypeOf(g.prototype),"constructor",this).call(this,function(e){for(var t=[s.default.MIN_BUFFER_TIME,s.default.MEDIA_PRESENTATION_DURATION,s.default.MINIMUM_UPDATE_PERIOD,s.default.TIMESHIFT_BUFFER_DEPTH,s.default.MAX_SEGMENT_DURATION,s.default.MAX_SUBSEGMENT_DURATION,s.default.SUGGESTED_PRESENTATION_DELAY,s.default.START,o.default.START_TIME,s.default.DURATION],n=t.length,r=0;r<n;r++)if(e.nodeName===t[r])return u.test(e.value);return !1},function(e){var t=u.exec(e),n=parseFloat(t[3]||0)*l+parseFloat(t[5]||0)*d+parseFloat(t[7]||0)*f+parseFloat(t[9]||0)*c+parseFloat(t[11]||0)*h+parseFloat(t[13]||0);return void 0!==t[1]&&(n=-n),n});}n.default=p,t.exports=n.default;},{108:108,61:61,71:71}],74:[function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0});var r=function(e,t,n){for(var r=!0;r;){var i=e,a=t,o=n,r=!1;null===i&&(i=Function.prototype);var s=Object.getOwnPropertyDescriptor(i,a);if(void 0!==s){if("value"in s)return s.value;var u=s.get;if(void 0===u)return;return u.call(o)}var l=Object.getPrototypeOf(i);if(null===l)return;e=l,t=a,n=o,r=!0,s=l=void 0;}};var i,a=e(71),o=(i=a)&&i.__esModule?i:{default:i},s=/^[-+]?[0-9]+[.]?[0-9]*([eE][-+]?[0-9]+)?$/,u=(function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t);}(l,o.default),l);function l(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,l),r(Object.getPrototypeOf(l.prototype),"constructor",this).call(this,function(e){return s.test(e.value)},function(e){return parseFloat(e)});}n.default=u,t.exports=n.default;},{71:71}],75:[function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0});var r=function(e,t,n){for(var r=!0;r;){var i=e,a=t,o=n,r=!1;null===i&&(i=Function.prototype);var s=Object.getOwnPropertyDescriptor(i,a);if(void 0!==s){if("value"in s)return s.value;var u=s.get;if(void 0===u)return;return u.call(o)}var l=Object.getPrototypeOf(i);if(null===l)return;e=l,t=a,n=o,r=!0,s=l=void 0;}};function i(e){return e&&e.__esModule?e:{default:e}}function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var o=i(e(71)),s=i(e(61)),u=(function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t);}(l,o.default),l);function l(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,l),r(Object.getPrototypeOf(l.prototype),"constructor",this).call(this,function(e,t){var n,r=(a(n={},s.default.MPD,[s.default.ID,s.default.PROFILES]),a(n,s.default.PERIOD,[s.default.ID]),a(n,s.default.BASE_URL,[s.default.SERVICE_LOCATION,s.default.BYTE_RANGE]),a(n,s.default.SEGMENT_BASE,[s.default.INDEX_RANGE]),a(n,s.default.INITIALIZATION,[s.default.RANGE]),a(n,s.default.REPRESENTATION_INDEX,[s.default.RANGE]),a(n,s.default.SEGMENT_LIST,[s.default.INDEX_RANGE]),a(n,s.default.BITSTREAM_SWITCHING,[s.default.RANGE]),a(n,s.default.SEGMENT_URL,[s.default.MEDIA_RANGE,s.default.INDEX_RANGE]),a(n,s.default.SEGMENT_TEMPLATE,[s.default.INDEX_RANGE,s.default.MEDIA,s.default.INDEX,s.default.INITIALIZATION_MINUS,s.default.BITSTREAM_SWITCHING_MINUS]),a(n,s.default.ASSET_IDENTIFIER,[s.default.VALUE,s.default.ID]),a(n,s.default.EVENT_STREAM,[s.default.VALUE]),a(n,s.default.ADAPTATION_SET,[s.default.PROFILES,s.default.MIME_TYPE,s.default.SEGMENT_PROFILES,s.default.CODECS,s.default.CONTENT_TYPE]),a(n,s.default.FRAME_PACKING,[s.default.VALUE,s.default.ID]),a(n,s.default.AUDIO_CHANNEL_CONFIGURATION,[s.default.VALUE,s.default.ID]),a(n,s.default.CONTENT_PROTECTION,[s.default.VALUE,s.default.ID]),a(n,s.default.ESSENTIAL_PROPERTY,[s.default.VALUE,s.default.ID]),a(n,s.default.SUPPLEMENTAL_PROPERTY,[s.default.VALUE,s.default.ID]),a(n,s.default.INBAND_EVENT_STREAM,[s.default.VALUE,s.default.ID]),a(n,s.default.ACCESSIBILITY,[s.default.VALUE,s.default.ID]),a(n,s.default.ROLE,[s.default.VALUE,s.default.ID]),a(n,s.default.RATING,[s.default.VALUE,s.default.ID]),a(n,s.default.VIEWPOINT,[s.default.VALUE,s.default.ID]),a(n,s.default.CONTENT_COMPONENT,[s.default.CONTENT_TYPE]),a(n,s.default.REPRESENTATION,[s.default.ID,s.default.DEPENDENCY_ID,s.default.MEDIA_STREAM_STRUCTURE_ID]),a(n,s.default.SUBSET,[s.default.ID]),a(n,s.default.METRICS,[s.default.METRICS_MINUS]),a(n,s.default.REPORTING,[s.default.VALUE,s.default.ID]),n);if(r.hasOwnProperty(t)){var i=r[t];return void 0!==i&&0<=i.indexOf(e.name)}return !1},function(e){return String(e)});}n.default=u,t.exports=n.default;},{61:61,71:71}],76:[function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0});var r,i=e(47),a=(r=i)&&r.__esModule?r:{default:r};function o(d){function l(e,t,n){for(var r=0,i=e.length;r<i;++r){var a,o,s=e[r];t[s.name]&&(n[s.name]?s.merge&&(a=t[s.name],o=n[s.name],"object"==typeof a&&"object"==typeof o?function(e,t){for(var n in e)t.hasOwnProperty(n)||(t[n]=e[n]);}(a,o):n[s.name]=a+o):n[s.name]=t[s.name]);}}function f(e,t){for(var n=0,r=e.children.length;n<r;++n){var i=e.children[n],a=t[i.name+"_asArray"];if(a)for(var o=0,s=a.length;o<s;++o){var u=a[o];l(e.properties,t,u),f(i,u);}}}return {run:function(e){if(null===e||"object"!=typeof e)return e;if("period"in d)for(var t=d.period,n=e.Period_asArray,r=0,i=n.length;r<i;++r){var a=n[r];if(f(t,a),"adaptationset"in d){var o=a.AdaptationSet_asArray;if(o)for(var s=d.adaptationset,u=0,l=o.length;u<l;++u)f(s,o[u]);}}return e}}}o.__dashjs_factory_name="ObjectIron";var s=a.default.getClassFactory(o);n.default=s,t.exports=n.default;},{47:47}],77:[function(e,t,n){function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(n,"__esModule",{value:!0});var i=r(e(47)),a=r(e(108)),d=e(80);function o(e,s){var u=(e=e||{}).timelineConverter;function l(){if(!u||!u.hasOwnProperty("calcPeriodRelativeTimeFromMpdRelativeTime"))throw new Error(a.default.MISSING_CONFIG_ERROR)}function i(e,t){if(l(),!e)return null;var n,r=e.adaptation.period.mpd.manifest.Period_asArray[e.adaptation.period.index].AdaptationSet_asArray[e.adaptation.index].Representation_asArray[e.index].SegmentList,i=r.SegmentURL_asArray.length,a=e.startNumber,o=null;return t<i&&(n=r.SegmentURL_asArray[t],(o=(0, d.getIndexBasedSegment)(u,s,e,t))&&(o.replacementTime=(a+t-1)*e.segmentDuration,o.media=n.media?n.media:"",o.mediaRange=n.mediaRange,o.index=t,o.indexRange=n.indexRange)),e.availableSegmentsNumber=i,o}return {getSegmentByIndex:i,getSegmentByTime:function(e,t){if(l(),!e)return null;var n=e.segmentDuration;if(isNaN(n))return null;var r=u.calcPeriodRelativeTimeFromMpdRelativeTime(e,t);return i(e,Math.floor(r/n))}}}o.__dashjs_factory_name="ListSegmentsGetter";var s=i.default.getClassFactory(o);n.default=s,t.exports=n.default;},{108:108,47:47,80:80}],78:[function(e,t,n){function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r);}}Object.defineProperty(n,"__esModule",{value:!0});var i=(function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}(a,null,[{key:"round10",value:function(e,t){return n="round",r=e,void 0!==(i=t)&&0!=+i?(i=+i,null===(r=+r)||isNaN(r)||"number"!=typeof i||i%1!=0?NaN:(r=r.toString().split("e"),+((r=(r=Math[n](+(r[0]+"e"+(r[1]?r[1]-i:-i)))).toString().split("e"))[0]+"e"+(r[1]?+r[1]+i:i)))):Math[n](r);var n,r,i;}}]),a);function a(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a);}n.default=i,t.exports=n.default;},{}],79:[function(e,t,n){function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(n,"__esModule",{value:!0});var i=r(e(47)),o=r(e(108));function a(e){var n=(e=e||{}).timelineConverter;function a(){if(!n||!n.hasOwnProperty("calcPeriodRelativeTimeFromMpdRelativeTime"))throw new Error(o.default.MISSING_CONFIG_ERROR)}function r(e,t){if(a(),!e)return null;var n=e.segments?e.segments.length:-1,r=void 0;if(t<n&&(r=e.segments[t])&&r.availabilityIdx===t)return r;for(var i=0;i<n;i++)if((r=e.segments[i])&&r.availabilityIdx===t)return r;return null}return {getSegmentByIndex:r,getSegmentByTime:function(e,t){return a(),r(e,function(e,t){if(!e)return -1;var n=e.segments,r=n?n.length:null,i=-1,a=void 0,o=void 0,s=void 0,u=void 0,l=void 0;if(n&&0<r)for(l=0;l<r;l++)if(o=n[l],s=o.presentationStartTime,u=o.duration,s<=t+(a=u/2)&&t-a<s+u){i=o.availabilityIdx;break}return i}(e,n.calcPeriodRelativeTimeFromMpdRelativeTime(e,t)))}}}a.__dashjs_factory_name="SegmentBaseGetter";var s=i.default.getClassFactory(a);n.default=s,t.exports=n.default;},{108:108,47:47}],80:[function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.unescapeDollarsInTemplate=function(e){return e?e.split("$$").join("$"):e},n.replaceIDForTemplate=function(e,t){if(!t||!e||-1===e.indexOf("$RepresentationID$"))return e;var n=t.toString();return e.split("$RepresentationID$").join(n)},n.replaceTokenForTemplate=g,n.getIndexBasedSegment=function(e,t,n,r){var i,a,o=void 0;o=n.segmentDuration,isNaN(o)&&(o=n.adaptation.period.duration);i=parseFloat((n.adaptation.period.start+r*o).toFixed(5)),a=parseFloat((i+o).toFixed(5));var s=_(n,o,i,e.calcMediaTimeFromPresentationTime(i,n),e.calcAvailabilityStartTimeFromPresentationTime(i,n.adaptation.period.mpd,t),e,a,t,r);return E(e,n,s,t)?s:null},n.getTimeBasedSegment=function(e,t,n,r,i,a,o,s,u,l){var d,f,c=r/a,h=Math.min(i/a,n.adaptation.period.mpd.maxSegmentDuration),p=void 0;return d=e.calcPresentationTimeFromMediaTime(c,n),f=d+h,p=_(n,h,d,c,n.adaptation.period.mpd.manifest.loadedTime,e,f,t,u),E(e,n,p,t)?(p.replacementTime=l||r,o=g(o,"Number",p.replacementNumber),o=g(o,"Time",p.replacementTime),p.media=o,p.mediaRange=s,p):null};var r,i=e(94),f=(r=i)&&r.__esModule?r:{default:r};function c(e,t){for(;e.length<t;)e="0"+e;return e}function g(e,t,n){var r=void 0,i=void 0,a=void 0,o=void 0,s=void 0,u=void 0,l=t.length,d="%0".length;if(!e)return e;for(;;){if((r=e.indexOf("$"+t))<0)return e;if((i=e.indexOf("$",r+l))<0)return e;if(r<(a=e.indexOf("%0",r+l))&&a<i)switch(o=e.charAt(i-1),s=parseInt(e.substring(a+d,i-1),10),o){case"d":case"i":case"u":u=c(n.toString(),s);break;case"x":u=c(n.toString(16),s);break;case"X":u=c(n.toString(16),s).toUpperCase();break;case"o":u=c(n.toString(8),s);break;default:return e}else u=n;e=e.substring(0,r)+u+e.substring(i+1);}}function _(e,t,n,r,i,a,o,s,u){var l,d=new f.default;return d.representation=e,d.duration=t,d.presentationStartTime=n,d.mediaStartTime=r,d.availabilityStartTime=i,d.availabilityEndTime=a.calcAvailabilityEndTimeFromPresentationTime(o,e.adaptation.period.mpd,s),d.wallStartTime=a.calcWallTimeForSegment(d,s),d.replacementNumber=(l=u,d.representation.startNumber+l),d.availabilityIdx=u,d}function E(e,t,n,r){var i=e.getPeriodEnd(t,r);if(e.calcPeriodRelativeTimeFromMpdRelativeTime(t,i)<=e.calcPeriodRelativeTimeFromMpdRelativeTime(t,n.presentationStartTime)){if(!r)return;if(t.segmentAvailabilityRange&&n.presentationStartTime>=t.segmentAvailabilityRange.end)return}return 1}},{94:94}],81:[function(e,t,n){function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(n,"__esModule",{value:!0});var i=r(e(47)),a=r(e(108)),d=e(80);function o(e,s){var u=(e=e||{}).timelineConverter;function l(){if(!u||!u.hasOwnProperty("calcPeriodRelativeTimeFromMpdRelativeTime"))throw new Error(a.default.MISSING_CONFIG_ERROR)}function i(e,t){if(l(),!e)return null;var n=e.adaptation.period.mpd.manifest.Period_asArray[e.adaptation.period.index].AdaptationSet_asArray[e.adaptation.index].Representation_asArray[e.index].SegmentTemplate;t=Math.max(t,0);var r,i=(0, d.getIndexBasedSegment)(u,s,e,t);i&&(i.replacementTime=(t-1)*e.segmentDuration,r=n.media,r=(0, d.replaceTokenForTemplate)(r,"Number",i.replacementNumber),r=(0, d.replaceTokenForTemplate)(r,"Time",i.replacementTime),i.media=r);var a=e.segmentDuration,o=e.segmentAvailabilityRange;return isNaN(a)?e.availableSegmentsNumber=1:e.availableSegmentsNumber=Math.ceil((o.end-o.start)/a),i}return {getSegmentByIndex:i,getSegmentByTime:function(e,t){if(l(),!e)return null;var n=e.segmentDuration;if(isNaN(n))return null;var r=u.calcPeriodRelativeTimeFromMpdRelativeTime(e,t);return i(e,Math.floor(r/n))}}}o.__dashjs_factory_name="TemplateSegmentsGetter";var s=i.default.getClassFactory(o);n.default=s,t.exports=n.default;},{108:108,47:47,80:80}],82:[function(e,t,n){function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(n,"__esModule",{value:!0});var h=r(e(46)),p=r(e(54)),i=r(e(47)),g=r(e(61)),_=r(e(65));function a(){var e,t=this.context,n=(0, h.default)(t).getInstance(),c=void 0,i=void 0,u=void 0,r=void 0;function a(e){i=e;}function o(e,t,n,r){return r?n&&t.timeShiftBufferDepth!=Number.POSITIVE_INFINITY?new Date(t.availabilityStartTime.getTime()+1e3*(e+t.timeShiftBufferDepth)):t.availabilityEndTime:n?new Date(t.availabilityStartTime.getTime()+1e3*(e-i)):t.availabilityStartTime}function l(e,t){return (e.getTime()-t.mpd.availabilityStartTime.getTime()+1e3*i)/1e3}function s(e){u||void 0!==e.offset&&(a(e.offset/1e3),u=!0);}function d(){i=0,u=!1,r=NaN;}function f(){n.off(p.default.TIME_SYNCHRONIZATION_COMPLETED,s,this),d();}return e={initialize:function(){d(),n.on(p.default.TIME_SYNCHRONIZATION_COMPLETED,s,this);},isTimeSyncCompleted:function(){return u},setTimeSyncCompleted:function(e){u=e;},getClientTimeOffset:function(){return i},setClientTimeOffset:a,getExpectedLiveEdge:function(){return r},setExpectedLiveEdge:function(e){r=e;},calcAvailabilityStartTimeFromPresentationTime:function(e,t,n){return o.call(this,e,t,n)},calcAvailabilityEndTimeFromPresentationTime:function(e,t,n){return o.call(this,e,t,n,!0)},calcPresentationTimeFromWallTime:l,calcPresentationTimeFromMediaTime:function(e,t){return e+(t.adaptation.period.start-t.presentationTimeOffset)},calcPeriodRelativeTimeFromMpdRelativeTime:function(e,t){return t-e.adaptation.period.start},calcMediaTimeFromPresentationTime:function(e,t){return e-t.adaptation.period.start+t.presentationTimeOffset},calcSegmentAvailabilityRange:function(e,t){var n=e.adaptation.period,r={start:n.start,end:n.start+n.duration};if(!t)return r;if(!u&&e.segmentAvailabilityRange)return e.segmentAvailabilityRange;var i=e.segmentDuration||(e.segments&&e.segments.length?e.segments[e.segments.length-1].duration:0);if(e.segmentInfoType===g.default.SEGMENT_TIMELINE&&n.mpd.timeShiftBufferDepth===Number.POSITIVE_INFINITY)return function(e){var t,n=e.adaptation.period.mpd.manifest.Period_asArray[e.adaptation.period.index].AdaptationSet_asArray[e.adaptation.index],r=c.getRepresentationFor(e.index,n),i=r.SegmentTemplate.SegmentTimeline,a=r.SegmentTemplate.timescale,o=i.S_asArray,s={start:0,end:0},u=0,l=void 0,d=void 0,f=void 0;for(s.start=o[0].t/a,f=0,t=o.length;f<t;f++)l=o[f],d=0,l.hasOwnProperty("r")&&(d=l.r),u+=l.d/a*(1+d);return s.end=s.start+u,s}(e);var a=l(new Date,n),o=n.start+n.duration;r.start=Math.max(a-n.mpd.timeShiftBufferDepth,n.start);var s=void 0!==e.availabilityTimeOffset&&e.availabilityTimeOffset<i?i-e.availabilityTimeOffset:i;return r.end=o<=a&&a-s<o?o:a-s,r},getPeriodEnd:function(e,t){var n=e.adaptation.period;if(!t)return n.start+n.duration;if(!u&&e.segmentAvailabilityRange)return e.segmentAvailabilityRange;var r=e.segmentDuration||(e.segments&&e.segments.length?e.segments[e.segments.length-1].duration:0),i=l(new Date,n),a=n.start+n.duration,o=void 0!==e.availabilityTimeOffset&&e.availabilityTimeOffset<r?r-e.availabilityTimeOffset:r;return Math.min(i-o,a)},calcWallTimeForSegment:function(e,t){var n=void 0,r=void 0,i=void 0;return t&&(n=e.representation.adaptation.period.mpd.suggestedPresentationDelay,r=e.presentationStartTime+n,i=new Date(e.availabilityStartTime.getTime()+1e3*r)),i},reset:f},c=(0, _.default)(t).getInstance(),f(),e}a.__dashjs_factory_name="TimelineConverter",n.default=i.default.getSingletonFactory(a),t.exports=n.default;},{46:46,47:47,54:54,61:61,65:65}],83:[function(e,t,n){function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(n,"__esModule",{value:!0});var i=r(e(47)),a=r(e(108)),p=e(80);function o(e,v){var y=(e=e||{}).timelineConverter;function t(){if(!y||!y.hasOwnProperty("calcMediaTimeFromPresentationTime")||!y.hasOwnProperty("calcSegmentAvailabilityRange"))throw new Error(a.default.MISSING_CONFIG_ERROR)}function n(e,t){for(var n,r=e.adaptation.period.mpd.manifest.Period_asArray[e.adaptation.period.index].AdaptationSet_asArray[e.adaptation.index].Representation_asArray[e.index].SegmentTemplate||e.adaptation.period.mpd.manifest.Period_asArray[e.adaptation.period.index].AdaptationSet_asArray[e.adaptation.index].Representation_asArray[e.index].SegmentList,i=r.SegmentTimeline,a=r.SegmentURL_asArray,o=0,s=0,u=-1,l=void 0,d=void 0,f=void 0,c=void 0,h=void 0,p=void 0,g=e.timescale,_=!1,d=0,E=(n=i.S_asArray).length;d<E&&!_;d++){var m,c=0;for((l=n[d]).hasOwnProperty("r")&&(c=l.r),l.hasOwnProperty("t")&&(s=(o=l.t)/g),c<0&&((p=n[d+1])&&p.hasOwnProperty("t")?h=p.t/g:(m=e.segmentAvailabilityRange?e.segmentAvailabilityRange.end:y.calcSegmentAvailabilityRange(e,v).end,h=y.calcMediaTimeFromPresentationTime(m,e),e.segmentDuration=l.d/g),c=Math.ceil((h-s)/(l.d/g))-1),f=0;f<=c&&!_;f++)(_=t(o,s,r,a,l,g,++u,d))&&(e.segmentDuration=l.d/g,(f<c-1||d<E-1)&&u++),s=(o+=l.d)/g;}e.availableSegmentsNumber=u;}return {getSegmentByIndex:function(d,e,f){if(t(),!d)return null;var c=null,h=!1;return n(d,function(e,t,n,r,i,a,o,s){if(h||f<0){var u=n.media,l=i.mediaRange;return r&&(u=r[s].media||"",l=r[s].mediaRange),c=(0, p.getTimeBasedSegment)(y,v,d,e,i.d,a,u,l,o,i.tManifest),!0}return t>=f-.5*i.d/a&&(h=!0),!1}),c},getSegmentByTime:function(d,e){if(t(),!d)return null;void 0===e&&(e=null);var f=null,c=y.calcMediaTimeFromPresentationTime(e,d);return n(d,function(e,t,n,r,i,a,o,s){if(c<t+i.d/a){var u=n.media,l=i.mediaRange;return r&&(u=r[s].media||"",l=r[s].mediaRange),f=(0, p.getTimeBasedSegment)(y,v,d,e,i.d,a,u,l,o,i.tManifest),!0}return !1}),f}}}o.__dashjs_factory_name="TimelineSegmentsGetter";var s=i.default.getClassFactory(o);n.default=s,t.exports=n.default;},{108:108,47:47,80:80}],84:[function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0});n.default=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.period=null,this.index=-1,this.type=null;},t.exports=n.default;},{}],85:[function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0});function i(e,t,n,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),this.url=e||"",this.serviceLocation=t||e||"",this.dvb_priority=n||1,this.dvb_weight=r||1,this.availabilityTimeOffset=0,this.availabilityTimeComplete=!0;}i.DEFAULT_DVB_PRIORITY=1,i.DEFAULT_DVB_WEIGHT=1,n.default=i,t.exports=n.default;},{}],86:[function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0});n.default=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.duration=NaN,this.presentationTime=NaN,this.id=NaN,this.messageData="",this.eventStream=null,this.presentationTimeDelta=NaN;},t.exports=n.default;},{}],87:[function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0});n.default=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.adaptionSet=null,this.representation=null,this.period=null,this.timescale=1,this.value="",this.schemeIdUri="";},t.exports=n.default;},{}],88:[function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0});n.default=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.DVRWindowSize=NaN,this.loadedTime=null,this.availableFrom=null,this.minBufferTime=NaN,this.duration=NaN,this.isDynamic=!1,this.maxFragmentDuration=null;},t.exports=n.default;},{}],89:[function(e,t,n){function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r);}}Object.defineProperty(n,"__esModule",{value:!0});var i=(function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}(a,[{key:"isMediaInfoEqual",value:function(e){if(!e)return !1;var t=this.id===e.id,n=this.viewpoint===e.viewpoint,r=this.lang===e.lang,i=this.roles.toString()===e.roles.toString(),a=this.accessibility.toString()===e.accessibility.toString(),o=this.audioChannelConfiguration.toString()===e.audioChannelConfiguration.toString();return t&&n&&r&&i&&a&&o}}]),a);function a(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),this.id=null,this.index=null,this.type=null,this.streamInfo=null,this.representationCount=0,this.lang=null,this.viewpoint=null,this.accessibility=null,this.audioChannelConfiguration=null,this.roles=null,this.codec=null,this.mimeType=null,this.contentProtection=null,this.isText=!1,this.KID=null,this.bitrateList=null;}n.default=i,t.exports=n.default;},{}],90:[function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0});n.default=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.manifest=null,this.suggestedPresentationDelay=0,this.availabilityStartTime=null,this.availabilityEndTime=Number.POSITIVE_INFINITY,this.timeShiftBufferDepth=Number.POSITIVE_INFINITY,this.maxSegmentDuration=Number.POSITIVE_INFINITY,this.minimumUpdatePeriod=NaN,this.mediaPresentationDuration=NaN;},t.exports=n.default;},{}],91:[function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0});function r(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,r),this.id=null,this.index=-1,this.duration=NaN,this.start=NaN,this.mpd=null;}r.DEFAULT_ID="defaultId",n.default=r,t.exports=n.default;},{}],92:[function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0});var r=function(e,t,n){return t&&i(e.prototype,t),n&&i(e,n),e};function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r);}}var a,o=e(61),s=(a=o)&&a.__esModule?a:{default:a},u=(r(l,[{key:"hasInitialization",value:function(){return null!==this.initialization||null!==this.range}},{key:"hasSegments",value:function(){return this.segmentInfoType!==s.default.BASE_URL&&this.segmentInfoType!==s.default.SEGMENT_BASE&&!this.indexRange}}]),l);function l(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,l),this.id=null,this.index=-1,this.adaptation=null,this.segmentInfoType=null,this.initialization=null,this.codecs=null,this.codecPrivateData=null,this.segmentDuration=NaN,this.timescale=1,this.startNumber=1,this.indexRange=null,this.range=null,this.presentationTimeOffset=0,this.MSETimeOffset=NaN,this.segmentAvailabilityRange=null,this.availableSegmentsNumber=0,this.bandwidth=NaN,this.width=NaN,this.height=NaN,this.scanType=null,this.maxPlayoutRate=NaN,this.availabilityTimeOffset=0,this.availabilityTimeComplete=!0;}n.default=u,t.exports=n.default;},{61:61}],93:[function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0});n.default=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.id=null,this.quality=null,this.DVRWindow=null,this.fragmentDuration=null,this.mediaInfo=null,this.MSETimeOffset=null;},t.exports=n.default;},{}],94:[function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0});n.default=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.indexRange=null,this.index=null,this.mediaRange=null,this.media=null,this.duration=NaN,this.replacementTime=null,this.replacementNumber=NaN,this.mediaStartTime=NaN,this.presentationStartTime=NaN,this.availabilityStartTime=NaN,this.availabilityEndTime=NaN,this.availabilityIdx=NaN,this.wallStartTime=NaN,this.representation=null;},t.exports=n.default;},{}],95:[function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0});n.default=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.id=null,this.index=null,this.start=NaN,this.duration=NaN,this.manifestInfo=null,this.isLast=!0;},t.exports=n.default;},{}],96:[function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0});n.default=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.schemeIdUri="",this.value="";},t.exports=n.default;},{}],97:[function(e,t,n){function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(n,"__esModule",{value:!0});var l=r(e(108)),d=r(e(158)),f=r(e(228)),c=r(e(225)),i=r(e(47));function a(e){e=e||{};var t=this.context,i=e.eventBus,a=e.events,n=e.urlUtils,o=e.errors,s=void 0,u=void 0;return s={checkForExistence:function(t){function e(e){i.trigger(a.CHECK_FOR_EXISTENCE_COMPLETED,{request:t,exists:e});}var n;t?(n=new f.default(t.url),u.load({request:n,success:function(){e(!0);},error:function(){e(!1);}})):e(!1);},load:function(n){function r(e,t){i.trigger(a.LOADING_COMPLETED,{request:n,response:e||null,error:t||null,sender:s});}n?u.load({request:n,progress:function(e){i.trigger(a.LOADING_PROGRESS,{request:n,stream:e.stream}),e.data&&i.trigger(a.LOADING_DATA_PROGRESS,{request:n,response:e.data||null,error:null,sender:s});},success:function(e){r(e);},error:function(e,t,n){r(void 0,new c.default(o.FRAGMENT_LOADER_LOADING_FAILURE_ERROR_CODE,n,t));},abort:function(e){e&&i.trigger(a.LOADING_ABANDONED,{request:e,mediaType:e.mediaType,sender:s});}}):r(void 0,new c.default(o.FRAGMENT_LOADER_NULL_REQUEST_ERROR_CODE,o.FRAGMENT_LOADER_NULL_REQUEST_ERROR_MESSAGE));},abort:function(){u&&u.abort();},reset:function(){u&&(u.abort(),u=null);}},u=(0, d.default)(t).create({errHandler:e.errHandler,errors:o,dashMetrics:e.dashMetrics,mediaPlayerModel:e.mediaPlayerModel,requestModifier:e.requestModifier,useFetch:e.settings.get().streaming.lowLatencyEnabled,urlUtils:n,constants:l.default,boxParser:e.boxParser,dashConstants:e.dashConstants}),s}a.__dashjs_factory_name="FragmentLoader",n.default=i.default.getClassFactory(a),t.exports=n.default;},{108:108,158:158,225:225,228:228,47:47}],98:[function(e,t,n){function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(n,"__esModule",{value:!0});var E=r(e(108)),a=r(e(61)),o=r(e(123)),s=r(e(158)),u=r(e(220)),m=r(e(232)),v=r(e(225)),y=e(241),T=r(e(46)),S=r(e(54)),A=r(e(51)),i=r(e(47)),I=r(e(66));function l(e){e=e||{};var l=this.context,d=e.debug,f=(0, T.default)(l).getInstance(),c=(0, u.default)(l).getInstance(),t=void 0,h=void 0,n=void 0,p=void 0,g=void 0,_=e.mssHandler,r=e.errHandler;function i(e){f.trigger(S.default.INTERNAL_MANIFEST_LOADED,{manifest:e.manifest});}return t={load:function(u){var e=new m.default(u,y.HTTPRequest.MPD_TYPE);n.load({request:e,success:function(e,t,n){if(p){var r,i,a=void 0,o=void 0,s=void 0;if(n&&n!==u?(o=c.parseBaseUrl(n),a=n):(c.isRelative(u)&&(u=c.resolve(u,window.location.href)),o=c.parseBaseUrl(u)),null===g&&(i=null,g=-1<(r=e).indexOf("SmoothStreamingMedia")?(_&&(i=_.createMssParser(),_.registerEvents()),i):-1<r.indexOf("MPD")?(0, I.default)(l).create({debug:d}):i),null!==g){p.setMatchers(g.getMatchers()),p.setIron(g.getIron());try{s=g.parse(e);}catch(e){return void f.trigger(S.default.INTERNAL_MANIFEST_LOADED,{manifest:null,error:new v.default(A.default.MANIFEST_LOADER_PARSING_FAILURE_ERROR_CODE,A.default.MANIFEST_LOADER_PARSING_FAILURE_ERROR_MESSAGE+""+u)})}s?(s.url=a||u,s.originalUrl||(s.originalUrl=s.url),s.hasOwnProperty(E.default.LOCATION)&&(o=c.parseBaseUrl(s.Location_asArray[0]),h.debug("BaseURI set by Location to: "+o)),s.baseUri=o,s.loadedTime=new Date,p.resolveManifestOnLoad(s),f.trigger(S.default.ORIGINAL_MANIFEST_LOADED,{originalManifest:e})):f.trigger(S.default.INTERNAL_MANIFEST_LOADED,{manifest:null,error:new v.default(A.default.MANIFEST_LOADER_PARSING_FAILURE_ERROR_CODE,A.default.MANIFEST_LOADER_PARSING_FAILURE_ERROR_MESSAGE+""+u)});}else f.trigger(S.default.INTERNAL_MANIFEST_LOADED,{manifest:null,error:new v.default(A.default.MANIFEST_LOADER_PARSING_FAILURE_ERROR_CODE,A.default.MANIFEST_LOADER_PARSING_FAILURE_ERROR_MESSAGE+""+u)});}},error:function(e,t,n){f.trigger(S.default.INTERNAL_MANIFEST_LOADED,{manifest:null,error:new v.default(A.default.MANIFEST_LOADER_LOADING_FAILURE_ERROR_CODE,A.default.MANIFEST_LOADER_LOADING_FAILURE_ERROR_MESSAGE+(u+", ")+n)});}});},reset:function(){f.off(S.default.XLINK_READY,i,t),p&&(p.reset(),p=null),n&&(n.abort(),n=null),_&&_.reset();}},h=d.getLogger(t),f.on(S.default.XLINK_READY,i,t),n=(0, s.default)(l).create({errHandler:e.errHandler,dashMetrics:e.dashMetrics,mediaPlayerModel:e.mediaPlayerModel,requestModifier:e.requestModifier,useFetch:e.settings.get().streaming.lowLatencyEnabled,urlUtils:c,constants:E.default,dashConstants:a.default,errors:A.default}),p=(0, o.default)(l).create({errHandler:r,dashMetrics:e.dashMetrics,mediaPlayerModel:e.mediaPlayerModel,requestModifier:e.requestModifier,settings:e.settings}),g=null,t}l.__dashjs_factory_name="ManifestLoader";var d=i.default.getClassFactory(l);n.default=d,t.exports=n.default;},{108:108,123:123,158:158,220:220,225:225,232:232,241:241,46:46,47:47,51:51,54:54,61:61,66:66}],99:[function(e,t,n){function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(n,"__esModule",{value:!0});var A=r(e(46)),I=r(e(54)),i=r(e(47)),R=r(e(45)),b=r(e(51)),D=r(e(61));function a(){var e=this.context,r=(0, A.default)(e).getInstance(),t=void 0,i=void 0,a=void 0,n=void 0,o=void 0,s=void 0,u=void 0,l=void 0,d=void 0,f=void 0,c=void 0;function h(){a=NaN,o=!(s=!1),p();}function p(){null!==n&&(clearTimeout(n),n=null);}function g(e){p(),isNaN(e)&&!isNaN(a)&&(e=1e3*a),isNaN(e)||(i.debug("Refresh manifest in "+e+" milliseconds."),n=setTimeout(m,e));}function _(){s=!0;var e=l.getValue(),t=e.url,n=d.getLocation(e);n&&(t=n),u.load(t);}function E(e){var t,n;l.getValue()&&l.getValue().type===D.default.DYNAMIC&&e.type===D.default.STATIC?r.trigger(I.default.DYNAMIC_STREAM_COMPLETED):(l.setValue(e),n=((t=new Date).getTime()-e.loadedTime.getTime())/1e3,2147483647<1e3*(a=d.getManifestUpdatePeriod(e,n))&&(a=2147483.647),r.trigger(I.default.MANIFEST_UPDATED,{manifest:e}),i.info("Manifest has been refreshed at "+t+"["+t.getTime()/1e3+"] "),o||g());}function m(){o&&!c.get().streaming.scheduleWhilePaused||(s?g(c.get().streaming.manifestUpdateRetryInterval):_());}function v(e){e.error?e.error.code===b.default.MANIFEST_LOADER_PARSING_FAILURE_ERROR_CODE&&f.error(e.error):E(e.manifest);}function y(){o=!1,g();}function T(){o=!0,p();}function S(){s=!1;}return t={initialize:function(){h(),r.on(I.default.STREAMS_COMPOSED,S,this),r.on(I.default.PLAYBACK_STARTED,y,this),r.on(I.default.PLAYBACK_PAUSED,T,this),r.on(I.default.INTERNAL_MANIFEST_LOADED,v,this);},setManifest:function(e){E(e);},refreshManifest:_,setConfig:function(e){e&&(e.manifestModel&&(l=e.manifestModel),e.adapter&&(d=e.adapter),e.manifestLoader&&(u=e.manifestLoader),e.errHandler&&(f=e.errHandler),e.settings&&(c=e.settings));},reset:function(){r.off(I.default.PLAYBACK_STARTED,y,this),r.off(I.default.PLAYBACK_PAUSED,T,this),r.off(I.default.STREAMS_COMPOSED,S,this),r.off(I.default.INTERNAL_MANIFEST_LOADED,v,this),h();}},i=(0, R.default)(e).getInstance().getLogger(t),t}a.__dashjs_factory_name="ManifestUpdater",n.default=i.default.getClassFactory(a),t.exports=n.default;},{45:45,46:46,47:47,51:51,54:54,61:61}],100:[function(e,t,n){function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(n,"__esModule",{value:!0});var oe=r(e(2)),se=r(e(108)),ue=r(e(61)),le=r(e(109)),de=r(e(119)),fe=r(e(121)),ce=r(e(117)),he=r(e(112)),pe=r(e(98)),ge=r(e(212)),_e=r(e(207)),Ee=r(e(202)),me=r(e(217)),ve=r(e(200)),ye=r(e(153)),Te=r(e(150)),Se=r(e(151)),Ae=r(e(111)),Ie=r(e(157)),Re=r(e(154)),be=r(e(148)),De=r(e(209)),Me=r(e(45)),Ne=r(e(51)),Ce=r(e(46)),Oe=r(e(54)),we=r(e(101)),Pe=r(e(47)),Le=r(e(48)),xe=e(50),Fe=r(e(63)),Ue=r(e(56)),ke=r(e(58)),Be=r(e(82)),Ge=e(241),je=r(e(1)),Ye=r(e(9)),Ke=r(e(225)),qe=e(218),He=r(e(99)),Ve=r(e(220)),ze=r(e(206));function i(){var i="You must first call initialize() and set a source before calling this method",r="You must first call initialize() and set a valid source and view before calling this method",t="You must first call attachView() to set the video element before calling this method",e="You must first call attachSource() with a valid source before calling this method",a="MediaPlayer not initialized!",o=this.context,s=(0, Ce.default)(o).getInstance(),u=(0, Le.default)(o).getInstance(),l=(0, Me.default)(o).getInstance({settings:u}),n=void 0,d=void 0,f=void 0,c=void 0,h=void 0,p=void 0,g=void 0,_=void 0,E=void 0,m=void 0,v=void 0,y=void 0,T=void 0,S=void 0,A=void 0,I=void 0,R=void 0,b=void 0,D=void 0,M=void 0,N=void 0,C=void 0,O=void 0,w=void 0,P=void 0,L=void 0,x=void 0,F=void 0,U=void 0,k=void 0,B=void 0;function G(){return !!f&&!!x.getElement()}function j(){return (0, xe.getVersionString)()}function Y(){if(!g)throw r;return O.isPaused()}function K(e){var t=w.getCurrentDVRInfo();if(!t)return 0;var n=O.getLiveDelay(),r=t.range.start+e;return r>t.range.end-n&&(r=t.range.end-n),r}function q(e){if(!g)throw r;var t,n=X().currentTime;return void 0!==e?n=C.getTimeRelativeToStreamId(n,e):O.getIsDynamic()&&(n=null===(t=w.getCurrentDVRInfo())?0:H()-(t.range.end-t.time)),n}function H(){if(!g)throw r;var e=X().duration;if(O.getIsDynamic()){var t,n=w.getCurrentDVRInfo();if(!n)return 0;e=(t=n.range.end-n.range.start)<n.manifestInfo.DVRWindowSize?t:n.manifestInfo.DVRWindowSize;}return e}function V(e){(0, qe.checkParameterType)(e,"boolean"),_=e;}function z(){b.restoreDefaultUTCTimingSources();}function W(){return w}function X(){if(!x.getElement())throw t;return x.getElement()}function Q(e){if(!h)throw a;x.setElement(e),e&&(ne(),function(){if(S)return;var e=dashjs.MetricsReporting;{var t;"function"==typeof e&&(t=e(o).create(),S=t.createMetricsReporting({debug:l,eventBus:s,mediaElement:X(),adapter:R,dashMetrics:w,events:Oe.default,constants:se.default,metricsConstants:le.default}));}}(),function(){if(A)return;var e=dashjs.MssHandler;"function"==typeof e&&(Ne.default.extend(e.errors),A=e(o).create({eventBus:s,mediaPlayerModel:b,dashMetrics:w,manifestModel:P,playbackController:O,streamController:C,protectionController:T,baseURLController:M,errHandler:D,events:Oe.default,constants:se.default,debug:l,initSegmentType:Ge.HTTPRequest.INIT_SEGMENT_TYPE,BASE64:je.default,ISOBoxer:Ye.default,settings:u}));}(),C&&C.switchToVideoElement()),g&&ee(),ae();}function Z(e){if(!p)throw i;var t=C.getActiveStreamInfo();return y.getTracksFor(e,t)}function $(e){if(!h)throw a;"string"==typeof e&&U.initialize(e),f=e,(p||g)&&ee(),G()&&ae();}function J(){if(!p)throw i;var e=C.getActiveStreamInfo();return e?C.getStreamById(e.id):null}function ee(){p=g=!1,R.reset(),C.reset(),O.reset(),E.reset(),y.reset(),F.reset(),T&&(u.get().streaming.keepProtectionMediaKeys?T.stop():(T.reset(),T=null,ne())),L.reset();}function te(){return (0, pe.default)(o).create({debug:l,errHandler:D,dashMetrics:w,mediaPlayerModel:b,requestModifier:(0, me.default)(o).getInstance(),mssHandler:A,settings:u})}function ne(){if(T)return T;var e=dashjs.Protection;if("function"!=typeof e)return null;var t=e(o).create();return Oe.default.extend(e.events),we.default.extend(e.events,{publicOnly:!0}),Ne.default.extend(e.errors),N=N||(0, _e.default)(o).getInstance(),T=t.createProtectionSystem({debug:l,errHandler:D,videoModel:x,capabilities:N,eventBus:s,events:Oe.default,BASE64:je.default,constants:se.default})}function re(){if(!h)throw a;if(I)return I;var e=dashjs.OfflineController;if("function"!=typeof e)return null;Oe.default.extend(e.events),we.default.extend(e.events,{publicOnly:!0}),Ne.default.extend(e.errors);var t=te(),n=(0, He.default)(o).create();return n.setConfig({manifestModel:P,adapter:R,manifestLoader:t,errHandler:D}),I=e(o).create({debug:l,manifestUpdater:n,baseURLController:M,manifestLoader:t,manifestModel:P,mediaPlayerModel:b,abrController:E,playbackController:O,adapter:R,errHandler:D,dashMetrics:w,timelineConverter:v,schemeLoaderFactory:m,eventBus:s,events:Oe.default,errors:Ne.default,constants:se.default,settings:u,dashConstants:ue.default,urlUtils:(0, Ve.default)(o).getInstance()})}function ie(e){var t=w.getCurrentDVRInfo();return t?e+(t.manifestInfo.availableFrom.getTime()/1e3+t.range.start):0}function ae(){var e;I&&I.resetRecords(),!p&&f&&(p=!0,d.info("Streaming Initialized"),e=te(),C=C||(0, fe.default)(o).getInstance(),y.setConfig({domStorage:k}),C.setConfig({capabilities:N,manifestLoader:e,manifestModel:P,mediaPlayerModel:b,protectionController:T,adapter:R,dashMetrics:w,errHandler:D,timelineConverter:v,videoModel:x,playbackController:O,abrController:E,mediaController:y,textController:F,settings:u,baseURLController:M}),O.setConfig({streamController:C,dashMetrics:w,mediaPlayerModel:b,adapter:R,videoModel:x,timelineConverter:v,uriFragmentModel:U,settings:u}),E.setConfig({streamController:C,domStorage:k,mediaPlayerModel:b,dashMetrics:w,adapter:R,videoModel:x,settings:u}),E.createAbrRulesCollection(),F.setConfig({errHandler:D,manifestModel:P,adapter:R,mediaController:y,streamController:C,videoModel:x}),L.setConfig({abrController:E,dashMetrics:w,playbackController:O}),C.initialize(_,c),L.initialize(),"string"==typeof f?C.load(f):C.loadWithManifest(f)),!g&&G()&&(g=!0,d.info("Playback Initialized"));}return n={initialize:function(e,t,n){N=N||(0, _e.default)(o).getInstance(),D=(0, ge.default)(o).getInstance(),N.supportsMediaSource()?h||(h=!0,v=(0, Be.default)(o).getInstance(),E||(E=(0, Ae.default)(o).getInstance()).setConfig({settings:u}),m=m||(0, Ie.default)(o).getInstance(),O=O||(0, de.default)(o).getInstance(),y=y||(0, ce.default)(o).getInstance(),C=C||(0, fe.default)(o).getInstance(),R=(0, Ue.default)(o).getInstance(),P=(0, Te.default)(o).getInstance(),L=(0, be.default)(o).getInstance(),w=(0, ke.default)(o).getInstance({settings:u}),F=(0, ve.default)(o).getInstance(),k=(0, De.default)(o).getInstance({settings:u}),R.setConfig({constants:se.default,cea608parser:oe.default,errHandler:D,BASE64:je.default}),(M=M||(0, he.default)(o).create()).setConfig({adapter:R}),(B=(0, Fe.default)(o).getInstance({dashMetrics:w,mediaPlayerModel:b,errHandler:D,baseURLController:M,events:Oe.default,eventBus:s,debug:l,boxParser:(0, ze.default)(o).getInstance(),requestModifier:(0, me.default)(o).getInstance(),errors:Ne.default})).initialize(),z(),V(void 0===n||n),re(),e&&Q(e),t&&$(t),d.info("[dash.js "+j()+"] MediaPlayer has been initialized")):D.error(new Ke.default(Ne.default.CAPABILITY_MEDIASOURCE_ERROR_CODE,Ne.default.CAPABILITY_MEDIASOURCE_ERROR_MESSAGE));},setConfig:function(e){e&&(e.capabilities&&(N=e.capabilities),e.streamController&&(C=e.streamController),e.playbackController&&(O=e.playbackController),e.mediaPlayerModel&&(b=e.mediaPlayerModel),e.abrController&&(E=e.abrController),e.schemeLoaderFactory&&(m=e.schemeLoaderFactory),e.mediaController&&(y=e.mediaController),e.settings&&(u=e.settings));},on:function(e,t,n){s.on(e,t,n);},off:function(e,t,n){s.off(e,t,n);},extend:function(e,t,n){Pe.default.extend(e,t,n,o);},attachView:Q,attachSource:$,isReady:G,preload:function(){if(x.getElement()||p)return !1;if(!f)throw e;ae();},play:function(){if(!g)throw r;(!_||Y()&&g)&&O.play();},isPaused:Y,pause:function(){if(!g)throw r;O.pause();},isSeeking:function(){if(!g)throw r;return O.isSeeking()},isDynamic:function(){if(!g)throw r;return O.getIsDynamic()},seek:function(e){if(!g)throw r;if((0, qe.checkParameterType)(e,"number"),isNaN(e))throw se.default.BAD_ARGUMENT_ERROR;var t=O.getIsDynamic()?K(e):e;O.seek(t);},setPlaybackRate:function(e){X().playbackRate=e;},getPlaybackRate:function(){return X().playbackRate},setMute:function(e){(0, qe.checkParameterType)(e,"boolean"),X().muted=e;},isMuted:function(){return X().muted},setVolume:function(e){if("number"!=typeof e||isNaN(e)||e<0||1<e)throw se.default.BAD_ARGUMENT_ERROR;X().volume=e;},getVolume:function(){return X().volume},time:q,duration:H,timeAsUTC:function(){if(!g)throw r;return q()<0?NaN:ie(q())},durationAsUTC:function(){if(!g)throw r;return ie(H())},getActiveStream:J,getDVRWindowSize:function(){var e=w.getCurrentDVRInfo();return e?e.manifestInfo.DVRWindowSize:0},getDVRSeekOffset:K,convertToTimeCode:function(e){e=Math.max(e,0);var t=Math.floor(e/3600),n=Math.floor(e%3600/60),r=Math.floor(e%3600%60);return (0===t?"":t<10?"0"+t.toString()+":":t.toString()+":")+(n<10?"0"+n.toString():n.toString())+":"+(r<10?"0"+r.toString():r.toString())},formatUTC:function(e,t,n){var r=!(arguments.length<=3||void 0===arguments[3])&&arguments[3],i=new Date(1e3*e),a=i.toLocaleDateString(t),o=i.toLocaleTimeString(t,{hour12:n});return r?o+" "+a:o},getVersion:j,getDebug:function(){return l},getBufferLength:function(e){var t,n=[se.default.VIDEO,se.default.AUDIO,se.default.FRAGMENTED_TEXT];return e?-1===n.indexOf(e)?(d.warn("getBufferLength requested for invalid type"),NaN):(t=w.getCurrentBufferLevel(e))||NaN:(t=n.map(function(e){return 0<Z(e).length?w.getCurrentBufferLevel(e):Number.MAX_VALUE}).reduce(function(e,t){return Math.min(e,t)}))===Number.MAX_VALUE?NaN:t},getTTMLRenderingDiv:function(){return x?x.getTTMLRenderingDiv():null},getVideoElement:X,getSource:function(){if(!f)throw e;return f},getCurrentLiveLatency:function(){if(!h)throw a;return g?O.getCurrentLiveLatency():NaN},getTopBitrateInfoFor:function(e){if(!p)throw i;return E.getTopBitrateInfoFor(e)},setAutoPlay:V,getAutoPlay:function(){return _},getDashMetrics:W,getQualityFor:function(e){if(!p)throw i;if(e!==se.default.IMAGE)return E.getQualityFor(e);var t=J();if(!t)return -1;var n=t.getThumbnailController();return n?n.getCurrentTrackIndex():-1},setQualityFor:function(e,t){if(!p)throw i;if(e===se.default.IMAGE){var n=J();if(!n)return;var r=n.getThumbnailController();r&&r.setTrackByIndex(t);}E.setPlaybackQuality(e,C.getActiveStreamInfo(),t);},updatePortalSize:function(){E.setElementSize(),E.setWindowResizeEventCalled(!0);},setTextDefaultLanguage:function(e){d.warn('setTextDefaultLanguage is deprecated and will be removed in version 3.2.0. Please use setInitialMediaSettingsFor("fragmentedText", { lang: lang }) instead'),void 0===F&&(F=(0, ve.default)(o).getInstance()),F.setTextDefaultLanguage(e);},getTextDefaultLanguage:function(){return d.warn('getTextDefaultLanguage is deprecated and will be removed in version 3.2.0. Please use getInitialMediaSettingsFor("fragmentedText").lang instead'),void 0===F&&(F=(0, ve.default)(o).getInstance()),F.getTextDefaultLanguage()},setTextDefaultEnabled:function(e){void 0===F&&(F=(0, ve.default)(o).getInstance()),F.setTextDefaultEnabled(e);},getTextDefaultEnabled:function(){return void 0===F&&(F=(0, ve.default)(o).getInstance()),F.getTextDefaultEnabled()},enableText:function(e){void 0===F&&(F=(0, ve.default)(o).getInstance()),F.enableText(e);},enableForcedTextStreaming:function(e){void 0===F&&(F=(0, ve.default)(o).getInstance()),F.enableForcedTextStreaming(e);},isTextEnabled:function(){return void 0===F&&(F=(0, ve.default)(o).getInstance()),F.isTextEnabled()},setTextTrack:function(e){if(!g)throw r;void 0===F&&(F=(0, ve.default)(o).getInstance()),F.setTextTrack(e);},getBitrateInfoListFor:function(e){if(!p)throw i;var t=J();return t?t.getBitrateListFor(e):[]},getStreamsFromManifest:function(e){if(!p)throw i;return R.getStreamsInfo(e)},getTracksFor:Z,getTracksForTypeFromManifest:function(e,t,n){if(!p)throw i;return (n=n||R.getStreamsInfo(t,1)[0])?R.getAllMediaInfoForType(n,e,t):[]},getCurrentTrackFor:function(e){if(!p)throw i;var t=C.getActiveStreamInfo();return y.getCurrentTrackFor(e,t)},setInitialMediaSettingsFor:function(e,t){if(!h)throw a;y.setInitialSettings(e,t),e===se.default.FRAGMENTED_TEXT&&F.setInitialSettings(t);},getInitialMediaSettingsFor:function(e){if(!h)throw a;return y.getInitialSettings(e)},setCurrentTrack:function(e){if(!p)throw i;y.setTrack(e);},getTrackSwitchModeFor:function(e){if(!h)throw a;return y.getSwitchMode(e)},setTrackSwitchModeFor:function(e,t){if(!h)throw a;y.setSwitchMode(e,t);},setSelectionModeForInitialTrack:function(e){if(!h)throw a;y.setSelectionModeForInitialTrack(e);},getSelectionModeForInitialTrack:function(){if(!h)throw a;return y.getSelectionModeForInitialTrack()},addABRCustomRule:function(e,t,n){b.addABRCustomRule(e,t,n);},removeABRCustomRule:function(e){b.removeABRCustomRule(e);},removeAllABRCustomRule:function(){b.removeABRCustomRule();},getAverageThroughput:function(e){var t=E.getThroughputHistory();return t?t.getAverageThroughput(e):0},retrieveManifest:function(e,n){var r=te(),i=this;s.on(Oe.default.INTERNAL_MANIFEST_LOADED,function e(t){t.error?n(null,t.error):n(t.manifest),s.off(Oe.default.INTERNAL_MANIFEST_LOADED,e,i),r.reset();},i),U.initialize(e),r.load(e);},addUTCTimingSource:function(e,t){b.addUTCTimingSource(e,t);},removeUTCTimingSource:function(e,t){b.removeUTCTimingSource(e,t);},clearDefaultUTCTimingSources:function(){b.clearDefaultUTCTimingSources();},restoreDefaultUTCTimingSources:z,setXHRWithCredentialsForType:function(e,t){b.setXHRWithCredentialsForType(e,t);},getXHRWithCredentialsForType:function(e){return b.getXHRWithCredentialsForType(e)},getProtectionController:ne,attachProtectionController:function(e){T=e;},setProtectionData:function(e){c=e,C&&C.setProtectionData(c);},displayCaptionsOnTop:function(e){var t=(0, Ee.default)(o).getInstance();t.setConfig({videoModel:x}),t.initialize(),t.setDisplayCConTop(e);},attachTTMLRenderingDiv:function(e){if(!x.getElement())throw t;x.setTTMLRenderingDiv(e);},getCurrentTextTrackIndex:function(){var e=NaN;return F&&(e=F.getCurrentTrackIdx()),e},provideThumbnail:function(e,t){if("function"==typeof t)if(e<0)t(null);else {var n=O.getIsDynamic()?K(e):e,r=C.getStreamForTime(n);if(null!==r){var i=r.getThumbnailController();if(i){var a=C.getTimeRelativeToStreamId(n,r.getId());return i.provide(a,t)}t(null);}else t(null);}},getDashAdapter:function(){return R},getOfflineController:re,getSettings:function(){return u.get()},updateSettings:function(e){u.update(e);},resetSettings:function(){u.reset();},reset:function(){$(null),Q(null),c=null,T&&(T.reset(),T=null),S&&(S.reset(),S=null),B.reset(),u.reset(),I&&(I.reset(),I=null);}},d=l.getLogger(n),_=!(p=g=h=!1),B=R=c=I=T=null,Oe.default.extend(we.default),b=(0, Se.default)(o).getInstance(),x=(0, Re.default)(o).getInstance(),U=(0, ye.default)(o).getInstance(),n}i.__dashjs_factory_name="MediaPlayer";var a=Pe.default.getClassFactory(i);a.events=we.default,a.errors=Ne.default,Pe.default.updateClassFactory(i.__dashjs_factory_name,a),n.default=a,t.exports=n.default;},{1:1,101:101,108:108,109:109,111:111,112:112,117:117,119:119,121:121,148:148,150:150,151:151,153:153,154:154,157:157,2:2,200:200,202:202,206:206,207:207,209:209,212:212,217:217,218:218,220:220,225:225,241:241,45:45,46:46,47:47,48:48,50:50,51:51,54:54,56:56,58:58,61:61,63:63,82:82,9:9,98:98,99:99}],101:[function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0});var r=function(e,t,n){for(var r=!0;r;){var i=e,a=t,o=n,r=!1;null===i&&(i=Function.prototype);var s=Object.getOwnPropertyDescriptor(i,a);if(void 0!==s){if("value"in s)return s.value;var u=s.get;if(void 0===u)return;return u.call(o)}var l=Object.getPrototypeOf(i);if(null===l)return;e=l,t=a,n=o,r=!0,s=l=void 0;}};var i,a=e(55);function o(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),r(Object.getPrototypeOf(o.prototype),"constructor",this).call(this),this.AST_IN_FUTURE="astInFuture",this.BUFFER_EMPTY="bufferStalled",this.BUFFER_LOADED="bufferLoaded",this.BUFFER_LEVEL_STATE_CHANGED="bufferStateChanged",this.ERROR="error",this.FRAGMENT_LOADING_COMPLETED="fragmentLoadingCompleted",this.FRAGMENT_LOADING_PROGRESS="fragmentLoadingProgress",this.FRAGMENT_LOADING_STARTED="fragmentLoadingStarted",this.FRAGMENT_LOADING_ABANDONED="fragmentLoadingAbandoned",this.LOG="log",this.MANIFEST_LOADED="manifestLoaded",this.METRICS_CHANGED="metricsChanged",this.METRIC_CHANGED="metricChanged",this.METRIC_ADDED="metricAdded",this.METRIC_UPDATED="metricUpdated",this.PERIOD_SWITCH_COMPLETED="periodSwitchCompleted",this.PERIOD_SWITCH_STARTED="periodSwitchStarted",this.QUALITY_CHANGE_REQUESTED="qualityChangeRequested",this.QUALITY_CHANGE_RENDERED="qualityChangeRendered",this.TRACK_CHANGE_RENDERED="trackChangeRendered",this.SOURCE_INITIALIZED="sourceInitialized",this.STREAM_INITIALIZING="streamInitializing",this.STREAM_INITIALIZED="streamInitialized",this.STREAM_TEARDOWN_COMPLETE="streamTeardownComplete",this.TEXT_TRACKS_ADDED="allTextTracksAdded",this.TEXT_TRACK_ADDED="textTrackAdded",this.TTML_PARSED="ttmlParsed",this.TTML_TO_PARSE="ttmlToParse",this.CAPTION_RENDERED="captionRendered",this.CAPTION_CONTAINER_RESIZE="captionContainerResize",this.CAN_PLAY="canPlay",this.PLAYBACK_ENDED="playbackEnded",this.PLAYBACK_ERROR="playbackError",this.PLAYBACK_NOT_ALLOWED="playbackNotAllowed",this.PLAYBACK_METADATA_LOADED="playbackMetaDataLoaded",this.PLAYBACK_PAUSED="playbackPaused",this.PLAYBACK_PLAYING="playbackPlaying",this.PLAYBACK_PROGRESS="playbackProgress",this.PLAYBACK_RATE_CHANGED="playbackRateChanged",this.PLAYBACK_SEEKED="playbackSeeked",this.PLAYBACK_SEEKING="playbackSeeking",this.PLAYBACK_SEEK_ASKED="playbackSeekAsked",this.PLAYBACK_STALLED="playbackStalled",this.PLAYBACK_STARTED="playbackStarted",this.PLAYBACK_TIME_UPDATED="playbackTimeUpdated",this.PLAYBACK_WAITING="playbackWaiting",this.MANIFEST_VALIDITY_CHANGED="manifestValidityChanged";}var s=new(function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t);}(o,((i=a)&&i.__esModule?i:{default:i}).default),o);n.default=s,t.exports=n.default;},{55:55}],102:[function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0});var r,i=e(100),a=(r=i)&&r.__esModule?r:{default:r};var s,o,u=(s="application/dash+xml",{create:l,createAll:function(e,t){var n=[];e=e||"[data-dashjs-player]";for(var r=(t=t||document).querySelectorAll(e),i=0;i<r.length;i++){var a=l(r[i],null);n.push(a);}for(var o=t.querySelectorAll('source[type="'+s+'"]'),i=0;i<o.length;i++)a=l(function(e){for(var t=!0;t;){var n=e;if(t=!1,/^VIDEO$/i.test(n.nodeName))return n;e=n.parentNode,t=!0;}}(o[i]),null),n.push(a);return n}});function l(e,t,n){if(!e||!/^VIDEO$/i.test(e.nodeName))return null;if(e._dashjs_player)return e._dashjs_player;var r=void 0,i=e.id||e.name||"video element";if(!(t=t||[].slice.call(e.querySelectorAll("source")).filter(function(e){return e.type==s})[0])&&e.src)(t=document.createElement("source")).src=e.src;else if(!t&&!e.src)return null;return n=n||{},(r=(0, a.default)(n).create()).initialize(e,t.src,e.autoplay),(o=o||r.getDebug().getLogger()).debug("Converted "+i+" to dash.js player and added content: "+t.src),e._dashjs_player=r}var d=o=void 0;"undefined"!=typeof window&&window&&window.dashjs&&window.dashjs.skipAutoCreate||"undefined"==typeof window||!window||!window.addEventListener||("complete"===window.document.readyState?window.dashjs?u.createAll():d=window.setInterval(function(){window.dashjs&&(window.clearInterval(d),u.createAll());},500):window.addEventListener("load",function e(){window.removeEventListener("load",e),u.createAll();})),n.default=u,t.exports=n.default;},{100:100}],103:[function(e,t,n){function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(n,"__esModule",{value:!0});var u=r(e(45)),i=r(e(47));function a(e){var t=this.context,n=void 0,r=void 0,a=void 0,o=[],i=e;function s(t,n){o=o.filter(function(e){return !((isNaN(n)||e.start<n)&&(isNaN(t)||e.end>t))});}return n={getAllBufferRanges:function(){for(var t=[],e=0;e<o.length;e++){var n=o[e];0===t.length||n.start>t[t.length-1].end?t.push({start:n.start,end:n.end}):t[t.length-1].end=n.end;}var r={start:function(e){return t[e].start},end:function(e){return t[e].end}};return Object.defineProperty(r,"length",{get:function(){return t.length}}),r},append:function(e){a="InitializationSegment"!==e.segmentType?(o.push(e),o.sort(function(e,t){return e.start-t.start}),null):e,r.debug("PreBufferSink appended chunk s: "+e.start+"; e: "+e.end),i&&i({chunk:e});},remove:s,abort:function(){},discharge:function(e,t){var n,r,i=(n=e,r=t,o.filter(function(e){return (isNaN(r)||e.start<r)&&(isNaN(n)||e.end>n)}));return a&&(i.push(a),a=null),s(e,t),i},reset:function(){o=[],i=a=null;},updateTimestampOffset:function(){},hasDiscontinuitiesAfter:function(){return !1},waitForUpdateEnd:function(e){e();},getBuffer:function(){return this}},r=(0, u.default)(t).getInstance().getLogger(n),n}a.__dashjs_factory_name="PreBufferSink";var o=i.default.getClassFactory(a);n.default=o,t.exports=n.default;},{45:45,47:47}],104:[function(e,t,n){function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(n,"__esModule",{value:!0});var A=r(e(45)),I=r(e(225)),R=r(e(46)),b=r(e(54)),i=r(e(47)),D=r(e(200)),M=r(e(51));function a(i,r,e,t,a){var o=this.context,u=(0, R.default)(o).getInstance(),s=void 0,l=void 0,d=void 0,f=void 0,c=void 0,n=[],h=[],p=e,g=!1!==t;function _(){try{return d.buffered}catch(e){return l.error("getAllBufferRanges exception: "+e.message),null}}function E(){var t=this,s=this;0<h.length&&function(){f=!0;var a=h[0];h.splice(0,1);function e(){var e,t,n,r,i=_();e=s,n=i,r=a,(t=o)&&0<t.length&&t.length<n.length&&function(e,t){for(var n=0;n<e.length;n++){var r=Math.round(e.start(n)),i=Math.round(e.end(n));if(i===t.start||r===t.end||t.start>=r&&t.end<=i)return !0}return !1}(t,r)&&u.trigger(b.default.SOURCEBUFFER_REMOVE_COMPLETED,{buffer:e,from:n.end(n.length-2),to:n.start(n.length-1),unintended:!0}),0<h.length?E.call(this):(f=!1,p&&p({chunk:a}));}var o=[];try{0===a.bytes.length?e.call(t):(o=_(),d.appendBuffer?d.appendBuffer(a.bytes):d.append(a.bytes,a),S(e.bind(t)));}catch(e){l.fatal('SourceBuffer append failed "'+e+'"'),0<h.length?E():f=!1,p&&p({chunk:a,error:new I.default(e.code,e.message)});}}();}function m(){var e;0<n.length&&(e=n.shift(),d.updating?S(e):(e(),m()));}function v(){d.updating||m();}function y(){d.updating||m();}function T(){l.error("SourceBufferSink error",r.type);}function S(e){n.push(e),d.updating||m();}return s={getAllBufferRanges:_,getBuffer:function(){return d},append:function(e){e?(h.push(e),f||S(E.bind(this))):p({chunk:e,error:new I.default(M.default.APPEND_ERROR_CODE,M.default.APPEND_ERROR_MESSAGE)});},remove:function(t,n,e){var r=this;S(function(){try{0<=t&&t<n&&(e||"ended"!==i.readyState)&&d.remove(t,n),S(function(){u.trigger(b.default.SOURCEBUFFER_REMOVE_COMPLETED,{buffer:r,from:t,to:n,unintended:!1});});}catch(e){u.trigger(b.default.SOURCEBUFFER_REMOVE_COMPLETED,{buffer:r,from:t,to:n,unintended:!1,error:new I.default(e.code,e.message)});}});},abort:function(){try{("open"===i.readyState||d.setTextTrack&&"ended"===i.readyState)&&d.abort();}catch(e){l.error('SourceBuffer append abort failed: "'+e+'"');}h=[];},reset:function(e){if(d){if("function"==typeof d.removeEventListener&&(d.removeEventListener("updateend",y,!1),d.removeEventListener("error",T,!1),d.removeEventListener("abort",T,!1)),clearInterval(c),d.appendWindowEnd=1/0,!e){try{d.getClassName&&"TextSourceBuffer"===d.getClassName()||i.removeSourceBuffer(d);}catch(e){l.error("Failed to remove source buffer from media source.");}d=null;}f=!1;}h=[],p=null;},updateTimestampOffset:function(e){d.timestampOffset===e||isNaN(e)||S(function(){d.timestampOffset=e;});},hasDiscontinuitiesAfter:function(e){try{var t=_();if(t&&1<t.length)for(var n=0,r=t.length;n<r;n++)if(0<n&&e<t.start(n)&&t.start(n)>t.end(n-1)+.1)return !0}catch(e){l.error("hasDiscontinuities exception: "+e.message);}return !1},waitForUpdateEnd:S},function(){l=(0, A.default)(o).getInstance().getLogger(s),f=!1;var t=r.codec;try{if(t.match(/application\/mp4;\s*codecs="(stpp|wvtt).*"/i))throw new Error("not really supported");(d=a||i.addSourceBuffer(t)).changeType&&a&&(l.debug("Doing period transition with changeType"),d.changeType(t)),g&&d&&(d.appendWindowEnd=i.duration);if("function"==typeof d.addEventListener)try{d.addEventListener("updateend",y,!1),d.addEventListener("error",T,!1),d.addEventListener("abort",T,!1);}catch(e){c=setInterval(v,50);}else c=setInterval(v,50);}catch(e){if(!r.isText&&-1===t.indexOf('codecs="stpp')&&-1===t.indexOf('codecs="wvtt'))throw e;var n=(0, D.default)(o).getInstance();d=n.getTextSourceBuffer();}}(),s}a.__dashjs_factory_name="SourceBufferSink";var o=i.default.getClassFactory(a);n.default=o,t.exports=n.default;},{200:200,225:225,45:45,46:46,47:47,51:51,54:54}],105:[function(e,t,n){function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(n,"__esModule",{value:!0});var le=r(e(108)),de=r(e(61)),fe=r(e(106)),ce=r(e(116)),he=r(e(203)),pe=r(e(46)),ge=r(e(54)),_e=r(e(45)),Ee=r(e(51)),i=r(e(47)),me=r(e(225)),ve=r(e(206)),ye=r(e(220));function a(u){u=u||{};var l=this.context,s=(0, pe.default)(l).getInstance(),e=(0, ye.default)(l).getInstance(),d=u.manifestModel,f=u.mediaPlayerModel,a=u.manifestUpdater,c=u.adapter,i=u.capabilities,h=u.errHandler,p=u.timelineConverter,t=u.dashMetrics,g=u.abrController,_=u.playbackController,o=u.eventController,E=u.mediaController,m=u.textController,v=u.videoModel,y=u.settings,r=void 0,T=void 0,S=void 0,A=void 0,I=void 0,R=void 0,b=void 0,D=void 0,M=void 0,N=void 0,C=void 0,O=void 0,w=void 0,P=void 0,L=void 0,x=void 0,F=void 0,U=void 0,k=[{codec:"avc1",compatibleCodecs:["avc3"]},{codec:"avc3",compatibleCodecs:["avc1"]}];function n(e){for(var t=A?A.length:0,n=0;n<t;n++){A[n].getFragmentModel().removeExecutedRequestsBeforeTime(Y()+j()),A[n].reset(!1,e);}se(b=R=!(A=[])),s.off(ge.default.CURRENT_TRACK_CHANGED,W,r);}function B(){n(),S=null,M=D=I=!1,C=!(N={});}function G(){_&&_.pause(),w&&(w.reset(),w=null),B(),s.off(ge.default.DATA_UPDATE_COMPLETED,te,r),s.off(ge.default.BUFFERING_COMPLETED,ee,r),s.off(ge.default.INBAND_EVENTS,ne,r),O&&(s.off(ge.default.KEY_ERROR,V,r),s.off(ge.default.SERVER_CERTIFICATE_UPDATED,V,r),s.off(ge.default.LICENSE_REQUEST_COMPLETE,V,r),s.off(ge.default.KEY_SYSTEM_SELECTED,V,r),s.off(ge.default.KEY_SESSION_CREATED,V,r),s.off(ge.default.KEY_STATUSES_CHANGED,V,r)),se(!1);}function j(){return S?S.duration:NaN}function Y(){return S?S.start:NaN}function K(){return S?S.id:null}function q(){return S}function H(){if(!(v&&g&&g.hasOwnProperty("getBitrateList")&&c&&c.hasOwnProperty("getAllMediaInfoForType")&&c.hasOwnProperty("getEventsFor")))throw new Error(le.default.MISSING_CONFIG_ERROR)}function V(e){e.error&&(h.error(e.error),T.fatal(e.error.message),G());}function z(e){var t,n=e?e.type:null,r=void 0;if(n===le.default.MUXED)return r="Multiplexed representations are intentionally not supported, as they are not compliant with the DASH-AVC/264 guidelines",T.fatal(r),void h.error(new me.default(Ee.default.MANIFEST_ERROR_ID_MULTIPLEXED_CODE,r,d.getValue()));if(n===le.default.TEXT||n===le.default.FRAGMENTED_TEXT||n===le.default.EMBEDDED_TEXT||n===le.default.IMAGE)return 1;if(t=e.codec,T.debug(n+" codec: "+t),e.contentProtection&&!i.supportsEncryptedMedia())h.error(new me.default(Ee.default.CAPABILITY_MEDIAKEYS_ERROR_CODE,Ee.default.CAPABILITY_MEDIAKEYS_ERROR_MESSAGE));else if(!i.supportsCodec(t))return r=n+"Codec ("+t+") is not supported.",void T.error(r);return 1}function W(e){var t,n,r,i;S&&e.newMediaInfo.streamInfo.id===S.id&&(t=e.newMediaInfo,n=d.getValue(),c.setCurrentMediaInfo(S.id,t.type,t),(r=re(t))&&(i=_.getTime(),T.info("Stream -  Process track changed at current time "+i),T.debug("Stream -  Update stream controller"),n.refreshManifestOnSwitchTrack?(T.debug("Stream -  Refreshing manifest for switch track"),U=e,a.refreshManifest()):(r.selectMediaInfo(t),t.type!==le.default.FRAGMENTED_TEXT?(g.updateTopQualityIndex(t),r.switchTrackAsked(),r.getFragmentModel().abortRequests()):(r.getScheduleController().setSeekTarget(i),r.setIndexHandlerTime(i),r.resetIndexHandler()))));}function X(e,t){var n,r=c.getAllMediaInfoForType(S,e),i=null;if(r&&0!==r.length){e===le.default.VIDEO&&(D=!0),e===le.default.AUDIO&&(M=!0);for(var a=0,o=r.length;a<o;a++)if(i=r[a],e===le.default.EMBEDDED_TEXT)m.addEmbeddedTrack(i);else {if(!z(i))continue;E.addTrack(i);}e!==le.default.EMBEDDED_TEXT&&0!==E.getTracksFor(e,S).length&&(e!==le.default.IMAGE?(E.checkInitialMediaSettingsForType(e,S),n=E.getCurrentTrackFor(e,S),s.trigger(ge.default.STREAM_INITIALIZING,{streamInfo:S,mediaInfo:i}),function(e,t,n,r){var i=w.getModel(K(),e?e.type:null),a=(0, fe.default)(l).create({streamInfo:S,type:e?e.type:null,mimeType:e?e.mimeType:null,timelineConverter:p,adapter:c,manifestModel:d,mediaPlayerModel:f,fragmentModel:i,dashMetrics:u.dashMetrics,baseURLController:u.baseURLController,abrController:g,playbackController:_,mediaController:E,textController:m,errHandler:h,settings:y,boxParser:x});if(a.initialize(n,D),g.updateTopQualityIndex(e),r?(a.setBuffer(r.buffer),a.setIndexHandlerTime(r.currentTime),A[r.replaceIdx]=a):A.push(a),!r||!r.ignoreMediaInfo)if(!e||e.type!==le.default.TEXT&&e.type!==le.default.FRAGMENTED_TEXT)a.addMediaInfo(e,!0);else {for(var o=void 0,s=0;s<t.length;s++)t[s].index===e.index&&(o=s),a.addMediaInfo(t[s]);a.selectMediaInfo(t[o]);}}(n,r,t)):P=(0, he.default)(l).create({streamInfo:S,adapter:c,baseURLController:u.baseURLController,timelineConverter:u.timelineConverter,debug:F,eventBus:s,events:ge.default,dashConstants:de.default}));}else T.info("No "+e+" data.");}function Q(){var e;o&&(e=c.getEventsFor(S),o.addInlineEvents(e));}function Z(e){var r=c.getAdaptationForType(S?S.index:null,e,S);r&&Array.isArray(r.Representation_asArray)&&(r.Representation_asArray=r.Representation_asArray.filter(function(e,t){if(0===t)return !0;var n=c.getCodec(r,t,!0);return !!i.supportsCodec(n)||(T.error("[Stream] codec not supported: "+n),!1)}));}function $(){for(var e=A.length,t=!!N.audio||!!N.video?new me.default(Ee.default.DATA_UPDATE_FAILED_ERROR_CODE,Ee.default.DATA_UPDATE_FAILED_ERROR_MESSAGE):null,n=0;n<e;n++)if(A[n].isUpdating()||C)return;if(b){if(O)for(n=0;n<e&&A[n];n++)A[n].getType()!==le.default.AUDIO&&A[n].getType()!==le.default.VIDEO&&A[n].getType()!==le.default.FRAGMENTED_TEXT||O.initializeForMedia(A[n].getMediaInfo());t?h.error(t):I||(I=!0,p.setTimeSyncCompleted(!0),s.trigger(ge.default.STREAM_INITIALIZED,{streamInfo:S,liveStartTime:function(){if(!S.manifestInfo.isDynamic)return NaN;for(var e=0;e<A.length;e++)if(A[e].getType()===le.default.AUDIO||A[e].getType()===le.default.VIDEO)return A[e].getLiveStartTime();return NaN}()}));for(n=0;n<e&&A[n];n++)A[n].getScheduleController().start();}}function J(e){for(var t={},n=0,r=A.length;n<r;n++){var i=A[n].createBuffer(e);i&&(t[A[n].getType()]=i.getBuffer());}return t}function ee(e){if(e.streamId===S.id){var t=ie(),n=t.length;if(0!==n){for(var r=0;r<n;r++)if(!t[r].isBufferingCompleted()&&(t[r].getType()===le.default.AUDIO||t[r].getType()===le.default.VIDEO))return void T.warn("onBufferingCompleted - One streamProcessor has finished but",t[r].getType(),"one is not buffering completed");T.debug("onBufferingCompleted - trigger STREAM_BUFFERING_COMPLETED"),s.trigger(ge.default.STREAM_BUFFERING_COMPLETED,{streamInfo:S});}else T.warn("onBufferingCompleted - can't trigger STREAM_BUFFERING_COMPLETED because no streamProcessor is defined");}}function te(e){S&&e.sender.getStreamId()===S.id&&(N[e.sender.getType()]=e.error,$());}function ne(e){var t;S&&e.sender.getStreamInfo().id===S.id&&(t=e.events,o&&o.addInbandEvents(t));}function re(t){return t?ie().filter(function(e){return e.getType()===t.type})[0]:null}function ie(){for(var e=[],t=void 0,n=void 0,r=0;r<A.length;r++)(t=(n=A[r]).getType())!==le.default.AUDIO&&t!==le.default.VIDEO&&t!==le.default.FRAGMENTED_TEXT&&t!==le.default.TEXT||e.push(n);return e}function ae(e,t){if(!e)return !1;var n=e.getStreamInfo(),r=S;if(!n||!r)return !1;var i=c.getAdaptationForType(n.index,t,n),a=c.getAdaptationForType(r.index,t,r);return i&&a?!i.ContentProtection&&!a.ContentProtection:!i&&!a}function oe(e,t){if(!e||!e.hasOwnProperty("getStreamInfo"))return !1;var n=e.getStreamInfo(),r=S;if(!n||!r)return !1;var i=c.getAdaptationForType(n.index,t,n),a=c.getAdaptationForType(r.index,t,r);if(!i||!a)return !i&&!a;var o=i&&a&&i.mimeType===a.mimeType,s=a.Representation_asArray.map(function(e){return e.codecs}),u=i.Representation_asArray.map(function(e){return e.codecs}),l=u.some(function(e){return -1<s.indexOf(e)}),d=u.some(function(t){return s.some(function(e){return function(e,t){for(var n=e.split(".")[0],r=0===t.indexOf(n),i=void 0,a=0;a<k.length;a++)if(k[a].codec===n){i=k[a];break}if(i)return r||i.compatibleCodecs.some(function(e){return 0===t.indexOf(e)});return r}(e,t)})});return l||d&&o}function se(e){L=e;}function ue(){return L}return r={initialize:function(e,t){S=e,(O=t)&&(s.on(ge.default.KEY_ERROR,V,r),s.on(ge.default.SERVER_CERTIFICATE_UPDATED,V,r),s.on(ge.default.LICENSE_REQUEST_COMPLETE,V,r),s.on(ge.default.KEY_SYSTEM_SELECTED,V,r),s.on(ge.default.KEY_SESSION_CREATED,V,r),s.on(ge.default.KEY_STATUSES_CHANGED,V,r));},activate:function(e,t){if(R)return t;var n=void 0;return s.on(ge.default.CURRENT_TRACK_CHANGED,W,r),n=L?(function(){{var e;C=!0,H(),Z(le.default.VIDEO),Z(le.default.AUDIO),C=!(b=!0),0===A.length?(e="No streams to play.",h.error(new me.default(Ee.default.MANIFEST_ERROR_ID_NOSTREAMS_CODE,e,d.getValue())),T.debug(e)):$();}}(),t):function(e,t){H();var n=v.getElement();Q(),C=!0,Z(le.default.VIDEO),Z(le.default.AUDIO),(!n||n&&/^VIDEO$/i.test(n.nodeName))&&X(le.default.VIDEO,e);X(le.default.AUDIO,e),X(le.default.TEXT,e),X(le.default.FRAGMENTED_TEXT,e),X(le.default.EMBEDDED_TEXT,e),X(le.default.MUXED,e),X(le.default.IMAGE,e);var r=J(t);{var i;C=!(b=!0),0===A.length?(i="No streams to play.",h.error(new me.default(Ee.default.MANIFEST_ERROR_ID_NOSTREAMS_CODE,i,d.getValue())),T.fatal(i)):$();}return r}(e,t),R=!0,n},deactivate:n,isActive:function(){return R},getDuration:j,getStartTime:Y,getId:K,getStreamInfo:q,getHasAudioTrack:function(){return M},getHasVideoTrack:function(){return D},preload:function(e,t){Q(),X(le.default.VIDEO,e),X(le.default.AUDIO,e),X(le.default.TEXT,e),X(le.default.FRAGMENTED_TEXT,e),X(le.default.EMBEDDED_TEXT,e),X(le.default.MUXED,e),X(le.default.IMAGE,e),J(t),s.on(ge.default.CURRENT_TRACK_CHANGED,W,r);for(var n=0;n<A.length&&A[n];n++)A[n].getScheduleController().start();se(!0);},getThumbnailController:function(){return P},getBitrateListFor:function(e){if(H(),e===le.default.IMAGE)return P?P.getBitrateList():[];var t=function(e){for(var t=null,n=0;n<A.length;n++)if((t=A[n]).getType()===e)return t.getMediaInfo();return null}(e);return g.getBitrateList(t)},updateData:function(e){T.info("Manifest updated... updating data system wide."),C=!(R=!1),S=e,o&&Q(),Z(le.default.VIDEO),Z(le.default.AUDIO);for(var t=0,n=A.length;t<n;t++){var r=A[t];r.updateStreamInfo(S);var i=c.getMediaInfoForType(S,r.getType());g.updateTopQualityIndex(i),r.addMediaInfo(i,!0);}if(U&&(i=U.newMediaInfo).type!==le.default.FRAGMENTED_TEXT){var a=re(U.oldMediaInfo);if(!a)return;a.switchTrackAsked(),U=void 0;}C=!1,$();},reset:G,getProcessors:ie,setMediaSource:function(e){for(var t=0;t<A.length;)z(A[t].getMediaInfo())?(A[t].setMediaSource(e),t++):(A[t].reset(),A.splice(t,1));for(var n,t=0;t<A.length;t++)A[t].dischargePreBuffer();0===A.length&&(n="No streams to play.",h.error(new me.default(Ee.default.MANIFEST_ERROR_ID_NOSTREAMS_CODE,n+"nostreams",d.getValue())),T.fatal(n));},isMediaCodecCompatible:function(e){return oe(e,le.default.VIDEO)&&oe(e,le.default.AUDIO)},isProtectionCompatible:function(e){return ae(e,le.default.VIDEO)&&ae(e,le.default.AUDIO)},getPreloaded:ue},F=(0, _e.default)(l).getInstance(),T=F.getLogger(r),B(),x=(0, ve.default)(l).getInstance(),w=(0, ce.default)(l).create({mediaPlayerModel:f,dashMetrics:t,errHandler:h,settings:y,boxParser:x,dashConstants:de.default,urlUtils:e}),s.on(ge.default.BUFFERING_COMPLETED,ee,r),s.on(ge.default.DATA_UPDATE_COMPLETED,te,r),s.on(ge.default.INBAND_EVENTS,ne,r),r}a.__dashjs_factory_name="Stream",n.default=i.default.getClassFactory(a),t.exports=n.default;},{106:106,108:108,116:116,203:203,206:206,220:220,225:225,45:45,46:46,47:47,51:51,54:54,61:61}],106:[function(e,t,n){function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(n,"__esModule",{value:!0});var W=r(e(108)),X=r(e(61)),Q=r(e(109)),Z=r(e(149)),$=r(e(114)),J=r(e(199)),ee=r(e(120)),te=r(e(62)),ne=r(e(215)),i=r(e(47)),re=e(218),ie=r(e(46)),ae=r(e(54)),oe=r(e(57)),se=r(e(51)),ue=r(e(225)),le=r(e(45)),de=r(e(217)),fe=r(e(220)),ce=r(e(206)),he=r(e(227)),pe=e(243);function a(n){n=n||{};var c=this.context,l=(0, ie.default)(c).getInstance(),d=n.streamInfo,f=n.type,r=n.errHandler,i=n.mimeType,a=n.timelineConverter,h=n.adapter,o=n.manifestModel,s=n.mediaPlayerModel,p=n.fragmentModel,u=n.abrController,g=n.playbackController,_=n.mediaController,E=n.textController,m=n.dashMetrics,v=n.settings,y=n.boxParser,T=void 0,S=void 0,A=void 0,I=void 0,R=void 0,b=void 0,D=void 0,M=void 0,N=void 0,C=void 0;function O(){R=[],I=null;}function w(e){e.sender.getType()===f&&e.sender.getStreamId()===d.id&&(e.error||D.setCurrentRepresentation(h.convertDataToRepresentationInfo(e.currentRepresentation)),e.error&&e.error.code!==se.default.SEGMENTS_UPDATE_FAILED_ERROR_CODE||t());}function P(e){var t;f===e.mediaType&&d.id===e.streamInfo.id&&(t=G(e.newQuality),D.setCurrentRepresentation(t),m.pushPlayListTraceMetrics(new Date,pe.PlayListTrace.REPRESENTATION_SWITCH_STOP_REASON),m.createPlaylistTraceMetrics(t.id,1e3*g.getTime(),g.getPlaybackRate()));}function L(e){e.streamId===d.id&&e.mediaType===f&&(m.addBufferLevel(f,new Date,1e3*e.bufferLevel),o.getValue().doNotUpdateDVRWindowOnBufferUpdated||t());}function x(e){e.streamId===d.id&&e.mediaType===f&&(m.addBufferState(f,e.state,D.getBufferTarget()),e.state!==Q.default.BUFFER_EMPTY||g.isSeeking()||m.pushPlayListTraceMetrics(new Date,pe.PlayListTrace.REBUFFERING_REASON));}function F(e){e.streamId===d.id&&e.mediaType===f&&(e.unintended?p.removeExecutedRequestsAfterTime(e.from):p.syncExecutedRequestsWithBufferedRange(b.getBuffer().getAllBufferRanges(),d.duration));}function t(){var e=d.manifestInfo,t=e.isDynamic,n=a.calcSegmentAvailabilityRange(M.getCurrentRepresentation(),t);m.addDVRInfo(f,g.getTime(),e,n);}function e(){return f}function U(){return b?b.getBuffer():null}function k(){return R}function B(){return I}function G(e){var t=void 0,t=void 0!==e?((0, re.checkInteger)(e),M?M.getRepresentationForQuality(e):null):M?M.getCurrentRepresentation():null;return h.convertDataToRepresentationInfo(t)}function j(e){var t;e.sender&&e.mediaType===f&&e.streamId===d.id&&(h.getIsTextTrack(i)&&!E.isTextEnabled()||b&&e.representationId&&(b.appendInitSegment(e.representationId)||(t=C?C.getInitRequest(I,M.getCurrentRepresentation()):null,D.processInitRequest(t))));}function Y(e){var t;e.sender&&e.mediaType===f&&e.streamId===d.id&&(t=void 0,b.getIsPruningInProgress()||(t=function(e,t){var n=G(),r=!isNaN(e),i=g.getNormalizedTime(),a=r?e:V(),o=!1,s=void 0;if(isNaN(a)||f===W.default.FRAGMENTED_TEXT&&!E.isTextEnabled())return null;{var u,l;b&&(u=b.getRangeAt(a),l=b.getRangeAt(i),null===u&&null===l||r||(!u||l&&l.start!=u.start&&l.end!=u.end)&&b.getBuffer().hasDiscontinuitiesAfter(i)&&f!==W.default.FRAGMENTED_TEXT&&(p.removeExecutedRequestsAfterTime(l.end),o=!0));}if(t)a=t.startTime+t.duration/2,s=z(n,a,{timeThreshold:0,ignoreIsFinished:!0});else for(s=z(n,r||o?a:void 0,{keepIdx:!r&&!o});s&&s.action!==he.default.ACTION_COMPLETE&&p.isFragmentLoaded(s);)s=z(n);return s}(e.seekTarget,e.replacement))&&(D.setSeekTarget(NaN),e.replacement||(isNaN(t.startTime+t.duration)||H(t.startTime+t.duration),t.delayLoadingTime=(new Date).getTime()+D.getTimeToLoadDelay(),D.setTimeToLoadDelay(0))),D.processMediaRequest(t));}function K(e){var t,n,r,i,a,o,s,u=e.chunk;u.streamId===d.id&&u.mediaInfo.type==f&&(t=u.bytes,r=G(n=u.quality),i=M&&r?M.getRepresentationForQuality(r.quality):null,a=h.getEventsFor(r.mediaInfo),o=h.getEventsFor(r,i),(a&&0<a.length||o&&0<o.length)&&(s=function(e,t,n,r){for(var i=Math.max(!t||isNaN(t.startTime)?0:t.startTime,0),a=[],o=[],s=n.concat(r),u=0,l=s.length;u<l;u++)a[s[u].schemeIdUri+"/"+s[u].value]=s[u];for(var d=(0, ce.default)(c).getInstance().parse(e).getBoxes("emsg"),u=0,l=d.length;u<l;u++){var f=h.getEvent(d[u],a,i);f&&o.push(f);}return o}(t,p.getRequests({state:Z.default.FRAGMENT_MODEL_EXECUTED,quality:n,index:u.index})[0],a,o),l.trigger(ae.default.INBAND_EVENTS,{sender:T,events:s})));}function q(e){e.mediaType===f&&e.streamId===d.id&&(H(e.time),D.setSeekTarget(e.time));}function H(e){C&&C.setCurrentTime(e);}function V(){return C?C.getCurrentTime():NaN}function z(e,t,n){var r,i=null;return C&&(r=M&&e?M.getRepresentationForQuality(e.quality):null,i=void 0!==t&&void 0!==n?C.getSegmentRequestForTime(I,r,t,n):C.getNextSegmentRequest(I,r)),i}return T={initialize:function(e,t){C=(0, oe.default)(c).create({streamInfo:d,type:f,timelineConverter:a,dashMetrics:m,mediaPlayerModel:s,baseURLController:n.baseURLController,errHandler:r,settings:v,boxParser:y,events:ae.default,eventBus:l,errors:se.default,debug:(0, le.default)(c).getInstance(),requestModifier:(0, de.default)(c).getInstance(),dashConstants:X.default,constants:W.default,urlUtils:(0, fe.default)(c).getInstance()}),(A=d.manifestInfo.isDynamic)&&(N=(0, ne.default)(c).create({timelineConverter:a})),C.initialize(A),u.registerStreamType(f,T),M=(0, te.default)(c).create({streamId:d.id,type:f,abrController:u,dashMetrics:m,playbackController:g,timelineConverter:a,dashConstants:X.default,events:ae.default,eventBus:l,errors:se.default}),(b=function(e){var t=null;if(!e)return r.error(new ue.default(se.default.MEDIASOURCE_TYPE_UNSUPPORTED_CODE,se.default.MEDIASOURCE_TYPE_UNSUPPORTED_MESSAGE+"not properly defined")),null;t=e===W.default.VIDEO||e===W.default.AUDIO?(0, $.default)(c).create({streamInfo:d,type:e,mediaPlayerModel:s,manifestModel:o,fragmentModel:p,errHandler:r,mediaController:_,representationController:M,adapter:h,textController:E,abrController:u,playbackController:g,settings:v}):(0, J.default)(c).create({streamInfo:d,type:e,mimeType:i,mediaPlayerModel:s,manifestModel:o,fragmentModel:p,errHandler:r,mediaController:_,representationController:M,adapter:h,textController:E,abrController:u,playbackController:g,settings:v});return t}(f))&&b.initialize(e),(D=(0, ee.default)(c).create({streamId:d.id,type:f,mimeType:i,adapter:h,dashMetrics:m,mediaPlayerModel:s,fragmentModel:p,abrController:u,playbackController:g,textController:E,mediaController:_,bufferController:b,settings:v})).initialize(t);},isUpdating:function(){return !!M&&M.isUpdating()},getType:e,getBufferController:function(){return b},getFragmentModel:function(){return p},getScheduleController:function(){return D},getRepresentationController:function(){return M},getRepresentationInfo:G,getBufferLevel:function(){return b?b.getBufferLevel():0},isBufferingCompleted:function(){return !!b&&b.getIsBufferingCompleted()},createBuffer:function(e){return U()||b?b.createBuffer(R,e):null},updateStreamInfo:function(e){d=e;},getStreamInfo:function(){return d},selectMediaInfo:function(e){e===I||e&&I&&e.type!==I.type||(I=e);var t,n,r,i,a,o=h.getRealAdaptation(d,I),s=h.getVoRepresentations(I);M&&(t=M.getData(),n=u.getTopQualityIndexFor(f,d.id),r=u.getMinAllowedIndexFor(f),a=void 0,a=(i=null)!==t&&t.id==o.id||f===W.default.FRAGMENTED_TEXT?u.getQualityFor(f):(i=u.getThroughputHistory().getAverageThroughput(f)||u.getInitialBitrateFor(f),u.getQualityForBitrate(I,i)),void 0!==r&&a<r&&(a=r),n<a&&(a=n),C.setMimeType(I?I.mimeType:null),M.updateData(o,s,f,a));},addMediaInfo:function(e,t){-1===R.indexOf(e)&&R.push(e),t&&this.selectMediaInfo(e);},getLiveStartTime:function(){if(!A)return NaN;if(!N)return NaN;var e=NaN,t=G(),n=function(e,t){try{var n=null,r=g.getLiveDelay(),i=isNaN(d.manifestInfo.DVRWindowSize)?r:d.manifestInfo.DVRWindowSize,a=.1*i,o=void 0;if(!isFinite(i)||z(t,e-i+a,{ignoreIsFinished:!0}))for(;!n&&r<=i;)(n=z(t,o=e-r,{ignoreIsFinished:!0}))||(r+=1);return n&&g.setLiveDelay(r,!0),S.debug("live edge: "+e+", live delay: "+r+", live target: "+o),n}catch(e){return null}}(N.getLiveEdge(t),t);return n&&(e=!v.get().streaming.lowLatencyEnabled||n.duration<s.getLiveDelay()?n.startTime:n.startTime+n.duration-s.getLiveDelay()),e},switchTrackAsked:function(){D.switchTrackAsked();},getMediaInfoArr:k,getMediaInfo:B,getMediaSource:function(){return b.getMediaSource()},setMediaSource:function(e){b.setMediaSource(e,R);},dischargePreBuffer:function(){b.dischargePreBuffer();},getBuffer:U,setBuffer:function(e){b.setBuffer(e);},setIndexHandlerTime:H,getIndexHandlerTime:V,resetIndexHandler:function(){C&&C.resetIndex();},getInitRequest:function(e){(0, re.checkInteger)(e);var t=M?M.getRepresentationForQuality(e):null;return C?C.getInitRequest(I,t):null},getFragmentRequest:z,finalisePlayList:function(e,t){m.pushPlayListTraceMetrics(e,t);},reset:function(e,t){C&&C.reset(),b&&(b.reset(e,t),b=null),D&&(D.reset(),D=null),M&&(M.reset(),M=null),N&&(N.reset(),N=null),u&&u.unRegisterStreamType(f),l.off(ae.default.DATA_UPDATE_COMPLETED,w,T),l.off(ae.default.QUALITY_CHANGE_REQUESTED,P,T),l.off(ae.default.INIT_FRAGMENT_NEEDED,j,T),l.off(ae.default.MEDIA_FRAGMENT_NEEDED,Y,T),l.off(ae.default.MEDIA_FRAGMENT_LOADED,K,T),l.off(ae.default.BUFFER_LEVEL_UPDATED,L,T),l.off(ae.default.BUFFER_LEVEL_STATE_CHANGED,x,T),l.off(ae.default.BUFFER_CLEARED,F,T),l.off(ae.default.SEEK_TARGET,q,T),O(),d=f=null;}},S=(0, le.default)(c).getInstance().getLogger(T),O(),l.on(ae.default.DATA_UPDATE_COMPLETED,w,T,ie.default.EVENT_PRIORITY_HIGH),l.on(ae.default.QUALITY_CHANGE_REQUESTED,P,T),l.on(ae.default.INIT_FRAGMENT_NEEDED,j,T),l.on(ae.default.MEDIA_FRAGMENT_NEEDED,Y,T),l.on(ae.default.MEDIA_FRAGMENT_LOADED,K,T),l.on(ae.default.BUFFER_LEVEL_UPDATED,L,T),l.on(ae.default.BUFFER_LEVEL_STATE_CHANGED,x,T),l.on(ae.default.BUFFER_CLEARED,F,T),l.on(ae.default.SEEK_TARGET,q,T),T}a.__dashjs_factory_name="StreamProcessor",n.default=i.default.getClassFactory(a),t.exports=n.default;},{108:108,109:109,114:114,120:120,149:149,199:199,206:206,215:215,217:217,218:218,220:220,225:225,227:227,243:243,45:45,46:46,47:47,51:51,54:54,57:57,61:61,62:62}],107:[function(e,t,n){function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(n,"__esModule",{value:!0});var u=r(e(225)),i=r(e(158)),l=e(241),d=r(e(232)),f=r(e(46)),c=r(e(54)),a=r(e(47)),h=r(e(51));function o(e){e=e||{};var a="urn:mpeg:dash:resolve-to-zero:2013",t=this.context,o=(0, f.default)(t).getInstance(),s=(0, i.default)(t).create({errHandler:e.errHandler,dashMetrics:e.dashMetrics,mediaPlayerModel:e.mediaPlayerModel,requestModifier:e.requestModifier,useFetch:e.settings?e.settings.get().streaming.lowLatencyEnabled:null,errors:h.default});return {load:function(n,r,i){function t(e,t){r.resolved=!0,r.resolvedContent=e||null,o.trigger(c.default.XLINK_ELEMENT_LOADED,{element:r,resolveObject:i,error:e||t?null:new u.default(h.default.XLINK_LOADER_LOADING_FAILURE_ERROR_CODE,h.default.XLINK_LOADER_LOADING_FAILURE_ERROR_MESSAGE+n)});}var e;n===a?t(null,!0):(e=new d.default(n,l.HTTPRequest.XLINK_EXPANSION_TYPE),s.load({request:e,success:function(e){t(e);},error:function(){t(null);}}));},reset:function(){s&&(s.abort(),s=null);}}}o.__dashjs_factory_name="XlinkLoader",n.default=a.default.getClassFactory(o),t.exports=n.default;},{158:158,225:225,232:232,241:241,46:46,47:47,51:51,54:54}],108:[function(e,t,n){function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r);}}function i(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),this.init();}Object.defineProperty(n,"__esModule",{value:!0});var a=new(function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}(i,[{key:"init",value:function(){this.STREAM="stream",this.VIDEO="video",this.AUDIO="audio",this.TEXT="text",this.FRAGMENTED_TEXT="fragmentedText",this.EMBEDDED_TEXT="embeddedText",this.MUXED="muxed",this.IMAGE="image",this.STPP="stpp",this.TTML="ttml",this.VTT="vtt",this.WVTT="wvtt",this.ABR_STRATEGY_DYNAMIC="abrDynamic",this.ABR_STRATEGY_BOLA="abrBola",this.ABR_STRATEGY_THROUGHPUT="abrThroughput",this.MOVING_AVERAGE_SLIDING_WINDOW="slidingWindow",this.MOVING_AVERAGE_EWMA="ewma",this.BAD_ARGUMENT_ERROR="Invalid Arguments",this.MISSING_CONFIG_ERROR="Missing config parameter(s)",this.LOCATION="Location",this.INITIALIZE="initialize",this.TEXT_SHOWING="showing",this.TEXT_HIDDEN="hidden",this.CC1="CC1",this.CC3="CC3",this.UTF8="utf-8",this.SCHEME_ID_URI="schemeIdUri",this.START_TIME="starttime",this.SERVICE_DESCRIPTION_LL_SCHEME="urn:dvb:dash:lowlatency:scope:2019",this.SUPPLEMENTAL_PROPERTY_LL_SCHEME="urn:dvb:dash:lowlatency:critical:2019",this.XML="XML",this.ARRAY_BUFFER="ArrayBuffer";}}]),i);n.default=a,t.exports=n.default;},{}],109:[function(e,t,n){function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r);}}function i(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),this.init();}Object.defineProperty(n,"__esModule",{value:!0});var a=new(function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}(i,[{key:"init",value:function(){this.TCP_CONNECTION="TcpList",this.HTTP_REQUEST="HttpList",this.TRACK_SWITCH="RepSwitchList",this.BUFFER_LEVEL="BufferLevel",this.BUFFER_LOADED="bufferLoaded",this.ABANDON_LOAD="abandonload",this.ALLOW_LOAD="allowload",this.BUFFER_EMPTY="bufferStalled",this.BUFFER_STATE="BufferState",this.DVR_INFO="DVRInfo",this.DROPPED_FRAMES="DroppedFrames",this.SCHEDULING_INFO="SchedulingInfo",this.REQUESTS_QUEUE="RequestsQueue",this.MANIFEST_UPDATE="ManifestUpdate",this.MANIFEST_UPDATE_STREAM_INFO="ManifestUpdatePeriodInfo",this.MANIFEST_UPDATE_TRACK_INFO="ManifestUpdateRepresentationInfo",this.PLAY_LIST="PlayList",this.DVB_ERRORS="DVBErrors";}}]),i);n.default=a,t.exports=n.default;},{}],110:[function(e,t,n){function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r);}}function i(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),this.init();}Object.defineProperty(n,"__esModule",{value:!0});var a=new(function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}(i,[{key:"init",value:function(){this.CLEARKEY_KEYSTEM_STRING="org.w3.clearkey",this.WIDEVINE_KEYSTEM_STRING="com.widevine.alpha",this.PLAYREADY_KEYSTEM_STRING="com.microsoft.playready";}}]),i);n.default=a,t.exports=n.default;},{}],111:[function(e,t,n){function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(n,"__esModule",{value:!0});var Y=r(e(189)),K=r(e(108)),q=r(e(109)),H=r(e(224)),V=r(e(149)),z=r(e(46)),W=r(e(54)),i=r(e(47)),X=r(e(185)),Q=r(e(186)),Z=r(e(187)),$=r(e(184)),J=r(e(188)),ee=r(e(45)),te=e(241),ne=e(218);function a(){var f=this.context,e=(0, ee.default)(f).getInstance(),c=(0, z.default)(f).getInstance(),h=void 0,p=void 0,g=void 0,o=void 0,s=void 0,_=void 0,E=void 0,m=void 0,u=void 0,i=void 0,a=void 0,l=void 0,d=void 0,v=void 0,y=void 0,T=void 0,S=void 0,A=void 0,I=void 0,R=void 0,b=void 0,D=void 0,M=void 0;function n(){(g=(0, Y.default)(f).create({dashMetrics:D,mediaPlayerModel:y,settings:M})).initialize();}function t(){s={},_={},m={},E={},A={},b={},void 0===i&&(i=!1),R=I=S=void 0,clearTimeout(u),u=null;}function r(e){e.mediaType===K.default.VIDEO&&(S=e.oldQuality,I.push(S,v.getPlaybackQuality()));}function N(e){e.metric!==q.default.HTTP_REQUEST||!e.value||e.value.type!==te.HTTPRequest.MEDIA_SEGMENT_TYPE||e.mediaType!==K.default.AUDIO&&e.mediaType!==K.default.VIDEO||R.push(e.mediaType,e.value,M.get().streaming.abr.useDeadTimeLatency),e.metric!==q.default.BUFFER_LEVEL||e.mediaType!==K.default.AUDIO&&e.mediaType!==K.default.VIDEO||function(e,t){var n=M.get().streaming.abr.ABRStrategy;{if(n===K.default.ABR_STRATEGY_BOLA)return b[e]=!0;if(n===K.default.ABR_STRATEGY_THROUGHPUT)return b[e]=!1}var r=y.getStableBufferTime(),i=r,a=.5*r,o=b[e],s=(o?a:i)<t;(b[e]=s)!==o&&(s?p.info("["+e+"] switching from throughput to buffer occupancy ABR rule (buffer: "+t.toFixed(3)+")."):p.info("["+e+"] switching from buffer occupancy to throughput ABR rule (buffer: "+t.toFixed(3)+")."));}(e.mediaType,.001*e.value.level);}function C(e,t){return s[t]=s[t]||{},s[t].hasOwnProperty(e)||(s[t][e]=0),function(e,t){if(t!==K.default.VIDEO||!M.get().streaming.abr.limitBitrateByPortal||!E[t])return e;i||G();var n=d.getAdaptationForType(0,t).Representation,r=e;if(0<a&&0<l){for(;0<r&&n[r]&&a<n[r].width&&a-n[r-1].width<n[r].width-a;)--r;for(;r<n.length-1&&n[r].width===n[r+1].width;)r+=1;}return r}(function(e,t,n){var r=M.get().streaming.abr.maxRepresentationRatio[t];if(isNaN(r)||1<=r||r<0)return e;return Math.min(e,Math.round(n*r))}(function(e,t){var n=e;if(!E[t])return n;var r=w(t);void 0!==r&&(n=Math.max(e,r));var i=O(t);void 0!==i&&(n=Math.min(n,i));return n}(s[t][e],e),e,s[t][e]),e)}function O(e){var t,n=(t=e,M.get().streaming.abr.maxBitrate[t]);return -1<n?F(E[e].getMediaInfo(),n):void 0}function w(e){var t,n=(t=e,M.get().streaming.abr.minBitrate[t]);if(-1<n){var r=E[e].getMediaInfo(),i=U(r),a=F(r,n);return i[a]&&a<i.length-1&&i[a].bitrate<1e3*n&&a++,a}}function P(e,t,n,r){var i=t.id,a=B(e);(0, ne.checkInteger)(n);var o=C(e,i);n!==a&&0<=n&&n<=o&&L(e,a,n,o,r);}function L(e,t,n,r,i){var a,o,s,u,l,d,f;e&&E[e]&&(o=(a=E[e].getStreamInfo())?a.id:null,M.get().debug.logLevel===ee.default.LOG_LEVEL_DEBUG&&(s=D.getCurrentBufferLevel(e),p.info("["+e+"] switch from "+t+" to "+n+"/"+r+" (buffer: "+s+") "+(i?JSON.stringify(i):"."))),l=e,f=n,_[d=o]=_[d]||{},_[d][l]=f,c.trigger(W.default.QUALITY_CHANGE_REQUESTED,{mediaType:e,streamInfo:a,oldQuality:t,newQuality:n,reason:i}),u=R.getAverageThroughput(e),isNaN(u)||T.setSavedBitrateSettings(e,u));}function x(e,t){m[e].state=t;}function F(e,t,n){var r=e&&e.type?E[e.type].getRepresentationInfo():null;if(M.get().streaming.abr.useDeadTimeLatency&&n&&r&&r.fragmentDuration){n/=1e3;var i=r.fragmentDuration;if(i<n)return 0;t*=1-n/i;}for(var a=U(e),o=a.length-1;0<=o;o--){if(1e3*t>=a[o].bitrate)return o}return 0}function U(e){var t=[];if(!e||!e.bitrateList)return t;for(var n=e.bitrateList,r=e.type,i=void 0,a=0,o=n.length;a<o;a++)(i=new H.default).mediaType=r,i.qualityIndex=a,i.bitrate=n[a].bandwidth,i.width=n[a].width,i.height=n[a].height,i.scanType=n[a].scanType,t.push(i);return t}function k(e){return b[e]}function B(e){if(e&&E[e]){var t=E[e].getStreamInfo(),n=t?t.id:null;if(n)return _[n]=_[n]||{},_[n].hasOwnProperty(e)||(_[n][e]=0),_[n][e]}return 0}function G(){var e;v&&(e=M.get().streaming.abr.usePixelRatioInLimitBitrateByPortal&&window.hasOwnProperty("devicePixelRatio")?window.devicePixelRatio:1,a=v.getClientWidth()*e,l=v.getClientHeight()*e);}function j(e){var t=e.request.mediaType;if(M.get().streaming.abr.autoSwitchBitrate[t]){var n=E[t];if(!n)return;var r,i=(0, X.default)(f).create({abrController:h,streamProcessor:n,currentRequest:e.request,useBufferOccupancyABR:k(t)}),a=g.shouldAbandonFragment(i);a.quality>Q.default.NO_CHANGE&&((r=n.getFragmentModel()).getRequests({state:V.default.FRAGMENT_MODEL_LOADING,index:e.request.index})[0]&&(r.abortRequests(),x(t,q.default.ABANDON_LOAD),A[t].reset(),A[t].push({oldValue:B(t),newValue:a.quality,confidence:1,reason:a.reason}),P(t,o.getActiveStreamInfo(),a.quality,a.reason),clearTimeout(u),u=setTimeout(function(){x(t,q.default.ALLOW_LOAD),u=null;},M.get().streaming.abandonLoadTimeout)));}}return h={isPlayingAtTopQuality:function(e){var t=e?e.id:null,n=B(K.default.AUDIO),r=B(K.default.VIDEO);return n===C(K.default.AUDIO,t)&&r===C(K.default.VIDEO,t)},updateTopQualityIndex:function(e){if(e){var t=e.type,n=e.streamInfo.id,r=e.representationCount-1;return i=t,o=r,s[a=n]=s[a]||{},s[a][i]=o,r}var i,a,o;},getThroughputHistory:function(){return R},getBitrateList:U,getQualityForBitrate:F,getTopBitrateInfoFor:function(e){if(e&&E&&E[e]){var t=E[e].getStreamInfo();if(t&&t.id){var n=C(e,t.id),r=U(E[e].getMediaInfo());return r[n]?r[n]:null}}return null},getMaxAllowedIndexFor:O,getMinAllowedIndexFor:w,getInitialBitrateFor:function(e){if(!function(){if(!T||!T.hasOwnProperty("getSavedBitrateSettings"))throw new Error(K.default.MISSING_CONFIG_ERROR)}(),e===K.default.TEXT||e===K.default.FRAGMENTED_TEXT)return NaN;var t,n=T.getSavedBitrateSettings(e),r=M.get().streaming.abr.initialBitrate[e],i=M.get().streaming.abr.initialRepresentationRatio[e];return -1===r&&(r=-1<i?(t=d.getAdaptationForType(0,e).Representation,Array.isArray(t)?t[Math.max(Math.round(t.length*i)-1,0)].bandwidth:0):isNaN(n)?e===K.default.VIDEO?1e3:100:n),r},getQualityFor:B,getAbandonmentStateFor:function(e){return m[e]?m[e].state:null},setPlaybackQuality:P,checkPlaybackQuality:function(e){var t,n,r,i,a,o,s,u,l,d;e&&E&&E[e]&&(n=(t=E[e].getStreamInfo())?t.id:null,r=B(e),i=(0, X.default)(f).create({abrController:h,streamProcessor:E[e],currentValue:r,switchHistory:A[e],droppedFramesHistory:I,useBufferOccupancyABR:k(e)}),!I||(a=v.getPlaybackQuality())&&I.push(S,a),M.get().streaming.abr.autoSwitchBitrate[e]&&(o=w(e),s=C(e,n),l=(u=g.getMaxQuality(i)).quality,void 0!==o&&(l>Q.default.NO_CHANGE?l:r)<o&&(l=o),s<l&&(l=s),A[e].push({oldValue:r,newValue:l}),l>Q.default.NO_CHANGE&&l!=r?(m[e].state===q.default.ALLOW_LOAD||r<l)&&L(e,r,l,s,u.reason):M.get().debug.logLevel===ee.default.LOG_LEVEL_DEBUG&&(d=D.getCurrentBufferLevel(e),p.debug("["+e+"] stay on "+r+"/"+s+" (buffer: "+d+")"))));},getTopQualityIndexFor:C,setElementSize:G,setWindowResizeEventCalled:function(e){i=e;},createAbrRulesCollection:n,registerStreamType:function(e,t){A[e]=A[e]||(0, Z.default)(f).create(),E[e]=t,m[e]=m[e]||{},m[e].state=q.default.ALLOW_LOAD,b[e]=!1,c.on(W.default.LOADING_PROGRESS,j,this),e==K.default.VIDEO&&(c.on(W.default.QUALITY_CHANGE_RENDERED,r,this),I=I||(0, $.default)(f).create(),G()),c.on(W.default.METRIC_ADDED,N,this),c.on(W.default.PERIOD_SWITCH_COMPLETED,n,this),R=R||(0, J.default)(f).create({settings:M});},unRegisterStreamType:function(e){delete E[e];},setConfig:function(e){e&&(e.streamController&&(o=e.streamController),e.domStorage&&(T=e.domStorage),e.mediaPlayerModel&&(y=e.mediaPlayerModel),e.dashMetrics&&(D=e.dashMetrics),e.adapter&&(d=e.adapter),e.videoModel&&(v=e.videoModel),e.settings&&(M=e.settings));},reset:function(){t(),c.off(W.default.LOADING_PROGRESS,j,this),c.off(W.default.QUALITY_CHANGE_RENDERED,r,this),c.off(W.default.METRIC_ADDED,N,this),c.off(W.default.PERIOD_SWITCH_COMPLETED,n,this),g&&g.reset();}},p=e.getLogger(h),t(),h}a.__dashjs_factory_name="AbrController";var o=i.default.getSingletonFactory(a);o.QUALITY_DEFAULT=0,i.default.updateSingletonFactory(a.__dashjs_factory_name,o),n.default=o,t.exports=n.default;},{108:108,109:109,149:149,184:184,185:185,186:186,187:187,188:188,189:189,218:218,224:224,241:241,45:45,46:46,47:47,54:54}],112:[function(e,t,n){function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(n,"__esModule",{value:!0});var u=r(e(147)),l=r(e(205)),d=r(e(220)),f=r(e(85)),i=r(e(47)),c=r(e(46)),h=r(e(54));function a(){var e=void 0,n=void 0,t=this.context,r=(0, c.default)(t).getInstance(),i=(0, d.default)(t).getInstance(),a=void 0,o=void 0;function s(e){a.invalidateSelectedIndexes(e.entry);}return e={reset:function(){a.reset(),o.reset();},initialize:function(e){var t;a.setConfig({adapter:n}),t=e,a.update(t),o.chooseSelector(n.getIsDVB(t));},resolve:function(e){var t=a.getForPath(e).reduce(function(e,t){var n=o.select(t);return n?(i.isRelative(n.url)?e.url=i.resolve(n.url,e.url):(e.url=n.url,e.serviceLocation=n.serviceLocation),e.availabilityTimeOffset=n.availabilityTimeOffset,e.availabilityTimeComplete=n.availabilityTimeComplete,e):new f.default},new f.default);if(!i.isRelative(t.url))return t},setConfig:function(e){e.baseURLTreeModel&&(a=e.baseURLTreeModel),e.baseURLSelector&&(o=e.baseURLSelector),e.adapter&&(n=e.adapter);}},a=(0, u.default)(t).create(),o=(0, l.default)(t).create(),r.on(h.default.SERVICE_LOCATION_BLACKLIST_CHANGED,s,e),e}a.__dashjs_factory_name="BaseURLController",n.default=i.default.getClassFactory(a),t.exports=n.default;},{147:147,205:205,220:220,46:46,47:47,54:54,85:85}],113:[function(e,t,n){function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(n,"__esModule",{value:!0});var i=r(e(47)),s=r(e(46));function a(e){e=e||{};var t=[],n=(0, s.default)(this.context).getInstance(),r=e.updateEventName,i=e.addBlacklistEventName;function a(e){-1===t.indexOf(e)&&(t.push(e),n.trigger(r,{entry:e}));}function o(e){a(e.entry);}return function(){i&&n.on(i,o,this);}(),{add:a,contains:function(e){return !!(t.length&&e&&e.length)&&-1!==t.indexOf(e)},reset:function(){t=[];}}}a.__dashjs_factory_name="BlackListController",n.default=i.default.getClassFactory(a),t.exports=n.default;},{46:46,47:47}],114:[function(e,t,n){function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(n,"__esModule",{value:!0});var ge=r(e(108)),_e=r(e(109)),Ee=r(e(149)),me=r(e(104)),ve=r(e(103)),ye=r(e(111)),Te=r(e(117)),Se=r(e(46)),Ae=r(e(54)),i=r(e(47)),Ie=r(e(45)),Re=r(e(213)),be=r(e(225)),De=r(e(51)),Me=e(241),Ne="BufferController";function a(e){e=e||{};var r=this.context,i=(0, Se.default)(r).getInstance(),a=e.errHandler,l=e.fragmentModel,o=e.representationController,n=e.mediaController,t=e.adapter,s=e.textController,u=e.abrController,d=e.playbackController,f=e.streamInfo,c=e.type,h=e.settings,p=void 0,g=void 0,_=void 0,E=void 0,m=void 0,v=void 0,y=void 0,T=void 0,S=void 0,A=void 0,I=void 0,R=void 0,b=void 0,D=void 0,M=void 0,N=void 0,C=void 0,O=void 0,w=void 0,P=void 0,L=void 0,x=void 0;function F(e,t){if(!C||!e)return null;var n=e[0];if(y)try{"function"==typeof(A=t&&t[c]?(0,me.default)(r).create(y,n,j.bind(this),h.get().streaming.useAppendWindowEnd,t[c]):(0,me.default)(r).create(y,n,j.bind(this),h.get().streaming.useAppendWindowEnd)).getBuffer().initialize&&A.getBuffer().initialize(c,f,e,l);}catch(e){g.fatal("Caught error on create SourceBuffer: "+e),a.error(new be.default(De.default.MEDIASOURCE_TYPE_UNSUPPORTED_CODE,De.default.MEDIASOURCE_TYPE_UNSUPPORTED_MESSAGE+c));}else A=(0, ve.default)(r).create(j.bind(this));return ie(this.getRepresentationInfo(_)),A}function U(e){e.chunk.streamId===f.id&&e.chunk.mediaInfo.type===c&&(g.info("Init fragment finished loading saving to",c+"'s init cache"),C.save(e.chunk),g.debug("Append Init fragment",c," with representationId:",e.chunk.representationId," and quality:",e.chunk.quality,", data size:",e.chunk.bytes.byteLength),B(e.chunk));}function k(e){var t,n=e.chunk;n.streamId===f.id&&n.mediaInfo.type==c&&(L?(x=n,(t=A&&A.getAllBufferRanges())&&0<t.length&&.5<d.getTimeToStreamEnd()&&(g.debug("Clearing buffer because track changed - "+(t.end(t.length-1)+.5)),te([{start:0,end:t.end(t.length-1)+.5,force:!0}]))):B(n));}function B(e){A.append(e),e.mediaInfo.type===ge.default.VIDEO&&he(Ae.default.VIDEO_CHUNK_RECEIVED,{chunk:e});}function G(e){if(e&&0<e.length)for(var t=0,n=e.length;t<n;t++)g.debug("Buffered range: "+e.start(t)+" - "+e.end(t)+", currentTime = ",d.getTime());}function j(e){var t,n,r;if(e.error)return 22===e.error.code&&(N=!0,v=.8*fe(),g.warn("Quota exceeded, Critical Buffer: "+v),0<v&&(t=Math.max(.2*v,1),n=v-t,r={streaming:{bufferToKeep:parseFloat(t.toFixed(5)),bufferAheadToKeep:parseFloat(n.toFixed(5))}},h.update(r))),void(22!==e.error.code&&ce()||(g.warn("Clearing playback buffer to overcome quota exceed situation"),he(Ae.default.QUOTA_EXCEEDED,{criticalBufferLevel:v}),H()));N=!1,(b=e.chunk)&&!isNaN(b.index)&&(T=Math.max(b.index,T),Z());var i,a=A.getAllBufferRanges();b.segmentType===Me.HTTPRequest.MEDIA_SEGMENT_TYPE?(G(a),V(),function(){if(c!==ge.default.AUDIO&&c!==ge.default.VIDEO)return;if(isNaN(O))return;var e=d.getTime(),t=X(O,0);if(e===O&&t)return;var n=o.getCurrentRepresentation().segmentDuration;if(!(t=X(O,n)))return;Math.abs(e-O)>n?O<=t.end&&(d.seek(Math.max(O,t.start),!1,!0),O=NaN):e<t.start&&(d.seek(t.start,!1,!0),O=NaN);}()):L&&(i=d.getTime(),g.debug("AppendToBuffer seek target should be "+i),he(Ae.default.SEEK_TARGET,{time:i})),b&&he(b.endFragment?Ae.default.BYTES_APPENDED_END_FRAGMENT:Ae.default.BYTES_APPENDED,{quality:b.quality,startTime:b.start,index:b.index,bufferedRanges:a,mediaType:c});}function Y(e){e.streamInfo.id==f.id&&e.mediaType===c&&_!==e.newQuality&&(ie(this.getRepresentationInfo(e.newQuality)),_=e.newQuality);}function K(e){O=e.seekTime,E&&(E=!(w=!0),S=Number.POSITIVE_INFINITY),(c!==ge.default.FRAGMENTED_TEXT?H:V)();}function q(){O=NaN;}function H(){A.waitForUpdateEnd(function(){var e=function(){var e=[],t=A.getAllBufferRanges();if(!t||0===t.length)return e;var n=d.getTime(),r=t.end(t.length-1)+.5,i=l.getRequests({state:Ee.default.FRAGMENT_MODEL_EXECUTED,time:n,threshold:.01})[0];{var a,o,s,u;i?(a={start:0,end:i.startTime-.5},(o=l.getRequests({state:Ee.default.FRAGMENT_MODEL_EXECUTED,time:i.startTime-i.duration/2,threshold:.01})[0])&&o.startTime!=i.startTime&&(a.end=o.startTime),a.start<a.end&&a.end>t.start(0)&&e.push(a),s={start:i.startTime+i.duration+.5,end:r},(u=l.getRequests({state:Ee.default.FRAGMENT_MODEL_EXECUTED,time:i.startTime+i.duration+.5,threshold:.01})[0])&&u.startTime!==i.startTime&&(s.start=u.startTime+u.duration+.5),s.start<s.end&&s.start<r&&e.push(s)):(g.debug("getAllRangesWithSafetyFactor - No request found in current time position, removing full buffer 0 -",r),e.push({start:0,end:r}));}return e}();e&&0!==e.length||V(),te(e);});}function V(){(!L||c===ge.default.FRAGMENTED_TEXT&&s.isTextEnabled())&&Q();}function z(){$();}function W(){O=NaN,$();}function X(e,t){var n=A.getAllBufferRanges(),r=0,i=0,a=null,o=null,s=0,u=void 0,l=void 0,d=isNaN(t)?.15:t;if(null!=n){for(l=0,u=n.length;l<u;l++)if(r=n.start(l),i=n.end(l),null===a)s=Math.abs(r-e),(r<=e&&e<i||s<=d)&&(a=r,o=i);else {if(!((s=r-o)<=d))break;o=i;}if(null!==a)return {start:a,end:o}}return null}function Q(){var e,t,n;d&&(e=(isNaN(O)?d.getTime():O)||0,m=null===(n=X(e,t))?0:n.end-e,he(Ae.default.BUFFER_LEVEL_UPDATED,{bufferLevel:m}),$());}function Z(){S-1<=T&&!E&&void 0===A.discharge&&(E=!0,g.debug("checkIfBufferingCompleted trigger BUFFERING_COMPLETED"),he(Ae.default.BUFFERING_COMPLETED));}function $(){c!==ge.default.AUDIO&&c!==ge.default.VIDEO||(w&&!E&&0<m&&d&&d.getTimeToStreamEnd()-m<.5&&(E=!(w=!1),g.debug("checkIfSufficientBuffer trigger BUFFERING_COMPLETED"),he(Ae.default.BUFFERING_COMPLETED)),(!h.get().streaming.lowLatencyEnabled&&m<.5||0===m)&&!E?J(_e.default.BUFFER_EMPTY):(E||m>=f.manifestInfo.minBufferTime)&&J(_e.default.BUFFER_LOADED));}function J(e){R===e||e===_e.default.BUFFER_EMPTY&&0===d.getTime()||c===ge.default.FRAGMENTED_TEXT&&!s.isTextEnabled()||(R=e,he(Ae.default.BUFFER_LEVEL_STATE_CHANGED,{state:e}),he(e===_e.default.BUFFER_LOADED?Ae.default.BUFFER_LOADED:Ae.default.BUFFER_EMPTY),g.debug(e===_e.default.BUFFER_LOADED?"Got enough buffer to start":"Waiting for more buffer before starting playback"));}function ee(){A&&c!==ge.default.FRAGMENTED_TEXT&&(E||te(function(){var e=[],t=A.getAllBufferRanges();if(!t||0===t.length)return e;var n=d.getTime(),r={start:Math.max(0,n-h.get().streaming.bufferToKeep),end:n+h.get().streaming.bufferAheadToKeep},i=l.getRequests({state:Ee.default.FRAGMENT_MODEL_EXECUTED,time:n,threshold:.01})[0];if(i)r.start=Math.min(i.startTime,r.start),r.end=Math.max(i.startTime+i.duration,r.end);else if(0===n&&d.getIsDynamic())return [];if(t.start(0)<=r.start){for(var a={start:0,end:r.start},o=0;o<t.length&&t.end(o)<=r.start;o++)a.end=t.end(o);a.start<a.end&&e.push(a);}{var s;t.end(t.length-1)>=r.end&&((s={start:r.end,end:t.end(t.length-1)+.01}).start<s.end&&e.push(s));}return e}()));}function te(e){e&&A&&0!==e.length&&(P.push.apply(P,e),M||ne());}function ne(){if(0===P.length||!A)return g.debug("Nothing to prune, halt pruning"),void(M=!(P=[]));var e=A.getBuffer();if(!e||!e.buffered||0===e.buffered.length)return g.debug("SourceBuffer is empty (or does not exist), halt pruning"),void(M=!(P=[]));var t=P.shift();g.debug("Removing buffer from:",t.start,"to",t.end),M=!0,d.getTime()<t.end&&(E=!1,T=0),A.remove(t.start,t.end,t.force);}function re(e){A===e.buffer&&(g.debug("onRemoved buffer from:",e.from,"to",e.to),G(A.getAllBufferRanges()),0===P.length&&(M=!1),e.unintended&&(g.warn("Detected unintended removal from:",e.from,"to",e.to,"setting index handler time to",e.from),he(Ae.default.SEEK_TARGET,{time:e.from})),M?ne():(L?(L=!1,x&&B(x)):Q(),he(Ae.default.BUFFER_CLEARED,{from:e.from,to:e.to,unintended:e.unintended,hasEnoughSpaceToAppend:ce(),quotaExceeded:N})));}function ie(e){e&&void 0!==e.MSETimeOffset&&A&&A.updateTimestampOffset&&A.updateTimestampOffset(e.MSETimeOffset);}function ae(e){e.sender.getStreamId()===f.id&&e.sender.getType()===c&&(e.error||ie(e.currentRepresentation));}function oe(e){e.request.mediaInfo.streamInfo.id===f.id&&e.request.mediaType===c&&(S=e.request.index,Z());}function se(e){var t;e.newMediaInfo.streamInfo.id!==f.id||e.newMediaInfo.type!==c||(t=A&&A.getAllBufferRanges())&&(g.info("Track change asked"),n.getSwitchMode(c)===Te.default.TRACK_SWITCH_MODE_ALWAYS_REPLACE&&t&&0<t.length&&.5<d.getTimeToStreamEnd()&&(E=!1,S=Number.POSITIVE_INFINITY));}function ue(){++D*(h.get().streaming.wallclockTimeUpdateInterval/1e3)>=h.get().streaming.bufferPruningInterval&&(D=0,ee());}function le(){$();}function de(e,t){y=e,A&&t&&"function"==typeof A.discharge&&(I=A,F(t));}function fe(){var e,t=A.getAllBufferRanges(),n=0,r=void 0;if(!t)return n;for(r=0,e=t.length;r<e;r++)n+=t.end(r)-t.start(r);return n}function ce(){return fe()<v}function he(e,t){var n=t||{};n.sender=p,n.mediaType=c,n.streamId=f.id,i.trigger(e,n);}function pe(e,t){v=Number.POSITIVE_INFINITY,R=void 0,_=ye.default.QUALITY_DEFAULT,S=Number.POSITIVE_INFINITY,b=null,w=N=M=E=!1,D=m=T=0,P=[],O=NaN,A&&(e||A.abort(),A.reset(t),A=null),L=!1;}return p={getBufferControllerType:function(){return Ne},getRepresentationInfo:function(e){return t.convertDataToRepresentationInfo(o.getRepresentationForQuality(e))},initialize:function(e){de(e),_=u.getQualityFor(c),i.on(Ae.default.DATA_UPDATE_COMPLETED,ae,this),i.on(Ae.default.INIT_FRAGMENT_LOADED,U,this),i.on(Ae.default.MEDIA_FRAGMENT_LOADED,k,this),i.on(Ae.default.QUALITY_CHANGE_REQUESTED,Y,this),i.on(Ae.default.STREAM_COMPLETED,oe,this),i.on(Ae.default.PLAYBACK_PLAYING,W,this),i.on(Ae.default.PLAYBACK_PROGRESS,V,this),i.on(Ae.default.PLAYBACK_TIME_UPDATED,V,this),i.on(Ae.default.PLAYBACK_RATE_CHANGED,le,this),i.on(Ae.default.PLAYBACK_SEEKING,K,this),i.on(Ae.default.PLAYBACK_SEEKED,q,this),i.on(Ae.default.PLAYBACK_STALLED,z,this),i.on(Ae.default.WALLCLOCK_TIME_UPDATED,ue,this),i.on(Ae.default.CURRENT_TRACK_CHANGED,se,this,Se.default.EVENT_PRIORITY_HIGH),i.on(Ae.default.SOURCEBUFFER_REMOVE_COMPLETED,re,this);},createBuffer:F,dischargePreBuffer:function(){if(A&&I&&"function"==typeof I.discharge){var e=I.getAllBufferRanges();if(0<e.length){for(var t="Beginning "+c+"PreBuffer discharge, adding buffer for:",n=0;n<e.length;n++)t+=" start: "+e.start(n)+", end: "+e.end(n)+";";g.debug(t);}else g.debug("PreBuffer discharge requested, but there were no media segments in the PreBuffer.");for(var r=I.discharge(),i=null,a=0;a<r.length;a++){var o=r[a],s=C.extract(o.streamId,o.representationId);s&&(i!==s&&(A.append(s),i=s),A.append(o));}I.reset(),I=null;}},getType:function(){return c},getBuffer:function(){return A},setBuffer:function(e){A=e;},getBufferLevel:function(){return m},getRangeAt:X,setMediaSource:de,getMediaSource:function(){return y},appendInitSegment:function(e){var t=C.extract(f.id,e);return !!t&&(g.info("Append Init fragment",c," with representationId:",t.representationId," and quality:",t.quality,", data size:",t.bytes.byteLength),B(t),!0)},replaceBuffer:function(){L=!0;},getIsBufferingCompleted:function(){return E},getIsPruningInProgress:function(){return M},reset:function(e,t){i.off(Ae.default.DATA_UPDATE_COMPLETED,ae,this),i.off(Ae.default.INIT_FRAGMENT_LOADED,U,this),i.off(Ae.default.MEDIA_FRAGMENT_LOADED,k,this),i.off(Ae.default.QUALITY_CHANGE_REQUESTED,Y,this),i.off(Ae.default.STREAM_COMPLETED,oe,this),i.off(Ae.default.PLAYBACK_PLAYING,W,this),i.off(Ae.default.PLAYBACK_PROGRESS,V,this),i.off(Ae.default.PLAYBACK_TIME_UPDATED,V,this),i.off(Ae.default.PLAYBACK_RATE_CHANGED,le,this),i.off(Ae.default.PLAYBACK_SEEKING,K,this),i.off(Ae.default.PLAYBACK_SEEKED,q,this),i.off(Ae.default.PLAYBACK_STALLED,z,this),i.off(Ae.default.WALLCLOCK_TIME_UPDATED,ue,this),i.off(Ae.default.CURRENT_TRACK_CHANGED,se,this),i.off(Ae.default.SOURCEBUFFER_REMOVE_COMPLETED,re,this),pe(e,t);}},g=(0, Ie.default)(r).getInstance().getLogger(p),C=(0, Re.default)(r).getInstance(),pe(),p}a.__dashjs_factory_name=Ne,n.default=i.default.getClassFactory(a),t.exports=n.default;},{103:103,104:104,108:108,109:109,111:111,117:117,149:149,213:213,225:225,241:241,45:45,46:46,47:47,51:51,54:54}],115:[function(e,t,n){function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(n,"__esModule",{value:!0});var i=r(e(47)),b=r(e(45)),D=r(e(46)),M=r(e(54)),N=r(e(159));function a(){var i="urn:mpeg:dash:event:2012",a=1,o="urn:mpeg:dash:event:callback:2015",s=1,e=100,u=300,l=this.context,d=(0, D.default)(l).getInstance(),t=void 0,f=void 0,r=void 0,c=void 0,h=void 0,n=void 0,p=void 0,g=void 0,_=void 0,E=void 0,m=void 0;function v(){if(!g||!_)throw new Error("setConfig function has to be called previously")}function y(){m=!1,r={},c={},n=null,E=!(h={}),p=Date.now()/1e3;}function T(){try{null!==n&&m&&(clearInterval(n),n=null,m=!1,function(){try{I(c),I(r);}catch(e){}}());}catch(e){throw e}}function S(){try{var e,t;E||(t=(e=_.getTime())-p,t=0<p?Math.max(0,t):0,A(c,t,e),A(r,t,e),function(){try{if(h)for(var e=_.getTime(),t=Object.keys(h),n=0;n<t.length;n++){var r=t[n],i=h[r];null!==i&&(i.duration+i.calculatedPresentationTime)/i.eventStream.timescale<e&&(f.debug("Remove Event "+r+" at time "+e),i=null,delete h[r]);}}catch(e){}}(),p=e),E=!1;}catch(e){E=!1;}}function A(e,t,n){try{if(e)for(var r=Object.keys(e),i=0;i<r.length;i++){var a,o=r[i],s=e[o];void 0!==s&&((a=s.calculatedPresentationTime/s.eventStream.timescale)<=n&&n<=a+t?R(o,s,e):(function(e,t,n){try{return n<e-t}catch(e){return !1}}(n,t,a)||function(e){try{var t=e.eventStream.period.start+e.eventStream.period.duration;return e.calculatedPresentationTime/1e3>t}catch(e){return !1}}(s))&&(f.debug("Deleting event "+o+" as it is expired or invalid"),delete e[o]));}}catch(e){}}function I(i){try{var e=function(){var e=Object.keys(i),r=_.getTime();if(!e||0===e.length)return {v:void 0};var t=i[e[0]].eventStream&&i[e[0]].eventStream.period&&!isNaN(i[e[0]].eventStream.period.duration)?i[e[0]].eventStream.period.duration:NaN,n=i[e[0]].eventStream&&i[e[0]].eventStream.period&&!isNaN(i[e[0]].eventStream.period.start)?i[e[0]].eventStream.period.start:NaN;if(isNaN(t)||isNaN(n))return {v:void 0};e.forEach(function(e){var t=i[e],n=t.calculatedPresentationTime/t.eventStream.timescale;Math.abs(n-r)<u&&R(e,t,i);});}();if("object"==typeof e)return e.v}catch(e){}}function R(e,t,n){try{var r=_.getTime();0<t.duration&&(h[e]=t),t.eventStream.schemeIdUri===i&&t.eventStream.value==a?0===t.duration&&0===t.presentationTimeDelta||(f.debug("Starting manifest refresh event "+e+" at "+r),function(){try{v(),g.refreshManifest();}catch(e){}}()):t.eventStream.schemeIdUri===o&&t.eventStream.value==s?(f.debug("Starting callback event "+e+" at "+r),function(e){try{(0,N.default)(l).create({}).load({method:"get",url:e,request:{responseType:"arraybuffer"}});}catch(e){throw e}}(t.messageData)):(f.debug("Starting event "+e+" at "+r),d.trigger(t.eventStream.schemeIdUri,{event:t})),delete n[e];}catch(e){}}return t={addInlineEvents:function(e){try{if(v(),e)for(var t=0;t<e.length;t++){var n=e[t];r[n.id]=n,f.debug("Add inline event with id "+n.id);}f.debug("Added "+e.length+" inline events");}catch(e){throw e}},addInbandEvents:function(e){try{v();for(var t=0;t<e.length;t++){var n=e[t];n.id in c?f.debug("Repeated event with id "+n.id):(n.eventStream.schemeIdUri===i&&void 0===c[n.id]&&function(e){try{var t,n,r;e.eventStream.value==a&&(t=e.eventStream.timescale||1,n=e.calculatedPresentationTime/t,r=void 0,r=4294967295==e.calculatedPresentationTime?NaN:(e.calculatedPresentationTime+e.duration)/t,f.info("Manifest validity changed: Valid until: "+n+"; remaining duration: "+r),d.trigger(M.default.MANIFEST_VALIDITY_CHANGED,{id:e.id,validUntil:n,newDuration:r,newManifestValidAfter:NaN}));}catch(e){}}(n),c[n.id]=n,f.debug("Add inband event with id "+n.id));}S();}catch(e){throw e}},start:function(){try{v(),f.debug("Start Event Controller"),m||isNaN(e)||(m=!0,n=setInterval(S,e));}catch(e){throw e}},setConfig:function(e){try{if(!e)return;e.manifestUpdater&&(g=e.manifestUpdater),e.playbackController&&(_=e.playbackController);}catch(e){throw e}},reset:function(){T(),y();}},f=(0, b.default)(l).getInstance().getLogger(t),y(),t}a.__dashjs_factory_name="EventController",n.default=i.default.getSingletonFactory(a),t.exports=n.default;},{159:159,45:45,46:46,47:47,54:54}],116:[function(e,t,n){function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(n,"__esModule",{value:!0});var h=r(e(108)),p=r(e(226)),d=r(e(149)),g=r(e(97)),_=r(e(217)),E=r(e(46)),m=r(e(54)),v=r(e(51)),i=r(e(47)),y=r(e(45));function a(r){r=r||{};var i=this.context,f=(0, E.default)(i).getInstance(),a=r.errHandler,o=r.mediaPlayerModel,s=r.dashMetrics,u=(0, y.default)(i).getInstance(),e=void 0,c=void 0,l=void 0;function t(){for(var e in l)l[e].reset();l={};}function n(e){var t,n,r,i,a,o,s,u,l,d;e.sender&&(t=e.request,n=e.response,r=t.isInitializationRequest(),i=t.mediaInfo.streamInfo,e.error&&(e.request.mediaType!==h.default.AUDIO&&e.request.mediaType!==h.default.VIDEO&&e.request.mediaType!==h.default.FRAGMENTED_TEXT||f.trigger(m.default.SERVICE_LOCATION_BLACKLIST_ADD,{entry:e.request.serviceLocation})),n&&i?(o=n,s=t,u=i.id,l=e.type!==m.default.FRAGMENT_LOADING_PROGRESS,(d=new p.default).streamId=u,d.mediaInfo=s.mediaInfo,d.segmentType=s.type,d.start=s.startTime,d.duration=s.duration,d.end=d.start+d.duration,d.bytes=o,d.index=s.index,d.quality=s.quality,d.representationId=s.representationId,d.endFragment=l,a=d,f.trigger(r?m.default.INIT_FRAGMENT_LOADED:m.default.MEDIA_FRAGMENT_LOADED,{chunk:a,request:t})):c.warn("No "+t.mediaType+" bytes to push or stream is inactive."));}return e={getModel:function(e,t){var n=l[t];return n||(n=(0, d.default)(i).create({streamId:e,dashMetrics:s,fragmentLoader:(0, g.default)(i).create({dashMetrics:s,mediaPlayerModel:o,errHandler:a,requestModifier:(0, _.default)(i).getInstance(),settings:r.settings,boxParser:r.boxParser,eventBus:f,events:m.default,errors:v.default,dashConstants:r.dashConstants,urlUtils:r.urlUtils}),debug:u,eventBus:f,events:m.default}),l[t]=n),n},reset:function(){f.off(m.default.FRAGMENT_LOADING_COMPLETED,n,this),f.off(m.default.FRAGMENT_LOADING_PROGRESS,n,this),t();}},c=u.getLogger(e),t(),f.on(m.default.FRAGMENT_LOADING_COMPLETED,n,e),f.on(m.default.FRAGMENT_LOADING_PROGRESS,n,e),e}a.__dashjs_factory_name="FragmentController",n.default=i.default.getClassFactory(a),t.exports=n.default;},{108:108,149:149,217:217,226:226,45:45,46:46,47:47,51:51,54:54,97:97}],117:[function(e,t,n){function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(n,"__esModule",{value:!0});var S=r(e(108)),A=r(e(54)),I=r(e(46)),i=r(e(47)),R=r(e(45)),b="neverReplace",D="alwaysReplace",M="highestBitrate",N="widestRange",C=M;function a(){var e=this.context,l=(0, I.default)(e).getInstance(),t=void 0,o=void 0,d=void 0,n=void 0,r=void 0,f=void 0,c=void 0,i=[D,b],a=[M,N];function s(e,t){if(!e||!t)return [];var n=t.id;return d[n]&&d[n][e]?d[n][e].list:[]}function h(e,t){return !e||!t||t&&!d[t.id]?null:d[t.id][e].current}function u(e,t){if(e&&e.streamInfo){var n,r,i=e.type,a=e.streamInfo,o=a.id,s=h(i,a);if(d[o]&&d[o][i]&&!m(e,s))if(d[o][i].current=e,!d[o][i].current||t&&i===S.default.FRAGMENTED_TEXT||l.trigger(A.default.CURRENT_TRACK_CHANGED,{oldMediaInfo:s,newMediaInfo:e,switchMode:f[i]}),!t){var u=(r={lang:(n=e).lang,viewpoint:n.viewpoint,roles:n.roles,accessibility:n.accessibility,audioChannelConfiguration:n.audioChannelConfiguration}).lang||r.viewpoint||r.role&&0<r.role.length||r.accessibility&&0<r.accessibility.length||r.audioChannelConfiguration&&0<r.audioChannelConfiguration.length?r:null;if(!u||!d[o][i].storeLastSettings)return;u.roles&&(u.role=u.roles[0],delete u.roles),u.accessibility&&(u.accessibility=u.accessibility[0]),u.audioChannelConfiguration&&(u.audioChannelConfiguration=u.audioChannelConfiguration[0]),c.setSavedMediaSettings(i,u);}}}function p(e,t){e&&t&&(n[e]=t);}function g(e){return e?n[e]:null}function _(){return r||C}function E(e){return e===S.default.AUDIO||e===S.default.VIDEO||e===S.default.TEXT||e===S.default.FRAGMENTED_TEXT||e===S.default.IMAGE}function m(e,t){if(!e&&!t)return !0;if(!e||!t)return !1;var n=e.id===t.id,r=e.viewpoint===t.viewpoint,i=e.lang===t.lang,a=e.roles.toString()===t.roles.toString(),o=e.accessibility.toString()===t.accessibility.toString(),s=e.audioChannelConfiguration.toString()===t.audioChannelConfiguration.toString();return n&&r&&i&&a&&o&&s}function v(){d={},n={audio:null,video:null,fragmentedText:null},f={audio:D,video:b};}function y(t,e){var n=!t.lang||e.lang.match(t.lang),r=!t.viewpoint||t.viewpoint===e.viewpoint,i=!t.role||!!e.roles.filter(function(e){return e===t.role})[0],a=!t.accessibility||!!e.accessibility.filter(function(e){return e===t.accessibility})[0],o=!t.audioChannelConfiguration||!!e.audioChannelConfiguration.filter(function(e){return e===t.audioChannelConfiguration})[0];return n&&r&&i&&a&&o}function T(e,t){if(e===S.default.FRAGMENTED_TEXT)return t[0];function n(e){var t=0,n=[],r=void 0;return e.forEach(function(e){r=Math.max.apply(Math,e.bitrateList.map(function(e){return e.bandwidth})),t<r?(t=r,n=[e]):r===t&&n.push(e);}),n}function r(e){var t=0,n=[],r=void 0;return e.forEach(function(e){r=e.representationCount,t<r?(t=r,n=[e]):r===t&&n.push(e);}),n}var i=_(),a=[];switch(i){case M:1<(a=n(t)).length&&(a=r(a));break;case N:1<(a=r(t)).length&&(a=n(t));break;default:o.warn("Track selection mode is not supported: "+i);}return a[0]}return t={checkInitialMediaSettingsForType:function(e,t){var n=g(e),r=s(e,t),i=[];n||p(e,n=c.getSavedMediaSettings(e)),r&&0!==r.length&&(n&&r.forEach(function(e){y(n,e)&&i.push(e);}),0===i.length?u(T(e,r),!0):1<i.length?u(T(e,i)):u(i[0]));},addTrack:function(e){if(e){var t=e.type;if(E(t)){var n=e.streamInfo.id;d[n]||(d[n]={audio:{list:[],storeLastSettings:!0,current:null},video:{list:[],storeLastSettings:!0,current:null},text:{list:[],storeLastSettings:!0,current:null},fragmentedText:{list:[],storeLastSettings:!0,current:null},image:{list:[],storeLastSettings:!0,current:null}});for(var r=d[n][t].list,i=0,a=r.length;i<a;++i)if(m(r[i],e))return;r.push(e);var o=g(t);o&&y(o,e)&&!h(t,e.streamInfo)&&u(e);}}},getTracksFor:s,getCurrentTrackFor:h,isCurrentTrack:function(e){if(!e)return !1;var t=e.type,n=e.streamInfo.id;return d[n]&&d[n][t]&&m(d[n][t].current,e)},setTrack:u,setInitialSettings:p,getInitialSettings:g,setSwitchMode:function(e,t){-1!==i.indexOf(t)?f[e]=t:o.warn("Track switch mode is not supported: "+t);},getSwitchMode:function(e){return f[e]},setSelectionModeForInitialTrack:function(e){-1!==a.indexOf(e)?r=e:o.warn("Track selection mode is not supported: "+e);},getSelectionModeForInitialTrack:_,isMultiTrackSupportedByType:E,isTracksEqual:m,matchSettings:y,saveTextSettingsDisabled:function(){c.setSavedMediaSettings(S.default.FRAGMENTED_TEXT,null);},setConfig:function(e){e&&e.domStorage&&(c=e.domStorage);},reset:v},o=(0, R.default)(e).getInstance().getLogger(t),v(),t}a.__dashjs_factory_name="MediaController";var o=i.default.getSingletonFactory(a);o.TRACK_SWITCH_MODE_NEVER_REPLACE=b,o.TRACK_SWITCH_MODE_ALWAYS_REPLACE=D,o.TRACK_SELECTION_MODE_HIGHEST_BITRATE=M,o.TRACK_SELECTION_MODE_WIDEST_RANGE=N,o.DEFAULT_INIT_TRACK_SELECTION_MODE=C,i.default.updateSingletonFactory(a.__dashjs_factory_name,o),n.default=o,t.exports=n.default;},{108:108,45:45,46:46,47:47,54:54}],118:[function(e,t,n){function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(n,"__esModule",{value:!0});var i=r(e(47)),a=r(e(45));function o(){var e=void 0,r=void 0,t=this.context;return e={createMediaSource:function(){var e="WebKitMediaSource"in window;return "MediaSource"in window?new MediaSource:e?new WebKitMediaSource:null},attachMediaSource:function(e,t){var n=window.URL.createObjectURL(e);return t.setSource(n),n},detachMediaSource:function(e){e.setSource(null);},setDuration:function(e,t){return e.duration!=t&&(e.duration=t),e.duration},setSeekable:function(e,t,n){e&&"function"==typeof e.setLiveSeekableRange&&"function"==typeof e.clearLiveSeekableRange&&"open"===e.readyState&&0<=t&&t<n&&(e.clearLiveSeekableRange(),e.setLiveSeekableRange(t,n));},signalEndOfStream:function(e){if(e&&"open"===e.readyState){for(var t=e.sourceBuffers,n=0;n<t.length;n++){if(t[n].updating)return;if(0===t[n].buffered.length)return}r.info("call to mediaSource endOfStream"),e.endOfStream();}}},r=(0, a.default)(t).getInstance().getLogger(e),e}o.__dashjs_factory_name="MediaSourceController",n.default=i.default.getSingletonFactory(o),t.exports=n.default;},{45:45,47:47}],119:[function(e,t,n){function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(n,"__esModule",{value:!0});var fe=r(e(108)),ce=r(e(109)),he=r(e(46)),pe=r(e(54)),i=r(e(47)),ge=r(e(45));function a(){var e=this.context,a=(0, he.default)(e).getInstance(),t=void 0,s=void 0,u=void 0,l=void 0,d=void 0,f=void 0,n=void 0,o=void 0,c=void 0,r=void 0,h=void 0,p=void 0,g=void 0,_=void 0,E=void 0,i=void 0,m=void 0,v=void 0,y=void 0,T=void 0,S=void 0,A=void 0,I=void 0;function R(e){var t,n,r,i;o&&isNaN(c)||(t=c,isNaN(t)&&(g?(t=e.liveStartTime,(r=(n=l.getCurrentDVRInfo())?n.range:null)&&(i=G(p.start,!0),isNaN(i)||(s.info("Start time from URI parameters: "+i),t=Math.max(Math.min(t,i),r.start)))):(t=p.start,i=G(p.start,!1),!isNaN(i)&&i<t+p.duration&&(s.info("Start time from URI parameters: "+i),t=Math.max(t,i)))),isNaN(t)||t===f.getTime()||(a.trigger(pe.default.PLAYBACK_SEEKING,{seekTime:t}),w(t,!1,!0)));}function b(){return parseFloat((D()-P()).toFixed(5))}function D(){return p.start+p.duration}function M(){p&&f&&f.getElement()?f.play():E=!0;}function N(){return p&&f?f.isPaused():null}function C(){p&&f&&f.pause();}function O(){return p&&f?f.isSeeking():null}function w(e,t,n){p&&f&&e!==(isNaN(v)?f.getTime():v)&&(!0===n?(f.removeEventListener("seeking",Q),s.info("Requesting internal seek to time: "+e)):(v=e,a.trigger(pe.default.PLAYBACK_SEEK_ASKED),s.info("Requesting seek to time: "+e)),f.setCurrentTime(e,t));}function P(){return p&&f?f.getTime():null}function L(){var e,t=P();return !g||isNaN(m)||(e=m/1e3)<t&&(t-=e),t}function x(){return p&&f?f.getPlaybackRate():null}function F(){return p&&f?f.getEnded():null}function U(){return g}function k(){if(!g||isNaN(m))return NaN;var e=L();if(isNaN(e)||0===e)return 0;var t=(new Date).getTime()+1e3*n.getClientTimeOffset();return Math.max(((t-m-1e3*e)/1e3).toFixed(3),0)}function B(){o=E=!1,m=h=0,v=c=NaN,f&&(a.off(pe.default.STREAM_INITIALIZED,R,this),a.off(pe.default.DATA_UPDATE_COMPLETED,q,this),a.off(pe.default.BUFFER_LEVEL_STATE_CHANGED,ue,this),a.off(pe.default.LOADING_PROGRESS,se,this),a.off(pe.default.PLAYBACK_PROGRESS,ae,this),a.off(pe.default.PLAYBACK_TIME_UPDATED,ae,this),a.off(pe.default.PLAYBACK_ENDED,re,this),a.off(pe.default.STREAM_INITIALIZING,de,this),Y(),f.removeEventListener("canplay",H),f.removeEventListener("play",V),f.removeEventListener("waiting",z),f.removeEventListener("playing",W),f.removeEventListener("pause",X),f.removeEventListener("error",ie),f.removeEventListener("seeking",Q),f.removeEventListener("seeked",Z),f.removeEventListener("timeupdate",$),f.removeEventListener("progress",J),f.removeEventListener("ratechange",ee),f.removeEventListener("loadedmetadata",te),f.removeEventListener("stalled",le),f.removeEventListener("ended",ne)),g=p=f=r=null;}function G(e,t){var n=A.getURIFragmentData();if(!n||!n.t)return NaN;return n.t=n.t.split(",")[0],t&&-1!==n.t.indexOf("posix:")?parseInt(n.t.substring(6)):e+parseInt(n.t)}function j(){null===r&&(r=setInterval(function(){a.trigger(pe.default.WALLCLOCK_TIME_UPDATED,{isDynamic:g,time:new Date}),g&&N()&&function(){var e=Date.now();(!i||i+500<e)&&(i=e,$());}();},I.get().streaming.wallclockTimeUpdateInterval));}function Y(){clearInterval(r),r=null;}function K(){var e,t,n,r,i;!N()&&g&&0!==f.getReadyState()&&(e=L(),n=e,r=l.getCurrentDVRInfo(),t=(i=r?r.range:null)?n>i.end?Math.max(i.end-2*p.manifestInfo.minBufferTime,i.start):0<n&&n+.25<i.start&&Math.abs(n-i.start)<31536e4?i.start:n:NaN,isNaN(t)||t===e||w(t));}function q(e){var t,n;e.error||null!==(n=(t=d.convertDataToRepresentationInfo(e.currentRepresentation))?t.mediaInfo.streamInfo:null)&&p.id===n.id&&(p=n,K());}function H(){a.trigger(pe.default.CAN_PLAY);}function V(){s.info("Native video element event: play"),K(),j(),a.trigger(pe.default.PLAYBACK_STARTED,{startTime:P()});}function z(){s.info("Native video element event: waiting"),a.trigger(pe.default.PLAYBACK_WAITING,{playingTime:P()});}function W(){s.info("Native video element event: playing"),a.trigger(pe.default.PLAYBACK_PLAYING,{playingTime:P()});}function X(){s.info("Native video element event: pause"),a.trigger(pe.default.PLAYBACK_PAUSED,{ended:F()});}function Q(){var e=P();isNaN(v)||v===e||(e=v),v=NaN,s.info("Seeking to: "+e),j(),a.trigger(pe.default.PLAYBACK_SEEKING,{seekTime:e});}function Z(){s.info("Native video element event: seeked"),a.trigger(pe.default.PLAYBACK_SEEKED),f.addEventListener("seeking",Q);}function $(){p&&a.trigger(pe.default.PLAYBACK_TIME_UPDATED,{timeToEnd:b(),time:P()});}function J(){a.trigger(pe.default.PLAYBACK_PROGRESS);}function ee(){var e=x();s.info("Native video element event: ratechange: ",e),a.trigger(pe.default.PLAYBACK_RATE_CHANGED,{playbackRate:e});}function te(){s.info("Native video element event: loadedmetadata"),a.trigger(pe.default.PLAYBACK_METADATA_LOADED),j();}function ne(){s.info("Native video element event: ended"),C(),Y(),a.trigger(pe.default.PLAYBACK_ENDED,{isLast:u.getActiveStreamInfo().isLast});}function re(e){r&&e.isLast&&(s.info("onPlaybackEnded -- PLAYBACK_ENDED but native video element didn't fire ended"),f.setCurrentTime(D()),C(),Y());}function ie(e){var t=e.target||e.srcElement;a.trigger(pe.default.PLAYBACK_ERROR,{error:t.error});}function ae(){var e,t,n;g&&I.get().streaming.lowLatencyEnabled&&0<I.get().streaming.liveCatchUpPlaybackRate&&!N()&&!O()&&(e=k(),t=Math.abs(e-_.getLiveDelay()),n=_.getLiveCatchupLatencyThreshold(),(I.get().streaming.lowLatencyEnabled&&0<I.get().streaming.liveCatchUpPlaybackRate&&0<P()&&t>I.get().streaming.liveCatchUpMinDrift&&(isNaN(n)||e<=n)?function(){{var e,t,n,r,i,a,o;f&&(e=I.get().streaming.liveCatchUpPlaybackRate,t=_.getLiveDelay(),n=k()-t,r=5*n,i=2*e/(1+Math.pow(Math.E,-r)),a=1-e+i,T&&(o=function(){var n=null;return u.getActiveStreamProcessors().forEach(function(e){var t=e.getBufferLevel();n=null===n?t:Math.min(n,t);}),n}(),t/2<o?T=!1:0<n&&(a=1)),Math.abs(f.getPlaybackRate()-a)>S&&f.setPlaybackRate(a),0<I.get().streaming.liveCatchUpMaxDrift&&!y&&n>I.get().streaming.liveCatchUpMaxDrift?(s.info("Low Latency catchup mechanism. Latency too high, doing a seek to live point"),y=!0,function(){var e=l.getCurrentDVRInfo();w((e?e.range:null).end-_.getLiveDelay(),!0,!1);}()):y=!1);}}:oe)());}function oe(){f&&f.setPlaybackRate(1);}function se(e){var t,n;!1!==e.stream||!I.get().streaming.lowLatencyEnabled||isNaN(e.request.duration)||(t=1.2*e.request.duration)>_.getLiveDelay()&&(s.warn("Browser does not support fetch API with StreamReader. Increasing live delay to be 20% higher than segment duration:",t.toFixed(2)),n={streaming:{liveDelay:t}},I.update(n));}function ue(e){e.streamId===p.id&&(I.get().streaming.lowLatencyEnabled?e.state!==ce.default.BUFFER_EMPTY||O()||T||(T=!0,oe()):f.setStallState(e.mediaType,e.state===ce.default.BUFFER_EMPTY));}function le(e){a.trigger(pe.default.PLAYBACK_STALLED,{e:e});}function de(e){!function(e,t){if(e&&e.manifestInfo&&e.manifestInfo.serviceDescriptions){for(var n=void 0,r=0;r<e.manifestInfo.serviceDescriptions.length;r++){var i=e.manifestInfo.serviceDescriptions[r];if(i.schemeIdUri===fe.default.SERVICE_DESCRIPTION_LL_SCHEME){n=i;break}}n&&t&&t.supplementalProperties&&"true"===t.supplementalProperties[fe.default.SUPPLEMENTAL_PROPERTY_LL_SCHEME]&&(n.latency&&0<n.latency.target&&(s.debug("Apply LL properties coming from service description. Target Latency (ms):",n.latency.target),I.update({streaming:{lowLatencyEnabled:!0,liveDelay:n.latency.target/1e3,liveCatchUpMinDrift:n.latency.max>n.latency.target?(n.latency.max-n.latency.target)/1e3:void 0}})),n.playbackRate&&1<n.playbackRate.max&&(s.debug("Apply LL properties coming from service description. Max PlaybackRate:",n.playbackRate.max),I.update({streaming:{lowLatencyEnabled:!0,liveCatchUpPlaybackRate:n.playbackRate.max-1}})));}}(e.streamInfo,e.mediaInfo);}return t={initialize:function(e,t,n){p=e,f.addEventListener("canplay",H),f.addEventListener("play",V),f.addEventListener("waiting",z),f.addEventListener("playing",W),f.addEventListener("pause",X),f.addEventListener("error",ie),f.addEventListener("seeking",Q),f.addEventListener("seeked",Z),f.addEventListener("timeupdate",$),f.addEventListener("progress",J),f.addEventListener("ratechange",ee),f.addEventListener("loadedmetadata",te),f.addEventListener("stalled",le),f.addEventListener("ended",ne),g=p.manifestInfo.isDynamic,o=!(T=y=!1)===t,c=n;var r="undefined"!=typeof navigator?navigator.userAgent.toLowerCase():"",i=/safari/.test(r)&&!/chrome/.test(r);S=i?.25:.02,a.on(pe.default.STREAM_INITIALIZED,R,this),a.on(pe.default.DATA_UPDATE_COMPLETED,q,this),a.on(pe.default.LOADING_PROGRESS,se,this),a.on(pe.default.BUFFER_LEVEL_STATE_CHANGED,ue,this),a.on(pe.default.PLAYBACK_PROGRESS,ae,this),a.on(pe.default.PLAYBACK_TIME_UPDATED,ae,this),a.on(pe.default.PLAYBACK_ENDED,re,this),a.on(pe.default.STREAM_INITIALIZING,de,this),E&&(E=!1,M());},setConfig:function(e){e&&(e.streamController&&(u=e.streamController),e.dashMetrics&&(l=e.dashMetrics),e.mediaPlayerModel&&(_=e.mediaPlayerModel),e.adapter&&(d=e.adapter),e.videoModel&&(f=e.videoModel),e.timelineConverter&&(n=e.timelineConverter),e.uriFragmentModel&&(A=e.uriFragmentModel),e.settings&&(I=e.settings));},getStartTimeFromUriParameters:G,getTimeToStreamEnd:b,getTime:P,getNormalizedTime:L,getPlaybackRate:x,getPlayedRanges:function(){return p&&f?f.getPlayedRanges():null},getEnded:F,getIsDynamic:U,getStreamController:function(){return u},computeAndSetLiveDelay:function(e,t,n){var r,i,a=void 0,o=void 0,s=!isNaN(e)&&isFinite(e)?e:NaN,u=d.getSuggestedPresentationDelay(),a=I.get().streaming.lowLatencyEnabled?0:_.getLiveDelay()?_.getLiveDelay():null===I.get().streaming.liveDelayFragmentCount||isNaN(I.get().streaming.liveDelayFragmentCount)||isNaN(s)?!0===I.get().streaming.useSuggestedPresentationDelay&&null!==u&&!isNaN(u)&&0<u?u:isNaN(s)?isNaN(n)?4*p.manifestInfo.minBufferTime:4*n:4*s:s*I.get().streaming.liveDelayFragmentCount;return null!==(i=d.getAvailabilityStartTime())&&(m=i),o=0<t?(r=Math.max(t-10,t/2),Math.min(a,r)):a,h=o},getLiveDelay:function(){return h},setLiveDelay:function(e){!(arguments.length<=1||void 0===arguments[1])&&arguments[1]&&e<h||(h=e);},getCurrentLiveLatency:k,play:M,isPaused:N,pause:C,isSeeking:O,seek:w,reset:B},s=(0, ge.default)(e).getInstance().getLogger(t),B(),t}a.__dashjs_factory_name="PlaybackController",n.default=i.default.getSingletonFactory(a),t.exports=n.default;},{108:108,109:109,45:45,46:46,47:47,54:54}],120:[function(e,t,n){function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(n,"__esModule",{value:!0});var ae=r(e(108)),oe=r(e(109)),se=r(e(196)),ue=r(e(149)),le=r(e(46)),de=r(e(54)),i=r(e(47)),fe=r(e(45)),ce=r(e(117));function a(e){e=e||{};var t=this.context,n=(0, le.default)(t).getInstance(),l=e.adapter,d=e.dashMetrics,r=e.mediaPlayerModel,f=e.fragmentModel,c=e.abrController,h=e.playbackController,i=e.textController,a=e.streamId,p=e.type,g=e.mimeType,_=e.mediaController,E=e.bufferController,m=e.settings,o=void 0,v=void 0,y=void 0,s=void 0,u=void 0,T=void 0,S=void 0,A=void 0,I=void 0,R=void 0,b=void 0,D=void 0,M=void 0,N=void 0,C=void 0,O=void 0,w=void 0,P=void 0,L=void 0;function x(){return !1===s}function F(){x()||y&&!E.getIsBufferingCompleted()&&(v.debug("Schedule Controller starts"),s=!1,d.createPlaylistTraceMetrics(y.id,1e3*h.getTime(),h.getPlaybackRate()),B(0));}function U(){s||(v.debug("Schedule Controller stops"),s=!0,clearTimeout(S));}function k(){var e,t;s||u||h.isPaused()&&!m.get().streaming.scheduleWhilePaused||(p===ae.default.FRAGMENTED_TEXT||p===ae.default.TEXT)&&!i.isTextEnabled()||E.getIsBufferingCompleted()?U():(function(){var e=h.getTime(),t=1.5;{var n;isNaN(y.fragmentDuration)&&(n=d.getCurrentSchedulingInfo(y.mediaInfo.type),t=n?1.5*n.duration:1.5);}var r=f.getRequests({state:ue.default.FRAGMENT_MODEL_EXECUTED,time:e+t,threshold:0})[0];{var i,a,o,s,u;r&&-1===N.indexOf(r)&&!l.getIsTextTrack(g)&&(i=m.get().streaming.fastSwitchEnabled,a=E.getBufferLevel(),o=c.getAbandonmentStateFor(p),s=!_.isCurrentTrack(r.mediaInfo)&&_.getSwitchMode(r.mediaInfo.type)===ce.default.TRACK_SWITCH_MODE_NEVER_REPLACE,u=r.quality<y.quality,i&&(s||u)&&t<=a&&o!==oe.default.ABANDON_LOAD?(j(r),L=!0,v.debug("Reloading outdated fragment at index: ",r.index)):r.quality>y.quality&&!O&&ne(h.getTime()+a));}}(),e=0<N.length,O||isNaN(M)||C||e||function(e,t){D[t]=D[t]||{};var n=c.getTopQualityIndexFor(e,t);return D[t][e]!=n&&(v.info("Top quality "+e+" index has changed from "+D[t][e]+" to "+n),D[t][e]=n,1)}(p,a)||R.execute(p,y,I)?(G(!0),!e&&P&&c.checkPlaybackQuality(p),P=y.quality===M&&!C||O?(t=N.shift())&&t.isInitializationRequest()?(n.trigger(de.default.INIT_FRAGMENT_NEEDED,{sender:o,streamId:a,mediaType:p,representationId:t.representationId}),!1):(n.trigger(de.default.MEDIA_FRAGMENT_NEEDED,{sender:o,streamId:a,mediaType:p,seekTarget:A,replacement:t}),!0):(C?(v.debug("Switch track for "+p+", representation id = "+y.id),(O=_.getSwitchMode(p)===ce.default.TRACK_SWITCH_MODE_ALWAYS_REPLACE)&&E.replaceBuffer&&E.replaceBuffer(),C=!1):v.debug("Quality has changed, get init request for representationid = "+y.id),n.trigger(de.default.INIT_FRAGMENT_NEEDED,{sender:o,streamId:a,mediaType:p,representationId:y.id}),M=y.quality,!1)):B(500));}function B(e){clearTimeout(S),S=setTimeout(k,e);}function G(e){u!==e?u=e:v.debug("isFragmentProcessingInProgress is already equal to",e);}function j(e){N.push(e);}function Y(e){var t;h&&f&&((t=f.getRequests({state:ue.default.FRAGMENT_MODEL_EXECUTED,time:h.getTime(),threshold:0})[0])&&h.getTime()>=t.startTime&&((!b.mediaInfo||t.mediaInfo.type===b.mediaInfo.type&&t.mediaInfo.id!==b.mediaInfo.id)&&e&&n.trigger(de.default.TRACK_CHANGE_RENDERED,{mediaType:p,oldMediaInfo:b.mediaInfo,newMediaInfo:t.mediaInfo}),t.quality===b.quality&&t.adaptationIndex===b.adaptationIndex||!e||n.trigger(de.default.QUALITY_CHANGE_RENDERED,{mediaType:p,oldQuality:b.quality,newQuality:t.quality}),b={mediaInfo:t.mediaInfo,quality:t.quality,adaptationIndex:t.adaptationIndex}));}function K(e){e.request.mediaInfo.streamInfo.id===a&&e.request.mediaType===p&&(U(),G(!1),v.info("Stream is complete"));}function q(e){e.request.mediaInfo.streamInfo.id===a&&e.request.mediaType===p&&(v.info("OnFragmentLoadingCompleted - Url:",e.request?e.request.url:"undefined",e.request.range?", Range:"+e.request.range:""),l.getIsTextTrack(g)&&G(!1),e.error&&e.request.serviceLocation&&!s&&(j(e.request),G(!1),B(0)),O&&(w=e.request));}function H(){Y(!0);}function V(e){var t,n,r;e.streamId===a&&e.mediaType===p&&(O&&!isNaN(e.startTime)&&(O=!1,f.addExecutedRequest(w)),G(!1),L&&!isNaN(e.startTime)?(t=h.getTime(),B((n=e.startTime+y.fragmentDuration)<=t+(r=1.5*y.fragmentDuration)?0:1e3*(n-(t+r))),L=!1):B(0));}function z(e){e.streamId===a&&e.mediaType===p&&(v.info("onFragmentLoadingAbandoned request: "+e.request.url+" has been aborted"),h.isSeeking()||C||(v.info("onFragmentLoadingAbandoned request: "+e.request.url+" has to be downloaded again, origin is not seeking process or switch track call"),j(e.request)),G(!1),B(0));}function W(e){e.sender.getType()===p&&e.sender.getStreamId();}function X(e){p===e.mediaType&&a===e.streamId&&U();}function Q(e){e.streamId===a&&e.mediaType===p&&e.hasEnoughSpaceToAppend&&e.quotaExceeded&&s&&F();}function Z(e){e.streamId===a&&e.mediaType===p&&(U(),G(!1));}function $(){f.abortRequests(),U();}function J(){!s&&m.get().streaming.scheduleWhilePaused||F();}function ee(e){ne(e.seekTime),re(0),s&&F();var t=y.DVRWindow&&h?y.DVRWindow.end-h.getTime():NaN;d.updateManifestUpdateInfo({latency:t}),u?(v.debug("Abort requests"),f.abortRequests()):B(0);}function te(e){d.updatePlayListTraceMetrics({playbackspeed:e.playbackRate.toString()});}function ne(e){A=e;}function re(e){T=e;}function ie(){b={mediaInfo:void(T=0),quality:M=A=NaN,adaptationIndex:NaN},D={},N=[],L=O=C=!(s=!(u=!(P=!(w=null))));}return o={initialize:function(e){I=e,R=(0, se.default)(t).create({abrController:c,dashMetrics:d,mediaPlayerModel:r,textController:i,settings:m}),n.on(de.default.DATA_UPDATE_STARTED,W,this),n.on(de.default.FRAGMENT_LOADING_COMPLETED,q,this),n.on(de.default.STREAM_COMPLETED,K,this),n.on(de.default.BUFFER_CLEARED,Q,this),n.on(de.default.BYTES_APPENDED_END_FRAGMENT,V,this),n.on(de.default.QUOTA_EXCEEDED,Z,this),n.on(de.default.PLAYBACK_SEEKING,ee,this),n.on(de.default.PLAYBACK_STARTED,J,this),n.on(de.default.PLAYBACK_RATE_CHANGED,te,this),n.on(de.default.PLAYBACK_TIME_UPDATED,H,this),n.on(de.default.URL_RESOLUTION_FAILED,$,this),n.on(de.default.FRAGMENT_LOADING_ABANDONED,z,this),n.on(de.default.BUFFERING_COMPLETED,X,this);},getType:function(){return p},getStreamId:function(){return a},setCurrentRepresentation:function(e){y=e;},setSeekTarget:ne,setTimeToLoadDelay:re,getTimeToLoadDelay:function(){return T},switchTrackAsked:function(){C=!0;},isStarted:x,start:F,stop:U,reset:function(){n.off(de.default.DATA_UPDATE_STARTED,W,this),n.off(de.default.FRAGMENT_LOADING_COMPLETED,q,this),n.off(de.default.STREAM_COMPLETED,K,this),n.off(de.default.BUFFER_CLEARED,Q,this),n.off(de.default.BYTES_APPENDED_END_FRAGMENT,V,this),n.off(de.default.QUOTA_EXCEEDED,Z,this),n.off(de.default.PLAYBACK_SEEKING,ee,this),n.off(de.default.PLAYBACK_STARTED,J,this),n.off(de.default.PLAYBACK_RATE_CHANGED,te,this),n.off(de.default.PLAYBACK_TIME_UPDATED,H,this),n.off(de.default.URL_RESOLUTION_FAILED,$,this),n.off(de.default.FRAGMENT_LOADING_ABANDONED,z,this),n.off(de.default.BUFFERING_COMPLETED,X,this),U(),Y(!1),ie();},getBufferTarget:function(){return R.getBufferTarget(p,y,I)},processInitRequest:function(e){e&&(G(!0),f.executeRequest(e));},processMediaRequest:function(e){e?(v.debug("Next fragment request url is "+e.url),f.executeRequest(e)):(h.getIsDynamic()&&v.debug("Next fragment seems to be at the bleeding live edge and is not available yet. Rescheduling."),G(!1),B(m.get().streaming.lowLatencyEnabled?100:500));}},v=(0, fe.default)(t).getInstance().getLogger(o),ie(),o}a.__dashjs_factory_name="ScheduleController",n.default=i.default.getClassFactory(a),t.exports=n.default;},{108:108,109:109,117:117,149:149,196:196,45:45,46:46,47:47,54:54}],121:[function(e,t,n){function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(n,"__esModule",{value:!0});var Ie=r(e(108)),Re=r(e(109)),be=r(e(105)),De=r(e(99)),Me=r(e(46)),Ne=r(e(54)),i=r(e(47)),Ce=e(243),Oe=r(e(45)),we=r(e(213)),Pe=r(e(220)),Le=r(e(101)),xe=r(e(122)),Fe=r(e(118)),Ue=r(e(225)),ke=r(e(51)),Be=r(e(115));function a(){var t=40,r=2e3,l=this.context,d=(0, Me.default)(l).getInstance(),e=void 0,f=void 0,c=void 0,h=void 0,n=void 0,p=void 0,g=void 0,_=void 0,o=void 0,u=void 0,E=void 0,m=void 0,v=void 0,y=void 0,T=void 0,i=void 0,S=void 0,A=void 0,I=void 0,R=void 0,b=void 0,D=void 0,a=void 0,s=void 0,M=void 0,N=void 0,C=void 0,O=void 0,w=void 0,P=void 0,L=void 0,x=void 0,F=void 0,U=void 0,k=void 0,B=void 0,G=void 0,j=void 0,Y=void 0,K=void 0,q=void 0,H=void 0;function V(){var e;!he()||(e=w.getPlaybackQuality())&&_.addDroppedFrames(e);}function z(){var e;!H.get().streaming.jumpGaps||0===re()||P.isSeeking()||x||M||N||C||t<=++G&&(e=P.getTime(),K===e?function(e){for(var t=re(),n=H.get().streaming.smallGapLimit,r=void 0,i=0;i<t.length;i++){var a=t[i].getBuffer().getAllBufferRanges(),o=void 0;if(a&&!(a.length<=1)){for(var s,u=0;u<a.length;u++)if(e<a.start(u)){o=a.start(u);break}0<o&&(0<(s=o-e)&&s<=n&&(void 0===r||r<o)&&(r=o));}}var l=P.getTimeToStreamEnd();void 0===r&&!isNaN(l)&&l<n&&(r=e+l);0<r&&(!isNaN(l)&&e+l<=r?(f.info("Jumping media gap (discontinuity) at time ",e,". Jumping to end of the stream"),d.trigger(Ne.default.PLAYBACK_ENDED,{isLast:me().isLast})):(f.info("Jumping media gap (discontinuity) at time ",e,". Jumping to time position",r),P.seek(r,!0,!0)));}(e):K=e,G=0);}function W(e){var t=ne(e.seekTime);k&&(Z(),U=!1),B&&(f.debug("[PreloadTimer] stop period preload timer."),clearTimeout(B),B=void 0),t===b&&Y&&Y.deactivate(!0),t&&(t!==b||Y&&!b.isActive())?(ge(Ce.PlayListTrace.END_OF_PERIOD_STOP_REASON),oe(t,b,e.seekTime)):ge(Ce.PlayListTrace.USER_REQUEST_STOP_REASON),_e(Ce.PlayList.SEEK_START_REASON);}function X(){f.debug("[onPlaybackStarted]"),F?(F=!1,_e(Ce.PlayList.INITIAL_PLAYOUT_START_REASON)):x&&(x=!1,_e(Ce.PlayList.RESUME_FROM_PAUSE_START_REASON),$());}function Q(e){f.debug("[onPlaybackPaused]"),e.ended||(x=!0,ge(Ce.PlayListTrace.USER_REQUEST_STOP_REASON),$());}function Z(){f.debug("[toggleEndPeriodTimer] stop end period timer."),clearTimeout(k),k=void 0;}function $(){var e,t,n;U&&(k?Z():(n=(t=0<(e=P.getTimeToStreamEnd())?1e3*e:0)<r?t/4:t-r,f.debug("[toggleEndPeriodTimer] Going to fire preload in",n,"milliseconds"),B=setTimeout(te,n),f.debug("[toggleEndPeriodTimer] start-up of timer to notify PLAYBACK_ENDED event. It will be triggered in",t,"milliseconds"),k=setTimeout(function(){d.trigger(Ne.default.PLAYBACK_ENDED,{isLast:me().isLast});},t)));}function J(e){var t;e.mediaType!==Ie.default.AUDIO&&e.mediaType!==Ie.default.VIDEO||(t=me().isLast,O&&!t&&void 0===k&&(f.info("[onTrackBufferingCompleted] end of period detected. Track",e.mediaType,"has finished"),!(U=!0)===x&&$()));}function ee(){var e=me().isLast;O&&e&&(f.info("[onStreamBufferingCompleted] calls signalEndOfStream of mediaSourceController."),o.signalEndOfStream(O));}function te(){var t,e=me().isLast;O&&!e&&(t=ae(),b.isProtectionCompatible(t)&&(q||b.isMediaCodecCompatible(t))&&(f.info("[onStreamCanLoadNext] Preloading next stream"),b.deactivate(!0),t.preload(O,j),(Y=t).getProcessors().forEach(function(e){e.setIndexHandlerTime(t.getStartTime());})));}function ne(e){var t=0,n=null,r=R.length;0<r&&(t+=R[0].getStartTime());for(var i=0;i<r;i++)if(n=R[i],e<(t=parseFloat((t+n.getDuration()).toFixed(5))))return n;return null}function re(){return b?b.getProcessors():[]}function ie(){var e=ae();e?oe(e,b,NaN):f.debug("StreamController no next stream found"),ge(e?Ce.PlayListTrace.END_OF_PERIOD_STOP_REASON:Ce.PlayListTrace.END_OF_CONTENT_STOP_REASON),k=void 0,U=!1;}function ae(){if(b){var e=(t=me().start,n=me().duration,{v:R.filter(function(e){return e.getStreamInfo().start===parseFloat((t+n).toFixed(5))})[0]});if("object"==typeof e)return e.v}var t,n;}function oe(e,t,n){var r;f.info("Switch stream to "+e.getId()+" at t="+n),M||!e||t===e&&e.isActive()||(M=!0,d.trigger(Ne.default.PERIOD_SWITCH_STARTED,{fromStreamInfo:t?t.getStreamInfo():null,toStreamInfo:e.getStreamInfo()}),r=!1,t&&(r=b.isProtectionCompatible(e)&&(q||b.isMediaCodecCompatible(e))&&!n||e.getPreloaded(),t.deactivate(r)),n=isNaN(n)?!r&&t?e.getStreamInfo().start:NaN:n,b=e,Y=!1,P.initialize(me(),!!t,n),w.getElement()?se(n,null===t,!1,r):ue(n,r));}function se(e,t,n,r){var i=void 0;function a(){O&&"open"==O.readyState&&(f.debug("MediaSource is open!"),window.URL.revokeObjectURL(i),O.removeEventListener("sourceopen",a),O.removeEventListener("webkitsourceopen",a),le(),t||d.trigger(Ne.default.SOURCE_INITIALIZED),n?b.setMediaSource(O):ue(e,r));}O?r?(ue(e,r),t||d.trigger(Ne.default.SOURCE_INITIALIZED)):(o.detachMediaSource(w),O.addEventListener("sourceopen",a,!1),O.addEventListener("webkitsourceopen",a,!1),i=o.attachMediaSource(O,w),f.debug("MediaSource attached to element.  Waiting on open...")):((O=o.createMediaSource()).addEventListener("sourceopen",a,!1),O.addEventListener("webkitsourceopen",a,!1),i=o.attachMediaSource(O,w),f.debug("MediaSource attached to element.  Waiting on open..."));}function ue(e,t){var n;!(j=b.activate(O,t?j:void 0))||0<(n=Object.keys(j)).length&&j[n[0]].changeType&&(f.debug("SourceBuffer changeType method supported. Use it to switch codecs in periods transitions"),q=!0),F||isNaN(e)||P.seek(e),!s&&F||P.play(),M=!1,d.trigger(Ne.default.PERIOD_SWITCH_COMPLETED,{toStreamInfo:me()});}function le(e){var t=e||me().manifestInfo.duration,n=o.setDuration(O,t);f.debug("Duration successfully set to: "+n);}function de(){try{var e=g.getStreamsInfo();if(0===e.length)throw new Error("There are no streams");_.updateManifestUpdateInfo({currentTime:P.getTime(),buffered:w.getBufferRange(),presentationStartTime:e[0].start,clientTimeOffset:I.getClientTimeOffset()});for(var t,n,r,i,a=0,o=e.length;a<o;a++){var s=e[a],u=function(e){for(var t=0,n=R.length;t<n;t++)if(R[t].getId()===e.id)return R[t];return null}(s);u?u.updateData(s):(u=(0,be.default)(l).create({manifestModel:p,mediaPlayerModel:L,dashMetrics:_,manifestUpdater:h,adapter:g,timelineConverter:I,capabilities:c,errHandler:A,baseURLController:E,abrController:m,playbackController:P,eventController:y,mediaController:v,textController:T,videoModel:w,settings:H}),R.push(u),u.initialize(s,D)),_.addManifestUpdateStreamInfo(s);}b||(g.getIsDynamic()&&R.length&&(n=function(t,e){try{var n=NaN;return e&&!isNaN(e.maxFragmentDuration)&&isFinite(e.maxFragmentDuration)?e.maxFragmentDuration:(t&&1===t.length&&function(){var r=t[0],e=[Ie.default.VIDEO,Ie.default.AUDIO,Ie.default.FRAGMENTED_TEXT].reduce(function(e,t){var n=g.getMediaInfoForType(r,t);return n&&e.push(n),e},[]).reduce(function(t,e){var n=g.getVoRepresentations(e);return n&&0<n.length&&n.forEach(function(e){e&&t.push(e);}),t},[]).reduce(function(e,t){var n=g.convertDataToRepresentationInfo(t);return n&&n.fragmentDuration&&!isNaN(n.fragmentDuration)&&e.push(n.fragmentDuration),e},[]);n=Math.max.apply(Math,function(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}(e));}(),isFinite(n)?n:NaN)}catch(e){return NaN}}(e,t=e[0].manifestInfo),P.computeAndSetLiveDelay(n,t.DVRWindowSize,t.minBufferTime)),r=null,i=P.getStartTimeFromUriParameters(e[0].start,g.getIsDynamic()),isNaN(i)||(r=ne(i)),!r&&g.getIsDynamic()&&R.length&&(f.debug("Dynamic stream: Trying to find the correct starting period"),r=function(){try{var e=I.calcPresentationTimeFromWallTime(new Date,g.getRegularPeriods()[0]),t=P.getLiveDelay();return ne(e-t)}catch(e){return null}}()),oe(null!==r?r:R[0],null,NaN)),d.trigger(Ne.default.STREAMS_COMPOSED);}catch(e){A.error(new Ue.default(ke.default.MANIFEST_ERROR_ID_NOSTREAMS_CODE,e.message+"nostreamscomposed",p.getValue())),C=!0,Se();}}function fe(){var e=p.getValue();D&&(d.trigger(Ne.default.PROTECTION_CREATED,{controller:D,manifest:e}),D.setMediaElement(w.getElement()),a&&D.setProtectionData(a)),de();}function ce(s){s.error?(C=!0,Se()):function(){var e=s.manifest;g.updatePeriods(e);var t=g.getStreamsInfo(void 0,1)[0],n=g.getMediaInfoForType(t,Ie.default.VIDEO)||g.getMediaInfoForType(t,Ie.default.AUDIO),r=void 0;n&&(r=g.getUseCalculatedLiveEdgeTimeForMediaInfo(n))&&(f.debug("SegmentTimeline detected using calculated Live Edge Time"),H.update({streaming:{useManifestDateHeaderTimeSource:!1}}));var i=g.getUTCTimingSources(),a=!g.getIsDynamic()||r?i:i.concat(L.getUTCTimingSources()),o=S.isHTTPS(s.manifest.url);a.forEach(function(e){e.value.replace(/.*?:\/\//g,"")===L.getDefaultUtcTimingSource().value.replace(/.*?:\/\//g,"")&&(e.value=e.value.replace(o?new RegExp(/^(http:)?\/\//i):new RegExp(/^(https:)?\/\//i),o?"https://":"http://"),f.debug("Matching default timing source protocol to manifest protocol: ",e.value));}),E.initialize(e),u.setConfig({dashMetrics:_,baseURLController:E}),u.initialize(a,H.get().streaming.useManifestDateHeaderTimeSource);}();}function he(){return !!b&&b.getHasVideoTrack()}function pe(){return !!b&&b.getHasAudioTrack()}function ge(t,n){n=n||new Date,re().forEach(function(e){e.finalisePlayList(n,t);}),_.addPlayList();}function _e(e){_.createPlaylistMetrics(1e3*P.getTime(),e);}function Ee(e){if(e.error){var t="";switch(e.error.code){case 1:t="MEDIA_ERR_ABORTED";break;case 2:t="MEDIA_ERR_NETWORK";break;case 3:t="MEDIA_ERR_DECODE";break;case 4:t="MEDIA_ERR_SRC_NOT_SUPPORTED";break;case 5:t="MEDIA_ERR_ENCRYPTED";break;default:t="UNKNOWN";}N=!0,e.error.message&&(t+=" ("+e.error.message+")"),e.error.msExtendedCode&&(t+=" (0x"+(e.error.msExtendedCode>>>0).toString(16).toUpperCase()+")"),f.fatal("Video Element Error: "+t),e.error&&f.fatal(e.error),A.error(new Ue.default(e.error.code,t)),Se();}}function me(){return b?b.getStreamInfo():null}function ve(){if(!(n&&n.hasOwnProperty("load")&&I&&I.hasOwnProperty("initialize")&&I.hasOwnProperty("reset")&&I.hasOwnProperty("getClientTimeOffset")&&p&&A&&_&&P))throw new Error(Ie.default.MISSING_CONFIG_ERROR)}function ye(e){isNaN(e.newDuration)||le(e.newDuration);}function Te(){b=D=null,k=void 0,U=!(s=!(x=!(F=!(C=N=M=!(R=[]))))),G=0;}function Se(){ve(),u.reset(),ge(N||C?Ce.PlayListTrace.FAILURE_STOP_REASON:Ce.PlayListTrace.USER_REQUEST_STOP_REASON);for(var e=0,t=R?R.length:0;e<t;e++){R[e].reset(N);}!function(){d.off(Ne.default.PLAYBACK_TIME_UPDATED,V,this),d.off(Ne.default.PLAYBACK_SEEKING,W,this),d.off(Ne.default.PLAYBACK_ERROR,Ee,this),d.off(Ne.default.PLAYBACK_STARTED,X,this),d.off(Ne.default.PLAYBACK_PAUSED,Q,this),d.off(Ne.default.PLAYBACK_ENDED,ie,this),d.off(Ne.default.MANIFEST_UPDATED,ce,this),d.off(Ne.default.BUFFERING_COMPLETED,J,this),d.off(Ne.default.STREAM_BUFFERING_COMPLETED,ee,this),d.off(Ne.default.MANIFEST_VALIDITY_CHANGED,ye,this),d.off(Ne.default.TIME_SYNCHRONIZATION_COMPLETED,fe,this),d.off(Ne.default.WALLCLOCK_TIME_UPDATED,z,this),d.off(Le.default.METRIC_ADDED,Ae,this);}(),E.reset(),h.reset(),y.reset(),_.clearAllCurrentMetrics(),p.setValue(null),n.reset(),I.reset(),i.reset(),O&&(o.detachMediaSource(w),O=null),w=null,D&&(D.setMediaElement(null),a=D=null,p.getValue()&&d.trigger(Ne.default.PROTECTION_DESTROYED,{data:p.getValue().url})),d.trigger(Ne.default.STREAM_TEARDOWN_COMPLETE),Te();}function Ae(e){var t;e.metric===Re.default.DVR_INFO&&(t=pe()?Ie.default.AUDIO:Ie.default.VIDEO,e.mediaType===t&&o.setSeekable(O,e.value.range.start,e.value.range.end));}return e={initialize:function(e,t){ve(),s=e,a=t,I.initialize(),(h=(0, De.default)(l).create()).setConfig({manifestModel:p,adapter:g,manifestLoader:n,errHandler:A,settings:H}),h.initialize(),(y=(0, Be.default)(l).getInstance()).setConfig({manifestUpdater:h,playbackController:P}),y.start(),function(){d.on(Ne.default.PLAYBACK_TIME_UPDATED,V,this),d.on(Ne.default.PLAYBACK_SEEKING,W,this),d.on(Ne.default.PLAYBACK_ERROR,Ee,this),d.on(Ne.default.PLAYBACK_STARTED,X,this),d.on(Ne.default.PLAYBACK_PAUSED,Q,this),d.on(Ne.default.PLAYBACK_ENDED,ie,this),d.on(Ne.default.MANIFEST_UPDATED,ce,this),d.on(Ne.default.BUFFERING_COMPLETED,J,this),d.on(Ne.default.STREAM_BUFFERING_COMPLETED,ee,this),d.on(Ne.default.MANIFEST_VALIDITY_CHANGED,ye,this),d.on(Ne.default.TIME_SYNCHRONIZATION_COMPLETED,fe,this),d.on(Ne.default.WALLCLOCK_TIME_UPDATED,z,this),d.on(Le.default.METRIC_ADDED,Ae,this);}();},getActiveStreamInfo:me,hasVideoTrack:he,hasAudioTrack:pe,switchToVideoElement:function(e){b&&(P.initialize(me()),se(e,!1,!0,!1));},getStreamById:function(t){return R.filter(function(e){return e.getId()===t})[0]},getStreamForTime:ne,getTimeRelativeToStreamId:function(e,t){for(var n=null,r=0,i=0,a=null,o=0;o<R.length;o++){if(i=(n=R[o]).getStartTime(),a=n.getDuration(),Number.isFinite(i)&&(r=i),n.getId()===t)return e-r;Number.isFinite(a)&&(r+=a);}return null},load:function(e){ve(),n.load(e);},loadWithManifest:function(e){!function(){if(!h||!h.hasOwnProperty("setManifest"))throw new Error("initialize function has to be called previously")}(),h.setManifest(e);},getActiveStreamProcessors:re,setConfig:function(e){e&&(e.capabilities&&(c=e.capabilities),e.manifestLoader&&(n=e.manifestLoader),e.manifestModel&&(p=e.manifestModel),e.mediaPlayerModel&&(L=e.mediaPlayerModel),e.protectionController&&(D=e.protectionController),e.adapter&&(g=e.adapter),e.dashMetrics&&(_=e.dashMetrics),e.errHandler&&(A=e.errHandler),e.timelineConverter&&(I=e.timelineConverter),e.videoModel&&(w=e.videoModel),e.playbackController&&(P=e.playbackController),e.abrController&&(m=e.abrController),e.mediaController&&(v=e.mediaController),e.textController&&(T=e.textController),e.settings&&(H=e.settings),e.baseURLController&&(E=e.baseURLController));},setProtectionData:function(e){a=e;},reset:Se},f=(0, Oe.default)(l).getInstance().getLogger(e),u=(0, xe.default)(l).getInstance(),o=(0, Fe.default)(l).getInstance(),i=(0, we.default)(l).getInstance(),S=(0, Pe.default)(l).getInstance(),Te(),e}a.__dashjs_factory_name="StreamController",n.default=i.default.getSingletonFactory(a),t.exports=n.default;},{101:101,105:105,108:108,109:109,115:115,118:118,122:122,213:213,220:220,225:225,243:243,45:45,46:46,47:47,51:51,54:54,99:99}],122:[function(e,t,n){function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(n,"__esModule",{value:!0});var S=r(e(225)),A=e(241),I=r(e(46)),R=r(e(54)),b=r(e(51)),i=r(e(47)),D=r(e(45)),M=r(e(220));function a(){var e=this.context,r=(0, I.default)(e).getInstance(),c=(0, M.default)(e).getInstance(),t=void 0,o=void 0,n=void 0,i=void 0,s=void 0,u=void 0,a=void 0,h=void 0;function l(e){i=e;}function d(e){n=e;}function f(e){var t,n,r,i=Date.parse(e);return isNaN(i)&&(n=t=void 0,r=/^([0-9]{4})-([0-9]{2})-([0-9]{2})T([0-9]{2}):([0-9]{2})(?::([0-9]*)(\.[0-9]*)?)?(?:([+\-])([0-9]{2})([0-9]{2}))?/.exec(e),t=Date.UTC(parseInt(r[1],10),parseInt(r[2],10)-1,parseInt(r[3],10),parseInt(r[4],10),parseInt(r[5],10),r[6]&&(parseInt(r[6],10)||0),r[7]&&1e3*parseFloat(r[7])||0),r[9]&&r[10]&&(n=60*parseInt(r[9],10)+parseInt(r[10],10),t+=("+"===r[8]?-1:1)*n*60*1e3),i=new Date(t).getTime()),i}function p(e){return Date.parse(e)}function g(e){return Date.parse(e)}function _(e,t,n){n();}function E(e,t,n){var r=f(e);isNaN(r)?n():t(r);}function m(n,e,r,t,i){var a,o,s,u=!1,l=new XMLHttpRequest,d=i?A.HTTPRequest.HEAD:A.HTTPRequest.GET,f=e.match(/\S+/g);e=f.shift(),a=function(){u||(u=!0,f.length?m(n,f.join(" "),r,t,i):t());},o=function(){var e=void 0,t=void 0;200===l.status&&(e=i?l.getResponseHeader("Date"):l.response,t=n(e),isNaN(t)||(r(t),u=!0));},!c.isRelative(e)||(s=h.resolve())&&(e=c.resolve(e,s.url)),l.open(d,e),l.timeout=5e3,l.onload=o,l.onloadend=a,l.send();}function v(e,t,n){m(g,e,t,n,!0);}function y(){var e=a.getLatestMPDRequestHeaderValueByID("Date"),t=null!==e?new Date(e).getTime():Number.NaN;isNaN(t)?T(!0):(d(t-(new Date).getTime()),T(!1,t/1e3,n));}function T(e,t,n){l(!1),r.trigger(R.default.TIME_SYNCHRONIZATION_COMPLETED,{time:t,offset:n,error:e?new S.default(b.default.TIME_SYNC_FAILED_ERROR_CODE,b.default.TIME_SYNC_FAILED_ERROR_MESSAGE):null});}return t={initialize:function(e,t){s=t,n=0,i=!1,u={"urn:mpeg:dash:utc:http-head:2014":v,"urn:mpeg:dash:utc:http-xsdate:2014":m.bind(null,f),"urn:mpeg:dash:utc:http-iso:2014":m.bind(null,p),"urn:mpeg:dash:utc:direct:2014":E,"urn:mpeg:dash:utc:http-head:2012":v,"urn:mpeg:dash:utc:http-xsdate:2012":m.bind(null,f),"urn:mpeg:dash:utc:http-iso:2012":m.bind(null,p),"urn:mpeg:dash:utc:direct:2012":E,"urn:mpeg:dash:utc:http-ntp:2014":_,"urn:mpeg:dash:utc:ntp:2014":_,"urn:mpeg:dash:utc:sntp:2014":_},i||function e(t,n){var r=n||0;var i=t[r];var a=function(e,t){var n=!e||!t;n&&s?y():T(n,e,t);};l(!0);i?u.hasOwnProperty(i.schemeIdUri)?u[i.schemeIdUri](i.value,function(e){var t=(new Date).getTime(),n=e-t;d(n),o.info("Local time: "+new Date(t)),o.info("Server time: "+new Date(e)),o.info("Server Time - Local Time (ms): "+n),a(e,n);},function(){e(t,r+1);}):e(t,r+1):(d(0),a());}(e);},getOffsetToDeviceTimeMs:function(){return n},setConfig:function(e){e&&(e.dashMetrics&&(a=e.dashMetrics),e.baseURLController&&(h=e.baseURLController));},reset:function(){l(!1);}},o=(0, D.default)(e).getInstance().getLogger(t),t}a.__dashjs_factory_name="TimeSyncController";var o=i.default.getSingletonFactory(a);o.HTTP_TIMEOUT_MS=5e3,i.default.updateSingletonFactory(a.__dashjs_factory_name,o),n.default=o,t.exports=n.default;},{220:220,225:225,241:241,45:45,46:46,47:47,51:51,54:54}],123:[function(e,t,n){function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(n,"__esModule",{value:!0});var p=r(e(107)),g=r(e(46)),_=r(e(54)),i=r(e(47)),E=r(e(3)),m=r(e(220)),v=r(e(61)),y="onLoad";function a(e){e=e||{};var t=this.context,i=(0, g.default)(t).getInstance(),s=(0, m.default)(t).getInstance(),n=void 0,r=void 0,u=void 0,l=void 0,a=void 0,d=void 0;function o(e,t,n){var r={},i=void 0,a=void 0;r.elements=e,r.type=t,r.resolveType=n,0===r.elements.length&&c(r);for(var o=0;o<r.elements.length;o++)i=r.elements[o],a=s.isHTTPURL(i.url)?i.url:i.originalContent.BaseURL+i.url,d.load(a,i,r);}function f(e){var t,n=void 0,r="",n=e.element,i=e.resolveObject;n.resolvedContent&&((t=0)===n.resolvedContent.indexOf("<?xml")&&(t=n.resolvedContent.indexOf("?>")+2),r=n.resolvedContent.substr(0,t)+"<response>"+n.resolvedContent.substr(t)+"</response>",n.resolvedContent=a.xml_str2json(r)),function(e){var t=void 0;for(t=0;t<e.elements.length;t++)if(!1===e.elements[t].resolved)return !1;return !0}(i)&&c(i);}function c(e){var t=[],n=void 0,r=void 0;if(!function(e){var t=[],n=void 0,r=void 0,i=void 0,a=void 0,o=void 0,s=void 0;for(a=e.elements.length-1;0<=a;a--){if(n=e.elements[a],r=n.type+"_asArray",n.resolvedContent){if(n.resolvedContent)for(o=0;o<n.resolvedContent[r].length;o++)i=n.resolvedContent[r][o],t.push(i);}else delete n.originalContent["xlink:actuate"],delete n.originalContent["xlink:href"],t.push(n.originalContent);for(n.parentElement[r].splice(n.index,1),s=0;s<t.length;s++)n.parentElement[r].splice(n.index+s,0,t[s]);t=[];}0<e.elements.length&&u.run(l);}(e),"onActuate"===e.resolveType&&i.trigger(_.default.XLINK_READY,{manifest:l}),e.resolveType===y)switch(e.type){case v.default.PERIOD:for(n=0;n<l[v.default.PERIOD+"_asArray"].length;n++)(r=l[v.default.PERIOD+"_asArray"][n]).hasOwnProperty(v.default.ADAPTATION_SET+"_asArray")&&(t=t.concat(h(r[v.default.ADAPTATION_SET+"_asArray"],r,v.default.ADAPTATION_SET,y))),r.hasOwnProperty(v.default.EVENT_STREAM+"_asArray")&&(t=t.concat(h(r[v.default.EVENT_STREAM+"_asArray"],r,v.default.EVENT_STREAM,y)));o(t,v.default.ADAPTATION_SET,y);break;case v.default.ADAPTATION_SET:i.trigger(_.default.XLINK_READY,{manifest:l});}}function h(e,t,n,r){for(var i=[],a=void 0,o=void 0,s=void 0,o=e.length-1;0<=o;o--)(a=e[o]).hasOwnProperty("xlink:href")&&"urn:mpeg:dash:resolve-to-zero:2013"===a["xlink:href"]&&e.splice(o,1);for(o=0;o<e.length;o++)(a=e[o]).hasOwnProperty("xlink:href")&&a.hasOwnProperty("xlink:actuate")&&a["xlink:actuate"]===r&&(s={url:a["xlink:href"],parentElement:t,type:n,index:o,resolveType:r,originalContent:a,resolvedContent:null,resolved:!1},i.push(s));return i}return n={resolveManifestOnLoad:function(e){a=new E.default({escapeMode:!1,attributePrefix:"",arrayAccessForm:"property",emptyNodeForm:"object",stripWhitespaces:!1,enableToStringFunc:!1,ignoreRoot:!0,matchers:r}),o(h((l=e).Period_asArray,l,v.default.PERIOD,y),v.default.PERIOD,y);},setMatchers:function(e){e&&(r=e);},setIron:function(e){e&&(u=e);},reset:function(){i.off(_.default.XLINK_ELEMENT_LOADED,f,n),d&&(d.reset(),d=null);}},i.on(_.default.XLINK_ELEMENT_LOADED,f,n),d=(0, p.default)(t).create({errHandler:e.errHandler,dashMetrics:e.dashMetrics,mediaPlayerModel:e.mediaPlayerModel,requestModifier:e.requestModifier,settings:e.settings}),n}a.__dashjs_factory_name="XlinkController",n.default=i.default.getClassFactory(a),t.exports=n.default;},{107:107,220:220,3:3,46:46,47:47,54:54,61:61}],124:[function(e,t,n){function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(n,"__esModule",{value:!0});var i=r(e(138)),a=r(e(125)),o=r(e(126)),s=r(e(131)),u=r(e(136));function l(){var t=this.context;return {createMetricsReporting:function(e){return (0, i.default)(t).getInstance({eventBus:e.eventBus,dashMetrics:e.dashMetrics,metricsConstants:e.metricsConstants,events:e.events}),(0, o.default)(t).create(e)},getReportingFactory:function(){return (0, u.default)(t).getInstance()},getMetricsHandlerFactory:function(){return (0, s.default)(t).getInstance()}}}l.__dashjs_factory_name="MetricsReporting";var d=dashjs.FactoryMaker.getClassFactory(l);d.events=a.default,dashjs.FactoryMaker.updateClassFactory(l.__dashjs_factory_name,d),n.default=d,t.exports=n.default;},{125:125,126:126,131:131,136:136,138:138}],125:[function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0});var r=function(e,t,n){for(var r=!0;r;){var i=e,a=t,o=n,r=!1;null===i&&(i=Function.prototype);var s=Object.getOwnPropertyDescriptor(i,a);if(void 0!==s){if("value"in s)return s.value;var u=s.get;if(void 0===u)return;return u.call(o)}var l=Object.getPrototypeOf(i);if(null===l)return;e=l,t=a,n=o,r=!0,s=l=void 0;}};var i,a=e(55);function o(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),r(Object.getPrototypeOf(o.prototype),"constructor",this).call(this),this.METRICS_INITIALISATION_COMPLETE="internal_metricsReportingInitialized",this.BECAME_REPORTING_PLAYER="internal_becameReportingPlayer";}var s=new(function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t);}(o,((i=a)&&i.__esModule?i:{default:i}).default),o);n.default=s,t.exports=n.default;},{55:55}],126:[function(e,t,n){function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(n,"__esModule",{value:!0});var s=r(e(127)),u=r(e(140)),l=r(e(125));function i(i){i=i||{};var a={},o=this.context,t=i.eventBus,e=i.events;function n(e){var r;e.error||(r=Object.keys(a),(0, u.default)(o).getInstance({adapter:i.adapter,constants:i.constants}).getMetrics(e.manifest).forEach(function(e){var t=JSON.stringify(e);if(a.hasOwnProperty(t))r.splice(t,1);else try{var n=(0,s.default)(o).create(i);n.initialize(e),a[t]=n;}catch(e){}}),r.forEach(function(e){a[e].reset(),delete a[e];}),t.trigger(l.default.METRICS_INITIALISATION_COMPLETE));}function r(){Object.keys(a).forEach(function(e){a[e].reset();}),a={};}return t.on(e.MANIFEST_UPDATED,n),t.on(e.STREAM_TEARDOWN_COMPLETE,r),{reset:function(){t.off(e.MANIFEST_UPDATED,n),t.off(e.STREAM_TEARDOWN_COMPLETE,r);}}}i.__dashjs_factory_name="MetricsCollectionController",n.default=dashjs.FactoryMaker.getClassFactory(i),t.exports=n.default;},{125:125,127:127,140:140}],127:[function(e,t,n){function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(n,"__esModule",{value:!0});var s=r(e(129)),u=r(e(130)),l=r(e(128));function i(t){t=t||{};var n=void 0,r=void 0,i=void 0,a=this.context;function o(){n&&n.reset(),r&&r.reset(),i&&i.reset();}return {initialize:function(e){try{(i=(0,s.default)(a).create({mediaElement:t.mediaElement})).initialize(e.Range),(r=(0,u.default)(a).create({debug:t.debug,metricsConstants:t.metricsConstants})).initialize(e.Reporting,i),(n=(0,l.default)(a).create({debug:t.debug,eventBus:t.eventBus,metricsConstants:t.metricsConstants,events:t.events})).initialize(e.metrics,r);}catch(e){throw o(),e}},reset:o}}i.__dashjs_factory_name="MetricsController",n.default=dashjs.FactoryMaker.getClassFactory(i),t.exports=n.default;},{128:128,129:129,130:130}],128:[function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0});var r,i=e(131),a=(r=i)&&r.__esModule?r:{default:r};function o(e){e=e||{};var o=[],t=void 0,n=this.context,r=e.eventBus,i=e.events,s=(0, a.default)(n).getInstance({debug:e.debug,eventBus:e.eventBus,metricsConstants:e.metricsConstants});function u(t){o.forEach(function(e){e.handleNewMetric(t.metric,t.value,t.mediaType);});}return t={initialize:function(e,a){e.split(",").forEach(function(e,t,n){var r,i;-1===e.indexOf("(")||-1!==e.indexOf(")")||(i=n[t+1])&&-1===i.indexOf("(")&&-1!==i.indexOf(")")&&(e+=","+i,delete n[t+1]),(r=s.create(e,a))&&o.push(r);}),r.on(i.METRIC_ADDED,u,t),r.on(i.METRIC_UPDATED,u,t);},reset:function(){r.off(i.METRIC_ADDED,u,t),r.off(i.METRIC_UPDATED,u,t),o.forEach(function(e){return e.reset()}),o=[];}}}o.__dashjs_factory_name="MetricsHandlersController",n.default=dashjs.FactoryMaker.getClassFactory(o),t.exports=n.default;},{131:131}],129:[function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0});var r,i=e(208),u=(r=i)&&r.__esModule?r:{default:r};function a(e){e=e||{};var t,a=!1,n=this.context,o=void 0,s=e.mediaElement;return t={initialize:function(e){e&&e.length&&(e.forEach(function(e){var t=e.starttime,n=t+e.duration;o.add(t,n);}),a=!!e[0]._useWallClockTime);},reset:function(){o.clear();},isEnabled:function(){var e,t=o.length;if(!t)return !0;e=a?(new Date).getTime()/1e3:s.currentTime;for(var n=0;n<t;n+=1){var r=o.start(n),i=o.end(n);if(r<=e&&e<i)return !0}return !1}},o=(0, u.default)(n).create(),t}a.__dashjs_factory_name="RangeController",n.default=dashjs.FactoryMaker.getClassFactory(a),t.exports=n.default;},{208:208}],130:[function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0});var r,i=e(136),a=(r=i)&&r.__esModule?r:{default:r};function o(e){var r=[],i=(0, a.default)(this.context).getInstance(e);return {initialize:function(e,n){e.some(function(e){var t=i.create(e,n);if(t)return r.push(t),!0});},reset:function(){r.forEach(function(e){return e.reset()}),r=[];},report:function(t,n){r.forEach(function(e){return e.report(t,n)});}}}o.__dashjs_factory_name="ReportingController",n.default=dashjs.FactoryMaker.getClassFactory(o),t.exports=n.default;},{136:136}],131:[function(e,t,n){function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(n,"__esModule",{value:!0});var l=r(e(132)),d=r(e(133)),f=r(e(135)),c=r(e(134));function i(i){var e=void 0,a=(i=i||{}).debug?i.debug.getLogger(e):{},o=/([a-zA-Z]*)(\(([0-9]*)(\,\s*([a-zA-Z]*))?\))?/,s=this.context,u={BufferLevel:l.default,DVBErrors:d.default,HttpList:f.default,PlayList:c.default,RepSwitchList:c.default,TcpList:c.default};return e={create:function(e,t){var n,r=e.match(o);if(r){try{(n=u[r[1]](s).create({eventBus:i.eventBus,metricsConstants:i.metricsConstants})).initialize(r[1],t,r[3],r[5]);}catch(e){n=null,a.error("MetricsHandlerFactory: Could not create handler for type "+r[1]+" with args "+r[3]+", "+r[5]+" ("+e.message+")");}return n}},register:function(e,t){u[e]=t;},unregister:function(e){delete u[e];}}}i.__dashjs_factory_name="MetricsHandlerFactory",n.default=dashjs.FactoryMaker.getSingletonFactory(i),t.exports=n.default;},{132:132,133:133,134:134,135:135}],132:[function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0});var r,i=e(139),f=(r=i)&&r.__esModule?r:{default:r};function a(e){e=e||{};var r=void 0,i=void 0,a=void 0,o=void 0,t=void 0,n=this.context,s=(0, f.default)(n).getInstance(),u=[],l=e.metricsConstants;function d(){var e=function(){try{return Object.keys(u).map(function(e){return u[e]}).reduce(function(e,t){return e.level<t.level?e:t})}catch(e){return}}();e&&t!==e.t&&(t=e.t,r.report(a,e));}return {initialize:function(e,t,n){t&&(i=s.validateN(n),r=t,a=s.reconstructFullMetricName(e,n),o=setInterval(d,i));},reset:function(){clearInterval(o),i=0,t=r=o=null;},handleNewMetric:function(e,t,n){e===l.BUFFER_LEVEL&&(u[n]=t);}}}a.__dashjs_factory_name="BufferLevelHandler",n.default=dashjs.FactoryMaker.getClassFactory(a),t.exports=n.default;},{139:139}],133:[function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0});var r,i=e(125),o=(r=i)&&r.__esModule?r:{default:r};n.default=dashjs.FactoryMaker.getClassFactory(function(e){var n=void 0,r=(e=e||{}).eventBus,i=e.metricsConstants;function a(){r.off(o.default.METRICS_INITIALISATION_COMPLETE,a,this),r.trigger(o.default.BECAME_REPORTING_PLAYER);}return {initialize:function(e,t){t&&(n=t,r.on(o.default.METRICS_INITIALISATION_COMPLETE,a,this));},reset:function(){n=null;},handleNewMetric:function(e,t){e===i.DVB_ERRORS&&n&&n.report(e,t);}}}),t.exports=n.default;},{125:125}],134:[function(e,t,n){function r(){var n=void 0,r=void 0;return {initialize:function(e,t){n=e,r=t;},reset:function(){r=null,n=void 0;},handleNewMetric:function(e,t){e===n&&r&&r.report(n,t);}}}Object.defineProperty(n,"__esModule",{value:!0}),r.__dashjs_factory_name="GenericMetricHandler",n.default=dashjs.FactoryMaker.getClassFactory(r),t.exports=n.default;},{}],135:[function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0});var r,i=e(139),f=(r=i)&&r.__esModule?r:{default:r};function a(e){e=e||{};var i=void 0,a=void 0,o=void 0,s=void 0,u=void 0,n=[],l=(0, f.default)(this.context).getInstance(),r=e.metricsConstants;function d(){n.length&&i&&i.report(s,n),n=[];}return {initialize:function(e,t,n,r){t&&(a=l.validateN(n),i=t,r&&r.length&&(o=r),s=l.reconstructFullMetricName(e,n,r),u=setInterval(d,a));},reset:function(){clearInterval(u),n=[],i=o=a=u=null;},handleNewMetric:function(e,t){e===r.HTTP_REQUEST&&(o&&o!==t.type||n.push(t));}}}a.__dashjs_factory_name="HttpListHandler",n.default=dashjs.FactoryMaker.getClassFactory(a),t.exports=n.default;},{139:139}],136:[function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0});var r,i=e(137),s=(r=i)&&r.__esModule?r:{default:r};function a(e){e=e||{};var r={"urn:dvb:dash:reporting:2014":s.default},i=this.context,t=void 0,a=e.debug?e.debug.getLogger(t):{},o=e.metricsConstants;return t={create:function(t,e){var n=void 0;try{(n=r[t.schemeIdUri](i).create({metricsConstants:o})).initialize(t,e);}catch(e){n=null,a.error("ReportingFactory: could not create Reporting with schemeIdUri "+t.schemeIdUri+" ("+e.message+")");}return n},register:function(e,t){r[e]=t;},unregister:function(e){delete r[e];}}}a.__dashjs_factory_name="ReportingFactory",n.default=dashjs.FactoryMaker.getSingletonFactory(a),t.exports=n.default;},{137:137}],137:[function(e,t,n){function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(n,"__esModule",{value:!0});var h=r(e(141)),p=r(e(142));function i(e){e=e||{};var t,n=this.context,r=void 0,i=void 0,a=void 0,o=void 0,s=void 0,u=void 0,l=[],d=e.metricsConstants;function f(e,t,n){function r(){var e=l.indexOf(i);-1!==e&&(l.splice(e,1),200<=i.status&&i.status<300?t&&t():n&&n());}var i=new XMLHttpRequest;l.push(i);try{i.open("GET",e),i.onloadend=r,i.onerror=r,i.send();}catch(e){i.onerror();}}function c(){o=a=!1,u=s=null;}return t={report:function(n,e){Array.isArray(e)||(e=[e]),o&&u.isEnabled()&&e.forEach(function(e){var t=r.serialise(e);n!==d.DVB_ERRORS&&(t="metricname="+n+"&"+t),f(t=s+"?"+t,null,function(){o=!1;});});},initialize:function(e,t){var n=void 0;if(u=t,!(s=e["dvb:reportingUrl"]))throw new Error("required parameter missing (dvb:reportingUrl)");a||((n=e["dvb:probability"]||e["dvb:priority"]||0)&&(1e3===n||n/1e3>=i.random())&&(o=!0),a=!0);},reset:function(){c();}},r=(0, h.default)(n).getInstance(),i=(0, p.default)(n).getInstance(),c(),t}i.__dashjs_factory_name="DVBReporting",n.default=dashjs.FactoryMaker.getClassFactory(i),t.exports=n.default;},{141:141,142:142}],138:[function(e,t,n){function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(n,"__esModule",{value:!0});var p=r(e(143)),g=r(e(125));function i(e){var t=void 0,r=void 0,n=(e=e||{}).eventBus,i=e.dashMetrics,a=e.metricsConstants,o=e.events;function s(e){var t=new p.default;if(r){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);t.mpdurl||(t.mpdurl=r.originalUrl||r.url),t.terror||(t.terror=new Date),i.addDVBErrors(t);}}function u(e){e.error||(r=e.manifest);}function l(e){s({errorcode:p.default.BASE_URL_CHANGED,servicelocation:e.entry});}function d(){s({errorcode:p.default.BECAME_REPORTER});}function f(e){switch(e.metric){case a.HTTP_REQUEST:(0===(t=e.value).responsecode||400<=t.responsecode||t.responsecode<100||600<=t.responsecode)&&s({errorcode:t.responsecode||p.default.CONNECTION_ERROR,url:t.url,terror:t.tresponse,servicelocation:t._serviceLocation});}var t;}function c(e){var t=void 0;switch(e.error?e.error.code:0){case MediaError.MEDIA_ERR_NETWORK:t=p.default.CONNECTION_ERROR;break;case MediaError.MEDIA_ERR_DECODE:t=p.default.CORRUPT_MEDIA_OTHER;break;default:return}s({errorcode:t});}function h(){n.on(o.MANIFEST_UPDATED,u,t),n.on(o.SERVICE_LOCATION_BLACKLIST_CHANGED,l,t),n.on(o.METRIC_ADDED,f,t),n.on(o.METRIC_UPDATED,f,t),n.on(o.PLAYBACK_ERROR,c,t),n.on(g.default.BECAME_REPORTING_PLAYER,d,t);}return t={initialise:h,reset:function(){n.off(o.MANIFEST_UPDATED,u,t),n.off(o.SERVICE_LOCATION_BLACKLIST_CHANGED,l,t),n.off(o.METRIC_ADDED,f,t),n.off(o.METRIC_UPDATED,f,t),n.off(o.PLAYBACK_ERROR,c,t),n.off(g.default.BECAME_REPORTING_PLAYER,d,t);}},h(),t}i.__dashjs_factory_name="DVBErrorsTranslator",n.default=dashjs.FactoryMaker.getSingletonFactory(i),t.exports=n.default;},{125:125,143:143}],139:[function(e,t,n){function r(){return {reconstructFullMetricName:function(e,t,n){var r=e;return t&&(r+="("+t,n&&n.length&&(r+=","+n),r+=")"),r},validateN:function(e){if(!e)throw new Error("missing n");if(isNaN(e))throw new Error("n is NaN");if(e<0)throw new Error("n must be positive");return e}}}Object.defineProperty(n,"__esModule",{value:!0}),r.__dashjs_factory_name="HandlerHelpers",n.default=dashjs.FactoryMaker.getSingletonFactory(r),t.exports=n.default;},{}],140:[function(e,t,n){function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(n,"__esModule",{value:!0});var i=r(e(144)),c=r(e(145)),a=r(e(146));function o(e){var d=(e=e||{}).adapter,f=e.constants;return {getMetrics:function(l){var t=[];return l&&l.Metrics_asArray&&l.Metrics_asArray.forEach(function(e){var s=new i.default,u=d.getIsDynamic(l);e.hasOwnProperty("metrics")&&(s.metrics=e.metrics,e.Range_asArray&&e.Range_asArray.forEach(function(e){var t,n,r,i,a,o=new c.default;o.starttime=(t=l,n=e,i=r=void 0,a=0,u?a=d.getAvailabilityStartTime(t)/1e3:(r=d.getRegularPeriods(t)).length&&(a=r[0].start),i=a,n&&n.hasOwnProperty(f.START_TIME)&&(i+=n.starttime),i),e.hasOwnProperty("duration")?o.duration=e.duration:o.duration=d.getDuration(l),o._useWallClockTime=u,s.Range.push(o);}),e.Reporting_asArray&&(e.Reporting_asArray.forEach(function(e){var t=new a.default;if(e.hasOwnProperty(f.SCHEME_ID_URI)){for(var n in t.schemeIdUri=e.schemeIdUri,e)e.hasOwnProperty(n)&&(t[n]=e[n]);s.Reporting.push(t);}}),t.push(s)));}),t}}}o.__dashjs_factory_name="ManifestParsing",n.default=dashjs.FactoryMaker.getSingletonFactory(o),t.exports=n.default;},{144:144,145:145,146:146}],141:[function(e,t,n){function r(){return {serialise:function n(e){var t=[],r=[],i=void 0,a=void 0;for(i in e)if(e.hasOwnProperty(i)&&0!==i.indexOf("_")){if(null==(a=e[i])&&(a=""),Array.isArray(a)){if(!a.length)continue;r=[],a.forEach(function(e){var t="Object"!==Object.prototype.toString.call(e).slice(8,-1);r.push(t?e:n(e));}),a=r.map(encodeURIComponent).join(",");}else "string"==typeof a?a=encodeURIComponent(a):a instanceof Date?a=a.toISOString():"number"==typeof a&&(a=Math.round(a));t.push(i+"="+a);}return t.join("&")}}}Object.defineProperty(n,"__esModule",{value:!0}),r.__dashjs_factory_name="MetricSerialiser",n.default=dashjs.FactoryMaker.getSingletonFactory(r),t.exports=n.default;},{}],142:[function(e,t,n){function r(){var e,r=window.crypto||window.msCrypto,t=Uint32Array,i=Math.pow(2,8*t.BYTES_PER_ELEMENT)-1,n=10,a=void 0,o=void 0;function s(){r&&(a=a||new t(n),r.getRandomValues(a),o=0);}return e={random:function(e,t){var n=void 0;return e=e||0,t=t||1,r?(o===a.length&&s(),n=a[o]/i,o+=1):n=Math.random(),n*(t-e)+e}},s(),e}Object.defineProperty(n,"__esModule",{value:!0}),r.__dashjs_factory_name="RNG",n.default=dashjs.FactoryMaker.getSingletonFactory(r),t.exports=n.default;},{}],143:[function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0});function r(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,r),this.mpdurl=null,this.errorcode=null,this.terror=null,this.url=null,this.ipaddress=null,this.servicelocation=null;}r.SSL_CONNECTION_FAILED_PREFIX="SSL",r.DNS_RESOLUTION_FAILED="C00",r.HOST_UNREACHABLE="C01",r.CONNECTION_REFUSED="C02",r.CONNECTION_ERROR="C03",r.CORRUPT_MEDIA_ISOBMFF="M00",r.CORRUPT_MEDIA_OTHER="M01",r.BASE_URL_CHANGED="F00",r.BECAME_REPORTER="S00",n.default=r,t.exports=n.default;},{}],144:[function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0});n.default=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.metrics="",this.Range=[],this.Reporting=[];},t.exports=n.default;},{}],145:[function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0});n.default=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.starttime=0,this.duration=1/0,this._useWallClockTime=!1;},t.exports=n.default;},{}],146:[function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0});n.default=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.schemeIdUri="",this.value="";},t.exports=n.default;},{}],147:[function(e,t,n){function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(n,"__esModule",{value:!0});function u(e,t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,u),this.data={baseUrls:e||null,selectedIdx:t||NaN},this.children=[];}var l=r(e(216)),i=r(e(47));function a(){var e,i=void 0,a=void 0,t=this.context,o=(0, l.default)(t).getInstance();function s(e,t,n){var r=a.getBaseURLsFromElement(n);e[t]?o.areEqual(r,e[t].data.baseUrls)||(e[t].data.baseUrls=r,e[t].data.selectedIdx=NaN):e[t]=new u(r);}function n(e){!function(){if(!a||!a.hasOwnProperty("getBaseURLsFromElement")||!a.hasOwnProperty("getRepresentationSortFunction"))throw new Error("setConfig function has to be called previously")}();var t=a.getBaseURLsFromElement(e);o.areEqual(t,i.data.baseUrls)||(i.data.baseUrls=t,i.data.selectedIdx=NaN),e&&e.Period_asArray&&e.Period_asArray.forEach(function(e,r){s(i.children,r,e),e.AdaptationSet_asArray&&e.AdaptationSet_asArray.forEach(function(e,n){s(i.children[r].children,n,e),e.Representation_asArray&&e.Representation_asArray.sort(a.getRepresentationSortFunction()).forEach(function(e,t){s(i.children[r].children[n].children,t,e);});});});}function r(){i=new u;}return e={reset:r,update:function(e){n(e);},getForPath:function(e){var t=i,n=[t.data];return e&&e.forEach(function(e){(t=t.children[e])&&n.push(t.data);}),n.filter(function(e){return e.baseUrls.length})},invalidateSelectedIndexes:function(t){!function t(n,e){var r=e||i;n(r.data),r.children&&r.children.forEach(function(e){return t(n,e)});}(function(e){isNaN(e.selectedIdx)||t===e.baseUrls[e.selectedIdx].serviceLocation&&(e.selectedIdx=NaN);});},setConfig:function(e){e.adapter&&(a=e.adapter);}},r(),e}a.__dashjs_factory_name="BaseURLTreeModel",n.default=i.default.getClassFactory(a),t.exports=n.default;},{216:216,47:47}],148:[function(e,t,n){function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(n,"__esModule",{value:!0});var p=r(e(46)),g=r(e(101)),i=r(e(47)),_=r(e(45)),E=r(e(48)),m=e(241),v=r(e(65)),y=r(e(49)),a=e(50),T="dash.js-v"+(0, a.getVersionString)(),S=null,A=1,I=2,R=3,b=4,D="m",M="a",N="v",C="i",O="c",w="d",P="s",L="v",x="l";function o(){var r=void 0,e=void 0,u=void 0,l=void 0,d=void 0,n=void 0,t=this.context,i=(0, p.default)(t).getInstance(),a=(0, E.default)(t).getInstance();function o(){u={pr:1,nor:null,st:null,sf:null,sid:""+y.default.generateUuid(),bs:{audio:A,video:A},cid:null,did:T};}function f(){var e={v:1};return e.sid=a.get().streaming.cmcd.sid?a.get().streaming.cmcd.sid:u.sid,e.cid=a.get().streaming.cmcd.cid?a.get().streaming.cmcd.cid:u.cid,e.did=a.get().streaming.cmcd.did?a.get().streaming.cmcd.did:u.did,e.sid='"'+e.sid+'"',e.cid='"'+e.cid+'"',e.did='"'+e.did+'"',isNaN(u.pr)||1===u.pr||null===u.pr||(e.pr=u.pr),u.st&&(e.st=u.st),u.sf&&(e.sf=u.sf),e}function s(e){try{u.pr=e.playbackRate;}catch(e){}}function c(e){try{var t=r.getIsDynamic(e.data)?""+x:""+L,n=e.protocol&&"MSS"===e.protocol?""+P:""+w;u.st=t,u.sf=n;}catch(e){}}function h(e){try{if(e.state&&e.mediaType){var t=null;switch(e.state){case g.default.BUFFER_LOADED:t=S;break;case g.default.BUFFER_EMPTY:n.isSeeking()&&(t=I),t=b;}u.bs[e.mediaType]=t;}}catch(e){}}return e={getQueryParameter:function(e){try{return a.get().streaming.cmcd&&a.get().streaming.cmcd.enabled?{key:"Common-Media-Client-Data",value:function(i){try{var e=function(){if(!i)return {v:null};var e=Object.keys(i),r=e.length;return {v:e.reduce(function(e,t,n){return e+=t+"="+i[t],n<r-1&&(e+=","),e},"")}}();if("object"==typeof e)return e.v}catch(e){return null}}(function(e){try{return e.type===m.HTTPRequest.MPD_TYPE?(function(e){try{u.cid=""+y.default.generateHashCode(e.url);}catch(e){}}(e),function(){var e=f();return e.ot=""+D,e}()):e.type===m.HTTPRequest.MEDIA_SEGMENT_TYPE?function(e){var t=f(),n=function(e){try{var t=e.quality,n=e.mediaInfo.bitrateList;return parseInt(n[t].bandwidth/1e3)}catch(e){return null}}(e),r=function(e){try{return isNaN(e.duration)?null:Math.round(1e3*e.duration)}catch(e){return null}}(e),i="video"===e.mediaType?""+N:"audio"===e.mediaType?""+M:"fragmentedText"===e.mediaType?""+O:null,a=function(e){try{return Math.round(l.getThroughputHistory().getSafeAverageThroughput(e))}catch(e){return null}}(e.mediaType),o=function(e){try{var t=u.pr,n=d.getCurrentBufferLevel(e);return isNaN(t)||isNaN(n)?null:parseInt(n/t*1e3)}catch(e){return null}}(e.mediaType),s=function(e){try{var t=e.mediaType;if(null!==u.bs[t])return u.bs[t];var n=d.getCurrentBufferLevel(t),r=e.duration;return n<r?R:S}catch(e){}}(e);n&&(t.br=n);i&&(t.ot=i);isNaN(r)||(t.d=r);isNaN(a)||(t.mtp=a);isNaN(o)||(t.dl=o);isNaN(s)||null===s||(t.bs=s);return t}(e):e.type===m.HTTPRequest.INIT_SEGMENT_TYPE?function(){var e=f();return e.ot=""+C,e}():null}catch(e){return null}}(e))}:null}catch(e){return null}},setConfig:function(e){e&&(e.abrController&&(l=e.abrController),e.dashMetrics&&(d=e.dashMetrics),e.playbackController&&(n=e.playbackController));},reset:function(){i.off(g.default.PLAYBACK_RATE_CHANGED,s,this),i.off(g.default.MANIFEST_LOADED,c,this),i.off(g.default.BUFFER_LEVEL_STATE_CHANGED,h,e),o();},initialize:function(){i.on(g.default.PLAYBACK_RATE_CHANGED,s,e),i.on(g.default.MANIFEST_LOADED,c,e),i.on(g.default.BUFFER_LEVEL_STATE_CHANGED,h,e);}},(0, _.default)(t).getInstance().getLogger(e),r=(0, v.default)(t).getInstance(),o(),e}o.__dashjs_factory_name="CmcdModel",n.default=i.default.getSingletonFactory(o),t.exports=n.default;},{101:101,241:241,45:45,46:46,47:47,48:48,49:49,50:50,65:65}],149:[function(e,t,n){function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(n,"__esModule",{value:!0});var i=r(e(47)),y=r(e(227)),T="loading",S="executed";function a(e){var t,n=(e=e||{}).eventBus,r=e.events,i=e.dashMetrics,a=e.fragmentLoader,o=e.debug,s=e.streamId,u=void 0,l=void 0,d=void 0;function f(s){var u;return !!s&&(u=!1,l.some(function(e){if(a=s,o=e,!isNaN(a.index)&&a.startTime===o.startTime&&a.adaptationIndex===o.adaptationIndex&&a.type===o.type||(r=s,i=e,isNaN(r.index)&&isNaN(i.index)&&r.quality===i.quality)||(n=e,(t=s).action===y.default.ACTION_COMPLETE&&t.action===n.action))return u=!0;var t,n,r,i,a,o;}),u)}function c(e){return isNaN(e.duration)?.25:Math.min(e.duration/8,.5)}function h(n){l=l.filter(function(e){var t=c(e);return isNaN(e.startTime)||void 0!==n&&e.startTime>=n-t});}function p(n,r){r<=n+.5||(l=l.filter(function(e){var t=c(e);return isNaN(e.startTime)||e.startTime>=r-t||isNaN(e.duration)||e.startTime+e.duration<=n+t}));}function g(e,t){i.addSchedulingInfo(e,t),i.addRequestsQueue(e.mediaType,d,l);}function _(e){e.sender===a&&(d.splice(d.indexOf(e.request),1),e.response&&!e.error&&l.push(e.request),g(e.request,e.error?"failed":S),n.trigger(r.FRAGMENT_LOADING_COMPLETED,{request:e.request,response:e.response,error:e.error,sender:this}));}function E(e){e.sender===a&&n.trigger(r.FRAGMENT_LOADING_PROGRESS,{request:e.request,response:e.response,error:e.error,sender:this});}function m(e){e.sender===a&&n.trigger(r.FRAGMENT_LOADING_ABANDONED,{streamId:s,request:e.request,mediaType:e.mediaType});}function v(){l=[],d=[];}return t={getRequests:function(n){var e=n?n.state instanceof Array?n.state:[n.state]:[],r=[];return e.forEach(function(e){var t=function(e){var t=void 0;switch(e){case T:t=d;break;case S:t=l;break;default:t=[];}return t}(e);r=r.concat(function(e,n){if(n.hasOwnProperty("time"))return [function(e,t,n){for(var r=e.length-1;0<=r;r--){var i=e[r],a=i.startTime,o=a+i.duration;if(n=isNaN(n)?c(i):n,!isNaN(a)&&!isNaN(o)&&a<=t+n&&t-n<o||isNaN(a)&&isNaN(t))return i}return null}(e,n.time,n.threshold)];return e.filter(function(e){for(var t in n)if("state"!==t&&n.hasOwnProperty(t)&&e[t]!=n[t])return !1;return !0})}(t,n));}),r},isFragmentLoaded:f,isFragmentLoadedOrPending:function(e){var t=!1,n=0,r=void 0;if(!(t=f(e)))for(n=0;n<d.length;n++)r=d[n],e.url===r.url&&e.startTime===r.startTime&&(t=!0);return t},removeExecutedRequestsBeforeTime:h,removeExecutedRequestsAfterTime:function(t){l=l.filter(function(e){return isNaN(e.startTime)||void 0!==t&&e.startTime<t});},syncExecutedRequestsWithBufferedRange:function(e,t){if(e&&0!==e.length){for(var n=0,r=0,i=e.length;r<i;r++)p(n,e.start(r)),n=e.end(r);0<t&&p(n,t);}else h();},abortRequests:function(){a.abort(),d=[];},executeRequest:function(e){switch(e.action){case y.default.ACTION_COMPLETE:l.push(e),g(e,S),u.debug("STREAM_COMPLETED"),n.trigger(r.STREAM_COMPLETED,{request:e});break;case y.default.ACTION_DOWNLOAD:g(e,T),d.push(e),t=e,n.trigger(r.FRAGMENT_LOADING_STARTED,{streamId:s,request:t}),a.load(t);break;default:u.warn("Unknown request action.");}var t;},reset:function(){n.off(r.LOADING_COMPLETED,_,this),n.off(r.LOADING_DATA_PROGRESS,E,this),n.off(r.LOADING_ABANDONED,m,this),a&&a.reset(),v();},addExecutedRequest:function(e){l.push(e);}},u=o.getLogger(t),v(),n.on(r.LOADING_COMPLETED,_,t),n.on(r.LOADING_DATA_PROGRESS,E,t),n.on(r.LOADING_ABANDONED,m,t),t}a.__dashjs_factory_name="FragmentModel";var o=i.default.getClassFactory(a);o.FRAGMENT_MODEL_LOADING=T,o.FRAGMENT_MODEL_EXECUTED=S,o.FRAGMENT_MODEL_CANCELED="canceled",o.FRAGMENT_MODEL_FAILED="failed",i.default.updateClassFactory(a.__dashjs_factory_name,o),n.default=o,t.exports=n.default;},{227:227,47:47}],150:[function(e,t,n){function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(n,"__esModule",{value:!0});var i=r(e(46)),a=r(e(54)),o=r(e(47));function s(){var e=this.context,t=(0, i.default)(e).getInstance(),n=void 0;return {getValue:function(){return n},setValue:function(e){(n=e)&&t.trigger(a.default.MANIFEST_LOADED,{data:e});}}}s.__dashjs_factory_name="ManifestModel",n.default=o.default.getSingletonFactory(s),t.exports=n.default;},{46:46,47:47,54:54}],151:[function(e,t,n){function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(n,"__esModule",{value:!0});var f=r(e(96)),i=r(e(47)),c=r(e(108)),h=r(e(189)),p=r(e(48)),g=e(218);function a(){var e,i=void 0,r=void 0,a=void 0,t={scheme:"urn:mpeg:dash:utc:http-xsdate:2014",value:"http://time.akamai.com/?iso&ms"},n=this.context,o=(0, p.default)(n).getInstance();function s(e){for(var t=void 0,t=0;t<a.length;t++)if(a[t].rulename===e)return t;return -1}function u(){return o.get().streaming.lowLatencyEnabled?o.get().streaming.liveDelay||3:o.get().streaming.liveDelay}function l(e,t){d(e,t);var n=new f.default;n.schemeIdUri=e,n.value=t,i.push(n);}function d(n,r){(0, g.checkParameterType)(n,"string"),(0, g.checkParameterType)(r,"string"),i.forEach(function(e,t){e.schemeIdUri===n&&e.value===r&&i.splice(t,1);});}return e={getABRCustomRules:function(){return a},addABRCustomRule:function(e,t,n){if("string"!=typeof e||e!==h.default.ABANDON_FRAGMENT_RULES&&e!==h.default.QUALITY_SWITCH_RULES||"string"!=typeof t)throw c.default.BAD_ARGUMENT_ERROR;var r=s(t);-1===r?a.push({type:e,rulename:t,rule:n}):(a[r].type=e,a[r].rule=n);},removeABRCustomRule:function(e){var t;e?-1!==(t=s(e))&&a.splice(t,1):a=[];},getStableBufferTime:function(){if(o.get().streaming.lowLatencyEnabled)return .6*u();var e=o.get().streaming.stableBufferTime;return -1<e?e:o.get().streaming.fastSwitchEnabled?20:12},getRetryAttemptsForType:function(e){var t=isNaN(o.get().streaming.retryAttempts.lowLatencyMultiplyFactor)?5:o.get().streaming.retryAttempts.lowLatencyMultiplyFactor;return o.get().streaming.lowLatencyEnabled?o.get().streaming.retryAttempts[e]*t:o.get().streaming.retryAttempts[e]},getRetryIntervalsForType:function(e){var t=isNaN(o.get().streaming.retryIntervals.lowLatencyReductionFactor)?10:o.get().streaming.retryIntervals.lowLatencyReductionFactor;return o.get().streaming.lowLatencyEnabled?o.get().streaming.retryIntervals[e]/t:o.get().streaming.retryIntervals[e]},getLiveDelay:u,getLiveCatchupLatencyThreshold:function(){try{var e=o.get().streaming.liveCatchupLatencyThreshold,t=u();if(null!==e&&!isNaN(e))return Math.max(e,t);var n=o.get().streaming.liveCatchUpMinDrift,r=!isNaN(t)&&t?isNaN(n)?u():o.get().streaming.liveCatchUpMinDrift+u():NaN;return r&&!isNaN(r)?2*r:NaN}catch(e){return NaN}},addUTCTimingSource:l,removeUTCTimingSource:d,getUTCTimingSources:function(){return i},clearDefaultUTCTimingSources:function(){i=[];},restoreDefaultUTCTimingSources:function(){l(t.scheme,t.value);},setXHRWithCredentialsForType:function t(e,n){e?r[e]=!!n:Object.keys(r).forEach(function(e){t(e,n);});},getXHRWithCredentialsForType:function(e){var t=r[e];return void 0===t?r.default:t},getDefaultUtcTimingSource:function(){return t},reset:function(){}},r={default:!(i=[])},a=[],e}a.__dashjs_factory_name="MediaPlayerModel",n.default=i.default.getSingletonFactory(a),t.exports=n.default;},{108:108,189:189,218:218,47:47,48:48,96:96}],152:[function(e,t,n){function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(n,"__esModule",{value:!0});var h=r(e(108)),m=r(e(109)),d=r(e(231)),v=e(241),p=r(e(244)),g=r(e(237)),_=r(e(238)),y=r(e(239)),T=r(e(240)),S=e(242),A=r(e(246)),I=r(e(46)),R=r(e(245)),b=r(e(54)),i=r(e(47));function a(e){var t,i=(e=e||{}).settings,n=this.context,r=(0, I.default)(n).getInstance(),a=void 0;function o(){r.trigger(b.default.METRICS_CHANGED);}function s(e){r.trigger(b.default.METRIC_CHANGED,{mediaType:e}),o();}function l(e,t,n){r.trigger(b.default.METRIC_UPDATED,{mediaType:e,metric:t,value:n}),s(e);}function f(e,t,n){r.trigger(b.default.METRIC_ADDED,{mediaType:e,metric:t,value:n}),s(e);}function u(e,t){var n=null;return e&&(a.hasOwnProperty(e)?n=a[e]:t||(n=new d.default,a[e]=n)),n}function c(e,t,n){var r=u(e);null!==r&&(r[t].push(n),r[t].length>i.get().streaming.metricsMaxListDepth&&r[t].shift());}function E(e,t,n){c(e,t,n),f(e,t,n);}return t={clearCurrentMetricsForType:function(e){delete a[e],s(e);},clearAllCurrentMetrics:function(){a={},o();},getMetricsFor:u,addHttpRequest:function e(t,n,r,i,a,o,s,u,l,d,f,c,h,p,g){var _=new v.HTTPRequest;o&&o!==i&&(e(t,null,r,i,a,null,null,u,l,null,null,null,h,null,null),_.actualurl=o),_.tcpid=n,_.type=r,_.url=i,_.range=u,_.trequest=l,_.tresponse=d,_.responsecode=c,_._tfinish=f,_._stream=t,_._mediaduration=h,_._quality=a,_._responseHeaders=p,_._serviceLocation=s,g?g.forEach(function(e){var t,n,r,i,a;t=_,n=e.s,r=e.d,i=e.b,(a=new v.HTTPRequestTrace).s=n,a.d=r,a.b=i,t.trace.push(a),t.interval||(t.interval=0),t.interval+=r;}):(delete _.interval,delete _.trace),E(t,m.default.HTTP_REQUEST,_);},addRepresentationSwitch:function(e,t,n,r,i){var a=new p.default;a.t=t,a.mt=n,a.to=r,i?a.lto=i:delete a.lto,E(e,m.default.TRACK_SWITCH,a);},addBufferLevel:function(e,t,n){var r=new g.default;r.t=t,r.level=n,E(e,m.default.BUFFER_LEVEL,r);},addBufferState:function(e,t,n){var r=new _.default;r.target=n,r.state=t,E(e,m.default.BUFFER_STATE,r);},addDVRInfo:function(e,t,n,r){var i=new y.default;i.time=t,i.range=r,i.manifestInfo=n,E(e,m.default.DVR_INFO,i);},addDroppedFrames:function(e,t){var n=new T.default,r=u(e).DroppedFrames;t&&(n.time=t.creationTime,n.droppedFrames=t.droppedVideoFrames,0<r.length&&r[r.length-1]==n||E(e,m.default.DROPPED_FRAMES,n));},addSchedulingInfo:function(e,t,n,r,i,a,o,s,u){var l=new A.default;l.mediaType=e,l.t=t,l.type=n,l.startTime=r,l.availabilityStartTime=i,l.duration=a,l.quality=o,l.range=s,l.state=u,E(e,m.default.SCHEDULING_INFO,l);},addRequestsQueue:function(e,t,n){var r=new R.default;r.loadingRequests=t,r.executedRequests=n,u(e).RequestsQueue=r,f(e,m.default.REQUESTS_QUEUE,r);},addManifestUpdate:function(e,t,n,r,i,a,o,s,u,l){var d=new S.ManifestUpdate;d.mediaType=e,d.type=t,d.requestTime=n,d.fetchTime=r,d.availabilityStartTime=i,d.presentationStartTime=a,d.clientTimeOffset=o,d.currentTime=s,d.buffered=u,d.latency=l,c(h.default.STREAM,m.default.MANIFEST_UPDATE,d),f(e,m.default.MANIFEST_UPDATE,d);},updateManifestUpdateInfo:function(e,t){if(e){for(var n in t)e[n]=t[n];l(e.mediaType,m.default.MANIFEST_UPDATE,e);}},addManifestUpdateStreamInfo:function(e,t,n,r,i){var a;e&&((a=new S.ManifestUpdateStreamInfo).id=t,a.index=n,a.start=r,a.duration=i,e.streamInfo.push(a),l(e.mediaType,m.default.MANIFEST_UPDATE_STREAM_INFO,e));},addManifestUpdateRepresentationInfo:function(e,t,n,r,i,a,o,s){var u;e&&e.representationInfo&&((u=new S.ManifestUpdateRepresentationInfo).id=t,u.index=n,u.streamIndex=r,u.mediaType=i,u.startNumber=o,u.fragmentInfoType=s,u.presentationTimeOffset=a,e.representationInfo.push(u),l(e.mediaType,m.default.MANIFEST_UPDATE_TRACK_INFO,e));},addPlayList:function(e){e.trace&&Array.isArray(e.trace)?e.trace.forEach(function(e){e.hasOwnProperty("subreplevel")&&!e.subreplevel&&delete e.subreplevel;}):delete e.trace,E(h.default.STREAM,m.default.PLAY_LIST,e);},addDVBErrors:function(e){E(h.default.STREAM,m.default.DVB_ERRORS,e);}},a={},t}a.__dashjs_factory_name="MetricsModel",n.default=i.default.getSingletonFactory(a),t.exports=n.default;},{108:108,109:109,231:231,237:237,238:238,239:239,240:240,241:241,242:242,244:244,245:245,246:246,46:46,47:47,54:54}],153:[function(e,t,n){function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(n,"__esModule",{value:!0});var l=r(e(236)),i=r(e(47));function a(){var u=void 0;return {initialize:function(e){if(u=new l.default,!e)return null;var t=e.indexOf("#");if(-1!==t)for(var n=e.substr(t+1).split("&"),r=0,i=n.length;r<i;++r){var a,o=n[r],s=o.indexOf("=");-1!==s&&(a=o.substring(0,s),u.hasOwnProperty(a)&&(u[a]=o.substr(s+1)));}},getURIFragmentData:function(){return u}}}a.__dashjs_factory_name="URIFragmentModel",n.default=i.default.getSingletonFactory(a),t.exports=n.default;},{236:236,47:47}],154:[function(e,t,n){function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(n,"__esModule",{value:!0});var i=r(e(47)),g=r(e(46)),_=r(e(54)),E=r(e(45));function a(){var e=void 0,t=void 0,o=void 0,n=void 0,r=void 0,i="element is not video or audio DOM type!",a=this.context,s=(0, g.default)(a).getInstance(),u=[];function l(){o&&(o.playbackRate=r||1,o.removeEventListener("canplay",l));}function d(e){o&&(o.readyState<=2&&0<e?o.addEventListener("canplay",l):o.playbackRate=e);}function f(){return 0<u.length}function c(){var e;o&&f()&&0===o.playbackRate&&((e=document.createEvent("Event")).initEvent("waiting",!0,!1),o.dispatchEvent(e));}function h(){return o?o.buffered:null}function p(e,t,n,r,i){if(o)for(var a=0;a<o.textTracks.length;a++)if(o.textTracks[a].kind===e&&(!t||o.textTracks[a].label==t)&&o.textTracks[a].language===n&&o.textTracks[a].isTTML===r&&o.textTracks[a].isEmbedded===i)return o.textTracks[a];return null}return e={initialize:function(){s.on(_.default.PLAYBACK_PLAYING,c,this);},setCurrentTime:function(t,e){if(o){if(o.currentTime==t)return;try{t=e?function(e){var t=h(),n=e,r=9999999999;if(t)for(var i=0;i<t.length;i++){var a=t.start(i),o=t.end(i),s=Math.abs(a-e),u=Math.abs(o-e);if(a<=e&&e<=o)return e;s<r&&(r=s,n=a),u<r&&(r=u,n=o);}return n}(t):t,o.currentTime=t;}catch(e){0===o.readyState&&e.code===e.INVALID_STATE_ERR&&setTimeout(function(){o.currentTime=t;},400);}}},play:function(){var e;o&&(o.autoplay=!0,(e=o.play())&&e.catch&&"undefined"!=typeof Promise&&e.catch(function(e){"NotAllowedError"===e.name&&s.trigger(_.default.PLAYBACK_NOT_ALLOWED),t.warn("Caught pending play exception - continuing ("+e+")");}));},isPaused:function(){return o?o.paused:null},pause:function(){o&&(o.pause(),o.autoplay=!1);},isSeeking:function(){return o?o.seeking:null},getTime:function(){return o?o.currentTime:null},getPlaybackRate:function(){return o?o.playbackRate:null},setPlaybackRate:d,getPlayedRanges:function(){return o?o.played:null},getEnded:function(){return o?o.ended:null},setStallState:function(e,t){(t?function(e){var t=void 0;if(null===e||o.seeking||-1!==u.indexOf(e))return;u.push(e),o&&1===u.length&&((t=document.createEvent("Event")).initEvent("waiting",!0,!1),r=o.playbackRate,d(0),o.dispatchEvent(t));}:function(e){var t=u.indexOf(e),n=void 0;if(null===e)return;-1!==t&&u.splice(t,1);o&&!1===f()&&0===o.playbackRate&&(d(r||1),o.paused||((n=document.createEvent("Event")).initEvent("playing",!0,!1),o.dispatchEvent(n)));})(e);},getElement:function(){return o},setElement:function(e){if(!(null==e||e&&/^(VIDEO|AUDIO)$/i.test(e.nodeName)))throw i;(o=e)&&(o.preload="auto");},setSource:function(e){o&&(e?o.src=e:(o.removeAttribute("src"),o.load()));},getSource:function(){return o?o.src:null},getTTMLRenderingDiv:function(){return n},setTTMLRenderingDiv:function(e){(n=e).style.position="absolute",n.style.display="flex",n.style.overflow="hidden",n.style.pointerEvents="none",n.style.top=0,n.style.left=0;},getPlaybackQuality:function(){if(!o)return null;var e="webkitDroppedFrameCount"in o&&"webkitDecodedFrameCount"in o,t=null;return "getVideoPlaybackQuality"in o?t=o.getVideoPlaybackQuality():e&&(t={droppedVideoFrames:o.webkitDroppedFrameCount,totalVideoFrames:o.webkitDroppedFrameCount+o.webkitDecodedFrameCount,creationTime:new Date}),t},addEventListener:function(e,t){o&&o.addEventListener(e,t);},removeEventListener:function(e,t){o&&o.removeEventListener(e,t);},getReadyState:function(){return o?o.readyState:NaN},getBufferRange:h,getClientWidth:function(){return o?o.clientWidth:NaN},getClientHeight:function(){return o?o.clientHeight:NaN},getTextTracks:function(){return o?o.textTracks:[]},getTextTrack:p,addTextTrack:function(e,t,n,r,i){if(!o)return null;var a=p(e,t,n,r,i);return a||((a=o.addTextTrack(e,t,n)).isEmbedded=i,a.isTTML=r),a},appendChild:function(e){o&&(o.appendChild(e),void 0!==e.isTTML&&(o.textTracks[o.textTracks.length-1].isTTML=e.isTTML,o.textTracks[o.textTracks.length-1].isEmbedded=e.isEmbedded));},removeChild:function(e){o&&o.removeChild(e);},getVideoWidth:function(){return o?o.videoWidth:NaN},getVideoHeight:function(){return o?o.videoHeight:NaN},getVideoRelativeOffsetTop:function(){var e=o.parentNode.host||o.parentNode;return e?o.getBoundingClientRect().top-e.parentNode.getBoundingClientRect().top:NaN},getVideoRelativeOffsetLeft:function(){var e=o.parentNode.host||o.parentNode;return e?o.getBoundingClientRect().left-e.getBoundingClientRect().left:NaN},reset:function(){s.off(_.default.PLAYBACK_PLAYING,c,this);}},t=(0, E.default)(a).getInstance().getLogger(e),e}a.__dashjs_factory_name="VideoModel",n.default=i.default.getSingletonFactory(a),t.exports=n.default;},{45:45,46:46,47:47,54:54}],155:[function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0});var r,i=e(47),a=(r=i)&&r.__esModule?r:{default:r};function o(e){var a=(e=e||{}).requestModifier,g=e.boxParser;function _(t,e){t.reader.read().then(e).catch(function(e){t.onerror&&200===t.response.status&&t.onerror(e);});}function E(i,t){if(1<(i=i.filter(function(e){return e.bytes>t/4/i.length})).length){var e=(a=0,o=(i[i.length-1].ts-i[0].ts)/i.length,i.forEach(function(e,t){var n,r=i[t+1];r&&(n=r.ts-e.ts,a+=n<o?n:0);}),{v:a});if("object"==typeof e)return e.v}var a,o;return null}return {load:function(p){var e=new Date,t=p.request,n=new Headers;t.range&&n.append("Range","bytes="+t.range),t.requestStartDate||(t.requestStartDate=e),a&&a.modifyRequestHeader({setRequestHeader:function(e,t){n.append(e,t);}});var r=void 0;"function"==typeof window.AbortController&&(r=new AbortController,(p.abortController=r).signal.onabort=p.onabort);var i={method:p.method,headers:n,credentials:p.withCredentials?"include":void 0,signal:r?r.signal:void 0};fetch(p.url,i).then(function(e){p.response||(p.response={}),p.response.status=e.status,p.response.statusText=e.statusText,p.response.responseURL=e.url,e.ok||p.onerror();var t="",n=!0,r=!1,i=void 0;try{for(var a,o=e.headers.keys()[Symbol.iterator]();!(n=(a=o.next()).done);n=!0){var s=a.value;t+=s+": "+e.headers.get(s)+"\r\n";}}catch(e){r=!0,i=e;}finally{try{!n&&o.return&&o.return();}finally{if(r)throw i}}if(p.response.responseHeaders=t,!e.body)return e.arrayBuffer().then(function(e){var t={loaded:(p.response.response=e).byteLength,total:e.byteLength,stream:!1};p.progress(t),p.onload(),p.onend();});var u=parseInt(e.headers.get("Content-Length"),10),l=0,d=!1,f=new Uint8Array,c=0;p.reader=e.body.getReader();var h=[];_(p,function e(t){var n,r,i,a=t.value;if(t.done)return f&&(p.progress({loaded:l,total:isNaN(u)?l:u,lengthComputable:!0,time:E(h,l),stream:!0}),p.response.response=f.buffer),p.onload(),void p.onend();a&&0<a.length&&(f=function(e,t){if(0===e.length)return t;var n=new Uint8Array(e.length+t.length);return n.set(e),n.set(t,e.length),n}(f,a),l+=a.length,h.push({ts:Date.now(),bytes:a.length}),(n=g.findLastTopIsoBoxCompleted(["moov","mdat"],f,c)).found?(r=n.lastCompletedOffset+n.size,i=void 0,f=r===f.length?(i=f,new Uint8Array):(i=new Uint8Array(f.subarray(0,r)),f.subarray(r)),p.progress({data:i.buffer,lengthComputable:!1,noTrace:!0}),c=0):(c=n.lastCompletedOffset,d||(p.progress({lengthComputable:!1,noTrace:!0}),d=!0))),_(p,e);});}).catch(function(e){p.onerror&&p.onerror(e);});},abort:function(e){if(e.abortController)e.abortController.abort();else if(e.reader)try{e.reader.cancel(),e.onabort();}catch(e){}},calculateDownloadedTime:E}}o.__dashjs_factory_name="FetchLoader";var s=a.default.getClassFactory(o);n.default=s,t.exports=n.default;},{47:47}],156:[function(e,t,n){function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}Object.defineProperty(n,"__esModule",{value:!0});var C=r(e(159)),O=r(e(155)),w=e(241),a=r(e(47)),P=r(e(225)),o=r(e(148)),L=r(e(49));function s(e){e=e||{};var t,n,E=this.context,m=e.errHandler,v=e.dashMetrics,y=e.mediaPlayerModel,T=e.requestModifier,S=e.boxParser,A=e.useFetch||!1,r=e.errors,I=void 0,R=void 0,b=void 0,D=void 0,M=void 0;function N(n,t){var r=n.request,i=[],a=!0,o=!0,s=new Date,u=s,l=0,d=void 0;if(!T||!v||!m)throw new Error("config object is not correct or missing");function e(e){o=!1,r.requestStartDate=s,r.requestEndDate=new Date,r.firstByteDate=r.firstByteDate||s,r.checkExistenceOnly||(v.addHttpRequest(r,d.response?d.response.responseURL:null,d.response?d.response.status:null,d.response&&d.response.getAllResponseHeaders?d.response.getAllResponseHeaders():d.response?d.response.responseHeaders:[],e?i:null),r.type===w.HTTPRequest.MPD_TYPE&&v.addManifestUpdate(r.type,r.requestStartDate,r.requestEndDate));}function f(){-1!==I.indexOf(d)&&(I.splice(I.indexOf(d),1),o&&(e(!1),0<t?function(){t--;var e={config:n};b.push(e),e.timeout=setTimeout(function(){-1!==b.indexOf(e)&&(b.splice(b.indexOf(e),1),N(n,t));},y.getRetryIntervalsForType(r.type));}():(m.error(new P.default(D[r.type],r.url+" is not available",{request:r,response:d.response})),n.error&&n.error(r,"error",d.response.statusText),n.complete&&n.complete(r,d.response.statusText))));}var c,h=void 0,h=A&&window.fetch&&"arraybuffer"===r.responseType&&r.type===w.HTTPRequest.MEDIA_SEGMENT_TYPE?(0, O.default)(E).create({requestModifier:T,boxParser:S}):(0, C.default)(E).create({requestModifier:T}),p=T.modifyRequestURL(r.url),g=function(e){try{var t=[],n=M.getQueryParameter(e);return n&&t.push(n),t}catch(e){return []}}(r),d={url:p=L.default.addAditionalQueryParameterToUrl(p,g),method:r.checkExistenceOnly?w.HTTPRequest.HEAD:w.HTTPRequest.GET,withCredentials:y.getXHRWithCredentialsForType(r.type),request:r,onload:function(){200<=d.response.status&&d.response.status<=299&&(e(!0),n.success&&n.success(d.response.response,d.response.statusText,d.response.responseURL),n.complete&&n.complete(r,d.response.statusText));},onend:f,onerror:f,progress:function(e){var t=new Date;a&&(a=!1,(!e.lengthComputable||e.lengthComputable&&e.total!==e.loaded)&&(r.firstByteDate=t)),e.lengthComputable&&(r.bytesLoaded=e.loaded,r.bytesTotal=e.total),e.noTrace||(i.push({s:u,d:e.time?e.time:t.getTime()-u.getTime(),b:[e.loaded?e.loaded-l:0]}),u=t,l=e.loaded),n.progress&&e&&n.progress(e);},onabort:function(){n.abort&&n.abort(r);},loader:h},_=(new Date).getTime();isNaN(r.delayLoadingTime)||_>=r.delayLoadingTime?(I.push(d),h.load(d)):(c={httpRequest:d},R.push(c),c.delayTimeout=setTimeout(function(){if(-1!==R.indexOf(c)){R.splice(R.indexOf(c),1);try{s=new Date,u=s,I.push(c.httpRequest),h.load(c.httpRequest);}catch(e){c.httpRequest.onerror();}}},r.delayLoadingTime-_));}return t={load:function(e){e.request?N(e,y.getRetryAttemptsForType(e.request.type)):e.error&&e.error(e.request,"error");},abort:function(){b.forEach(function(e){clearTimeout(e.timeout),e.config.request&&e.config.abort&&e.config.abort(e.config.request);}),b=[],R.forEach(function(e){return clearTimeout(e.delayTimeout)}),R=[],I.forEach(function(e){e.onloadend=e.onerror=e.onprogress=void 0,e.loader.abort(e);}),I=[];}},I=[],R=[],b=[],M=(0, o.default)(E).getInstance(),i(n={},w.HTTPRequest.MPD_TYPE,r.DOWNLOAD_ERROR_ID_MANIFEST_CODE),i(n,w.HTTPRequest.XLINK_EXPANSION_TYPE,r.DOWNLOAD_ERROR_ID_XLINK_CODE),i(n,w.HTTPRequest.INIT_SEGMENT_TYPE,r.DOWNLOAD_ERROR_ID_INITIALIZATION_CODE),i(n,w.HTTPRequest.MEDIA_SEGMENT_TYPE,r.DOWNLOAD_ERROR_ID_CONTENT_CODE),i(n,w.HTTPRequest.INDEX_SEGMENT_TYPE,r.DOWNLOAD_ERROR_ID_CONTENT_CODE),i(n,w.HTTPRequest.BITSTREAM_SWITCHING_SEGMENT_TYPE,r.DOWNLOAD_ERROR_ID_CONTENT_CODE),i(n,w.HTTPRequest.OTHER_TYPE,r.DOWNLOAD_ERROR_ID_CONTENT_CODE),D=n,t}s.__dashjs_factory_name="HTTPLoader";var u=a.default.getClassFactory(s);n.default=u,t.exports=n.default;},{148:148,155:155,159:159,225:225,241:241,47:47,49:49}],157:[function(e,t,n){function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(n,"__esModule",{value:!0});var i=r(e(47)),a=r(e(156));function o(){var n=void 0;function e(){n={};}function t(){e();}return t(),{getLoader:function(e){for(var t in n)if(n.hasOwnProperty(t)&&e.startsWith(t))return n[t];return a.default},registerLoader:function(e,t){n[e]=t;},unregisterLoader:function(e){n[e]&&delete n[e];},unregisterAllLoader:e,reset:t}}o.__dashjs_factory_name="SchemeLoaderFactory";var s=i.default.getSingletonFactory(o);n.default=s,t.exports=n.default;},{156:156,47:47}],158:[function(e,t,n){function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(n,"__esModule",{value:!0});var i=r(e(47)),o=r(e(157));function a(n){n=n||{};var r=this.context,i=void 0,a=void 0;return i=(0, o.default)(r).getInstance(),{load:function(e){var t=i.getLoader(e&&e.request?e.request.url:null);(a=t(r).create({errHandler:n.errHandler,mediaPlayerModel:n.mediaPlayerModel,requestModifier:n.requestModifier,useFetch:n.useFetch||null,dashMetrics:n.dashMetrics,boxParser:n.boxParser?n.boxParser:null,constants:n.constants?n.constants:null,dashConstants:n.dashConstants?n.dashConstants:null,urlUtils:n.urlUtils?n.urlUtils:null,errors:n.errors})).load(e);},abort:function(){a&&a.abort();}}}a.__dashjs_factory_name="URLLoader";var s=i.default.getClassFactory(a);n.default=s,t.exports=n.default;},{157:157,47:47}],159:[function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0});var r,i=e(47),a=(r=i)&&r.__esModule?r:{default:r};function o(e){var i=(e=e||{}).requestModifier;return {load:function(e){var t=new Date,n=e.request,r=new XMLHttpRequest;r.open(e.method,e.url,!0),n.responseType&&(r.responseType=n.responseType),n.range&&r.setRequestHeader("Range","bytes="+n.range),n.requestStartDate||(n.requestStartDate=t),i&&(r=i.modifyRequestHeader(r)),r.withCredentials=e.withCredentials,r.onload=e.onload,r.onloadend=e.onend,r.onerror=e.onerror,r.onprogress=e.progress,r.onabort=e.onabort,r.send(),e.response=r;},abort:function(e){var t=e.response;t.onloadend=t.onerror=t.onprogress=void 0,t.abort();}}}o.__dashjs_factory_name="XHRLoader";var s=a.default.getClassFactory(o);n.default=s,t.exports=n.default;},{47:47}],160:[function(e,t,n){function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r);}}Object.defineProperty(n,"__esModule",{value:!0});var i=(function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}(a,null,[{key:"findCencContentProtection",value:function(e){for(var t=null,n=0;n<e.length;++n){var r=e[n];"urn:mpeg:dash:mp4protection:2011"===r.schemeIdUri.toLowerCase()&&"cenc"===r.value.toLowerCase()&&(t=r);}return t}},{key:"getPSSHData",value:function(e){var t=8,n=new DataView(e),r=n.getUint8(t);return t+=20,0<r&&(t+=4+16*n.getUint32(t)),t+=4,e.slice(t)}},{key:"getPSSHForKeySystem",value:function(e,t){var n=a.parsePSSHList(t);return e&&n.hasOwnProperty(e.uuid.toLowerCase())?n[e.uuid.toLowerCase()]:null}},{key:"parseInitDataFromContentProtection",value:function(e,t){return "pssh"in e?(e.pssh.__text=e.pssh.__text.replace(/\r?\n|\r/g,"").replace(/\s+/g,""),t.decodeArray(e.pssh.__text).buffer):null}},{key:"parsePSSHList",value:function(e){if(null==e)return [];for(var t=new DataView(e.buffer||e),n={},r=0;;){var i,a,o=void 0,s=r;if(r>=t.buffer.byteLength)break;if(i=r+t.getUint32(r),r+=4,1886614376===t.getUint32(r))if(r+=4,0===(a=t.getUint8(r))||1===a){r++,r+=3,o="";for(var u=void 0,l=void 0,u=0;u<4;u++)o+=1===(l=t.getUint8(r+u).toString(16)).length?"0"+l:l;for(r+=4,o+="-",u=0;u<2;u++)o+=1===(l=t.getUint8(r+u).toString(16)).length?"0"+l:l;for(r+=2,o+="-",u=0;u<2;u++)o+=1===(l=t.getUint8(r+u).toString(16)).length?"0"+l:l;for(r+=2,o+="-",u=0;u<2;u++)o+=1===(l=t.getUint8(r+u).toString(16)).length?"0"+l:l;for(r+=2,o+="-",u=0;u<6;u++)o+=1===(l=t.getUint8(r+u).toString(16)).length?"0"+l:l;r+=6,o=o.toLowerCase(),t.getUint32(r),r+=4,n[o]=t.buffer.slice(s,i),r=i;}else r=i;else r=i;}return n}}]),a);function a(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a);}n.default=i,t.exports=n.default;},{}],161:[function(e,t,n){function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(n,"__esModule",{value:!0});var h=r(e(163)),p=r(e(164)),i=r(e(162)),a=r(e(169)),g=r(e(171)),_=r(e(172)),E=r(e(170)),m=[{generateKeyRequest:"generateKeyRequest",addKey:"addKey",cancelKeyRequest:"cancelKeyRequest",needkey:"needkey",keyerror:"keyerror",keyadded:"keyadded",keymessage:"keymessage"},{generateKeyRequest:"webkitGenerateKeyRequest",addKey:"webkitAddKey",cancelKeyRequest:"webkitCancelKeyRequest",needkey:"webkitneedkey",keyerror:"webkitkeyerror",keyadded:"webkitkeyadded",keymessage:"webkitkeymessage"}],v=[{setMediaKeys:"setMediaKeys",MediaKeys:"MediaKeys",release:"close",needkey:"needkey",error:"keyerror",message:"keymessage",ready:"keyadded",close:"keyclose"},{setMediaKeys:"msSetMediaKeys",MediaKeys:"MSMediaKeys",release:"close",needkey:"msneedkey",error:"mskeyerror",message:"mskeymessage",ready:"mskeyadded",close:"mskeyclose"}];function o(){var d=void 0,f=this.context;function c(e,t){for(var n=0;n<t.length;n++){var r=t[n];if("function"==typeof e[r[Object.keys(r)[0]]])return r}return null}return d={createProtectionSystem:function(e){var t=null,n=(0, p.default)(f).getInstance();n.setConfig({debug:e.debug,BASE64:e.BASE64}),n.initialize();var r,i,a,o,s,u,l=(i=(r=e).debug,a=i.getLogger(d),o=r.eventBus,s=r.errHandler,(u=r.videoModel?r.videoModel.getElement():null)&&void 0===u.onencrypted||u&&void 0===u.mediaKeys?c(u,v)?(a.info("EME detected on this user agent! (ProtectionModel_3Feb2014)"),(0, _.default)(f).create({debug:i,eventBus:o,events:r.events,api:c(u,v)})):c(u,m)?(a.info("EME detected on this user agent! (ProtectionModel_01b)"),(0, E.default)(f).create({debug:i,eventBus:o,errHandler:s,events:r.events,api:c(u,m)})):(a.warn("No supported version of EME detected on this user agent! - Attempts to play encrypted content will fail!"),null):(a.info("EME detected on this user agent! (ProtectionModel_21Jan2015)"),(0, g.default)(f).create({debug:i,eventBus:o,events:r.events})));return !t&&l&&(t=(0, h.default)(f).create({protectionModel:l,protectionKeyController:n,eventBus:e.eventBus,debug:e.debug,events:e.events,BASE64:e.BASE64,constants:e.constants}),e.capabilities.setEncryptedMediaSupported(!0)),t}}}o.__dashjs_factory_name="Protection";var s=dashjs.FactoryMaker.getClassFactory(o);s.events=i.default,s.errors=a.default,dashjs.FactoryMaker.updateClassFactory(o.__dashjs_factory_name,s),n.default=s,t.exports=n.default;},{162:162,163:163,164:164,169:169,170:170,171:171,172:172}],162:[function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0});var r=function(e,t,n){for(var r=!0;r;){var i=e,a=t,o=n,r=!1;null===i&&(i=Function.prototype);var s=Object.getOwnPropertyDescriptor(i,a);if(void 0!==s){if("value"in s)return s.value;var u=s.get;if(void 0===u)return;return u.call(o)}var l=Object.getPrototypeOf(i);if(null===l)return;e=l,t=a,n=o,r=!0,s=l=void 0;}};var i,a=e(55);function o(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),r(Object.getPrototypeOf(o.prototype),"constructor",this).call(this),this.INTERNAL_KEY_MESSAGE="internalKeyMessage",this.INTERNAL_KEY_SYSTEM_SELECTED="internalKeySystemSelected",this.INTERNAL_KEY_STATUS_CHANGED="internalkeyStatusChanged",this.KEY_ADDED="public_keyAdded",this.KEY_ERROR="public_keyError",this.KEY_MESSAGE="public_keyMessage",this.KEY_SESSION_CLOSED="public_keySessionClosed",this.KEY_SESSION_CREATED="public_keySessionCreated",this.KEY_SESSION_REMOVED="public_keySessionRemoved",this.KEY_STATUSES_CHANGED="public_keyStatusesChanged",this.KEY_SYSTEM_ACCESS_COMPLETE="public_keySystemAccessComplete",this.KEY_SYSTEM_SELECTED="public_keySystemSelected",this.LICENSE_REQUEST_COMPLETE="public_licenseRequestComplete",this.NEED_KEY="needkey",this.PROTECTION_CREATED="public_protectioncreated",this.PROTECTION_DESTROYED="public_protectiondestroyed",this.SERVER_CERTIFICATE_UPDATED="serverCertificateUpdated",this.TEARDOWN_COMPLETE="protectionTeardownComplete",this.VIDEO_ELEMENT_SELECTED="videoElementSelected";}var s=new(function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t);}(o,((i=a)&&i.__esModule?i:{default:i}).default),o);n.default=s,t.exports=n.default;},{55:55}],163:[function(e,t,n){function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(n,"__esModule",{value:!0});var N=r(e(160)),C=r(e(182)),O=r(e(181)),w=r(e(169)),P=r(e(225));function i(e){var t,y=(e=e||{}).protectionKeyController,T=e.protectionModel,S=e.eventBus,A=e.events,n=e.debug,d=e.BASE64,l=e.constants,s=[],I=void 0,f=void 0,c=void 0,h=void 0,r=void 0,p=void 0,R=void 0;function i(){if(!(S&&S.hasOwnProperty("on")&&y&&y.hasOwnProperty("getSupportedKeySystemsFromContentProtection")))throw new Error("Missing config parameter(s)")}function g(e,t){var n=N.default.getPSSHForKeySystem(R,e),r=b(R);if(n){for(var i=T.getAllInitData(),a=0;a<i.length;a++)if(y.initDataEquals(n,i[a]))return void I.warn("DRM: Ignoring initData because we have already seen it!");try{T.createKeySession(n,r,m(R),t);}catch(e){S.trigger(A.KEY_SESSION_CREATED,{data:null,error:new P.default(w.default.KEY_SESSION_CREATED_ERROR_CODE,w.default.KEY_SESSION_CREATED_ERROR_MESSAGE+e.message)});}}else e?T.createKeySession(e,r,m(R),t):S.trigger(A.KEY_SESSION_CREATED,{data:null,error:new P.default(w.default.KEY_SESSION_CREATED_ERROR_CODE,w.default.KEY_SESSION_CREATED_ERROR_MESSAGE+"Selected key system is "+(R?R.systemString:null)+".  needkey/encrypted event contains no initData corresponding to that key system!")});}function _(e,t){i(),T.loadKeySession(e,t,m(R));}function a(e){i(),e?(T.setMediaElement(e),S.on(A.NEED_KEY,M,this)):null===e&&(T.setMediaElement(e),S.off(A.NEED_KEY,M,this));}function b(e){var t,n=null;return e&&(t=e.systemString,h&&(n=t in h?h[t]:null)),n}function E(e){var t=b(e),n=[],r=[],i=t&&t.audioRobustness&&0<t.audioRobustness.length?t.audioRobustness:p,a=t&&t.videoRobustness&&0<t.videoRobustness.length?t.videoRobustness:p,o=m(e),s=t&&t.distinctiveIdentifier?t.distinctiveIdentifier:"optional",u=t&&t.persistentState?t.persistentState:"temporary"===o?"optional":"required";return c.forEach(function(e){e.type===l.AUDIO?n.push(new C.default(e.codec,i)):e.type===l.VIDEO&&r.push(new C.default(e.codec,a));}),new O.default(n,r,s,u,[o])}function m(e){var t=b(e);return t&&t.sessionType?t.sessionType:r}function u(n,s){var u=this,t=[];n=n.sort(function(e,t){return (h&&h[e.ks.systemString]&&0<=h[e.ks.systemString].priority?h[e.ks.systemString].priority:n.length)-(h&&h[t.ks.systemString]&&0<=h[t.ks.systemString].priority?h[t.ks.systemString].priority:n.length)});var r,l=void 0;if(R)for(l=0;l<n.length;l++){if(R===n[l].ks)if("break"===function(){t.push({ks:n[l].ks,configs:[E(R)]});return S.on(A.KEY_SYSTEM_ACCESS_COMPLETE,function e(t){S.off(A.KEY_SYSTEM_ACCESS_COMPLETE,e,u),t.error?s||S.trigger(A.KEY_SYSTEM_SELECTED,{error:new P.default(w.default.KEY_SYSTEM_ACCESS_DENIED_ERROR_CODE,w.default.KEY_SYSTEM_ACCESS_DENIED_ERROR_MESSAGE+t.error)}):(I.info("DRM: KeySystem Access Granted"),S.trigger(A.KEY_SYSTEM_SELECTED,{data:t.data}),n[l].sessionId?_(n[l].sessionId,n[l].initData):n[l].initData&&g(n[l].initData,n[l].cdmData));},u),T.requestKeySystemAccess(t),"break"}())break}else void 0===R?function(){R=null,f.push(n);for(var e=0;e<n.length;e++)t.push({ks:n[e].ks,configs:[E(n[e].ks)]});function a(e){S.off(A.KEY_SYSTEM_ACCESS_COMPLETE,a,u),e.error?(R=void 0,S.off(A.INTERNAL_KEY_SYSTEM_SELECTED,r,u),s||S.trigger(A.KEY_SYSTEM_SELECTED,{data:null,error:new P.default(w.default.KEY_SYSTEM_ACCESS_DENIED_ERROR_CODE,w.default.KEY_SYSTEM_ACCESS_DENIED_ERROR_MESSAGE+e.error)})):(o=e.data,I.info("DRM: KeySystem Access Granted ("+o.keySystem.systemString+")!  Selecting key system..."),T.selectKeySystem(o));}var o=void 0;r=function e(t){if(S.off(A.INTERNAL_KEY_SYSTEM_SELECTED,e,u),S.off(A.KEY_SYSTEM_ACCESS_COMPLETE,a,u),t.error)R=void 0,s||S.trigger(A.KEY_SYSTEM_SELECTED,{data:null,error:new P.default(w.default.KEY_SYSTEM_ACCESS_DENIED_ERROR_CODE,w.default.KEY_SYSTEM_ACCESS_DENIED_ERROR_MESSAGE+"Error selecting key system! -- "+t.error)});else {if(!T)return;R=T.getKeySystem(),S.trigger(A.KEY_SYSTEM_SELECTED,{data:o});var n=b(R);n&&n.serverCertificate&&0<n.serverCertificate.length&&T.setServerCertificate(d.decodeArray(n.serverCertificate).buffer);for(var r,i=0;i<f.length;i++)for(l=0;l<f[i].length;l++)if(R===f[i][l].ks){y.isClearKey(R)&&n&&n.hasOwnProperty("clearkeys")&&(r={kids:Object.keys(n.clearkeys)},f[i][l].initData=(new TextEncoder).encode(JSON.stringify(r))),f[i][l].sessionId?_(f[i][l].sessionId,f[i][l].initData):null!==f[i][l].initData&&g(f[i][l].initData,f[i][l].cdmData);break}}},S.on(A.INTERNAL_KEY_SYSTEM_SELECTED,r,u),S.on(A.KEY_SYSTEM_ACCESS_COMPLETE,a,u),T.requestKeySystemAccess(t);}():f.push(n);}function D(e,t){S.trigger(A.LICENSE_REQUEST_COMPLETE,{data:e,error:t});}function o(e){e.error?S.trigger(A.KEY_STATUSES_CHANGED,{data:null,error:e.error}):I.debug("DRM: key status = "+e.status);}function v(e){I.debug("DRM: onKeyMessage");var t=e.data;S.trigger(A.KEY_MESSAGE,{data:t});var n=t.messageType?t.messageType:"license-request",r=t.message,i=t.sessionToken,a=b(R),o=R?R.systemString:null,s=y.getLicenseServer(R,a,n),u={sessionToken:i,messageType:n};if(r&&0!==r.byteLength){if(!s)return I.debug("DRM: License server request not required for this message (type = "+e.data.messageType+").  Session ID = "+i.getSessionID()),void D(u);if(y.isClearKey(R)){var l=y.processClearKeyLicenseRequest(R,a,r);if(l)return I.debug("DRM: ClearKey license request handled by application!"),D(u),void T.updateKeySession(i,l)}var d,f,c,h,p,g,_,E,m,v=null;a&&a.serverURL?"string"==typeof(d=a.serverURL)&&""!==d?v=d:"object"==typeof d&&d.hasOwnProperty(n)&&(v=d[n]):v=a&&a.laURL&&""!==a.laURL?a.laURL:(v=R.getLicenseServerURLFromInitData(N.default.getPSSHData(i.initData)))||e.data.laURL,(v=s.getServerURLFromMessage(v,r,n))?(c=!(f={}),h=function(e){if(e)for(var t in e)"authorization"===t.toLowerCase()&&(c=!0),f[t]=e[t];},a&&h(a.httpRequestHeaders),h(R.getRequestHeadersFromMessage(r)),a&&"boolean"==typeof a.withCredentials&&(c=a.withCredentials),p=function(e,t,n,r){var i=e.response?s.getErrorResponse(e.response,n,r):"NONE";D(t,new P.default(w.default.MEDIA_KEY_MESSAGE_LICENSER_ERROR_CODE,w.default.MEDIA_KEY_MESSAGE_LICENSER_ERROR_MESSAGE+n+' update, XHR complete. status is "'+e.statusText+'" ('+e.status+"), readyState is "+e.readyState+".  Response is "+i));},g=R.getLicenseRequestFromMessage(r),_=s.getHTTPMethod(n),E=s.getResponseType(o,n),m=a&&!isNaN(a.httpTimeout)?a.httpTimeout:8e3,function e(t,n,r,i,a,o,s,u,l,d,f){var c=new XMLHttpRequest;c.open(r,t,!0);c.responseType=i;c.withCredentials=a;0<u&&(c.timeout=u);for(var h in n)c.setRequestHeader(h,n[h]);var p=function(){s--,setTimeout(function(){e(t,n,r,i,a,o,s,u,l,d,f);},1e3);};c.onload=function(){200===this.status||s<=0?l(this):(I.warn("License request failed ("+this.status+"). Retrying it... Pending retries: "+s),p());};c.ontimeout=c.onerror=function(){s<=0?f(this):(I.warn("License request network request failed . Retrying it... Pending retries: "+s),p());};c.onabort=function(){d(this);};c.send(o);}(v,f,_,E,c,g,3,m,function(e){var t;T&&(200===e.status&&null!==(t=s.getLicenseMessage(e.response,o,n))?(D(u),T.updateKeySession(i,t)):p(e,u,o,n));},function(e){D(u,new P.default(w.default.MEDIA_KEY_MESSAGE_LICENSER_ERROR_CODE,w.default.MEDIA_KEY_MESSAGE_LICENSER_ERROR_MESSAGE+o+' update, XHR aborted. status is "'+e.statusText+'" ('+e.status+"), readyState is "+e.readyState));},function(e){D(u,new P.default(w.default.MEDIA_KEY_MESSAGE_LICENSER_ERROR_CODE,w.default.MEDIA_KEY_MESSAGE_LICENSER_ERROR_MESSAGE+o+' update, XHR error. status is "'+e.statusText+'" ('+e.status+"), readyState is "+e.readyState));})):D(u,new P.default(w.default.MEDIA_KEY_MESSAGE_NO_LICENSE_SERVER_URL_ERROR_CODE,w.default.MEDIA_KEY_MESSAGE_NO_LICENSE_SERVER_URL_ERROR_MESSAGE));}else D(u,new P.default(w.default.MEDIA_KEY_MESSAGE_NO_CHALLENGE_ERROR_CODE,w.default.MEDIA_KEY_MESSAGE_NO_CHALLENGE_ERROR_MESSAGE));}function M(e,t){if(I.debug("DRM: onNeedKey"),"cenc"===e.key.initDataType)if(0===c.length&&(I.warn("DRM: onNeedKey called before initializeForMedia, wait until initialized"),(t=void 0===t?1:t+1)<5))s.push(setTimeout(function(){M(e,t);},500));else {var n=e.key.initData;if(ArrayBuffer.isView(n)&&(n=n.buffer),R){var r=N.default.getPSSHForKeySystem(R,n);if(r)for(var i=T.getAllInitData(),a=0;a<i.length;a++)if(y.initDataEquals(r,i[a]))return void I.warn("DRM: Ignoring initData because we have already seen it!")}I.debug("DRM: initData:",String.fromCharCode.apply(null,new Uint8Array(n)));var o=y.getSupportedKeySystems(n,h);0!==o.length?u(o,!1):I.debug("DRM: Received needkey event with initData, but we don't support any of the key systems!");}else I.warn("DRM:  Only 'cenc' initData is supported!  Ignoring initData of type: "+e.key.initDataType);}return t={initializeForMedia:function(e){if(!e)throw new Error("mediaInfo can not be null or undefined");i(),S.on(A.INTERNAL_KEY_MESSAGE,v,this),S.on(A.INTERNAL_KEY_STATUS_CHANGED,o,this),c.push(e);var t=y.getSupportedKeySystemsFromContentProtection(e.contentProtection);t&&0<t.length&&u(t,!0);},createKeySession:g,loadKeySession:_,removeKeySession:function(e){i(),T.removeKeySession(e);},closeKeySession:function(e){i(),T.closeKeySession(e);},setServerCertificate:function(e){i(),T.setServerCertificate(e);},setMediaElement:a,setSessionType:function(e){r=e;},setRobustnessLevel:function(e){p=e;},setProtectionData:function(e){h=e,y.setProtectionData(e);},getSupportedKeySystemsFromContentProtection:function(e){return i(),y.getSupportedKeySystemsFromContentProtection(e)},getKeySystems:function(){return y?y.getKeySystems():[]},setKeySystems:function(e){y&&y.setKeySystems(e);},stop:function(){T&&T.stop();},reset:function(){i(),S.off(A.INTERNAL_KEY_MESSAGE,v,this),S.off(A.INTERNAL_KEY_STATUS_CHANGED,o,this),a(null),R=void 0,T&&(T.reset(),T=null),s.forEach(function(e){return clearTimeout(e)}),s=[],c=[];}},I=n.getLogger(t),f=[],c=[],r="temporary",p="",t}i.__dashjs_factory_name="ProtectionController",n.default=dashjs.FactoryMaker.getClassFactory(i),t.exports=n.default;},{160:160,169:169,181:181,182:182,225:225}],164:[function(e,t,n){function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(n,"__esModule",{value:!0});var l=r(e(160)),d=r(e(165)),f=r(e(167)),c=r(e(168)),h=r(e(166)),p=r(e(174)),g=r(e(175)),_=r(e(176)),E=r(e(173)),m=r(e(110));function i(){var i=this.context,t=void 0,n=void 0,r=void 0,u=void 0,a=void 0,o=void 0,s=void 0;return t={initialize:function(){u=[];var e=void 0,e=(0, h.default)(i).getInstance({BASE64:a});u.push(e),e=(0, c.default)(i).getInstance({BASE64:a}),u.push(e),e=(0, d.default)(i).getInstance({BASE64:a}),u.push(e),o=e,e=(0, f.default)(i).getInstance({BASE64:a,debug:n}),u.push(e),s=e;},setProtectionData:function(e){for(var t,n,r=0;r<u.length;r++){var i=u[r];i.hasOwnProperty("init")&&i.init((t=i.systemString,n=void 0,n=null,e&&(n=t in e?e[t]:null),n));}},isClearKey:function(e){return e===o||e===s},initDataEquals:function(e,t){if(e.byteLength!==t.byteLength)return !1;for(var n=new Uint8Array(e),r=new Uint8Array(t),i=0;i<n.length;i++)if(n[i]!==r[i])return !1;return !0},getKeySystems:function(){return u},setKeySystems:function(e){u=e;},getKeySystemBySystemString:function(e){for(var t=0;t<u.length;t++)if(u[t].systemString===e)return u[t];return null},getSupportedKeySystemsFromContentProtection:function(e){var t,n=void 0,r=void 0,i=void 0,a=void 0,o=[];if(e)for(i=0;i<u.length;++i)for(r=u[i],a=0;a<e.length;++a){(n=e[a]).schemeIdUri.toLowerCase()===r.schemeIdURI&&(t=r.getInitData(n),o.push({ks:u[i],initData:t,cdmData:r.getCDMData(),sessionId:r.getSessionId(n)}));}return o},getSupportedKeySystems:function(e,t){for(var n=[],r=l.default.parsePSSHList(e),i=void 0,a=void 0,o=void 0,s=0;s<u.length;++s)a=(i=u[s]).systemString,o=!t||a in t,i.uuid in r&&o&&n.push({ks:i,initData:r[i.uuid],cdmData:i.getCDMData(),sessionId:i.getSessionId()});return n},getLicenseServer:function(e,t,n){if("license-release"===n||"individualization-request"===n)return null;var r=null;return t&&t.hasOwnProperty("drmtoday")?r=(0, p.default)(i).getInstance({BASE64:a}):e.systemString===m.default.WIDEVINE_KEYSTEM_STRING?r=(0, _.default)(i).getInstance():e.systemString===m.default.PLAYREADY_KEYSTEM_STRING?r=(0, g.default)(i).getInstance():e.systemString===m.default.CLEARKEY_KEYSTEM_STRING&&(r=(0, E.default)(i).getInstance()),r},processClearKeyLicenseRequest:function(e,t,n){try{return e.getClearKeysFromProtectionData(t,n)}catch(e){return r.error("Failed to retrieve clearkeys from ProtectionData"),null}},setConfig:function(e){e&&(e.debug&&(n=e.debug,r=n.getLogger(t)),e.BASE64&&(a=e.BASE64));}}}i.__dashjs_factory_name="ProtectionKeyController",n.default=dashjs.FactoryMaker.getSingletonFactory(i),t.exports=n.default;},{110:110,160:160,165:165,166:166,167:167,168:168,173:173,174:174,175:175,176:176}],165:[function(e,t,n){function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(n,"__esModule",{value:!0});var u=r(e(179)),l=r(e(177)),i=r(e(160)),a=r(e(110)),o="e2719d58-a985-b3c9-781a-b030af78d30e",s=a.default.CLEARKEY_KEYSTEM_STRING;function d(e){var t=(e=e||{}).BASE64;return {uuid:o,schemeIdURI:"urn:uuid:e2719d58-a985-b3c9-781a-b030af78d30e",systemString:s,getInitData:function(e){return i.default.parseInitDataFromContentProtection(e,t)},getRequestHeadersFromMessage:function(){return null},getLicenseRequestFromMessage:function(e){return new Uint8Array(e)},getLicenseServerURLFromInitData:function(){return null},getCDMData:function(){return null},getSessionId:function(){return null},getClearKeysFromProtectionData:function(e,t){var n=null;if(e){for(var r=JSON.parse(String.fromCharCode.apply(null,new Uint8Array(t))),i=[],a=0;a<r.kids.length;a++){var o=r.kids[a],s=e.clearkeys&&e.clearkeys.hasOwnProperty(o)?e.clearkeys[o]:null;if(!s)throw new Error("DRM: ClearKey keyID ("+o+") is not known!");i.push(new u.default(o,s));}n=new l.default(i);}return n}}}d.__dashjs_factory_name="KeySystemClearKey",n.default=dashjs.FactoryMaker.getSingletonFactory(d),t.exports=n.default;},{110:110,160:160,177:177,179:179}],166:[function(e,t,n){function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(n,"__esModule",{value:!0});var c=r(e(160)),i=r(e(110)),a="9a04f079-9840-4286-ab92-e65be0885f95",o=i.default.PLAYREADY_KEYSTEM_STRING,s=void 0;function u(e){var l="utf-16",d=(e=e||{}).BASE64;function f(){if(!d||!d.hasOwnProperty("decodeArray")||!d.hasOwnProperty("decodeArray"))throw new Error("Missing config parameter(s)")}return {uuid:a,schemeIdURI:"urn:uuid:9a04f079-9840-4286-ab92-e65be0885f95",systemString:o,getInitData:function(e){var t,n,r,i=new Uint8Array([112,115,115,104,0,0,0,0]),a=new Uint8Array([154,4,240,121,152,64,66,134,171,146,230,91,224,136,95,149]),o=0,s=null,u=void 0,l=void 0;if(f(),!e)return null;if("pssh"in e)return c.default.parseInitDataFromContentProtection(e,d);if("pro"in e)s=d.decodeArray(e.pro.__text);else {if(!("prheader"in e))return null;s=d.decodeArray(e.prheader.__text);}return t=s.length,n=4+i.length+a.length+4+t,r=new ArrayBuffer(n),u=new Uint8Array(r),(l=new DataView(r)).setUint32(o,n),o+=4,u.set(i,o),o+=i.length,u.set(a,o),o+=a.length,l.setUint32(o,t),o+=4,u.set(s,o),o+=t,u.buffer},getRequestHeadersFromMessage:function(e){for(var t=void 0,n={},r=new DOMParser,i=new("utf-16"===l?Uint16Array:Uint8Array)(e),a=String.fromCharCode.apply(null,i),o=(t=r.parseFromString(a,"application/xml")).getElementsByTagName("name"),s=t.getElementsByTagName("value"),u=0;u<o.length;u++)n[o[u].childNodes[0].nodeValue]=s[u].childNodes[0].nodeValue;return n.hasOwnProperty("Content")&&(n["Content-Type"]=n.Content,delete n.Content),n.hasOwnProperty("Content-Type")||(n["Content-Type"]="text/xml; charset=utf-8"),n},getLicenseRequestFromMessage:function(e){var t=null,n=new DOMParser,r=new("utf-16"===l?Uint16Array:Uint8Array)(e);f();var i=String.fromCharCode.apply(null,r),a=n.parseFromString(i,"application/xml");if(!a.getElementsByTagName("PlayReadyKeyMessage")[0])return e;var o=a.getElementsByTagName("Challenge")[0].childNodes[0].nodeValue;return o&&(t=d.decode(o)),t},getLicenseServerURLFromInitData:function(e){if(e)for(var t=new DataView(e),n=t.getUint16(4,!0),r=6,i=new DOMParser,a=0;a<n;a++){var o=t.getUint16(r,!0);r+=2;var s=t.getUint16(r,!0);if(r+=2,1===o){var u=e.slice(r,r+s),l=String.fromCharCode.apply(null,new Uint16Array(u)),d=i.parseFromString(l,"application/xml");if(d.getElementsByTagName("LA_URL")[0]){var f=d.getElementsByTagName("LA_URL")[0].childNodes[0].nodeValue;if(f)return f}if(d.getElementsByTagName("LUI_URL")[0]){var c=d.getElementsByTagName("LUI_URL")[0].childNodes[0].nodeValue;if(c)return c}}else r+=s;}return null},getCDMData:function(){var e=void 0,t=void 0,n=void 0,r=void 0;if(f(),s&&s.cdmData){for(e=[],r=0;r<s.cdmData.length;++r)e.push(s.cdmData.charCodeAt(r)),e.push(0);for(e=String.fromCharCode.apply(null,e),e=d.encode(e),t='<PlayReadyCDMData type="LicenseAcquisition"><LicenseAcquisition version="1.0" Proactive="false"><CustomData encoding="base64encoded">%CUSTOMDATA%</CustomData></LicenseAcquisition></PlayReadyCDMData>'.replace("%CUSTOMDATA%",e),n=[],r=0;r<t.length;++r)n.push(t.charCodeAt(r)),n.push(0);return new Uint8Array(n).buffer}return null},getSessionId:function(e){return s&&s.sessionId?s.sessionId:e&&e.sessionId?e.sessionId:null},setPlayReadyMessageFormat:function(e){if("utf-8"!==e&&"utf-16"!==e)throw new Error('Specified message format is not one of "utf-8" or "utf-16"');l=e;},init:function(e){e&&(s=e);}}}u.__dashjs_factory_name="KeySystemPlayReady",n.default=dashjs.FactoryMaker.getSingletonFactory(u),t.exports=n.default;},{110:110,160:160}],167:[function(e,t,n){function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(n,"__esModule",{value:!0});var l=r(e(179)),d=r(e(177)),i=r(e(160)),a=r(e(110)),o="1077efec-c0b2-4d02-ace3-3c1e52e2fb4b",s=a.default.CLEARKEY_KEYSTEM_STRING;function u(e){var t=void 0,n=e.BASE64,u=e.debug.getLogger(t);return t={uuid:o,schemeIdURI:"urn:uuid:1077efec-c0b2-4d02-ace3-3c1e52e2fb4b",systemString:s,getInitData:function(e){return i.default.parseInitDataFromContentProtection(e,n)},getRequestHeadersFromMessage:function(){return null},getLicenseRequestFromMessage:function(e){return new Uint8Array(e)},getLicenseServerURLFromInitData:function(){return null},getCDMData:function(){return null},getSessionId:function(){return null},getClearKeysFromProtectionData:function(e,t){var n=null;if(e){for(var r=JSON.parse(String.fromCharCode.apply(null,new Uint8Array(t))),i=[],a=0;a<r.kids.length;a++){var o=r.kids[a],s=e.clearkeys&&e.clearkeys.hasOwnProperty(o)?e.clearkeys[o]:null;if(!s)throw new Error("DRM: ClearKey keyID ("+o+") is not known!");i.push(new l.default(o,s));}n=new d.default(i),u.warn("ClearKey schemeIdURI is using W3C Common PSSH systemID (1077efec-c0b2-4d02-ace3-3c1e52e2fb4b) in Content Protection. See DASH-IF IOP v4.1 section 7.6.2.4");}return n}}}u.__dashjs_factory_name="KeySystemW3CClearKey",n.default=dashjs.FactoryMaker.getSingletonFactory(u),t.exports=n.default;},{110:110,160:160,177:177,179:179}],168:[function(e,t,n){function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(n,"__esModule",{value:!0});var i=r(e(160)),a=r(e(110)),o="edef8ba9-79d6-4ace-a3c8-27dcd51d21ed",s=a.default.WIDEVINE_KEYSTEM_STRING;function u(e){var t=null,n=(e=e||{}).BASE64;return {uuid:o,schemeIdURI:"urn:uuid:edef8ba9-79d6-4ace-a3c8-27dcd51d21ed",systemString:s,init:function(e){e&&(t=e);},getInitData:function(e){return i.default.parseInitDataFromContentProtection(e,n)},getRequestHeadersFromMessage:function(){return null},getLicenseRequestFromMessage:function(e){return new Uint8Array(e)},getLicenseServerURLFromInitData:function(){return null},getCDMData:function(){return null},getSessionId:function(e){return t&&t.sessionId?t.sessionId:e&&e.sessionId?e.sessionId:null}}}u.__dashjs_factory_name="KeySystemWidevine",n.default=dashjs.FactoryMaker.getSingletonFactory(u),t.exports=n.default;},{110:110,160:160}],169:[function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0});var r=function(e,t,n){for(var r=!0;r;){var i=e,a=t,o=n,r=!1;null===i&&(i=Function.prototype);var s=Object.getOwnPropertyDescriptor(i,a);if(void 0!==s){if("value"in s)return s.value;var u=s.get;if(void 0===u)return;return u.call(o)}var l=Object.getPrototypeOf(i);if(null===l)return;e=l,t=a,n=o,r=!0,s=l=void 0;}};var i,a=e(52);function o(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),r(Object.getPrototypeOf(o.prototype),"constructor",this).call(this),this.MEDIA_KEYERR_CODE=100,this.MEDIA_KEYERR_UNKNOWN_CODE=101,this.MEDIA_KEYERR_CLIENT_CODE=102,this.MEDIA_KEYERR_SERVICE_CODE=103,this.MEDIA_KEYERR_OUTPUT_CODE=104,this.MEDIA_KEYERR_HARDWARECHANGE_CODE=105,this.MEDIA_KEYERR_DOMAIN_CODE=106,this.MEDIA_KEY_MESSAGE_ERROR_CODE=107,this.MEDIA_KEY_MESSAGE_NO_CHALLENGE_ERROR_CODE=108,this.SERVER_CERTIFICATE_UPDATED_ERROR_CODE=109,this.KEY_STATUS_CHANGED_EXPIRED_ERROR_CODE=110,this.MEDIA_KEY_MESSAGE_NO_LICENSE_SERVER_URL_ERROR_CODE=111,this.KEY_SYSTEM_ACCESS_DENIED_ERROR_CODE=112,this.KEY_SESSION_CREATED_ERROR_CODE=113,this.MEDIA_KEY_MESSAGE_LICENSER_ERROR_CODE=114,this.MEDIA_KEYERR_UNKNOWN_MESSAGE="An unspecified error occurred. This value is used for errors that don't match any of the other codes.",this.MEDIA_KEYERR_CLIENT_MESSAGE="The Key System could not be installed or updated.",this.MEDIA_KEYERR_SERVICE_MESSAGE="The message passed into update indicated an error from the license service.",this.MEDIA_KEYERR_OUTPUT_MESSAGE="There is no available output device with the required characteristics for the content protection system.",this.MEDIA_KEYERR_HARDWARECHANGE_MESSAGE="A hardware configuration change caused a content protection error.",this.MEDIA_KEYERR_DOMAIN_MESSAGE="An error occurred in a multi-device domain licensing configuration. The most common error is a failure to join the domain.",this.MEDIA_KEY_MESSAGE_ERROR_MESSAGE="Multiple key sessions were creates with a user-agent that does not support sessionIDs!! Unpredictable behavior ahead!",this.MEDIA_KEY_MESSAGE_NO_CHALLENGE_ERROR_MESSAGE="DRM: Empty key message from CDM",this.SERVER_CERTIFICATE_UPDATED_ERROR_MESSAGE="Error updating server certificate -- ",this.KEY_STATUS_CHANGED_EXPIRED_ERROR_MESSAGE="DRM: KeyStatusChange error! -- License has expired",this.MEDIA_KEY_MESSAGE_NO_LICENSE_SERVER_URL_ERROR_MESSAGE="DRM: No license server URL specified!",this.KEY_SYSTEM_ACCESS_DENIED_ERROR_MESSAGE="DRM: KeySystem Access Denied! -- ",this.KEY_SESSION_CREATED_ERROR_MESSAGE="DRM: unable to create session! --",this.MEDIA_KEY_MESSAGE_LICENSER_ERROR_MESSAGE="DRM: licenser error! --";}var s=new(function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t);}(o,((i=a)&&i.__esModule?i:{default:i}).default),o);n.default=s,t.exports=n.default;},{52:52}],170:[function(e,t,n){function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(n,"__esModule",{value:!0});var y=r(e(164)),T=r(e(183)),S=r(e(225)),A=r(e(178)),I=r(e(181)),R=r(e(180)),b=r(e(169));function i(e){e=e||{};var t=this.context,h=e.eventBus,p=e.events,n=e.debug,o=e.api,s=e.errHandler,r=void 0,u=void 0,g=void 0,i=void 0,_=void 0,l=void 0,d=void 0,f=void 0,a=void 0;function c(){g&&v();for(var e=0;e<d.length;e++)E(d[e]);h.trigger(p.TEARDOWN_COMPLETE);}function E(t){try{g[o.cancelKeyRequest](i.systemString,t.sessionID);}catch(e){h.trigger(p.KEY_SESSION_CLOSED,{data:null,error:"Error closing session ("+t.sessionID+") "+e.message});}}function m(e,t){if(t&&e){for(var n=e.length,r=0;r<n;r++)if(e[r].sessionID==t)return e[r];return null}return null}function v(){g.removeEventListener(o.keyerror,a),g.removeEventListener(o.needkey,a),g.removeEventListener(o.keymessage,a),g.removeEventListener(o.keyadded,a);}return r={getAllInitData:function(){for(var e=[],t=0;t<l.length;t++)e.push(l[t].initData);for(t=0;t<d.length;t++)e.push(d[t].initData);return e},requestKeySystemAccess:function(e){for(var t=(t=g)||document.createElement("video"),n=!1,r=0;r<e.length;r++)for(var i=e[r].ks.systemString,a=e[r].configs,o=null,s=null,u=0;u<a.length;u++){var l=a[u].videoCapabilities;if(l&&0!==l.length){s=[];for(var d=0;d<l.length;d++)""!==t.canPlayType(l[d].contentType,i)&&s.push(l[d]);}if(s&&(!s||0!==s.length)){n=!0;var f=new I.default(o,s),c=_.getKeySystemBySystemString(i);h.trigger(p.KEY_SYSTEM_ACCESS_COMPLETE,{data:new R.default(c,f)});break}}n||h.trigger(p.KEY_SYSTEM_ACCESS_COMPLETE,{error:"Key system access denied! -- No valid audio/video content configurations detected!"});},getKeySystem:function(){return i},selectKeySystem:function(e){i=e.keySystem,h.trigger(p.INTERNAL_KEY_SYSTEM_SELECTED);},setMediaElement:function(e){if(g!==e){if(g){v();for(var t=0;t<d.length;t++)E(d[t]);d=[];}(g=e)&&(g.addEventListener(o.keyerror,a),g.addEventListener(o.needkey,a),g.addEventListener(o.keymessage,a),g.addEventListener(o.keyadded,a),h.trigger(p.VIDEO_ELEMENT_SELECTED));}},createKeySession:function(e){if(!i)throw new Error("Can not create sessions until you have selected a key system");if(f||0===d.length){var t={sessionID:null,initData:e,getSessionID:function(){return this.sessionID},getExpirationTime:function(){return NaN},getSessionType:function(){return "temporary"}};return l.push(t),g[o.generateKeyRequest](i.systemString,new Uint8Array(e)),t}throw new Error("Multiple sessions not allowed!")},updateKeySession:function(e,t){var n=e.sessionID;if(_.isClearKey(i))for(var r=0;r<t.keyPairs.length;r++)g[o.addKey](i.systemString,t.keyPairs[r].key,t.keyPairs[r].keyID,n);else g[o.addKey](i.systemString,new Uint8Array(t),new Uint8Array(e.initData),n);},closeKeySession:E,setServerCertificate:function(){},loadKeySession:function(){},removeKeySession:function(){},stop:c,reset:c},u=n.getLogger(r),l=[],d=[],_=(i=g=null,y.default)(t).getInstance(),a={handleEvent:function(e){var t,n=null;switch(e.type){case o.needkey:var r=ArrayBuffer.isView(e.initData)?e.initData.buffer:e.initData;h.trigger(p.NEED_KEY,{key:new T.default(r,"cenc")});break;case o.keyerror:if(n=(n=m(d,e.sessionId))||m(l,e.sessionId)){var i=b.default.MEDIA_KEYERR_CODE,a="";switch(e.errorCode.code){case 1:i=b.default.MEDIA_KEYERR_UNKNOWN_CODE,a+="MEDIA_KEYERR_UNKNOWN - "+b.default.MEDIA_KEYERR_UNKNOWN_MESSAGE;break;case 2:i=b.default.MEDIA_KEYERR_CLIENT_CODE,a+="MEDIA_KEYERR_CLIENT - "+b.default.MEDIA_KEYERR_CLIENT_MESSAGE;break;case 3:i=b.default.MEDIA_KEYERR_SERVICE_CODE,a+="MEDIA_KEYERR_SERVICE - "+b.default.MEDIA_KEYERR_SERVICE_MESSAGE;break;case 4:i=b.default.MEDIA_KEYERR_OUTPUT_CODE,a+="MEDIA_KEYERR_OUTPUT - "+b.default.MEDIA_KEYERR_OUTPUT_MESSAGE;break;case 5:i=b.default.MEDIA_KEYERR_HARDWARECHANGE_CODE,a+="MEDIA_KEYERR_HARDWARECHANGE - "+b.default.MEDIA_KEYERR_HARDWARECHANGE_MESSAGE;break;case 6:i=b.default.MEDIA_KEYERR_DOMAIN_CODE,a+="MEDIA_KEYERR_DOMAIN - "+b.default.MEDIA_KEYERR_DOMAIN_MESSAGE;}a+="  System Code = "+e.systemCode,h.trigger(p.KEY_ERROR,{data:new S.default(i,a,n)});}else u.error("No session token found for key error");break;case o.keyadded:(n=(n=m(d,e.sessionId))||m(l,e.sessionId))?(u.debug("DRM: Key added."),h.trigger(p.KEY_ADDED,{data:n})):u.debug("No session token found for key added");break;case o.keymessage:(f=null!==e.sessionId&&void 0!==e.sessionId)?!(n=m(d,e.sessionId))&&0<l.length&&(n=l.shift(),d.push(n),n.sessionID=e.sessionId,h.trigger(p.KEY_SESSION_CREATED,{data:n})):0<l.length&&(n=l.shift(),d.push(n),0!==l.length&&s.error(new S.default(b.default.MEDIA_KEY_MESSAGE_ERROR_CODE,b.default.MEDIA_KEY_MESSAGE_ERROR_MESSAGE))),n?(t=ArrayBuffer.isView(e.message)?e.message.buffer:e.message,n.keyMessage=t,h.trigger(p.INTERNAL_KEY_MESSAGE,{data:new A.default(n,t,e.defaultURL)})):u.warn("No session token found for key message");}}},r}i.__dashjs_factory_name="ProtectionModel_01b",n.default=dashjs.FactoryMaker.getClassFactory(i),t.exports=n.default;},{164:164,169:169,178:178,180:180,181:181,183:183,225:225}],171:[function(e,t,n){function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(n,"__esModule",{value:!0});var E=r(e(164)),m=r(e(183)),v=r(e(169)),y=r(e(225)),T=r(e(178)),S=r(e(180)),A=r(e(110));function i(e){e=e||{};var t=this.context,o=e.eventBus,s=e.events,n=e.debug,r=void 0,u=void 0,l=void 0,i=void 0,d=void 0,f=void 0,a=void 0,c=void 0;function h(e){var t=e.session;return t.removeEventListener("keystatuseschange",e),t.removeEventListener("message",e),t.close()}function p(e){for(var t=0;t<f.length;t++)if(f[t]===e){f.splice(t,1);break}}function g(e){var t=void 0,n=void 0;return e&&0<e.length&&(e[0]&&("string"==typeof e[0]?t=e[0]:n=e[0]),e[1]&&("string"==typeof e[1]?t=e[1]:n=e[1])),{status:t,keyId:n}}function _(t,e,n,r){var i={session:t,initData:e,sessionId:r,handleEvent:function(e){switch(e.type){case"keystatuseschange":o.trigger(s.KEY_STATUSES_CHANGED,{data:this}),e.target.keyStatuses.forEach(function(){var e=g(arguments);switch(e.status){case"expired":o.trigger(s.INTERNAL_KEY_STATUS_CHANGED,{error:new y.default(v.default.KEY_STATUS_CHANGED_EXPIRED_ERROR_CODE,v.default.KEY_STATUS_CHANGED_EXPIRED_ERROR_MESSAGE)});break;default:o.trigger(s.INTERNAL_KEY_STATUS_CHANGED,e);}});break;case"message":var t=ArrayBuffer.isView(e.message)?e.message.buffer:e.message;o.trigger(s.INTERNAL_KEY_MESSAGE,{data:new T.default(this,t,void 0,e.messageType)});}},getSessionID:function(){return t.sessionId},getExpirationTime:function(){return t.expiration},getKeyStatuses:function(){return t.keyStatuses},getUsable:function(){var e=!1;return t.keyStatuses.forEach(function(){"usable"===g(arguments).status&&(e=!0);}),e},getSessionType:function(){return n}};return t.addEventListener("keystatuseschange",i),t.addEventListener("message",i),t.closed.then(function(){p(i),u.debug("DRM: Session closed.  SessionID = "+i.getSessionID()),o.trigger(s.KEY_SESSION_CLOSED,{data:i.getSessionID()});}),f.push(i),i}return r={getAllInitData:function(){for(var e=[],t=0;t<f.length;t++)f[t].initData&&e.push(f[t].initData);return e},requestKeySystemAccess:function(e){!function i(a,e){if(void 0===navigator.requestMediaKeySystemAccess||"function"!=typeof navigator.requestMediaKeySystemAccess)return void o.trigger(s.KEY_SYSTEM_ACCESS_COMPLETE,{error:"Insecure origins are not allowed"});!function(t){var r=a[t].ks,e=a[t].configs,n=r.systemString;n===A.default.PLAYREADY_KEYSTEM_STRING&&"required"===e[0].persistentState&&(n+=".recommendation"),navigator.requestMediaKeySystemAccess(n,e).then(function(e){var t="function"==typeof e.getConfiguration?e.getConfiguration():null,n=new S.default(r,t);n.mksa=e,o.trigger(s.KEY_SYSTEM_ACCESS_COMPLETE,{data:n});}).catch(function(e){++t<a.length?i(a,t):o.trigger(s.KEY_SYSTEM_ACCESS_COMPLETE,{error:"Key system access denied! "+e.message});});}(e);}(e,0);},getKeySystem:function(){return l},selectKeySystem:function(t){t.mksa.createMediaKeys().then(function(e){l=t.keySystem,d=e,i?i.setMediaKeys(d).then(function(){o.trigger(s.INTERNAL_KEY_SYSTEM_SELECTED);}):o.trigger(s.INTERNAL_KEY_SYSTEM_SELECTED);}).catch(function(){o.trigger(s.INTERNAL_KEY_SYSTEM_SELECTED,{error:"Error selecting keys system ("+t.keySystem.systemString+")! Could not create MediaKeys -- TODO"});});},setMediaElement:function(e){i!==e&&(i&&(i.removeEventListener("encrypted",a),i.setMediaKeys&&i.setMediaKeys(null)),(i=e)&&(i.addEventListener("encrypted",a),i.setMediaKeys&&d&&i.setMediaKeys(d)));},setServerCertificate:function(e){if(!l||!d)throw new Error("Can not set server certificate until you have selected a key system");d.setServerCertificate(e).then(function(){u.info("DRM: License server certificate successfully updated."),o.trigger(s.SERVER_CERTIFICATE_UPDATED);}).catch(function(e){o.trigger(s.SERVER_CERTIFICATE_UPDATED,{error:new y.default(v.default.SERVER_CERTIFICATE_UPDATED_ERROR_CODE,v.default.SERVER_CERTIFICATE_UPDATED_ERROR_MESSAGE+e.name)});});},createKeySession:function(e,t,n){if(!l||!d)throw new Error("Can not create sessions until you have selected a key system");var r=d.createSession(n),i=_(r,e,n),a=this.getKeySystem().systemString===A.default.CLEARKEY_KEYSTEM_STRING&&t&&t.clearkeys?"keyids":"cenc";r.generateRequest(a,e).then(function(){u.debug("DRM: Session created.  SessionID = "+i.getSessionID()),o.trigger(s.KEY_SESSION_CREATED,{data:i});}).catch(function(e){p(i),o.trigger(s.KEY_SESSION_CREATED,{data:null,error:new y.default(v.default.KEY_SESSION_CREATED_ERROR_CODE,v.default.KEY_SESSION_CREATED_ERROR_MESSAGE+"Error generating key request -- "+e.name)});});},updateKeySession:function(t,e){var n=t.session;c.isClearKey(l)&&(e=e.toJWK()),n.update(e).catch(function(e){o.trigger(s.KEY_ERROR,{data:new y.default(v.default.MEDIA_KEYERR_CODE,"Error sending update() message! "+e.name,t)});});},loadKeySession:function(t,e,n){if(!l||!d)throw new Error("Can not load sessions until you have selected a key system");for(var r=0;r<f.length;r++)if(t===f[r].sessionId)return void u.warn("DRM: Ignoring session ID because we have already seen it!");var i=d.createSession(n),a=_(i,e,n,t);i.load(t).then(function(e){e?(u.debug("DRM: Session loaded.  SessionID = "+a.getSessionID()),o.trigger(s.KEY_SESSION_CREATED,{data:a})):(p(a),o.trigger(s.KEY_SESSION_CREATED,{data:null,error:new y.default(v.default.KEY_SESSION_CREATED_ERROR_CODE,v.default.KEY_SESSION_CREATED_ERROR_MESSAGE+"Could not load session! Invalid Session ID ("+t+")")}));}).catch(function(e){p(a),o.trigger(s.KEY_SESSION_CREATED,{data:null,error:new y.default(v.default.KEY_SESSION_CREATED_ERROR_CODE,v.default.KEY_SESSION_CREATED_ERROR_MESSAGE+"Could not load session ("+t+")! "+e.name)});});},removeKeySession:function(t){t.session.remove().then(function(){u.debug("DRM: Session removed.  SessionID = "+t.getSessionID()),o.trigger(s.KEY_SESSION_REMOVED,{data:t.getSessionID()});},function(e){o.trigger(s.KEY_SESSION_REMOVED,{data:null,error:"Error removing session ("+t.getSessionID()+"). "+e.name});});},closeKeySession:function(t){h(t).catch(function(e){p(t),o.trigger(s.KEY_SESSION_CLOSED,{data:null,error:"Error closing session ("+t.getSessionID()+") "+e.name});});},stop:function(){for(var e=void 0,t=0;t<f.length;t++)(e=f[t]).getUsable()||h(e).catch(function(){p(e);});},reset:function(){var n=f.length,r=void 0;0!==n?function(){for(var t=function(e){p(e),0===f.length&&(i?(i.removeEventListener("encrypted",a),i.setMediaKeys(null).then(function(){o.trigger(s.TEARDOWN_COMPLETE);})):o.trigger(s.TEARDOWN_COMPLETE));},e=0;e<n;e++)!function(e){r.session.closed.then(function(){t(e);}),h(r).catch(function(){t(e);});}(r=f[e]);}():o.trigger(s.TEARDOWN_COMPLETE);}},u=n.getLogger(r),f=[],c=(d=i=l=null,E.default)(t).getInstance(),a={handleEvent:function(e){switch(e.type){case"encrypted":var t;e.initData&&(t=ArrayBuffer.isView(e.initData)?e.initData.buffer:e.initData,o.trigger(s.NEED_KEY,{key:new m.default(t,e.initDataType)}));}}},r}i.__dashjs_factory_name="ProtectionModel_21Jan2015",n.default=dashjs.FactoryMaker.getClassFactory(i),t.exports=n.default;},{110:110,164:164,169:169,178:178,180:180,183:183,225:225}],172:[function(e,t,n){function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(n,"__esModule",{value:!0});var m=r(e(164)),v=r(e(183)),y=r(e(225)),T=r(e(169)),S=r(e(178)),A=r(e(181)),I=r(e(180));function i(e){e=e||{};var t=this.context,p=e.eventBus,g=e.events,n=e.debug,_=e.api,r=void 0,u=void 0,i=void 0,l=void 0,d=void 0,f=void 0,c=void 0,a=void 0,E=void 0;function o(){try{for(var e=0;e<c.length;e++)s(c[e]);i&&i.removeEventListener(_.needkey,a),p.trigger(g.TEARDOWN_COMPLETE);}catch(e){p.trigger(g.TEARDOWN_COMPLETE,{error:"Error tearing down key sessions and MediaKeys! -- "+e.message});}}function s(e){var t=e.session;t.removeEventListener(_.error,e),t.removeEventListener(_.message,e),t.removeEventListener(_.ready,e),t.removeEventListener(_.close,e);for(var n=0;n<c.length;n++)if(c[n]===e){c.splice(n,1);break}t[_.release]();}function h(){function e(){i.removeEventListener("loadedmetadata",t),i[_.setMediaKeys](d),p.trigger(g.VIDEO_ELEMENT_SELECTED);}var t=null;1<=i.readyState?e():(t=e.bind(this),i.addEventListener("loadedmetadata",t));}return r={getAllInitData:function(){for(var e=[],t=0;t<c.length;t++)e.push(c[t].initData);return e},requestKeySystemAccess:function(e){for(var t=!1,n=0;n<e.length;n++)for(var r=e[n].ks.systemString,i=e[n].configs,a=null,o=null,s=0;s<i.length;s++){var u=i[s].audioCapabilities,l=i[s].videoCapabilities;if(u&&0!==u.length){a=[];for(var d=0;d<u.length;d++)window[_.MediaKeys].isTypeSupported(r,u[d].contentType)&&a.push(u[d]);}if(l&&0!==l.length){o=[];for(var f=0;f<l.length;f++)window[_.MediaKeys].isTypeSupported(r,l[f].contentType)&&o.push(l[f]);}if(!(!a&&!o||a&&0===a.length||o&&0===o.length)){t=!0;var c=new A.default(a,o),h=E.getKeySystemBySystemString(r);p.trigger(g.KEY_SYSTEM_ACCESS_COMPLETE,{data:new I.default(h,c)});break}}t||p.trigger(g.KEY_SYSTEM_ACCESS_COMPLETE,{error:"Key system access denied! -- No valid audio/video content configurations detected!"});},getKeySystem:function(){return l},selectKeySystem:function(e){try{d=e.mediaKeys=new window[_.MediaKeys](e.keySystem.systemString),l=e.keySystem,f=e,i&&h(),p.trigger(g.INTERNAL_KEY_SYSTEM_SELECTED);}catch(e){p.trigger(g.INTERNAL_KEY_SYSTEM_SELECTED,{error:"Error selecting keys system ("+l.systemString+")! Could not create MediaKeys -- TODO"});}},setMediaElement:function(e){i!==e&&(i&&i.removeEventListener(_.needkey,a),(i=e)&&(i.addEventListener(_.needkey,a),d&&h()));},createKeySession:function(e,t,n,r){if(!l||!d||!f)throw new Error("Can not create sessions until you have selected a key system");var i=null;if(f.ksConfiguration.videoCapabilities&&0<f.ksConfiguration.videoCapabilities.length&&(i=f.ksConfiguration.videoCapabilities[0]),null===i&&f.ksConfiguration.audioCapabilities&&0<f.ksConfiguration.audioCapabilities.length&&(i=f.ksConfiguration.audioCapabilities[0]),null===i)throw new Error("Can not create sessions for unknown content types.");var a=i.contentType,o=d.createSession(a,new Uint8Array(e),r?new Uint8Array(r):null),s={session:o,initData:e,getSessionID:function(){return this.session.sessionId},getExpirationTime:function(){return NaN},getSessionType:function(){return "temporary"},handleEvent:function(e){switch(e.type){case _.error:p.trigger(g.KEY_ERROR,{data:new y.default(T.default.MEDIA_KEYERR_CODE,"KeyError",this)});break;case _.message:var t=ArrayBuffer.isView(e.message)?e.message.buffer:e.message;p.trigger(g.INTERNAL_KEY_MESSAGE,{data:new S.default(this,t,e.destinationURL)});break;case _.ready:u.debug("DRM: Key added."),p.trigger(g.KEY_ADDED);break;case _.close:u.debug("DRM: Session closed.  SessionID = "+this.getSessionID()),p.trigger(g.KEY_SESSION_CLOSED,{data:this.getSessionID()});}}};o.addEventListener(_.error,s),o.addEventListener(_.message,s),o.addEventListener(_.ready,s),o.addEventListener(_.close,s),c.push(s),u.debug("DRM: Session created.  SessionID = "+s.getSessionID()),p.trigger(g.KEY_SESSION_CREATED,{data:s});},updateKeySession:function(e,t){var n=e.session;E.isClearKey(l)?n.update(new Uint8Array(t.toJWK())):n.update(new Uint8Array(t));},closeKeySession:s,setServerCertificate:function(){},loadKeySession:function(){},removeKeySession:function(){},stop:o,reset:o},u=n.getLogger(r),c=[],E=(f=d=l=i=null,m.default)(t).getInstance(),a={handleEvent:function(e){switch(e.type){case _.needkey:var t;e.initData&&(t=ArrayBuffer.isView(e.initData)?e.initData.buffer:e.initData,p.trigger(g.NEED_KEY,{key:new v.default(t,"cenc")}));}}},r}i.__dashjs_factory_name="ProtectionModel_3Feb2014",n.default=dashjs.FactoryMaker.getClassFactory(i),t.exports=n.default;},{164:164,169:169,178:178,180:180,181:181,183:183,225:225}],173:[function(e,t,n){function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(n,"__esModule",{value:!0});var o=r(e(179)),s=r(e(177));function i(){return {getServerURLFromMessage:function(e,t){var n=JSON.parse(String.fromCharCode.apply(null,new Uint8Array(t)));e+="/?";for(var r=0;r<n.kids.length;r++)e+=n.kids[r]+"&";return e=e.substring(0,e.length-1)},getHTTPMethod:function(){return "GET"},getResponseType:function(){return "json"},getLicenseMessage:function(e){if(!e.hasOwnProperty("keys"))return null;for(var t=[],n=0;n<e.keys.length;n++){var r=e.keys[n],i=r.kid.replace(/=/g,""),a=r.k.replace(/=/g,"");t.push(new o.default(i,a));}return new s.default(t)},getErrorResponse:function(e){return String.fromCharCode.apply(null,new Uint8Array(e))}}}i.__dashjs_factory_name="ClearKey",n.default=dashjs.FactoryMaker.getSingletonFactory(i),t.exports=n.default;},{177:177,179:179}],174:[function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0});var r,i=e(110),a=(r=i)&&r.__esModule?r:{default:r};function o(e){var n=(e=e||{}).BASE64,r={};r[a.default.WIDEVINE_KEYSTEM_STRING]={responseType:"json",getLicenseMessage:function(e){return n.decodeArray(e.license)},getErrorResponse:function(e){return e}},r[a.default.PLAYREADY_KEYSTEM_STRING]={responseType:"arraybuffer",getLicenseMessage:function(e){return e},getErrorResponse:function(e){return String.fromCharCode.apply(null,new Uint8Array(e))}};return {getServerURLFromMessage:function(e){return e},getHTTPMethod:function(){return "POST"},getResponseType:function(e){return r[e].responseType},getLicenseMessage:function(e,t){return function(){if(!n||!n.hasOwnProperty("decodeArray"))throw new Error("Missing config parameter(s)")}(),r[t].getLicenseMessage(e)},getErrorResponse:function(e,t){return r[t].getErrorResponse(e)}}}o.__dashjs_factory_name="DRMToday",n.default=dashjs.FactoryMaker.getSingletonFactory(o),t.exports=n.default;},{110:110}],175:[function(e,t,n){function r(){var g="http://schemas.xmlsoap.org/soap/envelope/";function _(e){var t=String.fromCharCode.apply(null,new Uint8Array(e));return decodeURIComponent(escape(t))}return {getServerURLFromMessage:function(e){return e},getHTTPMethod:function(){return "POST"},getResponseType:function(){return "arraybuffer"},getLicenseMessage:function(e){return function(e){if(window.DOMParser){var t=_(e),n=(new window.DOMParser).parseFromString(t,"text/xml"),r=n?n.getElementsByTagNameNS(g,"Envelope")[0]:null,i=r?r.getElementsByTagNameNS(g,"Body")[0]:null;if(i?i.getElementsByTagNameNS(g,"Fault")[0]:null)return null}return e}.call(this,e)},getErrorResponse:function(e){return function(e){var t="",n="",r="",i=-1,a=-1;if(window.DOMParser){var o=_(e),s=(new window.DOMParser).parseFromString(o,"text/xml"),u=s?s.getElementsByTagNameNS(g,"Envelope")[0]:null,l=u?u.getElementsByTagNameNS(g,"Body")[0]:null,d=l?l.getElementsByTagNameNS(g,"Fault")[0]:null,f=d?d.getElementsByTagName("detail")[0]:null,c=f?f.getElementsByTagName("Exception")[0]:null,h=null;if(null===d)return o;t=(h=d.getElementsByTagName("faultstring")[0].firstChild)?h.nodeValue:null,null!==c&&(n=(h=c.getElementsByTagName("StatusCode")[0])?h.firstChild.nodeValue:null,i=(r=(h=c.getElementsByTagName("Message")[0])?h.firstChild.nodeValue:null)?r.lastIndexOf("[")+1:-1,a=r?r.indexOf("]"):-1,r=r?r.substring(i,a):"");}var p="code: "+n+", name: "+t;return r&&(p+=", message: "+r),p}.call(this,e)}}}Object.defineProperty(n,"__esModule",{value:!0}),r.__dashjs_factory_name="PlayReady",n.default=dashjs.FactoryMaker.getSingletonFactory(r),t.exports=n.default;},{}],176:[function(e,t,n){function r(){return {getServerURLFromMessage:function(e){return e},getHTTPMethod:function(){return "POST"},getResponseType:function(){return "arraybuffer"},getLicenseMessage:function(e){return e},getErrorResponse:function(e){return String.fromCharCode.apply(null,new Uint8Array(e))}}}Object.defineProperty(n,"__esModule",{value:!0}),r.__dashjs_factory_name="Widevine",n.default=dashjs.FactoryMaker.getSingletonFactory(r),t.exports=n.default;},{}],177:[function(e,t,n){function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r);}}Object.defineProperty(n,"__esModule",{value:!0});var i=(function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}(a,[{key:"toJWK",value:function(){for(var e=void 0,t=this.keyPairs.length,n={keys:[]},e=0;e<t;e++){var r={kty:"oct",alg:"A128KW",kid:this.keyPairs[e].keyID,k:this.keyPairs[e].key};n.keys.push(r);}this.type&&(n.type=this.type);var i=JSON.stringify(n),a=i.length,o=new ArrayBuffer(a),s=new Uint8Array(o);for(e=0;e<a;e++)s[e]=i.charCodeAt(e);return o}}]),a);function a(e,t){if(!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),t&&"persistent"!==t&&"temporary"!==t)throw new Error("Invalid ClearKey key set type!  Must be one of 'persistent' or 'temporary'");this.keyPairs=e,this.type=t;}n.default=i,t.exports=n.default;},{}],178:[function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0});n.default=function e(t,n,r,i){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.sessionToken=t,this.message=n,this.defaultURL=r,this.messageType=i||"license-request";},t.exports=n.default;},{}],179:[function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0});n.default=function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.keyID=t,this.key=n;},t.exports=n.default;},{}],180:[function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0});n.default=function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.keySystem=t,this.ksConfiguration=n;},t.exports=n.default;},{}],181:[function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0});n.default=function e(t,n,r,i,a){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.initDataTypes=["cenc"],t&&t.length&&(this.audioCapabilities=t),n&&n.length&&(this.videoCapabilities=n),this.distinctiveIdentifier=r,this.persistentState=i,this.sessionTypes=a;},t.exports=n.default;},{}],182:[function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0});n.default=function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.contentType=t,this.robustness=n;},t.exports=n.default;},{}],183:[function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0});n.default=function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.initData=t,this.initDataType=n;},t.exports=n.default;},{}],184:[function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0});var r,i=e(47),a=(r=i)&&r.__esModule?r:{default:r};function o(){var o=[],s=0,u=0;return {push:function(e,t){var n=t&&t.droppedVideoFrames?t.droppedVideoFrames:0,r=t&&t.totalVideoFrames?t.totalVideoFrames:0,i=n-s;s=n;var a=r-u;u=r,isNaN(e)||(o[e]?(o[e].droppedVideoFrames+=i,o[e].totalVideoFrames+=a):o[e]={droppedVideoFrames:i,totalVideoFrames:a});},getFrameHistory:function(){return o},reset:function(e){o=[],s=e.droppedVideoFrames,u=e.totalVideoFrames;}}}o.__dashjs_factory_name="DroppedFramesHistory";var s=a.default.getClassFactory(o);n.default=s,t.exports=n.default;},{47:47}],185:[function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0});var r,i=e(47),a=(r=i)&&r.__esModule?r:{default:r};function o(e){var t=(e=e||{}).abrController,n=e.switchHistory,r=e.droppedFramesHistory,i=e.currentRequest,a=e.useBufferOccupancyABR,o=e.streamProcessor?e.streamProcessor.getScheduleController():null,s=e.streamProcessor?e.streamProcessor.getRepresentationInfo():null;function u(){return s?s.mediaInfo:null}return {getMediaType:function(){var e=u();return e?e.type:null},getMediaInfo:u,getDroppedFramesHistory:function(){return r},getCurrentRequest:function(){return i},getSwitchHistory:function(){return n},getStreamInfo:function(){var e=u();return e?e.streamInfo:null},getScheduleController:function(){return o},getAbrController:function(){return t},getRepresentationInfo:function(){return s},useBufferOccupancyABR:function(){return a}}}o.__dashjs_factory_name="RulesContext",n.default=a.default.getClassFactory(o),t.exports=n.default;},{47:47}],186:[function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0});var r,i=e(47),a=(r=i)&&r.__esModule?r:{default:r},o={DEFAULT:.5,STRONG:1,WEAK:0};function s(e,t,n){var r;return {quality:void 0===e?-1:e,reason:void 0===t?null:t,priority:(r=n)!==o.DEFAULT&&r!==o.STRONG&&r!==o.WEAK?o.DEFAULT:r}}s.__dashjs_factory_name="SwitchRequest";var u=a.default.getClassFactory(s);u.NO_CHANGE=-1,u.PRIORITY=o,a.default.updateClassFactory(s.__dashjs_factory_name,u),n.default=u,t.exports=n.default;},{47:47}],187:[function(e,t,n){function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(n,"__esModule",{value:!0});var i=r(e(47)),u=r(e(186));function a(){var o=[],s=[];return {push:function(e){e.newValue===u.default.NO_CHANGE&&(e.newValue=e.oldValue),o[e.oldValue]||(o[e.oldValue]={noDrops:0,drops:0,dropSize:0});var t,n=e.newValue-e.oldValue,r=n<0?1:0,i=r?-n:0,a=r?0:1;o[e.oldValue].drops+=r,o[e.oldValue].dropSize+=i,o[e.oldValue].noDrops+=a,s.push({idx:e.oldValue,noDrop:a,drop:r,dropSize:i}),8<s.length&&(t=s.shift(),o[t.idx].drops-=t.drop,o[t.idx].dropSize-=t.dropSize,o[t.idx].noDrops-=t.noDrop);},getSwitchRequests:function(){return o},reset:function(){o=[],s=[];}}}a.__dashjs_factory_name="SwitchRequestHistory";var o=i.default.getClassFactory(a);n.default=o,t.exports=n.default;},{186:186,47:47}],188:[function(e,t,n){function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(n,"__esModule",{value:!0});var y=r(e(108)),i=r(e(47));function a(e){var s=3,u=4,l=4,d=1.3,f=1.3,c=(e=e||{}).settings,h=void 0,p=void 0,g=void 0,_=void 0,E=void 0;function m(e,t,n,r){var i=Math.pow(.5,n/r.fast);e.fastEstimate=(1-i)*t+i*e.fastEstimate;var a=Math.pow(.5,n/r.slow);e.slowEstimate=(1-a)*t+a*e.slowEstimate,e.totalWeight+=n;}function n(e,t,n){return c.get().streaming.abr.movingAverageMethod!==y.default.MOVING_AVERAGE_SLIDING_WINDOW?function(e,t){var n=e?E.throughputHalfLife:E.latencyHalfLife,r=e?g[t]:_[t];if(!r||r.totalWeight<=0)return NaN;var i=r.fastEstimate/(1-Math.pow(.5,r.totalWeight/n.fast)),a=r.slowEstimate/(1-Math.pow(.5,r.totalWeight/n.slow));return e?Math.min(i,a):Math.max(i,a)}(e,t):(a=function(e,t,n){var r=void 0,i=void 0,i=e?(r=h[t],n?s:u):(r=p[t],l);if(r){if(i>=r.length)i=r.length;else if(e)for(var a=1;a<i;++a){var o=r[r.length-a]/r[r.length-a-1];if((f<=o||o<=1/d)&&(i+=1)===r.length)break}}else i=0;return i}(r=e,i=t,n),o=(r?h:p)[i],0!==a&&o&&0!==o.length?(o=o.slice(-a)).reduce(function(e,t){return e+t})/o.length:NaN);var r,i,a,o;}function r(e,t){return n(!0,e,t)}function v(e){h[e]=h[e]||[],p[e]=p[e]||[],g[e]=g[e]||{fastEstimate:0,slowEstimate:0,totalWeight:0},_[e]=_[e]||{fastEstimate:0,slowEstimate:0,totalWeight:0};}function t(){h={},p={},g={},_={};}var i={push:function(e,t,n){if(t.trace&&t.trace.length){var r,i,a,o=t.tresponse.getTime()-t.trequest.getTime()||1,s=t._tfinish.getTime()-t.tresponse.getTime()||1,u=t.trace.reduce(function(e,t){return e+t.b[0]},0),l=void 0,l=c.get().streaming.lowLatencyEnabled?t.trace.reduce(function(e,t){return e+t.d},0):n?s:o+s,d=Math.round(8*u/l);if(v(e),a=s,(i=e)===y.default.VIDEO?a<c.get().streaming.cacheLoadThresholds[y.default.VIDEO]:i===y.default.AUDIO&&a<c.get().streaming.cacheLoadThresholds[y.default.AUDIO]){if(0<h[e].length&&!h[e].hasCachedEntries)return;h[e].hasCachedEntries=!0;}else h[e]&&h[e].hasCachedEntries&&(delete h[r=e],delete p[r],delete g[r],delete _[r],v(r));h[e].push(d),20<h[e].length&&h[e].shift(),p[e].push(o),20<p[e].length&&p[e].shift(),m(g[e],d,.001*s,E.throughputHalfLife),m(_[e],o,1,E.latencyHalfLife);}},getAverageThroughput:r,getSafeAverageThroughput:function(e,t){var n=r(e,t);return isNaN(n)||(n*=c.get().streaming.abr.bandwidthSafetyFactor),n},getAverageLatency:function(e){return n(!1,e)},reset:t};return E={throughputHalfLife:{fast:3,slow:8},latencyHalfLife:{fast:1,slow:2}},t(),i}a.__dashjs_factory_name="ThroughputHistory",n.default=i.default.getClassFactory(a),t.exports=n.default;},{108:108,47:47}],189:[function(e,t,n){function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(n,"__esModule",{value:!0});var l=r(e(195)),d=r(e(193)),f=r(e(190)),c=r(e(192)),h=r(e(194)),p=r(e(191)),i=r(e(47)),g=r(e(186)),_="qualitySwitchRules",E="abandonFragmentRules";function a(e){e=e||{};var s=this.context,t=e.mediaPlayerModel,n=e.dashMetrics,r=e.settings,i=void 0,a=void 0;function o(e){return e.filter(function(e){return e.quality>g.default.NO_CHANGE})}function u(e){var t,n={},r=void 0,i=void 0,a=void 0,o=void 0;if(0!==e.length){for(n[g.default.PRIORITY.STRONG]=g.default.NO_CHANGE,n[g.default.PRIORITY.WEAK]=g.default.NO_CHANGE,n[g.default.PRIORITY.DEFAULT]=g.default.NO_CHANGE,r=0,t=e.length;r<t;r+=1)(i=e[r]).quality!==g.default.NO_CHANGE&&(n[i.priority]=n[i.priority]>g.default.NO_CHANGE?Math.min(n[i.priority],i.quality):i.quality);return n[g.default.PRIORITY.WEAK]!==g.default.NO_CHANGE&&(a=n[g.default.PRIORITY.WEAK]),n[g.default.PRIORITY.DEFAULT]!==g.default.NO_CHANGE&&(a=n[g.default.PRIORITY.DEFAULT]),n[g.default.PRIORITY.STRONG]!==g.default.NO_CHANGE&&(a=n[g.default.PRIORITY.STRONG]),a!==g.default.NO_CHANGE&&(o=a),(0, g.default)(s).create(o)}}return {initialize:function(){i=[],a=[],r.get().streaming.abr.useDefaultABRRules&&(i.push((0, p.default)(s).create({dashMetrics:n,mediaPlayerModel:t,settings:r})),i.push((0, l.default)(s).create({dashMetrics:n})),i.push((0, d.default)(s).create({dashMetrics:n})),i.push((0, h.default)(s).create()),i.push((0, c.default)(s).create()),a.push((0, f.default)(s).create({dashMetrics:n,mediaPlayerModel:t,settings:r}))),t.getABRCustomRules().forEach(function(e){e.type===_&&i.push(e.rule(s).create()),e.type===E&&a.push(e.rule(s).create());});},reset:function(){[i,a].forEach(function(e){e&&e.length&&e.forEach(function(e){return e.reset&&e.reset()});}),i=[],a=[];},getMaxQuality:function(t){return u(o(i.map(function(e){return e.getMaxIndex(t)})))||(0, g.default)(s).create()},shouldAbandonFragment:function(t){return u(o(a.map(function(e){return e.shouldAbandon(t)})))||(0, g.default)(s).create()}}}a.__dashjs_factory_name="ABRRulesCollection";var o=i.default.getClassFactory(a);o.QUALITY_SWITCH_RULES=_,o.ABANDON_FRAGMENT_RULES=E,i.default.updateSingletonFactory(a.__dashjs_factory_name,o),n.default=o,t.exports=n.default;},{186:186,190:190,191:191,192:192,193:193,194:194,195:195,47:47}],190:[function(e,t,n){function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(n,"__esModule",{value:!0});var R=r(e(186)),i=r(e(47)),a=r(e(45));function b(e){e=e||{};var E=this.context,m=e.mediaPlayerModel,v=e.dashMetrics,y=e.settings,t=void 0,T=void 0,S=void 0,A=void 0,I=void 0;function n(){S={},A={},I=[];}return t={shouldAbandon:function(e){var t=(0, R.default)(E).create(R.default.NO_CHANGE,{name:b.__dashjs_factory_name});if(!(e&&e.hasOwnProperty("getMediaInfo")&&e.hasOwnProperty("getMediaType")&&e.hasOwnProperty("getCurrentRequest")&&e.hasOwnProperty("getRepresentationInfo")&&e.hasOwnProperty("getAbrController")))return t;var n,r,i,a,o=e.getMediaInfo(),s=e.getMediaType(),u=e.getCurrentRequest();if(!isNaN(u.index)){if(i=s,a=u.index,S[i]=S[i]||{},S[i][a]=S[i][a]||{},m.getStableBufferTime()<v.getCurrentBufferLevel(s))return t;var l=S[s][u.index];if(null===l||null===u.firstByteDate||A.hasOwnProperty(l.id))return t;if(void 0===l.firstByteTime&&(I[s]=[],l.firstByteTime=u.firstByteDate.getTime(),l.segmentDuration=u.duration,l.bytesTotal=u.bytesTotal,l.id=u.index),l.bytesLoaded=u.bytesLoaded,l.elapsedTime=(new Date).getTime()-l.firstByteTime,0<l.bytesLoaded&&0<l.elapsedTime&&(n=s,r=Math.round(8*l.bytesLoaded/l.elapsedTime),I[n]=I[n]||[],I[n].push(r)),5<=I[s].length&&500<l.elapsedTime&&l.bytesLoaded<l.bytesTotal){var d,f,c,h,p,g,_=I[s].reduce(function(e,t){return e+t},0);if(l.measuredBandwidthInKbps=Math.round(_/I[s].length),l.estimatedTimeOfDownload=+(8*l.bytesTotal/l.measuredBandwidthInKbps/1e3).toFixed(2),l.estimatedTimeOfDownload<1.8*l.segmentDuration||0===e.getRepresentationInfo().quality)return t;A.hasOwnProperty(l.id)||(d=e.getAbrController(),f=l.bytesTotal-l.bytesLoaded,c=d.getBitrateList(o),h=d.getQualityForBitrate(o,l.measuredBandwidthInKbps*y.get().streaming.abr.bandwidthSafetyFactor),g=void 0!==(p=d.getMinAllowedIndexFor(s))?Math.max(p,h):h,l.bytesTotal*c[g].bitrate/c[d.getQualityFor(s)].bitrate<f&&(t.quality=g,t.reason.throughput=l.measuredBandwidthInKbps,t.reason.fragmentID=l.id,A[l.id]=l,T.debug("["+s+"] frag id",l.id," is asking to abandon and switch to quality to ",g," measured bandwidth was",l.measuredBandwidthInKbps),delete S[s][l.id]));}else l.bytesLoaded===l.bytesTotal&&delete S[s][l.id];}return t},reset:n},T=(0, a.default)(E).getInstance().getLogger(t),n(),t}b.__dashjs_factory_name="AbandonRequestsRule",n.default=i.default.getClassFactory(b),t.exports=n.default;},{186:186,45:45,47:47}],191:[function(e,t,n){function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(n,"__esModule",{value:!0});var p=r(e(109)),x=r(e(186)),i=r(e(47)),g=e(241),_=r(e(46)),E=r(e(54)),m=r(e(45));function a(e){e=e||{};var b=this.context,D=e.dashMetrics,o=e.mediaPlayerModel,t=(0, _.default)(b).getInstance(),n=void 0,M=void 0,N=void 0;function s(e,t,r){var n=r.reduce(function(e,t,n){return t>r[e]?n:e},0);if(0===n)return null;var i=Math.max(e,10+2*t.length),a=(r[n]-1)/(i/10-1);return {gp:a,Vp:10/a}}function C(e){var t={},n=e.getMediaInfo().bitrateList.map(function(e){return e.bandwidth}),r=(r=n.map(function(e){return Math.log(e)})).map(function(e){return e-r[0]+1}),i=o.getStableBufferTime(),a=s(i,n,r);return a?(t.state=1,t.bitrates=n,t.utilities=r,t.stableBufferTime=i,t.Vp=a.Vp,t.gp=a.gp,t.lastQuality=0,O(t)):t.state=0,t}function O(e){e.placeholderBuffer=0,e.mostAdvancedSegmentStart=NaN,e.lastSegmentWasReplacement=!1,e.lastSegmentStart=NaN,e.lastSegmentDurationS=NaN,e.lastSegmentRequestTimeMs=NaN,e.lastSegmentFinishTimeMs=NaN;}function w(e,t){var n,r,i,a=o.getStableBufferTime();e.stableBufferTime!==a&&((n=s(a,e.bitrates,e.utilities)).Vp===e.Vp&&n.gp===e.gp||(i=(r=D.getCurrentBufferLevel(t))+e.placeholderBuffer,i-=10,i*=n.Vp/e.Vp,i+=10,e.stableBufferTime=a,e.Vp=n.Vp,e.gp=n.gp,e.placeholderBuffer=Math.max(0,i-r)));}function P(e,t){return e.Vp*(e.utilities[t]+e.gp)}function L(e,t){for(var n,r,i,a=e.bitrates[t],o=e.utilities[t],s=0,u=t-1;0<=u;--u){e.utilities[u]<e.utilities[t]&&(n=e.bitrates[u],r=e.utilities[u],i=e.Vp*(e.gp+(a*r-n*o)/(a-n)),s=Math.max(s,i));}return s}function r(){for(var e in N)N.hasOwnProperty(e)&&2===N[e].state&&(N[e].placeholderBuffer=0);}function i(){for(var e in N){var t;!N.hasOwnProperty(e)||0!==(t=N[e]).state&&(t.state=1,O(t));}}function a(){}function u(e){var t,n;e&&e.chunk&&e.chunk.mediaInfo&&((t=N[e.chunk.mediaInfo.type])&&0!==t.state&&(n=e.chunk.start,isNaN(t.mostAdvancedSegmentStart)||n>t.mostAdvancedSegmentStart?(t.mostAdvancedSegmentStart=n,t.lastSegmentWasReplacement=!1):t.lastSegmentWasReplacement=!0,t.lastSegmentStart=n,t.lastSegmentDurationS=e.chunk.duration,t.lastQuality=e.chunk.quality,d(t,e.chunk.mediaInfo.type)));}function l(e){var t;e&&e.metric===p.default.HTTP_REQUEST&&e.value&&e.value.type===g.HTTPRequest.MEDIA_SEGMENT_TYPE&&e.value.trace&&e.value.trace.length&&((t=N[e.mediaType])&&0!==t.state&&(t.lastSegmentRequestTimeMs=e.value.trequest.getTime(),t.lastSegmentFinishTimeMs=e.value._tfinish.getTime(),d(t,e.mediaType)));}function d(e,t){var n,r,i;isNaN(e.lastSegmentStart)||isNaN(e.lastSegmentRequestTimeMs)||isNaN(e.placeholderBuffer)||(e.placeholderBuffer*=.99,isNaN(e.lastSegmentFinishTimeMs)||(n=D.getCurrentBufferLevel(t)+.001*(e.lastSegmentFinishTimeMs-e.lastSegmentRequestTimeMs),r=P(e,e.lastQuality),i=Math.max(0,r-n),e.placeholderBuffer=Math.min(i,e.placeholderBuffer)),e.lastSegmentWasReplacement&&!isNaN(e.lastSegmentDurationS)&&(e.placeholderBuffer+=e.lastSegmentDurationS),e.lastSegmentStart=NaN,e.lastSegmentRequestTimeMs=NaN);}function f(e){var t;!e||(t=N[e.mediaType])&&0!==t.state&&(t.abrQuality=e.newQuality);}function c(e){var t,n,r,i;!e||(t=N[e.mediaType])&&0!==t.state&&(n=D.getCurrentBufferLevel(e.mediaType),r=void 0,r=0<t.abrQuality?L(t,t.abrQuality):10,i=Math.max(0,r-n),t.placeholderBuffer=Math.min(t.placeholderBuffer,i));}function h(){N={};}return n={getMaxIndex:function(e){var t=(0, x.default)(b).create();if(!(e&&e.hasOwnProperty("getMediaInfo")&&e.hasOwnProperty("getMediaType")&&e.hasOwnProperty("getScheduleController")&&e.hasOwnProperty("getStreamInfo")&&e.hasOwnProperty("getAbrController")&&e.hasOwnProperty("useBufferOccupancyABR")))return t;var n=e.getMediaInfo(),r=e.getMediaType(),i=e.getScheduleController(),a=e.getStreamInfo(),o=e.getAbrController(),s=o.getThroughputHistory(),u=a?a.id:null,l=a&&a.manifestInfo&&a.manifestInfo.isDynamic,d=e.useBufferOccupancyABR();if(t.reason=t.reason||{},!d)return t;i.setTimeToLoadDelay(0);var f,c,h,p=(c=(f=e).getMediaType(),(h=N[c])?0!==h.state&&w(h,c):(h=C(f),N[c]=h),h);if(0===p.state)return t;var g,_,E,m,v=D.getCurrentBufferLevel(r),y=s.getAverageThroughput(r,l),T=s.getSafeAverageThroughput(r,l),S=s.getAverageLatency(r),A=void 0;if(t.reason.state=p.state,t.reason.throughput=y,t.reason.latency=S,isNaN(y))return t;switch(p.state){case 1:A=o.getQualityForBitrate(n,T,S),t.quality=A,t.reason.throughput=T,p.placeholderBuffer=Math.max(0,L(p,A)-v),p.lastQuality=A,!isNaN(p.lastSegmentDurationS)&&v>=p.lastSegmentDurationS&&(p.state=2);break;case 2:g=p,_=r,m=Date.now(),isNaN(g.lastSegmentFinishTimeMs)?isNaN(g.lastCallTimeMs)||(E=.001*(m-g.lastCallTimeMs),g.placeholderBuffer+=Math.max(0,E)):(E=.001*(m-g.lastSegmentFinishTimeMs),g.placeholderBuffer+=Math.max(0,E)),g.lastCallTimeMs=m,g.lastSegmentStart=NaN,g.lastSegmentRequestTimeMs=NaN,g.lastSegmentFinishTimeMs=NaN,w(g,_),A=function(e,t){for(var n=e.bitrates.length,r=NaN,i=NaN,a=0;a<n;++a){var o=(e.Vp*(e.utilities[a]+e.gp)-t)/e.bitrates[a];(isNaN(i)||i<=o)&&(i=o,r=a);}return r}(p,v+p.placeholderBuffer);var I=o.getQualityForBitrate(n,T,S);A>p.lastQuality&&I<A&&(A=Math.max(I,p.lastQuality));var R=Math.max(0,v+p.placeholderBuffer-P(p,A));R<=p.placeholderBuffer?(p.placeholderBuffer-=R,R=0):(R-=p.placeholderBuffer,p.placeholderBuffer=0,A<o.getTopQualityIndexFor(r,u)?i.setTimeToLoadDelay(1e3*R):R=0),t.quality=A,t.reason.throughput=y,t.reason.latency=S,t.reason.bufferLevel=v,t.reason.placeholderBuffer=p.placeholderBuffer,t.reason.delay=R,p.lastQuality=A;break;default:M.debug("BOLA ABR rule invoked in bad state."),t.quality=o.getQualityForBitrate(n,T,S),t.reason.state=p.state,t.reason.throughput=T,t.reason.latency=S,p.state=1,O(p);}return t},reset:function(){h(),t.off(E.default.BUFFER_EMPTY,r,n),t.off(E.default.PLAYBACK_SEEKING,i,n),t.off(E.default.PERIOD_SWITCH_STARTED,a,n),t.off(E.default.MEDIA_FRAGMENT_LOADED,u,n),t.off(E.default.METRIC_ADDED,l,n),t.off(E.default.QUALITY_CHANGE_REQUESTED,f,n),t.off(E.default.FRAGMENT_LOADING_ABANDONED,c,n);}},M=(0, m.default)(b).getInstance().getLogger(n),h(),t.on(E.default.BUFFER_EMPTY,r,n),t.on(E.default.PLAYBACK_SEEKING,i,n),t.on(E.default.PERIOD_SWITCH_STARTED,a,n),t.on(E.default.MEDIA_FRAGMENT_LOADED,u,n),t.on(E.default.METRIC_ADDED,l,n),t.on(E.default.QUALITY_CHANGE_REQUESTED,f,n),t.on(E.default.FRAGMENT_LOADING_ABANDONED,c,n),n}a.__dashjs_factory_name="BolaRule",n.default=i.default.getClassFactory(a),t.exports=n.default;},{109:109,186:186,241:241,45:45,46:46,47:47,54:54}],192:[function(e,t,n){function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(n,"__esModule",{value:!0});var i=r(e(47)),d=r(e(186)),a=r(e(45));function o(){var u=this.context,e=void 0,l=void 0;return e={getMaxIndex:function(e){var t=(0, d.default)(u).create();if(!e||!e.hasOwnProperty("getDroppedFramesHistory"))return t;var n=e.getDroppedFramesHistory();if(n){for(var r=n.getFrameHistory(),i=0,a=0,o=d.default.NO_CHANGE,s=1;s<r.length;s++)if(r[s]&&(i=r[s].droppedVideoFrames,375<(a=r[s].totalVideoFrames)&&.15<i/a)){o=s-1,l.debug("index: "+o+" Dropped Frames: "+i+" Total Frames: "+a);break}return (0, d.default)(u).create(o,{droppedFrames:i})}return t}},l=(0, a.default)(u).getInstance().getLogger(e),e}o.__dashjs_factory_name="DroppedFramesRule",n.default=i.default.getClassFactory(o),t.exports=n.default;},{186:186,45:45,47:47}],193:[function(e,t,n){function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(n,"__esModule",{value:!0});var s=r(e(46)),u=r(e(54)),i=r(e(47)),l=r(e(45)),E=r(e(186)),m=r(e(108)),v=r(e(109));function a(e){e=e||{};var c=.5,t=2,h=this.context,n=(0, s.default)(h).getInstance(),p=e.dashMetrics,r=void 0,g=void 0,_=void 0;function i(){(_={})[m.default.VIDEO]={ignoreCount:t},_[m.default.AUDIO]={ignoreCount:t};}function a(){i();}function o(e){isNaN(e.startTime)||e.mediaType!==m.default.AUDIO&&e.mediaType!==m.default.VIDEO||0<_[e.mediaType].ignoreCount&&_[e.mediaType].ignoreCount--;}return r={getMaxIndex:function(e){var t=(0, E.default)(h).create();if(!e||!e.hasOwnProperty("getMediaType"))return t;!function(){if(!p||!p.hasOwnProperty("getCurrentBufferLevel")||!p.hasOwnProperty("getCurrentBufferState"))throw new Error(m.default.MISSING_CONFIG_ERROR)}();var n,r,i,a,o,s,u,l=e.getMediaType(),d=p.getCurrentBufferState(l),f=e.getRepresentationInfo().fragmentDuration;return 0<_[l].ignoreCount||!f||(d&&d.state===v.default.BUFFER_EMPTY?(g.debug("["+l+"] Switch to index 0; buffer is empty."),t.quality=0,t.reason="InsufficientBufferRule: Buffer is empty"):(n=e.getMediaInfo(),i=(r=e.getAbrController()).getThroughputHistory(),a=p.getCurrentBufferLevel(l),o=i.getAverageThroughput(l),s=i.getAverageLatency(l),u=o*(a/f)*c,t.quality=r.getQualityForBitrate(n,u,s),t.reason="InsufficientBufferRule: being conservative to avoid immediate rebuffering")),t},reset:function(){i(),n.off(u.default.PLAYBACK_SEEKING,a,r),n.off(u.default.BYTES_APPENDED_END_FRAGMENT,o,r);}},g=(0, l.default)(h).getInstance().getLogger(r),i(),n.on(u.default.PLAYBACK_SEEKING,a,r),n.on(u.default.BYTES_APPENDED_END_FRAGMENT,o,r),r}a.__dashjs_factory_name="InsufficientBufferRule",n.default=i.default.getClassFactory(a),t.exports=n.default;},{108:108,109:109,186:186,45:45,46:46,47:47,54:54}],194:[function(e,t,n){function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(n,"__esModule",{value:!0});var i=r(e(47)),a=r(e(45)),d=r(e(186));function o(){var u=this.context,e=void 0,l=void 0;return e={getMaxIndex:function(e){for(var t=e?e.getSwitchHistory():null,n=t?t.getSwitchRequests():[],r=0,i=0,a=0,o=(0, d.default)(u).create(),s=0;s<n.length;s++)if(void 0!==n[s]&&(r+=n[s].drops,i+=n[s].noDrops,a+=n[s].dropSize,6<=r+i&&.075<r/i)){o.quality=0<s&&0<n[s].drops?s-1:s,o.reason={index:o.quality,drops:r,noDrops:i,dropSize:a},l.debug("Switch history rule index: "+o.quality+" samples: "+(r+i)+" drops: "+r);break}return o}},l=(0, a.default)(u).getInstance().getLogger(e),e}o.__dashjs_factory_name="SwitchHistoryRule",n.default=i.default.getClassFactory(o),t.exports=n.default;},{186:186,45:45,47:47}],195:[function(e,t,n){function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(n,"__esModule",{value:!0});var i=r(e(47)),a=r(e(45)),_=r(e(186)),E=r(e(108)),m=r(e(109));function o(e){e=e||{};var h=this.context,p=e.dashMetrics,t=void 0,g=void 0;return t={getMaxIndex:function(e){var t=(0, _.default)(h).create();if(!(e&&e.hasOwnProperty("getMediaInfo")&&e.hasOwnProperty("getMediaType")&&e.hasOwnProperty("useBufferOccupancyABR")&&e.hasOwnProperty("getAbrController")&&e.hasOwnProperty("getScheduleController")))return t;!function(){if(!p||!p.hasOwnProperty("getCurrentBufferState"))throw new Error(E.default.MISSING_CONFIG_ERROR)}();var n=e.getMediaInfo(),r=e.getMediaType(),i=p.getCurrentBufferState(r),a=e.getScheduleController(),o=e.getAbrController(),s=e.getStreamInfo(),u=s&&s.manifestInfo?s.manifestInfo.isDynamic:null,l=o.getThroughputHistory(),d=l.getSafeAverageThroughput(r,u),f=l.getAverageLatency(r),c=e.useBufferOccupancyABR();return isNaN(d)||!i||c||o.getAbandonmentStateFor(r)!==m.default.ABANDON_LOAD&&(i.state!==m.default.BUFFER_LOADED&&!u||(t.quality=o.getQualityForBitrate(n,d,f),a.setTimeToLoadDelay(0),g.debug("["+r+"] requesting switch to index: ",t.quality,"Average throughput",Math.round(d),"kbps"),t.reason={throughput:d,latency:f})),t},reset:function(){}},g=(0, a.default)(h).getInstance().getLogger(t),t}o.__dashjs_factory_name="ThroughputRule",n.default=i.default.getClassFactory(o),t.exports=n.default;},{108:108,109:109,186:186,45:45,47:47}],196:[function(e,t,n){function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(n,"__esModule",{value:!0});var c=r(e(108)),i=r(e(47)),h=r(e(109));function a(e){var s=(e=e||{}).dashMetrics,u=e.mediaPlayerModel,l=e.textController,d=e.abrController,f=e.settings;function r(e,t,n){var r,i,a,o=NaN;return e&&t?o=e===c.default.FRAGMENTED_TEXT?l.isTextEnabled()?isNaN(t.fragmentDuration)?(r=s.getCurrentSchedulingInfo(h.default.SCHEDULING_INFO))?r.duration:0:t.fragmentDuration:0:e===c.default.AUDIO&&n?(i=s.getCurrentBufferLevel(c.default.VIDEO),isNaN(t.fragmentDuration)?i:Math.max(i,t.fragmentDuration)):(a=t.mediaInfo.streamInfo,d.isPlayingAtTopQuality(a)?a.manifestInfo.duration>=f.get().streaming.longFormContentDurationThreshold?f.get().streaming.bufferTimeAtTopQualityLongForm:f.get().streaming.bufferTimeAtTopQuality:u.getStableBufferTime()):o}return {execute:function(e,t,n){return !e||!t||s.getCurrentBufferLevel(e)<r(e,t,n)},getBufferTarget:r}}a.__dashjs_factory_name="BufferLevelRule",n.default=i.default.getClassFactory(a),t.exports=n.default;},{108:108,109:109,47:47}],197:[function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0});var r,i=e(47),a=(r=i)&&r.__esModule?r:{default:r};function o(){var G=0;function r(e){return "red"===e?"rgb(255, 0, 0)":"green"===e?"rgb(0, 255, 0)":"blue"===e?"rgb(0, 0, 255)":"cyan"===e?"rgb(0, 255, 255)":"magenta"===e?"rgb(255, 0, 255)":"yellow"===e?"rgb(255, 255, 0)":"white"===e?"rgb(255, 255, 255)":"black"===e?"rgb(0, 0, 0)":e}function j(e,t){var n=e.videoHeight/15;return t?"font-size: "+n+"px; font-family: Menlo, Consolas, 'Cutive Mono', monospace; color: "+(t.foreground?r(t.foreground):"rgb(255, 255, 255)")+"; font-style: "+(t.italics?"italic":"normal")+"; text-decoration: "+(t.underline?"underline":"none")+"; white-space: pre; background-color: "+(t.background?r(t.background):"transparent")+";":"font-size: "+n+"px; font-family: Menlo, Consolas, 'Cutive Mono', monospace; justify-content: flex-start; text-align: left; color: rgb(255, 255, 255); font-style: normal; white-space: pre; line-height: normal; font-weight: normal; text-decoration: none; width: 100%; display: flex;"}return {createHTMLCaptionsFromScreen:function(e,t,n,r){for(var i=null,a=!1,o=-1,s={start:t,end:n,spans:[]},u="style_cea608_white_black",l={},d={},f=[],c=void 0,h=void 0,c=0;c<15;++c){var p=r.rows[c],g="",_=null;if(!1===p.isEmpty()){var E=function(e){for(var t="",n=0;n<e.length;++n){t+=e[n].uchar;}return t.length-t.replace(/^\s+/,"").length}(p.chars);null===i&&(i={x:E,y1:c,y2:c+1,p:[]}),E!==o&&a&&(i.p.push(s),s={start:t,end:n,spans:[]},i.y2=c,i.name="region_"+i.x+"_"+i.y1+"_"+i.y2,!1===l.hasOwnProperty(i.name)?(f.push(i),l[i.name]=i):l[i.name].p.contat(i.p),i={x:E,y1:c,y2:c+1,p:[]});for(var m=0;m<p.chars.length;++m){var v,y=p.chars[m],T=y.penState;null!==_&&T.equals(_)||(0<g.trim().length&&(s.spans.push({name:u,line:g,row:c}),g=""),v="style_cea608_"+T.foreground+"_"+T.background,T.underline&&(v+="_underline"),T.italics&&(v+="_italics"),d.hasOwnProperty(v)||(d[v]=JSON.parse(JSON.stringify(T))),_=T,u=v),g+=y.uchar;}0<g.trim().length&&s.spans.push({name:u,line:g,row:c}),a=!0,o=E;}else a=!1,o=-1,i&&(i.p.push(s),s={start:t,end:n,spans:[]},i.y2=c,i.name="region_"+i.x+"_"+i.y1+"_"+i.y2,!1===l.hasOwnProperty(i.name)?(f.push(i),l[i.name]=i):l[i.name].p.contat(i.p),i=null);}i&&(i.p.push(s),i.y2=c+1,i.name="region_"+i.x+"_"+i.y1+"_"+i.y2,!1===l.hasOwnProperty(i.name)?(f.push(i),l[i.name]=i):l[i.name].p.contat(i.p),i=null);var S,A=[];for(c=0;c<f.length;++c){var I=f[c],R="sub_cea608_"+G++,b=document.createElement("div");b.id=R;var D="left: "+3.125*(S=I).x+"%; top: "+6.66*S.y1+"%; width: "+(100-3.125*S.x)+"%; height: "+6.66*Math.max(S.y2-1-S.y1,1)+"%; align-items: flex-start; overflow: visible; -webkit-writing-mode: horizontal-tb;";b.style.cssText="position: absolute; margin: 0; display: flex; box-sizing: border-box; pointer-events: none;"+D;var M=document.createElement("div");M.className="paragraph bodyStyle",M.style.cssText=j(e);var N=document.createElement("div");N.className="cueUniWrapper",N.style.cssText="unicode-bidi: normal; direction: ltr;";for(var C=0;C<I.p.length;++C)for(var O=I.p[C],w=0,h=0;h<O.spans.length;++h){var P,L,x,F,U=O.spans[h];0<U.line.length&&(0!==h&&w!=U.row&&((P=document.createElement("br")).className="lineBreak",N.appendChild(P)),L=!1,w===U.row&&(L=!0),w=U.row,x=d[U.name],(F=document.createElement("span")).className="spanPadding "+U.name+" customSpanColor",F.style.cssText=j(e,x),0!==h&&L?h===O.spans.length-1?F.textContent=U.line.replace(/\s+$/g,""):F.textContent=U.line:1<O.spans.length&&h<O.spans.length-1&&U.row===O.spans[h+1].row?F.textContent=U.line.replace(/^\s+/g,""):F.textContent=U.line.trim(),N.appendChild(F));}M.appendChild(N),b.appendChild(M);var k={bodyStyle:["%",90]};for(var B in d)d.hasOwnProperty(B)&&(k[B]=["%",90]);A.push({type:"html",start:t,end:n,cueHTMLElement:b,cueID:R,cellResolution:[32,15],isFromCEA608:!0,fontSize:k,lineHeight:{},linePadding:{}});}return A}}}o.__dashjs_factory_name="EmbeddedTextHtmlRender",n.default=a.default.getSingletonFactory(o),t.exports=n.default;},{47:47}],198:[function(e,t,n){function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(n,"__esModule",{value:!0});var m=r(e(108)),v=r(e(46)),y=r(e(54)),i=r(e(47)),T=r(e(213)),S=r(e(104)),A=r(e(200)),I=r(e(225)),R=r(e(51)),b="NotFragmentedTextBufferController";function a(e){e=e||{};var r=this.context,t=(0, v.default)(r).getInstance(),i=(0, A.default)(r).getInstance(),a=e.errHandler,o=e.streamInfo,s=e.type,u=e.mimeType,l=e.fragmentModel,n=void 0,d=void 0,f=void 0,c=void 0,h=void 0,p=void 0;function g(e){c=e;}function _(e){e.sender.getStreamId()!==o.id||e.sender.getType()!==s||e.error||null===p.extract(o.id,e.currentRepresentation.id)&&(d=!1,t.trigger(y.default.INIT_FRAGMENT_NEEDED,{sender:n,streamId:o.id,mediaType:s,representationId:e.currentRepresentation.id}));}function E(e){e.chunk.streamId===o.id&&e.chunk.mediaInfo.type===s&&e.chunk.bytes&&(p.save(e.chunk),h.append(e.chunk),d=!0,t.trigger(y.default.STREAM_COMPLETED,{request:e.request}));}return n={getBufferControllerType:function(){return b},initialize:function(e){g(e),p=(0, T.default)(r).getInstance();},createBuffer:function(e){var t,n=e[0];try{return h=(0,S.default)(r).create(c,n),f||((t=h.getBuffer()).hasOwnProperty(m.default.INITIALIZE)&&t.initialize(u,o,e,l),f=!0),h}catch(e){if(n&&(n.isText||-1!==n.codec.indexOf('codecs="stpp')||-1!==n.codec.indexOf('codecs="wvtt')))try{h=i.getTextSourceBuffer();}catch(e){a.error(new I.default(R.default.MEDIASOURCE_TYPE_UNSUPPORTED_CODE,R.default.MEDIASOURCE_TYPE_UNSUPPORTED_MESSAGE+s+" : "+e.message));}else a.error(new I.default(R.default.MEDIASOURCE_TYPE_UNSUPPORTED_CODE,R.default.MEDIASOURCE_TYPE_UNSUPPORTED_MESSAGE+s));}},getType:function(){return s},getBuffer:function(){return h},getBufferLevel:function(){return 0},setMediaSource:g,getMediaSource:function(){return c},getIsBufferingCompleted:function(){return d},getIsPruningInProgress:function(){return !1},dischargePreBuffer:function(){},appendInitSegment:function(e){return null!==p.extract(o.id,e)},getRangeAt:function(){return null},reset:function(e){t.off(y.default.DATA_UPDATE_COMPLETED,_,n),t.off(y.default.INIT_FRAGMENT_LOADED,E,n),!e&&h&&(h.abort(),h.reset(),h=null);},updateTimestampOffset:function(e){h.timestampOffset===e||isNaN(e)||(h.timestampOffset=e);}},c=null,d=f=!1,t.on(y.default.DATA_UPDATE_COMPLETED,_,n),t.on(y.default.INIT_FRAGMENT_LOADED,E,n),n}a.__dashjs_factory_name=b,n.default=i.default.getClassFactory(a),t.exports=n.default;},{104:104,108:108,200:200,213:213,225:225,46:46,47:47,51:51,54:54}],199:[function(e,t,n){function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(n,"__esModule",{value:!0});var a=r(e(108)),i=r(e(47)),o=r(e(114)),s=r(e(198));function u(e){e=e||{};var t,n=this.context,r=void 0;function i(){return r.getBuffer()}return t={getBufferControllerType:function(){return r.getBufferControllerType()},initialize:function(e,t){return r.initialize(e,t)},createBuffer:function(e){return r.createBuffer(e)},getType:function(){return r.getType()},getBuffer:i,setBuffer:function(e){r.setBuffer(e);},getBufferLevel:function(){return r.getBufferLevel()},setMediaSource:function(e){r.setMediaSource(e);},getMediaSource:function(){return r.getMediaSource()},getIsBufferingCompleted:function(){return r.getIsBufferingCompleted()},getIsPruningInProgress:function(){return r.getIsPruningInProgress()},dischargePreBuffer:function(){return r.dischargePreBuffer()},appendInitSegment:function(e){r.appendInitSegment(e);},getRangeAt:function(e){return r.getRangeAt(e)},reset:function(e){r.reset(e);},updateTimestampOffset:function(e){var t=i();t.timestampOffset===e||isNaN(e)||(t.timestampOffset=e);}},r=e.type===a.default.FRAGMENTED_TEXT?(0, o.default)(n).create({streamInfo:e.streamInfo,type:e.type,mediaPlayerModel:e.mediaPlayerModel,manifestModel:e.manifestModel,fragmentModel:e.fragmentModel,errHandler:e.errHandler,mediaController:e.mediaController,representationController:e.representationController,adapter:e.adapter,textController:e.textController,abrController:e.abrController,playbackController:e.playbackController,settings:e.settings}):(0, s.default)(n).create({streamInfo:e.streamInfo,type:e.type,mimeType:e.mimeType,fragmentModel:e.fragmentModel,errHandler:e.errHandler}),t}u.__dashjs_factory_name="TextBufferController",n.default=i.default.getClassFactory(u),t.exports=n.default;},{108:108,114:114,198:198,47:47}],200:[function(e,t,n){function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(n,"__esModule",{value:!0});var N=r(e(108)),i=r(e(47)),C=r(e(201)),O=r(e(202)),w=r(e(221)),P=r(e(219)),L=r(e(46)),x=r(e(54)),F=e(218);function a(){var e=this.context,t=void 0,h=void 0,n=void 0,r=void 0,i=void 0,p=void 0,a=void 0,g=void 0,_=void 0,o=void 0,s=void 0,u=void 0,l=void 0,d=void 0,f=void 0,c=void 0,E=void 0,m=void 0,v=void 0,y=void 0,T=void 0;function S(e){void 0===T&&null!==e.fromStreamInfo&&(T=this.getCurrentTrackIdx());}function A(){void 0===T&&(T=this.getCurrentTrackIdx());}function I(){void 0!==T&&(this.setTextTrack(T),T=void 0);}function R(e){var n=this,t=e.tracks,r=e.index;l&&t.some(function(e,t){if(p.matchSettings(l,e))return n.setTextTrack(t),r=t,!0}),(!1===c||void 0===c&&!l||y)&&this.setTextTrack(-1),f=r,u.trigger(x.default.TEXT_TRACKS_ADDED,{enabled:D(),index:r,tracks:t}),v=!0;}function b(e){var t;d||!e||!e.newMediaInfo||(t=e.newMediaInfo).type===N.default.FRAGMENTED_TEXT&&(l={lang:t.lang,role:t.roles[0],accessibility:t.accessibility[0]});}function D(){return E&&!m?!1:!0}function M(){y=v=!(E=!0);}return t={setConfig:function(e){e&&(e.errHandler&&(n=e.errHandler),e.adapter&&(r=e.adapter),e.manifestModel&&(i=e.manifestModel),e.mediaController&&(p=e.mediaController),e.videoModel&&(a=e.videoModel),e.streamController&&(g=e.streamController),e.textTracks&&(_=e.textTracks),e.vttParser&&(o=e.vttParser),e.ttmlParser&&(s=e.ttmlParser),h.setConfig({errHandler:n,adapter:r,manifestModel:i,mediaController:p,videoModel:a,streamController:g,textTracks:_,vttParser:o,ttmlParser:s}));},getTextSourceBuffer:function(){return h},getAllTracksAreDisabled:function(){return E},addEmbeddedTrack:function(e){h.addEmbeddedTrack(e);},getTextDefaultLanguage:function(){return l&&l.lang||""},setTextDefaultLanguage:function(e){(0, F.checkParameterType)(e,"string"),(l=l||{}).lang=e,d=!0;},setTextDefaultEnabled:function(e){(0, F.checkParameterType)(e,"boolean"),(c=e)?E=!1:this.setTextTrack(-1);},getTextDefaultEnabled:function(){return void 0!==c&&c},setInitialSettings:function(e){l=e,d=!0;},enableText:function(e){(0, F.checkParameterType)(e,"boolean"),!c&&e&&(c=!0),D()!==e&&(e&&this.setTextTrack(f),e||(f=this.getCurrentTrackIdx(),v?this.setTextTrack(-1):y=!0));},isTextEnabled:D,setTextTrack:function(e){var t=h.getConfig(),n=t.fragmentModel,r=t.fragmentedTracks,i=t.videoModel,a=void 0,o=void 0;E=-1===e;var s=_.getCurrentTrackIdx();if(s!==e){E&&p&&p.saveTextSettingsDisabled(),_.setModeForTrackIdx(s,N.default.TEXT_HIDDEN),_.setCurrentTrackIdx(e),_.setModeForTrackIdx(e,N.default.TEXT_SHOWING);var u=_.getCurrentTrackInfo();if(u&&u.isFragmented&&!u.isEmbedded)for(var l=0;l<r.length;l++){var d=r[l];if(u.lang===d.lang&&u.index===d.index&&(d.id?u.id===d.id:u.id===d.index))if(d!==p.getCurrentTrackFor(N.default.FRAGMENTED_TEXT,g.getActiveStreamInfo()))n.abortRequests(),n.removeExecutedRequestsBeforeTime(),h.remove(),_.deleteCuesFromTrackIdx(s),p.setTrack(d),h.setCurrentFragmentedTrackIdx(l);else if(-1===s){for(var f=g.getActiveStreamProcessors(),c=0;c<f.length;c++)if(f[c].getType()===N.default.FRAGMENTED_TEXT){o=f[c];break}o.setIndexHandlerTime(i.getTime()),o.getScheduleController().start();}}else if(u&&!u.isFragmented){for(f=g.getActiveStreamProcessors(),l=0;l<f.length;l++)if(f[l].getType()===N.default.TEXT){a=(o=f[l]).getMediaInfoArr();break}if(o&&a)for(l=0;l<a.length;l++)if(a[l].index===u.index&&a[l].lang===u.lang){o.selectMediaInfo(a[l]);break}}}},getCurrentTrackIdx:function(){return _.getCurrentTrackIdx()},enableForcedTextStreaming:function(e){(0, F.checkParameterType)(e,"boolean"),m=e;},reset:function(){M(),h.resetEmbedded(),h.reset();}},l=null,_=(y=d=v=m=!(f=-1),O.default)(e).getInstance(),o=(0, w.default)(e).getInstance(),s=(0, P.default)(e).getInstance(),h=(0, C.default)(e).getInstance(),u=(0, L.default)(e).getInstance(),_.initialize(),u.on(x.default.TEXT_TRACKS_QUEUE_INITIALIZED,R,t),u.on(x.default.CURRENT_TRACK_CHANGED,b,t),u.on(x.default.PERIOD_SWITCH_STARTED,S,t),u.on(x.default.STREAM_COMPLETED,A,t),u.on(x.default.PERIOD_SWITCH_COMPLETED,I,t),M(),t}a.__dashjs_factory_name="TextController",n.default=i.default.getSingletonFactory(a),t.exports=n.default;},{108:108,201:201,202:202,218:218,219:219,221:221,46:46,47:47,54:54}],201:[function(e,t,n){function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(n,"__esModule",{value:!0});var re=r(e(108)),ie=e(241),m=r(e(233)),v=r(e(206)),y=r(e(208)),i=r(e(47)),T=r(e(45)),S=r(e(202)),A=r(e(197)),ae=r(e(9)),oe=r(e(2)),I=r(e(46)),R=r(e(54)),se=r(e(225)),ue=r(e(51));function a(){var s=this.context,n=(0, I.default)(s).getInstance(),i=!1,u=void 0,U=void 0,k=void 0,B=void 0,l=void 0,G=void 0,d=void 0,j=void 0,r=void 0,a=void 0,f=void 0,Y=void 0,K=void 0,q=void 0,H=void 0,c=void 0,V=void 0,o=void 0,z=void 0,W=void 0,X=void 0,Q=void 0,Z=void 0,$=void 0,J=void 0,ee=void 0;function e(){H=NaN,z=K=null,q=!(c=[]);}function t(){e(),f=[],j=null;}function h(e){var t=e.chunk;t.mediaInfo.embeddedCaptions&&_(t.bytes,t);}function p(){X=[],(Y=(0, S.default)(s).getInstance()).setConfig({videoModel:V}),Y.initialize(),k=(0, v.default)(s).getInstance(),$=[],i=!(Z=W=null),J=(Q=0,A.default)(s).getInstance();var e=o.getActiveStreamProcessors();for(var t in e)if("video"===e[t].getType()){ee=e[t].getRepresentationInfo().MSETimeOffset;break}n.on(R.default.VIDEO_CHUNK_RECEIVED,h,this),n.on(R.default.BUFFER_CLEARED,E,this);}function g(e){W=e;}function te(e,t){var n,r,i=new m.default,a={subtitle:"subtitles",caption:"captions"};i.captionData=e,i.lang=t.lang,i.labels=t.labels,i.id=t.id?t.id:t.index,i.index=t.index,i.isTTML=(n=!1,t.codec&&0<=t.codec.search(re.default.STPP)&&(n=!0),t.mimeType&&0<=t.mimeType.search(re.default.TTML)&&(n=!0),n),i.defaultTrack=function(e){var t=!1;1<X.length&&e.isEmbedded?t=e.id&&e.id===re.default.CC1:1===X.length?e.id&&"string"==typeof e.id&&"CC"===e.id.substring(0,2)&&(t=!0):0===X.length&&(t=e.index===f[0].index);return t}(t),i.isFragmented=!l.getIsTextTrack(t.mimeType),i.isEmbedded=!!t.isEmbedded,i.kind=r=(r=0<t.roles.length?a[t.roles[0]]:a.caption)===a.caption||r===a.subtitle?r:a.caption,i.roles=t.roles,i.accessibility=t.accessibility;var o=(f?f.length:0)+X.length;Y.addTextTrack(i,o);}function _(e,t){var n=void 0,r=void 0,i=void 0,a=void 0,o=void 0,s=void 0,u=void 0,l=t.mediaInfo,d=l.type,f=l.mimeType,c=l.codec||f;if(c){if(d===re.default.FRAGMENTED_TEXT)if(q||"InitializationSegment"!==t.segmentType){if(!q)return;if(r=(s=k.getSamplesInfo(e)).sampleList,null===z&&0<r.length&&(z=r[0].cts-t.start*H),0<=c.search(re.default.STPP))for(j=null!==j?j:ne(c),i=0;i<r.length;i++){var h=(T=r[i]).cts,p=h-z;this.buffered.add(p/H,(p+T.duration)/H);for(var g=new DataView(e,T.offset,T.subSizes[0]),u=ae.default.Utils.dataViewToString(g,re.default.UTF8),_=[],E=T.offset+T.subSizes[0],a=1;a<T.subSizes.length;a++){var m=new Uint8Array(e,E,T.subSizes[a]),v=String.fromCharCode.apply(null,m);_.push(v),E+=T.subSizes[a];}try{var y=G.getValue().ttmlTimeIsRelative?h/H:0,n=j.parse(u,y,h/H,(h+T.duration)/H,_);Y.addCaptions(W,z/H,n);}catch(e){K.removeExecutedRequestsBeforeTime(),this.remove(),U.error("TTML parser error: "+e.message);}}else {for(var T,S=[],i=0;i<r.length;i++){(T=r[i]).cts-=z,this.buffered.add(T.cts/H,(T.cts+T.duration)/H);var A=e.slice(T.offset,T.offset+T.size),I=ae.default.parseBuffer(A);for(a=0;a<I.boxes.length;a++){var R=I.boxes[a];if(U.debug("VTT box1: "+R.type),"vtte"!==R.type&&"vttc"===R.type)for(U.debug("VTT vttc boxes.length = "+R.boxes.length),o=0;o<R.boxes.length;o++){var b,D,M,N=R.boxes[o];U.debug("VTT box2: "+N.type),"payl"===N.type&&(b=N.cue_text,U.debug("VTT cue_text = "+b),D=T.cts/H,M=(T.cts+T.duration)/H,S.push({start:D,end:M,data:b,styles:{}}),U.debug("VTT "+D+"-"+M+" : "+b));}}}0<S.length&&Y.addCaptions(W,0,S);}}else q=!0,H=k.getMediaTimescaleFromMoov(e);else if(d===re.default.TEXT){g=new DataView(e,0,e.byteLength);u=ae.default.Utils.dataViewToString(g,re.default.UTF8);try{n=ne(c).parse(u,0),Y.addCaptions(Y.getCurrentTrackIdx(),0,n);}catch(e){B.error(new se.default(ue.default.TIMED_TEXT_ERROR_ID_PARSE_CODE,ue.default.TIMED_TEXT_ERROR_MESSAGE_PARSE+e.message,u));}}else if(d===re.default.VIDEO)if(t.segmentType===ie.HTTPRequest.INIT_SEGMENT_TYPE){if(0===Q)for(Q=k.getMediaTimescaleFromMoov(e),i=0;i<X.length;i++)te(null,X[i]);}else {if(0===Q)return void U.warn("CEA-608: No timescale for embeddedTextTrack yet");var C=(s=k.getSamplesInfo(e)).lastSequenceNumber;if(!$[0]&&!$[1]){var O=void 0,w=void 0;for(i=0;i<X.length;i++){if(X[i].id===re.default.CC1?w=Y.getTrackIdxForId(re.default.CC1):X[i].id===re.default.CC3&&(w=Y.getTrackIdxForId(re.default.CC3)),-1===w)return void U.warn("CEA-608: data before track is ready.");O=function(i){return function(e,t,n){var r=null;(r=V.getTTMLRenderingDiv()?J.createHTMLCaptionsFromScreen(V.getElement(),e,t,n):[{start:e,end:t,data:n.getDisplayText(),styles:{}}])&&Y.addCaptions(i,0,r);}}(w),$[i]=new oe.default.Cea608Parser(i+1,{newCue:O},null);}}if(Q){if(null!==Z&&C!==Z+s.numSequences)for(i=0;i<$.length;i++)$[i]&&$[i].reset();for(var P=function(e,t){if(0===t.length)return null;for(var n={splits:[],fields:[[],[]]},r=new DataView(e),i=0;i<t.length;i++)for(var a=t[i],o=oe.default.findCea608Nalus(r,a.offset,a.size),s=null,u=0,l=0;l<o.length;l++)for(var d=oe.default.extractCea608DataFromRange(r,o[l]),f=0;f<2;f++)0<d[f].length&&(a.cts!==s?u=0:u+=1,n.fields[f].push([a.cts+ee*Q,d[f],u]),s=a.cts);return n.fields.forEach(function(e){e.sort(function(e,t){return e[0]===t[0]?e[2]-t[2]:e[0]-t[0]});}),n}(e,s.sampleList),L=0;L<$.length;L++){var x=P.fields[L],F=$[L];if(F)for(i=0;i<x.length;i++)F.addData(x[i][0]/Q,x[i][1]);}Z=C;}}}else U.error("No text type defined");}function ne(e){var t=void 0;return 0<=e.search(re.default.VTT)?t=r:(0<=e.search(re.default.TTML)||0<=e.search(re.default.STPP))&&(t=a),t}function E(n){X.forEach(function(e){var t=Y.getTrackIdxForId(e.id);0<=t&&Y.deleteCuesFromTrackIdx(t,n.from,n.to);});}return u={initialize:function(e,t,n,r){i||p(),Y.setConfig({videoModel:V}),Y.initialize(),k=k||(0, v.default)(s).getInstance(),function(e,t,n,r){var i=!l.getIsTextTrack(e);if(f=f.concat(n),i){K=r,u.buffered=(0, y.default)(s).create(),c=d.getTracksFor(re.default.FRAGMENTED_TEXT,t);for(var a=d.getCurrentTrackFor(re.default.FRAGMENTED_TEXT,t),o=0;o<c.length;o++)if(c[o]===a){g(o);break}}for(o=0;o<f.length;o++)te(null,f[o]);}(e,t,n,r);},append:_,abort:function(){Y.deleteAllTextTracks(),e(),k=null,f=[];},addEmbeddedTrack:function(e){if(i||p(),e)if(e.id===re.default.CC1||e.id===re.default.CC3){for(var t=0;t<X.length;t++)if(X[t].id===e.id)return;X.push(e);}else U.warn("Embedded track "+e.id+" not supported!");},resetEmbedded:function(){n.off(R.default.VIDEO_CHUNK_RECEIVED,h,this),n.off(R.default.BUFFER_CLEARED,E,this),Y&&Y.deleteAllTextTracks(),i=!1,X=[],$=[null,null],Z=null;},setConfig:function(e){e&&(e.errHandler&&(B=e.errHandler),e.adapter&&(l=e.adapter),e.manifestModel&&(G=e.manifestModel),e.mediaController&&(d=e.mediaController),e.videoModel&&(V=e.videoModel),e.streamController&&(o=e.streamController),e.textTracks&&(Y=e.textTracks),e.vttParser&&(r=e.vttParser),e.ttmlParser&&(a=e.ttmlParser));},getConfig:function(){return {fragmentModel:K,fragmentedTracks:c,videoModel:V}},setCurrentFragmentedTrackIdx:g,remove:function(e,t){void 0===e&&e===t&&(e=this.buffered.start(0),t=this.buffered.end(this.buffered.length-1)),this.buffered.remove(e,t);},reset:function(){t(),Y=V=o=null;}},U=(0, T.default)(s).getInstance().getLogger(u),t(),u}a.__dashjs_factory_name="TextSourceBuffer",n.default=i.default.getSingletonFactory(a),t.exports=n.default;},{108:108,197:197,2:2,202:202,206:206,208:208,225:225,233:233,241:241,45:45,46:46,47:47,51:51,54:54,9:9}],202:[function(e,t,n){function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(n,"__esModule",{value:!0});var m=r(e(108)),v=r(e(46)),C=r(e(54)),i=r(e(47)),O=r(e(45)),w=e(17),P=e(218);function a(){var e=this.context,y=(0, v.default)(e).getInstance(),t=void 0,u=void 0,l=void 0,T=void 0,o=void 0,a=void 0,d=void 0,S=void 0,A=void 0,I=void 0,R=void 0,b=void 0,r=void 0,D=void 0,M=void 0,n=void 0,N=void 0;function s(e){var t=o[e].kind,n=void 0!==o[e].id?o[e].id:o[e].lang,r=o[e].lang,i=o[e].isTTML,a=o[e].isEmbedded;return T.addTextTrack(t,n,r,i,a)}function f(e,t){var n=T.getClientWidth(),r=T.getClientHeight(),i=T.getVideoWidth(),a=T.getVideoHeight(),o=T.getVideoRelativeOffsetTop(),s=T.getVideoRelativeOffsetLeft();if(0!==i&&0!==a){var u=i/a,l=!1;e.isFromCEA608&&(u=3.5/3,l=!0);var d,f=function(e,t,n,r,i,a){var o=0,s=0;n/r<e/t?o=(s=t)/r*n:s=(o=e)/n*r;var u,l,d=0,f=0;return i<o/s?d=(f=s)*i:f=(d=o)/i,u=(e-d)/2,l=(t-f)/2,a?{x:u+.1*d,y:l+.1*f,w:.8*d,h:.8*f}:{x:u,y:l,w:d,h:f}}.call(this,n,r,i,a,u,l),c=f.w,h=f.h,p=f.x,g=f.y;if(c!=I||h!=R||p!=S||g!=A||t){S=p+s,A=g+o,I=c,R=h,!b||(d=b.style)&&(d.left=S+"px",d.top=A+"px",d.width=I+"px",d.height=R+"px",d.zIndex=D&&document[D]||M?N:null,y.trigger(C.default.CAPTION_CONTAINER_RESIZE,{}));var _=e.activeCues;if(_)for(var E=_.length,m=0;m<E;++m){var v=_[m];v.scaleCue(v);}}}}function c(e){var t,n=void 0,r=void 0,i=void 0,a=void 0,o=void 0;if(e.cellResolution){var s=[I/e.cellResolution[0],R/e.cellResolution[1]];if(e.linePadding)for(n in e.linePadding)if(e.linePadding.hasOwnProperty(n))for(var r=(e.linePadding[n]*s[0]).toString(),u=document.getElementsByClassName("spanPadding"),l=0;l<u.length;l++)u[l].style.cssText=u[l].style.cssText.replace(/(padding-left\s*:\s*)[\d.,]+(?=\s*px)/gi,"$1"+r),u[l].style.cssText=u[l].style.cssText.replace(/(padding-right\s*:\s*)[\d.,]+(?=\s*px)/gi,"$1"+r);if(e.fontSize){for(n in e.fontSize)if(e.fontSize.hasOwnProperty(n)){"%"===e.fontSize[n][0]?i=e.fontSize[n][1]/100:"c"===e.fontSize[n][0]&&(i=e.fontSize[n][1]),r=(i*s[1]).toString(),o="defaultFontSize"!==n?document.getElementsByClassName(n):document.getElementsByClassName("paragraph");for(var d=0;d<o.length;d++)o[d].style.cssText=o[d].style.cssText.replace(/(font-size\s*:\s*)[\d.,]+(?=\s*px)/gi,"$1"+r);}if(e.lineHeight)for(n in e.lineHeight)if(e.lineHeight.hasOwnProperty(n)){"%"===e.lineHeight[n][0]?a=e.lineHeight[n][1]/100:"c"===e.fontSize[n][0]&&(a=e.lineHeight[n][1]),r=(a*s[1]).toString(),o=document.getElementsByClassName(n);for(var f=0;f<o.length;f++)o[f].style.cssText=o[f].style.cssText.replace(/(line-height\s*:\s*)[\d.,]+(?=\s*px)/gi,"$1"+r);}}}e.isd&&((t=document.getElementById(e.cueID))&&b.removeChild(t),h(e));}function h(a){var e;b&&(e=document.createElement("div"),b.appendChild(e),n=(0, w.renderHTML)(a.isd,e,function(e){var t=/^(urn:)(mpeg:[a-z0-9][a-z0-9-]{0,31}:)(subs:)([0-9]+)$/,n=/^#(.*)$/;if(t.test(e)){var r=t.exec(e),i=parseInt(r[4],10)-1;return "data:image/png;base64,"+btoa(a.images[i])}if(n.test(e)){i=(r=n.exec(e))[1];return "data:image/png;base64,"+a.embeddedImages[i]}return null},b.clientHeight,b.clientWidth,!1,function(e){u.info("renderCaption :",e);},n,!0),e.id=a.cueID,y.trigger(C.default.CAPTION_RENDERED,{captionDiv:e,currentTrackIdx:d}));}function p(e){return 0<=e&&o[e]?T.getTextTrack(o[e].kind,o[e].id,o[e].lang,o[e].isTTML,o[e].isEmbedded):null}function g(e){var t;e!==d&&(t=p(d=e),function(e){E.call(this),e&&"html"===e.renderingType?function(){var e=document.getElementById("native-cue-style");if(e)return;(e=document.createElement("style")).id="native-cue-style",document.head.appendChild(e);var t=e.sheet,n=T.getElement();try{n&&(n.id?t.insertRule("#"+n.id+"::cue {background: transparent}",0):0!==n.classList.length?t.insertRule("."+n.className+"::cue {background: transparent}",0):t.insertRule("video::cue {background: transparent}",0));}catch(e){u.info(""+e.message);}}.call(this):i.call(this);}.call(this,t),r&&(clearInterval(r),r=null),t&&"html"===t.renderingType&&(f.call(this,t,!0),r=setInterval(f.bind(this,t),500)));}function _(e,t,n){if(e.cues)for(var r=e.cues,i=r.length-1;0<=i;i--)a=r[i],o=t,s=n,(isNaN(o)||a.startTime>=o)&&(isNaN(s)||a.endTime<=s)&&e.removeCue(r[i]);var a,o,s;}function i(){var e=document.getElementById("native-cue-style");e&&document.head.removeChild(e);}function E(){if(b)for(;b.firstChild;)b.removeChild(b.firstChild);}return t={initialize:function(){"undefined"!=typeof window&&"undefined"!=typeof navigator&&(l=window.VTTCue||window.TextTrackCue,o=[],a=[],M=!(d=-1),N=2147483647,n=r=b=null,void(R=I=A=S=0)!==document.fullscreenElement?D="fullscreenElement":void 0!==document.webkitIsFullScreen?D="webkitIsFullScreen":document.msFullscreenElement?D="msFullscreenElement":document.mozFullScreen&&(D="mozFullScreen"));},setDisplayCConTop:function(e){(0, P.checkParameterType)(e,"boolean"),M=e,b&&!document[D]&&(b.style.zIndex=e?N:null);},addTextTrack:function(e,t){var i=this;o.length!==t?(o.push(e),o.length===t&&function(){o.sort(function(e,t){return e.index-t.index}),b=T.getTTMLRenderingDiv();for(var n=-1,e=0;e<o.length;e++){var t=s.call(i,e);a.push(t),o[e].defaultTrack&&(t.default=!0,n=e);var r=p(e);r&&(r.mode=m.default.TEXT_SHOWING,b&&(o[e].isTTML||o[e].isEmbedded)?r.renderingType="html":r.renderingType="default"),i.addCaptions(e,0,o[e].captionData),y.trigger(C.default.TEXT_TRACK_ADDED);}g.call(i,n),0<=n&&function(){y.on(C.default.PLAYBACK_METADATA_LOADED,function e(){var t=p(n);t&&f.call(this,t,!0),y.off(C.default.PLAYBACK_METADATA_LOADED,e,this);},i);for(var e=0;e<o.length;e++){var t=p(e);t&&(t.mode=e===n?m.default.TEXT_SHOWING:m.default.TEXT_HIDDEN);}}(),y.trigger(C.default.TEXT_TRACKS_QUEUE_INITIALIZED,{index:d,tracks:o});}()):u.error("Trying to add too many tracks.");},addCaptions:function(e,t,n){var r=p(e),i=this;if(r&&Array.isArray(n)&&0!==n.length)for(var a=0;a<n.length;a++){var o=void 0,s=n[a];r.cellResolution=s.cellResolution,r.isFromCEA608=s.isFromCEA608,"html"===s.type&&b?((o=new l(s.start-t,s.end-t,"")).cueHTMLElement=s.cueHTMLElement,o.isd=s.isd,o.images=s.images,o.embeddedImages=s.embeddedImages,o.cueID=s.cueID,o.scaleCue=c.bind(i),o.cellResolution=s.cellResolution,o.lineHeight=s.lineHeight,o.linePadding=s.linePadding,o.fontSize=s.fontSize,b.style.left=S+"px",b.style.top=A+"px",b.style.width=I+"px",b.style.height=R+"px",o.onenter=function(){r.mode===m.default.TEXT_SHOWING&&(this.isd?(h(this),u.debug("Cue enter id:"+this.cueID)):(b.appendChild(this.cueHTMLElement),c.call(i,this),y.trigger(C.default.CAPTION_RENDERED,{captionDiv:this.cueHTMLElement,currentTrackIdx:d})));},o.onexit=function(){if(b)for(var e=b.childNodes,t=0;t<e.length;++t)e[t].id===this.cueID&&(u.debug("Cue exit id:"+e[t].id),b.removeChild(e[t]),--t);}):s.data&&(o=new l(s.start-t,s.end-t,s.data),s.styles&&(void 0!==s.styles.align&&"align"in o&&(o.align=s.styles.align),void 0!==s.styles.line&&"line"in o&&(o.line=s.styles.line),void 0!==s.styles.position&&"position"in o&&(o.position=s.styles.position),void 0!==s.styles.size&&"size"in o&&(o.size=s.styles.size)),o.onenter=function(){r.mode===m.default.TEXT_SHOWING&&y.trigger(C.default.CAPTION_RENDERED,{currentTrackIdx:d});});try{o?r.addCue(o):u.error("impossible to display subtitles.");}catch(e){throw _(r),r.addCue(o),e}}},getCurrentTrackIdx:function(){return d},setCurrentTrackIdx:g,getTrackIdxForId:function(e){for(var t=-1,n=0;n<o.length;n++)if(o[n].id===e){t=n;break}return t},getCurrentTrackInfo:function(){return o[d]},setModeForTrackIdx:function(e,t){var n=p(e);n&&n.mode!==t&&(n.mode=t);},deleteCuesFromTrackIdx:function(e,t,n){var r=p(e);r&&_(r,t,n);},deleteAllTextTracks:function(){for(var e=a?a.length:0,t=0;t<e;t++){var n=p(t);n&&(_.call(this,n),n.mode="disabled");}a=[],o=[],r&&(clearInterval(r),r=null),d=-1,E.call(this);},deleteTextTrack:function(e){T.removeChild(a[e]),a.splice(e,1);},setConfig:function(e){e&&e.videoModel&&(T=e.videoModel);}},u=(0, O.default)(e).getInstance().getLogger(t),t}a.__dashjs_factory_name="TextTracks",n.default=i.default.getSingletonFactory(a),t.exports=n.default;},{108:108,17:17,218:218,45:45,46:46,47:47,54:54}],203:[function(e,t,n){function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(n,"__esModule",{value:!0});var i=r(e(47)),a=r(e(108)),c=r(e(234)),o=r(e(204)),s=r(e(224)),h=e(80);function u(e){var t,n=this.context,f=void 0;function r(){f&&f.reset();}return t={provide:function(e,t){if("function"==typeof t){var n,r=f.getCurrentTrack(),i=void 0;if(!r||r.segmentDuration<=0||null==e)t(null);else {isNaN(r.segmentDuration)&&(i=f.getThumbnailRequestForTime(e))&&(r.segmentDuration=i.duration),n=e%r.segmentDuration;var a,o,s,u,l=Math.floor(n*r.tilesHor*r.tilesVert/r.segmentDuration),d=new c.default;if(d.width=Math.floor(r.widthPerTile),d.height=Math.floor(r.heightPerTile),d.x=Math.floor(l%r.tilesHor)*r.widthPerTile,d.y=Math.floor(l/r.tilesHor)*r.heightPerTile,"readThumbnail"in r)return r.readThumbnail(e,function(e){d.url=e,t(d);});i?(d.url=i.url,r.segmentDuration=NaN):(a=Math.floor(e/r.segmentDuration),d.url=(s=a+(o=r).startNumber,u=(0, h.replaceTokenForTemplate)(o.templateUrl,"Number",s),u=(0, h.replaceTokenForTemplate)(u,"Time",(s-1)*o.segmentDuration),u=(0, h.replaceTokenForTemplate)(u,"Bandwidth",o.bandwidth),(0, h.unescapeDollarsInTemplate)(u))),t(d);}}},setTrackByIndex:function(e){f.setTrackByIndex(e);},getCurrentTrackIndex:function(){return f.getCurrentTrackIndex()},getBitrateList:function(){var e=f.getTracks(),n=0;return e.map(function(e){var t=new s.default;return t.mediaType=a.default.IMAGE,t.qualityIndex=n++,t.bitrate=e.bitrate,t.width=e.width,t.height=e.height,t})},reset:r},r(),f=(0, o.default)(n).create({streamInfo:e.streamInfo,adapter:e.adapter,baseURLController:e.baseURLController,timelineConverter:e.timelineConverter,debug:e.debug,eventBus:e.eventBus,events:e.events,dashConstants:e.dashConstants}),t}u.__dashjs_factory_name="ThumbnailController",n.default=i.default.getClassFactory(u),t.exports=n.default;},{108:108,204:204,224:224,234:234,47:47,80:80}],204:[function(e,t,n){function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(n,"__esModule",{value:!0});var T=r(e(108)),S=r(e(61)),i=r(e(47)),A=r(e(235)),I=r(e(220)),R=e(80),b=r(e(54)),D=r(e(206)),M=r(e(159)),N=r(e(57)),C=["http://dashif.org/thumbnail_tile","http://dashif.org/guidelines/thumbnail_tile"];function a(e){var t,n=this.context,u=e.adapter,s=e.baseURLController,r=e.streamInfo,l=e.timelineConverter,i=e.debug,a=e.eventBus,o=e.events,d=e.dashConstants,f=(0, I.default)(n).getInstance(),c=void 0,h=void 0,p=void 0,g=void 0,_=void 0,E=void 0;function m(){y(),_=(0, M.default)(n).create({}),E=(0, D.default)(n).getInstance(),(h=(0, N.default)(n).create({timelineConverter:l,baseURLController:s,debug:i,eventBus:a,events:o,dashConstants:d,urlUtils:f})).initialize(!!u&&u.getIsDynamic()),function(){if(!r||!u)return;if(!(g=u.getMediaInfoForType(r,T.default.IMAGE)))return;var e=u.getVoRepresentations(g);e&&0<e.length&&e.forEach(function(e){(e.segmentInfoType===S.default.SEGMENT_TEMPLATE&&0<e.segmentDuration&&e.media||e.segmentInfoType===S.default.SEGMENT_TIMELINE)&&v(e),e.segmentInfoType===S.default.SEGMENT_BASE&&v(e,!0);});0<c.length&&(c.sort(function(e,t){return e.bitrate-t.bitrate}),p=c.length-1);}();}function v(e,t){var n,r,i=new A.default;i.id=e.id,i.bitrate=e.bandwidth,i.width=e.width,i.height=e.height,i.tilesHor=1,i.tilesVert=1,e.essentialProperties&&e.essentialProperties.forEach(function(e){var t;0<=C.indexOf(e.schemeIdUri)&&e.value&&(2!==(t=e.value.split("x")).length||isNaN(t[0])||isNaN(t[1])||(i.tilesHor=parseInt(t[0],10),i.tilesVert=parseInt(t[1],10)));}),t?a.trigger(b.default.SEGMENTBASE_SEGMENTSLIST_REQUEST_NEEDED,{mimeType:g.mimeType,mediaType:T.default.IMAGE,representation:e,callback:function(e,r){var o=[];e=function(e,t){for(var n=[],r=0,i=void 0,a=void 0,o=void 0,i=0,s=e.length;i<s;i++)a=e[i],(o=(0, R.getTimeBasedSegment)(l,u.getIsDynamic(),t,a.startTime,a.duration,a.timescale,a.media,a.mediaRange,r))&&(n.push(o),o=null,r++);return n}(e,r),i.segmentDuration=e[0].duration,i.readThumbnail=function(t,a){var n=null;o.some(function(e){if(e.start<=t&&e.end>t)return n=e.url,!0}),n?a(n):e.some(function(i){if(i.mediaStartTime<=t&&i.mediaStartTime+i.duration>t){var e=s.resolve(r.path);return _.load({method:"get",url:e.url,request:{range:i.mediaRange,responseType:"arraybuffer"},onload:function(e){var t=E.getSamplesInfo(e.target.response),n=new Blob([e.target.response.slice(t.sampleList[0].offset,t.sampleList[0].offset+t.sampleList[0].size)],{type:"image/jpeg"}),r=window.URL.createObjectURL(n);o.push({start:i.mediaStartTime,end:i.mediaStartTime+i.duration,url:r}),a&&a(r);}}),!0}});};}}):(i.startNumber=e.startNumber,i.segmentDuration=e.segmentDuration,i.timescale=e.timescale,i.templateUrl=(n=e,(r=f.isRelative(n.media)?f.resolve(n.media,s.resolve(n.path).url):n.media)?(0, R.replaceIDForTemplate)(r,n.id):"")),0<i.tilesHor&&0<i.tilesVert&&(i.widthPerTile=i.width/i.tilesHor,i.heightPerTile=i.height/i.tilesVert,c.push(i));}function y(){c=[],p=-1,g=null;}return t={initialize:m,getTracks:function(){return c},reset:y,setTrackByIndex:function(e){c&&0!==c.length&&(e>=c.length&&(e=c.length-1),p=e);},getCurrentTrack:function(){return p<0?null:c[p]},getCurrentTrackIndex:function(){return p},getThumbnailRequestForTime:function(e){for(var t=void 0,n=u.getVoRepresentations(g),r=0;r<n.length;r++)if(c[p].id===n[r].id){t=n[r];break}return h.getSegmentRequestForTime(g,t,e)}},m(),t}n.THUMBNAILS_SCHEME_ID_URIS=C,a.__dashjs_factory_name="ThumbnailTracks",n.default=i.default.getClassFactory(a);},{108:108,159:159,206:206,220:220,235:235,47:47,54:54,57:57,61:61,80:80}],205:[function(e,t,n){function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(n,"__esModule",{value:!0});var u=r(e(51)),l=r(e(46)),d=r(e(54)),f=r(e(113)),c=r(e(223)),h=r(e(222)),i=r(e(47)),p=r(e(225)),g=e(218);function a(){var e,t=this.context,i=(0, l.default)(t).getInstance(),n=void 0,a=void 0,r=void 0,o=void 0;function s(){n.reset();}return e={chooseSelector:function(e){(0, g.checkParameterType)(e,"boolean"),o=e?r:a;},select:function(e){if(e){var t=e.baseUrls,n=e.selectedIdx;if(!isNaN(n))return t[n];var r=o.select(t);return r?(e.selectedIdx=t.indexOf(r),r):(i.trigger(d.default.URL_RESOLUTION_FAILED,{error:new p.default(u.default.URL_RESOLUTION_FAILED_GENERIC_ERROR_CODE,u.default.URL_RESOLUTION_FAILED_GENERIC_ERROR_MESSAGE)}),void(o===a&&s()))}},reset:s,setConfig:function(e){e.selector&&(o=e.selector);}},n=(0, f.default)(t).create({updateEventName:d.default.SERVICE_LOCATION_BLACKLIST_CHANGED,addBlacklistEventName:d.default.SERVICE_LOCATION_BLACKLIST_ADD}),a=(0, h.default)(t).create({blacklistController:n}),r=(0, c.default)(t).create({blacklistController:n}),o=a,e}a.__dashjs_factory_name="BaseURLSelector",n.default=i.default.getClassFactory(a),t.exports=n.default;},{113:113,218:218,222:222,223:223,225:225,46:46,47:47,51:51,54:54}],206:[function(e,t,n){function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(n,"__esModule",{value:!0});var i=r(e(45)),o=r(e(214)),a=r(e(47)),s=r(e(9)),c=r(e(230));function u(){var a=void 0,e=void 0,r=this.context;function P(e){if(!e)return null;void 0===e.fileStart&&(e.fileStart=0);var t=s.default.parseBuffer(e),n=(0, o.default)(r).create();return n.setData(t),n}return e={parse:P,findLastTopIsoBoxCompleted:function(e,t,n){if(void 0===n&&(n=0),!t||n+8>=t.byteLength)return new c.default(0,!1);for(var r,i,a,o,s=t instanceof ArrayBuffer?new Uint8Array(t):t,u=void 0,l=0;n<s.byteLength;){var d=(a=s)[(o=n)+3]>>>0|a[o+2]<<8>>>0|a[o+1]<<16>>>0|a[o]<<24>>>0,f=(r=s,i=n+4,String.fromCharCode(r[i++])+String.fromCharCode(r[i++])+String.fromCharCode(r[i++])+String.fromCharCode(r[i]));if(0==d)break;n+d<=s.byteLength&&(0<=e.indexOf(f)?u=new c.default(n,!0,d):l=n+d),n+=d;}return u||new c.default(l,!1)},getMediaTimescaleFromMoov:function(e){var t=P(e),n=t?t.getBox("mdhd"):void 0;return n?n.timescale:NaN},getSamplesInfo:function(e){if(!e||0===e.byteLength)return {sampleList:[],lastSequenceNumber:NaN,totalDuration:NaN,numSequences:NaN};for(var t=P(e),n=t.getBoxes("moof"),r=t.getBoxes("mfhd"),i=void 0,a=void 0,o=void 0,s=void 0,u=void 0,l=void 0,d=void 0,f=void 0,c=void 0,h=void 0,p=void 0,g=void 0,_=void 0,E=void 0,m=t.getBoxes("moof").length,v=r[r.length-1].sequence_number,u=[],y=-1,T=-1,h=a=0;h<n.length;h++)for(var S=n[h],A=S.getChildBoxes("traf"),f=0;f<A.length;f++){for(var I=A[f],R=I.getChildBox("tfhd"),b=I.getChildBox("tfdt"),s=b.baseMediaDecodeTime,D=I.getChildBoxes("trun"),M=I.getChildBoxes("subs"),c=0;c<D.length;c++)for(var N=D[c],a=N.sample_count,_=(R.base_data_offset||0)+(N.data_offset||0),d=0;d<a;d++){i=void 0!==(l=N.samples[d]).sample_duration?l.sample_duration:R.default_sample_duration,o=void 0!==l.sample_size?l.sample_size:R.default_sample_size;var C={dts:s,cts:s+(void 0!==l.sample_composition_time_offset?l.sample_composition_time_offset:0),duration:i,offset:S.offset+_,size:o,subSizes:[o]};if(M)for(p=0;p<M.length;p++){var O=M[p];if(y<O.entry_count-1&&T<d&&(y++,T+=O.entries[y].sample_delta),d==T){C.subSizes=[];for(var w=O.entries[y],g=0;g<w.subsample_count;g++)C.subSizes.push(w.subsamples[g].subsample_size);}}u.push(C),_+=o,s+=i;}E=s-b.baseMediaDecodeTime;}return {sampleList:u,lastSequenceNumber:v,totalDuration:E,numSequences:m}},findInitRange:function(e){var t=null,n=P(e);if(!n)return t;var r=n.getBox("ftyp"),i=n.getBox("moov");return a.debug("Searching for initialization."),i&&i.isComplete&&(t=(r?r.offset:i.offset)+"-"+(i.offset+i.size-1),a.debug("Found the initialization.  Range: "+t)),t}},a=(0, i.default)(r).getInstance().getLogger(e),e}u.__dashjs_factory_name="BoxParser",n.default=a.default.getSingletonFactory(u),t.exports=n.default;},{214:214,230:230,45:45,47:47,9:9}],207:[function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0});var r,i=e(47),a=(r=i)&&r.__esModule?r:{default:r};function o(){var e,t=void 0;return t=!(e={supportsMediaSource:function(){var e="WebKitMediaSource"in window,t="MediaSource"in window;return e||t},supportsEncryptedMedia:function(){return t},supportsCodec:function(e){return !!("MediaSource"in window&&MediaSource.isTypeSupported(e))||!!("WebKitMediaSource"in window&&WebKitMediaSource.isTypeSupported(e))},setEncryptedMediaSupported:function(e){t=e;}}),e}o.__dashjs_factory_name="Capabilities",n.default=a.default.getSingletonFactory(o),t.exports=n.default;},{47:47}],208:[function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0});var r,i=e(47),a=(r=i)&&r.__esModule?r:{default:r},o=e(218);function s(){return {customTimeRangeArray:[],length:0,add:function(e,t){for(var n=0,n=0;n<this.customTimeRangeArray.length&&e>this.customTimeRangeArray[n].start;n++);for(this.customTimeRangeArray.splice(n,0,{start:e,end:t}),n=0;n<this.customTimeRangeArray.length-1;n++)this.mergeRanges(n,n+1)&&n--;this.length=this.customTimeRangeArray.length;},clear:function(){this.customTimeRangeArray=[],this.length=0;},remove:function(e,t){for(var n=0;n<this.customTimeRangeArray.length;n++)if(e<=this.customTimeRangeArray[n].start&&t>=this.customTimeRangeArray[n].end)this.customTimeRangeArray.splice(n,1),n--;else {if(e>this.customTimeRangeArray[n].start&&t<this.customTimeRangeArray[n].end){this.customTimeRangeArray.splice(n+1,0,{start:t,end:this.customTimeRangeArray[n].end}),this.customTimeRangeArray[n].end=e;break}e>this.customTimeRangeArray[n].start&&e<this.customTimeRangeArray[n].end?this.customTimeRangeArray[n].end=e:t>this.customTimeRangeArray[n].start&&t<this.customTimeRangeArray[n].end&&(this.customTimeRangeArray[n].start=t);}this.length=this.customTimeRangeArray.length;},mergeRanges:function(e,t){var n=this.customTimeRangeArray[e],r=this.customTimeRangeArray[t];return n.start<=r.start&&r.start<=n.end&&n.end<=r.end?(n.end=r.end,this.customTimeRangeArray.splice(t,1),!0):r.start<=n.start&&n.start<=r.end&&r.end<=n.end?(n.start=r.start,this.customTimeRangeArray.splice(t,1),!0):r.start<=n.start&&n.start<=r.end&&n.end<=r.end?(this.customTimeRangeArray.splice(e,1),!0):n.start<=r.start&&r.start<=n.end&&r.end<=n.end&&(this.customTimeRangeArray.splice(t,1),!0)},start:function(e){return (0, o.checkInteger)(e),e>=this.customTimeRangeArray.length||e<0?NaN:this.customTimeRangeArray[e].start},end:function(e){return (0, o.checkInteger)(e),e>=this.customTimeRangeArray.length||e<0?NaN:this.customTimeRangeArray[e].end}}}s.__dashjs_factory_name="CustomTimeRanges",n.default=a.default.getClassFactory(s),t.exports=n.default;},{218:218,47:47}],209:[function(e,t,n){function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(n,"__esModule",{value:!0});var i=r(e(47)),d=r(e(45)),f=r(e(108)),c=[{oldKey:"dashjs_vbitrate",newKey:"dashjs_video_bitrate"},{oldKey:"dashjs_abitrate",newKey:"dashjs_audio_bitrate"},{oldKey:"dashjs_vsettings",newKey:"dashjs_video_settings"},{oldKey:"dashjs_asettings",newKey:"dashjs_audio_settings"}],h="dashjs_?_bitrate",p="dashjs_?_settings",g="localStorage",_="lastBitrate",E="lastMediaSettings";function a(e){e=e||{};var t=this.context,o=e.settings,n=void 0,s=void 0,r=void 0;function i(e){if(void 0!==r)return r;r=!1;var t=void 0;try{"undefined"!=typeof window&&(t=window[e]);}catch(e){return s.warn("DOMStorage access denied: "+e.message),r}if(!t||e!==g&&"sessionStorage"!==e)return r;try{t.setItem("1","1"),t.removeItem("1"),r=!0;}catch(e){s.warn("DOMStorage is supported, but cannot be used: "+e.message);}return r}function a(){return 6e5*Math.round((new Date).getTime()/6e5)}function u(e,t){return i(e)&&o.get().streaming[t+"CachingInfo"].enabled}function l(){if(!o)throw new Error(f.default.MISSING_CONFIG_ERROR)}return n={getSavedBitrateSettings:function(e){var t=NaN;if(l(),u(g,_)){var n=h.replace(/\?/,e);try{var r=JSON.parse(localStorage.getItem(n))||{},i=(new Date).getTime()-parseInt(r.timestamp,10)>=o.get().streaming.lastBitrateCachingInfo.ttl||!1,a=parseFloat(r.bitrate);isNaN(a)||i?i&&localStorage.removeItem(n):(t=a,s.debug("Last saved bitrate for "+e+" was "+a));}catch(e){return null}}return t},setSavedBitrateSettings:function(e,t){if(u(g,_)&&t){var n=h.replace(/\?/,e);try{localStorage.setItem(n,JSON.stringify({bitrate:t.toFixed(3),timestamp:a()}));}catch(e){s.error(e.message);}}},getSavedMediaSettings:function(e){var t=null;if(l(),u(g,E)){var n=p.replace(/\?/,e);try{var r=JSON.parse(localStorage.getItem(n))||{},i=(new Date).getTime()-parseInt(r.timestamp,10)>=o.get().streaming.lastMediaSettingsCachingInfo.ttl||!1,t=r.settings;i&&(localStorage.removeItem(n),t=null);}catch(e){return null}}return t},setSavedMediaSettings:function(e,t){if(u(g,E)){var n=p.replace(/\?/,e);try{localStorage.setItem(n,JSON.stringify({settings:t,timestamp:a()}));}catch(e){s.error(e.message);}}}},s=(0, d.default)(t).getInstance().getLogger(n),i(g)&&c.forEach(function(e){var t=localStorage.getItem(e.oldKey);if(t){localStorage.removeItem(e.oldKey);try{localStorage.setItem(e.newKey,t);}catch(e){s.error(e.message);}}}),n}a.__dashjs_factory_name="DOMStorage";var o=i.default.getSingletonFactory(a);n.default=o,t.exports=n.default;},{108:108,45:45,47:47}],210:[function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0});var r,i=e(47),a=(r=i)&&r.__esModule?r:{default:r};function o(){function e(t,e){try{return new window.URL(t,e).toString()}catch(e){return t}}function t(e,t){var n=s;if(!t)return e;if(!d(e))return e;f(e)&&(n=u),c(e)&&(n=l);var r=n(t),i="/"!==r.charAt(r.length-1)&&"/"!==e.charAt(0)?"/":"";return [r,e].join(i)}var n=void 0,r=/^[a-z][a-z0-9+\-_.]*:/i,i=/^https?:\/\//i,a=/^https:\/\//i,o=/^([a-z][a-z0-9+\-_.]*:\/\/[^\/]+)\/?/i;function s(e){var t=e.indexOf("/"),n=e.lastIndexOf("/");return -1!==t?n===t+1?e:(-1!==e.indexOf("?")&&(e=e.substring(0,e.indexOf("?"))),e.substring(0,n+1)):""}function u(e){var t=e.match(o);return t?t[1]:""}function l(e){var t=e.match(r);return t?t[0]:""}function d(e){return !r.test(e)}function f(e){return d(e)&&"/"===e.charAt(0)}function c(e){return 0===e.indexOf("//")}return function(){try{new window.URL("x","http://y");n=e;}catch(e){}finally{n=n||t;}}(),{parseBaseUrl:s,parseOrigin:u,parseScheme:l,isRelative:d,isPathAbsolute:f,isSchemeRelative:c,isHTTPURL:function(e){return i.test(e)},isHTTPS:function(e){return a.test(e)},removeHostname:function(e){return /^(?:\w+\:\/\/)?([^\/]+)(.*)$/.exec(e)[2].substring(1)},resolve:function(e,t){return n(e,t)}}}o.__dashjs_factory_name="DefaultURLUtils",n.default=a.default.getSingletonFactory(o),t.exports=n.default;},{47:47}],211:[function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0});var r,i=e(47),a=(r=i)&&r.__esModule?r:{default:r};function o(e){e=e||{};var n=void 0,s=new DataView(e.data),u=0;function i(e,t){var n=!0,r=0;if(void 0===t&&(t=!1),r=16777215<e.tag?(s.getUint32(u)!==e.tag&&(n=!1),4):65535<e.tag?(256*s.getUint16(u)+s.getUint8(u+2)!==e.tag&&(n=!1),3):255<e.tag?(s.getUint16(u)!==e.tag&&(n=!1),2):(s.getUint8(u)!==e.tag&&(n=!1),1),!n&&e.required&&!t)throw new Error("required tag not found");return n&&(u+=r),n}function a(e){for(var t=1,n=128,r=-1,i=0,a=s.getUint8(u),o=0,o=0;o<8;o+=1){if((a&n)===n){i=void 0===e?a&~n:a,r=o;break}n>>=1;}for(o=0;o<r;o+=1,t+=1)i=i<<8|255&s.getUint8(u+t);return u+=t,i}return n={getPos:function(){return u},setPos:function(e){u=e;},consumeTag:i,consumeTagAndSize:function(e,t){var n=i(e,t);return n&&a(),n},parseTag:function(e){var t;return i(e),t=a(),n[e.parse](t)},skipOverElement:function(e,t){var n=i(e,t),r=void 0;return n&&(r=a(),u+=r),n},getMatroskaCodedNum:a,getMatroskaFloat:function(e){var t=void 0;switch(e){case 4:t=s.getFloat32(u),u+=4;break;case 8:t=s.getFloat64(u),u+=8;}return t},getMatroskaUint:function(e){for(var t=0,n=0;n<e;n+=1)t<<=8,t|=255&s.getUint8(u+n);return u+=e,t},moreData:function(){return u<s.byteLength}}}o.__dashjs_factory_name="EBMLParser",n.default=a.default.getClassFactory(o),t.exports=n.default;},{47:47}],212:[function(e,t,n){function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(n,"__esModule",{value:!0});var i=r(e(46)),a=r(e(54)),o=r(e(47));function s(){var e=this.context,t=(0, i.default)(e).getInstance();return {error:function(e){t.trigger(a.default.ERROR,{error:e});}}}s.__dashjs_factory_name="ErrorHandler",n.default=o.default.getSingletonFactory(s),t.exports=n.default;},{46:46,47:47,54:54}],213:[function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0});var r,i=e(47),a=(r=i)&&r.__esModule?r:{default:r};function o(){var r={};return {save:function(e){var t=e.streamId,n=e.representationId;r[t]=r[t]||{},r[t][n]=e;},extract:function(e,t){return r&&r[e]&&r[e][t]?r[e][t]:null},reset:function(){r={};}}}o.__dashjs_factory_name="InitCache",n.default=a.default.getSingletonFactory(o),t.exports=n.default;},{47:47}],214:[function(e,t,n){function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(n,"__esModule",{value:!0});var i=r(e(229)),a=r(e(47));function o(){var o=void 0;function t(e){var t=[];if(!e||!o||"function"!=typeof o.fetchAll)return t;for(var n=o.fetchAll(e),r=void 0,i=0,a=n.length;i<a;i++)(r=s(n[i]))&&t.push(r);return t}function s(e){if(!e)return null;var t=new i.default(e);return e.hasOwnProperty("_incomplete")&&(t.isComplete=!e._incomplete),t}return {getBox:function(e){return e&&o&&o.boxes&&0!==o.boxes.length&&"function"==typeof o.fetch?s(o.fetch(e)):null},getBoxes:t,setData:function(e){o=e;},getLastBox:function(){if(!o||!o.boxes||!o.boxes.length)return null;var e=t(o.boxes[o.boxes.length-1].type);return 0<e.length?e[e.length-1]:null}}}o.__dashjs_factory_name="IsoFile",n.default=a.default.getClassFactory(o),t.exports=n.default;},{229:229,47:47}],215:[function(e,t,n){function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(n,"__esModule",{value:!0});var i=r(e(47)),a=r(e(108));function o(e){var r=(e=e||{}).timelineConverter;return {getLiveEdge:function(e){!function(){if(!r||!r.hasOwnProperty("getExpectedLiveEdge"))throw new Error(a.default.MISSING_CONFIG_ERROR)}();var t=e.DVRWindow?e.DVRWindow.end:0,n=t;return e.useCalculatedLiveEdgeTime&&(n=r.getExpectedLiveEdge(),r.setClientTimeOffset(n-t)),n},reset:function(){r=null;}}}o.__dashjs_factory_name="LiveEdgeFinder",n.default=i.default.getClassFactory(o),t.exports=n.default;},{108:108,47:47}],216:[function(e,t,n){function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(n,"__esModule",{value:!0});var i=r(e(47)),a=r(e(12));function o(){return {areEqual:function(e,t){return (0, a.default)(e,t)}}}o.__dashjs_factory_name="ObjectUtils",n.default=i.default.getSingletonFactory(o),t.exports=n.default;},{12:12,47:47}],217:[function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0});var r,i=e(47),a=(r=i)&&r.__esModule?r:{default:r};function o(){return {modifyRequestURL:function(e){return e},modifyRequestHeader:function(e){return e}}}o.__dashjs_factory_name="RequestModifier",n.default=a.default.getSingletonFactory(o),t.exports=n.default;},{47:47}],218:[function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.checkParameterType=function(e,t){if(typeof e!==t)throw a.default.BAD_ARGUMENT_ERROR},n.checkInteger=function(e){if(null===e||isNaN(e)||e%1!=0)throw a.default.BAD_ARGUMENT_ERROR+" : argument is not an integer"},n.checkRange=function(e,t,n){if(e<t||n<e)throw a.default.BAD_ARGUMENT_ERROR+" : argument out of range"},n.checkIsVideoOrAudioType=function(e){if("string"!=typeof e||e!==a.default.AUDIO&&e!==a.default.VIDEO)throw a.default.BAD_ARGUMENT_ERROR};var r,i=e(108),a=(r=i)&&r.__esModule?r:{default:r};},{108:108}],219:[function(e,t,n){function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(n,"__esModule",{value:!0});var i=r(e(47)),a=r(e(45)),o=r(e(46)),S=r(e(54)),A=e(17);function s(){var e=this.context,v=(0, o.default)(e).getInstance(),t=void 0,y=void 0,T=0;return t={parse:function(e,t,n,r,i){var a="",o=[],s=void 0,u=void 0,l=void 0,d={},f={},c="",h="",p={onOpenTag:function(e,t,n){if("image"===t&&"http://www.smpte-ra.org/schemas/2052-1/2010/smpte-tt"===e){if(!n[" imagetype"]||"PNG"!==n[" imagetype"].value)return void y.warn("smpte-tt imagetype != PNG. Discarded");c=n["http://www.w3.org/XML/1998/namespace id"].value;}},onCloseTag:function(){c&&(f[c]=h.trim()),c=h="";},onText:function(e){c&&(h+=e);}};if(!e)throw a="no ttml data to parse",new Error(a);d.data=e,v.trigger(S.default.TTML_TO_PARSE,d);var g=(0, A.fromXML)(d.data,function(e){a=e;},p);v.trigger(S.default.TTML_PARSED,{ttmlString:d.data,ttmlDoc:g});for(var _,E=g.getMediaTimeEvents(),l=0;l<E.length;l++){var m=(0, A.generateISD)(g,E[l],function(e){a=e;});m.contents.some(function(e){return e.contents.length})&&(s=E[l]+t<n?n:E[l]+t)<(u=E[l+1]+t>r?r:E[l+1]+t)&&o.push({start:s,end:u,type:"html",cueID:(_="cue_TTML_"+T,T++,_),isd:m,images:i,embeddedImages:f});}if(""!==a)throw y.error(a),new Error(a);return o}},y=(0, a.default)(e).getInstance().getLogger(t),t}s.__dashjs_factory_name="TTMLParser",n.default=i.default.getSingletonFactory(s),t.exports=n.default;},{17:17,45:45,46:46,47:47,54:54}],220:[function(e,t,n){function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(n,"__esModule",{value:!0});var i=r(e(47)),o=r(e(210));function a(){var i=void 0,a=[],e=this.context;function n(e,t,n){var r=function(e){for(var t=void 0,t=0;t<a.length;t++){if(a[t].regex.test(e))return a[t].utils}return i}(n||t);return r&&"function"==typeof r[e]?r[e](t,n):i[e](t,n)}return i=(0, o.default)(e).getInstance(),{registerUrlRegex:function(e,t){a.push({regex:e,utils:t});},parseBaseUrl:function(e){return n("parseBaseUrl",e)},parseOrigin:function(e){return n("parseOrigin",e)},parseScheme:function(e){return n("parseScheme",e)},isRelative:function(e){return n("isRelative",e)},isPathAbsolute:function(e){return n("isPathAbsolute",e)},isSchemeRelative:function(e){return n("isSchemeRelative",e)},isHTTPURL:function(e){return n("isHTTPURL",e)},isHTTPS:function(e){return n("isHTTPS",e)},removeHostname:function(e){return n("removeHostname",e)},resolve:function(e,t){return n("resolve",e,t)}}}a.__dashjs_factory_name="URLUtils";var s=i.default.getSingletonFactory(a);n.default=s,t.exports=n.default;},{210:210,47:47}],221:[function(e,t,n){function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(n,"__esModule",{value:!0});var i=r(e(47)),a=r(e(45));function o(){var e=this.context,t=void 0,p=void 0,g=void 0,_=void 0,E=void 0,m=void 0;function v(e){var t=e.split(":"),n=t.length-1;return e=60*parseInt(t[n-1],10)+parseFloat(t[n]),2==n&&(e+=3600*parseInt(t[0],10)),e}return t={parse:function(e){var t,n=[],r=void 0;if(!e)return n;t=(e=e.split(g)).length,r=-1;for(var i,a,o=0;o<t;o++){var s,u,l,d,f,c,h=e[o];0<h.length&&"WEBVTT"!==h&&h.match(_)&&(a=i=void 0,i=h.split(_),(a=i[1].split(m)).shift(),i[1]=a[0],a.shift(),u=(s={cuePoints:i,styles:function(e){var n={};return e.forEach(function(e){var t;1<e.split(/:/).length&&((t=e.split(/:/)[1])&&-1!=t.search(/%/)&&(t=parseInt(t.replace(/%/,""),10)),(e.match(/align/)||e.match(/A/))&&(n.align=t),(e.match(/line/)||e.match(/L/))&&(n.line=t),(e.match(/position/)||e.match(/P/))&&(n.position=t),(e.match(/size/)||e.match(/S/))&&(n.size=t));}),n}(a)}).cuePoints,l=s.styles,d=function(e,t){var n,r=t,i="",a="";for(;""!==e[r]&&r<e.length;)r++;if(1<(n=r-t))for(var o=0;o<n;o++){if((a=e[t+o]).match(_)){i="";break}i+=a,o!==n-1&&(i+="\n");}else (a=e[t]).match(_)||(i=a);return i}(e,o+1),f=v(u[0].replace(E,"")),c=v(u[1].replace(E,"")),!isNaN(f)&&!isNaN(c)&&r<=f&&f<c?""!==d?(r=f,n.push({start:f,end:c,data:d,styles:l})):p.error("Skipping cue due to empty/malformed cue text"):p.error("Skipping cue due to incorrect cue timing"));}return n}},p=(0, a.default)(e).getInstance().getLogger(t),g=/(?:\r\n|\r|\n)/gm,_=/-->/,E=/(^[\s]+|[\s]+$)/g,m=/\s\b/g,t}o.__dashjs_factory_name="VTTParser",n.default=i.default.getSingletonFactory(o),t.exports=n.default;},{45:45,47:47}],222:[function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0});var r,i=e(47),a=(r=i)&&r.__esModule?r:{default:r};function o(e){var r=(e=e||{}).blacklistController;return {select:function(e){var n=0,t=void 0;return e&&e.some(function(e,t){return n=t,!r.contains(e.serviceLocation)})&&(t=e[n]),t}}}o.__dashjs_factory_name="BasicSelector",n.default=a.default.getClassFactory(o),t.exports=n.default;},{47:47}],223:[function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0});var r,i=e(47),a=(r=i)&&r.__esModule?r:{default:r};function o(e){var n=(e=e||{}).blacklistController;return {select:function(e){return e&&function(e){var t=0,n=[],r=0,i=void 0,a=void 0;if((a=e.sort(function(e,t){var n=e.dvb_priority-t.dvb_priority;return isNaN(n)?0:n}).filter(function(e,t,n){return !t||n[0].dvb_priority&&e.dvb_priority&&n[0].dvb_priority===e.dvb_priority})).length)return 1<a.length&&(a.forEach(function(e){t+=e.dvb_weight,n.push(t);}),i=Math.floor(Math.random()*(t-1)),n.every(function(e,t){return r=t,!(i<e)})),a[r]}((t=[],e.filter(function(e){return !n.contains(e.serviceLocation)||(e.dvb_priority&&t.push(e.dvb_priority),!1)}).filter(function(e){return !t.length||!e.dvb_priority||-1===t.indexOf(e.dvb_priority)})));var t;}}}o.__dashjs_factory_name="DVBSelector",n.default=a.default.getClassFactory(o),t.exports=n.default;},{47:47}],224:[function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0});n.default=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.mediaType=null,this.bitrate=null,this.width=null,this.height=null,this.scanType=null,this.qualityIndex=NaN;},t.exports=n.default;},{}],225:[function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0});n.default=function e(t,n,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.code=t||null,this.message=n||null,this.data=r||null;},t.exports=n.default;},{}],226:[function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0});n.default=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.streamId=null,this.mediaInfo=null,this.segmentType=null,this.quality=NaN,this.index=NaN,this.bytes=null,this.start=NaN,this.end=NaN,this.duration=NaN,this.representationId=null,this.endFragment=null;},t.exports=n.default;},{}],227:[function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0});var r=function(e,t,n){return t&&i(e.prototype,t),n&&i(e,n),e};function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r);}}var a=e(241),o=(r(s,[{key:"isInitializationRequest",value:function(){return this.type&&this.type===a.HTTPRequest.INIT_SEGMENT_TYPE}},{key:"setInfo",value:function(e){this.type=e&&e.init?a.HTTPRequest.INIT_SEGMENT_TYPE:a.HTTPRequest.MEDIA_SEGMENT_TYPE,this.url=e&&e.url?e.url:null,this.range=e&&e.range?e.range.start+"-"+e.range.end:null,this.mediaType=e&&e.mediaType?e.mediaType:null;}}]),s);function s(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,s),this.action=s.ACTION_DOWNLOAD,this.startTime=NaN,this.mediaType=null,this.mediaInfo=null,this.type=null,this.duration=NaN,this.timescale=NaN,this.range=null,this.url=e||null,this.serviceLocation=null,this.requestStartDate=null,this.firstByteDate=null,this.requestEndDate=null,this.quality=NaN,this.index=NaN,this.availabilityStartTime=null,this.availabilityEndTime=null,this.wallStartTime=null,this.bytesLoaded=NaN,this.bytesTotal=NaN,this.delayLoadingTime=NaN,this.responseType="arraybuffer",this.representationId=null;}o.ACTION_DOWNLOAD="download",o.ACTION_COMPLETE="complete",n.default=o,t.exports=n.default;},{241:241}],228:[function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0});var r=function(e,t,n){for(var r=!0;r;){var i=e,a=t,o=n,r=!1;null===i&&(i=Function.prototype);var s=Object.getOwnPropertyDescriptor(i,a);if(void 0!==s){if("value"in s)return s.value;var u=s.get;if(void 0===u)return;return u.call(o)}var l=Object.getPrototypeOf(i);if(null===l)return;e=l,t=a,n=o,r=!0,s=l=void 0;}};var i,a=e(227),o=(function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t);}(s,((i=a)&&i.__esModule?i:{default:i}).default),s);function s(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,s),r(Object.getPrototypeOf(s.prototype),"constructor",this).call(this,e),this.checkForExistenceOnly=!0;}n.default=o,t.exports=n.default;},{227:227}],229:[function(e,t,n){function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r);}}Object.defineProperty(n,"__esModule",{value:!0});var i=(function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}(a,[{key:"getChildBox",value:function(e){for(var t=0;t<this.boxes.length;t++)if(this.boxes[t].type===e)return this.boxes[t]}},{key:"getChildBoxes",value:function(e){for(var t=[],n=0;n<this.boxes.length;n++)this.boxes[n].type===e&&t.push(this.boxes[n]);return t}}]),a);function a(e){if(!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),this.offset=e._offset,this.type=e.type,this.size=e.size,this.boxes=[],e.boxes)for(var t=0;t<e.boxes.length;t++)this.boxes.push(new a(e.boxes[t]));switch(this.isComplete=!0,e.type){case"sidx":if(this.timescale=e.timescale,this.earliest_presentation_time=e.earliest_presentation_time,this.first_offset=e.first_offset,this.references=e.references,e.references){this.references=[];for(t=0;t<e.references.length;t++){var n={reference_type:e.references[t].reference_type,referenced_size:e.references[t].referenced_size,subsegment_duration:e.references[t].subsegment_duration};this.references.push(n);}}break;case"emsg":this.id=e.id,this.value=e.value,this.timescale=e.timescale,this.scheme_id_uri=e.scheme_id_uri,this.presentation_time_delta=1===e.version?e.presentation_time:e.presentation_time_delta,this.event_duration=e.event_duration,this.message_data=e.message_data;break;case"mdhd":this.timescale=e.timescale;break;case"mfhd":this.sequence_number=e.sequence_number;break;case"subs":this.entry_count=e.entry_count,this.entries=e.entries;break;case"tfhd":this.base_data_offset=e.base_data_offset,this.sample_description_index=e.sample_description_index,this.default_sample_duration=e.default_sample_duration,this.default_sample_size=e.default_sample_size,this.default_sample_flags=e.default_sample_flags,this.flags=e.flags;break;case"tfdt":this.version=e.version,this.baseMediaDecodeTime=e.baseMediaDecodeTime,this.flags=e.flags;break;case"trun":if(this.sample_count=e.sample_count,this.first_sample_flags=e.first_sample_flags,this.data_offset=e.data_offset,this.flags=e.flags,this.samples=e.samples,e.samples){this.samples=[];for(var t=0,r=e.samples.length;t<r;t++){var i={sample_size:e.samples[t].sample_size,sample_duration:e.samples[t].sample_duration,sample_composition_time_offset:e.samples[t].sample_composition_time_offset};this.samples.push(i);}}}}n.default=i,t.exports=n.default;},{}],230:[function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0});n.default=function e(t,n,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.lastCompletedOffset=t,this.found=n,this.size=r;},t.exports=n.default;},{}],231:[function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0});n.default=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.TcpList=[],this.HttpList=[],this.RepSwitchList=[],this.BufferLevel=[],this.BufferState=[],this.PlayList=[],this.DroppedFrames=[],this.SchedulingInfo=[],this.DVRInfo=[],this.ManifestUpdate=[],this.RequestsQueue=null,this.DVBErrors=[];},t.exports=n.default;},{}],232:[function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0});var r=function(e,t,n){for(var r=!0;r;){var i=e,a=t,o=n,r=!1;null===i&&(i=Function.prototype);var s=Object.getOwnPropertyDescriptor(i,a);if(void 0!==s){if("value"in s)return s.value;var u=s.get;if(void 0===u)return;return u.call(o)}var l=Object.getPrototypeOf(i);if(null===l)return;e=l,t=a,n=o,r=!0,s=l=void 0;}};function i(e){return e&&e.__esModule?e:{default:e}}var a=i(e(108)),o=(function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t);}(s,i(e(227)).default),s);function s(e,t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,s),r(Object.getPrototypeOf(s.prototype),"constructor",this).call(this),this.url=e||null,this.type=t||null,this.mediaType=a.default.STREAM,this.responseType="";}n.default=o,t.exports=n.default;},{108:108,227:227}],233:[function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0});n.default=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.captionData=null,this.label=null,this.lang=null,this.defaultTrack=!1,this.kind=null,this.isFragmented=!1,this.isEmbedded=!1;},t.exports=n.default;},{}],234:[function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0});n.default=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.url=null,this.width=null,this.height=null,this.x=null,this.y=null;},t.exports=n.default;},{}],235:[function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0});n.default=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.bitrate=0,this.width=0,this.height=0,this.tilesHor=0,this.tilesVert=0,this.widthPerTile=0,this.heightPerTile=0,this.startNumber=0,this.segmentDuration=0,this.timescale=0,this.templateUrl="",this.id="";},t.exports=n.default;},{}],236:[function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0});n.default=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.t=null,this.xywh=null,this.track=null,this.id=null,this.s=null,this.r=null;},t.exports=n.default;},{}],237:[function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0});n.default=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.t=null,this.level=null;},t.exports=n.default;},{}],238:[function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0});var r,i=e(109),a=(r=i)&&r.__esModule?r:{default:r};n.default=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.target=null,this.state=a.default.BUFFER_EMPTY;},t.exports=n.default;},{109:109}],239:[function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0});n.default=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.time=null,this.range=null,this.manifestInfo=null;},t.exports=n.default;},{}],240:[function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0});n.default=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.time=null,this.droppedFrames=null;},t.exports=n.default;},{}],241:[function(e,t,n){function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});function i(){r(this,i),this.tcpid=null,this.type=null,this.url=null,this.actualurl=null,this.range=null,this.trequest=null,this.tresponse=null,this.responsecode=null,this.interval=null,this.trace=[],this._stream=null,this._tfinish=null,this._mediaduration=null,this._quality=null,this._responseHeaders=null,this._serviceLocation=null;}i.GET="GET",i.HEAD="HEAD",i.MPD_TYPE="MPD",i.XLINK_EXPANSION_TYPE="XLinkExpansion",i.INIT_SEGMENT_TYPE="InitializationSegment",i.INDEX_SEGMENT_TYPE="IndexSegment",i.MEDIA_SEGMENT_TYPE="MediaSegment",i.BITSTREAM_SWITCHING_SEGMENT_TYPE="BitstreamSwitchingSegment",i.OTHER_TYPE="other",n.HTTPRequest=i,n.HTTPRequestTrace=function e(){r(this,e),this.s=null,this.d=null,this.b=[];};},{}],242:[function(e,t,n){function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});n.ManifestUpdate=function e(){r(this,e),this.mediaType=null,this.type=null,this.requestTime=null,this.fetchTime=null,this.availabilityStartTime=null,this.presentationStartTime=0,this.clientTimeOffset=0,this.currentTime=null,this.buffered=null,this.latency=0,this.streamInfo=[],this.representationInfo=[];},n.ManifestUpdateStreamInfo=function e(){r(this,e),this.id=null,this.index=null,this.start=null,this.duration=null;},n.ManifestUpdateRepresentationInfo=function e(){r(this,e),this.id=null,this.index=null,this.mediaType=null,this.streamIndex=null,this.presentationTimeOffset=null,this.startNumber=null,this.fragmentInfoType=null;};},{}],243:[function(e,t,n){function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});function i(){r(this,i),this.start=null,this.mstart=null,this.starttype=null,this.trace=[];}i.INITIAL_PLAYOUT_START_REASON="initial_playout",i.SEEK_START_REASON="seek",i.RESUME_FROM_PAUSE_START_REASON="resume",i.METRICS_COLLECTION_START_REASON="metrics_collection_start";function a(){r(this,a),this.representationid=null,this.subreplevel=null,this.start=null,this.mstart=null,this.duration=null,this.playbackspeed=null,this.stopreason=null;}a.REPRESENTATION_SWITCH_STOP_REASON="representation_switch",a.REBUFFERING_REASON="rebuffering",a.USER_REQUEST_STOP_REASON="user_request",a.END_OF_PERIOD_STOP_REASON="end_of_period",a.END_OF_CONTENT_STOP_REASON="end_of_content",a.METRICS_COLLECTION_STOP_REASON="metrics_collection_end",a.FAILURE_STOP_REASON="failure",n.PlayList=i,n.PlayListTrace=a;},{}],244:[function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0});n.default=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.t=null,this.mt=null,this.to=null,this.lto=null;},t.exports=n.default;},{}],245:[function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0});n.default=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.loadingRequests=[],this.executedRequests=[];},t.exports=n.default;},{}],246:[function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0});n.default=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.mediaType=null,this.t=null,this.type=null,this.startTime=null,this.availabilityStartTime=null,this.duration=null,this.quality=null,this.range=null,this.state=null;},t.exports=n.default;},{}]},{},[4]);

// MSS support
!function a(o,s,u){function l(t,e){if(!s[t]){if(!o[t]){var r="function"==typeof require&&require;if(!e&&r)return r(t,!0);if(f)return f(t,!0);var n=new Error("Cannot find module '"+t+"'");throw n.code="MODULE_NOT_FOUND",n}var i=s[t]={exports:{}};o[t][0].call(i.exports,function(e){return l(o[t][1][e]||e)},i,i.exports,a,o,s,u);}return s[t].exports}for(var f="function"==typeof require&&require,e=0;e<u.length;e++)l(u[e]);return l}({1:[function(e,t,r){var W=function(u){var v=1e7,p=7,t=9007199254740992,r=b(t),d="0123456789abcdefghijklmnopqrstuvwxyz",c="function"==typeof BigInt;function h(e,t,r,n){return void 0===e?h[0]:void 0!==t&&(10!=+t||r)?Y(e,t,r,n):J(e)}function m(e,t){this.value=e,this.sign=t,this.isSmall=!1;}function g(e){this.value=e,this.sign=e<0,this.isSmall=!0;}function y(e){this.value=e;}function _(e){return -t<e&&e<t}function b(e){return e<1e7?[e]:e<1e14?[e%1e7,Math.floor(e/1e7)]:[e%1e7,Math.floor(e/1e7)%1e7,Math.floor(e/1e14)]}function T(e){A(e);var t=e.length;if(t<4&&O(e,r)<0)switch(t){case 0:return 0;case 1:return e[0];case 2:return e[0]+e[1]*v;default:return e[0]+(e[1]+e[2]*v)*v}return e}function A(e){for(var t=e.length;0===e[--t];);e.length=t+1;}function S(e){for(var t=new Array(e),r=-1;++r<e;)t[r]=0;return t}function E(e){return 0<e?Math.floor(e):Math.ceil(e)}function n(e,t){for(var r,n=e.length,i=t.length,a=new Array(n),o=0,s=v,u=0;u<i;u++)o=s<=(r=e[u]+t[u]+o)?1:0,a[u]=r-o*s;for(;u<n;)o=(r=e[u]+o)===s?1:0,a[u++]=r-o*s;return 0<o&&a.push(o),a}function w(e,t){return e.length>=t.length?n(e,t):n(t,e)}function i(e,t){for(var r,n=e.length,i=new Array(n),a=v,o=0;o<n;o++)r=e[o]-a+t,t=Math.floor(r/a),i[o]=r-t*a,t+=1;for(;0<t;)i[o++]=t%a,t=Math.floor(t/a);return i}function M(e,t){for(var r,n=e.length,i=t.length,a=new Array(n),o=0,s=v,u=0;u<i;u++)o=(r=e[u]-o-t[u])<0?(r+=s,1):0,a[u]=r;for(u=i;u<n;u++){if(!((r=e[u]-o)<0)){a[u++]=r;break}r+=s,a[u]=r;}for(;u<n;u++)a[u]=e[u];return A(a),a}function l(e,t,r){for(var n,i=e.length,a=new Array(i),o=-t,s=v,u=0;u<i;u++)n=e[u]+o,o=Math.floor(n/s),n%=s,a[u]=n<0?n+s:n;return "number"==typeof(a=T(a))?(r&&(a=-a),new g(a)):new m(a,r)}function I(e,t){for(var r,n,i,a=e.length,o=t.length,s=S(a+o),u=v,l=0;l<a;++l){i=e[l];for(var f=0;f<o;++f)r=i*t[f]+s[l+f],n=Math.floor(r/u),s[l+f]=r-n*u,s[l+f+1]+=n;}return A(s),s}function D(e,t){for(var r,n=e.length,i=new Array(n),a=v,o=0,s=0;s<n;s++)r=e[s]*t+o,o=Math.floor(r/a),i[s]=r-o*a;for(;0<o;)i[s++]=o%a,o=Math.floor(o/a);return i}function P(e,t){for(var r=[];0<t--;)r.push(0);return r.concat(e)}function a(e,t,r){return new m(e<v?D(t,e):I(t,b(e)),r)}function o(e){for(var t,r,n,i=e.length,a=S(i+i),o=v,s=0;s<i;s++){r=0-(n=e[s])*n;for(var u=s;u<i;u++)t=n*e[u]*2+a[s+u]+r,r=Math.floor(t/o),a[s+u]=t-r*o;a[s+i]=r;}return A(a),a}function C(e,t){for(var r,n,i=e.length,a=S(i),o=v,s=0,u=i-1;0<=u;--u)s=(n=s*o+e[u])-(r=E(n/t))*t,a[u]=0|r;return [a,0|s]}function x(e,t){var r,n=J(t);if(c)return [new y(e.value/n.value),new y(e.value%n.value)];var i=e.value,a=n.value;if(0===a)throw new Error("Cannot divide by zero");if(e.isSmall)return n.isSmall?[new g(E(i/a)),new g(i%a)]:[h[0],e];if(n.isSmall){if(1===a)return [e,h[0]];if(-1==a)return [e.negate(),h[0]];var o=Math.abs(a);if(o<v){l=T((r=C(i,o))[0]);var s=r[1];return e.sign&&(s=-s),"number"==typeof l?(e.sign!==n.sign&&(l=-l),[new g(l),new g(s)]):[new m(l,e.sign!==n.sign),new g(s)]}a=b(o);}var u=O(i,a);if(-1===u)return [h[0],e];if(0===u)return [h[e.sign===n.sign?1:-1],h[0]];l=(r=(i.length+a.length<=200?function(e,t){var r,n,i,a,o,s,u,l=e.length,f=t.length,p=v,d=S(t.length),c=t[f-1],h=Math.ceil(p/(2*c)),m=D(e,h),g=D(t,h);for(m.length<=l&&m.push(0),g.push(0),c=g[f-1],n=l-f;0<=n;n--){for(r=p-1,m[n+f]!==c&&(r=Math.floor((m[n+f]*p+m[n+f-1])/c)),a=i=0,s=g.length,o=0;o<s;o++)i+=r*g[o],u=Math.floor(i/p),a+=m[n+o]-(i-u*p),i=u,a=a<0?(m[n+o]=a+p,-1):(m[n+o]=a,0);for(;0!==a;){for(--r,o=i=0;o<s;o++)i=(i+=m[n+o]-p+g[o])<0?(m[n+o]=i+p,0):(m[n+o]=i,1);a+=i;}d[n]=r;}return m=C(m,h)[0],[T(d),T(m)]}:function(e,t){for(var r,n,i,a,o,s=e.length,u=t.length,l=[],f=[],p=v;s;)if(f.unshift(e[--s]),A(f),O(f,t)<0)l.push(0);else {i=f[(n=f.length)-1]*p+f[n-2],a=t[u-1]*p+t[u-2],u<n&&(i=(i+1)*p),r=Math.ceil(i/a);do{if(O(o=D(t,r),f)<=0)break;r--;}while(r);l.push(r),f=M(f,o);}return l.reverse(),[T(l),T(f)]})(i,a))[0];var l,f=e.sign!==n.sign,p=r[1],d=e.sign;return [l="number"==typeof l?(f&&(l=-l),new g(l)):new m(l,f),p="number"==typeof p?(d&&(p=-p),new g(p)):new m(p,d)]}function O(e,t){if(e.length!==t.length)return e.length>t.length?1:-1;for(var r=e.length-1;0<=r;r--)if(e[r]!==t[r])return e[r]>t[r]?1:-1;return 0}function f(e){var t=e.abs();return !t.isUnit()&&(!!(t.equals(2)||t.equals(3)||t.equals(5))||!(t.isEven()||t.isDivisibleBy(3)||t.isDivisibleBy(5))&&(!!t.lesser(49)||void 0))}function N(e,t){for(var r,n,i,a=e.prev(),o=a,s=0;o.isEven();)o=o.divide(2),s++;e:for(n=0;n<t.length;n++)if(!e.lesser(t[n])&&!(i=W(t[n]).modPow(o,e)).isUnit()&&!i.equals(a)){for(r=s-1;0!=r;r--){if((i=i.square().mod(e)).isUnit())return !1;if(i.equals(a))continue e}return !1}return !0}m.prototype=Object.create(h.prototype),g.prototype=Object.create(h.prototype),y.prototype=Object.create(h.prototype),m.prototype.plus=m.prototype.add=function(e){var t=J(e);if(this.sign!==t.sign)return this.subtract(t.negate());var r=this.value,n=t.value;return t.isSmall?new m(i(r,Math.abs(n)),this.sign):new m(w(r,n),this.sign)},g.prototype.plus=g.prototype.add=function(e){var t=J(e),r=this.value;if(r<0!==t.sign)return this.subtract(t.negate());var n=t.value;if(t.isSmall){if(_(r+n))return new g(r+n);n=b(Math.abs(n));}return new m(i(n,Math.abs(r)),r<0)},y.prototype.plus=y.prototype.add=function(e){return new y(this.value+J(e).value)},m.prototype.minus=m.prototype.subtract=function(e){var t=J(e);if(this.sign!==t.sign)return this.add(t.negate());var r,n,i,a,o=this.value,s=t.value;return t.isSmall?l(o,Math.abs(s),this.sign):(r=o,n=s,i=this.sign,0<=O(r,n)?a=M(r,n):(a=M(n,r),i=!i),"number"==typeof(a=T(a))?(i&&(a=-a),new g(a)):new m(a,i))},g.prototype.minus=g.prototype.subtract=function(e){var t=J(e),r=this.value;if(r<0!==t.sign)return this.add(t.negate());var n=t.value;return t.isSmall?new g(r-n):l(n,Math.abs(r),0<=r)},y.prototype.minus=y.prototype.subtract=function(e){return new y(this.value-J(e).value)},m.prototype.negate=function(){return new m(this.value,!this.sign)},g.prototype.negate=function(){var e=this.sign,t=new g(-this.value);return t.sign=!e,t},y.prototype.negate=function(){return new y(-this.value)},m.prototype.abs=function(){return new m(this.value,!1)},g.prototype.abs=function(){return new g(Math.abs(this.value))},y.prototype.abs=function(){return new y(0<=this.value?this.value:-this.value)},m.prototype.times=m.prototype.multiply=function(e){var t,r,n,i=J(e),a=this.value,o=i.value,s=this.sign!==i.sign;if(i.isSmall){if(0===o)return h[0];if(1===o)return this;if(-1===o)return this.negate();if((t=Math.abs(o))<v)return new m(D(a,t),s);o=b(t);}return r=a.length,n=o.length,new m((0<-.012*r-.012*n+15e-6*r*n?function e(t,r){var n=Math.max(t.length,r.length);if(n<=30)return I(t,r);n=Math.ceil(n/2);var i=t.slice(n),a=t.slice(0,n),o=r.slice(n),s=r.slice(0,n),u=e(a,s),l=e(i,o),f=e(w(a,i),w(s,o)),p=w(w(u,P(M(M(f,u),l),n)),P(l,2*n));return A(p),p}:I)(a,o),s)},g.prototype._multiplyBySmall=function(e){return _(e.value*this.value)?new g(e.value*this.value):a(Math.abs(e.value),b(Math.abs(this.value)),this.sign!==e.sign)},m.prototype._multiplyBySmall=function(e){return 0===e.value?h[0]:1===e.value?this:-1===e.value?this.negate():a(Math.abs(e.value),this.value,this.sign!==e.sign)},g.prototype.times=g.prototype.multiply=function(e){return J(e)._multiplyBySmall(this)},y.prototype.times=y.prototype.multiply=function(e){return new y(this.value*J(e).value)},m.prototype.square=function(){return new m(o(this.value),!1)},g.prototype.square=function(){var e=this.value*this.value;return _(e)?new g(e):new m(o(b(Math.abs(this.value))),!1)},y.prototype.square=function(e){return new y(this.value*this.value)},y.prototype.divmod=g.prototype.divmod=m.prototype.divmod=function(e){var t=x(this,e);return {quotient:t[0],remainder:t[1]}},m.prototype.divide=function(e){return x(this,e)[0]},y.prototype.over=y.prototype.divide=function(e){return new y(this.value/J(e).value)},g.prototype.over=g.prototype.divide=m.prototype.over=m.prototype.divide,m.prototype.mod=function(e){return x(this,e)[1]},y.prototype.mod=y.prototype.remainder=function(e){return new y(this.value%J(e).value)},g.prototype.remainder=g.prototype.mod=m.prototype.remainder=m.prototype.mod,m.prototype.pow=function(e){var t,r,n,i=J(e),a=this.value,o=i.value;if(0===o)return h[1];if(0===a)return h[0];if(1===a)return h[1];if(-1===a)return i.isEven()?h[1]:h[-1];if(i.sign)return h[0];if(!i.isSmall)throw new Error("The exponent "+i.toString()+" is too large.");if(this.isSmall&&_(t=Math.pow(a,o)))return new g(E(t));for(r=this,n=h[1];!0&o&&(n=n.times(r),--o),0!==o;)o/=2,r=r.square();return n},g.prototype.pow=m.prototype.pow,y.prototype.pow=function(e){var t=J(e),r=this.value,n=t.value,i=BigInt(0),a=BigInt(1),o=BigInt(2);if(n===i)return h[1];if(r===i)return h[0];if(r===a)return h[1];if(r===BigInt(-1))return t.isEven()?h[1]:h[-1];if(t.isNegative())return new y(i);for(var s=this,u=h[1];(n&a)===a&&(u=u.times(s),--n),n!==i;)n/=o,s=s.square();return u},y.prototype.modPow=g.prototype.modPow=m.prototype.modPow=function(e,t){if(e=J(e),(t=J(t)).isZero())throw new Error("Cannot take modPow with modulus 0");for(var r=h[1],n=this.mod(t);e.isPositive();){if(n.isZero())return h[0];e.isOdd()&&(r=r.multiply(n).mod(t)),e=e.divide(2),n=n.square().mod(t);}return r},m.prototype.compareAbs=function(e){var t=J(e),r=this.value,n=t.value;return t.isSmall?1:O(r,n)},g.prototype.compareAbs=function(e){var t=J(e),r=Math.abs(this.value),n=t.value;return t.isSmall?r===(n=Math.abs(n))?0:n<r?1:-1:-1},y.prototype.compareAbs=function(e){var t=this.value,r=J(e).value;return (t=0<=t?t:-t)===(r=0<=r?r:-r)?0:r<t?1:-1},m.prototype.compareTo=m.prototype.compare=function(e){if(e===1/0)return -1;if(e===-1/0)return 1;var t=J(e),r=this.value,n=t.value;return this.sign!==t.sign?t.sign?1:-1:t.isSmall?this.sign?-1:1:O(r,n)*(this.sign?-1:1)},g.prototype.compareTo=g.prototype.compare=function(e){if(e===1/0)return -1;if(e===-1/0)return 1;var t=J(e),r=this.value,n=t.value;return t.isSmall?r==n?0:n<r?1:-1:r<0!==t.sign?r<0?-1:1:r<0?1:-1},y.prototype.compareTo=y.prototype.compare=function(e){if(e===1/0)return -1;if(e===-1/0)return 1;var t=this.value,r=J(e).value;return t===r?0:r<t?1:-1},y.prototype.eq=y.prototype.equals=g.prototype.eq=g.prototype.equals=m.prototype.eq=m.prototype.equals=function(e){return 0===this.compare(e)},y.prototype.neq=y.prototype.notEquals=g.prototype.neq=g.prototype.notEquals=m.prototype.neq=m.prototype.notEquals=function(e){return 0!==this.compare(e)},y.prototype.gt=y.prototype.greater=g.prototype.gt=g.prototype.greater=m.prototype.gt=m.prototype.greater=function(e){return 0<this.compare(e)},y.prototype.lt=y.prototype.lesser=g.prototype.lt=g.prototype.lesser=m.prototype.lt=m.prototype.lesser=function(e){return this.compare(e)<0},y.prototype.geq=y.prototype.greaterOrEquals=g.prototype.geq=g.prototype.greaterOrEquals=m.prototype.geq=m.prototype.greaterOrEquals=function(e){return 0<=this.compare(e)},y.prototype.leq=y.prototype.lesserOrEquals=g.prototype.leq=g.prototype.lesserOrEquals=m.prototype.leq=m.prototype.lesserOrEquals=function(e){return this.compare(e)<=0},m.prototype.isEven=function(){return 0==(1&this.value[0])},g.prototype.isEven=function(){return 0==(1&this.value)},y.prototype.isEven=function(){return (this.value&BigInt(1))===BigInt(0)},m.prototype.isOdd=function(){return 1==(1&this.value[0])},g.prototype.isOdd=function(){return 1==(1&this.value)},y.prototype.isOdd=function(){return (this.value&BigInt(1))===BigInt(1)},m.prototype.isPositive=function(){return !this.sign},y.prototype.isPositive=g.prototype.isPositive=function(){return 0<this.value},m.prototype.isNegative=function(){return this.sign},y.prototype.isNegative=g.prototype.isNegative=function(){return this.value<0},m.prototype.isUnit=function(){return !1},g.prototype.isUnit=function(){return 1===Math.abs(this.value)},y.prototype.isUnit=function(){return this.abs().value===BigInt(1)},m.prototype.isZero=function(){return !1},g.prototype.isZero=function(){return 0===this.value},y.prototype.isZero=function(){return this.value===BigInt(0)},y.prototype.isDivisibleBy=g.prototype.isDivisibleBy=m.prototype.isDivisibleBy=function(e){var t=J(e);return !t.isZero()&&(!!t.isUnit()||(0===t.compareAbs(2)?this.isEven():this.mod(t).isZero()))},y.prototype.isPrime=g.prototype.isPrime=m.prototype.isPrime=function(e){var t=f(this);if(t!==u)return t;var r=this.abs(),n=r.bitLength();if(n<=64)return N(r,[2,3,5,7,11,13,17,19,23,29,31,37]);for(var i=Math.log(2)*n.toJSNumber(),a=Math.ceil(!0===e?2*Math.pow(i,2):i),o=[],s=0;s<a;s++)o.push(W(s+2));return N(r,o)},y.prototype.isProbablePrime=g.prototype.isProbablePrime=m.prototype.isProbablePrime=function(e){var t=f(this);if(t!==u)return t;for(var r=this.abs(),n=e===u?5:e,i=[],a=0;a<n;a++)i.push(W.randBetween(2,r.minus(2)));return N(r,i)},y.prototype.modInv=g.prototype.modInv=m.prototype.modInv=function(e){for(var t,r,n,i=W.zero,a=W.one,o=J(e),s=this.abs();!s.isZero();)t=o.divide(s),r=i,n=o,i=a,o=s,a=r.subtract(t.multiply(a)),s=n.subtract(t.multiply(s));if(!o.isUnit())throw new Error(this.toString()+" and "+e.toString()+" are not co-prime");return -1===i.compare(0)&&(i=i.add(e)),this.isNegative()?i.negate():i},m.prototype.next=function(){var e=this.value;return this.sign?l(e,1,this.sign):new m(i(e,1),this.sign)},g.prototype.next=function(){var e=this.value;return e+1<t?new g(e+1):new m(r,!1)},y.prototype.next=function(){return new y(this.value+BigInt(1))},m.prototype.prev=function(){var e=this.value;return this.sign?new m(i(e,1),!0):l(e,1,this.sign)},g.prototype.prev=function(){var e=this.value;return -t<e-1?new g(e-1):new m(r,!0)},y.prototype.prev=function(){return new y(this.value-BigInt(1))};for(var s=[1];2*s[s.length-1]<=v;)s.push(2*s[s.length-1]);var B=s.length,F=s[B-1];function R(e){return Math.abs(e)<=v}function L(e,t,r){t=J(t);for(var n=e.isNegative(),i=t.isNegative(),a=n?e.not():e,o=i?t.not():t,s=0,u=0,l=null,f=null,p=[];!a.isZero()||!o.isZero();)s=(l=x(a,F))[1].toJSNumber(),n&&(s=F-1-s),u=(f=x(o,F))[1].toJSNumber(),i&&(u=F-1-u),a=l[0],o=f[0],p.push(r(s,u));for(var d=0!==r(n?1:0,i?1:0)?W(-1):W(0),c=p.length-1;0<=c;--c)d=d.multiply(F).add(W(p[c]));return d}y.prototype.shiftLeft=g.prototype.shiftLeft=m.prototype.shiftLeft=function(e){var t=J(e).toJSNumber();if(!R(t))throw new Error(String(t)+" is too large for shifting.");if(t<0)return this.shiftRight(-t);var r=this;if(r.isZero())return r;for(;B<=t;)r=r.multiply(F),t-=B-1;return r.multiply(s[t])},y.prototype.shiftRight=g.prototype.shiftRight=m.prototype.shiftRight=function(e){var t,r=J(e).toJSNumber();if(!R(r))throw new Error(String(r)+" is too large for shifting.");if(r<0)return this.shiftLeft(-r);for(var n=this;B<=r;){if(n.isZero()||n.isNegative()&&n.isUnit())return n;n=(t=x(n,F))[1].isNegative()?t[0].prev():t[0],r-=B-1;}return (t=x(n,s[r]))[1].isNegative()?t[0].prev():t[0]},y.prototype.not=g.prototype.not=m.prototype.not=function(){return this.negate().prev()},y.prototype.and=g.prototype.and=m.prototype.and=function(e){return L(this,e,function(e,t){return e&t})},y.prototype.or=g.prototype.or=m.prototype.or=function(e){return L(this,e,function(e,t){return e|t})},y.prototype.xor=g.prototype.xor=m.prototype.xor=function(e){return L(this,e,function(e,t){return e^t})};var q=1<<30,U=(v&-v)*(v&-v)|q;function j(e){var t=e.value,r="number"==typeof t?t|q:"bigint"==typeof t?t|BigInt(q):t[0]+t[1]*v|U;return r&-r}function k(e,t){return e=J(e),t=J(t),e.greater(t)?e:t}function G(e,t){return e=J(e),t=J(t),e.lesser(t)?e:t}function H(e,t){if(e=J(e).abs(),t=J(t).abs(),e.equals(t))return e;if(e.isZero())return t;if(t.isZero())return e;for(var r,n,i=h[1];e.isEven()&&t.isEven();)r=G(j(e),j(t)),e=e.divide(r),t=t.divide(r),i=i.multiply(r);for(;e.isEven();)e=e.divide(j(e));do{for(;t.isEven();)t=t.divide(j(t));e.greater(t)&&(n=t,t=e,e=n),t=t.subtract(e);}while(!t.isZero());return i.isUnit()?e:e.multiply(i)}y.prototype.bitLength=g.prototype.bitLength=m.prototype.bitLength=function(){var e=this;return e.compareTo(W(0))<0&&(e=e.negate().subtract(W(1))),0===e.compareTo(W(0))?W(0):W(function e(t,r){if(r.compareTo(t)<=0){var n=e(t,r.square(r)),i=n.p,a=n.e,o=i.multiply(r);return o.compareTo(t)<=0?{p:o,e:2*a+1}:{p:i,e:2*a}}return {p:W(1),e:0}}(e,W(2)).e).add(W(1))};var Y=function(e,t,r,n){r=r||d,e=String(e),n||(e=e.toLowerCase(),r=r.toLowerCase());for(var i=e.length,a=Math.abs(t),o={},s=0;s<r.length;s++)o[r[s]]=s;for(s=0;s<i;s++){if("-"!==(u=e[s])&&(u in o&&o[u]>=a)){if("1"===u&&1===a)continue;throw new Error(u+" is not a valid digit in base "+t+".")}}t=J(t);var u,l=[],f="-"===e[0];for(s=f?1:0;s<e.length;s++){if((u=e[s])in o)l.push(J(o[u]));else {if("<"!==u)throw new Error(u+" is not a valid character");for(var p=s;">"!==e[++s]&&s<e.length;);l.push(J(e.slice(p+1,s)));}}return K(l,t,f)};function K(e,t,r){for(var n=h[0],i=h[1],a=e.length-1;0<=a;a--)n=n.add(e[a].times(i)),i=i.times(t);return r?n.negate():n}function z(e,t){if((t=W(t)).isZero()){if(e.isZero())return {value:[0],isNegative:!1};throw new Error("Cannot convert nonzero numbers to base 0.")}if(t.equals(-1)){if(e.isZero())return {value:[0],isNegative:!1};if(e.isNegative())return {value:[].concat.apply([],Array.apply(null,Array(-e.toJSNumber())).map(Array.prototype.valueOf,[1,0])),isNegative:!1};var r=Array.apply(null,Array(e.toJSNumber()-1)).map(Array.prototype.valueOf,[0,1]);return r.unshift([1]),{value:[].concat.apply([],r),isNegative:!1}}var n=!1;if(e.isNegative()&&t.isPositive()&&(n=!0,e=e.abs()),t.isUnit())return e.isZero()?{value:[0],isNegative:!1}:{value:Array.apply(null,Array(e.toJSNumber())).map(Number.prototype.valueOf,1),isNegative:n};for(var i,a=[],o=e;o.isNegative()||0<=o.compareAbs(t);){o=(i=o.divmod(t)).quotient;var s=i.remainder;s.isNegative()&&(s=t.minus(s).abs(),o=o.next()),a.push(s.toJSNumber());}return a.push(o.toJSNumber()),{value:a.reverse(),isNegative:n}}function V(e,t,n){var r=z(e,t);return (r.isNegative?"-":"")+r.value.map(function(e){return (t=e)<(r=(r=n)||d).length?r[t]:"<"+t+">";var t,r;}).join("")}function Z(e){if(_(+e)){var t=+e;if(t===E(t))return c?new y(BigInt(t)):new g(t);throw new Error("Invalid integer: "+e)}var r="-"===e[0];r&&(e=e.slice(1));var n=e.split(/e/i);if(2<n.length)throw new Error("Invalid integer: "+n.join("e"));if(2===n.length){var i=n[1];if("+"===i[0]&&(i=i.slice(1)),(i=+i)!==E(i)||!_(i))throw new Error("Invalid integer: "+i+" is not a valid exponent.");var a=n[0],o=a.indexOf(".");if(0<=o&&(i-=a.length-o-1,a=a.slice(0,o)+a.slice(o+1)),i<0)throw new Error("Cannot include negative exponent part for integers");e=a+=new Array(i+1).join("0");}if(!/^([0-9][0-9]*)$/.test(e))throw new Error("Invalid integer: "+e);if(c)return new y(BigInt(r?"-"+e:e));for(var s=[],u=e.length,l=p,f=u-l;0<u;)s.push(+e.slice(f,u)),(f-=l)<0&&(f=0),u-=l;return A(s),new m(s,r)}function J(e){return "number"==typeof e?function(e){if(c)return new y(BigInt(e));if(_(e)){if(e!==E(e))throw new Error(e+" is not an integer.");return new g(e)}return Z(e.toString())}(e):"string"==typeof e?Z(e):"bigint"==typeof e?new y(e):e}m.prototype.toArray=function(e){return z(this,e)},g.prototype.toArray=function(e){return z(this,e)},y.prototype.toArray=function(e){return z(this,e)},m.prototype.toString=function(e,t){if(e===u&&(e=10),10!==e)return V(this,e,t);for(var r,n=this.value,i=n.length,a=String(n[--i]);0<=--i;)r=String(n[i]),a+="0000000".slice(r.length)+r;return (this.sign?"-":"")+a},y.prototype.toString=g.prototype.toString=function(e,t){return e===u&&(e=10),10!=e?V(this,e,t):String(this.value)},y.prototype.toJSON=m.prototype.toJSON=g.prototype.toJSON=function(){return this.toString()},m.prototype.toJSNumber=m.prototype.valueOf=function(){return parseInt(this.toString(),10)},g.prototype.toJSNumber=g.prototype.valueOf=function(){return this.value},y.prototype.valueOf=y.prototype.toJSNumber=function(){return parseInt(this.toString(),10)};for(var e=0;e<1e3;e++)h[e]=J(e),0<e&&(h[-e]=J(-e));return h.one=h[1],h.zero=h[0],h.minusOne=h[-1],h.max=k,h.min=G,h.gcd=H,h.lcm=function(e,t){return e=J(e).abs(),t=J(t).abs(),e.divide(H(e,t)).multiply(t)},h.isInstance=function(e){return e instanceof m||e instanceof g||e instanceof y},h.randBetween=function(e,t){var r=G(e=J(e),t=J(t)),n=k(e,t).subtract(r).add(1);if(n.isSmall)return r.add(Math.floor(Math.random()*n));for(var i=z(n,v).value,a=[],o=!0,s=0;s<i.length;s++){var u=o?i[s]:v,l=E(Math.random()*u);a.push(l),l<u&&(o=!1);}return r.add(h.fromArray(a,v,!1))},h.fromArray=function(e,t,r){return K(e.map(J),J(t||10),r)},h}();void 0!==t&&t.hasOwnProperty("exports")&&(t.exports=W),"function"==typeof define&&define.amd&&define("big-integer",[],function(){return W});},{}],2:[function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0});var u,a,n,i,o=(u=void 0,a=[],n={},i={},u={extend:function(e,t,r,n){!n[e]&&t&&(n[e]={instance:t,override:r});},getSingletonInstance:s,setSingletonInstance:function(e,t,r){for(var n in a){var i=a[n];if(i.context===e&&i.name===t)return void(a[n].instance=r)}a.push({name:t,context:e,instance:r});},getSingletonFactory:function(r){var e=l(r.__dashjs_factory_name,n);return e||(e=function(e){var t=void 0;return void 0===e&&(e={}),{getInstance:function(){return (t=t||s(e,r.__dashjs_factory_name))||(t=p(r,e,arguments),a.push({name:r.__dashjs_factory_name,context:e,instance:t})),t}}},n[r.__dashjs_factory_name]=e),e},getSingletonFactoryByName:function(e){return l(e,n)},updateSingletonFactory:function(e,t){f(e,t,n);},getClassFactory:function(t){var e=l(t.__dashjs_factory_name,i);return e||(e=function(e){return void 0===e&&(e={}),{create:function(){return p(t,e,arguments)}}},i[t.__dashjs_factory_name]=e),e},getClassFactoryByName:function(e){return l(e,i)},updateClassFactory:function(e,t){f(e,t,i);}});function s(e,t){for(var r in a){var n=a[r];if(n.context===e&&n.name===t)return n.instance}return null}function l(e,t){return t[e]}function f(e,t,r){e in r&&(r[e]=t);}function p(e,t,r){var n=void 0,i=e.__dashjs_factory_name,a=t[i];if(a){var o=a.instance;if(!a.override)return o.apply({context:t,factory:u},r);for(var s in n=e.apply({context:t},r),o=o.apply({context:t,factory:u,parent:n},r))n.hasOwnProperty(s)&&(n[s]=o[s]);}else n=e.apply({context:t},r);return n.getClassName=function(){return i},n}r.default=o,t.exports=r.default;},{}],3:[function(e,t,r){function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n);}}Object.defineProperty(r,"__esModule",{value:!0});var i=(function(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),e}(a,[{key:"extend",value:function(e,t){if(e){var r=!!t&&t.override,n=!!t&&t.publicOnly;for(var i in e)!e.hasOwnProperty(i)||this[i]&&!r||n&&-1===e[i].indexOf("public_")||(this[i]=e[i]);}}}]),a);function a(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a);}r.default=i,t.exports=r.default;},{}],4:[function(e,t,r){function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n);}}Object.defineProperty(r,"__esModule",{value:!0});var i=(function(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),e}(a,[{key:"extend",value:function(e,t){if(e){var r=!!t&&t.override,n=!!t&&t.publicOnly;for(var i in e)!e.hasOwnProperty(i)||this[i]&&!r||n&&-1===e[i].indexOf("public_")||(this[i]=e[i]);}}}]),a);function a(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a);}r.default=i,t.exports=r.default;},{}],5:[function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0});var n,i=e(17),v=(n=i)&&n.__esModule?n:{default:n};function a(e){var t,l=void 0,f=void 0,p=void 0,d=void 0,a=void 0,o=void 0,s=void 0,c=void 0,h=(e=e||{}).streamProcessor,m=e.baseURLController,r=e.debug;function g(){p&&(l.debug("Stop"),clearTimeout(a),p=!1,s=o=null);}function u(){var e,t,r,n,i,a,o,s,u;p&&(n=(r=(t=(e=h.getRepresentationController().getCurrentRepresentation()).adaptation.period.mpd.manifest.Period_asArray[e.adaptation.period.index].AdaptationSet_asArray[e.adaptation.index]).SegmentTemplate.SegmentTimeline.S_asArray)[r.length-1],a=e,o=n,s=(i=t).SegmentTemplate.timescale,(u=new v.default).mediaType=d,u.type="FragmentInfoSegment",u.startTime=o.t/s,u.duration=o.d/s,u.timescale=s,u.quality=a.index,u.index=c++,u.mediaInfo=h.getMediaInfo(),u.adaptationIndex=a.adaptation.index,u.representationId=a.id,u.url=m.resolve(a.path).url+i.SegmentTemplate.media,u.url=u.url.replace("$Bandwidth$",a.bandwidth),u.url=u.url.replace("$Time$",o.tManifest?o.tManifest:o.t),u.url=u.url.replace("/Fragments(","/FragmentInfo("),function(e){if(h.getFragmentModel().isFragmentLoadedOrPending(e))return l.debug("End of timeline"),void g();f.executeRequest(e);}.call(this,u));}return t={initialize:function(){d=h.getType(),f=h.getFragmentModel(),p=!1,s=o=null;},controllerType:"MssFragmentInfoController",start:function(){p||(l.debug("Start"),p=!0,o=(new Date).getTime(),c=0,u());},fragmentInfoLoaded:function(e){var t,r,n,i;p&&(t=e.request,e.response?(s=s||t.startTime,n=((new Date).getTime()-o)/1e3,r=t.startTime+t.duration-s,i=Math.max(0,r-n),clearTimeout(a),a=setTimeout(function(){a=null,u();},1e3*i)):l.error("Load error",t.url));},getType:function(){return d},reset:function(){g();}},l=r.getLogger(t),t}a.__dashjs_factory_name="MssFragmentInfoController",r.default=dashjs.FactoryMaker.getClassFactory(a),t.exports=r.default;},{17:17}],6:[function(e,t,r){function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(r,"__esModule",{value:!0});var w=n(e(15)),M=n(e(10)),I=n(e(13));function i(e){var t,y=void 0,i=void 0,a=(e=e||{}).dashMetrics,o=e.playbackController,_=e.errHandler,b=e.eventBus,T=e.ISOBoxer,r=e.debug;function A(e,t,r,n){var i=n.getRepresentationController(),a=i.getCurrentRepresentation(),o=a.adaptation.period.mpd.manifest,s=o.Period_asArray[a.adaptation.period.index].AdaptationSet_asArray[a.adaptation.index],u=s.SegmentTemplate.timescale;if(y=n.getType(),"dynamic"===o.type||o.timeShiftBufferDepth)if(t){var l,f,p=s.SegmentTemplate.SegmentTimeline.S,d=t.entry,c=void 0,h=void 0,m=null,g=0,v=null;if(0!==d.length&&(l=d[0],!("static"===o.type&&(c=p[0].tManifest?parseFloat(p[0].tManifest):p[0].t,l.fragment_absolute_time>c+o.timeShiftBufferDepth*u)))){if(c=p[p.length-1].tManifest?parseFloat(p[p.length-1].tManifest):p[p.length-1].t,l.fragment_absolute_time<=c)return h={start:p[0].t/u,end:r.baseMediaDecodeTime/u+e.duration},void S(e.mediaType,h,n.getStreamInfo().manifestInfo);if((m={}).t=l.fragment_absolute_time,m.d=l.fragment_duration,p[0].tManifest&&(m.t-=parseFloat(p[0].tManifest)-p[0].t,m.tManifest=l.fragment_absolute_time),p.push(m),"static"!==o.type){if(o.timeShiftBufferDepth&&0<o.timeShiftBufferDepth){for(g=(m=p[p.length-1]).t,v=Math.round((g-o.timeShiftBufferDepth*u)/u),m=p[0];Math.round(m.t/u)<v;)p.splice(0,1),m=p[0];h={start:p[0].t/u,end:r.baseMediaDecodeTime/u+e.duration},S(y,h,n.getStreamInfo().manifestInfo);}i.updateRepresentation(a,!0);}else "video"!==y||(f=((m=p[p.length-1]).t+m.d)/u)>a.adaptation.period.duration&&b.trigger(I.default.MANIFEST_VALIDITY_CHANGED,{sender:this,newDuration:f});}}else _.error(new w.default(M.default.MSS_NO_TFRF_CODE,M.default.MSS_NO_TFRF_MESSAGE));}function S(e,t,r){var n=a.getCurrentDVRInfo(e);(!n||t.end>n.range.end)&&(i.debug("Update DVR range: ["+t.start+" - "+t.end+"]"),a.addDVRInfo(e,o.getTime(),r,t));}function E(e,t){for(var r=8,n=0,n=0;n<e.boxes.length;n++){if(e.boxes[n].type===t)return r;r+=e.boxes[n].size;}return r}return t={convertFragment:function(e,t){var r=void 0,n=T.parseBuffer(e.response),i=n.fetch("tfhd");i.track_ID=e.request.mediaInfo.index+1;var a=n.fetch("tfdt"),o=n.fetch("traf");null===a&&((a=T.createFullBox("tfdt",o,i)).version=1,a.flags=0,a.baseMediaDecodeTime=Math.floor(e.request.startTime*e.request.timescale));var s=n.fetch("trun"),u=n.fetch("tfxd");u&&(u._parent.boxes.splice(u._parent.boxes.indexOf(u),1),u=null);var l=n.fetch("tfrf");A(e.request,l,a,t),l&&(l._parent.boxes.splice(l._parent.boxes.indexOf(l),1),l=null);var f=n.fetch("sepiff");if(null!==f){f.type="senc",f.usertype=void 0;var p=n.fetch("saio");if(null===p){(p=T.createFullBox("saio",o)).version=0,p.flags=0,p.entry_count=1,p.offset=[0];var d=T.createFullBox("saiz",o);if(d.version=0,d.flags=0,d.sample_count=f.sample_count,d.default_sample_info_size=0,d.sample_info_size=[],2&f.flags)for(r=0;r<f.sample_count;r+=1)d.sample_info_size[r]=10+6*f.entry[r].NumberOfEntries;else d.default_sample_info_size=8;}}i.flags&=16777214,i.flags|=131072,s.flags|=1;var c=n.fetch("moof"),h=c.getLength();s.data_offset=h+8;var m,g,v=n.fetch("saio");null!==v&&(m=E(c,"traf"),g=E(o,"senc"),v.offset[0]=m+g+16),e.response=n.write();},updateSegmentList:function(e,t){if(!e.response)throw new Error("e.response parameter is missing");var r=T.parseBuffer(e.response),n=r.fetch("tfhd");n.track_ID=e.request.mediaInfo.index+1;var i=r.fetch("tfdt"),a=r.fetch("traf");null===i&&((i=T.createFullBox("tfdt",a,n)).version=1,i.flags=0,i.baseMediaDecodeTime=Math.floor(e.request.startTime*e.request.timescale));var o=r.fetch("tfrf");A(e.request,o,i,t),o&&(o._parent.boxes.splice(o._parent.boxes.indexOf(o),1),o=null);},getType:function(){return y}},i=r.getLogger(t),y="",t}i.__dashjs_factory_name="MssFragmentMoofProcessor",r.default=dashjs.FactoryMaker.getClassFactory(i),t.exports=r.default;},{10:10,13:13,15:15}],7:[function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0});var n,i=e(10),B=(n=i)&&n.__esModule?n:{default:n};function a(e){var _=7,b=8,T=(e=e||{}).constants,A=e.ISOBoxer,S=e.protectionController,E=void 0,w=void 0,M=void 0,I=void 0,D=void 0,P=void 0;function i(e){var t,r,n=A.createBox("moov",e);t=n,(r=A.createFullBox("mvhd",t)).version=1,r.creation_time=0,r.modification_time=0,r.timescale=D,r.duration=E.duration===1/0?0x10000000000000000:Math.round(E.duration*D),r.rate=1,r.volume=1,r.reserved1=0,r.reserved2=[0,0],r.matrix=[1,0,0,0,1,0,0,0,16384],r.pre_defined=[0,0,0,0,0,0],r.next_track_ID=P+1;var i,a,o=A.createBox("trak",n);i=o,(a=A.createFullBox("tkhd",i)).version=1,a.flags=7,a.creation_time=0,a.modification_time=0,a.track_ID=P,a.reserved1=0,a.duration=E.duration===1/0?0x10000000000000000:Math.round(E.duration*D),a.reserved2=[0,0],a.layer=0,a.alternate_group=0,a.volume=1,a.reserved3=0,a.matrix=[1,0,0,0,1,0,0,0,16384],a.width=M.width,a.height=M.height;var s,u,l=A.createBox("mdia",o);s=l,(u=A.createFullBox("mdhd",s)).version=1,u.creation_time=0,u.modification_time=0,u.timescale=D,u.duration=E.duration===1/0?0x10000000000000000:Math.round(E.duration*D),u.language=w.lang||"und",u.pre_defined=0,function(e){var t=A.createFullBox("hdlr",e);switch(t.pre_defined=0,w.type){case T.VIDEO:t.handler_type="vide";break;case T.AUDIO:t.handler_type="soun";break;default:t.handler_type="meta";}t.name=M.id,t.reserved=[0,0,0];}(l);var f,p,d,c,h=A.createBox("minf",l);switch(w.type){case T.VIDEO:d=h,(c=A.createFullBox("vmhd",d)).flags=1,c.graphicsmode=0,c.opcolor=[0,0,0];break;case T.AUDIO:f=h,(p=A.createFullBox("smhd",f)).flags=1,p.balance=0,p.reserved=0;}!function(e){var t=A.createFullBox("dref",e);t.entry_count=1,t.entries=[];var r=A.createFullBox("url ",t,!1);r.location="",r.flags=1,t.entries.push(r);}(A.createBox("dinf",h));var m=A.createBox("stbl",h);A.createFullBox("stts",m)._data=[0,0,0,0,0,0,0,0],A.createFullBox("stsc",m)._data=[0,0,0,0,0,0,0,0],A.createFullBox("stco",m)._data=[0,0,0,0,0,0,0,0],A.createFullBox("stsz",m)._data=[0,0,0,0,0,0,0,0,0,0,0,0],function(e){var t=A.createFullBox("stsd",e);switch(t.entries=[],w.type){case T.VIDEO:case T.AUDIO:t.entries.push(function(e){var t=M.codecs.substring(0,M.codecs.indexOf("."));switch(t){case"avc1":return function(e,t){var r=void 0;r=I?A.createBox("encv",e,!1):A.createBox("avc1",e,!1);{var n;r.reserved1=[0,0,0,0,0,0],r.data_reference_index=1,r.pre_defined1=0,r.reserved2=0,r.pre_defined2=[0,0,0],r.height=M.height,r.width=M.width,r.horizresolution=72,r.vertresolution=72,r.reserved3=0,r.frame_count=1,r.compressorname=[10,65,86,67,32,67,111,100,105,110,103,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],r.depth=24,r.pre_defined3=65535,r.config=function(){for(var e=null,t=15,r=[],n=[],i=0,a=0,o=0,s=M.codecPrivateData.split("00000001").slice(1),u=void 0,l=0;l<s.length;l++)switch(u=N(s[l]),31&u[0]){case _:r.push(u),t+=u.length+2;break;case b:n.push(u),t+=u.length+2;}0<r.length&&(i=r[0][1],o=r[0][2],a=r[0][3]);e=new Uint8Array(t);var f=0;e[f++]=(4278190080&t)>>24,e[f++]=(16711680&t)>>16,e[f++]=(65280&t)>>8,e[f++]=255&t,e.set([97,118,99,67],f),f+=4,e[f++]=1,e[f++]=i,e[f++]=o,e[f++]=a,e[f++]=255,e[f++]=224|r.length;for(var p=0;p<r.length;p++)e[f++]=(65280&r[p].length)>>8,e[f++]=255&r[p].length,e.set(r[p],f),f+=r[p].length;e[f++]=n.length;for(p=0;p<n.length;p++)e[f++]=(65280&n[p].length)>>8,e[f++]=255&n[p].length,e.set(n[p],f),f+=n[p].length;return e}(),I&&(C(n=A.createBox("sinf",r),t),x(n),O(n));}return r}(e,t);case"mp4a":return function(e,t){var r=void 0;r=I?A.createBox("enca",e,!1):A.createBox("mp4a",e,!1);{var n;r.reserved1=[0,0,0,0,0,0],r.data_reference_index=1,r.reserved2=[0,0],r.channelcount=M.audioChannels,r.samplesize=16,r.pre_defined=0,r.reserved_3=0,r.samplerate=M.audioSamplingRate<<16,r.esds=function(){var e=N(M.codecPrivateData),t=34+e.length,r=new Uint8Array(t),n=0;return r[n++]=(4278190080&t)>>24,r[n++]=(16711680&t)>>16,r[n++]=(65280&t)>>8,r[n++]=255&t,r.set([101,115,100,115],n),n+=4,r.set([0,0,0,0],n),n+=4,r[n++]=3,r[n++]=20+e.length,r[n++]=(65280&P)>>8,r[n++]=255&P,r[n++]=0,r[n++]=4,r[n++]=15+e.length,r[n++]=64,r[n]=20,r[n]|=0,r[n++]|=1,r[n++]=255,r[n++]=255,r[n++]=255,r[n++]=(4278190080&M.bandwidth)>>24,r[n++]=(16711680&M.bandwidth)>>16,r[n++]=(65280&M.bandwidth)>>8,r[n++]=255&M.bandwidth,r[n++]=(4278190080&M.bandwidth)>>24,r[n++]=(16711680&M.bandwidth)>>16,r[n++]=(65280&M.bandwidth)>>8,r[n++]=255&M.bandwidth,r[n++]=5,r[n++]=e.length,r.set(e,n),r}(),I&&(C(n=A.createBox("sinf",r),t),x(n),O(n));}return r}(e,t);default:throw {code:B.default.MSS_UNSUPPORTED_CODEC_CODE,message:B.default.MSS_UNSUPPORTED_CODEC_MESSAGE,data:{codec:t}}}}(t));}t.entry_count=t.entries.length;}(m);var g,v,y=A.createBox("mvex",n);g=y,(v=A.createFullBox("trex",g)).track_ID=P,v.default_sample_description_index=1,v.default_sample_duration=0,v.default_sample_size=0,v.default_sample_flags=0,I&&S&&function(e,t){var r=void 0,n=void 0,i=void 0,a=void 0;for(i=0;i<t.length;i+=1)(r=t[i].initData)&&(a=A.parseBuffer(r),(n=a.fetch("pssh"))&&A.Utils.appendBox(e,n));}(n,S.getSupportedKeySystemsFromContentProtection(I));}function C(e,t){A.createBox("frma",e).data_format=function(e){var t=0,r=void 0;for(r=0;r<e.length;r+=1)t|=e.charCodeAt(r)<<8*(e.length-r-1);return t}(t);}function x(e){var t=A.createFullBox("schm",e);t.flags=0,t.version=0,t.scheme_type=1667591779,t.scheme_version=65536;}function O(e){var t,r,n=A.createBox("schi",e);t=n,(r=A.createFullBox("tenc",t)).flags=0,r.version=0,r.default_IsEncrypted=1,r.default_IV_size=8,r.default_KID=I&&0<I.length&&I[0]["cenc:default_KID"]?I[0]["cenc:default_KID"]:[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];}function N(e){for(var t=new Uint8Array(e.length/2),r=void 0,r=0;r<e.length/2;r+=1)t[r]=parseInt(""+e[2*r]+e[2*r+1],16);return t}return {generateMoov:function(e){if(e&&e.adaptation){var t,r,n=void 0;return w=(M=e).adaptation,E=w.period,P=w.index+1,I=E.mpd.manifest.Period_asArray[E.index].AdaptationSet_asArray[w.index].ContentProtection,D=E.mpd.manifest.Period_asArray[E.index].AdaptationSet_asArray[w.index].SegmentTemplate.timescale,n=A.createFile(),t=n,(r=A.createBox("ftyp",t)).major_brand="iso6",r.minor_version=1,r.compatible_brands=[],r.compatible_brands[0]="isom",r.compatible_brands[1]="iso6",r.compatible_brands[2]="msdh",i(n),n.write()}}}}a.__dashjs_factory_name="MssFragmentMoovProcessor",r.default=dashjs.FactoryMaker.getClassFactory(a),t.exports=r.default;},{10:10}],8:[function(e,t,r){function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(r,"__esModule",{value:!0});var p=n(e(6)),d=n(e(7));function i(e,r){return e.length===r.length&&e.every(function(e,t){return e===r[t]})}function c(){this._procFullBox(),1&this.flags&&(this._procField("aux_info_type","uint",32),this._procField("aux_info_type_parameter","uint",32)),this._procField("entry_count","uint",32),this._procFieldArray("offset",this.entry_count,"uint",1===this.version?64:32);}function h(){this._procFullBox(),1&this.flags&&(this._procField("aux_info_type","uint",32),this._procField("aux_info_type_parameter","uint",32)),this._procField("default_sample_info_size","uint",8),this._procField("sample_count","uint",32),0===this.default_sample_info_size&&this._procFieldArray("sample_info_size",this.sample_count,"uint",8);}function m(){this._procFullBox(),this._procField("sample_count","uint",32),1&this.flags&&this._procField("IV_size","uint",8),this._procEntries("entry",this.sample_count,function(e){this._procEntryField(e,"InitializationVector","data",8),2&this.flags&&(this._procEntryField(e,"NumberOfEntries","uint",16),this._procSubEntries(e,"clearAndCryptedData",e.NumberOfEntries,function(e){this._procEntryField(e,"BytesOfClearData","uint",16),this._procEntryField(e,"BytesOfEncryptedData","uint",32);}));});}function g(){i(this.usertype,[109,29,155,5,66,213,68,230,128,226,20,29,175,247,87,178])&&(this._procFullBox(),this._parsing&&(this.type="tfxd"),this._procField("fragment_absolute_time","uint",1===this.version?64:32),this._procField("fragment_duration","uint",1===this.version?64:32)),i(this.usertype,[212,128,126,242,202,57,70,149,142,84,38,203,158,70,167,159])&&(this._procFullBox(),this._parsing&&(this.type="tfrf"),this._procField("fragment_count","uint",8),this._procEntries("entry",this.fragment_count,function(e){this._procEntryField(e,"fragment_absolute_time","uint",1===this.version?64:32),this._procEntryField(e,"fragment_duration","uint",1===this.version?64:32);})),i(this.usertype,[162,57,79,82,90,155,79,20,162,68,108,66,124,100,141,244])&&(this._parsing&&(this.type="sepiff"),m.call(this));}function a(e){e=e||{};var t,r=this.context,n=e.dashMetrics,i=e.playbackController,a=e.eventBus,o=e.protectionController,s=e.ISOBoxer,u=e.debug,l=void 0,f=void 0;return t={generateMoov:function(e){return l.generateMoov(e)},processFragment:function(e,t){if(!e||!e.request||!e.response)throw new Error("e parameter is missing or malformed");"MediaSegment"===e.request.type?f.convertFragment(e,t):"FragmentInfoSegment"===e.request.type&&(f.updateSegmentList(e,t),e.sender=null);}},s.addBoxProcessor("uuid",g),s.addBoxProcessor("saio",c),s.addBoxProcessor("saiz",h),s.addBoxProcessor("senc",m),l=(0, d.default)(r).create({protectionController:o,constants:e.constants,ISOBoxer:s}),f=(0, p.default)(r).create({dashMetrics:n,playbackController:i,ISOBoxer:s,eventBus:a,debug:u,errHandler:e.errHandler}),t}a.__dashjs_factory_name="MssFragmentProcessor",r.default=dashjs.FactoryMaker.getClassFactory(a),t.exports=r.default;},{6:6,7:7}],9:[function(e,t,r){function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(r,"__esModule",{value:!0});var A=n(e(16)),S=n(e(17)),E=n(e(5)),w=n(e(8)),M=n(e(12)),i=n(e(10)),I=n(e(15)),D=n(e(14));function a(f){f=f||{};var r=this.context,p=f.eventBus,d=f.events,n=f.constants,c=f.initSegmentType,e=f.dashMetrics,t=f.playbackController,i=f.streamController,a=f.protectionController,h=(0, w.default)(r).create({dashMetrics:e,playbackController:t,protectionController:a,streamController:i,eventBus:p,constants:n,ISOBoxer:f.ISOBoxer,debug:f.debug,errHandler:f.errHandler}),o=void 0,s=void 0,u=void 0;function m(t){return i.getActiveStreamProcessors().filter(function(e){return e.getType()===t})[0]}function l(t){return s.filter(function(e){return e.getType()===t})[0]}function g(){i.getActiveStreamProcessors().forEach(function(e){var t;e.getType()!==n.VIDEO&&e.getType()!==n.AUDIO&&e.getType()!==n.FRAGMENTED_TEXT||((t=l(e.getType()))||((t=(0, E.default)(r).create({streamProcessor:e,baseURLController:f.baseURLController,debug:f.debug})).initialize(),s.push(t)),t.start());});}function v(e){var t=m(e.sender.getType());if(t){var r=t.getRepresentationController().getCurrentRepresentation(),n=t.getMediaInfo(),i=new S.default;i.mediaType=r.adaptation.type,i.type=c,i.range=r.range,i.quality=r.index,i.mediaInfo=n,i.representationId=r.id;var a,o,s,u,l=(a=i,o=n.streamInfo.id,s=e.type!==d.FRAGMENT_LOADING_PROGRESS,(u=new A.default).streamId=o,u.mediaInfo=a.mediaInfo,u.segmentType=a.type,u.start=a.startTime,u.duration=a.duration,u.end=u.start+u.duration,u.index=a.index,u.quality=a.quality,u.representationId=a.representationId,u.endFragment=s,u);try{l.bytes=h.generateMoov(r),p.trigger(d.INIT_FRAGMENT_LOADED,{chunk:l});}catch(e){f.errHandler.error(new I.default(e.code,e.message,e.data));}e.sender=null;}}function y(e){var t,r,n;e.error||(t=m(e.request.mediaType))&&(h.processFragment(e,t),"FragmentInfoSegment"!==e.request.type||(r=l(e.request.mediaType))&&r.fragmentInfoLoaded(e),(n=e.request.mediaInfo.streamInfo.manifestInfo).isDynamic||n.DVRWindowSize===1/0||g());}function _(){t.getIsDynamic()&&0!==t.getTime()&&g();}function b(){t.getIsDynamic()&&0!==t.getTime()&&g();}function T(e){e&&e.data&&(e.data=e.data.replace(/http:\/\/www.w3.org\/2006\/10\/ttaf1/gi,"http://www.w3.org/ns/ttml"));}return u={reset:function(){o&&(o.reset(),o=void 0),p.off(d.INIT_FRAGMENT_NEEDED,v,this),p.off(d.PLAYBACK_PAUSED,_,this),p.off(d.PLAYBACK_SEEK_ASKED,b,this),p.off(d.FRAGMENT_LOADING_COMPLETED,y,this),p.off(d.TTML_TO_PARSE,T,this),s.forEach(function(e){e.reset();}),s=[];},createMssParser:function(){return o=(0, M.default)(r).create(f)},registerEvents:function(){p.on(d.INIT_FRAGMENT_NEEDED,v,u,dashjs.FactoryMaker.getSingletonFactoryByName(p.getClassName()).EVENT_PRIORITY_HIGH),p.on(d.PLAYBACK_PAUSED,_,u,dashjs.FactoryMaker.getSingletonFactoryByName(p.getClassName()).EVENT_PRIORITY_HIGH),p.on(d.PLAYBACK_SEEK_ASKED,b,u,dashjs.FactoryMaker.getSingletonFactoryByName(p.getClassName()).EVENT_PRIORITY_HIGH),p.on(d.FRAGMENT_LOADING_COMPLETED,y,u,dashjs.FactoryMaker.getSingletonFactoryByName(p.getClassName()).EVENT_PRIORITY_HIGH),p.on(d.TTML_TO_PARSE,T,u);}},s=[],(0, D.default)(r).getInstance(),u}a.__dashjs_factory_name="MssHandler";var o=dashjs.FactoryMaker.getClassFactory(a);o.errors=i.default,dashjs.FactoryMaker.updateClassFactory(a.__dashjs_factory_name,o),r.default=o,t.exports=r.default;},{10:10,12:12,14:14,15:15,16:16,17:17,5:5,8:8}],10:[function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0});var n=function(e,t,r){for(var n=!0;n;){var i=e,a=t,o=r,n=!1;null===i&&(i=Function.prototype);var s=Object.getOwnPropertyDescriptor(i,a);if(void 0!==s){if("value"in s)return s.value;var u=s.get;if(void 0===u)return;return u.call(o)}var l=Object.getPrototypeOf(i);if(null===l)return;e=l,t=a,r=o,n=!0,s=l=void 0;}};var i,a=e(3);function o(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),n(Object.getPrototypeOf(o.prototype),"constructor",this).call(this),this.MSS_NO_TFRF_CODE=200,this.MSS_UNSUPPORTED_CODEC_CODE=201,this.MSS_NO_TFRF_MESSAGE="Missing tfrf in live media segment",this.MSS_UNSUPPORTED_CODEC_MESSAGE="Unsupported codec";}var s=new(function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t);}(o,((i=a)&&i.__esModule?i:{default:i}).default),o);r.default=s,t.exports=r.default;},{3:3}],11:[function(o,e,s){(function(e){Object.defineProperty(s,"__esModule",{value:!0});var t,r=o(9),n=(t=r)&&t.__esModule?t:{default:t},i="undefined"!=typeof window&&window||e,a=i.dashjs;(a=a||(i.dashjs={})).MssHandler=n.default,s.default=a,s.MssHandler=n.default;}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{});},{9:9}],12:[function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0});var n,i=e(1),b=(n=i)&&n.__esModule?n:{default:n};function a(e){var t,I=(e=e||{}).BASE64,r=e.debug,D=e.constants,P=e.manifestModel,C=e.mediaPlayerModel,x=e.settings,O=1e7,h=["AAC","AACL","AVC1","H264","TTML","DFXP"],m={CAPT:"main",SUBT:"alternate",DESC:"main"},g={DESC:"2"},v={96e3:0,88200:1,64e3:2,48e3:3,44100:4,32e3:5,24e3:6,22050:7,16e3:8,12e3:9,11025:10,8e3:11,7350:12},y={video:"video/mp4",audio:"audio/mp4",text:"application/mp4"},_=void 0,N=void 0;function B(e,t){var r,n={},i=void 0;n.AdaptationSet_asArray=[],r=e.getElementsByTagName("StreamIndex");for(var a=0;a<r.length;a++)null!==(i=function(e,t){var r,n={},i=[],a=void 0,o=void 0,s=void 0,u=e.getAttribute("Name"),l=e.getAttribute("Type"),f=e.getAttribute("Language"),p=f?l+"_"+f:l;{var d,c;n.id=u||p,n.contentType=l,n.lang=f||"und",n.mimeType=y[l],n.subType=e.getAttribute("Subtype"),n.maxWidth=e.getAttribute("MaxWidth"),n.maxHeight=e.getAttribute("MaxHeight"),n.subType&&(m[n.subType]&&(d={schemeIdUri:"urn:mpeg:dash:role:2011",value:m[n.subType]},n.Role=d,n.Role_asArray=[d]),g[n.subType]&&(c={schemeIdUri:"urn:tva:metadata:cs:AudioPurposeCS:2007",value:g[n.subType]},n.Accessibility=c,n.Accessibility_asArray=[c]));}for(r=function(e,t){var r={},n=void 0,i=void 0,a=void 0;return a=e.getAttribute("Url"),n=(n=a?a.replace("{bitrate}","$Bandwidth$"):null)?n.replace("{start time}","$Time$"):null,i=(i=e.getAttribute("TimeScale"))?parseFloat(i):t,r.media=n,r.timescale=i,r.SegmentTimeline=function(e,t){var r={},n=e.getElementsByTagName("c"),i=[],a=void 0,o=void 0,s=void 0,u=void 0,l=void 0,f=void 0,p=0;for(u=0;u<n.length;u++)if(a={},(s=n[u].getAttribute("t"))&&(0, b.default)(s).greater((0, b.default)(Number.MAX_SAFE_INTEGER))&&(a.tManifest=s),a.t=parseFloat(s),a.d=parseFloat(n[u].getAttribute("d")),0!==u||a.t||(a.t=0),0<u&&((o=i[i.length-1]).d||(o.tManifest?o.d=(0, b.default)(s).subtract((0, b.default)(o.tManifest)).toJSNumber():o.d=a.t-o.t,p+=o.d),a.t||(o.tManifest?(a.tManifest=(0, b.default)(o.tManifest).add((0, b.default)(o.d)).toString(),a.t=parseFloat(a.tManifest)):a.t=o.t+o.d)),a.d&&(p+=a.d),i.push(a),f=parseFloat(n[u].getAttribute("r")))for(l=0;l<f-1;l++)o=i[i.length-1],(a={}).t=o.t+o.d,a.d=o.d,o.tManifest&&(a.tManifest=(0, b.default)(o.tManifest).add((0, b.default)(o.d)).toString()),p+=a.d,i.push(a);return r.S=i,r.S_asArray=i,r.duration=p/t,r}(e,r.timescale),r}(e,t),a=e.getElementsByTagName("QualityLevel"),s=0;s<a.length;s++)a[s].BaseURL=n.BaseURL,a[s].mimeType=n.mimeType,a[s].Id=n.id+"_"+a[s].getAttribute("Index"),null!==(o=function(e,t){var r={},n=t.getAttribute("Type"),i=null;r.id=e.Id,r.bandwidth=parseInt(e.getAttribute("Bitrate"),10),r.mimeType=e.mimeType,r.width=parseInt(e.getAttribute("MaxWidth"),10),r.height=parseInt(e.getAttribute("MaxHeight"),10),null!==(i=e.getAttribute("FourCC"))&&""!==i||(i=t.getAttribute("FourCC"));if(null===i||""===i)if(n===D.AUDIO)i="AAC";else if(n===D.VIDEO)return _.debug('FourCC is not defined whereas it is required for a QualityLevel element for a StreamIndex of type "video"'),null;if(-1===h.indexOf(i.toUpperCase()))return _.warn("Codec not supported: "+i),null;"H264"===i||"AVC1"===i?r.codecs=function(e){var t,r=e.getAttribute("CodecPrivateData").toString();return t=/00000001[0-9]7/.exec(r),"avc1."+(t&&t[0]?r.substr(r.indexOf(t[0])+10,6):void 0)}(e):0<=i.indexOf("AAC")?(r.codecs=function(e,t){var r=parseInt(e.getAttribute("SamplingRate"),10),n=e.getAttribute("CodecPrivateData").toString(),i=0,a=void 0,o=void 0,s=void 0;"AACH"===t&&(i=5);void 0===n||""===n?(i=2,o=v[r],n=(n=""+("AACH"===t?(i=5,n=new Uint8Array(4),s=v[2*r],n[0]=i<<3|o>>1,n[1]=o<<7|e.Channels<<3|s>>1,n[2]=s<<7|8,n[3]=0,(a=new Uint16Array(2))[0]=(n[0]<<8)+n[1],a[1]=(n[2]<<8)+n[3],a[0].toString(16),a[0].toString(16)+a[1].toString(16)):((n=new Uint8Array(2))[0]=i<<3|o>>1,n[1]=o<<7|parseInt(e.getAttribute("Channels"),10)<<3,(a=new Uint16Array(1))[0]=(n[0]<<8)+n[1],a[0].toString(16)))).toUpperCase(),e.setAttribute("CodecPrivateData",n)):0===i&&(i=(248&parseInt(n.substr(0,2),16))>>3);return "mp4a.40."+i}(e,i),r.audioSamplingRate=parseInt(e.getAttribute("SamplingRate"),10),r.audioChannels=parseInt(e.getAttribute("Channels"),10)):(i.indexOf("TTML")||i.indexOf("DFXP"))&&(r.codecs=D.STPP);return r.codecPrivateData=""+e.getAttribute("CodecPrivateData"),r.BaseURL=e.BaseURL,r}(a[s],e))&&(o.SegmentTemplate=r,i.push(o));return 0!==i.length?(n.Representation=1<i.length?i:i[0],n.Representation_asArray=i,n.SegmentTemplate=r,r.SegmentTimeline.S_asArray,n):null}(r[a],t))&&n.AdaptationSet_asArray.push(i);return 0<n.AdaptationSet_asArray.length&&(n.AdaptationSet=1<n.AdaptationSet_asArray.length?n.AdaptationSet_asArray:n.AdaptationSet_asArray[0]),n}function F(e){var t,r=void 0,n=void 0;return (r=function(e){var t=void 0,r=void 0,n=void 0,i=0;e[i+3],e[i+2],e[i+1],e[i],e[(i+=4)+1],e[i],i+=2;for(;i<e.length;)if(t=(e[i+1]<<8)+e[i],i+=2,1===t)return r=(e[i+1]<<8)+e[i],i+=2,(n=new Uint8Array(r)).set(e.subarray(i,i+r)),n;return null}(I.decodeArray(e.firstChild.data)))&&(r=new Uint16Array(r.buffer),r=String.fromCharCode.apply(null,r),n=(new DOMParser).parseFromString(r,"application/xml").querySelector("KID").textContent,n=I.decodeArray(n),i(t=n,0,3),i(t,1,2),i(t,4,5),i(t,6,7)),n}function i(e,t,r){var n=e[t];e[t]=e[r],e[r]=n;}function o(e,t){var r,n={},i=[],a=e.getElementsByTagName("SmoothStreamingMedia")[0],o=e.getElementsByTagName("Protection")[0],s=null,u=void 0,l=void 0,f=void 0,p=void 0,d=void 0,c=void 0,h=void 0,m=void 0,g=void 0,v=void 0;n.protocol="MSS",n.profiles="urn:mpeg:dash:profile:isoff-live:2011",n.type="TRUE"===a.getAttribute("IsLive")?"dynamic":"static",r=a.getAttribute("TimeScale"),n.timescale=r?parseFloat(r):O;var y=parseFloat(a.getAttribute("DVRWindowLength"));"dynamic"!==n.type||0!==y&&!isNaN(y)||(y=1/0),0===y&&"TRUE"===a.getAttribute("CanSeek")&&(y=1/0),0<y&&(n.timeShiftBufferDepth=y/n.timescale);var _,b,T,A,S,E,w=parseFloat(a.getAttribute("Duration"));for(n.mediaPresentationDuration=0===w?1/0:w/n.timescale,n.minBufferTime=2,n.ttmlTimeIsRelative=!0,"dynamic"===n.type&&0<w&&(n.type="static",n.timeShiftBufferDepth=w/n.timescale),"dynamic"===n.type&&n.timeShiftBufferDepth<1/0&&(n.refreshManifestOnSwitchTrack=!0,n.doNotUpdateDVRWindowOnBufferUpdated=!0,n.ignorePostponeTimePeriod=!0),n.Period=B(a,n.timescale),n.Period_asArray=[n.Period],void((u=n.Period).start=0)!==o&&((s=e.getElementsByTagName("ProtectionHeader")[0]).firstChild.data=s.firstChild.data.replace(/\n|\r/g,""),p=F(s),(f={schemeIdUri:"urn:uuid:9a04f079-9840-4286-ab92-e65be0885f95",value:"com.microsoft.playready",pro:_={__text:s.firstChild.data,__prefix:"mspr"},pro_asArray:_})["cenc:default_KID"]=p,i.push(f),(f=function(e){var t={schemeIdUri:"urn:uuid:edef8ba9-79d6-4ace-a3c8-27dcd51d21ed",value:"com.widevine.alpha"};if(!e)return t;var r=new Uint8Array(2+e.length);r[0]=18,r[1]=16,r.set(e,2);var n=32+r.length,i=new Uint8Array(n),a=0;return i[a++]=(4278190080&n)>>24,i[a++]=(16711680&n)>>16,i[a++]=(65280&n)>>8,i[a++]=255&n,i.set([112,115,115,104,0,0,0,0],a),a+=8,i.set([237,239,139,169,121,214,74,206,163,200,39,220,213,29,33,237],a),a+=16,i[a++]=(4278190080&r.length)>>24,i[a++]=(16711680&r.length)>>16,i[a++]=(65280&r.length)>>8,i[a++]=255&r.length,i.set(r,a),i=String.fromCharCode.apply(null,i),i=I.encodeASCII(i),t.pssh={__text:i},t}(p))["cenc:default_KID"]=p,i.push(f),n.ContentProtection=i,n.ContentProtection_asArray=i),l=u.AdaptationSet_asArray,g=0;g<l.length;g+=1){l[g].SegmentTemplate.initialization="$Bandwidth$",void 0!==n.ContentProtection&&(l[g].ContentProtection=n.ContentProtection,l[g].ContentProtection_asArray=n.ContentProtection_asArray),"video"===l[g].contentType&&(m=l[g].SegmentTemplate.SegmentTimeline.S_asArray[0].d/l[g].SegmentTemplate.timescale,n.minBufferTime=m,"dynamic"===n.type&&(b=((h=l[g].SegmentTemplate.SegmentTimeline.S_asArray)[h.length-1].t+h[h.length-1].d)/l[g].SegmentTemplate.timescale*1e3,n.availabilityStartTime=new Date(t.getTime()-b),0<n.timeShiftBufferDepth&&n.timeShiftBufferDepth!==1/0&&n.timeShiftBufferDepth>l[g].SegmentTemplate.SegmentTimeline.duration&&(n.timeShiftBufferDepth=l[g].SegmentTemplate.SegmentTimeline.duration)));}if(n.minBufferTime=Math.min(n.minBufferTime,n.timeShiftBufferDepth?n.timeShiftBufferDepth:1/0),"dynamic"===n.type&&(T=(T=C.getLiveDelay())||m*(null===x.get().streaming.liveDelayFragmentCount||isNaN(x.get().streaming.liveDelayFragmentCount)?4:x.get().streaming.liveDelayFragmentCount),A=Math.max(n.timeShiftBufferDepth-10,n.timeShiftBufferDepth/2),E=(S=Math.min(A,T))-m,N={streaming:{liveDelay:x.get().streaming.liveDelay,stableBufferTime:x.get().streaming.stableBufferTime,bufferTimeAtTopQuality:x.get().streaming.bufferTimeAtTopQuality,bufferTimeAtTopQualityLongForm:x.get().streaming.bufferTimeAtTopQualityLongForm}},x.update({streaming:{liveDelay:S,stableBufferTime:E,bufferTimeAtTopQuality:E,bufferTimeAtTopQualityLongForm:E}})),delete n.ContentProtection,delete n.ContentProtection_asArray,"static"===n.type){var M=P.getValue();if(M&&M.timestampOffset)d=M.timestampOffset;else for(g=0;g<l.length;g++)l[g].contentType!==D.AUDIO&&l[g].contentType!==D.VIDEO||(c=(h=l[g].SegmentTemplate.SegmentTimeline.S_asArray)[0].t/l[g].SegmentTemplate.timescale,void 0===d&&(d=c),d=Math.min(d,c),n.mediaPresentationDuration=Math.min(n.mediaPresentationDuration,l[g].SegmentTemplate.SegmentTimeline.duration));if(0<d){for(n.timestampOffset=d,g=0;g<l.length;g++){for(h=l[g].SegmentTemplate.SegmentTimeline.S_asArray,v=0;v<h.length;v++)h[v].tManifest||(h[v].tManifest=h[v].t),h[v].t-=d*l[g].SegmentTemplate.timescale;l[g].contentType!==D.AUDIO&&l[g].contentType!==D.VIDEO||(u.start=Math.max(h[0].t,u.start),l[g].SegmentTemplate.presentationTimeOffset=u.start);}u.start/=n.timescale;}}return n.mediaPresentationDuration=Math.floor(1e3*n.mediaPresentationDuration)/1e3,u.duration=n.mediaPresentationDuration,n}return t={parse:function(e){var t,r=window.performance.now(),n=function(e){var t=null;if(window.DOMParser&&0<(t=(new window.DOMParser).parseFromString(e,"text/xml")).getElementsByTagName("parsererror").length)throw new Error("parsing the manifest failed");return t}(e),i=window.performance.now();if(null===n)return null;t=o(n,new Date);var a=window.performance.now();return _.info("Parsing complete: (xmlParsing: "+(i-r).toPrecision(3)+"ms, mss2dash: "+(a-i).toPrecision(3)+"ms, total: "+((a-r)/1e3).toPrecision(3)+"s)"),t},getMatchers:function(){return null},getIron:function(){return null},reset:function(){N&&x.update(N);}},_=r.getLogger(t),t}a.__dashjs_factory_name="MssParser",r.default=dashjs.FactoryMaker.getClassFactory(a),t.exports=r.default;},{1:1}],13:[function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0});var n=function(e,t,r){for(var n=!0;n;){var i=e,a=t,o=r,n=!1;null===i&&(i=Function.prototype);var s=Object.getOwnPropertyDescriptor(i,a);if(void 0!==s){if("value"in s)return s.value;var u=s.get;if(void 0===u)return;return u.call(o)}var l=Object.getPrototypeOf(i);if(null===l)return;e=l,t=a,r=o,n=!0,s=l=void 0;}};var i,a=e(4);function o(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),n(Object.getPrototypeOf(o.prototype),"constructor",this).call(this),this.AST_IN_FUTURE="astInFuture",this.BUFFER_EMPTY="bufferStalled",this.BUFFER_LOADED="bufferLoaded",this.BUFFER_LEVEL_STATE_CHANGED="bufferStateChanged",this.ERROR="error",this.FRAGMENT_LOADING_COMPLETED="fragmentLoadingCompleted",this.FRAGMENT_LOADING_PROGRESS="fragmentLoadingProgress",this.FRAGMENT_LOADING_STARTED="fragmentLoadingStarted",this.FRAGMENT_LOADING_ABANDONED="fragmentLoadingAbandoned",this.LOG="log",this.MANIFEST_LOADED="manifestLoaded",this.METRICS_CHANGED="metricsChanged",this.METRIC_CHANGED="metricChanged",this.METRIC_ADDED="metricAdded",this.METRIC_UPDATED="metricUpdated",this.PERIOD_SWITCH_COMPLETED="periodSwitchCompleted",this.PERIOD_SWITCH_STARTED="periodSwitchStarted",this.QUALITY_CHANGE_REQUESTED="qualityChangeRequested",this.QUALITY_CHANGE_RENDERED="qualityChangeRendered",this.TRACK_CHANGE_RENDERED="trackChangeRendered",this.SOURCE_INITIALIZED="sourceInitialized",this.STREAM_INITIALIZING="streamInitializing",this.STREAM_INITIALIZED="streamInitialized",this.STREAM_TEARDOWN_COMPLETE="streamTeardownComplete",this.TEXT_TRACKS_ADDED="allTextTracksAdded",this.TEXT_TRACK_ADDED="textTrackAdded",this.TTML_PARSED="ttmlParsed",this.TTML_TO_PARSE="ttmlToParse",this.CAPTION_RENDERED="captionRendered",this.CAPTION_CONTAINER_RESIZE="captionContainerResize",this.CAN_PLAY="canPlay",this.PLAYBACK_ENDED="playbackEnded",this.PLAYBACK_ERROR="playbackError",this.PLAYBACK_NOT_ALLOWED="playbackNotAllowed",this.PLAYBACK_METADATA_LOADED="playbackMetaDataLoaded",this.PLAYBACK_PAUSED="playbackPaused",this.PLAYBACK_PLAYING="playbackPlaying",this.PLAYBACK_PROGRESS="playbackProgress",this.PLAYBACK_RATE_CHANGED="playbackRateChanged",this.PLAYBACK_SEEKED="playbackSeeked",this.PLAYBACK_SEEKING="playbackSeeking",this.PLAYBACK_SEEK_ASKED="playbackSeekAsked",this.PLAYBACK_STALLED="playbackStalled",this.PLAYBACK_STARTED="playbackStarted",this.PLAYBACK_TIME_UPDATED="playbackTimeUpdated",this.PLAYBACK_WAITING="playbackWaiting",this.MANIFEST_VALIDITY_CHANGED="manifestValidityChanged";}var s=new(function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t);}(o,((i=a)&&i.__esModule?i:{default:i}).default),o);r.default=s,t.exports=r.default;},{4:4}],14:[function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0});var n,i=e(2),a=(n=i)&&n.__esModule?n:{default:n};function o(){var n={};return {save:function(e){var t=e.streamId,r=e.representationId;n[t]=n[t]||{},n[t][r]=e;},extract:function(e,t){return n&&n[e]&&n[e][t]?n[e][t]:null},reset:function(){n={};}}}o.__dashjs_factory_name="InitCache",r.default=a.default.getSingletonFactory(o),t.exports=r.default;},{2:2}],15:[function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0});r.default=function e(t,r,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.code=t||null,this.message=r||null,this.data=n||null;},t.exports=r.default;},{}],16:[function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0});r.default=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.streamId=null,this.mediaInfo=null,this.segmentType=null,this.quality=NaN,this.index=NaN,this.bytes=null,this.start=NaN,this.end=NaN,this.duration=NaN,this.representationId=null,this.endFragment=null;},t.exports=r.default;},{}],17:[function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0});var n=function(e,t,r){return t&&i(e.prototype,t),r&&i(e,r),e};function i(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n);}}var a=e(18),o=(n(s,[{key:"isInitializationRequest",value:function(){return this.type&&this.type===a.HTTPRequest.INIT_SEGMENT_TYPE}},{key:"setInfo",value:function(e){this.type=e&&e.init?a.HTTPRequest.INIT_SEGMENT_TYPE:a.HTTPRequest.MEDIA_SEGMENT_TYPE,this.url=e&&e.url?e.url:null,this.range=e&&e.range?e.range.start+"-"+e.range.end:null,this.mediaType=e&&e.mediaType?e.mediaType:null;}}]),s);function s(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,s),this.action=s.ACTION_DOWNLOAD,this.startTime=NaN,this.mediaType=null,this.mediaInfo=null,this.type=null,this.duration=NaN,this.timescale=NaN,this.range=null,this.url=e||null,this.serviceLocation=null,this.requestStartDate=null,this.firstByteDate=null,this.requestEndDate=null,this.quality=NaN,this.index=NaN,this.availabilityStartTime=null,this.availabilityEndTime=null,this.wallStartTime=null,this.bytesLoaded=NaN,this.bytesTotal=NaN,this.delayLoadingTime=NaN,this.responseType="arraybuffer",this.representationId=null;}o.ACTION_DOWNLOAD="download",o.ACTION_COMPLETE="complete",r.default=o,t.exports=r.default;},{18:18}],18:[function(e,t,r){function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(r,"__esModule",{value:!0});function i(){n(this,i),this.tcpid=null,this.type=null,this.url=null,this.actualurl=null,this.range=null,this.trequest=null,this.tresponse=null,this.responsecode=null,this.interval=null,this.trace=[],this._stream=null,this._tfinish=null,this._mediaduration=null,this._quality=null,this._responseHeaders=null,this._serviceLocation=null;}i.GET="GET",i.HEAD="HEAD",i.MPD_TYPE="MPD",i.XLINK_EXPANSION_TYPE="XLinkExpansion",i.INIT_SEGMENT_TYPE="InitializationSegment",i.INDEX_SEGMENT_TYPE="IndexSegment",i.MEDIA_SEGMENT_TYPE="MediaSegment",i.BITSTREAM_SWITCHING_SEGMENT_TYPE="BitstreamSwitchingSegment",i.OTHER_TYPE="other",r.HTTPRequest=i,r.HTTPRequestTrace=function e(){n(this,e),this.s=null,this.d=null,this.b=[];};},{}]},{},[11]);

window.bradmax.dashjs = dashjs;
if(orgdash) {
    window.dashjs = orgdash;
} else {
    delete window['dashjs'];
}
})(window);!function(t,e){t.bs=t.bs||{},t.bs.player=t.bs.player||{},t.bs.player.plugin=t.bs.player.plugin||{},t.bs.player.plugin.bradmax=t.bs.player.plugin.bradmax||{},t.bs.player.plugin.bradmax.analytics=t.bs.player.plugin.bradmax.analytics||{},Math.__name__="Math";var a=require("haxe.Reflect");class i{static string(t){return y.__string_rec(t,"")}static random(t){return t<=0?0:Math.floor(Math.random()*t)}}i.__name__="Std";var s=require("haxe.StringTools"),r=require("bs.player.core.events.AdEvent"),n=require("bs.player.core.events.ControlEvent"),l=require("bs.player.core.events.DataProviderEvent"),o=require("bs.player.core.events.VideoEvent"),d=require("bs.player.core.model.Live");class c{constructor(){this.pluginName="";let t=y.getClass(this);this.pluginName=t.__name__.split(".").pop();let e=this.pluginName,i=exports.configuration;this.pluginConfig=null!=i&&Object.prototype.hasOwnProperty.call(i,e)?a.field(i,e):Object.create(null);}create(){}destroy(){}activate(){}postActivate(){}deactivate(){}eventFilter(t){return !0}registerPlugin(t){}getPluginVersion(){return "v2.14.417"}getPluginName(){return this.pluginName}get_player(){return this.player}set_player(t){return this.player=t}get_variables(){return this.variables}set_variables(t){return this.variables=t}get_eventHub(){return this.eventHub}set_eventHub(t){return this.eventHub=t}get_parentDisplay(){return this.parentDisplay}set_parentDisplay(t){return this.parentDisplay=t}get_display(){return this.display}}c.__name__="bs.player.core.plugin.PluginBase",Object.assign(c.prototype,{__class__:c});class h extends c{constructor(){super(),this.settingsTrackAds=!1,this.settingsTrackAdsProgress=!1,this.settingsTrackEngagementRate=!1,this.settingsTrackRealtimeStats=!1,this.settingsEngagementRatePercResolution=1,this.mediaPlayback=new g,this.adPlayback=new g,this.logger=new u,this.playerErrorLogLastSendAt=null,this.gdprAgreeRequired=!1,this.gdprAgreeForCookie=!1,this.playerRemoteErrorLogEnabed=!1;}activate(){if(this.loadSettings(),null!=this.clientToken&&""!=this.clientToken)if(n.add(this.context,"skinPlay",P(m=this.mediaPlayback,m.onPlayEvent)),n.add(this.context,"skinPause",P(m=this.mediaPlayback,m.onPauseEvent)),o.add(this.context,"currentTimeChange",P(m=this.mediaPlayback,m.onVideoProgress)),o.add(this.context,"durationChange",P(m=this.mediaPlayback,m.onVideoDurationChange)),o.add(this.context,"complete",P(m=this.mediaPlayback,m.onVideoComplete)),o.add(this.context,"playing",P(m=this.mediaPlayback,m.onVideoPlaying)),o.add(this.context,"paused",P(m=this.mediaPlayback,m.onVideoPaused)),o.add(this.context,"drmAuthenticationComplete",P(m=this.mediaPlayback,m.onDrmAuthenticationComplete)),o.add(this.context,"playing",P(this,this.onRealtimeEvent)),o.add(this.context,"paused",P(this,this.onRealtimeEvent)),o.add(this.context,"complete",P(this,this.onRealtimeEvent)),o.add(this.context,"mediaError",P(this,this.onRealtimeEvent)),l.add(this.context,"mediaMetadataData",P(m=this.mediaPlayback,m.onMetadata)),l.add(this.context,"mediaAfterPlaybackStartMetadata",P(m=this.mediaPlayback,m.onAfterPlaybackStartMetadataData)),r.add(this.context,"adPlay",P(m=this.adPlayback,m.onPlayEvent)),r.add(this.context,"adPause",P(m=this.adPlayback,m.onPauseEvent)),r.add(this.context,"adCurrentTimeChange",P(m=this.adPlayback,m.onVideoProgress)),r.add(this.context,"adDurationChange",P(m=this.adPlayback,m.onVideoDurationChange)),r.add(this.context,"adComplete",P(m=this.adPlayback,m.onVideoComplete)),r.add(this.context,"adPlaying",P(m=this.adPlayback,m.onVideoPlaying)),r.add(this.context,"adPaused",P(m=this.adPlayback,m.onVideoPaused)),l.add(this.context,"adMetadataData",P(m=this.adPlayback,m.onMetadata)),o.add(this.context,"mediaError",P(this,this.onVideoMediaError)),o.add(this.context,"mediaErrorFallbackTry",P(this,this.onVideoMediaErrorFallbackTry)),r.add(this.context,"adMediaError",P(this,this.onAdVideoMediaError)),r.add(this.context,"adMediaErrorFallbackTry",P(this,this.onAdVideoMediaErrorFallbackTry)),this.mediaPlayback.firstPlayingEventCallback=P(this,this.onMediaFirstPlayingEvent),this.settingsTrackAds&&(r.add(this.context,"adAdClick",P(this,this.onAdClick)),this.adPlayback.firstPlayingEventCallback=P(this,this.onAdFirstPlayingEvent),this.settingsTrackAdsProgress&&(this.adPlayback.firstQuartilePlaybackCallback=P(this,this.onAdFirstQuartilePlayback),this.adPlayback.midpointPlaybackCallback=P(this,this.onAdMidpointPlayback),this.adPlayback.thirdQuartilePlaybackCallback=P(this,this.onAdThirdQuartilePlayback),this.adPlayback.completePlaybackCallback=P(this,this.onAdCompletePlayback))),this.settingsTrackEngagementRate&&(this.mediaPlayback.statsEngagementRateEnabled=!0,this.mediaPlayback.statsEngagementRatePercResolution=this.settingsEngagementRatePercResolution,this.mediaPlayback.engagementRatePercentProgressCallback=P(this,this.onEngegementRatePercProgress),this.mediaPlayback.engagementRateTimeProgressCallback=P(this,this.onEngegementRateTimeProgress)),!this.gdprAgreeRequired||this.gdprAgreeForCookie){let t=window._ba_enable_cookies;null!=t?t():console.error("Cannot enable BradmaxAnalytics users stats - missing _ba callback.");}else {let t=window._ba_disable_cookies;null!=t?t():console.error("Cannot disable BradmaxAnalytics users stats - missing _ba callback.");}}loadSettings(){Object.prototype.hasOwnProperty.call(this.pluginConfig,"clientToken")&&(this.clientToken=a.field(this.pluginConfig,"clientToken")),Object.prototype.hasOwnProperty.call(this.pluginConfig,"baseUrl")&&(this.logger.baseUrl=a.field(this.pluginConfig,"baseUrl")),Object.prototype.hasOwnProperty.call(this.pluginConfig,"trackAds")&&(this.settingsTrackAds=a.field(this.pluginConfig,"trackAds")),Object.prototype.hasOwnProperty.call(this.pluginConfig,"trackAdsProgress")&&(this.settingsTrackAdsProgress=a.field(this.pluginConfig,"trackAdsProgress")),Object.prototype.hasOwnProperty.call(this.pluginConfig,"trackEngagementRate")&&(this.settingsTrackEngagementRate=a.field(this.pluginConfig,"trackEngagementRate")),Object.prototype.hasOwnProperty.call(this.pluginConfig,"trackRealtimeStats")&&(this.settingsTrackRealtimeStats=a.field(this.pluginConfig,"trackRealtimeStats")),Object.prototype.hasOwnProperty.call(this.pluginConfig,"gdprAgreeRequired")&&(this.gdprAgreeRequired=a.field(this.pluginConfig,"gdprAgreeRequired")),Object.prototype.hasOwnProperty.call(this.pluginConfig,"gdprAgreeForCookie")&&(this.gdprAgreeForCookie=a.field(this.pluginConfig,"gdprAgreeForCookie")),Object.prototype.hasOwnProperty.call(this.pluginConfig,"playerRemoteErrorLogEnabed")&&(this.playerRemoteErrorLogEnabed=a.field(this.pluginConfig,"playerRemoteErrorLogEnabed"));let t=this.get_variables();if(Object.prototype.hasOwnProperty.call(t,"bradmaxAnalytics")){let t=a.field(this.get_variables(),"bradmaxAnalytics");Object.prototype.hasOwnProperty.call(t,"clientToken")&&(this.clientToken=a.field(t,"clientToken")),Object.prototype.hasOwnProperty.call(t,"baseUrl")&&(this.logger.baseUrl=a.field(t,"baseUrl")),Object.prototype.hasOwnProperty.call(t,"trackAds")&&(this.settingsTrackAds=a.field(t,"trackAds")),Object.prototype.hasOwnProperty.call(t,"trackAdsProgress")&&(this.settingsTrackAdsProgress=a.field(t,"trackAdsProgress")),Object.prototype.hasOwnProperty.call(t,"trackEngagementRate")&&(this.settingsTrackEngagementRate=a.field(t,"trackEngagementRate")),Object.prototype.hasOwnProperty.call(t,"trackRealtimeStats")&&(this.settingsTrackRealtimeStats=a.field(t,"trackRealtimeStats")),Object.prototype.hasOwnProperty.call(t,"gdprAgreeRequired")&&(this.gdprAgreeRequired=a.field(t,"gdprAgreeRequired")),Object.prototype.hasOwnProperty.call(t,"gdprAgreeForCookie")&&(this.gdprAgreeForCookie=a.field(t,"gdprAgreeForCookie")),Object.prototype.hasOwnProperty.call(t,"playerRemoteErrorLogEnabed")&&(this.playerRemoteErrorLogEnabed=a.field(t,"playerRemoteErrorLogEnabed"));}}onMediaFirstPlayingEvent(){let t={materialID:this.mediaPlayback.mediaId,title:this.mediaPlayback.title,event:"media.view",currentTime:this.mediaPlayback.currentTime,duration:this.mediaPlayback.duration,isDrmProtected:this.mediaPlayback.isDrmProtected};this.assignContentMetaToData(t),this.sendDataToLogger(t);}assignContentMetaToData(t){if(null!=this.mediaPlayback.media&&null!=this.mediaPlayback.media.contentMeta){let e=this.mediaPlayback.media.contentMeta;Object.prototype.hasOwnProperty.call(e.h,"tags")&&(t.tags=e.h.tags),Object.prototype.hasOwnProperty.call(e.h,"pageTags")&&(t.pageTags=e.h.pageTags);let a=0,s=h.SPECIAL_CONTENT_META_TAGS;for(;a<s.length;){let r=s[a];if(++a,!Object.prototype.hasOwnProperty.call(e.h,r))continue;null==t.tags&&(t.tags=[]);let n=""+i.string(e.h[r]);n=encodeURIComponent(n);let l=r+":"+n;-1==t.tags.indexOf(l)&&t.tags.push(l);}}}makeAdEvent(t){return {materialID:this.adPlayback.mediaId,relatedID:this.mediaPlayback.mediaId,title:this.adPlayback.title,event:t,currentTime:this.adPlayback.currentTime,duration:this.adPlayback.duration,isDrmProtected:this.adPlayback.isDrmProtected}}onAdFirstPlayingEvent(){this.sendDataToLogger(this.makeAdEvent("ad.view"));}onAdFirstQuartilePlayback(){this.sendDataToLogger(this.makeAdEvent("ad.view.25"));}onAdMidpointPlayback(){this.sendDataToLogger(this.makeAdEvent("ad.view.50"));}onAdThirdQuartilePlayback(){this.sendDataToLogger(this.makeAdEvent("ad.view.75"));}onAdCompletePlayback(){this.sendDataToLogger(this.makeAdEvent("ad.view.100"));}onAdClick(t){let e="";null!=t.data&&null!=t.data.url&&(e=t.data.url),this.sendDataToLogger({materialID:this.adPlayback.mediaId,relatedID:this.mediaPlayback.mediaId,title:this.adPlayback.title,event:"ad.click",currentTime:this.adPlayback.currentTime,duration:this.adPlayback.duration,isDrmProtected:this.adPlayback.isDrmProtected,relUrl:e});}onEngegementRatePercProgress(t){let e={materialID:this.mediaPlayback.mediaId,title:this.mediaPlayback.title,event:"er.perc",currentTime:this.mediaPlayback.currentTime,duration:this.mediaPlayback.duration,isDrmProtected:this.mediaPlayback.isDrmProtected,engagementRatePosition:[t]};this.assignContentMetaToData(e),this.sendDataToLogger(e);}onEngegementRateTimeProgress(t){let e={materialID:this.mediaPlayback.mediaId,title:this.mediaPlayback.title,event:"er.time",currentTime:this.mediaPlayback.currentTime,duration:this.mediaPlayback.duration,isDrmProtected:this.mediaPlayback.isDrmProtected,engagementRatePosition:[t]};this.assignContentMetaToData(e),this.sendDataToLogger(e);}sendDataToLogger(t){null!=window._ba_action?window._ba_action(this.clientToken,t):console.error("Cannot send BradmaxAnalytics data. Data logger not found. Key window.bams not exists.");}onRealtimeEvent(t){if(!this.settingsTrackRealtimeStats)return;let e=t.type,a={materialID:this.mediaPlayback.mediaId,title:this.mediaPlayback.title,event:e,currentTime:t.data.currentTime,duration:this.mediaPlayback.duration};switch(null!=this.realtimeMediaId&&this.realtimeMediaId!=this.mediaPlayback.mediaId&&this.realtimeEnd(this.realtimeMediaData),e){case"complete":case"mediaError":case"paused":this.realtimeEnd(a);break;case"playing":this.realtimeStart(a);}this.realtimeMediaId=this.mediaPlayback.mediaId,this.realtimeMediaData=a;}prepareErrorLodData(t,e){let a={m:e,v:"v2.14.417",t:this.clientToken,ct:this.mediaPlayback.currentTime};if(a.l=window.location.href,null!=t&&null!=t.data){null!=t.data.media&&null!=t.data.media.id&&(a["m.id"]=t.data.media.id),null!=t.data.media&&null!=t.data.media.source&&t.data.media.source.length>0&&null!=t.data.media.source[0]&&null!=t.data.media.source[0].url&&(a["m.s.url"]=t.data.media.source[0].url),null!=t.data.source&&""!=t.data.source&&(a["s.url"]=t.data.source);try{null!=t.data.additionalData&&(JSON.stringify(t.data.additionalData),a.d=t.data.additionalData);}catch(t){}}return a}sendPlayerErrorLog(t,e){if(this.playerRemoteErrorLogEnabed&&!(null!=this.playerErrorLogLastSendAt&&(new Date).getTime()-this.playerErrorLogLastSendAt.getTime()<3e3))try{let a=JSON.stringify(this.prepareErrorLodData(t,e));(new Image).src="https://bradmax.com/static/player-error-log/img.gif?d="+encodeURIComponent(a),this.playerErrorLogLastSendAt=new Date;}catch(t){}}onVideoMediaError(t){this.sendPlayerErrorLog(t,"error");}onAdVideoMediaError(t){this.sendPlayerErrorLog(t,"error_ad");}onVideoMediaErrorFallbackTry(t){this.sendPlayerErrorLog(t,"error_fallback");}onAdVideoMediaErrorFallbackTry(t){this.sendPlayerErrorLog(t,"error_ad_fallback");}realtimeStart(t){t.event="media.user.start",this.assignContentMetaToData(t),this.sendDataToLogger(t);}realtimeEnd(t){t.event="media.user.end",this.assignContentMetaToData(t),this.sendDataToLogger(t);}}t.bs.player.plugin.bradmax.analytics.BradmaxAnalytics=h,h.__name__="bs.player.plugin.bradmax.analytics.BradmaxAnalytics",Object.assign(h.prototype,{__class__:h});class u{constructor(){this.s=window.screen,this.w=window,this.d=document,(window.bradmax_analytics={}).action=P(this,this.action),0==this.w.location.href.indexOf("http://")?this.baseUrl="http://":this.baseUrl="https://",this.baseUrl+="stats.bradmax.com/v1";}action(t,e){if(null==t&&(t=""),""==t||null==e||""==e.event)return void console.warn("WRONG REQUEST");let a=[],s=function(t){for(var e=t+"=",a=decodeURIComponent(document.cookie).split(";"),i=0;i<a.length;i++){for(var s=a[i];" "==s.charAt(0);)s=s.substring(1);if(0==s.indexOf(e))return s.substring(e.length,s.length)}return ""}("_baml");""==s&&(s=this.uuid());let r=b.get("_bame");null==r&&(r=this.uuid());!function(t,e,a){var i=new Date;i.setTime(i.getTime()+24*a*60*60*1e3);var s="expires="+i.toUTCString();document.cookie=t+"="+e+";"+s+";path=/";}("_baml",s,730);!function(t,e,a){var i=new Date;i.setTime(i.getTime()+24*a*60*60*1e3);var s="expires="+i.toUTCString();document.cookie=t+"="+e+";"+s+";path=/";}("_bame",r,.020833333333333332),a.push(["lc",s]),a.push(["sc",r]),a.push(["pt",""+this.d.title]),a.push(["lo",""+this.d.location.href]),a.push(["la",""+i.string(navigator.language)]),a.push(["cs",""+i.string(document.characterSet)]),a.push(["re",this.s.availWidth+"x"+this.s.availHeight]);let n=Math.max(this.d.documentElement.clientWidth,0|this.w.innerWidth),l=Math.max(this.d.documentElement.clientHeight,0|this.w.innerHeight);a.push(["vp",n+"x"+l]);let o=null;try{o=function(t){for(var e=1,a=1<<24;!t(e)&&e<=a;)e*=2;return e>a?0:function(t,e,a){for(;a-e>1;){var i=a+e>>1;t(i)?a=i:e=i;}return a}(t,e/2,e)}((function(t){return matchMedia("(max-resolution: "+t+"dpi)").matches}));}catch(g){}a.push(["dp",""+(0==o?null:o)]);let d,c,h=""+i.string(screen.orientation||screen.mozOrientation||screen.msOrientation);a.push(["so",-1!=h.indexOf("landscape")?"l":"p"]),a.push(["ev",""+e.event]),a.push(["mi",""+e.materialID]),a.push(["ri",""+e.relatedID]),a.push(["ct",""+e.currentTime]),a.push(["du",""+e.duration]),a.push(["vt",""+e.title]),a.push(["vo",""+e.volume]),a.push(["ms",""+e.currentState]),a.push(["pr",""+e.progress]);try{d=e.videoResolution.width+"x"+e.videoResolution.height;}catch(g){d="";}a.push(["vr",""+d]),a.push(["br",""+e.bitrate]),a.push(["ss",""+e.selectedSubtitle]),a.push(["sa",""+e.selectedAudio]);try{c=e.tags.join(",");}catch(g){c="";}a.push(["tg",""+c]),a.push(["mt",""+e.mimeType]),a.push(["dr",e.isDrmProtected?"1":"0"]),a.push(["ru",""+e.relUrl]),a.push(["pv",""+e.playerVersion]),a.push(["ei",""+e.externalId]);let u=[],g=0;for(;g<a.length;){let t=a[g];++g,""!=t[1]&&"undefined"!=t[1]&&"null"!=t[1]&&u.push(t[0]+"="+encodeURIComponent(t[1]));}u.push("r="+Math.floor(1e9*Math.random()));let m=u.join("&");(new Image).src=this.baseUrl+"/"+t+"/?"+m;}uuid(t){null==t&&(t="xxxxxxxxxx"),t=t.toLowerCase();let e="";for(;e.length<t.length;)if("-"===t.charAt(0))e+="-";else e+="1234567890qwertyuiopasdfghjklzxcvbnmQWERTYUIOPASDFGHJKLZXCVBNM".charAt(i.random(62));return e}}u.__name__="bs.player.plugin.bradmax.analytics.BradmaxAnalyticsLogger",Object.assign(u.prototype,{__class__:u});class g{constructor(){this.state=1,this.currentTime=0,this.duration=null,this.mediaId=null,this.title=null,this.isDrmProtected=!1,this.wasFirstPlayingEvent=!1,this.wasFirstQuartilePlayback=!1,this.wasMidpointPlaybackCallback=!1,this.wasThirdQuartilePlaybackCallback=!1,this.statsEngagementRateEnabled=!1,this.statsEngagementRatePercResolution=1,this.statsEngagementRateLastSendValue=-1,this.statsEngagementRateLastSendTs=0;}updateState(t){this.state=t;}onPlayEvent(t){this.updateState(10);}onPauseEvent(t){this.updateState(1);}onVideoProgress(t){if(null==t)return;let e=this.countPlaybackProgress(t);if(null!=this.firstPlayingEventCallback&&10==this.state&&!this.wasFirstPlayingEvent&&t.data.currentTime>0&&(this.wasFirstPlayingEvent=!0,this.firstPlayingEventCallback()),this.isLive||(null!=this.firstQuartilePlaybackCallback&&10==this.state&&!this.wasFirstQuartilePlayback&&e>=.25&&(this.wasFirstQuartilePlayback=!0,this.firstQuartilePlaybackCallback()),null!=this.midpointPlaybackCallback&&10==this.state&&!this.wasMidpointPlaybackCallback&&e>=.5&&(this.wasMidpointPlaybackCallback=!0,this.midpointPlaybackCallback()),null!=this.thirdQuartilePlaybackCallback&&10==this.state&&!this.wasThirdQuartilePlaybackCallback&&e>=.75&&(this.wasThirdQuartilePlaybackCallback=!0,this.thirdQuartilePlaybackCallback())),this.currentTime=t.data.currentTime,this.wasFirstPlayingEvent)if(this.isLive){let t=(new Date).getTime(),a=Math.round(e);t-this.statsEngagementRateLastSendTs>6e4&&a!=this.statsEngagementRateLastSendValue&&(null!=this.engagementRateTimeProgressCallback&&this.engagementRateTimeProgressCallback(a),this.statsEngagementRateLastSendValue=a,this.statsEngagementRateLastSendTs=t);}else if(this.statsEngagementRateEnabled&&this.duration>0){let t=Math.floor(100*e);this.duration<100/this.statsEngagementRatePercResolution&&(t=Math.floor(t/this.statsEngagementRatePercResolution)*this.statsEngagementRatePercResolution);let a=t%this.statsEngagementRatePercResolution==0,i=t==this.statsEngagementRateLastSendValue,s=(new Date).getTime()-this.statsEngagementRateLastSendTs>1e3;!a||i||!s&&100!=t||(null!=this.engagementRatePercentProgressCallback&&this.engagementRatePercentProgressCallback(t),this.statsEngagementRateLastSendValue=t,this.statsEngagementRateLastSendTs=(new Date).getTime());}null!=t.data&&t.data.duration>0&&t.data.duration!=this.duration&&this.onVideoDurationChange(t);}countPlaybackProgress(t){let e=this.duration;if(this.isLive){let e=0;try{e=t.data.media.mediaPlaybackInfo.currentTime;}catch(t){e=(new Date).getTime()/1e3;}return e}return null!=t.data&&t.data.duration>0&&t.data.duration!=this.duration&&(e=t.data.duration),e>0?t.data.currentTime/e:0}onVideoDurationChange(t){this.isLive||null==t||null==t.data||(this.duration=t.data.duration);}onVideoComplete(t){this.wasFirstPlayingEvent=!1,this.wasFirstQuartilePlayback=!1,this.wasMidpointPlaybackCallback=!1,this.wasThirdQuartilePlaybackCallback=!1,null!=this.completePlaybackCallback&&this.completePlaybackCallback(),null!=t&&(null!=t.data&&t.data.duration>0&&t.data.duration!=this.duration&&this.onVideoDurationChange(t),this.currentTime=this.duration);}onVideoPlaying(t){this.updateState(10);}onVideoPaused(t){this.updateState(1);}onAfterPlaybackStartMetadataData(t){this.initIsLive(t.data);}initIsLive(t){this.isLive=t instanceof d,this.isLive&&(this.duration=null);}onMetadata(t){if(this.currentTime=0,this.duration=0,this.isDrmProtected=!1,null!=t){let e=t.data;this.duration=e.duration,this.mediaId=e.id,this.title=e.title,this.media=e,this.initIsLive(e),null!=t.data.adId&&(this.mediaId=t.data.adId),null!=t.data.durationTotal&&(this.duration=t.data.durationTotal);}}onDrmAuthenticationComplete(t){this.isDrmProtected=!0;}}g.__name__="bs.player.plugin.bradmax.analytics.BradmaxAnalyticsPlaybackState",Object.assign(g.prototype,{__class__:g});var m,p=require("haxe.ds.StringMap");class y{static getClass(t){if(null==t)return null;if(t instanceof Array)return Array;{let e=t.__class__;if(null!=e)return e;let a=y.__nativeClassName(t);return null!=a?y.__resolveNativeClass(a):null}}static __string_rec(t,e){if(null==t)return "null";if(e.length>=5)return "<...>";let a=typeof t;switch("function"==a&&(t.__name__||t.__ename__)&&(a="object"),a){case"function":return "<function>";case"object":if(t instanceof Array){let a="[";e+="\t";let i=0,s=t.length;for(;i<s;){let s=i++;a+=(s>0?",":"")+y.__string_rec(t[s],e);}return a+="]",a}let a;try{a=t.toString;}catch(t){return "???"}if(null!=a&&a!=Object.toString&&"function"==typeof a){let e=t.toString();if("[object Object]"!=e)return e}let i="{\n";e+="\t";let s=null!=t.hasOwnProperty,r=null;for(r in t)s&&!t.hasOwnProperty(r)||"prototype"!=r&&"__class__"!=r&&"__super__"!=r&&"__interfaces__"!=r&&"__properties__"!=r&&(2!=i.length&&(i+=", \n"),i+=e+r+" : "+y.__string_rec(t[r],e));return i+="\n"+(e=e.substring(1))+"}",i;case"string":return t;default:return String(t)}}static __nativeClassName(t){let e=y.__toStr.call(t).slice(8,-1);return "Object"==e||"Function"==e||"Math"==e||"JSON"==e?null:e}static __resolveNativeClass(t){return e[t]}}y.__name__="js.Boot";class b{static all(){let t=new p,e=window.document.cookie.split(";"),a=0;for(;a<e.length;){let i=e[a];++a,i=s.ltrim(i);let r=i.split("=");if(r.length<2)continue;let n=decodeURIComponent(r[1].split("+").join(" "));t.h[r[0]]=n;}return t}static get(t){return b.all().h[t]}}function P(t,a){return null==a?null:(null==a.__id__&&(a.__id__=e.$haxeUID++),null==t.hx__closures__?t.hx__closures__={}:i=t.hx__closures__[a.__id__],null==i&&(i=a.bind(t),t.hx__closures__[a.__id__]=i),i);var i;}b.__name__="js.Cookie",e.$haxeUID|=0,Object.defineProperty(String.prototype,"__class__",{value:String,enumerable:!1,writable:!0}),String.__name__="String",Array.__name__="Array",Date.prototype.__class__=Date,Date.__name__="Date",y.__toStr={}.toString,h.CFG_KEY="bradmaxAnalytics",h.ENGAGEMENT_RATE_PERC_MODE_DEFAULT_RESOLUTION=1,h.ERROR_SUPRESS_WINDOW_AFTER_ERROR=3e3,h.SPECIAL_CONTENT_META_TAGS=["imdbId","gracenoteId","contentType","episodeTitle","tvShow","season","saga","genre","vendor","subscriptionCost","contentPrice"],h.__plugfaces__="IPlugin";}(exports,window);
(function(A){function l(){}function q(){this.j=Object.create(null);}function B(b,a){this.item=b;this.next=a;}function C(){this.length=0;}function y(b,a,c){u.call(this,String(b),a,c);this.value=b;}function D(b){var a=this;this.id=setInterval(function(){a.Sa();},b);}function u(b,a,c){this.message=b;this.Ca=null!=c?c:this;}function G(){}function m(){}function p(){}function v(){this.ha=new q;this.Pa=this.Qa=this.Oa=null;this.ca=new q;this.ma=new q;this.Na=null;this.Ka=new C;this.ja=[];this.T=new q;this.N=new q;
this.na=window.screen;this.w=window;this.d=document;this.buffer=[];var b=this;this.g=new E(this);window.bams=r(this,this.action);window.bams();window._ba_action=r(this,this.action);window._ba_action();window._ba_video_event=r(this,this.Vb);window._ba_video_event();window._ba_track=r(this,this.Lb);window._ba_track();window._ba_untrack=r(this,this.Ob);window._ba_untrack();window._ba_enable_cookies=(t=this.g,r(t,t.Ja));window._ba_disable_cookies=(t=this.g,r(t,t.mb));window._ba_use_cookies=(t=this.g,
r(t,t.F));this.g.$(this.w,"unload",function(){b.qa(!0);});this.g.$(this.w,"beforeunload",function(){b.qa(!0);});this.g.$(this.d,"mousedown",function(){b.qa(!1);});setInterval(r(this,this.ub),6E5);this.vb();}function E(b){this.W=new q;this.na=window.screen;this.w=window;this.d=document;this.Ia=!1;this.U="";this.I=!1;this.Aa="";this.O="Um9sYGg=";this.P="Um9sYGE=";this.Z="Um9sYG5pbg==";this.ta="Um9saWx5bFJ+aHU=";this.sa="Um9saWx5bFJsamg=";this.Ua="fnlseX4jb39saWBsdSNuYmAiezw=";this.wa="b39saWBsdSB+eWx5fiBlbg==";
this.Va="ZXl5fX43IiJ+eWx5fiNvf2xpYGx1I25iYCJ7PCJqbiNleWBh";this.ua="T19MSUBMVVJOSU5SX0hbRFtIUg==";this.va="b39saWBsdSB+eWx5fiBuaW4=";this.da="b39saWBsdSB+eWx5fiBuYmJmZGh+IGhjbG9haGk=";this.xa="b39saWBsdSB+eWx5fiB5f2xuZiBlbH5l";this.za="b39saWBsdSB+eWx5fiB5f2xuZiB9bH9sYH4=";this.ya="b39saWBsdSB+eWx5fiB5f2xuZiB9bGpo";this.log=b;this.Ia="file:"==this.d.location.href.substr(0,5);this.Aa=this.Y();this.I=this.F();a:{b=this.i(this.Z)+"=";for(var a=decodeURIComponent(document.cookie).split(";"),c=0;c<a.length;c++){for(var e=
a[c];" "==e.charAt(0);)e=e.substring(1);if(0==e.indexOf(b)){b=e.substring(b.length,e.length);break a}}b="";}this.U=b;""==this.U&&this.I&&this.ia();}function z(){}function J(b,a){b=Object.create(b);for(var c in a)b[c]=a[c];a.toString!==Object.prototype.toString&&(b.toString=a.toString);return b}function r(b,a){if(null==a)return null;null==a.ea&&(a.ea=A.ra++);var c;null==b.ka?b.ka={}:c=b.ka[a.ea];null==c&&(c=a.bind(b),b.ka[a.ea]=c);return c}z.l=!0;z.ib=function(b,a){b=b.charCodeAt(a);if(b==b)return b};
z.now=function(){return Date.now()};E.l=!0;E.prototype={Mb:function(){var b=!1;null!=p.u(this.w,this.i(this.ya))&&(b=p.u(this.w,this.i(this.ya)));return b},Nb:function(){var b=!1;null!=p.u(this.w,this.i(this.za))&&(b=p.u(this.w,this.i(this.za)));return b},Kb:function(){var b=!1;null!=p.u(this.w,this.i(this.xa))&&(b=p.u(this.w,this.i(this.xa)));return b},Ub:function(){function b(e){e+="=";for(var d=decodeURIComponent(document.cookie).split(";"),f=0;f<d.length;f++){for(var g=d[f];" "==g.charAt(0);)g=
g.substring(1);if(0==g.indexOf(e))return g.substring(e.length,g.length)}return ""}var a=this.i(this.P),c=b(a);""==c&&(a=this.i(this.P),Object.prototype.hasOwnProperty.call(this.W.j,a)?c=this.W.j[a]:(c=this.Y(),this.W.j[a]=c));a=this.i(this.P);if(0!=this.F()||0!=this.I)b=function(e,d,f){var g=new Date;g.setTime(g.getTime()+864E5*f);document.cookie=e+"="+d+";expires="+g.toUTCString()+";path=/";},b(a,c,730);return c},Tb:function(){function b(e){e+="=";for(var d=decodeURIComponent(document.cookie).split(";"),
f=0;f<d.length;f++){for(var g=d[f];" "==g.charAt(0);)g=g.substring(1);if(0==g.indexOf(e))return g.substring(e.length,g.length)}return ""}var a=this.i(this.O),c=b(a);""==c&&(a=this.i(this.O),Object.prototype.hasOwnProperty.call(this.W.j,a)?c=this.W.j[a]:(c=this.Y(),this.W.j[a]=c));a=this.i(this.O);if(0!=this.F()||0!=this.I)b=function(e,d,f){var g=new Date;g.setTime(g.getTime()+864E5*f);document.cookie=e+"="+d+";expires="+g.toUTCString()+";path=/";},b(a,c,.020833333333333332);return c},rb:function(){return null==
p.u(this.w,this.i(this.wa))?this.i(this.Ua):p.u(this.w,this.i(this.wa))},ia:function(b){null==b&&(b=!1);var a=null==p.u(this.w,this.i(this.va))?this.i(this.Va):p.u(this.w,this.i(this.va));if(this.Ia)this.log.request();else {this.$(this.w,"message",r(this,this.tb));var c=document.createElement("iframe");c.setAttribute("src",a+"?parent="+m.o(this.d.location.href)+"&delete="+(null==b?"null":""+b));c.setAttribute("width",0);c.setAttribute("height",0);c.setAttribute("scrolling","no");c.style.display="none";
c.style.visibility="hidden";document.head.appendChild(c);setTimeout((t=this.log,r(t,t.request)),4E3);}},tb:function(b){if(null!=b&&null!=b.data&&"string"==typeof b.data&&0==b.data.indexOf(this.i(this.ua))){this.U=b.data.split(this.i(this.ua))[1];b=this.i(this.Z);var a=this.U;if(0!=this.F()||0!=this.I){var c=new Date;c.setTime(c.getTime()+63072E6);document.cookie=b+"="+a+";expires="+c.toUTCString()+";path=/";}this.log.request();}},V:function(){return this.F()?this.U:this.Aa},Ga:function(){if(this.F())return !0;
var b=1==p.u(this.w,this.i(this.da));1!=b||this.F()||this.Ja();return b},F:function(){function b(d){d+="=";for(var f=decodeURIComponent(document.cookie).split(";"),g=0;g<f.length;g++){for(var h=f[g];" "==h.charAt(0);)h=h.substring(1);if(0==h.indexOf(d))return h.substring(d.length,h.length)}return ""}var a=this.i(this.Z),c=b(a);a=this.i(this.O);b=function(d){d+="=";for(var f=decodeURIComponent(document.cookie).split(";"),g=0;g<f.length;g++){for(var h=f[g];" "==h.charAt(0);)h=h.substring(1);if(0==h.indexOf(d))return h.substring(d.length,
h.length)}return ""};var e=b(a);a=this.i(this.P);b=function(d){d+="=";for(var f=decodeURIComponent(document.cookie).split(";"),g=0;g<f.length;g++){for(var h=f[g];" "==h.charAt(0);)h=h.substring(1);if(0==h.indexOf(d))return h.substring(d.length,h.length)}return ""};a=b(a);return ""!=c||""!=e||""!=a?!0:!1},Ja:function(){function b(d){d+="=";for(var f=decodeURIComponent(document.cookie).split(";"),g=0;g<f.length;g++){for(var h=f[g];" "==h.charAt(0);)h=h.substring(1);if(0==h.indexOf(d))return h.substring(d.length,
h.length)}return ""}this.I=!0;this.w[this.i(this.da)]=!0;var a=this.i(this.P),c=b(a);""==c&&(c=this.Y());a=this.i(this.O);b=function(d){d+="=";for(var f=decodeURIComponent(document.cookie).split(";"),g=0;g<f.length;g++){for(var h=f[g];" "==h.charAt(0);)h=h.substring(1);if(0==h.indexOf(d))return h.substring(d.length,h.length)}return ""};var e=b(a);""==e&&(e=this.Y());a=this.i(this.P);if(0!=this.F()||0!=this.I)b=function(d,f,g){var h=new Date;h.setTime(h.getTime()+864E5*g);document.cookie=d+"="+f+";expires="+
h.toUTCString()+";path=/";},b(a,c,730);a=this.i(this.O);if(0!=this.F()||0!=this.I)b=function(d,f,g){var h=new Date;h.setTime(h.getTime()+864E5*g);document.cookie=d+"="+f+";expires="+h.toUTCString()+";path=/";},b(a,e,.020833333333333332);this.ia();},mb:function(){function b(c){var e=new Date;e.setTime(e.getTime()+1E3);document.cookie=c+"=;expires="+e.toUTCString()+";path=/";}this.I=!1;p.lb(this.w,this.i(this.da));this.ia(!0);var a=this.i(this.Z);b(a);a=this.i(this.O);b=function(c){var e=new Date;e.setTime(e.getTime()+
1E3);document.cookie=c+"=;expires="+e.toUTCString()+";path=/";};b(a);a=this.i(this.P);b=function(c){var e=new Date;e.setTime(e.getTime()+1E3);document.cookie=c+"=;expires="+e.toUTCString()+";path=/";};b(a);},getTimezoneOffset:function(){return (new Date).getTimezoneOffset()},warn:function(b){console.warn(b);},A:function(b){var a="";try{a=b.join(",");}catch(d){try{var c=""+m.parseInt(""+m.o(b));c==""+m.o(b)&&(a=c);var e=""+parseFloat(""+m.o(b));e==""+m.o(b)&&(a=e);}catch(f){a="";}}return a},Y:function(b){null==
b&&(b="xxxxxxxxxx");b=b.toLowerCase();for(var a="";a.length<b.length;)switch(b.charAt(0)){case "-":a+="-";break;case "x":a+="1234567890qwertyuiopasdfghjklzxcvbnmQWERTYUIOPASDFGHJKLZXCVBNM".charAt(m.random(62));break;default:a+="1234567890qwertyuiopasdfghjklzxcvbnmQWERTYUIOPASDFGHJKLZXCVBNM".charAt(m.random(62));}return a},now:function(){return (new Date).getTime()},v:function(){return Math.floor(this.now()/1E3)},$:function(b,a,c){b.addEventListener?b.addEventListener(a,c,!1):b.attachEvent&&b.attachEvent("on"+
m.o(a),c);},i:function(b,a){null==a&&(a=13);var c="";b=this.hb(b);for(var e=0,d=b.length;e<d;){var f=e++;c+=String.fromCodePoint(a^z.ib(b,f));}return c},hb:function(b){var a={},c,e=0,d,f=0,g,h="",n=String.fromCharCode,k=b.length;for(c=0;64>c;c++)a["ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt(c)]=c;for(d=0;d<k;d++)for(c=a[b.charAt(d)],e=(e<<6)+c,f+=6;8<=f;)((g=e>>>(f-=8)&255)||d<k-2)&&(h+=n(g));return h},Ha:function(b){return JSON.parse(JSON.stringify(b))},H:E};v.l=!0;v.wb=
function(){v.sb();};v.sb=function(){null==v.instance&&(v.instance=new v);};v.prototype={Lb:function(b){null!=b&&""!=b&&(this.ha.j[b]=!0,this.action(b,{event:"page.view"}));},Ob:function(b){var a=this.ha;Object.prototype.hasOwnProperty.call(a.j,b)&&delete a.j[b];},vb:function(){var b=this,a=this.g.d.location.href;(new D(100)).Sa=function(){a!=b.g.d.location.href&&(a=b.g.d.location.href,b.xb(a));};},xb:function(b){var a=this.g.Mb(),c=this.g.Nb(),e=this.g.Kb();var d=b.split("#");var f=d[1];d=d[0].split("?");
b=d[1];d=d[0];a&&this.Pa!=d?this.la():c&&this.Qa!=b?this.la():e&&this.Oa!=f&&this.la();this.Pa=d;this.Qa=b;this.Oa=f;},la:function(){for(var b=Object.keys(this.ha.j),a=b.length,c=0;c<a;){var e=b[c++];null!=e&&""!=e&&this.action(e,{event:"page.view"});}},ub:function(){for(var b=this.T.j,a=Object.keys(b),c=a.length,e=0;e<c;){var d=b[a[e++]],f=new Image,g="&cc="+this.g.V();f.src=""+d.uri+g;}},qa:function(b){var a="sendBeacon"in navigator;b&&this.nb(a);if(a&&b){for(b=[];0<this.buffer.length;)b.push(this.buffer.pop());
for(;0<b.length;){a=b.pop();a=this.aa(a.D,a.data);var c="&cc="+this.g.V();a+=c;navigator.sendBeacon(a,null);}}else this.Hb(b);},nb:function(b){if(b){this.T=new q;var a=this.N.j;b=a;a=Object.keys(a);for(var c=a.length,e=0;e<c;){var d=b[a[e++]];d=d.uri;var f="&cc="+this.g.V();d+=f;navigator.sendBeacon(d,null);}this.N=new q;}else {this.T=new q;b=a=this.N.j;a=Object.keys(a);c=a.length;for(e=0;e<c;){d=b[a[e++]];var g=new Image;f="&cc="+this.g.V();g.src=""+d.uri+f;}this.N=new q;for(b=this.g.now();b+200>this.g.now(););
}},Hb:function(b){try{if(this.X(),this.request(),b)for(var a=this.g.now();a+200>this.g.now(););}catch(c){}},ba:function(b,a){null==b&&(b="");a=this.aa(b,a);this.request(b,a);},h:function(b){return ""+m.o(b)},aa:function(b,a){null==b&&(b="");var c=[],e="";this.g.Ga();c.push([this.h("lc"),this.g.Ub()]);c.push([this.h("sc"),this.g.Tb()]);this.g.F()||c.push([this.h("dc"),"true"]);var d=this.h("ln"),f=this.g;c.push([d,navigator.language||navigator.Ma||navigator.browserLanguage||navigator.systemLanguage||
"unknown"]);d=this.h("zo");f=this.g;c.push([d,""+(new Date).getTimezoneOffset()]);d=this.h("tz");f=this.g;f=function(){var n="unknown";window.Intl&&window.Intl.DateTimeFormat?n=(new window.Intl.DateTimeFormat).resolvedOptions().timeZone:n="unknown";return n}();c.push([d,""+f]);c.push([this.h("pt"),""+m.o(this.g.d.title)]);c.push([this.h("lo"),""+m.o(this.g.d.location.href)]);d=this.h("la");f=this.g;c.push([d,navigator.language||navigator.Ma||navigator.browserLanguage||navigator.systemLanguage||"unknown"]);
d=this.h("cs");f=this.g;c.push([d,document.characterSet]);d=this.g.d.ac;d!=this.Na&&""!=d&&null!=d&&(c.push([this.h("rf"),""+d]),this.Na=d);d=this.h("re");f=this.g;c.push([d,""+m.o(f.na.availWidth)+"x"+m.o(f.na.availHeight)]);d=this.h("vp");f=this.g;c.push([d,""+Math.max(f.d.documentElement.clientWidth,f.w.innerWidth|0)+"x"+Math.max(f.d.documentElement.clientHeight,f.w.innerHeight|0)]);d=this.h("dp");f=this.g;f=null;try{f=function(){return function(n){for(var k=1;!n(k)&&16777216>=k;)k*=2;if(16777216<
k)n=0;else {for(var w=k/2;1<k-w;){var x=k+w>>1;n(x)?k=x:w=x;}n=k;}return n}(function(n){return window.matchMedia("(max-resolution: "+n+"dpi)").matches})}();}catch(n){}c.push([d,""+(0==f?null:f)]);d=this.h("so");f=this.g;c.push([d,-1!=(""+screen.orientation||screen.Ma||screen.Zb).indexOf("landscape")?"l":"p"]);c.push([this.h("ev"),""+a.event]);c.push([this.h("mi"),""+a.s]);c.push([this.h("ri"),""+a.Cb]);c.push([this.h("ct"),""+a.currentTime]);c.push([this.h("du"),""+a.duration]);c.push([this.h("vt"),""+
a.title]);c.push([this.h("vo"),""+a.volume]);c.push([this.h("ms"),""+a.kb]);c.push([this.h("pr"),""+a.progress]);d=this.h("vr");try{var g=""+a.Ta.width+"x"+a.Ta.height;}catch(n){g="";}c.push([d,g]);c.push([this.h("br"),""+a.bitrate]);c.push([this.h("ss"),""+a.Gb]);c.push([this.h("sa"),""+a.Fb]);c.push([this.h("tg"),""+this.g.A(a.oa)]);c.push([this.h("pg"),""+this.g.A(a.yb)]);c.push([this.h("mt"),""+a.mimeType]);c.push([this.h("pv"),""+a.Ab]);c.push([this.h("ei"),""+a.pb]);this.Fa(c,a.jb);this.gb(c,
a.fb);f=this.g;null!=p.u(f.w,f.i(f.sa))&&(d=this.h("ag"),f=this.g,c.push([d,""+p.u(f.w,f.i(f.sa))]));f=this.g;null!=p.u(f.w,f.i(f.ta))&&(d=this.h("sx"),f=this.g,c.push([d,""+p.u(f.w,f.i(f.ta))]));if(null!=a.M){g=this.g.v();d=0;for(var h=a.M.length;d<h;)f=d++,a.M[f]=g-a.M[f];"er.time"==a.event&&null!=a.ob&&c.push([this.h("er"),""+a.ob]);c.push([this.h("eo"),""+this.g.A(a.M)]);c.push([this.h("ep"),""+this.g.A(a.G)]);}if(null!=a.m&&null!=a.J){g=this.g.v();d=0;f=a.m.length;0<a.m.length&&(d=this.g.v()-
a.m[f-1]);1==a.J.length<a.m.length&&(a.J=[d],d=this.g.Ha(a),d.m=[a.m.pop()+g],d.S=[a.S.pop()],d.J=null,d.C=[a.C.pop()],this.buffer.push({D:b,data:d}));d=0;for(h=a.m.length;d<h;)f=d++,a.m[f]=g-a.m[f];for(;;){g=a.J.indexOf(0);if(-1==g)break;a.J.splice(g,1);a.m.splice(g,1);a.S.splice(g,1);a.C.splice(g,1);}c.push([this.h("qo"),""+this.g.A(a.m)]);c.push([this.h("qp"),""+this.g.A(a.S)]);c.push([this.h("ql"),""+this.g.A(a.J)]);c.push([this.h("qb"),""+this.g.A(a.C)]);}if(null!=a.B){g=this.g.v();"buffer.start"==
a.event&&(a.event="buffer.end",d=g-a.B[a.B.length-1],null==a.L?a.L=[d]:a.L.push(d));d=0;for(h=a.B.length;d<h;)f=d++,a.B[f]=g-a.B[f];c.push([this.h("bo"),""+this.g.A(a.B)]);c.push([this.h("bp"),""+this.g.A(a.R)]);c.push([this.h("bl"),""+this.g.A(a.L)]);}for(d=a=0;d<c.length;)f=c[d],++d,""!=f[1]&&"undefined"!=f[1]&&"null"!=f[1]&&"NaN"!=f[1]&&(e+=(0<a?"&":"")+f[0]+"="+encodeURIComponent(f[1])),++a;return ("http:"==this.g.d.location.href.substr(0,5)?"http://":"https://")+(""+this.g.rb()+"/"+b+"/?"+e+"&r="+
Math.random())},Fa:function(b,a,c){null==c&&(c=0);if(null!=a){var e="_"+c;b.push([this.h("cy")+e,""+(null==a.type?"null":m.o(H.pa(a.type)))]);b.push([this.h("ci")+e,""+a.Xb]);b.push([this.h("cr")+e,""+a.Db]);b.push([this.h("ce")+e,""+a.title]);b.push([this.h("cg")+e,this.g.A(a.oa)]);b.push([this.h("pp")+e,""+(null==a.Bb?"null":m.o(H.pa(a.Bb)))]);null!=a.zb&&this.Fa(b,a.zb,c+1);}},gb:function(b,a){if(null!=a)for(var c=0,e="_"+c,d=0;d<a.length;){var f=a[d];++d;b.push([this.h("ay")+e,""+(null==f.type?
"null":m.o(H.pa(f.type)))]);b.push([this.h("ai")+e,""+f.Wb]);b.push([this.h("ar")+e,""+f.Db]);b.push([this.h("at")+e,""+f.title]);b.push([this.h("ta")+e,this.g.A(f.oa)]);++c;e="_"+c;}},request:function(b,a){null==b&&null==a&&this.La();if(this.g&&""==this.g.U)null!=b&&null!=a&&this.ja.push({D:b,uri:a}),setTimeout(r(this,this.La),5E3);else if(null!=b&&null!=a){b=new Image;var c="&cc="+this.g.V();b.src=""+a+c;}},La:function(){for(;0<this.ja.length;){var b=this.ja.shift(),a=new Image,c="&cc="+this.g.V();a.src=
""+b.uri+c;}},X:function(){for(var b=[];0<this.buffer.length;)b.push(this.buffer.pop());for(;0<b.length;){var a=b.pop();this.ba(a.D,a.data);}},Qb:function(b,a,c){null==b&&(b="");var e=0==a.event.indexOf("er.time");if((0==a.event.indexOf("er.perc")||e)&&null!=a.G){e=!1;for(var d=0,f=this.buffer;d<f.length;){var g=f[d];++d;if(g.data.s==a.s&&g.D==b&&("er.perc"==g.data.event||"er.time"==g.data.event)){e=!0;c=g.data;g.data.event=a.event;c.G.push(a.G[0]);c.M.push(this.g.v());break}}e||(c=a,this.buffer.push({D:b,
data:c}));return {K:!0,data:c}}return {K:!1,data:c}},Ra:function(b,a,c){null==a.C?a.C=[c]:a.C.push(c);null==a.m?a.m=[this.g.v()]:a.m.push(this.g.v());null==a.S?a.S=[b.currentTime]:a.S.push(b.currentTime);return a},Ea:function(b,a){if(null==a.m)return a;b=this.g.v()-a.m[a.m.length-1];null==a.J?a.J=[b]:a.J.push(b);return a},Eb:function(b,a,c){var e=this.g.Ha(b);a=this.Ea(b,a,c);return a=this.Ra(e,a,c)},Sb:function(b,a,c){null==b&&(b="");var e="quality.change"==a.event,d="buffer.end"==a.event,f="play"==
a.event,g="pause"==a.event,h="complete"==a.event;g="buffer.start"==a.event||g||h;var n=d||f,k=0;Object.prototype.hasOwnProperty.call(this.ma.j,a.s)&&(k=this.ma.j[a.s]);e&&null!=a.C&&(k=this.ma.j[a.s]=a.C);var w=!1,x=f;Object.prototype.hasOwnProperty.call(this.ca.j,a.s)&&(w=this.ca.j[a.s]);w&&e&&(x=!0);f&&(this.ca.j[a.s]=!0);g&&(this.ca.j[a.s]=!1);for(var K=!1,I=0,L=this.buffer;I<L.length;){var F=L[I];++I;if(F.data.s==a.s&&F.D==b&&"quality.change"==F.data.event){c=F.data;c.event="quality.change";1==
e&&1==x?c=this.Eb(a,c,k):0==w&&1==x?c=this.Ra(a,c,k):1==w&&0==x&&(c=this.Ea(a,c,k));1==h&&this.X();K=!0;break}}!K&&f&&(c=a,c.event="quality.change",c.C=[k],c.m=[this.g.v()],c.S=[a.currentTime],this.buffer.push({D:b,data:c}));return n||g||e||d?{K:!0,data:c}:{K:!1,data:c}},Pb:function(b,a,c){null==b&&(b="");var e="buffer.start"==a.event,d="buffer.end"==a.event;if(e||d){for(var f=a.currentTime,g=!1,h=0,n=this.buffer;h<n.length;){var k=n[h];++h;if(k.data.s==a.s&&k.D==b&&("buffer.end"==k.data.event||"buffer.start"==
k.data.event)){g=!0;c=k.data;if(a.event==k.data.event)break;k.data.event=a.event;if(d&&null==c.R)break;e&&(null==c.R?c.R=[f]:c.R.push(f),null==c.B?c.B=[this.g.v()]:c.B.push(this.g.v()));d&&null!=c.R&&0<c.R.length&&(k=c.B.length,k=this.g.v()-c.B[k-1],null==c.L?c.L=[k]:c.L.push(k));break}}g||"buffer.start"!=a.event||(c=a,c.R=[f],c.B=[this.g.v()],this.buffer.push({D:b,data:c}));return {K:!0,data:c}}return e||d?{K:!0,data:c}:{K:!1,data:c}},Rb:function(b,a){null==b&&(b="");var c=a.s,e={event:null};if("media.view"==
a.event)return this.X(),this.Ka.add(a.s),!1;null!=a.G&&"number"==typeof a.G&&(a.G=[l.Wa(a.G,M)]);null!=a.G&&null==a.M&&(a.M=[this.g.v()]);var d=this.Qb(b,a,e),f=d.K;e=d.data;e=this.Sb(b,a,e);d=e.K;e=e.data;a=this.Pb(b,a,e);b=a.K;e=a.data;return f||d||b?(this.Ka.remove(c),null!=e.G&&10<=e.G.length?this.X():null!=e.C&&10<=e.C.length?this.X():null!=e.L&&10<=e.L.length&&this.X(),!0):!1},Vb:function(){},action:function(b,a){null==b&&(b="");if(""!=b||null!=a)a.event=a.event,a.s=a.materialID,a.Cb=a.relatedID,
a.pb=a.externalId,a.currentTime=a.currentTime,a.duration=a.duration,a.title=a.title,a.volume=a.volume,a.kb=a.currentState,a.progress=a.progress,a.Ta=a.videoResolution,a.bitrate=a.bitrate,a.Gb=a.selectedSubtitle,a.Fb=a.selectedAudio,a.oa=a.tags,a.yb=a.pageTags,a.mimeType=a.mimeType,a.Ab=a.playerVersion,a.M=a.engagementRateTimeOffset,a.G=a.engagementRatePosition,a.fb=a.artist,a.jb=a.collection,a.$b=a.positionInCollection,this.g.Ga(),""==b||null==a||""==a.event?(b="WRONG REQUEST:\nCID: "+b+"\nDATA: "+
m.o(a),console.warn(b)):"media.user.start"==a.event||"media.user.end"==a.event?this.Ib(b,a):0==this.Rb(b,a)&&this.ba(b,a);},Ib:function(b,a){null==b&&(b="");var c=""+b+"|"+m.o(a.s);switch(a.event){case "media.user.end":if(Object.prototype.hasOwnProperty.call(this.T.j,c)){var e=this.T;Object.prototype.hasOwnProperty.call(e.j,c)&&delete e.j[c];}Object.prototype.hasOwnProperty.call(this.N.j,c)&&(e=this.N,Object.prototype.hasOwnProperty.call(e.j,c)&&delete e.j[c],this.ba(b,a));break;case "media.user.start":Object.prototype.hasOwnProperty.call(this.T.j,
c)||(e=this.aa(b,a),this.T.j[c]={uri:e,D:b}),Object.prototype.hasOwnProperty.call(this.N.j,c)||(this.ba(b,a),a.event="media.user.end",e=this.aa(b,a),this.N.j[c]={uri:e,D:b});}},H:v};Math.l=!0;p.l=!0;p.u=function(b,a){try{return b[a]}catch(c){return null}};p.lb=function(b,a){Object.prototype.hasOwnProperty.call(b,a)&&delete b[a];};m.l=!0;m.o=function(b){return l.ga(b,"")};m.parseInt=function(b){b=parseInt(b);return isNaN(b)?null:b};m.random=function(b){return 0>=b?0:Math.floor(Math.random()*b)};var H=
{pa:function(b){return 0>b?4294967296+b:b+0}};G.l=!0;G.ab=!0;u.l=!0;u.Jb=function(b){return b instanceof u?b.Ca:b instanceof Error?b:new y(b)};u.Da=Error;u.prototype=J(Error.prototype,{Yb:function(){return this.Ca},H:u});D.l=!0;D.prototype={Sa:function(){},H:D};y.l=!0;y.Da=u;y.prototype=J(u.prototype,{H:y});C.l=!0;C.prototype={add:function(b){b=new B(b,null);null==this.j?this.j=b:this.q.next=b;this.q=b;this.length++;},remove:function(b){for(var a=null,c=this.j;null!=c;){if(c.item==b)return null==a?
this.j=c.next:a.next=c.next,this.q==c&&(this.q=a),this.length--,!0;a=c;c=c.next;}return !1},H:C};B.l=!0;B.prototype={H:B};q.l=!0;q.$a=[G];q.prototype={H:q};l.l=!0;l.qb=function(b){if(null==b)return null;if(b instanceof Array)return Array;var a=b.H;if(null!=a)return a;b=l.Ba(b);return null!=b?l.cb(b):null};l.ga=function(b,a){if(null==b)return "null";if(5<=a.length)return "<...>";var c=typeof b;"function"==c&&(b.l||b.Ya)&&(c="object");switch(c){case "function":return "<function>";case "object":if(b instanceof
Array){c="[";a+="\t";for(var e=0,d=b.length;e<d;){var f=e++;c+=(0<f?",":"")+l.ga(b[f],a);}return c+"]"}try{e=b.toString;}catch(g){return "???"}if(null!=e&&e!=Object.toString&&"function"==typeof e&&(c=b.toString(),"[object Object]"!=c))return c;c="{\n";a+="\t";e=null!=b.hasOwnProperty;d=null;for(d in b)e&&!b.hasOwnProperty(d)||"prototype"==d||"__class__"==d||"__super__"==d||"__interfaces__"==d||"__properties__"==d||(2!=c.length&&(c+=", \n"),c+=a+d+" : "+l.ga(b[d],a));a=a.substring(1);return c+("\n"+a+
"}");case "string":return b;default:return String(b)}};l.fa=function(b,a){if(null==b)return !1;if(b==a)return !0;var c=b.$a;if(null!=c)for(var e=0,d=c.length;e<d;){var f=e++;f=c[f];if(f==a||l.fa(f,a))return !0}return l.fa(b.Da,a)};l.Za=function(b,a){if(null==a)return !1;switch(a){case Array:return b instanceof Array;case N:return "boolean"==typeof b;case O:return null!=b;case M:return "number"==typeof b;case P:return "number"==typeof b?(b|0)===b:!1;case String:return "string"==typeof b;default:if(null!=b)if("function"==
typeof a){if(l.Xa(b,a))return !0}else {if("object"==typeof a&&l.bb(a)&&b instanceof a)return !0}else return !1;return a==Q&&null!=b.l||a==R&&null!=b.Ya?!0:!1}};l.Xa=function(b,a){return b instanceof a?!0:a.ab?l.fa(l.qb(b),a):!1};l.Wa=function(b,a){if(null==b||l.Za(b,a))return b;throw u.Jb("Cannot cast "+m.o(b)+" to "+m.o(a));};l.Ba=function(b){b=l.eb.call(b).slice(8,-1);return "Object"==b||"Function"==b||"Math"==b||"JSON"==b?null:b};l.bb=function(b){return null!=l.Ba(b)};l.cb=function(b){return A[b]};
var t;A.ra|=0;"undefined"!=typeof performance&&"function"==typeof performance.now&&(z.now=performance.now.bind(performance));null==String.fromCodePoint&&(String.fromCodePoint=function(b){return 65536>b?String.fromCharCode(b):String.fromCharCode((b>>10)+55232)+String.fromCharCode((b&1023)+56320)});Object.defineProperty(String.prototype,"__class__",{value:String,enumerable:!1,writable:!0});String.l=!0;Array.l=!0;Date.prototype.H=Date;Date.l="Date";var P={},O={},M=Number,N=Boolean,Q={},R={};l.eb={}.toString;
v.wb();})("undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:exports);!function(e,t){e.bs=e.bs||{},e.bs.player=e.bs.player||{},e.bs.player.plugin=e.bs.player.plugin||{},e.bs.player.plugin.javascriptapi=e.bs.player.plugin.javascriptapi||{};var s={},i=require("haxe.HxOverrides");Math.__name__="Math";var n=require("haxe.Reflect");class r{static createInstance(e,t){return new(Function.prototype.bind.apply(e,[null].concat(t)))}}s.Type=r,r.__name__="Type";var a=require("bs.player.core.events.AdEvent"),o=require("bs.player.core.events.ControlEvent"),l=require("bs.player.core.events.DataProviderEvent"),c=require("bs.player.core.events.DisplayEvent"),h=require("bs.player.core.events.ResizeEvent"),p=require("bs.player.core.events.VideoEvent"),u=require("bs.player.core.manager.EventHub"),d=require("bs.player.core.model.Media"),_=require("bs.player.core.model.Live"),g=require("bs.player.core.model.Catchup"),v=require("bs.player.core.model.LiveStream"),y=require("bs.player.core.model.LiveChannel"),m=require("bs.player.core.model.LiveProgramStream"),x=require("bs.player.core.model.SubtitlesSet"),b=require("bs.player.core.model.AudioSet"),f=require("bs.player.core.model.Episode");class w{constructor(){w._hx_skip_constructor||this._hx_constructor();}_hx_constructor(){this.pluginName="";let e=R.getClass(this);this.pluginName=e.__name__.split(".").pop();let t=this.pluginName,s=exports.configuration;this.pluginConfig=null!=s&&Object.prototype.hasOwnProperty.call(s,t)?n.field(s,t):Object.create(null);}create(){}destroy(){}activate(){}postActivate(){}deactivate(){}eventFilter(e){return !0}registerPlugin(e){}getPluginVersion(){return "v2.14.417"}getPluginName(){return this.pluginName}get_player(){return this.player}set_player(e){return this.player=e}get_variables(){return this.variables}set_variables(e){return this.variables=e}get_eventHub(){return this.eventHub}set_eventHub(e){return this.eventHub=e}get_parentDisplay(){return this.parentDisplay}set_parentDisplay(e){return this.parentDisplay=e}get_display(){return this.display}}s["bs.player.core.plugin.PluginBase"]=w,w.__name__="bs.player.core.plugin.PluginBase",Object.assign(w.prototype,{__class__:w});class C{}s["bs.player.plugin.javascriptapi.EventRecorderConfig"]=C,C.__name__="bs.player.plugin.javascriptapi.EventRecorderConfig",Object.assign(C.prototype,{__class__:C});class E{constructor(e,t){this.isRecording=!1,this.context=e,this.config=t,this.eventsMap=new I,this.listenersMap=new I,this.onceListenersMap=new I;let s=this.config.replayOn.split(".");T.isSmartTV()&&!this.isExpectedToGetSpeedupForSmartTv()?this.isRecording=!1:(this.isRecording=!0,u.getInstance().addOnce(e,"bs.player.core.events."+s[0],s[1],D(this,this.handleReplay)));}isExpectedToGetSpeedupForSmartTv(){return T.isSamsungSmartTVTizen?T.getTizenVersion()>=6:"Chrome"==T.browserName&&T.majorVersion>=87}recordable(e){if(null==this.config||null==this.config.record)return !1;let t=this.config.record,s=e.split(".");if(0==Object.prototype.hasOwnProperty.call(t,s[0]))return !1;let i=n.field(t,s[0]);return null!=i&&i instanceof Array&&i.indexOf(s[1])>-1}record(e,t,s,i){if(this.context!=e)return;let n=t+"."+s;Object.prototype.hasOwnProperty.call(this.listenersMap.h,n)?this.listenersMap.h[n].push(i):(this.listenersMap.h[n]=[i],u.getInstance().add(e,t,s,D(this,this._listenerWrapper)));}recordOnce(e,t,s,i){if(this.context!=e)return;let n=t+"."+s;Object.prototype.hasOwnProperty.call(this.onceListenersMap.h,n)?this.onceListenersMap.h[n].push(i):(this.onceListenersMap.h[n]=[i],u.getInstance().add(e,t,s,D(this,this._listenerWrapper)));}remove(e,t,s,n){if(this.context!=e)return;let r=t+"."+s;if(Object.prototype.hasOwnProperty.call(this.onceListenersMap.h,r)){let e=this.onceListenersMap.h[r];if(e.length>0){let t=0;for(;t<e.length;)if(e[t++]==n){let t=e.slice();i.remove(t,n),this.onceListenersMap.h[r]=t;break}}}if(Object.prototype.hasOwnProperty.call(this.listenersMap.h,r)){let e=this.listenersMap.h[r];if(e.length>0){let t=0;for(;t<e.length;)if(e[t++]==n){let t=e.slice();i.remove(t,n),this.listenersMap.h[r]=t;break}}}}_listenerWrapper(e){this.eventsMap.h[e.className+"."+e.type]=e;}handleReplay(e){let t=u.getInstance(),s=this;k.delay((function(){let e=s.eventsMap.h,t=Object.keys(e),i=t.length,n=0;for(;n<i;){let i=t[n++],r=e[i];if(Object.prototype.hasOwnProperty.call(s.onceListenersMap.h,i)){let e=0,t=s.onceListenersMap.h[i];for(;e<t.length;)t[e++](r);}if(Object.prototype.hasOwnProperty.call(s.listenersMap.h,i)){let e=0,t=s.listenersMap.h[i];for(;e<t.length;)t[e++](r);}}}),100);let i,n=function(e){let t=e.split("."),s=t.pop(),i=t.join("."),n=new Array(2);return n[0]=i,n[1]=s,n},r=Object.keys(this.onceListenersMap.h),a=r.length,o=0;for(;o<a;)i=n(r[o++]),t.remove(this.context,i[0],i[1],D(this,this._listenerWrapper));let l=this.listenersMap.h,c=Object.keys(l),h=c.length,p=0;for(;p<h;){let e=c[p++],s=l[e];i=n(e),Object.prototype.hasOwnProperty.call(this.onceListenersMap.h,e)||t.remove(this.context,i[0],i[1],D(this,this._listenerWrapper));let r=0;for(;r<s.length;)t.add(this.context,i[0],i[1],s[r++]);}this.isRecording=!1;}}s["bs.player.plugin.javascriptapi.EventRecorder"]=E,E.__name__="bs.player.plugin.javascriptapi.EventRecorder",Object.assign(E.prototype,{__class__:E});class M{}s["bs.player.plugin.javascriptapi.IEventsFilter"]=M,M.__name__="bs.player.plugin.javascriptapi.IEventsFilter",Object.assign(M.prototype,{__class__:M});class O extends w{constructor(){w._hx_skip_constructor=!0,super(),w._hx_skip_constructor=!1,this._hx_constructor();}_hx_constructor(){this.message=null,super._hx_constructor(),this.videoEventsFilterByContext=new I,null!=this.pluginConfig&&Object.prototype.hasOwnProperty.call(this.pluginConfig,"customVideoEventsFilterClass")&&(this.customVideoEventsFilterClass=n.field(this.pluginConfig,"customVideoEventsFilterClass"));}create(){if(super.create(),o.add(this.context,"close",D(this,this.onClose)),p.add(this.context,"durationChange",D(this,this.onDurationChange)),p.add(this.context,"currentTimeChange",D(this,this.onCurrentTimeChange)),l.add(this.context,"mediaMetadataData",D(this,this.onMetadataData)),l.add(this.context,"adMetadataData",D(this,this.onAdMetadataData)),c.add(this.context,"showMessage",D(this,this.onShowMessage)),c.add(this.context,"closeMessage",D(this,this.onCloseMessage)),this.pictureInPicture=new j(this.context),Object.prototype.hasOwnProperty.call(this.pluginConfig,"eventRecorder")){let e=n.field(this.pluginConfig,"eventRecorder");try{this.eventRecorder=new E(this.context,e);}catch(e){}}}destroy(){this.getOrCreateEventsFilterByContext(this.context).onPlayerDestroy(),null!=this.pictureInPicture&&this.pictureInPicture.destroy(),o.remove(this.context,"close",D(this,this.onClose)),p.remove(this.context,"durationChange",D(this,this.onDurationChange)),p.remove(this.context,"currentTimeChange",D(this,this.onCurrentTimeChange)),l.remove(this.context,"mediaMetadataData",D(this,this.onMetadataData)),c.remove(this.context,"showMessage",D(this,this.onShowMessage)),c.remove(this.context,"closeMessage",D(this,this.onCloseMessage)),super.destroy();}getVersion(){return "v2.14.417"}onClose(e){null!=this.onCloseBind&&this.onCloseBind(e);}play(){if(null!=this.adMedia){let e=new a("adAdClick");e.data={url:null},e.dispatch(this.context);}else new o("skinPlay").dispatch(this.context);}pause(){new o("skinPause").dispatch(this.context);}playPause(){new o("skinPlayPause").dispatch(this.context);}seek(e){e>this.durationTime&&(e=this.durationTime-.5),e<0&&(e=0),this.currentTime=e;let t=new o("skinSeek");t.data={seekedPosition:e,seekSource:"jsapi"},t.dispatch(this.context);}seekRelative(e){let t=this;if(null!=this.currentTime)this.seek(this.currentTime+e);else if(this.media instanceof _){let s=!1;p.addOnce(this.context,"currentTimeChange",(function(i){s||(s=!0,t.pause(),null!=t.currentTime&&t.seekRelative(e));})),this.play();}else this.seek(e);}setVolume(e){let t=new o("skinVolume");t.data=e,t.dispatch(this.context);}setMute(e){new o(e?"skinMute":"skinUnmute").dispatch(this.context);}setSubtitlesById(e){let t=new o("selectSubtitles");null!=e&&(t.data=new x,t.data.id=e),t.dispatch(this.context);}setAudioById(e){let t=new o("selectAudio");null!=e&&(t.data=new b,t.data.id=e),t.dispatch(this.context);}toggleFullscreen(){new o("fullscreenToggleRequest").dispatch(this.context);}repaint(){new h("repaint").dispatch(this.context);}on(e,t){"close"==e&&(this.onCloseBind=t);}add(e,t){try{let s,i,n=e.split(".");if(n.length>2?(i=n.pop(),s=n.join(".")):(i=n.pop(),s="bs.player.core.events."+n.join("")),null!=this.eventRecorder&&1==this.eventRecorder.isRecording&&this.eventRecorder.recordable(e))return void this.eventRecorder.record(this.context,s,i,t);null!=this.customVideoEventsFilterClass&&s==p.__name__||T.mobile&&s==p.__name__?this.getOrCreateEventsFilterByContext(this.context).add(i,t):u.getInstance().add(this.context,s,i,t);}catch(e){let t=S.caught(e).unwrap();console.error(t);}}addOnce(e,t){try{let s,i,n=e.split(".");if(n.length>2?(i=n.pop(),s=n.join(".")):(i=n.pop(),s="bs.player.core.events."+n.join("")),null!=this.eventRecorder&&1==this.eventRecorder.isRecording&&this.eventRecorder.recordable(e))return void this.eventRecorder.recordOnce(this.context,s,i,t);null!=this.customVideoEventsFilterClass&&s==p.__name__||T.mobile&&s==p.__name__?this.getOrCreateEventsFilterByContext(this.context).addOnce(i,t):u.getInstance().addOnce(this.context,s,i,t);}catch(e){let t=S.caught(e).unwrap();console.error(t);}}remove(e,t){try{let s,i,n=e.split(".");if(n.length>2?(i=n.pop(),s=n.join(".")):(i=n.pop(),s="bs.player.core.events."+n.join("")),null!=this.eventRecorder&&1==this.eventRecorder.isRecording&&this.eventRecorder.recordable(e))return void this.eventRecorder.remove(this.context,s,i,t);null!=this.customVideoEventsFilterClass&&s==p.__name__||T.mobile&&s==p.__name__?this.getOrCreateEventsFilterByContext(this.context).remove(i,t):u.getInstance().remove(this.context,s,i,t);}catch(e){let t=S.caught(e).unwrap();console.error(t);}}getVideoMetrics(){let e={};return p.addOnce(this.context,"setMetrics",(function(t){e=t.data;})),new p("getMetrics").dispatch(this.context),e}getOrCreateEventsFilterByContext(e){if(!Object.prototype.hasOwnProperty.call(this.videoEventsFilterByContext.h,this.context)){let e=null;if(null!=this.customVideoEventsFilterClass){let t=this.customVideoEventsFilterClass;e=r.createInstance(s[t],[this.context]);}else e=new P(this.context);this.videoEventsFilterByContext.h[this.context]=e;}return this.videoEventsFilterByContext.h[this.context]}onDurationChange(e){this.durationTime=e.data.duration;}onCurrentTimeChange(e){let t=this.currentTime!=e.data.currentTime;this.currentTime=e.data.currentTime,this.durationTime=e.data.duration,t&&(this.lastCurrentTimeChangeTs=(new Date).getTime()/1e3),this.media=e.data.media,this.adMedia=null,1==e.data.duration&&this.media instanceof _&&(e.data.duration=1/0);}onMetadataData(e){if(null!=e){let t=e.data;this.media=t,this.durationTime=t.duration;}}onAdMetadataData(e){null!=e&&(this.adMedia=e.data);}onShowMessage(e){null!=e&&(this.message=e.data);}onCloseMessage(e){this.message=null;}appGoingBackground(){new o("appGoingBackground").dispatch(this.context);}appGoingForeground(){new o("appGoingForeground").dispatch(this.context);}requestVideoQualityChange(e){let t=new o("requestVideoQualityChange");t.data=e,t.dispatch(this.context);}playerInfoShow(){new o("playerInfoShow").dispatch(this.context);}playerInfoHide(){new o("playerInfoHide").dispatch(this.context);}searchForThumbByTime(e,t){null!=this.get_player().modules.BradmaxThumbnailsService?this.get_player().modules.BradmaxThumbnailsService.searchForThumbByTime(e,t):t(null);}restartSkinHide(){new c("animateShow").dispatch(this.context);}mediaType(e){let t=null;return e instanceof d&&(e instanceof _?(t="Live",e instanceof v?t="LiveStream":e instanceof y?t="LiveChannel":e instanceof m&&(t="LiveProgramStream")):e instanceof g?t="Catchup":e instanceof f&&(t="Episode")),t}}s["bs.player.plugin.javascriptapi.JavascriptApi"]=e.bs.player.plugin.javascriptapi.JavascriptApi=O,O.__name__="bs.player.plugin.javascriptapi.JavascriptApi",Object.assign(O.prototype,{__class__:O});class j{constructor(e){this.context=e;}destroy(){this.leave();}leave(){new o("pipLeave").dispatch(this.context);}}s["bs.player.plugin.javascriptapi.JavascriptApiPictureInPicture"]=j,j.__name__="bs.player.plugin.javascriptapi.JavascriptApiPictureInPicture",Object.assign(j.prototype,{__class__:j});class P{constructor(e){this.context=e,this.holdedVideoPlayingEvent=null,this.listenersMap=new I,this.trackedVideoEvents=[],this.trackedVideoEvents.push("playing"),this.trackedVideoEvents.push("paused"),this.trackedVideoEvents.push("stopped"),this.trackedVideoEvents.push("complete"),this.attachInternalListeners();}attachInternalListeners(){let e=0,t=this.trackedVideoEvents;for(;e<t.length;){let s=t[e++];u.getInstance().add(this.context,p.__name__,s,D(this,this.onVideoEvent));}}dispatchEvent(e){if(Object.prototype.hasOwnProperty.call(this.listenersMap.h,e.type)){let t=0,s=this.listenersMap.h[e.type];for(;t<s.length;)s[t++](e);}}onVideoEvent(e){null==this.holdedVideoPlayingEvent?"playing"==e.type?(this.holdedVideoPlayingEvent=e,this.waitingPauseTimeoutTimer=k.delay(D(this,this.onWaitingPauseTimeout),50)):this.dispatchEvent(e):("paused"!=e.type&&(this.dispatchEvent(this.holdedVideoPlayingEvent),this.dispatchEvent(e)),this.waitingPauseTimeoutTimer.stop(),this.waitingPauseTimeoutTimer=null,this.holdedVideoPlayingEvent=null);}onWaitingPauseTimeout(){null!=this.holdedVideoPlayingEvent&&this.dispatchEvent(this.holdedVideoPlayingEvent),null!=this.waitingPauseTimeoutTimer&&this.waitingPauseTimeoutTimer.stop(),this.waitingPauseTimeoutTimer=null,this.holdedVideoPlayingEvent=null;}add(e,t){if(-1!=this.trackedVideoEvents.indexOf(e)){if(!Object.prototype.hasOwnProperty.call(this.listenersMap.h,e)){let t=[];this.listenersMap.h[e]=t;}this.listenersMap.h[e].push(t);}else u.getInstance().add(this.context,p.__name__,e,t);}addOnce(e,t){let s=this;if(-1!=this.trackedVideoEvents.indexOf(e)){let i=function(i){t(i),s.remove(e,t);};this.add(e,i);}else u.getInstance().add(this.context,p.__name__,e,t);}remove(e,t){if(-1!=this.trackedVideoEvents.indexOf(e)){if(!Object.prototype.hasOwnProperty.call(this.listenersMap.h,e))return;i.remove(this.listenersMap.h[e],t);}else u.getInstance().remove(this.context,p.__name__,e,t);}onPlayerDestroy(){}}s["bs.player.plugin.javascriptapi.VideoEventsFilterForMobile"]=P,P.__name__="bs.player.plugin.javascriptapi.VideoEventsFilterForMobile",Object.assign(P.prototype,{__class__:P});var T=require("bs.util.BrowserTools");class V{}s["haxe.IMap"]=V,V.__name__="haxe.IMap";class S extends Error{constructor(e,t,s){super(e),this.message=e,this.__previousException=t,this.__nativeException=null!=s?s:this;}unwrap(){return this.__nativeException}static caught(e){return e instanceof S?e:e instanceof Error?new S(e.message,null,e):new F(e,null,e)}}s["haxe.Exception"]=S,S.__name__="haxe.Exception",Object.assign(S.prototype,{__class__:S});var k=require("haxe.Timer");class F extends S{constructor(e,t,s){super(String(e),t,s),this.value=e;}unwrap(){return this.value}}s["haxe.ValueException"]=F,F.__name__="haxe.ValueException",Object.assign(F.prototype,{__class__:F});var I=require("haxe.ds.StringMap");class R{static getClass(e){if(null==e)return null;if(e instanceof Array)return Array;{let t=e.__class__;if(null!=t)return t;let s=R.__nativeClassName(e);return null!=s?R.__resolveNativeClass(s):null}}static __nativeClassName(e){let t=R.__toStr.call(e).slice(8,-1);return "Object"==t||"Function"==t||"Math"==t||"JSON"==t?null:t}static __resolveNativeClass(e){return t[e]}}function D(e,s){return null==s?null:(null==s.__id__&&(s.__id__=t.$haxeUID++),null==e.hx__closures__?e.hx__closures__={}:i=e.hx__closures__[s.__id__],null==i&&(i=s.bind(e),e.hx__closures__[s.__id__]=i),i);var i;}s["js.Boot"]=R,R.__name__="js.Boot",t.$haxeUID|=0,s.Math=Math,Object.defineProperty(String.prototype,"__class__",{value:s.String=String,enumerable:!1,writable:!0}),String.__name__="String",s.Array=Array,Array.__name__="Array",Date.prototype.__class__=s.Date=Date,Date.__name__="Date",R.__toStr={}.toString,w._hx_skip_constructor=!1,O.__plugfaces__="IPlugin";}(exports,window);!function(e,t){e.bs=e.bs||{},e.bs.player=e.bs.player||{},e.bs.player.plugin=e.bs.player.plugin||{},e.bs.player.plugin.keyboard=e.bs.player.plugin.keyboard||{},Math.__name__="Math";var i=require("haxe.Reflect"),s=require("bs.player.core.events.ControlEvent"),n=require("bs.player.core.events.DisplayEvent"),r=require("bs.player.core.events.VideoEvent");class a{constructor(){a._hx_skip_constructor||this._hx_constructor();}_hx_constructor(){this.pluginName="";let e=l.getClass(this);this.pluginName=e.__name__.split(".").pop();let t=this.pluginName,s=exports.configuration;this.pluginConfig=null!=s&&Object.prototype.hasOwnProperty.call(s,t)?i.field(s,t):Object.create(null);}create(){}destroy(){}activate(){}postActivate(){}deactivate(){}eventFilter(e){return !0}registerPlugin(e){}getPluginVersion(){return "v2.14.417"}getPluginName(){return this.pluginName}get_player(){return this.player}set_player(e){return this.player=e}get_variables(){return this.variables}set_variables(e){return this.variables=e}get_eventHub(){return this.eventHub}set_eventHub(e){return this.eventHub=e}get_parentDisplay(){return this.parentDisplay}set_parentDisplay(e){return this.parentDisplay=e}get_display(){return this.display}}a.__name__="bs.player.core.plugin.PluginBase",Object.assign(a.prototype,{__class__:a});class o extends a{constructor(){a._hx_skip_constructor=!0,super(),a._hx_skip_constructor=!1,this._hx_constructor();}_hx_constructor(){this.hasFocus=!1,super._hx_constructor(),this.videoCurrentTime=null,this.videoDurration=null;}create(){super.create(),u.mobile||(window.document.addEventListener("keydown",h(this,this.onKeyDown),!1),this.get_parentDisplay().addEventListener("mouseup",h(this,this.onMouseUp),!1),1==this.get_variables().autoplay&&this.buildInput(),r.add(this.context,"currentTimeChange",h(this,this.onVideoTimeChange)));}onVideoTimeChange(e){null!=e&&null!=e.data&&(this.videoCurrentTime=e.data.currentTime,this.videoDurration=e.data.duration);}destroy(){r.remove(this.context,"currentTimeChange",h(this,this.onVideoTimeChange)),window.document.removeEventListener("keydown",h(this,this.onKeyDown)),this.get_parentDisplay().removeEventListener("mouseup",h(this,this.onMouseUp)),super.destroy();}onMouseUp(e){this.buildInput();}buildInput(){null==this.input&&(this.input=window.document.createElement("input"),this.input.style.zIndex="-1",this.input.style.opacity="0",this.input.style.position="absolute",this.input.style.top="-20px",this.input.style.left="-100px",this.input.style.height="20px",this.input.style.width="100px",this.input.setAttribute("inputmode","none"),this.input.addEventListener("blur",h(this,this.destroyInput),!1),this.get_parentDisplay().insertBefore(this.input,this.get_parentDisplay().firstChild)),this.hasFocus=!0,u.focusElement(this.input,{preventScroll:!0});}destroyInput(e){this.hasFocus=!1,null!=this.input&&(this.input.removeEventListener("blur",h(this,this.destroyInput),!1),this.get_parentDisplay().removeChild(this.input)),this.input=null;}onKeyDown(e){32==e.keyCode&&this.dispatchPlayPause(),39==e.keyCode&&this.seekForward(),37==e.keyCode&&this.seekBackward();}seekForward(){if(null==this.videoCurrentTime||null==this.videoDurration)return;let e=this.videoCurrentTime+10;e>this.videoDurration&&(e=this.videoDurration);let t=new s("skinSeek");t.data={seekedPosition:e,seekSource:"keyboard"},t.dispatch(this.context),new n("animateShow").dispatch(this.context);}seekBackward(){if(null==this.videoCurrentTime||null==this.videoDurration)return;let e=this.videoCurrentTime-10;e<0&&(e=0);let t=new s("skinSeek");t.data={seekedPosition:e,seekSource:"keyboard"},t.dispatch(this.context),new n("animateShow").dispatch(this.context);}dispatchPlayPause(){this.hasFocus&&(new s("skinPlayPause").dispatch(this.context),new n("animateShow").dispatch(this.context));}}e.bs.player.plugin.keyboard.KeyboardSupport=o,o.__name__="bs.player.plugin.keyboard.KeyboardSupport",Object.assign(o.prototype,{__class__:o});var u=require("bs.util.BrowserTools");class l{static getClass(e){if(null==e)return null;if(e instanceof Array)return Array;{let t=e.__class__;if(null!=t)return t;let i=l.__nativeClassName(e);return null!=i?l.__resolveNativeClass(i):null}}static __nativeClassName(e){let t=l.__toStr.call(e).slice(8,-1);return "Object"==t||"Function"==t||"Math"==t||"JSON"==t?null:t}static __resolveNativeClass(e){return t[e]}}function h(e,i){return null==i?null:(null==i.__id__&&(i.__id__=t.$haxeUID++),null==e.hx__closures__?e.hx__closures__={}:s=e.hx__closures__[i.__id__],null==s&&(s=i.bind(e),e.hx__closures__[i.__id__]=s),s);var s;}l.__name__="js.Boot",t.$haxeUID|=0,Object.defineProperty(String.prototype,"__class__",{value:String,enumerable:!1,writable:!0}),String.__name__="String",Array.__name__="Array",l.__toStr={}.toString,a._hx_skip_constructor=!1,o.SEEK_STEP=10,o.__plugfaces__="IPlugin";}(exports,window);const e={default:{season:"Season",episode:"Episode",language:"Language",subtitles:"Subtitles",channels:"Channels",live_tv:"Live TV",error:"Error",warning:"Warning",details:"Details",cannot_decode_media:"Player is not able to decode provided media. Video can be broken or your browser doesn't support such video format.",connection_error:"Connection to server lost. Please check your internet connection and click 'Try again' button.",connection_error_permanent:"There is no connection with server. Link to stream is broken or something is blocking communication between your browser and server.",try_again:"Try again",embed_code:"Embed code",embed_code_copy:"copy to clipboard",embed_code_info:"press Ctrl+C to copy",advertisement_bar_title:"Advertising",video_quality:"Video quality",advertisement_title_on_progressbar:"The program starts right after the ad-break:",advertisement_skip_label:"Skip ad"},en:{season:"Season",episode:"Episode",language:"Language",subtitles:"Subtitles",channels:"Channels",live_tv:"Live TV",error:"Error",warning:"Warning",details:"Details",cannot_decode_media:"Player is not able to decode provided media. Video can be broken or your browser doesn't support such video format.",connection_error:"Connection to server lost. Please check your internet connection and click 'Try again' button.",connection_error_permanent:"There is no connection with server. Link to stream is broken or something is blocking communication between your browser and server.",try_again:"Try again",embed_code:"Embed code",embed_code_copy:"copy to clipboard",embed_code_info:"press Ctrl+C to copy",advertisement_bar_title:"Advertising",video_quality:"Video quality",advertisement_title_on_progressbar:"The program starts right after the ad-break:",advertisement_skip_label:"Skip ad"},no:{season:"Sesong",episode:"Episode",language:"Språk",subtitles:"Undertekst",channels:"Kanaler",live_tv:"Direkte-TV",error:"Error",warning:"Advarsel",details:"Details",cannot_decode_media:"Player is not able to decode provided media. Video can be broken or your browser doesn't support such video format.",connection_error:"Connection to server lost. Please check your internet connection and click 'Try again' button.",connection_error_permanent:"There is no connection with server. Link to stream is broken or something is blocking communication between your browser and server.",try_again:"Try again",embed_code:"Embed code",embed_code_copy:"copy to clipboard",embed_code_info:"press Ctrl+C to copy",advertisement_bar_title:"Reklame",video_quality:"Video kvalitet",advertisement_title_on_progressbar:"Programmet starter rett etter annonse-pausen:",advertisement_skip_label:"Hoppe over annonsend"},da:{season:"Sæson",episode:"Episode",language:"Sprog",subtitles:"Undertekster",channels:"Kanaler",live_tv:"Kanaler",error:"Error",warning:"Advarsel",details:"Details",cannot_decode_media:"Player is not able to decode provided media. Video can be broken or your browser doesn't support such video format.",connection_error:"Connection to server lost. Please check your internet connection and click 'Try again' button.",connection_error_permanent:"There is no connection with server. Link to stream is broken or something is blocking communication between your browser and server.",try_again:"Try again",embed_code:"Embed code",embed_code_copy:"copy to clipboard",embed_code_info:"press Ctrl+C to copy",advertisement_bar_title:"Reklame",video_quality:"Videokvalitet",advertisement_title_on_progressbar:"Programmet starter lige efter annoncepausen:",advertisement_skip_label:"Spring annoncen over"},fi:{season:"Kausi",episode:"Jakso",language:"Kieli",subtitles:"Tekstitykset",channels:"Kanavat",live_tv:"Live-TV",error:"Error",warning:"Varoitus",details:"Details",cannot_decode_media:"Player is not able to decode provided media. Video can be broken or your browser doesn't support such video format.",connection_error:"Connection to server lost. Please check your internet connection and click 'Try again' button.",connection_error_permanent:"There is no connection with server. Link to stream is broken or something is blocking communication between your browser and server.",try_again:"Try again",embed_code:"Embed code",embed_code_copy:"copy to clipboard",embed_code_info:"press Ctrl+C to copy",advertisement_bar_title:"Mainonta",video_quality:"Videon laatu",advertisement_title_on_progressbar:"Ohjelma käynnistyy heti mainoskatkon jälkeen:",advertisement_skip_label:"Ohita mainos"},sv:{season:"Säsong",episode:"Avsnitt",language:"Språk",subtitles:"Textning",channels:"Kanaler",live_tv:"Kanaler",error:"Error",warning:"Varning",details:"Details",cannot_decode_media:"Player is not able to decode provided media. Video can be broken or your browser doesn't support such video format.",connection_error:"Connection to server lost. Please check your internet connection and click 'Try again' button.",connection_error_permanent:"There is no connection with server. Link to stream is broken or something is blocking communication between your browser and server.",try_again:"Try again",embed_code:"Embed code",embed_code_copy:"copy to clipboard",embed_code_info:"press Ctrl+C to copy",advertisement_bar_title:"Reklam",video_quality:"Videokvalitét",advertisement_title_on_progressbar:"Programmet startar direkt efter annons pausen:",advertisement_skip_label:"Hoppa över annonsen"},pl:{season:"Sezon",episode:"Epizod",language:"Język",subtitles:"Napisy",channels:"Programy",live_tv:"Na żywo",error:"Błąd",warning:"Uwaga",details:"Szczegóły",cannot_load_media:"Odtwarzacz nie mógł zdekodować dostarczonego wideo. Wideo może być uszkodzone lub twoja przeglądarka nie wspiera dostarczonego formatu wideo.",connection_error:"Utracono połączenie z serwerem. Sprawdź połączenie internetowe i kliknik przycisk 'Połącz'.",connection_error_permanent:"Brak połączenia z serwerem. Link do strumienia jest uszkodzony lub coś blokuje komunikację między przeglądarką a serwerem.",try_again:"Połącz",embed_code:"Embed code",embed_code_copy:"kopiuj do schowka",embed_code_info:"naciśnij Ctrl+C, aby skopiować",advertisement_bar_title:"Reklama",video_quality:"Jakość",advertisement_title_on_progressbar:"Program rozpocznie się zaraz po reklamach:",advertisement_skip_label:"Pomiń reklamę"}};var mp4="data:video/mp4;base64,AAAAHGZ0eXBNNFYgAAACAGlzb21pc28yYXZjMQAAAAhmcmVlAAAGF21kYXTeBAAAbGliZmFhYyAxLjI4AABCAJMgBDIARwAAArEGBf//rdxF6b3m2Ui3lizYINkj7u94MjY0IC0gY29yZSAxNDIgcjIgOTU2YzhkOCAtIEguMjY0L01QRUctNCBBVkMgY29kZWMgLSBDb3B5bGVmdCAyMDAzLTIwMTQgLSBodHRwOi8vd3d3LnZpZGVvbGFuLm9yZy94MjY0Lmh0bWwgLSBvcHRpb25zOiBjYWJhYz0wIHJlZj0zIGRlYmxvY2s9MTowOjAgYW5hbHlzZT0weDE6MHgxMTEgbWU9aGV4IHN1Ym1lPTcgcHN5PTEgcHN5X3JkPTEuMDA6MC4wMCBtaXhlZF9yZWY9MSBtZV9yYW5nZT0xNiBjaHJvbWFfbWU9MSB0cmVsbGlzPTEgOHg4ZGN0PTAgY3FtPTAgZGVhZHpvbmU9MjEsMTEgZmFzdF9wc2tpcD0xIGNocm9tYV9xcF9vZmZzZXQ9LTIgdGhyZWFkcz02IGxvb2thaGVhZF90aHJlYWRzPTEgc2xpY2VkX3RocmVhZHM9MCBucj0wIGRlY2ltYXRlPTEgaW50ZXJsYWNlZD0wIGJsdXJheV9jb21wYXQ9MCBjb25zdHJhaW5lZF9pbnRyYT0wIGJmcmFtZXM9MCB3ZWlnaHRwPTAga2V5aW50PTI1MCBrZXlpbnRfbWluPTI1IHNjZW5lY3V0PTQwIGludHJhX3JlZnJlc2g9MCByY19sb29rYWhlYWQ9NDAgcmM9Y3JmIG1idHJlZT0xIGNyZj0yMy4wIHFjb21wPTAuNjAgcXBtaW49MCBxcG1heD02OSBxcHN0ZXA9NCB2YnZfbWF4cmF0ZT03NjggdmJ2X2J1ZnNpemU9MzAwMCBjcmZfbWF4PTAuMCBuYWxfaHJkPW5vbmUgZmlsbGVyPTAgaXBfcmF0aW89MS40MCBhcT0xOjEuMDAAgAAAAFZliIQL8mKAAKvMnJycnJycnJycnXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXiEASZACGQAjgCEASZACGQAjgAAAAAdBmjgX4GSAIQBJkAIZACOAAAAAB0GaVAX4GSAhAEmQAhkAI4AhAEmQAhkAI4AAAAAGQZpgL8DJIQBJkAIZACOAIQBJkAIZACOAAAAABkGagC/AySEASZACGQAjgAAAAAZBmqAvwMkhAEmQAhkAI4AhAEmQAhkAI4AAAAAGQZrAL8DJIQBJkAIZACOAAAAABkGa4C/AySEASZACGQAjgCEASZACGQAjgAAAAAZBmwAvwMkhAEmQAhkAI4AAAAAGQZsgL8DJIQBJkAIZACOAIQBJkAIZACOAAAAABkGbQC/AySEASZACGQAjgCEASZACGQAjgAAAAAZBm2AvwMkhAEmQAhkAI4AAAAAGQZuAL8DJIQBJkAIZACOAIQBJkAIZACOAAAAABkGboC/AySEASZACGQAjgAAAAAZBm8AvwMkhAEmQAhkAI4AhAEmQAhkAI4AAAAAGQZvgL8DJIQBJkAIZACOAAAAABkGaAC/AySEASZACGQAjgCEASZACGQAjgAAAAAZBmiAvwMkhAEmQAhkAI4AhAEmQAhkAI4AAAAAGQZpAL8DJIQBJkAIZACOAAAAABkGaYC/AySEASZACGQAjgCEASZACGQAjgAAAAAZBmoAvwMkhAEmQAhkAI4AAAAAGQZqgL8DJIQBJkAIZACOAIQBJkAIZACOAAAAABkGawC/AySEASZACGQAjgAAAAAZBmuAvwMkhAEmQAhkAI4AhAEmQAhkAI4AAAAAGQZsAL8DJIQBJkAIZACOAAAAABkGbIC/AySEASZACGQAjgCEASZACGQAjgAAAAAZBm0AvwMkhAEmQAhkAI4AhAEmQAhkAI4AAAAAGQZtgL8DJIQBJkAIZACOAAAAABkGbgCvAySEASZACGQAjgCEASZACGQAjgAAAAAZBm6AnwMkhAEmQAhkAI4AhAEmQAhkAI4AhAEmQAhkAI4AhAEmQAhkAI4AAAAhubW9vdgAAAGxtdmhkAAAAAAAAAAAAAAAAAAAD6AAABDcAAQAAAQAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAwAAAzB0cmFrAAAAXHRraGQAAAADAAAAAAAAAAAAAAABAAAAAAAAA+kAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAABAAAAAALAAAACQAAAAAAAkZWR0cwAAABxlbHN0AAAAAAAAAAEAAAPpAAAAAAABAAAAAAKobWRpYQAAACBtZGhkAAAAAAAAAAAAAAAAAAB1MAAAdU5VxAAAAAAALWhkbHIAAAAAAAAAAHZpZGUAAAAAAAAAAAAAAABWaWRlb0hhbmRsZXIAAAACU21pbmYAAAAUdm1oZAAAAAEAAAAAAAAAAAAAACRkaW5mAAAAHGRyZWYAAAAAAAAAAQAAAAx1cmwgAAAAAQAAAhNzdGJsAAAAr3N0c2QAAAAAAAAAAQAAAJ9hdmMxAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAALAAkABIAAAASAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAGP//AAAALWF2Y0MBQsAN/+EAFWdCwA3ZAsTsBEAAAPpAADqYA8UKkgEABWjLg8sgAAAAHHV1aWRraEDyXyRPxbo5pRvPAyPzAAAAAAAAABhzdHRzAAAAAAAAAAEAAAAeAAAD6QAAABRzdHNzAAAAAAAAAAEAAAABAAAAHHN0c2MAAAAAAAAAAQAAAAEAAAABAAAAAQAAAIxzdHN6AAAAAAAAAAAAAAAeAAADDwAAAAsAAAALAAAACgAAAAoAAAAKAAAACgAAAAoAAAAKAAAACgAAAAoAAAAKAAAACgAAAAoAAAAKAAAACgAAAAoAAAAKAAAACgAAAAoAAAAKAAAACgAAAAoAAAAKAAAACgAAAAoAAAAKAAAACgAAAAoAAAAKAAAAiHN0Y28AAAAAAAAAHgAAAEYAAANnAAADewAAA5gAAAO0AAADxwAAA+MAAAP2AAAEEgAABCUAAARBAAAEXQAABHAAAASMAAAEnwAABLsAAATOAAAE6gAABQYAAAUZAAAFNQAABUgAAAVkAAAFdwAABZMAAAWmAAAFwgAABd4AAAXxAAAGDQAABGh0cmFrAAAAXHRraGQAAAADAAAAAAAAAAAAAAACAAAAAAAABDcAAAAAAAAAAAAAAAEBAAAAAAEAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAkZWR0cwAAABxlbHN0AAAAAAAAAAEAAAQkAAADcAABAAAAAAPgbWRpYQAAACBtZGhkAAAAAAAAAAAAAAAAAAC7gAAAykBVxAAAAAAALWhkbHIAAAAAAAAAAHNvdW4AAAAAAAAAAAAAAABTb3VuZEhhbmRsZXIAAAADi21pbmYAAAAQc21oZAAAAAAAAAAAAAAAJGRpbmYAAAAcZHJlZgAAAAAAAAABAAAADHVybCAAAAABAAADT3N0YmwAAABnc3RzZAAAAAAAAAABAAAAV21wNGEAAAAAAAAAAQAAAAAAAAAAAAIAEAAAAAC7gAAAAAAAM2VzZHMAAAAAA4CAgCIAAgAEgICAFEAVBbjYAAu4AAAADcoFgICAAhGQBoCAgAECAAAAIHN0dHMAAAAAAAAAAgAAADIAAAQAAAAAAQAAAkAAAAFUc3RzYwAAAAAAAAAbAAAAAQAAAAEAAAABAAAAAgAAAAIAAAABAAAAAwAAAAEAAAABAAAABAAAAAIAAAABAAAABgAAAAEAAAABAAAABwAAAAIAAAABAAAACAAAAAEAAAABAAAACQAAAAIAAAABAAAACgAAAAEAAAABAAAACwAAAAIAAAABAAAADQAAAAEAAAABAAAADgAAAAIAAAABAAAADwAAAAEAAAABAAAAEAAAAAIAAAABAAAAEQAAAAEAAAABAAAAEgAAAAIAAAABAAAAFAAAAAEAAAABAAAAFQAAAAIAAAABAAAAFgAAAAEAAAABAAAAFwAAAAIAAAABAAAAGAAAAAEAAAABAAAAGQAAAAIAAAABAAAAGgAAAAEAAAABAAAAGwAAAAIAAAABAAAAHQAAAAEAAAABAAAAHgAAAAIAAAABAAAAHwAAAAQAAAABAAAA4HN0c3oAAAAAAAAAAAAAADMAAAAaAAAACQAAAAkAAAAJAAAACQAAAAkAAAAJAAAACQAAAAkAAAAJAAAACQAAAAkAAAAJAAAACQAAAAkAAAAJAAAACQAAAAkAAAAJAAAACQAAAAkAAAAJAAAACQAAAAkAAAAJAAAACQAAAAkAAAAJAAAACQAAAAkAAAAJAAAACQAAAAkAAAAJAAAACQAAAAkAAAAJAAAACQAAAAkAAAAJAAAACQAAAAkAAAAJAAAACQAAAAkAAAAJAAAACQAAAAkAAAAJAAAACQAAAAkAAACMc3RjbwAAAAAAAAAfAAAALAAAA1UAAANyAAADhgAAA6IAAAO+AAAD0QAAA+0AAAQAAAAEHAAABC8AAARLAAAEZwAABHoAAASWAAAEqQAABMUAAATYAAAE9AAABRAAAAUjAAAFPwAABVIAAAVuAAAFgQAABZ0AAAWwAAAFzAAABegAAAX7AAAGFwAAAGJ1ZHRhAAAAWm1ldGEAAAAAAAAAIWhkbHIAAAAAAAAAAG1kaXJhcHBsAAAAAAAAAAAAAAAALWlsc3QAAAAlqXRvbwAAAB1kYXRhAAAAAQAAAABMYXZmNTUuMzMuMTAw";
exports.dashjs=bradmax.dashjs;delete bradmax.dashjs;exports.i18n=e;exports.mp4=mp4;

exports.configuration={"Chromecast":{},"KeyboardSupport":{},"BradmaxAnalytics":{},"Video":{},"JavascriptApi":{},"VideoHlsJs":{},"PictureInPicture":{},"AirPlay":{},"VideoDashJs":{},"AdvertisementDataProvider":{},"HtmlSkin":{"name":"zebra","color":"rgb(255, 0, 115)","layout":"https://bradm.ax/player/VERSION/theme/zebra/layout.html","styles":["https://bradm.ax/player/VERSION/theme/zebra/style.css"],"font":{"id":"lato_google_font","name":"Lato","src":"https://fonts.googleapis.com/css2?family=Lato:wght@300;400&display=swap","fetch":true,"size":"12px","family":["Lato","sans-serif"]},"icon":{"svg":{"id":"bradmax_zebra_iconset","name":"bradmax zebra theme","iconset":"https://bradm.ax/player/VERSION/theme/zebra/iconset.svg","size":"22px"}},"share":{"svg":{"id":"bradmax_zebra_iconset","name":"bradmax zebra theme","iconset":"https://bradm.ax/player/VERSION/theme/zebra/iconset.svg","size":"22px"}},"prefix":"bmp","css":{"adPlaying":"iab-playing","vpaidPlaying":"vpaid-playing"}},"BradmaxDataProvider":{},"FreeWheel":{}};exports.variables={"pictureInPictureButtonVisible":false,"videoCastEnabled":false,"bradmaxAnalytics":{"clientToken":"UKHX-ABVGnEEnCLAfVGn-EvGV3K7dAVVbnoEFG"}};exports.bs.player.composer.Embeder.main();})();